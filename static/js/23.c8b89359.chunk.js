webpackJsonp([23],{1015:function(e,t,n){"use strict";t.i=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.Verify.SaveVerify,r.b.VERIFY).then(function(){Object(i.b)("New Verify saved Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving New Verify.")})];case 1:return[2,t.sent()]}})})},t.f=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({buildingName:e},a.a.Verify.FetchVerify,r.b.VERIFY)];case 1:return[2,t.sent()]}})})},t.b=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({_id:e},a.a.Verify.DeleteVerify,r.b.VERIFY).then(function(){Object(i.b)(" Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.c=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({_id:e},a.a.Verify.DeleteVerifyDetail,r.b.VERIFY).then(function(){Object(i.b)(" Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.g=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({buildingName:e},a.a.Verify.FetchVerifyDetail,r.b.VERIFY)];case 1:return[2,t.sent()]}})})},t.j=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.Verify.SaveVerifyDetail,r.b.VERIFY).then(function(){Object(i.b)("Verify details saved Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Verify details.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return s(this,void 0,void 0,function(){var t,n;return c(this,function(s){switch(s.label){case 0:return t=(new Date).ToEasternDateTime(),n=JSON.parse(o.a.getItem("user")),e&&(e._id=e._id&&e._id,e.projectID=e.projectID?e.projectID:"",e.projectNumber=e.projectNumber?e.projectNumber:"",e.implementation=e.implementation?e.implementation:"",e.projectManager=e.projectManager?e.projectManager:"",e.assets=e.assets?e.assets:[],e.descriptionOfECMProject=e.descriptionOfECMProject?e.descriptionOfECMProject:"",e.energy=e.energy?e.energy:"",e.cost=e.cost?e.cost:"",e.greenHouse=e.greenHouse?e.greenHouse:"",e.estimatedImplementationCost=e.estimatedImplementationCost?e.estimatedImplementationCost:"",e.implementationPlanDescription=e.implementationPlanDescription?e.implementationPlanDescription:"",e.keyDates=e.keyDates?e.keyDates:"",e.stakeholders=e.stakeholders?e.stakeholders:[],e.objectives=e.objectives?e.objectives:"",e.updatedBy=e.updatedBy?n.name+", ("+t+")":n.name+", "+t,e.lastUpdated=e.lastUpdated?new Date(e.lastUpdated).ToEasternDateTime():t,e.optionSelected=e.optionSelected?e.optionSelected:"",e.desiredAccuracy=e.desiredAccuracy?e.desiredAccuracy:"",e.overallApproach=e.overallApproach?e.overallApproach:"",e.baselinePeriod=e.baselinePeriod?e.baselinePeriod:"",e.postRetrofitPeriod=e.postRetrofitPeriod?e.postRetrofitPeriod:"",e.descriptionofMeasurement=e.descriptionofMeasurement?e.descriptionofMeasurement:"",e.linkedDocuments=e.linkedDocuments?e.linkedDocuments:"",e.energyAndDemandSavings=e.energyAndDemandSavings?e.energyAndDemandSavings:"",e.calculatingSavingsUncertainty=e.calculatingSavingsUncertainty?e.calculatingSavingsUncertainty:"",e.costSavingsAndGreenhouseGasEmissions=e.costSavingsAndGreenhouseGasEmissions?e.costSavingsAndGreenhouseGasEmissions:"",e.approachForExtrapolatingResults=e.approachForExtrapolatingResults?e.approachForExtrapolatingResults:"",e.OtherInternalExpenses=e.OtherInternalExpenses?e.OtherInternalExpenses:[{description:"",cost:"",notes:""}],e.totalInternalExpenses=e.totalInternalExpenses?e.totalInternalExpenses:"",e.totalInternalExpensesNotes=e.totalInternalExpensesNotes?e.totalInternalExpensesNotes:"",e.externalLabourCosts=e.externalLabourCosts?e.externalLabourCosts:[{description:"",cost:"",notes:""}],e.otherExpenditure=e.otherExpenditure?e.otherExpenditure:[{description:"",Qty:"",rate:"",totalCost:"",notes:""}],e.totalExternalExpenses=e.totalExternalExpenses?e.totalExternalExpenses:"",e.totalExternalExpensesNotes=e.totalExternalExpensesNotes?e.totalExternalExpensesNotes:"",e.totalBudget=e.totalBudget?e.totalBudget:"",e.totalBudgetNotes=e.totalBudgetNotes?e.totalBudgetNotes:"",e.costNotes=e.costNotes?e.costNotes:"",e.estimatedImplementationCostNotes=e.estimatedImplementationCostNotes?e.estimatedImplementationCostNotes:"",e.filesNames=e.filesNames?e.filesNames:[""],e.scopeList=e.scopeList?e.scopeList:[{_id:"",projectID:"",inScope:"",outOfScope:""}],e.deliverableList=e.deliverableList?e.deliverableList:[{_id:"",projectID:"",deliverable:"",dueDate:""}],e.keyConsiderationsList=e.keyConsiderationsList?e.keyConsiderationsList:[],e.successCriteriaList=e.successCriteriaList?e.successCriteriaList:[],e.keyParameterList=e.keyParameterList?e.keyParameterList:[],e.otherParameterList=e.otherParameterList?e.otherParameterList:[],e.PotentialInteractiveList=e.PotentialInteractiveList?e.PotentialInteractiveList:[],e.BaselineAdjustmentsList=e.BaselineAdjustmentsList?e.BaselineAdjustmentsList:[],e.MeasurementEquipmentList=e.MeasurementEquipmentList?e.MeasurementEquipmentList:[],e.BenefitsSummary=e.BenefitsSummary?e.BenefitsSummary:Object(),e.BenefitsDetails=e.BenefitsDetails?e.BenefitsDetails:Object()),[4,Object(a.f)({model:e},a.a.Verify.SaveProjectInformation,r.b.VERIFY).then(function(){Object(i.b)("save Project Information Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving.")})];case 1:return[2,s.sent()]}})})},t.e=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({projectID:e},a.a.Verify.FetchProjectInformation,r.b.VERIFY)];case 1:return[2,t.sent()]}})})},t.d=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.d)(a.a.Verify.GetHistorianArchive,"modelID="+e)];case 1:return[2,t.sent()]}})})},t.k=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.Verify.SaveVerifyTaskInformation,r.b.VERIFY).then(function(){Object(i.b)("Saved Verify Task Information Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({modelID:e},a.a.Verify.FetchVerifyTaskInformation,r.b.VERIFY)];case 1:return[2,t.sent()]}})})},t.l=function(e,t){return s(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({ontology:e,workerEstimatedDuration:t},a.a.Verify.UpdateTaskWorkerEstimateDuration,r.b.VERIFY).then(function(){Object(i.b)("Updated Estimate Duration Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving.")})];case 1:return[2,n.sent()]}})})};var a=n(13),r=n(7),i=n(9),o=n(14),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}},1032:function(e,t,n){"use strict";t.d=function(e,t,n,c){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({buildingName:e,model:t,isEdit:n,saveStages:c},a.a.TASKTEMPLATE.SAVEPHASE,r.b.TASK).then(function(){Object(i.b)("Workflow "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Workflow.")})];case 1:return[2,o.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return o(this,void 0,void 0,function(){return s(this,function(i){switch(i.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASEDETAILLIST,r.b.TASK,n)];case 1:return[2,i.sent()]}})})},t.c=function(e,t,n){void 0===n&&(n=!0);return o(this,void 0,void 0,function(){return s(this,function(i){switch(i.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,r.b.TASK,n)];case 1:return[2,i.sent()]}})})},t.e=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({taskID:e,status:t},a.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,r.b.TASK).then(function(){n||Object(i.b)("Status Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while update Status.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.DEPENDENCY.GETDEPENDENCY,r.b.TASK,!0)];case 1:return[2,n.sent()]}})})};var a=n(13),r=n(7),i=n(9),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}},1052:function(e,t,n){"use strict";t.f=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(i.f)({buildingName:e,purchaseOrder:t,isEdit:n},i.a.PURCHASEORDER.SavePurchaseOrder,a.b.PURCHASEORDER).then(function(){Object(r.b)("Purchase Order "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Purchase Order.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({buildingName:e,poID:t},i.a.PURCHASEORDER.DeletePO_Items,a.b.PURCHASEORDER)];case 1:return[2,n.sent()]}})})},t.c=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.e)({buildingName:e,purchaseOrderID:t,workOrderID:n},i.a.PURCHASEORDER.FetchPurchaseOrders,a.b.PURCHASEORDER)];case 1:return[2,r.sent()]}})})},t.b=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,purchaseOrderID:t},i.a.PURCHASEORDER.FetchPurchaseOrderItems,a.b.PURCHASEORDER)];case 1:return[2,n.sent()]}})})},t.d=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.PURCHASEORDER.GetShipToItems,a.b.VENDOR)];case 1:return[2,t.sent()]}})})},t.g=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({purchaseOrderID:e,newStatus:t},i.a.PURCHASEORDER.SetNewStatusPO,a.b.PURCHASEORDER).then(function(){Object(r.b)("Purchase Order Updated Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Purchase Order.")})];case 1:return[2,n.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.PURCHASEORDER.GetWorkOrdersList,a.b.PURCHASEORDER)];case 1:return[2,t.sent()]}})})};var a=n(7),r=n(9),i=n(13),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}},996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=(n.n(a),n(11)),i=n(42),o=n.n(i),s=n(1015),c=n(10),l=n(1052),u=n(50),d=n(12),m=n(1032),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((a=a.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},b=new Date,v=new Date,y=new Date,g=new Date,E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={verifyObj:Object(),WOList:[],phaseTemplateDetailList:[]},n.handleChange=n.handleChange.bind(n),n.handleVerifyType=n.handleVerifyType.bind(n),n.startDateHandler=n.startDateHandler.bind(n),n.plainLastModifiedHandler=n.plainLastModifiedHandler.bind(n),n.finishDateHandler=n.finishDateHandler.bind(n),n.fetchVerify=n.fetchVerify.bind(n),n.saveVerify=n.saveVerify.bind(n),n.handleVerifyObjChange=n.handleVerifyObjChange.bind(n),n._getWorkOrdersList=n._getWorkOrdersList.bind(n),n.savingToDateDateHandler=n.savingToDateDateHandler.bind(n),n.handleWorkflowChange=n.handleWorkflowChange.bind(n),n._getPhaseTemplateDetails=n._getPhaseTemplateDetails.bind(n),n.createWorkFlow=n.createWorkFlow.bind(n),n}return f(t,e),t.prototype.componentWillMount=function(){return p(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this.startDateHandler(new Date),this.finishDateHandler(new Date),this.plainLastModifiedHandler(new Date),this.savingToDateDateHandler(new Date),[4,this._getWorkOrdersList()];case 1:return e.sent(),[4,this._getPhaseTemplateDetails()];case 2:return e.sent(),[2]}})})},t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return this.props.id?[4,this.fetchVerify()]:[3,2];case 1:return t.sent(),[3,3];case 2:document.getElementById("VerfiyTypeModel")&&((e=this.state.verifyObj).startDate=b.toString(),e.plainLastModified=y.toString(),e.finishDate=v.toString(),this.setState({verifyObj:e},function(){document.getElementById("VerfiyTypeModel").click()})),t.label=3;case 3:return[2]}})})},t.prototype._getPhaseTemplateDetails=function(){return p(this,void 0,void 0,function(){var e=this;return h(this,function(t){switch(t.label){case 0:return[4,Object(u.j)(this.props.buildingName).then(function(t){t.length>0&&t[0].ontology?e.setState({phaseTemplateDetailList:t}):e.setState({phaseTemplateDetailList:[]})})];case 1:return t.sent(),[2]}})})},t.prototype._getWorkOrdersList=function(){return p(this,void 0,void 0,function(){var e=this;return h(this,function(t){switch(t.label){case 0:return Object(c.a)(!0),[4,Object(l.e)(this.props.buildingName).then(function(t){e.setState({WOList:t})}).catch(function(e){return e})];case 1:return t.sent(),Object(c.a)(!1),[2]}})})},t.prototype.fetchVerify=function(){return p(this,void 0,void 0,function(){var e=this;return h(this,function(t){switch(t.label){case 0:return[4,Object(s.f)(this.props.buildingName).then(function(t){if(t){var n=t.find(function(t){return t._id==e.props.id});b=new Date(n.startDate),y=new Date(n.plainLastModified),v=new Date(n.finishDate),g=new Date(n.savingToDate),e.setState({verifyObj:n})}}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.createWorkFlow=function(e,t){return p(this,void 0,void 0,function(){var n,a,r,i,o,s,c,l,u,f;return h(this,function(p){switch(p.label){case 0:for(n=this.props.buildingName,a=Object(),t._id&&t._id.length>0?a.ontology=Object(d.l)(7):a.ontology=t&&t?t.ontology:Object(d.l)(7),a.description=e.description,a.module=e.module,a.status="Planned",a.phaseID=Object(d.k)(7).toString(),a.templateID=e.templateID,a.templateType=e.templateType,a.contractFileName=t&&t.projectName?t.projectName+"-"+t.ontology:"",a.contractID=t&&t.ontology?t.ontology:"",a.stageTemplateOnology=[],a.stages=[],r=0;r<e.stageTemplates.length;r++){for(i=e.stageTemplates[r],o=Object(),s=Object(d.l)(7),o.task=s,o.taskNumber=Object(d.k)(7).toString(),o.description=i.description,o.enteredBy=i.enteredBy,o.enteredByName=i.enteredByName,o.assignedTo=i.assignedTo,o.hasChat=!0,o.entryTimeStamp=i.entryTimeStamp,o.criticality=i.criticality,o.equipSubject=i.equipSubject,o.equipRdfsLabel=i.equipRdfsLabel,o.spaceSubject=i.spaceSubject,o.spaceRdfsLabel=i.spaceRdfsLabel,o.floor=i.floor,o.building=i.building,o.workOrder=i.workOrder,o.status="Planned",o.acknowledged=!0,o.archived=!1,o.startTime="",o.note="",o.isSequence=!0,o.QRTag=i.QRTag,o.isQRTask=i.isQRTask,o.subTasks=[],o.workflowType=i.workflowType,o.redirectionLink=i.redirectionLink,o.isStage=!0,o.isActivated=!1,o.estimatedStartTime=new Date,c=new Date,o.estimatedEndTime=new Date(c.setDate(new Date(c).getDate()+2)),o.subTasks=[],l=0;l<i.subTasks.length;l++)u=i.subTasks[l],(f=Object()).subTask=Object(d.l)(7),f.taskNumber=Object(d.k)(7).toString(),f.description=u.description,f.enteredBy=u.enteredBy,f.enteredByName=u.enteredByName,f.assignedTo=u.assignedTo,f.assignedDepartment=u.assignedDepartment,f.hasChat=!0,f.entryTimeStamp=u.entryTimeStamp,f.criticality=u.criticality,f.equipSubject=o.equipSubject,f.equipRdfsLabel=o.equipRdfsLabel,f.spaceSubject=o.spaceSubject,f.spaceRdfsLabel=o.spaceRdfsLabel,f.building=o.building,f.workOrder=u.workOrder,f.status="Planned",f.acknowledged=!0,f.archived=!1,f.index=u.index,f.parentTask=o.task,f.note=u.note,f.relatedLink=u.relatedLink,f.duration=u.duration,f.durationUnit=u.durationUnit,f.workerDuration=u.workerDuration,f.workerDurationUnit=u.workerDurationUnit,f.fileName=u.fileName,f.oldFileName=u.oldFileName,f.startTime="",f.workType=u.workType,f.checklistID=u.checklistID,f.isQRTask=u.isQRTask,f.QRTag=u.QRTag,f.notifyViaEmail=u.notifyViaEmail,f.notifyViaSMS=u.notifyViaSMS,f.estimatedStartTime=o.estimatedStartTime,f.estimatedEndTime=o.estimatedEndTime,f.workflowType=u.workflowType,f.redirectionLink=u.redirectionLink,f.isStage=!0,f.isActivated=!1,f.acknowledged=!0,f.archived=!1,o.subTasks.push(f);a&&a.stages&&a.stages.push(o)}return[4,Object(m.d)(n,a,!1,!0).then(function(e){}).catch(function(e){return e})];case 1:return p.sent(),[2]}})})},t.prototype.saveVerify=function(){return p(this,void 0,void 0,function(){var e,t,n,a,r,i,o=this;return h(this,function(c){switch(c.label){case 0:return e=this.state.phaseTemplateDetailList,t=this.state.phaseTemplateDetailList,n=this.props,a=n.buildingName,r=n.instance,(i=this.state.verifyObj).ontology&&""!=i.ontology&&void 0!=i.ontology||(i.ontology=Object(d.l)(8)),i.buildingName=a,[4,Object(s.i)(i).then(function(n){return p(o,void 0,void 0,function(){var n,o,s;return h(this,function(c){switch(c.label){case 0:return i.workflowTemplate&&""!=i.workflowTemplate?(n=t&&t.find(function(e){return e.ontology==i.workflowTemplate}))&&n.ontology?[4,this.createWorkFlow(n,i)]:[3,2]:[3,4];case 1:c.sent(),c.label=2;case 2:return this.props.id?[3,4]:i.workflowTemplate&&""!=i.workflowTemplate?(o=e&&e.find(function(e){return e.ontology==i.workflowTemplate}),s=!o.uses||void 0==o.uses&&NaN==o.uses?"1":(o&&o.uses+1).toString(),[4,Object(u.o)(a,o.ontology,s).then(function(e){}).catch(function(e){return e})]):[3,4];case 3:c.sent(),c.label=4;case 4:return b=new Date,v=new Date,y=new Date,g=new Date,this.setState({verifyObj:Object()},function(){window.location.hash=r+"/"+a+"/Verify"}),[2]}})})}).catch(function(e){console.log(e)})];case 1:return c.sent(),[2]}})})},t.prototype.handleChange=function(e){var t=this.state.verifyObj;t[e.target.name]=e.target.value,this.setState({verifyObj:t})},t.prototype.handleVerifyType=function(e){var t=this.state.verifyObj;t.verifyType=e,this.setState({verifyObj:t})},t.prototype.savingToDateDateHandler=function(e){var t=this.state.verifyObj;t.savingToDate=e.toString(),g=e,this.setState({verifyObj:t})},t.prototype.startDateHandler=function(e){var t=this.state.verifyObj;t.startDate=e.toString(),b=e,this.setState({verifyObj:t})},t.prototype.finishDateHandler=function(e){var t=this.state.verifyObj;t.finishDate=e.toString(),v=e,this.setState({verifyObj:t})},t.prototype.plainLastModifiedHandler=function(e){var t=this.state.verifyObj;t.plainLastModified=e.toString(),y=e,this.setState({verifyObj:t})},t.prototype.handleVerifyObjChange=function(e,t){var n=this.state.verifyObj;n[e]=t,this.setState({verifyObj:n})},t.prototype.handleWorkflowChange=function(e){var t=this.state.verifyObj,n=e.target.name;"checkbox"==e.target.type?t[""+n]=e.target.checked:t[""+n]=e.target.value,this.setState({verifyObj:t})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,s=this.state,c=s.verifyObj,l=s.WOList,u=s.phaseTemplateDetailList,d=c.projectName&&c.projectName.length>0&&c.verifyType&&c.verifyType.length>0&&c.percentComplete&&c.percentComplete.length>0&&c.valuationImprovement&&c.valuationImprovement.length>0&&!0;return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},"Measure"==c.verifyType&&a.createElement("h4",{className:"title"},"Verify Project Creation: Measure"),"IPMVP"==c.verifyType&&a.createElement("h4",{className:"title"},"Verify Project Creation: IPMVP"),a.createElement("hr",null),c.verifyType&&a.createElement("div",{className:"row"},a.createElement("div",{className:""},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"projectName"},c.verifyType+" Workflow Template:"))),a.createElement("div",{className:"col-md-8"},a.createElement("select",{className:"form-control",id:"workflowTemplate",name:"workflowTemplate",value:c.workflowTemplate,onChange:this.handleWorkflowChange},a.createElement("option",{value:""},"Select Workflow Template"),u&&u.length>0&&u.map(function(e){return e.templateType==c.verifyType&&c.verifyType?a.createElement("option",{value:e&&e.ontology},e&&e.description):""})))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"projectName"},"Project Name:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{id:"projectName",name:"projectName",type:"text",className:"form-control",value:c.projectName,onChange:function(t){return e.handleChange(t)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"valuationImprovement"},"Valuation Improvement:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{id:"valuationImprovement",name:"valuationImprovement",type:"number",className:"form-control",value:c.valuationImprovement,onChange:function(t){return e.handleChange(t)}})))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"projectName"},"Last Modified:"))),a.createElement("div",{className:"col-md-8"},a.createElement(o.a,{id:"plainLastModified",className:"form-control",selected:y,onChange:function(t){return e.plainLastModifiedHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:a.createElement("input",{type:"text",className:"",name:"notificationExpireDate",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.plainLastModified&&c.plainLastModified.ToEasternDateTime()})})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"projectName"},"Project #:"))),a.createElement("div",{className:"col-md-8"},a.createElement("select",{className:"form-control b-long-col-background",id:"relatedWO",name:"projectNumber",value:c.projectNumber,onChange:function(t){return e.handleVerifyObjChange(t.target.name,t.target.value)}},a.createElement("option",{value:""},"Select Project #"),l&&l.length>0&&l.map(function(e,t){return a.createElement("option",{value:e.value,key:t},e.value," ")})))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"savingToDate"},"Saving To Date:"))),a.createElement("div",{className:"col-md-8"},a.createElement(o.a,{id:"savingToDate",className:"form-control",selected:g,onChange:function(t){return e.savingToDateDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:a.createElement("input",{type:"text",className:"",name:"savingToDate",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.savingToDate&&c.savingToDate.ToEasternDateTime()})})))),a.createElement("div",{className:"row",style:{paddingTop:"12px"}},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"projectName"},"Start Date:"))),a.createElement("div",{className:"col-md-8"},a.createElement(o.a,{id:"startDate",className:"form-control",selected:b,onChange:function(t){return e.startDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:a.createElement("input",{type:"text",className:"",name:"notificationExpireDate",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.startDate&&c.startDate.ToEasternDateTime()})}))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"projectName"},"Finish Date:"))),a.createElement("div",{className:"col-md-8"},a.createElement(o.a,{id:"finishDate",className:"form-control",selected:v,onChange:function(t){return e.finishDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:a.createElement("input",{type:"text",className:"",name:"finishDate","aria-label":"","aria-describedby":"button-addon4",value:c&&c.finishDate&&c.finishDate.ToEasternDateTime()})})))),a.createElement("div",{className:"row",style:{paddingTop:"12px"}},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"percentComplete"},"Percent(%) Complete:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{id:"percentComplete",name:"percentComplete",type:"number",placeholder:"1 to 99",style:{width:"100px"},min:1,max:99,className:"form-control",value:c.percentComplete,onChange:function(t){return e.handleChange(t)}}))))))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-9 col-md-offset-2 no-padding"},a.createElement("button",{disabled:!d,className:"btn btn-fill btn-success margin-5",onClick:function(){e.saveVerify()}}," ",a.createElement("i",{className:"fa fa-save"}),"Save"),a.createElement("button",{className:"btn btn-fill btn-danger margin-5",onClick:function(){window.location.hash=i+"/"+n+"/Verify"}},a.createElement("i",{className:"fa fa-close"})," Cancel"))),a.createElement("button",{type:"button",id:"VerfiyTypeModel",className:"hidden","data-toggle":"modal","data-target":"#selectingingDailogeBox"}," "),a.createElement(r.a,{id:"selectingingDailogeBox",heading:"Chose M&V FORM",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!c.verifyType},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-6 center"},"Measure  ",a.createElement("input",{onClick:function(){e.handleVerifyType("Measure")},checked:"Measure"==c.verifyType,name:"Verify",type:"radio"})),a.createElement("div",{className:"col-md-6 center"}," IPMVP  ",a.createElement("input",{onChange:function(){e.handleVerifyType("IPMVP")},checked:"IPMVP"==c.verifyType,name:"IPMVP",type:"radio"}),"  "))))))))},t}(a.Component);t.default=E}});