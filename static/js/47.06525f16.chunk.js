webpackJsonp([47],{1253:function(e,t,n){"use strict";var a=n(2),r=(n.n(a),n(115)),o=n(116),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,i)}l((a=a.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,a=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={tenantObj:Object(),_Groups:[],groupsDropDownList:[]},n.handleTenantForm=n.handleTenantForm.bind(n),n.handleMultiGroupChange=n.handleMultiGroupChange.bind(n),n}return c(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchContactGroupList()]:[3,2];case 1:e.sent(),this.props.isEdit||this.setState({tenantObj:{name:"",userName:"",mobile:"",email:"",password:"",role:"4",space:"",group:"",groups:[]}}),e.label=2;case 2:return[2]}})})},t.prototype._fetchContactGroupList=function(){return i(this,void 0,void 0,function(){var e=this;return l(this,function(t){switch(t.label){case 0:return[4,Object(r.k)().then(function(t){var n=t.filter(function(e){return"AddtlContact"==e.value||"Tenant"==e.value}).map(function(e){return{value:e.value,label:e.value.replace(new RegExp("Tenant","g"),"Customer")}});e.setState({groupsDropDownList:n})})];case 1:return t.sent(),[2]}})})},t.prototype.handleTenantForm=function(e){var t=this.state.tenantObj;t[""+e.target.name]=e.target.value,this.setState({tenantObj:t}),this.props.handleTenantChange(t)},t.prototype.handleMultiGroupChange=function(e){var t=this.state.tenantObj;t.groups=e,this.setState({tenantObj:t}),this.props.handleTenantChange(t)},t.prototype.componentWillReceiveProps=function(e){e.tenant.userName?this.setState({tenantObj:e.tenant}):this.setState({tenantObj:{name:"",userName:"",mobile:"",email:"",password:"",role:"4",space:"",group:"",groups:[]}})},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.tenantObj,r=t.groupsDropDownList;return a.createElement("div",{className:"content"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"username"},"User Name:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",disabled:this.props.isEdit,id:"username",name:"userName",className:"form-control col-md-6",value:n.userName,onChange:function(t){return e.handleTenantForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"name"},"Name:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"name",name:"name",className:"form-control col-md-6",value:n.name,onChange:function(t){return e.handleTenantForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"email"},"Email:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"email",name:"email",className:"form-control col-md-6",value:n.email,onChange:function(t){return e.handleTenantForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"mobile"},"Mobile:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"mobile",name:"mobile",className:"form-control col-md-6",value:n.mobile,onChange:function(t){return e.handleTenantForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"group"},"Group:")),a.createElement("div",{className:"col-md-9"},a.createElement(o.a,{isDisabled:!1,closeMenuOnSelect:!1,isMulti:!0,value:n.groups,onChange:this.handleMultiGroupChange,placeholder:"Select Groups(s)",options:r})))))},t}(a.Component);t.a=s},1543:function(e,t,n){"use strict";var a=n(2),r=(n.n(a),n(616)),o=n(116),c=n(115),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,i)}l((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,a=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={TenantRoleAdder:[],tenantDropDownList:n.props.tenantDropDownList.length>0?n.props.tenantDropDownList:[],_tenantList:[]},n.handleRoleChange=n.handleRoleChange.bind(n),n.handleMultiTenantChange=n.handleMultiTenantChange.bind(n),n._fetchTenantList=n._fetchTenantList.bind(n),n.addItem=n.addItem.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){return l(this,void 0,void 0,function(){return s(this,function(e){return this.props.TenantRoleAdder&&this.props.TenantRoleAdder.length>0&&this.setState({TenantRoleAdder:this.props.TenantRoleAdder}),[2]})})},t.prototype.componentWillReceiveProps=function(e){this.setState({tenantDropDownList:e.tenantDropDownList,TenantRoleAdder:e.TenantRoleAdder})},t.prototype.handleRoleChange=function(e,t){var n=this.state.TenantRoleAdder;n[e].role=t,this.setState({TenantRoleAdder:n}),this.props.handleOtherContactsAdder(n)},t.prototype._fetchTenantList=function(){return l(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,Object(c.q)(this.props.buildingName).then(function(t){e.setState({_tenantList:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.handleMultiTenantChange=function(e,t){var n=this.state.TenantRoleAdder;n[e].tenant=t,this.setState({TenantRoleAdder:n}),this.props.handleOtherContactsAdder(n)},t.prototype.addItem=function(){var e={role:"",tenant:[]},t=this.state.TenantRoleAdder;t?t.push(e):t=[e],this.setState({TenantRoleAdder:t}),this.props.handleOtherContactsAdder(t)},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.TenantRoleAdder,c=t.tenantDropDownList,i=n&&!1===n.map(function(e){return""!==e.role&&e.tenant.length>0}).find(function(e){return!1===e}),l=n&&!i||!n;return a.createElement(a.Fragment,null,n&&n.map(function(t,n){return a.createElement("div",{key:n,className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"spaces"},"Customer"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement(o.a,{closeMenuOnSelect:!1,isMulti:!0,value:t.tenant,onChange:function(t){e.handleMultiTenantChange(n,t)},placeholder:"Select Customer",options:c}))),a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"role"},"Role"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("select",{id:"role",className:"form-control",value:t.role,onChange:function(t){return e.handleRoleChange(n,t.target.value)}},a.createElement("option",{value:"",key:-1},"Select Role"),r.TenantRoles.map(function(e,t){return a.createElement("option",{value:e.value,key:t},e.name," ")}))))))}),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-1"},a.createElement("label",null,"Add:")),a.createElement("div",{className:"col-md-11 col-xs-11"},a.createElement("button",{type:"button",disabled:!l,className:"btn btn-dark btn-fill btn-sm",onClick:this.addItem},a.createElement("i",{className:"fa fa-plus"}))))),a.createElement("br",null))},t}(a.Component);t.a=u},616:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TenantRoles",function(){return E});var a,r=n(2),o=(n.n(r),n(17)),c=n(116),i=n(740),l=n(115),s=n(26),u=n(1253),d=n(113),m=n(1543),p=n(8),h=n(13),f=n(868),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,i)}l((a=a.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,a=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},E=[{name:"Owner",value:"owns"},{name:"Renter",value:"occupies"},{name:"Both",value:"both"}],N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_spaceList:[],addContactDropDownList:[],spaceDropDownList:[],tenantDropDownList:[],_tenantList:[],spaceTenantObj:Object(),newLocation:Object(),tenantObj:Object()},a=n,n._saveSpaceTenant=n._saveSpaceTenant.bind(n),n._getSpacesList=n._getSpacesList.bind(n),n._fetchTenantList=n._fetchTenantList.bind(n),n.handleMultiSpacesChange=n.handleMultiSpacesChange.bind(n),n.handleMultiTenantChange=n.handleMultiTenantChange.bind(n),n._saveTenant=n._saveTenant.bind(n),n.handleTenantChange=n.handleTenantChange.bind(n),n.handleOtherContactsAdder=n.handleOtherContactsAdder.bind(n),n._getSpaceTenantInfo=n._getSpaceTenantInfo.bind(n),n.fetchOtherContactsList=n.fetchOtherContactsList.bind(n),n.updateSpace=n.updateSpace.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n;return g(this,function(a){switch(a.label){case 0:return this.props.buildingName?[4,this._getSpacesList()]:[3,4];case 1:return a.sent(),[4,this._fetchTenantList()];case 2:return a.sent(),e=this.state._tenantList.filter(function(e){return"Tenant"==e.group.value}).map(function(e){return{value:e.userName.value,label:e.name.value}}),t=this.state._tenantList.filter(function(e){return"AddtlContact"==e.group.value}).map(function(e){return{value:e.userName.value,label:e.name.value}}),this.setState({tenantDropDownList:e,addContactDropDownList:t,spaceTenantObj:Object()}),this.props.spaceName&&this.props.tenantName?[4,this._getSpaceTenantInfo()]:[3,4];case 3:a.sent(),(n=this.state.spaceTenantObj).spaceNameUpdate=this.props.spaceName,n.tenantNameUpdate=this.props.tenantName,this.setState({spaceTenantObj:n}),a.label=4;case 4:return[2]}})})},t.prototype._getSpaceTenantInfo=function(){return v(this,void 0,void 0,function(){var e,t,n,a=this;return g(this,function(r){switch(r.label){case 0:return e=this.props.buildingName,t=this.props.spaceName,n=this.props.tenantName,Object(d.a)(!0),[4,Object(l.o)(e,t,n).then(function(r){return v(a,void 0,void 0,function(){var a,o,c=this;return g(this,function(i){return a=Object(),o=r[0],a.notes=Object(p.g)(o.note),a.selectedSpaces=[{value:Object(p.g)(o.space),label:Object(p.g)(o.rdfsLabel)}],a.tenant={value:Object(p.g)(o.tenant),label:Object(p.g)(o.tenantname)},a.role=Object(p.g)(o.role),this.setState({spaceTenantObj:a},function(){c.fetchOtherContactsList(e,t,n)}),[2]})})}).catch(function(e){return e})];case 1:return r.sent(),Object(d.a)(!1),[2]}})})},t.prototype.fetchOtherContactsList=function(e,t,n){var a=this,r=this.state.spaceTenantObj;r.otherContactsGrid=[],r.otherContacts=[];var o=Object(),c=Object();Object(l.l)(e,t,n).then(function(e){for(var t=0;t<e.length;t++)o={name:Object(p.g)(e[t].name),email:Object(p.g)(e[t].email),mobile:Object(p.g)(e[t].mobile),ocrole:Object(p.g)(e[t].ocrole),othercontact:Object(p.g)(e[t].othercontact)},c={role:"occupies2"==Object(p.g)(e[t].ocrole)?"occupies":"owns",tenant:[{label:Object(p.g)(e[t].name),value:Object(p.g)(e[t].othercontact)}]},r&&r.otherContactsGrid&&r.otherContactsGrid.push(o),r&&r.otherContacts&&r.otherContacts.push(c);a.setState({spaceTenantObj:r})})},t.prototype._getSpacesList=function(){return v(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,[4,Object(i.b)(e).then(function(e){var n=e.map(function(e){return{value:e.ontology.value,label:e.rdfsLabel.value}});t.setState({_spaceList:e,spaceDropDownList:n})})];case 1:return n.sent(),[2]}})})},t.prototype._fetchTenantList=function(){return v(this,void 0,void 0,function(){var e=this;return g(this,function(t){switch(t.label){case 0:return[4,Object(l.q)(this.props.buildingName).then(function(t){var n=t.map(function(e){return{value:e.userName.value,label:e.name.value}});e.setState({_tenantList:t,tenantDropDownList:n})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.handleOtherContactsAdder=function(e){var t=this.state.spaceTenantObj;t.otherContacts=e,this.setState({spaceTenantObj:t})},t.prototype.handleMultiSpacesChange=function(e){var t=this.state.spaceTenantObj;t.selectedSpaces=e,this.setState({spaceTenantObj:t})},t.prototype.handleMultiTenantChange=function(e){var t=this.state.spaceTenantObj;t.tenant=e,this.setState({spaceTenantObj:t})},t.prototype.handleNotesChange=function(e){var t=this.state.spaceTenantObj;t.notes=e,this.setState({spaceTenantObj:t})},t.prototype._saveSpaceTenant=function(){return v(this,void 0,void 0,function(){var e,t,n,a,r;return g(this,function(o){switch(o.label){case 0:return e=this.state.spaceTenantObj,t=this.props,n=t.instance,a=t.buildingName,r=t.isEdit,e?(Object(d.a)(!0),[4,Object(l.r)(a,e,r).then(function(e){window.location.hash=n+"/"+a+"/Space/SpaceCustomers"})]):[3,2];case 1:o.sent(),Object(d.a)(!1),o.label=2;case 2:return[2]}})})},t.prototype.handleRoleChange=function(e){var t=this.state.spaceTenantObj;t.role=e,this.setState({spaceTenantObj:t})},t.prototype.handleTenantChange=function(e){this.setState({tenantObj:e})},t.prototype._saveTenant=function(){return v(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return(e=this.state.tenantObj).role="4",e?(Object(d.a)(!0),[4,Object(l.g)(this.props.buildingName,e,!1).then(function(){t._fetchTenantList()})]):[3,2];case 1:n.sent(),Object(d.a)(!1),n.label=2;case 2:return[2]}})})},t.prototype.updateSpace=function(e){return v(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return e?[4,this._getSpacesList()]:[3,2];case 1:t.sent(),setTimeout(function(){var t=a.state,n=t.spaceDropDownList,r=t.spaceTenantObj,o=n.find(function(t){return t.value==e.name});o&&(r.selectedSpaces||(r.selectedSpaces=[]),r.selectedSpaces.push(o),a.setState({spaceTenantObj:r}))},500),t.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.isView,a=t.instance,i=t.buildingName,l=t.spaceName,d=t.tenantName,b=this.state,v=b.spaceTenantObj,g=b.spaceDropDownList,N=b.tenantDropDownList,y=b.tenantObj,w=b.addContactDropDownList,O=N.slice();v&&v.tenant&&O.splice(O.findIndex(function(e){return e.value==v.tenant.value}),1);var S=""!=y.userName;return r.createElement(o.AppContext.Consumer,null,function(t){return r.createElement("div",{className:"content"},r.createElement("div",{className:"card"},r.createElement("div",{className:"container-fluid padding-10"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12 padding-10"},r.createElement("div",{className:"col-md-3"},r.createElement("button",{type:"button",className:"btn btn-dark btn-fill",style:{marginRight:3},onClick:function(){window.location.hash="/"+a+"/"+i+"/Space/SpaceCustomers"}},r.createElement("i",{className:"fa fa-list"})," ",r.createElement("span",{className:""}," Assigned Spaces "))),r.createElement("div",{className:"col-md-9"},r.createElement("div",{className:"form-grouppull-right"},!n&&r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12 padding-5"},r.createElement("button",{type:"button",disabled:n,className:"btn btn-dark pull-right","data-toggle":"modal","data-target":"#tenantFormDialog",style:{marginLeft:"10px",marginRight:"10px"},onClick:function(){}},r.createElement("i",{className:"fa fa-plus"})," Add New Customer"),r.createElement("button",{type:"button",disabled:n,className:"btn btn-dark pull-right",onClick:function(){document.getElementById("btnShowSpaceFormDialog").click()}},r.createElement("i",{className:"fa fa-plus"})," Add New Space"),r.createElement(s.a,{id:"tenantFormDialog",onSaveButtonClick:function(){e._saveTenant()},saveButtonText:"Save",disableSaveButton:!S},r.createElement(u.a,{instance:a,buildingName:i,isEdit:!1,tenant:y,handleTenantChange:e.handleTenantChange})),r.createElement(f.a,{updateSpace:e.updateSpace,closeDailogBtnID:"btnShowSpaceFormDialog",floor:"",buildingName:i,instance:a}))),n&&r.createElement("button",{type:"button",className:"btn btn-success pull-right",onClick:function(){var t=e.state._spaceList.find(function(e){return Object(p.g)(e.ontology)==l});t&&t.rdfsLabel&&Object(h.p)(l,Object(p.g)(t.rdfsLabel)),window.location.hash="#"+a+"/"+i+"/Space/EditSpaceCustomer/"+l+"/"+d}},r.createElement("i",{className:"fa fa-edit"})," Edit "))))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"col-md-2 col-sm-2"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"spaces"},"Spaces"))),r.createElement("div",{className:"col-md-4 col-sm-3"},r.createElement("div",{className:"form-group"},r.createElement(c.a,{isDisabled:n,closeMenuOnSelect:!1,isMulti:!0,value:v.selectedSpaces,onChange:e.handleMultiSpacesChange,placeholder:"Select Spaces",options:g}))))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"col-md-2 col-sm-2"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"Customer"},"Customer"))),r.createElement("div",{className:"col-md-4 col-sm-3"},r.createElement("div",{className:"form-group"},r.createElement(c.a,{id:"Customer",name:"Customer",isDisabled:n,closeMenuOnSelect:!0,isMulti:!1,value:v.tenant,onChange:e.handleMultiTenantChange,placeholder:"Select Customer",options:N}))),r.createElement("div",{className:"col-md-2 col-sm-2"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"role"},"Role"))),r.createElement("div",{className:"col-md-4 col-sm-3"},r.createElement("div",{className:"form-group"},r.createElement("select",{id:"role",disabled:n,className:"form-control",value:v.role,onChange:function(t){return e.handleRoleChange(t.target.value)}},r.createElement("option",{value:"",key:-1},"Select Role"),E.map(function(e,t){return r.createElement("option",{value:e.value,key:t},e.name," ")})))))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"col-md-2"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"notes"},"Notes"))),r.createElement("div",{className:"col-md-10"},r.createElement("input",{type:"text",disabled:n,id:"notes",className:"form-control",value:v.notes,onChange:function(t){return e.handleNotesChange(t.target.value)}})))),r.createElement("div",{className:"row padding-10"},r.createElement("div",{className:"col-md-12"},r.createElement("br",null),r.createElement("div",{className:"headingText"},"Other Contacts"),!n&&r.createElement(m.a,{instance:a,buildingName:i,TenantRoleAdder:v.otherContacts,handleOtherContactsAdder:e.handleOtherContactsAdder,tenantDropDownList:w}),n&&r.createElement("div",{className:"card"},r.createElement("div",{className:"content"},r.createElement("div",{className:"dataCard"},r.createElement("div",{className:"row hidden-xs"},r.createElement("div",{className:"col-sm-12"},r.createElement("div",{className:"col-sm-3 headingText"},"Name"),r.createElement("div",{className:"col-sm-2 headingText"},"User Name"),r.createElement("div",{className:"col-sm-2 headingText"},"Contact"),r.createElement("div",{className:"col-sm-3 headingText"},"Email"),r.createElement("div",{className:"col-sm-2 headingText"},"Role"))),v&&v.otherContactsGrid&&v.otherContactsGrid.map(function(e,t){return r.createElement("div",{key:t,className:"row clickable"},r.createElement("div",{className:"col-sm-12"},r.createElement("div",{className:"col-sm-3 trim-data",title:e.name},r.createElement("span",{className:"hidden visible-xs-inline headingText"},"Name"),e.name),r.createElement("div",{className:"col-sm-2 trim-data",title:e.othercontact},r.createElement("span",{className:"hidden visible-xs-inline headingText"},"User Name"),e.othercontact),r.createElement("div",{className:"col-sm-2 trim-data",title:e.mobile},r.createElement("span",{className:"hidden visible-xs-inline headingText"},"Contact"),e.mobile),r.createElement("div",{className:"col-sm-3 trim-data",title:e.email},r.createElement("span",{className:"hidden visible-xs-inline headingText"},"Email"),e.email),r.createElement("div",{className:"col-sm-2 trim-data",title:e.ocrole},r.createElement("span",{className:"hidden visible-xs-inline headingText"},"Role"),"occupies2"==e.ocrole?"Renter":"Owner")))})))))),!n&&r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12 inline-block"},r.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveSpaceTenant()}},r.createElement("i",{className:"fa fa-save"})," Save"),r.createElement("button",{id:"btnbackCustomerList",className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=a+"/"+i+"/Customer"}},r.createElement("i",{className:"fa fa-angle-double-left"}),"  Back "))))))})},t}(r.Component);t.default=N},740:function(e,t,n){"use strict";t.g=function(e,t,n,r){return c(this,void 0,void 0,function(){return i(this,function(c){switch(c.label){case 0:return[4,Object(o.e)({buildingName:e,spaceName:t,spaceWithCalendar:n},o.a.SPACES.GETSPACES,a.b.SPACE,r)];case 1:return[2,c.sent()]}})})},t.c=function(e,t,n){return c(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,Object(o.e)({floor:e,buildingName:t},o.a.SPACES.GetLocationsList,a.b.SPACE,n)];case 1:return[2,r.sent()]}})})},t.d=function(e,t){return c(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,Object(o.e)({zone:e,buildingName:t},o.a.SPACES.getLocationsListSpacesByZones,a.b.SPACE)];case 1:return[2,n.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return c(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,Object(o.e)({buildingName:e,type:t},o.a.SPACES.GetAllLocationsList,a.b.SPACE,n)];case 1:return[2,r.sent()]}})})},t.a=function(e,t,n,l,s){return c(this,void 0,void 0,function(){return i(this,function(c){switch(c.label){case 0:return[4,Object(o.f)({buildingName:e,model:t,floor:n,isEdit:l,spacetoUpdate:s},o.a.SPACES.SAVESPACE,a.b.SPACE).then(function(){Object(r.b)("Space "+(l?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Space.")})];case 1:return[2,c.sent()]}})})},t.f=function(e){return c(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({buildingName:e},o.a.SPACES.GetSpaceTypesList,a.b.SPACE)];case 1:return[2,t.sent()]}})})},t.e=function(e){return c(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({spaceName:e},o.a.SPACES.GetSpaceOptimalInfo,a.b.SPACE)];case 1:return[2,t.sent()]}})})},t.h=function(e){return c(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({spaceToUpdate:e},o.a.SPACES.UpdateSpaceOptimalInfo,a.b.SPACE).then(function(){Object(r.b)("Space Updated Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Space.")})];case 1:return[2,t.sent()]}})})};var a=n(7),r=n(6),o=n(5),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,i)}l((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,a=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}},776:function(e,t,n){"use strict";t.a=function(e,t,n){return c(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,Object(o.e)({buildingName:e,zoneName:t,bimSid:n},o.a.ZONES.GETZONES,a.b.ZONE)];case 1:return[2,r.sent()]}})})},t.b=function(e,t){return c(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,Object(o.f)({buildingName:e,floor:t},o.a.ZONES.SAVEFLOOR,a.b.ZONE).then(function(){Object(r.b)("Floor Added Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Floor.")})];case 1:return[2,n.sent()]}})})},t.c=function(e,t){return c(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,Object(o.f)({model:e,buildingName:t},o.a.ZONES.SAVEZONE,a.b.ZONE).then(function(){Object(r.b)("Zone Added Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Zone.")})];case 1:return[2,n.sent()]}})})},t.f=function(e){return c(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({buildingName:e},o.a.ZONES.GETFLOORLIST,a.b.ZONE)];case 1:return[2,t.sent()]}})})},t.g=function(e,t){return c(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,Object(o.e)({buildingName:e,equipmentType:t},o.a.ZONES.GETSERVICEPROVIDERSLIST,a.b.ZONE)];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return c(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,Object(o.e)({buildingName:e,excludeFloors:t},o.a.ZONES.GetAllZonesList,a.b.ZONE)];case 1:return[2,n.sent()]}})})},t.h=function(e){return c(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({buildingName:e},o.a.ZONES.GetZoneTypesList,a.b.ZONE)];case 1:return[2,t.sent()]}})})},t.d=function(e,t){return c(this,void 0,void 0,function(){var n=this;return i(this,function(l){switch(l.label){case 0:return[4,Object(o.f)({buildingName:e,zoneName:t},o.a.ZONES.DELETEZONE,a.b.ZONE).then(function(){return c(n,void 0,void 0,function(){return i(this,function(e){return Object(r.b)("Zone Deleted Successfully."),[2]})})}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,l.sent()]}})})};var a=n(7),r=n(6),o=n(5),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,i)}l((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,a=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}},868:function(e,t,n){"use strict";var a=n(2),r=(n.n(a),n(740)),o=n(776),c=n(113),i=n(26),l=n(13),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function c(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,i)}l((a=a.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,a,r,o,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,a=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){c=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){c.label=o[1];break}if(6===o[0]&&c.label<r[1]){c.label=r[1],r=o;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(o);break}r[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={locationModel:{ontology:"",buildingName:n.props.buildingName,floor:n.props.floor?n.props.floor:"",type:n.props.type?n.props.type:"",name:Object(l.j)(7),rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""},_spaceTypes:[],floorsList:[]},n._getSpaceTypeList=n._getSpaceTypeList.bind(n),n._getFloorsList=n._getFloorsList.bind(n),n.handleFormChange=n.handleFormChange.bind(n),n.createLocation=n.createLocation.bind(n),n}return s(t,e),t.prototype.componentWillReceiveProps=function(e){return d(this,void 0,void 0,function(){var t,n,a,r;return m(this,function(o){switch(o.label){case 0:return t=this.state.locationModel,n=e.buildingName,a=e.floor,r=e.type,n?[4,this._getSpaceTypeList()]:[3,3];case 1:return o.sent(),[4,this._getFloorsList()];case 2:o.sent(),(a||r)&&(t.floor=a||"",t.type=r||"",this.setState({locationModel:t})),o.label=3;case 3:return[2]}})})},t.prototype._getSpaceTypeList=function(){return d(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return[4,Object(r.f)(this.props.buildingName).then(function(t){e.setState({_spaceTypes:t})})];case 1:return t.sent(),[2]}})})},t.prototype._getFloorsList=function(){return d(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return[4,Object(o.f)(this.props.buildingName).then(function(t){e.setState({floorsList:t})})];case 1:return t.sent(),[2]}})})},t.prototype.createLocation=function(){return d(this,void 0,void 0,function(){var e,t,n=this;return m(this,function(a){switch(a.label){case 0:return e=this.state.locationModel,t=Object(),t=u({},e),e?(Object(c.a)(!0),[4,Object(r.a)(this.props.buildingName,e,e.floor,!1)]):[3,2];case 1:a.sent(),this.setState({locationModel:{ontology:"",buildingName:"",floor:"",type:"",name:Object(l.j)(7),rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""}},function(){n.props.updateSpace(t)}),Object(c.a)(!1),a.label=2;case 2:return[2]}})})},t.prototype.handleFormChange=function(e){var t=this.state.locationModel;t[e.target.name]=e.target.value,this.setState({locationModel:t})},t.prototype.render=function(){var e=this,t=this.props.closeDailogBtnID,n=this.state,r=n.locationModel,o=n._spaceTypes,c=n.floorsList,l=r.rdfsLabel,s=r.type,u=r.floor;return a.createElement("div",null,a.createElement("button",{type:"button",id:t,className:"btn btn-primary btn-fill",onClick:function(){},"data-toggle":"modal","data-target":"#spaceFormDialog",style:{display:"none"}},"."),a.createElement(i.a,{id:"spaceFormDialog",onSaveButtonClick:function(){e.createLocation()},showSaveButton:!0,heading:"Create Space",saveButtonText:"Save and Continue",disableSaveButton:""==l||""==s||""==u},a.createElement("div",{className:"dataCard padding-10 no-margin"},a.createElement("div",{className:""},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"type"},"Space Name:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{name:"rdfsLabel",value:r.rdfsLabel,onChange:function(t){return e.handleFormChange(t)},type:"text",className:"form-control"})," "))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"type"},"Type:")),a.createElement("div",{className:"col-md-9"},a.createElement("select",{id:"type",className:"form-control",name:"type",onChange:function(t){return e.handleFormChange(t)},value:r.type},a.createElement("option",{value:""},"Select Type"),o&&o.map(function(e,t){return 0===t?a.createElement("option",{key:t,selected:!0,value:e.value},e.value):a.createElement("option",{key:t,value:e.value},e.value)}))))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"type"},"Floor:")),a.createElement("div",{className:"col-md-9"},a.createElement("select",{id:"type",className:"form-control",name:"floor",onChange:function(t){return e.handleFormChange(t)},value:r.floor},a.createElement("option",{value:""},"Select Type"),c&&c.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value)}))))),a.createElement("br",null)))))},t}(a.Component);t.a=p}});