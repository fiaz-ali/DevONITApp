webpackJsonp([11,21,29,30],{1027:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"rcxInspectionLabels",function(){return E}),n.d(t,"rcxCleanlinessLabels",function(){return N});var a,o,i=n(2),s=(n.n(i),n(747)),r=n(910),c=n(911),l=n(1076),u=n(11),p=n(122),m=n(706),d=n(738),h=n(740),f=n(756),b=n(20),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},C=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,r=i.length;s<r;s++,o++)a[o]=i[s];return a},E=["Appropriate Schedule","Sensors or Actuators Calibrated","Equal Load Distribution Across Equipment","Ventilation Rates are Appropriate","Automatic Reset Functioning","Adjustments Made to Compensate for Oversized/Undersized Equip","No Unintended Simultaneous Cooling/Heating Occurs","Economizer Controls Functioning Properly","Air/Water Distribution Balanced","Light Levels are Appropriate","Light Sensors and Controls are Function Properly","DHW Temp. Settings are Correct","Water Pumps Properly Functioning","There Are No Water/Air Leaks","Inspect condenser","Inspect Evaporator","Inspect fans and motors","Other","Vents/Ducts/Coils Are Clean","Filters/Steam Traps are Clean","Components in Good Condition (belts, bearings, pulleys, etc.)","Proper Insulation/Sealant Where Required"],N=["Vents/Ducts/Coils Are Clean","Filters/Steam Traps are Clean","Components in Good Condition (belts, bearings, pulleys, etc.)","Proper Insulation/Sealant Where Required","Other"],O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={activeTab:"Proposed RCX",rcxObj:{currentSchedule:[],adjustedSchedule:[],currentConditionsCleanliness:[],currentConditionsInspections:[],rcxtasksCleanliness:[],rcxtasksInspections:[]},isCompleted:!1,inspectionOntologies:[],SolutionList:[],newCCLabelCreated:!1},a=n,n._saveCurrentConditions=n._saveCurrentConditions.bind(n),n.handleCurrentScheduler=n.handleCurrentScheduler.bind(n),n.handleAdjustedScheduler=n.handleAdjustedScheduler.bind(n),n.handleCCItems=n.handleCCItems.bind(n),n.handleRcxIncpectionItems=n.handleRcxIncpectionItems.bind(n),n.handleAddNewCCNote=n.handleAddNewCCNote.bind(n),n.handleRcxCleanlinessItems=n.handleRcxCleanlinessItems.bind(n),n._saveRCXTaskList=n._saveRCXTaskList.bind(n),n._fetchPreRCX=n._fetchPreRCX.bind(n),n._fetchPostRCX=n._fetchPostRCX.bind(n),n.updateTaskChecklist=n.updateTaskChecklist.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n.sortRCXObj=n.sortRCXObj.bind(n),n}return g(t,e),t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){return clearInterval(o),[2]})})},t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n,a,i,s=this;return y(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,a=e.entityName,t&&n&&a?[4,this.fetchInspection_IsComplete()]:[3,2];case 1:i=r.sent(),this.setState({isCompleted:i},function(){return v(s,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._fetchPreRCX()];case 1:return e.sent(),[4,this._fetchPostRCX()];case 2:return e.sent(),[2]}})})}),r.label=2;case 2:return this._getSolutionList(),o=setInterval(function(){var e=Object(f.a)("inspectionOntology");e!=Object(f.a)("inspectionOntology_Old")&&(Object(f.b)("inspectionOntology_Old",e),s._getSolutionList())},3e5),[2]}})})},t.prototype._getSolutionList=function(){return v(this,void 0,void 0,function(){var e,t=this;return y(this,function(n){switch(n.label){case 0:return e=Object(f.a)("inspectionOntology"),[4,Object(h.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,a,o,i;return y(this,function(s){switch(s.label){case 0:return e=this.props.entityName,t=Object(f.a)("inspectionOntology"),[4,Object(d.h)(e,"RCX",t)];case 1:return n=s.sent(),a=this.state,o=a.isCompleted,i=a.inspectionOntologies,n?(o="true"==Object(u.g)(n.IsCompleted),i=Object(u.g)(n.inspectionOntology).split(","),this.setState({isCompleted:o,inspectionOntologies:i}),[2,o]):[2,!1]}})})},t.prototype._fetchPreRCX=function(){return v(this,void 0,void 0,function(){var e,t,n,o,i,s,r,c,p=this;return y(this,function(m){switch(m.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,o=e.entityName,i=Object(f.a)("inspectionOntology"),s=this.state.rcxObj,r=[],c=[],[4,Object(l.d)(t,o,n).then(function(e){if(e){var t=e.filter(function(e){return Object(u.g)(e.inspection)==i});t&&t.map(function(e){var t=Object(u.g)(e.type),n={ccBoolean:"true"==Object(u.g)(e.ccBoolean),ccLabel:Object(u.g)(e.ccLabel),photo:Object(u.g)(e.photo),preRCXName:Object(u.g)(e.preRCXName),entryTimeStamp:Object(u.g)(e.entryTimeStamp),proposedRCX:Object(u.g)(e.proposedRCX)};"cleanliness"!=t.toLocaleLowerCase()||r.find(function(e){return e.preRCXName==n.preRCXName})?"inspection"!=t.toLocaleLowerCase()||c.find(function(e){return e.preRCXName==n.preRCXName})||c.push(n):r.push(n)}),s.currentConditionsCleanliness=r,s.currentConditionsInspections=c,s=p.updateTaskChecklist(s),a.setState({rcxObj:s})}})];case 1:return m.sent(),[2]}})})},t.prototype._fetchPostRCX=function(){return v(this,void 0,void 0,function(){var e,t,n,o,i,s,r,c,p=this;return y(this,function(m){switch(m.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,o=e.entityName,i=this.state.rcxObj,s=i.rcxtasksCleanliness,r=i.rcxtasksInspections,(c=C(s.map(function(e){return e.preRCXName}),r.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,o,n,c).then(function(e){e.map(function(e){var t=s.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),t.ccBoolean="true"==Object(u.g)(e.ccBoolean),s.splice(s.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),s.push(t));var n=r.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});n&&(n.photo=Object(u.g)(e.photo),n.entryTimeStamp=Object(u.g)(e.entryTimeStamp),n.notesMeasurement=Object(u.g)(e.notesMeasurement),n.ccBoolean="true"==Object(u.g)(e.ccBoolean),r.splice(r.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),r.push(n))}),i.rcxtasksCleanliness=s,i.rcxtasksInspections=r,i=p.sortRCXObj(i),a.setState({rcxObj:i})})]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})})},t.prototype.updateTaskChecklist=function(e){var t=C(e.rcxtasksInspections);e.rcxtasksInspections=[],e.currentConditionsInspections&&e.currentConditionsInspections.map(function(n){var a=t.find(function(e){return e.preRCXName==n.preRCXName});a&&n.preRCXName?(a.proposedRCX=n.proposedRCX,e.rcxtasksInspections.push(a)):e.rcxtasksInspections.push({postRCXName:Object(b.E)(8),preRCXName:n.preRCXName,proposedRCX:n.proposedRCX,ccLabel:n.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:"",ccBoolean:n.ccBoolean})});var n=C(e.rcxtasksCleanliness);return e.rcxtasksCleanliness=[],e.currentConditionsCleanliness&&e.currentConditionsCleanliness.map(function(t){var a=n.find(function(e){return e.preRCXName==t.preRCXName});a&&t.preRCXName?(a.proposedRCX=t.proposedRCX,e.rcxtasksCleanliness.push(a)):e.rcxtasksCleanliness.push({postRCXName:Object(b.E)(8),preRCXName:t.preRCXName,proposedRCX:t.proposedRCX,ccLabel:t.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:"",ccBoolean:t.ccBoolean})}),e=this.sortRCXObj(e)},t.prototype.sortRCXObj=function(e){return e.currentConditionsInspections.sort(function(e,t){return e.ccLabel>t.ccLabel?1:-1}),e.rcxtasksInspections.sort(function(e,t){return e.ccLabel>t.ccLabel?1:-1}),e.rcxtasksCleanliness.sort(function(e,t){return e.ccLabel>t.ccLabel?1:-1}),e},t.prototype.handleCurrentScheduler=function(e){var t=this.state.rcxObj;t.currentSchedule=e,this.setState({rcxObj:t})},t.prototype.handleAdjustedScheduler=function(e){var t=this.state.rcxObj;t.adjustedSchedule=e,this.setState({rcxObj:t})},t.prototype.handleCCItems=function(e,t){return v(this,void 0,void 0,function(){var n;return y(this,function(a){return n=this.state.rcxObj,"inspection"==t.toLocaleLowerCase()?n.currentConditionsInspections=e:n.currentConditionsCleanliness=e,n=this.updateTaskChecklist(n),this.setState({rcxObj:n}),[2]})})},t.prototype.handleAddNewCCNote=function(e,t){return v(this,void 0,void 0,function(){var n,a,o,i,s;return y(this,function(r){return n={preRCXName:Object(b.E)(8),ccBoolean:!1,ccLabel:e,proposedRCX:"",photo:"",entryTimeStamp:void 0},a=this.state.rcxObj,"inspection"==t.toLocaleLowerCase()?(a.currentConditionsInspections||(a.currentConditionsInspections=[]),(o=a.currentConditionsInspections.filter(function(e){return-1!=e.ccLabel.indexOf(n.ccLabel)}).length)>0&&(n.ccLabel=n.ccLabel+" - "+(o+1)),(i=a.currentConditionsInspections).push.apply(i,[n])):(a.currentConditionsCleanliness||(a.currentConditionsCleanliness=[]),(o=a.currentConditionsCleanliness.filter(function(e){return-1!=e.ccLabel.indexOf(n.ccLabel)}).length)>0&&(n.ccLabel=n.ccLabel+" - "+(o+1)),(s=a.currentConditionsCleanliness).push.apply(s,[n])),a=this.updateTaskChecklist(a),this.setState({rcxObj:a,newCCLabelCreated:!0}),[2]})})},t.prototype.handleRcxIncpectionItems=function(e,t){var n=this.state.rcxObj;"inspection"==t.toLocaleLowerCase()?n.rcxtasksInspections=e:n.rcxtasksCleanliness=e,this.setState({rcxObj:n})},t.prototype.handleRcxCleanlinessItems=function(e){var t=this.state.rcxObj;t.rcxtasksCleanliness=e,this.setState({rcxObj:t})},t.prototype._saveCurrentConditions=function(e){return v(this,void 0,void 0,function(){var t,n,a,o,i,s,r,c,u,m,h=this;return y(this,function(b){switch(b.label){case 0:return Object(p.a)(!0),t=this.state,n=t.rcxObj,a=t.inspectionOntologies,o=t.SolutionList,i=this.props,s=i.buildingName,r=i.infoEntity,c=i.entityName,u=i.instance,m=Object(f.a)("inspectionOntology"),[4,Object(l.f)(s,r,c,n,m,!0,o,e)];case 1:return b.sent(),this.setState({rcxObj:n},function(){return v(h,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?m?(a.push(m),[4,Object(d.c)(c,a,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(r){case"Equip":window.location.hash=u+"/"+s+"/Assets";break;case"Space":window.location.hash=u+"/"+s+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(p.a)(!1),[2]}})})},t.prototype._saveRCXTaskList=function(e){return v(this,void 0,void 0,function(){var t,n,a,o,i,s,r,c,u,m,h=this;return y(this,function(b){switch(b.label){case 0:return Object(p.a)(!0),t=this.state,n=t.rcxObj,a=t.inspectionOntologies,o=t.SolutionList,t.newCCLabelCreated?[4,this._saveCurrentConditions(!1)]:[3,2];case 1:b.sent(),b.label=2;case 2:return i=this.props,s=i.buildingName,r=i.infoEntity,c=i.entityName,u=i.instance,m=Object(f.a)("inspectionOntology"),[4,Object(l.e)(s,r,c,n,!0,o,e)];case 3:return b.sent(),this.setState({rcxObj:n,newCCLabelCreated:!1},function(){return v(h,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?m?(a.push(m),[4,Object(d.c)(c,a,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(r){case"Equip":window.location.hash=u+"/"+s+"/Assets";break;case"Space":window.location.hash=u+"/"+s+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(p.a)(!1),[2]}})})},t.prototype.unComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,a;return y(this,function(o){switch(o.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(f.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(a=0;a<t.length;a++)t[a]==n&&t.splice(a,1);return[4,Object(d.k)(e,t,"RCX")];case 1:o.sent(),o.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,o=t.entityName,l=t.infoEntity,u=t.viewOnly,p=this.state,d=p.activeTab,h=p.rcxObj,g=p.isCompleted,C=p.inspectionOntologies.find(function(e){return e==O}),O=Object(f.a)("inspectionOntology"),w=!!(C&&C.length>0);return i.createElement("div",{className:"content",style:{width:"100%"}},i.createElement("div",{className:"container-fluid",style:{width:"100%"}},i.createElement("div",{className:"row"},!u&&i.createElement("div",{className:"col-md-12"},i.createElement(s.a,{instance:this.props.instance,buildingName:n,tabName:l,showComponentButton:"Equip"==l,itemName:o,showAuditTypes:!0,showBIMButtons:!0})),i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid padding-10"},!u&&i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("div",{className:"btn-group"},i.createElement("button",{className:"btn "+("Proposed RCX"==d?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"Proposed RCX"})}},"Proposed RCX"),i.createElement("button",{className:"btn "+("RCX Findings"==d?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"RCX Findings"})}},"RCX Findings")),i.createElement("div",{className:"pull-right"},i.createElement(m.a,{ElementID:"retroCommissioning",data:this.state.rcxObj,filename:"Retro-Commissioning - "+Object(b.z)(o),beforeExportPdfClick:function(){$("#currentconditions").css("display","block"),$("#checklist").css("display","block")},afterExportPdfClick:function(){"Proposed RCX"==d?$("#currentconditions").css("display","block"):$("#currentconditions").css("display","none"),"RCX Findings"==d?$("#checklist").css("display","block"):$("#checklist").css("display","none")}}))),i.createElement("div",{className:"col-md-12 padding-10 pdfPrint",id:"retroCommissioning"},i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("h3",{style:{margin:10}},"Retro-Commissioning - ",Object(b.z)(o))),i.createElement("div",{style:{display:"Proposed RCX"==d||u?"block":"none"},id:"currentconditions",className:"col-md-12 padding-10 proposedRCXList"},i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("h4",{className:"title"},i.createElement("u",null,"Proposed RCX"))),i.createElement("div",{className:"col-md-12 padding-10",style:{}},i.createElement("h4",{className:"title"},"Inspections"),i.createElement("div",{className:"col-md-12 padding-10"},i.createElement(r.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"inspection",buildingName:n,instance:a,rcxOf:l,currentConditions:h.currentConditionsInspections,labels:E.sort(function(e,t){return e>t?1:-1}),entityName:o,infoEntity:l,isView:u,isFromReport:u}))),i.createElement("div",{className:"col-md-12 padding-10 ",style:{}},i.createElement("h4",{className:"title"},"Cleanliness"),i.createElement("div",{className:"col-md-12 padding-10"},i.createElement(r.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"cleanliness",buildingName:n,instance:a,rcxOf:l,currentConditions:h.currentConditionsCleanliness,labels:N.sort(function(e,t){return e>t?1:-1}),entityName:o,infoEntity:l,isView:u,isFromReport:u}))),!u&&i.createElement("div",{className:"col-md-12 padding-10 ","data-html2canvas-ignore":"true"},i.createElement("div",{className:"form-group"},i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return v(e,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._saveCurrentConditions(!1)];case 1:return e.sent(),[2]}})})}},i.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",!g&&i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCurrentConditions(!0)}},i.createElement("i",{className:"fa fa-save"})," Save & Complete"),g&&i.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},i.createElement("b",null,"Remove Inspection Completion"))))),i.createElement("div",{style:{display:"RCX Findings"==d||u?"block":"none"},id:"checklist",className:"col-md-12 padding-10 findingsRCXList"},i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("h4",{className:"title"},i.createElement("u",null,"RCX Findings"))),i.createElement("div",{className:"col-md-12 padding-10 "},i.createElement("h4",{className:"title"},"Inspections"),i.createElement("div",{className:"col-md-12 padding-10"},i.createElement(c.a,{handleAdder:this.handleRcxIncpectionItems,handleAddNewCCNote:this.handleAddNewCCNote,buildingName:n,instance:a,rcxOf:l,rcxItems:h.rcxtasksInspections,isInspectionOrCleanliness:"Inspection",entityName:o,infoEntity:l,isView:u,isFromReport:u}))),i.createElement("div",{className:"col-md-12 padding-10 "},i.createElement("h4",{className:"title"},"Cleanliness"),i.createElement("div",{className:"col-md-12 padding-10"},i.createElement(c.a,{handleAdder:this.handleRcxCleanlinessItems,handleAddNewCCNote:this.handleAddNewCCNote,buildingName:n,instance:a,rcxOf:l,rcxItems:h.rcxtasksCleanliness,isInspectionOrCleanliness:"Cleanliness",entityName:o,infoEntity:l,isView:u,isFromReport:u}))),!u&&i.createElement("div",{className:"col-md-12 padding-10 ","data-html2canvas-ignore":"true"},i.createElement("div",{className:"form-group"},i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return v(e,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._saveRCXTaskList(!1)];case 1:return e.sent(),[2]}})})}},i.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",(g||!g)&&i.createElement(i.Fragment,null," ",!w&&i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveRCXTaskList(!0)}},i.createElement("i",{className:"fa fa-save"})," Save & Complete")),g&&w&&i.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},i.createElement("b",null,"Remove Inspection Completion"))))))))),i.createElement("br",null)))},t}(i.Component);t.default=O},1028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o,i=n(2),s=(n.n(i),n(747)),r=n(912),c=n(704),l=n(11),u=n(1075),p=n(122),m=n(706),d=n(738),h=n(740),f=n(756),b=n(20),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},C=["Fan","Compressor","Motor","Pump","Ballast","Lamp","Other"],E=["VFD","Dimmer","Occ. Sensor","Controls","Other"],N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ecm:{ecmItems:[],item:n.props.entityName,notes:"",proposeSchedule:[]},replacementEquipmentList:[],isCompleted:!1,inspectionOntologies:[],SolutionList:[]},a=n,n.handleECMItems=n.handleECMItems.bind(n),n.handleScheduler=n.handleScheduler.bind(n),n._saveSchedulerInformation=n._saveSchedulerInformation.bind(n),n._saveECM=n._saveECM.bind(n),n.getEquipmentType=n.getEquipmentType.bind(n),n.fetchECM=n.fetchECM.bind(n),n.fetchECM_Notes=n.fetchECM_Notes.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return g(t,e),t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){return clearInterval(o),[2]})})},t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n,a=this;return y(this,function(i){switch(i.label){case 0:return Object(p.a)(!0),this._getSolutionList(),o=setInterval(function(){var e=Object(f.a)("inspectionOntology");e!=Object(f.a)("inspectionOntology_Old")&&(Object(f.b)("inspectionOntology_Old",e),a._getSolutionList())},3e5),"Equip"==this.props.infoEntity&&this.getEquipmentType(),this.props.infoEntity&&this.props.entityName?(e=this.state.ecm,t=e,[4,this.fetchECM_Notes()]):[3,3];case 1:return t.notes=i.sent(),[4,this.fetchInspection_IsComplete()];case 2:n=i.sent(),this.setState({ecm:e,isCompleted:n},function(){return v(a,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this.fetchECM()];case 1:return e.sent(),[2]}})})}),i.label=3;case 3:return Object(p.a)(!1),[2]}})})},t.prototype._getSolutionList=function(){return v(this,void 0,void 0,function(){var e,t=this;return y(this,function(n){switch(n.label){case 0:return(e=Object(f.a)("inspectionOntology"))?[4,Object(h.u)(e).then(function(e){t.setState({SolutionList:e})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.fetchECM_Notes=function(){return v(this,void 0,void 0,function(){var e,t,n,a;return y(this,function(o){switch(o.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,a=e.infoEntity,[4,Object(u.c)(t,n,a).then(function(e){return e?Object(l.g)(e):""})];case 1:return[2,o.sent()]}})})},t.prototype.fetchInspection_IsComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,a,o,i;return y(this,function(s){switch(s.label){case 0:return e=this.props.entityName,t=Object(f.a)("inspectionOntology"),[4,Object(d.h)(e,"ECM",t)];case 1:return n=s.sent(),a=this.state,o=a.isCompleted,i=a.inspectionOntologies,n&&Object(l.g)(n.inspectionOntology).length>0?(o="true"==Object(l.g)(n.IsCompleted),i=Object(l.g)(n.inspectionOntology).split(","),this.setState({isCompleted:o,inspectionOntologies:i}),[2,o]):[2,!1]}})})},t.prototype.fetchECM=function(){return v(this,void 0,void 0,function(){var e,t,n,o,i,s=this;return y(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,o=e.infoEntity,i=Object(f.a)("inspectionOntology"),[4,Object(u.b)(t,n,o,i).then(function(e){var t=s.state.ecm,n=e.filter(function(e){return Object(l.g)(e.inspectionOntology)==i});if(n&&n.map(function(e){var n={ecmName:Object(l.g)(e.ecmName),manufacturer:Object(l.g)(e.manufacturer),model:Object(l.g)(e.model),selectedItem:Object(l.g)(e.selectedItem),type:Object(l.g)(e.type),inspectionOntology:Object(l.g)(e.inspectionOntology)};t.ecmItems.push(n)}),t.ecmItems&&!(t.ecmItems.length>0)){var o={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:"hasECMRComp",inspectionOntology:""};t.ecmItems.push(o),o={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:"hasECMNComp",inspectionOntology:""},t.ecmItems.push(o),o={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:"hasECMREquip",inspectionOntology:""},t.ecmItems.push(o)}a.setState({ecm:t})})];case 1:return r.sent(),[2]}})})},t.prototype.getEquipmentType=function(){return v(this,void 0,void 0,function(){var e,t,n,o=this;return y(this,function(i){return e=this.props,t=e.buildingName,n=e.entityName,Object(c.x)(t,n).then(function(e){return v(o,void 0,void 0,function(){return y(this,function(t){return Object(c.w)(Object(l.g)(e[0]),2).then(function(e){var t=e.map(function(e){return Object(l.g)(e)});a.setState({replacementEquipmentList:t})}),[2]})})}),[2]})})},t.prototype.handleECMItems=function(e){var t=this.state.ecm,n=[];e&&e.length>0&&(n=t.ecmItems.filter(function(t){return t.type!=e[0].type})).push.apply(n,e),t.ecmItems=n,this.setState({ecm:t})},t.prototype.handleScheduler=function(e){var t=this.state.ecm;t.proposeSchedule=e,this.setState({ecm:t})},t.prototype._saveSchedulerInformation=function(){},t.prototype.handleNotesChange=function(e){var t=this.state.ecm;t.notes=e,this.setState({ecm:t})},t.prototype._saveECM=function(e){return v(this,void 0,void 0,function(){var t,n,a,o,i,s,r,c,l,m;return y(this,function(h){switch(h.label){case 0:return Object(p.a)(!0),t=this.state,n=t.ecm,a=t.inspectionOntologies,o=t.SolutionList,i=this.props,s=i.buildingName,r=i.infoEntity,c=i.instance,l=Object(f.a)("inspectionOntology"),m=!1,n.ecmItems&&n.ecmItems.length>0&&n.ecmItems[0].ecmName&&(m=!0),l?(!!a.find(function(e){return e==l})||a.push(l),[4,Object(u.d)(s,r,n,m,l,o,e)]):[3,3];case 1:return h.sent(),e?[4,Object(d.c)(n.item,a,"ECM")]:[3,3];case 2:switch(h.sent(),r){case"Equip":window.location.hash=c+"/"+s+"/Assets";break;case"Space":window.location.hash=c+"/"+s+"/Space";break;default:return[2,!1]}h.label=3;case 3:return setTimeout(function(){Object(p.a)(!1)},1e3),[2]}})})},t.prototype.unComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,a,o;return y(this,function(i){switch(i.label){case 0:if(e=this.state,t=e.ecm,n=e.inspectionOntologies,a=Object(f.a)("inspectionOntology"),!(n&&n.length>0))return[3,2];if(!a)return[3,2];for(o=0;o<n.length;o++)n[o]==a&&n.splice(o,1);return[4,Object(d.k)(t.item,n,"ECM")];case 1:i.sent(),i.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,o=t.entityName,c=t.infoEntity,l=t.viewOnly,u=this.state,p=u.ecm,d=u.replacementEquipmentList,h=u.isCompleted,g=u.inspectionOntologies,v=Object(f.a)("inspectionOntology"),y=p.ecmItems.filter(function(e){return"hasECMRComp"==e.type}),N=p.ecmItems.filter(function(e){return"hasECMNComp"==e.type}),O=p.ecmItems.filter(function(e){return"hasECMREquip"==e.type}),w=g.find(function(e){return e==v}),S=!!(w&&w.length>0);return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},!l&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(s.a,{instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:o,showAuditTypes:!0,showBIMButtons:!0}))),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 form-group"},i.createElement("div",{className:"pull-right"},i.createElement(m.a,{ElementID:"ecm",data:this.state.ecm,filename:"ecm - "+Object(b.z)(o)}))))),i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"col-md-12 padding-10",id:"ecm"},i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("h4",{style:{margin:5}},"Energy Conservation Measures - ",Object(b.z)(o))),i.createElement("div",{className:"col-md-12 padding-10 padding-10"},i.createElement("div",{className:"col-md-12"},y&&y.length>0&&i.createElement(r.a,{instance:a,buildingName:n,dropDownLabel:"Replacement Component",dropDownList:C,typePredicate:"hasECMRComp",items:y,handleAdder:this.handleECMItems,isView:l,isFromReport:l})),i.createElement("div",{className:"col-md-12"},N&&N.length>0&&i.createElement(r.a,{instance:a,buildingName:n,dropDownLabel:"New Component",dropDownList:E,typePredicate:"hasECMNComp",items:N,handleAdder:this.handleECMItems,isView:l,isFromReport:l})),i.createElement("div",{className:"col-md-12"},O&&O.length>0&&i.createElement(r.a,{instance:a,buildingName:n,dropDownLabel:"Replacement Equipment",dropDownList:d,typePredicate:"hasECMREquip",items:O,handleAdder:this.handleECMItems,hideAddButton:!0,isView:l,isFromReport:l})),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"form-group"},i.createElement("div",{className:"col-md-2"},"Notes"),i.createElement("div",{className:"col-md-10"},i.createElement("textarea",{disabled:l,className:"form-control notInPDF",value:p.notes,rows:3,onChange:function(t){return e.handleNotesChange(t.target.value)}}),i.createElement("span",{className:"inPDF",style:{display:"none"}},p.notes)))),!l&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveECM(!1)}},i.createElement("i",{className:"fa fa-save"})," Save"),(h||!h)&&i.createElement(i.Fragment,null,!S&&i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveECM(!0)}},i.createElement("i",{className:"fa fa-save"})," Save & Complete")," "),h&&S&&i.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},i.createElement("b",null,"Remove Inspection Completion"))))))))))},t}(i.Component);t.default=N},1029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CA_TYPES",function(){return v});var a,o=n(2),i=(n.n(o),n(747)),s=n(913),r=n(11),c=n(1077),l=n(122),u=n(706),p=n(738),m=n(740),d=n(756),h=n(20),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},v={CONDITION:"Condition",COMPLIANCE:"Compliance",SAFETY:"Safety",CANOTE:"CA_Note"},y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={caObj:{caAssessments:[]},equipLabels:[],conditionsLabels:[],complianceLabels:[],safetyLabels:[],isCompleted:!1,inspectionOntologies:[],SolutionList:[]},n.setupDropdownLists=n.setupDropdownLists.bind(n),n.handleCAForm=n.handleCAForm.bind(n),n.handleEquipmentAgeChange=n.handleEquipmentAgeChange.bind(n),n._saveCA=n._saveCA.bind(n),n.fetchCA=n.fetchCA.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return f(t,e),t.prototype.componentWillUnmount=function(){return b(this,void 0,void 0,function(){return g(this,function(e){return clearInterval(a),[2]})})},t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var e,t,n,o,i=this;return g(this,function(s){switch(s.label){case 0:return e=this.props,t=e.infoEntity,n=e.entityName,[4,this.fetchInspection_IsComplete()];case 1:return o=s.sent(),this.setState({isCompleted:o}),t&&n?(Object(l.a)(!0),[4,this.fetchCA()]):[3,4];case 2:return s.sent(),[4,this.setupDropdownLists()];case 3:s.sent(),Object(l.a)(!1),s.label=4;case 4:return this._getSolutionList(),a=setInterval(function(){var e=Object(d.a)("inspectionOntology");e!=Object(d.a)("inspectionOntology_Old")&&(Object(d.b)("inspectionOntology_Old",e),i._getSolutionList())},3e5),[2]}})})},t.prototype._getSolutionList=function(){return b(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return e=Object(d.a)("inspectionOntology"),[4,Object(m.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,a,o,i;return g(this,function(s){switch(s.label){case 0:return e=this.props.entityName,t=Object(d.a)("inspectionOntology"),[4,Object(p.h)(e,"CA",t)];case 1:return n=s.sent(),a=this.state,o=a.isCompleted,i=a.inspectionOntologies,n?(o="true"==Object(r.g)(n.IsCompleted),i=Object(r.g)(n.inspectionOntology).split(","),this.setState({isCompleted:o,inspectionOntologies:i}),[2,o]):[2,!1]}})})},t.prototype.fetchCA=function(){return b(this,void 0,void 0,function(){var e,t,n,a,o,i=this;return g(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,a=e.infoEntity,o=Object(d.a)("inspectionOntology"),[4,Object(c.b)(t,n,a,o).then(function(e){if(e){var t=i.state.caObj,n=e.filter(function(e){return Object(r.g)(e.inspection)==o});n&&n.map(function(e){var n={caName:Object(r.g)(e.caName),entryTimeStamp:Object(r.g)(e.entryTimeStamp),notes:Object(r.g)(e.notes),age:Object(r.g)(e.age),assessmentLabel:Object(r.g)(e.assessmentLabel),photo:Object(r.g)(e.photo).split(","),repairCost:Object(r.g)(e.repairCost),size:Object(r.g)(e.size),type:Object(r.g)(e.type),typeOf:Object(r.g)(e.assessmentLabel)};t.caAssessments.push(n)}),i.setState({caObj:t})}})];case 1:return s.sent(),[2]}})})},t.prototype.setupDropdownLists=function(){return b(this,void 0,void 0,function(){var e,t,n,a,o;return g(this,function(i){return e=this.state,t=e.equipLabels,n=e.conditionsLabels,a=e.complianceLabels,o=e.safetyLabels,n||(n=[]),a||(a=[]),o||(o=[]),t=["Cleanliness","Debris","Insulation/Sealing","Rust/Chipped Paint","Loose Connections","Pad/Support/Dunnage","Ventilation","General Notes"],0==n.length&&n.push.apply(n,["Access","Ceiling","Egress","Fenestration","Flooring","Foundation","Frame","Roof","Walls","Curb","Landscaping","Pad","ParkingLot","ParkingSpace","Paving","StructuralElement"]),0==a.length&&a.push.apply(a,["ADA","HIPAA","PCI"]),0==o.length&&o.push.apply(o,["AED","AlarmSystem","FireExtinguisher","Sprinkler"]),this.setState({equipLabels:t,conditionsLabels:n,complianceLabels:a,safetyLabels:o}),[2]})})},t.prototype.handleCAForm=function(e,t){var n=this.state.caObj,a=n.caAssessments.filter(function(e){return e.type!=t});a.push.apply(a,e),n.caAssessments=a,this.setState({caObj:n})},t.prototype.handleEquipmentAgeChange=function(e){var t=this.state.caObj;this.setState({caObj:t})},t.prototype._saveCA=function(e){return b(this,void 0,void 0,function(){var t,n,a,o,i,s,r,u,m,h,f;return g(this,function(b){switch(b.label){case 0:return Object(l.a)(!0),t=this.state,n=t.caObj,a=t.inspectionOntologies,o=t.SolutionList,i=this.props,s=i.buildingName,r=i.infoEntity,u=i.entityName,m=i.instance,h=Object(d.a)("inspectionOntology"),f=!0,[4,Object(c.c)(s,r,u,n,h,f,o,e)];case 1:return b.sent(),e?h?(a.push(h),[4,Object(p.c)(u,a,"CA")]):[3,3]:[3,4];case 2:b.sent(),b.label=3;case 3:switch(r){case"Equip":window.location.hash=m+"/"+s+"/Assets";break;case"Space":window.location.hash=m+"/"+s+"/Space";break;default:return[2,!1]}b.label=4;case 4:return Object(l.a)(!1),[2]}})})},t.prototype.unComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,a;return g(this,function(o){switch(o.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(d.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(a=0;a<t.length;a++)t[a]==n&&t.splice(a,1);return[4,Object(p.k)(e,t,"CA")];case 1:o.sent(),o.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,r=t.entityName,c=t.infoEntity,l=t.viewOnly,p=this.state,m=p.caObj,f=p.equipLabels,b=p.conditionsLabels,g=p.complianceLabels,y=p.safetyLabels,C=p.isCompleted,E=p.inspectionOntologies,N=Object(d.a)("inspectionOntology"),O=m.caAssessments.filter(function(e){return e.type==v.CANOTE}),w=m.caAssessments.filter(function(e){return e.type==v.CONDITION}),S=m.caAssessments.filter(function(e){return e.type==v.COMPLIANCE}),x=m.caAssessments.filter(function(e){return e.type==v.SAFETY}),I=E.find(function(e){return e==N}),L=!!(I&&I.length>0);return o.createElement("div",{className:"content"},o.createElement("div",{className:"container-fluid"},!l&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement(i.a,{instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:r,showAuditTypes:!0,showBIMButtons:!0}))),o.createElement("br",null),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 form-group"},o.createElement("div",{className:"pull-right"},o.createElement(u.a,{ElementID:"ca",data:this.state.caObj,filename:"ca"}))))),o.createElement("div",{className:"card"},o.createElement("div",{className:"container-fluid padding-10",id:"ca"},o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("h3",{style:{margin:10}},"Condition Assessment - ",Object(h.z)(r))),"Equip"==c&&f&&f.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-12"},o.createElement(s.a,{instance:a,buildingName:n,caOf:c,items:O,handleAdder:this.handleCAForm,type:v.CANOTE,labels:f,entityName:r,infoEntity:c,isView:l,isFromReport:l}))),"Space"==c&&o.createElement(o.Fragment,null,b&&b.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-12"},o.createElement("h4",null,v.CONDITION," Assessments"),o.createElement(s.a,{instance:a,buildingName:n,caOf:c,items:w,handleAdder:this.handleCAForm,type:v.CONDITION,labels:b,entityName:r,infoEntity:c,isView:l,isFromReport:l})),o.createElement("br",null),o.createElement("br",null)),g&&g.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-12"},o.createElement("h4",null,v.COMPLIANCE," Assessments"),o.createElement(s.a,{instance:a,buildingName:n,caOf:c,items:S,handleAdder:this.handleCAForm,type:v.COMPLIANCE,labels:g,entityName:r,infoEntity:c,isView:l,isFromReport:l})),o.createElement("br",null),o.createElement("br",null)),y&&y.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-12"},o.createElement("h4",null,v.SAFETY," Assessments"),o.createElement(s.a,{instance:a,buildingName:n,caOf:c,items:x,handleAdder:this.handleCAForm,type:v.SAFETY,labels:y,entityName:r,infoEntity:c,isView:l,isFromReport:l})),o.createElement("br",null),o.createElement("br",null))),!l&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 inline-block"},o.createElement("br",null),o.createElement("div",{className:"form-group"},o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!1)}},o.createElement("i",{className:"fa fa-save"})," Save"),(C||!C)&&o.createElement(o.Fragment,null," ",!L&&o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!0)}},o.createElement("i",{className:"fa fa-save"})," Save & Complete")),C&&L&&o.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},o.createElement("b",null,"Remove Inspection Completion. ")))))))))},t}(o.Component);t.default=y},1322:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(698)),i=n(738),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={inspectionVisibility:Object(),otherNotes:"",otherCompleted:!1,otherInspectionOntology:[],otherInspectionOntologies:"",entityName:""},n.handleWorkflowChange=n.handleWorkflowChange.bind(n),n.handleOtherCompletion=n.handleOtherCompletion.bind(n),n.handleNotes=n.handleNotes.bind(n),n}return s(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;e.inspectionVisibility&&e.entityName&&this.setState({inspectionVisibility:e.inspectionVisibility,entityName:e.entityName},function(){return r(t,void 0,void 0,function(){return c(this,function(e){return[2]})})})},t.prototype.componentDidMount=function(){return r(this,void 0,void 0,function(){var e=this;return c(this,function(t){return this.props.inspectionVisibility&&this.props.entityName&&this.setState({inspectionVisibility:this.props.inspectionVisibility,entityName:this.props.entityName},function(){return r(e,void 0,void 0,function(){return c(this,function(e){return[2]})})}),[2]})})},t.prototype.handleWorkflowChange=function(e){this.state.otherCompleted;e.target.checked?document.getElementById("btnOtherNotes_"+this.props.entityName).click():document.getElementById("btnOtherNotesCancel_"+this.props.entityName).click()},t.prototype.handleNotes=function(e){var t=this.state.otherNotes;t=e.target.value,this.setState({otherNotes:t})},t.prototype.handleOtherCompletion=function(e){return r(this,void 0,void 0,function(){var t,n,a,o,s,r=this;return c(this,function(c){switch(c.label){case 0:return t=this.state,n=t.otherInspectionOntology,a=t.inspectionVisibility,o=t.otherNotes,e?this.props.inspectionOntology&&this.props.entityName?(!!n.find(function(e){return e==r.props.inspectionOntology})||n.push(this.props.inspectionOntology),[4,Object(i.j)(this.props.entityName,n,o,e)]):[3,2]:[3,3];case 1:c.sent(),c.label=2;case 2:return a.OtherCompleted=e,this.setState({otherInspectionOntology:n,inspectionVisibility:a,otherCompleted:!0}),[3,5];case 3:if(!this.props.inspectionOntology)return[3,5];if(!(n&&n.length>0))return[3,5];for(s=0;s<n.length;s++)n[s]==this.props.inspectionOntology&&n.splice(s,1);return[4,Object(i.b)(this.props.entityName,n,o,e)];case 4:c.sent(),a.OtherCompleted=e,this.setState({otherInspectionOntology:n,inspectionVisibility:a,otherCompleted:!1}),c.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props.workflow,n=this.state.inspectionVisibility;return a.createElement(a.Fragment,null,a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Inspections"),t.ecm&&n&&a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0}},"ECM:"),t.ecm&&n.showECM&&a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("label",{className:"switch-container pull-right"},a.createElement("input",{name:"ecm",className:"switch1",onChange:function(e){},checked:!!n.ECMCompleted,type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))),t.rcx&&n&&a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0}},"RCX:"),t.rcx&&n.showRCX&&a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("label",{className:"switch-container pull-right"},a.createElement("input",{name:"rcx",className:"switch1",onChange:function(e){},checked:!!n.RCXCompleted,type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))),t.ca&&n&&a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0}},"CA:"),t.ca&&n.showCA&&a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("label",{className:"switch-container pull-right"},a.createElement("input",{name:"ca",className:"switch1",onChange:function(e){},checked:!!n.CACompleted,type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))),t.other&&a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0},title:t.otherName?t.otherName:""},t.otherName?t.otherName:"Other",":"),t.other&&a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("label",{className:"switch-container pull-right"},a.createElement("input",{name:"otherCompleted",className:"switch1",onChange:function(t){e.handleWorkflowChange(t)},checked:!!n.OtherCompleted,type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))),a.createElement("button",{id:"btnOtherNotes_"+this.props.entityName,style:{display:"none"},"data-toggle":"modal","data-target":"#OtherNotesDialog"+this.props.entityName},"."),a.createElement(o.a,{id:"OtherNotesDialog"+this.props.entityName,onSaveButtonClick:function(){e.props.entityName&&e.handleOtherCompletion(!0)},saveButtonText:"Save",showCancelButton:!0,showSaveButton:!0,cancelButtonText:"Cancel",heading:"Notes"},a.createElement("textarea",{className:"form-control",name:"otherNotes",onChange:function(t){e.handleNotes(t)}})," "),a.createElement("button",{id:"btnOtherNotesCancel_"+this.props.entityName,style:{display:"none"},"data-toggle":"modal","data-target":"#OtherNotesDialogCancel"+this.props.entityName},"."),a.createElement(o.a,{id:"OtherNotesDialogCancel"+this.props.entityName,onSaveButtonClick:function(){e.props.entityName&&e.handleOtherCompletion(!1)},saveButtonText:"Yes",showCancelButton:!0,showSaveButton:!0,cancelButtonText:"Cancel",heading:"Confirm"},a.createElement("label",{htmlFor:""},"Are you sure to cancel this completion")))},t}(a.Component);t.a=l},1323:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}()),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){this.props,this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"content"},a.createElement("div",{className:"row thumbnail no-margin"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 center"},a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 no-padding"},a.createElement("label",{style:{color:"#B0B0B0"}},"Inspection Complete")),a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 no-padding"},a.createElement("label",{className:"switch-container pull-right"},a.createElement("input",{name:"ecm",className:"switch1",onChange:function(e){},checked:!0,type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 center"},a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 no-padding"},a.createElement("label",{style:{color:"#B0B0B0"}}," Not Complete")),a.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 no-padding"},a.createElement("label",{className:"switch-container pull-right"},a.createElement("input",{name:"ecm",className:"switch1",onChange:function(e){},checked:!1,type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))))))},t}(a.Component);t.a=i},1324:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(1027)),i=n(706),s=n(20),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.instance,r=t.buildingName,u=t.infoEntity,p=t.entityNames;this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"pull-right"},a.createElement(i.a,{ElementID:"divRCXSummary",data:[],showCSV:!1,showPDFButtonText:"Export Summary PDF",largeDoc:!0,beforeExportPdfClick:function(){return c(e,void 0,void 0,function(){return l(this,function(e){return[2]})})},afterExportPdfClick:function(){},filename:"Retro-Commissioning Summary - "+Object(s.z)(r)+" - "+("Equip"==u?"Equipment":"Spaces")})),a.createElement("div",{className:"pull-right"},a.createElement(i.a,{ElementID:"divRCXSummary",data:[],showCSV:!1,showPDFButtonText:"Export Findings RCX Summary PDF",largeDoc:!0,key:"exportfindings",beforeExportPdfClick:function(){$(".proposedRCXList").css("display","none")},afterExportPdfClick:function(){$(".proposedRCXList").css("display","block")},filename:"Retro-Commissioning Summary - "+Object(s.z)(r)+" - "+("Equip"==u?"Equipment":"Spaces")})),a.createElement("div",{className:"pull-right"},a.createElement(i.a,{ElementID:"divRCXSummary",data:[],showCSV:!1,showPDFButtonText:"Export Proposed RCX Summary PDF",largeDoc:!0,key:"exportProposed",beforeExportPdfClick:function(){$(".findingsRCXList").css("display","none")},afterExportPdfClick:function(){$(".findingsRCXList").css("display","block")},filename:"Retro-Commissioning Summary - "+Object(s.z)(r)+" - "+("Equip"==u?"Equipment":"Spaces")}))),a.createElement("div",{className:"row padding-10",id:"divRCXSummary"},a.createElement("div",{className:"col-md-12 padding-10",style:{alignContent:"center"}},a.createElement("h2",{style:{margin:"10px"}},"Retro-Commissioning Summary - "+Object(s.z)(r)+" - "+("Equip"==u?"Equipment":"Spaces"))),p&&p.map(function(e){return a.createElement(a.Fragment,null,a.createElement("div",{className:"row padding-10 pdfRCXRow",style:{pageBreakAfter:"always",pageBreakBefore:"always"}},a.createElement(o.default,{instance:n,buildingName:r,infoEntity:u,entityName:e,viewOnly:!0})))})))))},t}(a.Component);t.a=u},1325:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(706)),i=n(20),s=n(1028),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,r=e.infoEntity,c=e.entityNames;this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"pull-right"},a.createElement(o.a,{ElementID:"divECMSummary",data:[],showCSV:!1,largeDoc:!0,filename:"Energy Conservation Measures Summary - "+Object(i.z)(n)+" - "+("Equip"==r?"Equipment":"Spaces")}))),a.createElement("div",{className:"row padding-10",id:"divECMSummary"},a.createElement("div",{className:"col-md-12 padding-10",style:{alignContent:"center"}},a.createElement("h2",{style:{margin:"10px"}},"Energy Conservation Measures - "+Object(i.z)(n)+" - "+("Equip"==r?"Equipment":"Spaces"))),c&&c.map(function(e){return a.createElement("div",{className:"row padding-10"},a.createElement(s.default,{instance:t,buildingName:n,infoEntity:r,entityName:e,viewOnly:!0}))})))))},t}(a.Component);t.a=c},1326:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(706)),i=n(20),s=n(1029),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,r=e.infoEntity,c=e.entityNames;this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"pull-right"},a.createElement(o.a,{ElementID:"divCASummary",data:[],showCSV:!1,largeDoc:!0,filename:"Condition Assessment Summary - "+Object(i.z)(n)+" - "+("Equip"==r?"Equipment":"Spaces")}))),a.createElement("div",{className:"row padding-10",id:"divCASummary"},a.createElement("div",{className:"col-md-12 padding-10",style:{alignContent:"center"}},a.createElement("h2",{style:{margin:"10px"}},"Condition Assessment - "+Object(i.z)(n)+" - "+("Equip"==r?"Equipment":"Spaces"))),c&&c.map(function(e){return a.createElement("div",{className:"row padding-10"},a.createElement(s.default,{instance:t,buildingName:n,infoEntity:r,entityName:e,viewOnly:!0}))})))))},t}(a.Component);t.a=c},2942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(2),i=(n.n(o),n(122)),s=n(701),r=n(706),c=n(709),l=n(950),u=n(20),p=n(711),m=n(11),d=n(13),h=n(782),f=n(1322),b=n(1323),g=n(8),v=n(58),y=n(756),C=n(719),E=n(720),N=n(2943),O=n(698),w=n(1324),S=n(1325),x=n(1326),I=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),L=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},j=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},_=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,r=i.length;s<r;s++,o++)a[o]=i[s];return a},k=window.innerWidth,A=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_spaces:[],filteredSpaces:[],sortOrder:1,newLocation:Object(),spaceToDelete:Object(),isEdit:!1,workFlowSpaceList:[],workflow:Object(),selectedSpaceState:"",search:"",selectedFloor:"",isDelete:!1,showLogs:!1,showECMSummary:!1,showRCXSummary:!1,showCASummary:!1},n.sortSpace=n.sortSpace.bind(n),n.populateInspectionsList=n.populateInspectionsList.bind(n),n.unpopulateInspectionsList=n.unpopulateInspectionsList.bind(n),n.fetchWorkflow=n.fetchWorkflow.bind(n),n.search_filter=n.search_filter.bind(n),n}return I(t,e),t.prototype.componentWillUnmount=function(){return L(this,void 0,void 0,function(){return j(this,function(e){return clearInterval(a),[2]})})},t.prototype.componentDidMount=function(){return L(this,void 0,void 0,function(){var e=this;return j(this,function(t){switch(t.label){case 0:return this.props.buildingName?(Object(i.a)(!0),[4,this.fetchSpaces()]):[3,2];case 1:t.sent(),a=setInterval(function(){var t=Object(y.a)("inspectionOntology"),n=Object(y.a)("spacesWorkFlows");n&&n.length?t!=Object(y.a)("inspectionOntology_Old")&&(Object(y.b)("inspectionOntology_Old",t),e.setState({workFlowSpaceList:n},function(){return L(e,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this.fetchWorkflow()];case 1:return e.sent(),this.populateInspectionsList(),[2]}})})})):e.setState({workFlowSpaceList:n},function(){e.unpopulateInspectionsList()})},1e3),Object(i.a)(!1),t.label=2;case 2:return[4,this.getCurrentScreenResolution()];case 3:return t.sent(),[2]}})})},t.prototype.getCurrentScreenResolution=function(){window.addEventListener("resize",function(){k=this.document.body.clientWidth})},t.prototype.fetchWorkflow=function(){return L(this,void 0,void 0,function(){var e,t,n=this;return j(this,function(a){switch(a.label){case 0:return e=this.state.workflow,t=Object(y.a)("inspectionOntology"),this.props.buildingName&&t?[4,Object(h.k)(this.props.buildingName,t).then(function(t){return L(n,void 0,void 0,function(){var n,a,o;return j(this,function(i){return t&&t.length&&Object(m.g)(t[0].ontology)&&(n=t[0],a=Object(m.g)(n.dateOfStart),o=Object(m.g)(n.finishDate),e.ca="true"==Object(m.g)(n.ca),e.ecm="true"==Object(m.g)(n.ecm),e.rcx="true"==Object(m.g)(n.rcx),e.other="true"==Object(m.g)(n.other),e.dateOfStart=a,e.description=Object(m.g)(n.description),e.finishDate=o,e.lead=Object(m.g)(n.lead),e.ontology=Object(m.g)(n.ontology),e.otherName=Object(m.g)(n.otherName)),this.setState({workflow:e}),[2]})})})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.fetchSpaces=function(){return L(this,void 0,void 0,function(){var e,t,n=this;return j(this,function(a){switch(a.label){case 0:return Object(i.a)(!0),e=JSON.parse(g.a.getItem("user")),[4,Object(v.B)(this.props.buildingName)];case 1:return t=a.sent(),[4,Object(c.i)(this.props.buildingName).then(function(a){return L(n,void 0,void 0,function(){var n,o,i,s,r=this;return j(this,function(c){if(""==Object(m.g)(a[0].space)&&(a=[]),"4"==e.role)if(n=t.filter(function(t){return t.tenant.value==e.contact})){for(o=[],i=function(e){var t=n[e];if(t&&t.space.value&&!o.find(function(e){return e.space.value==t.space.value})){var i=a.find(function(e){return e.space.value==t.space.value});o.push(i)}},s=0;s<n.length;s++)i(s);this.setState({_spaces:o,filteredSpaces:o})}else this.setState({_spaces:[]});else this.setState({_spaces:a,filteredSpaces:a},function(){return L(r,void 0,void 0,function(){var e,t;return j(this,function(n){for(e=0;e<a.length;e++)t=a[e],Object(m.g)(t.space)&&Object(m.g)(t.rdfsLabel)&&Object(u.R)(Object(m.g)(t.space),Object(m.g)(t.rdfsLabel));return[2]})})});return[2]})})}).catch(function(e){return e})];case 2:return a.sent(),Object(i.a)(!1),[2]}})})},t.prototype.populateInspectionsList=function(){return L(this,void 0,void 0,function(){var e,t,n,a,o;return j(this,function(s){switch(s.label){case 0:return e=this.state,t=e._spaces,n=e.workFlowSpaceList,a=Object(y.a)("inspectionOntology"),Object(i.a)(!0),[4,Object(h.e)(n,t,a)];case 1:return o=s.sent(),this.setState({_spaces:_(o)},function(){Object(i.a)(!1)}),[2]}})})},t.prototype.unpopulateInspectionsList=function(){return L(this,void 0,void 0,function(){var e,t;return j(this,function(n){for(e=this.state._spaces,t=0;t<e.length;t++)e[t].inspectionVisibility={CACompleted:!1,ECMCompleted:!1,RCXCompleted:!1,showCA:!1,showECM:!1,showRCX:!1};return this.setState({_spaces:e}),[2]})})},t.prototype.sortSpace=function(e,t){var n=this.state._spaces,a=this.state.sortOrder,o=n.sort(function(t,n){if(t&&n){var o="",i="";switch(e){case"Space":t.rdfsLabel&&n.rdfsLabel&&(o=t.rdfsLabel.value,i=n.rdfsLabel.value);break;case"Floor":t.floorLabel&&n.floorLabel&&(o=t.floorLabel.value,i=n.floorLabel.value);break;case"Type":t.type&&n.type&&(o=t.type.value,i=n.type.value);break;case"Virtual BIM":t.virtualBIM&&n.virtualBIM&&(o=t.virtualBIM.value,i=n.virtualBIM.value);break;case"CAD BIM":t.cadBIM&&n.cadBIM&&(o=t.cadBIM.value,i=n.cadBIM.value)}var s=0;return o.toLocaleLowerCase()<i.toLocaleLowerCase()?s=-1:o.toLocaleLowerCase()>i.toLocaleLowerCase()&&(s=1),s*a}});this.setState({_spaces:o,sortOrder:-1*a})},t.prototype.onDeleteSpace=function(e){return L(this,void 0,void 0,function(){return j(this,function(t){return this.setState({spaceToDelete:e,isDelete:!0}),[2]})})},t.prototype.deleteSpace=function(){return L(this,void 0,void 0,function(){var e,t=this;return j(this,function(n){return e=this.state.spaceToDelete,this.setState({isDelete:!1},function(){return L(t,void 0,void 0,function(){return j(this,function(t){switch(t.label){case 0:return[4,Object(u.l)(e.space.value,d.b.SPACE)];case 1:return t.sent(),[4,this.fetchSpaces()];case 2:return t.sent(),[4,Object(l.c)(e.space.value)];case 3:return t.sent(),[2]}})})}),[2]})})},t.prototype.search_filter=function(e){return L(this,void 0,void 0,function(){return j(this,function(t){switch(t.label){case 0:return[4,this.setState({search:e.target.value})];case 1:return t.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t._spaces,a=t.workflow,i=t.filteredSpaces,c=t.selectedSpaceState,l=t.search,u=t.selectedFloor,d=t.isDelete,h=t.showLogs,v=t.showECMSummary,I=t.showRCXSummary,L=t.showCASummary,j=this.props,_=j.instance,A=j.buildingName,F=Object(y.a)("inspectionOntology"),R=i.filter(function(e){return Object(m.g)(e.rdfsLabel).toLowerCase().includes(l.toLowerCase().trim())}),D=!!F,T=JSON.parse(g.a.getItem("user")),B=Object(p.b)(T,"info-space","write"),P=k&&k<1200||void 0==k;if(h)return o.createElement(C.a,{instance:_,buildingName:A,fromEntityList:!0,module:E.a.Assets,entityName:"Space",entityList:n.map(function(e){return{label:Object(m.g)(e.rdfsLabel),value:Object(m.g)(e.space)}}),onLogClose:function(){return e.setState({showLogs:!1})}});return o.createElement("div",{className:"content",style:{paddingTop:"0px"}},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:""},o.createElement("div",{className:"col-md-12 padding-5"},o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding",style:{display:"inline-flex"}},o.createElement("div",{className:"col-md-4 col-xs-12 px-0"},o.createElement("h6",{className:"trim-data",style:{marginTop:"10px"}},"Space State:")),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(t){e.setState({selectedSpaceState:t.target.value,filteredSpaces:t.target.value?n.filter(function(e){return Object(m.g)(e.locationState)==t.target.value}):n})},value:c||""},o.createElement("option",{value:""},"Select Space State"),o.createElement("option",{value:"Planned"},"Planned"),o.createElement("option",{value:"Ordered"},"Ordered"),o.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),o.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),o.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),o.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),o.createElement("option",{value:"Assembly"},"Assembly"),o.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),o.createElement("option",{value:"Kitting"},"Kitting"),o.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),o.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),o.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),o.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),o.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),o.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),o.createElement("option",{value:"Existing"},"Existing In Use"),o.createElement("option",{value:"Retired"},"Retired"),o.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),o.createElement("option",{value:"Sold"},"Sold"),o.createElement("option",{value:"DisposedOf"},"Disposed Of"),o.createElement("option",{value:"ErrorDeleted"},"Error Deleted")))),D&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding center"},D&&o.createElement("h4",{style:{margin:0,marginBottom:10}},o.createElement("u",null,Object(y.a)("inspectionRdfsLabel"))),o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-dark",style:{width:"130px"},"data-toggle":"modal","data-target":"#ECMSummaryDialog",title:"Energy Conservation Measures",onClick:function(){e.setState({showECMSummary:!0})}},"ECM Summary"),o.createElement("button",{className:"btn btn-dark",style:{width:"130px"},"data-toggle":"modal","data-target":"#RCXSummaryDialog",title:"Retro-Commissioning",onClick:function(){e.setState({showRCXSummary:!0})}},"RCX Summary"),o.createElement("button",{className:"btn btn-dark",style:{width:"130px"},"data-toggle":"modal","data-target":"#CASummaryDialog",title:"Condition Assessment",onClick:function(){e.setState({showCASummary:!0})}},"CA Summary")),o.createElement(O.a,{id:"ECMSummaryDialog",showCancelButton:!1,showSaveButton:!1,isfullHeight:!1,isFullWidth:!0,onCancelButtonClick:function(){e.setState({showECMSummary:!1})}},v&&o.createElement("div",null,o.createElement(S.a,{buildingName:A,instance:_,infoEntity:"Space",entityNames:n.filter(function(e){return e.inspectionVisibility&&e.inspectionVisibility.showECM}).map(function(e){return Object(m.g)(e.space)})}))),o.createElement(O.a,{id:"RCXSummaryDialog",showCancelButton:!1,showSaveButton:!1,isfullHeight:!1,isFullWidth:!0,onCancelButtonClick:function(){e.setState({showRCXSummary:!1})}},I&&o.createElement("div",null,o.createElement(w.a,{buildingName:A,instance:_,infoEntity:"Space",entityNames:n.filter(function(e){return e.inspectionVisibility&&e.inspectionVisibility.showRCX}).map(function(e){return Object(m.g)(e.space)})}))),o.createElement(O.a,{id:"CASummaryDialog",showCancelButton:!1,showSaveButton:!1,isfullHeight:!1,isFullWidth:!0,onCancelButtonClick:function(){e.setState({showCASummary:!1})}},L&&o.createElement("div",null,o.createElement(x.a,{buildingName:A,instance:_,infoEntity:"Space",entityNames:n.filter(function(e){return e.inspectionVisibility&&e.inspectionVisibility.showRCX}).map(function(e){return Object(m.g)(e.space)})})))),o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding"},o.createElement(b.a,null)))),o.createElement("div",{className:"col-md-12 padding-5"},o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding",style:{display:"inline-flex"}},o.createElement("div",{className:"col-md-4 col-xs-12 px-0"},o.createElement("h6",{style:{marginTop:"10px"}},"Filter: \xa0")),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("input",{style:{outline:"green"},className:"form-control pull-right",onChange:function(t){e.search_filter(t)},id:"myInput",type:"text",placeholder:"Search.."}))),T&&"1"==T.role&&o.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",o.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),o.createElement("div",{className:"dropdown pull-right"},o.createElement(r.a,{filename:"Spaces List",data:n,ElementID:"SpacesList"})),B&&o.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){window.location.hash=_+"/"+A+"/Space/SpaceForm"}},o.createElement("i",{className:"fa fa-plus"})," Create New Space ")))),o.createElement("br",null),o.createElement("div",{className:""},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"card padding-10",id:"SpacesList",style:{paddingTop:"0px"}},o.createElement("div",{className:"content",style:{paddingTop:"10px"}},o.createElement("div",{className:"dataCard"},o.createElement("div",{className:"row hidden-sm hidden-xs no-padding"},o.createElement("div",{className:"col-md-12 dataCard"},o.createElement("div",{className:"col-md-2 col-sm-12 small grid-header-left",onClick:function(){return e.sortSpace("Space")}},o.createElement("i",{className:"fa fas fa-sort"})," Space "),o.createElement("div",{className:"col-md-1 col-sm-12 grid-header small",onClick:function(){return e.sortSpace("Floor")}}," ",o.createElement("i",{className:"fa fas fa-sort"}),"Floor "),o.createElement("div",{className:"col-md-1 col-sm-12 grid-header small",onClick:function(){return e.sortSpace("Type")}}," ",o.createElement("i",{className:"fa fas fa-sort"}),"Type "),o.createElement("div",{className:"col-md-3 col-sm-12 grid-header small"}," \xa0 \xa0 \xa0 Inspections"),o.createElement("div",{style:{paddingLeft:"10px"},className:"col-md-5 col-sm-12 grid-header small"},"Action"))),R.map(function(e,t){var n=Object(m.g)(e.virtualBIM);return o.createElement("div",{key:t,className:"row no-padding"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-2 col-sm-12 padding-5 small grid-left pt-10 link",title:e.rdfsLabel&&e.rdfsLabel.value,onClick:function(){window.location.href="#"+_+"/"+A+"/Space/Profile/"+(e.space&&e.space.value)}},o.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Space"),e.rdfsLabel&&e.rdfsLabel.value),o.createElement("div",{className:"col-md-1 col-sm-12 padding-5 pt-10 small grid",title:e.floorLabel&&e.floorLabel.value},o.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Floor"),e.floorLabel&&e.floorLabel.value),o.createElement("div",{className:"col-md-1 col-sm-12 padding-5 pt-10 small grid trim-data ",title:e.type&&e.type.value},o.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Type")," ",e.type&&e.type.value),D&&o.createElement("div",{className:"col-md-3 col-sm-12",style:{padding:"0px 2px 0px 0px"}},o.createElement(f.a,{entityName:Object(m.g)(e.space),inspectionVisibility:e.inspectionVisibility,workflow:a})),B&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12 pull-right",style:{display:"contents"}},o.createElement("a",{className:"btn-sm btn-success active pull-right shortcut-btn",title:"Edit",onClick:function(){window.location.hash=_+"/"+A+"/Space/SpaceForm/"+Object(m.g)(e.space)}},o.createElement("i",{className:"fa fa-edit"})," "),P&&o.createElement("a",{className:"pull-right equipspeclbtn","data-toggle":"collapse",href:"#equipDropdown"+t,title:"Click Me..."}," ",o.createElement("i",{style:{width:13,marginTop:4},className:"fa fa-bars"})),!P&&o.createElement(N.a,{instance:_,buildingName:A,i:t,n:e,virtualBIM:n,isCollapse:P}),P&&o.createElement("div",{style:{marginRight:22},id:"equipDropdown"+t,className:"equipDropdown panel-collapse collapse"},o.createElement(N.a,{instance:_,buildingName:A,i:t,n:e,virtualBIM:n,isCollapse:P}))))))}),o.createElement(s.a,{instance:_,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:d?"Are you sure to delete this Space?":"Click yes to add floor plan.",heading:d?"Confirm...":"No floor plan found",onConfirmButtonClick:function(){d?e.deleteSpace():window.location.hash=_+"/"+A+"/Zone/Floor/"+u+"/Matterport"}})))))))},t}(o.Component);t.default=A},2943:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(11)),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.checkInventory=n.checkInventory.bind(n),n}return i(t,e),t.prototype.checkInventory=function(e){return s(this,void 0,void 0,function(){var t,n,a;return r(this,function(o){return t=this.props,n=t.instance,a=t.buildingName,window.location.hash=n+"/"+a+"/ViewAssetInventory/"+e,[2]})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,i=e.virtualBIM,s=e.n,r=e.i,c=e.isCollapse,l=c?"custom-icon-btn":"custom-app-icon",u=c?"icon-img":"icon-app-img";return a.createElement(a.Fragment,null,c&&a.createElement("a",{className:"pull-right equipspeclbtn","data-toggle":"collapse",href:"#equipDropdown"+r,title:"Click Me..."}," ",a.createElement("i",{style:{width:13,marginTop:4},className:"fa fa-ellipsis-h"})," "),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Bim Space",onClick:function(){window.location.hash=t+"/"+n+"/BimSpace/"+Object(o.g)(s.floor)+"/"+Object(o.g)(s.space)},style:{border:"1px solid transparent",backgroundColor:s.hasFloorPlan?"#FF4C29":"#929292"},target:"_blank"},a.createElement("img",{className:u,src:"assets/img/Space3.png"})),i&&a.createElement(a.Fragment,null,a.createElement("a",{className:"btn-sm btn-success pull-right "+l,onClick:function(){window.location.hash=t+"/"+n+"/Space/Matterport/"+Object(o.g)(s.space)},style:{border:"1px solid transparent",backgroundColor:"#A69888"},target:"_blank",title:"Manage Route"},a.createElement("img",{className:u,src:"assets/img/virtual-bim.png"}))),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Points",style:{border:"1px solid transparent",backgroundColor:"#FFC857"},onClick:function(e){window.location.hash=t+"/"+n+"/Points/Space/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/points.png"})),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Devices",style:{border:"1px solid transparent",backgroundColor:"#399E5A"},onClick:function(e){window.location.hash=t+"/"+n+"/Devices/Space/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/devices.png"})),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Zones",style:{border:"1px solid transparent",backgroundColor:"#6A0136"},onClick:function(e){window.location.hash=t+"/"+n+"/Zone/Spaces/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/zones.png"})),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Work",style:{border:"1px solid transparent",backgroundColor:"#5A5353"},onClick:function(e){window.location.hash=t+"/"+n+"/WorkOrders/Space/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/work2.png"})),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Tasks",style:{border:"1px solid transparent",backgroundColor:"#28AFB0"},onClick:function(e){window.location.hash=t+"/"+n+"/Tasks/Space/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/Tasks2.png"})),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Space Insights",style:{border:"1px solid transparent",backgroundColor:"#01BAEF"},onClick:function(e){window.location.hash=t+"/"+n+"/Insights/SpaceInsights/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/insight.png"})),a.createElement("a",{className:"btn-sm btn-success pull-right "+l,title:"Alarms",style:{border:"1px solid transparent",backgroundColor:"#D80C09"},onClick:function(e){window.location.hash=t+"/"+n+"/Alarms/OperationalAlarms/Space/"+s.space.value}},a.createElement("img",{className:u,src:"assets/img/alarm.png"})))},t}(a.Component);t.a=c},740:function(e,t,n){"use strict";t.g=function(e,t,n,c){return s(this,void 0,void 0,function(){return r(this,function(s){switch(s.label){case 0:return[4,Object(a.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},a.a.LIFE.SaveProject,i.b.LIFE).then(function(){Object(o.b)("Project saved Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Project.")})];case 1:return[2,s.sent()]}})})},t.r=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,instance:t},a.a.LIFE.GetProjectList,i.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({_id:e},a.a.LIFE.DeleteProject,i.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.LIFE.SaveProjectSolution,i.b.LIFE).then(function(){Object(o.b)("Solution saved Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({spreadSheetId:e,fileType:t},a.a.LIFE.ExportSheet,i.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e?[4,Object(a.e)({projectId:e},a.a.LIFE.GetSolutionList,i.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.u=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e?[4,Object(a.e)({inspectionOntology:e},a.a.LIFE.GetSolutionListForInspection,i.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.s=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({solutionId:e},a.a.LIFE.GetSolution,i.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({_id:e},a.a.LIFE.DeleteSolution,i.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({manageFile:e,fileData:t},a.a.LIFE.ManageFile,i.b.LIFE).then(function(){Object(o.b)("Upload Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({communityFile:e,fileData:t},a.a.LIFE.SaveCommunityFile,i.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,instance:t},a.a.LIFE.GetManageFile,i.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({instance:e},a.a.LIFE.GetCommunityFile,i.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({ManageFile:e},a.a.LIFE.DeleteManageFile,i.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({communityFile:e},a.a.LIFE.DeleteCommunityFile,i.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({projectId:e},a.a.LIFE.GetProject,i.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return s(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({email:e,buildingName:t,instance:n},a.a.LIFE.SaveEmailAndDrive,i.b.LIFE)];case 1:return[2,o.sent()]}})})},t.j=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({email:e,instance:t},a.a.LIFE.ShareCommunityFolder,i.b.LIFE).then(function(e){e.result?Object(o.b)("Successfully Share."):Object(o.a)("The user Email is not valid.")}).catch(function(e){Object(o.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return s(this,void 0,void 0,function(){return r(this,function(s){switch(s.label){case 0:return[4,Object(a.f)({email:e,buildingName:t,instance:n},a.a.LIFE.ShareMMTemplateFolder,i.b.LIFE).then(function(e){e.result?Object(o.b)("Successfully Share."):Object(o.a)("The user Email is not valid.")}).catch(function(e){Object(o.a)("Something Went Wrong!")})];case 1:return[2,s.sent()]}})})},t.i=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({templatePurpose:e},a.a.LIFE.SaveTemplatePurpose,i.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(a.e)({instance:e},a.a.LIFE.GetTemplatePurpose,i.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),a=e.getDate().toString().padStart(2,0),o=e.getHours().toString().padStart(2,0),i=e.getMinutes().toString().padStart(2,0),s=e.getSeconds().toString().padStart(2,0);return t+n+a+o+i+s};var a=n(12),o=n(21),i=n(13),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}},910:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(698)),i=n(703),s=n(57),r=n(20),c=n(743),l=n(8),u=n(737),p=n(21),m=n(701),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),h=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.textareas=[],n.state={currentConditions:[],ccLabel:[],labelsDropDownList:[],selectedAttachment:void 0,onPageTextChanged:!1,newCCLabel:""},n.addItem=n.addItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCurrentConditionLabelChange=n.handleCurrentConditionLabelChange.bind(n),n.handleCCLabelChange=n.handleCCLabelChange.bind(n),n.removeItem=n.removeItem.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n.setImageURL_ForItems=n.setImageURL_ForItems.bind(n),n}return d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){return h(this,void 0,void 0,function(){var t,n,a=this;return f(this,function(o){return e.buildingName&&e.instance&&(t=JSON.stringify(this.state.currentConditions),n=JSON.stringify(e.currentConditions),(!this.state.onPageTextChanged&&!this.props.isFromReport&&t!=n||this.props.isFromReport&&t!=n)&&this.setState({currentConditions:e.currentConditions},function(){a.textareas.map(function(e){Object(r.h)(e)}),a.setImageURL_ForItems(e.currentConditions)})),[2]})})},t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var e,t=this;return f(this,function(n){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e})),this.props.buildingName&&this.props.instance&&this.setState({currentConditions:this.props.currentConditions},function(){t.setImageURL_ForItems(t.props.currentConditions),t.state.onPageTextChanged||t.textareas.map(function(e){Object(r.h)(e)})}),[2]})})},t.prototype.setImageURL_ForItems=function(e){return h(this,void 0,void 0,function(){var t,n,a;return f(this,function(o){for(t=0;t<e.length;t++)n="",a=new s.b,e[t].photo&&(e[t].photo.toLowerCase().indexOf(".mp4")>0&&(n="assets/img/video-file-icon.png"),e[t].photo.toLowerCase().indexOf(".mov")>0&&(n="assets/img/video-file-icon.png"),e[t].photo.toLowerCase().indexOf(".pdf")>0&&(n="assets/img/pdf-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".xls")>0||e[t].photo.toLowerCase().indexOf(".csv")>0)&&(n="assets/img/excel-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".xlsx")>0||e[t].photo.toLowerCase().indexOf(".csv")>0)&&(n="assets/img/excel-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".docx")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/doc-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".doc")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/doc-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".ppt")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/ppt-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".pptx")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/ppt-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".png")>0||e[t].photo.toLowerCase().indexOf(".jpeg")>0||e[t].photo.toLowerCase().indexOf(".jpg")>0||e[t].photo.toLowerCase().indexOf(".webp")>0||e[t].photo.toLowerCase().indexOf(".tiff")>0)&&(n=a.GetSignedURL(s.a.DOCUMENT(),e[t].photo,6e5))),e[t].imageurl=n;return this.setState({currentConditions:e}),[2]})})},t.prototype.addItem=function(){return h(this,void 0,void 0,function(){var e,t,n,a,o=this;return f(this,function(i){return e=this.state,t=e.currentConditions,n=e.ccLabel,a=e.newCCLabel,n.map(function(e){var n={preRCXName:Object(r.E)(8),ccBoolean:!1,ccLabel:"Other"==e.value?a:e.value,proposedRCX:"",photo:"",entryTimeStamp:void 0};t||(t=[]);var o=t.filter(function(e){return-1!=e.ccLabel.indexOf(n.ccLabel)}).length;o>0&&(n.ccLabel=n.ccLabel+" - "+(o+1)),t.push.apply(t,[n])}),t=t.sort(function(e,t){return e.ccLabel>t.ccLabel?1:-1}),this.setState({currentConditions:t,ccLabel:[]},function(){return h(o,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.props.handleAdder(t,this.props.isInspectionOrCleanliness)];case 1:return e.sent(),[2]}})})}),setTimeout(function(){o.textareas.map(function(e){Object(r.h)(e)})},1e3),[2]})})},t.prototype.removeItem=function(e){var t=this.state.currentConditions;t.splice(e,1),this.setState({currentConditions:t}),this.props.handleAdder(t,this.props.isInspectionOrCleanliness)},t.prototype.removeAttachment=function(e){var t=this.state.currentConditions;t[e].imageurl="",t[e].photo="",this.setState({currentConditions:t}),this.props.handleAdder(t,this.props.isInspectionOrCleanliness)},t.prototype.handleCurrentConditionLabelChange=function(e){var t=this.state.ccLabel;t=e,this.setState({ccLabel:t})},t.prototype.handleCCLabelChange=function(e){var t=this.state,n=t.labelsDropDownList,a=t.newCCLabel;-1!=e.findIndex(function(e){return"Other"==e.value})||(a=""),this.setState({ccLabel:e,labelsDropDownList:n,newCCLabel:a})},t.prototype.handleItemChange=function(e,t){var n=this,a=this.state.currentConditions,o=t.target.name,i=a&&a[e];i[""+o]="ccBoolean"==o?t.target.checked:t.target.value,this.setState({currentConditions:a,onPageTextChanged:!0},function(){"ccBoolean"!=o&&document.getElementById(n.props.isInspectionOrCleanliness+"rcxCC"+e).focus()}),this.props.handleAdder(a,this.props.isInspectionOrCleanliness)},t.prototype.handleFileAttachment=function(e,t){return h(this,void 0,void 0,function(){var n,a,o,i,c,m,d,h,b,g,v,y=this;return f(this,function(f){switch(f.label){case 0:n=this.props,a=n.buildingName,o=n.entityName,i=n.infoEntity,c=JSON.parse(l.a.getItem("user")),m=this.state.currentConditions,d=m[t],f.label=1;case 1:return f.trys.push([1,4,,5]),e&&e.name&&(e.file||e.length>0)&&d?(h=this.props.buildingName+"-_-"+Object(r.E)(10),b="",g=void 0,v=e.name.substring(e.name.indexOf(".")),b=""+h+v,g=e,m[t].photo=b,[4,(new s.b).UploadFile(s.a.DOCUMENT(),b,g,function(t,n){if(t)Object(p.a)("Attachment failed to upload");else{var s={building:a,docOntology:Object(r.E)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:c.contact,enteredByName:c.name,entityOntology:[{label:"",value:o}],entityType:i,rdfsLabel:e.name,s3FileName:b,entryTimeStamp:(new Date).toString(),linkToDocument:b};Object(u.f)(s).then(function(){})}})]):[3,3];case 2:f.sent(),this.setState({currentConditions:m,selectedAttachment:e},function(){y.props.handleAdder(m,y.props.isInspectionOrCleanliness),document.getElementById("uploadImageClose"+y.props.isInspectionOrCleanliness+t).click(),setTimeout(function(){y.setImageURL_ForItems(m)},1e3)}),f.label=3;case 3:return[3,5];case 4:return f.sent(),[3,5];case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.currentConditions,l=t.ccLabel,u=t.labelsDropDownList,p=t.newCCLabel,d=this.props,b=d.hideAddButton,g=d.isView,v=d.isFromReport,y=new s.b;return a.createElement(a.Fragment,null,n&&n.map(function(t,n){var i="";return t.photo&&(i=y.GetSignedURL(s.a.DOCUMENT(),t.photo)),a.createElement("div",{key:n,className:"row padding-5",style:{borderBottom:"1px solid rgb(0 0 0 / 22%)",marginBottom:"5px",paddingBottom:"15px",minHeight:"100px"}},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"ccBoolean"+n},t.ccLabel)),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"col-md-4"},a.createElement("label",{className:"pull-right",htmlFor:t.proposedRCX},"Describe Proposed RCX:")),a.createElement("div",{className:"col-md-8"},a.createElement("textarea",{disabled:g,id:e.props.isInspectionOrCleanliness+"rcxCC"+n,className:"form-control notInPDF",value:t.proposedRCX,name:"proposedRCX",ref:function(t){return e.textareas.push(t)},onChange:function(t){return h(e,void 0,void 0,function(){return f(this,function(e){return this.handleItemChange(n,t),Object(r.h)(t.target),[2]})})},style:{width:"100%",height:"content",minHeight:"60px",overflow:"hidden",resize:"none",wordWrap:"break-word"}}),a.createElement("span",{className:"inPDF",style:{display:"none"}},t.proposedRCX))),!v&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-1"},!(t.photo&&t.photo.length>0)&&a.createElement("button",{type:"button",disabled:g||v,className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Upload Attachment",onClick:function(){e.setState({selectedAttachment:void 0})}},a.createElement("i",{className:"fa fa-paperclip"})),t.photo&&t.photo.length>0&&a.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,style:{width:"100%"}}),a.createElement(o.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness+n,onSaveButtonClick:function(){},saveButtonText:"Close",closeButtonId:"uploadImageClose"+e.props.isInspectionOrCleanliness+n,isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},a.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t[0],n)},files:e.state.selectedAttachment?[e.state.selectedAttachment]:[],single:!0}))),a.createElement("div",{className:"col-md-2 btn-group"},t.photo&&t.photo.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",disabled:g||v,className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Replace Attachment",onClick:function(){e.setState({selectedAttachment:void 0})}},a.createElement("i",{className:"fa fa-paperclip"})),i&&a.createElement("a",{className:"btn padding-5",title:"Download Attachment",href:i},a.createElement("i",{className:"fa fa-download"})),a.createElement("button",{disabled:g,type:"button",className:"btn btn-danger padding-5",title:"Remove Attachment",onClick:function(){return document.getElementById("removedPropsedRCXAttacment"+t.preRCXName).click()}},a.createElement("i",{className:"fa fa-trash"})),a.createElement("button",{style:{display:"none"},id:"removedPropsedRCXAttacment"+t.preRCXName,"data-toggle":"modal","data-target":"#removedDialogPropsedRCXAttacment"+t.preRCXName},"."),a.createElement(m.a,{instance:e.props.instance,id:"removedDialogPropsedRCXAttacment"+t.preRCXName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this attachment for proposed RCX ?",heading:"Alert",onConfirmButtonClick:function(){return e.removeAttachment(n)}})),a.createElement("button",{disabled:g,type:"button",className:"btn ml-5 padding-5",title:"Remove Item",style:{color:"#f00"},onClick:function(){return document.getElementById("removeProposedRCX"+t.preRCXName).click()}},a.createElement("i",{className:"fa fa-remove"})),a.createElement("button",{style:{display:"none"},id:"removeProposedRCX"+t.preRCXName,"data-toggle":"modal","data-target":"#removeProposedRCXDialog"+t.preRCXName},"."),a.createElement(m.a,{instance:e.props.instance,id:"removeProposedRCXDialog"+t.preRCXName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this proposed RCX?",heading:"Alert",onConfirmButtonClick:function(){return e.removeItem(n)}}))),v&&t.photo&&t.imageurl&&t.photo.length>0&&a.createElement("div",{className:"col-md-4"},a.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,className:"inspection-image-preview"})))}),!b&&!v&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-1"},a.createElement("label",null,"Add:")),a.createElement("div",{className:"col-md-11 col-xs-11"},a.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog_"+this.props.isInspectionOrCleanliness,onClick:function(){e.setState({newCCLabel:""})}},a.createElement("i",{className:"fa fa-plus"}))),a.createElement(o.a,{disableSaveButton:!l||-1!=l.findIndex(function(e){return"Other"==e.value})&&!p,id:"AddLabelDialog_"+this.props.isInspectionOrCleanliness,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:"Inspection and Testing"},u&&u.length>0&&a.createElement("div",{className:"form-group"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(i.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCCLabelChange,placeholder:this.props.isInspectionOrCleanliness+" labels",options:u,value:l}))),a.createElement("div",{className:"row"},l&&-1!=l.findIndex(function(e){return"Other"==e.value})&&a.createElement("div",{className:"col-md-12",style:{paddingTop:10}},a.createElement("input",{type:"text",className:"form-control",value:p,placeholder:'Enter title for option "Other"',onChange:function(t){e.setState({newCCLabel:t.target.value})}})))))))},t}(a.Component);t.a=b},911:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(698)),i=n(57),s=n(20),r=n(743),c=n(8),l=n(737),u=n(21),p=n(701),m=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},f=!1,b=function(e){function t(t){var n=e.call(this,t)||this;return n.textareas=[],n.textareas2=[],n.state={rcxItems:[],selectedAttachment:void 0,newCCLabel:""},n.handleNotesChange=n.handleNotesChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n.UNSAFE_componentWillReceiveProps=n.UNSAFE_componentWillReceiveProps.bind(n),n}return m(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){return d(this,void 0,void 0,function(){var t,n,a=this;return h(this,function(o){return t=JSON.stringify(this.state.rcxItems),n=JSON.stringify(e.rcxItems),(!this.props.isFromReport||e.isFromReport&&t!=n)&&this.setState({rcxItems:e.rcxItems},function(){a.setImageURL_ForItems(e.rcxItems),f||(a.textareas.map(function(e){Object(s.h)(e)}),a.textareas2.map(function(e){Object(s.h)(e)}))}),[2]})})},t.prototype.setImageURL_ForItems=function(e){return d(this,void 0,void 0,function(){var t,n,a;return h(this,function(o){for(t=0;t<e.length;t++)n="",a=new i.b,e[t].photo&&(e[t].photo.toLowerCase().indexOf(".mp4")>0&&(n="assets/img/video-file-icon.png"),e[t].photo.toLowerCase().indexOf(".mov")>0&&(n="assets/img/video-file-icon.png"),e[t].photo.toLowerCase().indexOf(".pdf")>0&&(n="assets/img/pdf-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".xls")>0||e[t].photo.toLowerCase().indexOf(".csv")>0)&&(n="assets/img/excel-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".xlsx")>0||e[t].photo.toLowerCase().indexOf(".csv")>0)&&(n="assets/img/excel-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".docx")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/doc-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".doc")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/doc-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".ppt")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/ppt-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".pptx")>0||e[t].photo.toLowerCase().indexOf(".txt")>0)&&(n="assets/img/ppt-file-icon.png"),(e[t].photo.toLowerCase().indexOf(".png")>0||e[t].photo.toLowerCase().indexOf(".jpeg")>0||e[t].photo.toLowerCase().indexOf(".jpg")>0||e[t].photo.toLowerCase().indexOf(".webp")>0||e[t].photo.toLowerCase().indexOf(".tiff")>0)&&(n=a.GetSignedURL(i.a.DOCUMENT(),e[t].photo,6e5))),e[t].imageurl=n;return this.setState({rcxItems:e}),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state.newCCLabel;this.props.handleAddNewCCNote(t,this.props.isInspectionOrCleanliness),setTimeout(function(){e.textareas.map(function(e){Object(s.h)(e)}),e.textareas2.map(function(e){Object(s.h)(e)})},1e3)},t.prototype.handleNotesChange=function(e,t){var n=this,a=this.state.rcxItems;a[e].notesMeasurement=t.target.value,f=!0,this.setState({rcxItems:a},function(){document.getElementById(n.props.isInspectionOrCleanliness+"rcxTask"+e).focus(),n.props.handleAdder(a,n.props.isInspectionOrCleanliness)})},t.prototype.handleToggleChange=function(e,t){var n=this,a=this.state.rcxItems;a[e].ccBoolean=t.target.checked,this.setState({rcxItems:a},function(){n.props.handleAdder(a,n.props.isInspectionOrCleanliness)})},t.prototype.removeAttachment=function(e){var t=this,n=this.state.rcxItems;n[e].imageurl="",n[e].photo="",this.setState({rcxItems:n},function(){t.props.handleAdder(n,t.props.isInspectionOrCleanliness)})},t.prototype.handleFileAttachment=function(e,t){return d(this,void 0,void 0,function(){var n,a,o,r,p,m,d,f,b,g,v,y,C=this;return h(this,function(h){switch(h.label){case 0:n=this.state.rcxItems,a=this.props,o=a.buildingName,r=a.entityName,p=a.infoEntity,m=JSON.parse(c.a.getItem("user")),d=n[t],f=new i.b,h.label=1;case 1:return h.trys.push([1,4,,5]),e&&(e.file||e.length>0)&&d?(b=this.props.buildingName+"-_-"+Object(s.E)(10),g="",v=void 0,y=e.name.substring(e.name.indexOf(".")),g=""+b+y,v=e,n[t].photo=g,[4,f.UploadFile(i.a.DOCUMENT(),g,v,function(t,n){if(t)Object(u.a)("Attachment failed to upload");else{var a={building:o,docOntology:Object(s.E)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:m.contact,enteredByName:m.name,entityOntology:[{label:"",value:r}],entityType:p,rdfsLabel:e.name,s3FileName:g,entryTimeStamp:(new Date).toString(),linkToDocument:g};Object(l.f)(a).then(function(){})}})]):[3,3];case 2:h.sent(),this.setState({rcxItems:n,selectedAttachment:e},function(){C.props.handleAdder(n,C.props.isInspectionOrCleanliness),document.getElementById("uploadImageClose"+C.props.isInspectionOrCleanliness+t).click(),setTimeout(function(){C.setImageURL_ForItems(n)},1e3)}),h.label=3;case 3:return[3,5];case 4:return h.sent(),[3,5];case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.rcxItems,c=t.newCCLabel,l=this.props,u=l.isView,m=l.isFromReport,d=l.hideAddButton,h=new i.b;return a.createElement(a.Fragment,null,n&&n.map(function(t,n){var c="";return t.photo&&(c=h.GetSignedURL(i.a.DOCUMENT(),t.photo)),a.createElement("div",{key:n,className:"row padding-5",style:{borderBottom:"1px solid rgb(0 0 0 / 22%)",marginBottom:"5px",paddingBottom:"5px"}},a.createElement("div",{className:"col-md-3"},a.createElement("textarea",{disabled:!0,className:"form-control notInPDF",value:t.ccLabel+": \n"+t.proposedRCX,ref:function(t){return e.textareas.push(t)},onChange:function(e){Object(s.h)(e.target)},style:{width:"100%",height:"content",minHeight:"60px",overflow:"hidden",wordWrap:"break-word"}}),a.createElement("span",{className:"inPDF",style:{display:"none"}},t.ccLabel+": \n"+t.proposedRCX)),a.createElement("div",{className:"col-md-2"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("label",{htmlFor:"ccBoolean"+n},"Inspection - Acceptable")),a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"switch-container",style:{position:"unset"}},a.createElement("label",{htmlFor:"ccBoolean"+n},"No / Yes"),a.createElement("label",null,a.createElement("input",{id:"ccBoolean"+n,disabled:u,name:"ccBoolean",checked:t.ccBoolean,onChange:function(t){e.handleToggleChange(n,t)},className:"switch",type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))))),a.createElement("div",{className:"col-md-5"},a.createElement("textarea",{disabled:u,id:e.props.isInspectionOrCleanliness+"rcxTask"+n,className:"form-control notInPDF",value:t.notesMeasurement,placeholder:"Notes/Measurements",name:"proposedRCX",ref:function(t){return e.textareas2.push(t)},onChange:function(t){e.handleNotesChange(n,t),Object(s.h)(t.target)},style:{width:"100%",height:"content",minHeight:"60px",overflow:"hidden",wordWrap:"break-word"}}),a.createElement("span",{className:"inPDF",style:{display:"none"}},t.notesMeasurement)),!m&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-2"},!(t.photo&&t.photo.length>0)&&a.createElement(a.Fragment,null,a.createElement("button",{disabled:u||m,type:"button",className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Upload Image",onClick:function(){e.setState({selectedAttachment:void 0})}},a.createElement("i",{className:"fa fa-image"})),a.createElement("button",{disabled:u,type:"button",className:"btn btn-primary padding-5",title:"Video to Notes Converter"},a.createElement("i",{className:"fa fa-video-camera"}))),t.photo&&t.photo.length>0&&a.createElement("img",{crossOrigin:"anonymous",src:c,style:{width:"100%"}}),a.createElement(o.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness+n,onSaveButtonClick:function(){},saveButtonText:"Close",closeButtonId:"uploadImageClose"+e.props.isInspectionOrCleanliness+n,isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},a.createElement(r.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t[0],n)},files:e.state.selectedAttachment?[e.state.selectedAttachment]:[],single:!0})),a.createElement("div",{className:"btn-group mt-3"},t.photo&&t.photo.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",disabled:u||m,className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Replace Attachment",onClick:function(){e.setState({selectedAttachment:void 0})}},a.createElement("i",{className:"fa fa-image"})),c&&a.createElement("a",{className:"btn padding-5",download:t.photo,title:"Download Attachment",href:c},a.createElement("i",{className:"fa fa-download"})),a.createElement("button",{disabled:u,type:"button",className:"btn btn-danger padding-5",title:"Remove Attachment",onClick:function(){return document.getElementById("removedFindingsRCXAttacment"+t.preRCXName).click()}},a.createElement("i",{className:"fa fa-trash"})),a.createElement("button",{disabled:u,type:"button",className:"btn btn-primary padding-5",title:"Video to Notes Converter"},a.createElement("i",{className:"fa fa-video-camera"})),a.createElement("button",{style:{display:"none"},id:"removedFindingsRCXAttacment"+t.preRCXName,"data-toggle":"modal","data-target":"#removedDialogFindingsRCXAttacment"+t.preRCXName},"."),a.createElement(p.a,{instance:e.props.instance,id:"removedDialogFindingsRCXAttacment"+t.preRCXName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this attachment for RCX findings?",heading:"Alert",onConfirmButtonClick:function(){return e.removeAttachment(n)}}))))),m&&t.photo&&t.imageurl&&t.photo.length>0&&a.createElement("div",{className:"col-md-2"}," ",a.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,className:"inspection-image-preview"})))}),!d&&!m&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-1"},a.createElement("label",null,"Add:")),a.createElement("div",{className:"col-md-11 col-xs-11"},a.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog_"+this.props.isInspectionOrCleanliness+"_Findings",onClick:function(){e.setState({newCCLabel:""})}},a.createElement("i",{className:"fa fa-plus"}))),a.createElement(o.a,{disableSaveButton:!c,id:"AddLabelDialog_"+this.props.isInspectionOrCleanliness+"_Findings",onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:"RCX Findings"},a.createElement("div",{className:"form-group"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-12"},a.createElement("input",{type:"text",className:"form-control",value:c,placeholder:"New Label",name:"notes",onChange:function(t){e.setState({newCCLabel:t.target.value})}}))))))))},t}(a.Component);t.a=b},912:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}()),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},r=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],dropDownList:n.props.dropDownList},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleManufacturerChange=n.handleManufacturerChange.bind(n),n.handleModelChange=n.handleModelChange.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){return s(this,function(e){return this.props.items&&this.setState({items:this.props.items}),[2]})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({dropDownList:e.dropDownList})},t.prototype.addItem=function(){var e={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:this.props.typePredicate},t=this.state.items;t?t.push(e):t=[e],this.setState({items:t}),this.props.handleAdder(t)},t.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t)},t.prototype.handleItemChange=function(e,t){var n=this.state.items;n[e].selectedItem=t,this.setState({items:n}),this.props.handleAdder(n)},t.prototype.handleManufacturerChange=function(e,t){var n=this.state.items;n[e].manufacturer=t,this.setState({items:n}),this.props.handleAdder(n)},t.prototype.handleModelChange=function(e,t){var n=this.state.items;n[e].model=t,this.setState({items:n}),this.props.handleAdder(n)},t.prototype.render=function(){var e=this,t=this.props,n=t.isView,o=t.isFromReport,i=t.dropDownLabel,s=this.state,r=s.items,c=s.dropDownList,l=r&&!1===r.map(function(e){return""!==e.selectedItem}).find(function(e){return!1===e}),u=r&&!l||!r,p=this.props.hideAddButton;return a.createElement(a.Fragment,null,r&&r.map(function(t,i){return o&&!t.selectedItem?a.createElement("div",null):a.createElement("div",{key:i,className:"row"},a.createElement("br",null),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"repcmp"},e.props.dropDownLabel),a.createElement("select",{className:"form-control",id:"repcmp",disabled:n,value:t.selectedItem,onChange:function(t){return e.handleItemChange(i,t.target.value)}},a.createElement("option",{value:"",key:-2},"Select Item"),c&&c.map(function(e,t){return a.createElement("option",{key:t,value:e},e)})))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"man"},"Manufacturer"),a.createElement("input",{type:"text ",disabled:n,id:"man",className:"form-control",value:t.manufacturer,onChange:function(t){return e.handleManufacturerChange(i,t.target.value)}}))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"model"},"Model"),a.createElement("input",{type:"text ",disabled:n,id:"model",className:"form-control",value:t.model,onChange:function(t){return e.handleModelChange(i,t.target.value)}}))),a.createElement("div",{className:"col-md-1 padding-10"},a.createElement("br",null),i>0&&!o&&a.createElement("button",{type:"button",className:"btn btn-danger btn-xs",title:"Remove Item",onClick:function(){return e.removeItem(i)}},a.createElement("i",{className:"fa fa-remove"}))))}),!p&&!o&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 inline-flex padding-10"},a.createElement("label",null,"Add ",i,":")," \xa0\xa0",a.createElement("button",{type:"button",disabled:!u,className:"btn btn-dark btn-fill btn-sm",title:"Add Item",onClick:this.addItem},a.createElement("i",{className:"fa fa-plus"})))),a.createElement("br",null),a.createElement("br",null))},t}(a.Component);t.a=r},913:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(698)),i=n(703),s=n(57),r=n(20),c=n(743),l=n(13),u=n(737),p=n(8),m=n(21),d=n(701),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),f=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{c(a.next(e))}catch(e){i(e)}}function r(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((a=a.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],caLabel:[],labelsDropDownList:[],files:[],onPageTextChanged:!1},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCALabelChange=n.handleCALabelChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n.setImageURL_ForItems=n.setImageURL_ForItems.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){var e,t=this;return b(this,function(n){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e},function(){t.setImageURL_ForItems(t.props.items)})),[2]})})},t.prototype.setImageURL_ForItems=function(e){return f(this,void 0,void 0,function(){var t,n,a;return b(this,function(o){for(t=new s.b,n=0;n<e.length;n++)a="",e[n]&&e[n].photo&&e[n].photo.length&&e[n].photo[0]&&(e[n].photo[0].toLowerCase().indexOf(".mp4")>0&&(a="assets/img/video-file-icon.png"),e[n].photo[0].toLowerCase().indexOf(".mov")>0&&(a="assets/img/video-file-icon.png"),e[n].photo[0].toLowerCase().indexOf(".pdf")>0&&(a="assets/img/pdf-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".xls")>0||e[n].photo[0].toLowerCase().indexOf(".csv")>0)&&(a="assets/img/excel-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".xlsx")>0||e[n].photo[0].toLowerCase().indexOf(".csv")>0)&&(a="assets/img/excel-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".docx")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(a="assets/img/doc-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".doc")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(a="assets/img/doc-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".ppt")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(a="assets/img/ppt-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".pptx")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(a="assets/img/ppt-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".png")>0||e[n].photo[0].toLowerCase().indexOf(".jpeg")>0||e[n].photo[0].toLowerCase().indexOf(".jpg")>0||e[n].photo[0].toLowerCase().indexOf(".webp")>0||e[n].photo[0].toLowerCase().indexOf(".tiff")>0)&&(a=t.GetSignedURL(s.a.DOCUMENT(),e[n].photo[0]))),e[n].imageurl=a;return this.setState({items:e}),[2]})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){return f(this,void 0,void 0,function(){var t,n,a=this;return b(this,function(o){return e.buildingName&&e.instance&&(t=JSON.stringify(this.state.items),n=JSON.stringify(e.items),(!this.state.onPageTextChanged&&!this.props.isFromReport&&t!=n||this.props.isFromReport&&t!=n)&&this.setState({items:e.items},function(){a.setImageURL_ForItems(e.items)})),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.items;t.caLabel.map(function(t){var a={caName:"",age:"",assessmentLabel:t.value,notes:"",photo:[],repairCost:"",size:"",type:e.props.type,entryTimeStamp:"",typeOf:t.value};n||(n=[]),n.push(a)}),this.setState({items:n,caLabel:[]}),this.props.handleAdder(n,this.props.type)},t.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t,this.props.type)},t.prototype.removeAttachment=function(e){var t=this.state.items;t[e].imageurl="",t[e].photo[0]="",this.setState({items:t}),this.props.handleAdder(t,this.props.type)},t.prototype.handleCALabelChange=function(e){this.setState({caLabel:e})},t.prototype.handleItemChange=function(e,t){var n=this.state.items,a=t.target.name;(n&&n[e])[""+a]=t.target.value,this.setState({items:n,onPageTextChanged:!0}),this.props.handleAdder(n,this.props.type)},t.prototype.handleFileAttachment=function(e,t){var n=this,a=this.props,o=a.buildingName,i=a.entityName,c=a.infoEntity,l=a.type,d=JSON.parse(p.a.getItem("user")),h=this.state.items,g=h[t];e&&e.length>0&&e[0].file&&g&&this.setState({items:h,files:e},function(){return f(n,void 0,void 0,function(){var n,a,p,f=this;return b(this,function(g){switch(g.label){case 0:n=function(n){var p,g,v,y,C;return b(this,function(b){switch(b.label){case 0:return p=e[n],g=a.props.buildingName+"-_-"+Object(r.E)(10),v="",y=void 0,C=p.name.substring(p.name.indexOf(".")),v=""+g+C,y=p,h[t].photo[0]=v,a.props.handleAdder(h,a.props.type),[4,(new s.b).UploadFile(s.a.DOCUMENT(),v,y,function(e,t){if(e)Object(m.a)("Attachment failed to upload");else{var n={building:o,docOntology:Object(r.E)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:d.contact,enteredByName:d.name,entityOntology:[{label:"",value:i}],entityType:c,rdfsLabel:p.name,s3FileName:v,entryTimeStamp:(new Date).toString(),linkToDocument:v};Object(u.f)(n).then(function(){})}})];case 1:return b.sent(),a.setState({items:h,files:[p]},function(){f.props.handleAdder(h,l),document.getElementById("uploadImageClose"+f.props.type+t).click(),setTimeout(function(){f.setImageURL_ForItems(h)},1e3)}),[2]}})},a=this,p=0,g.label=1;case 1:return p<e.length?[5,n(p)]:[3,4];case 2:g.sent(),g.label=3;case 3:return p++,[3,1];case 4:return[2]}})})})},t.prototype.handlefileAttached=function(e,t){if(e.length>0){for(var n=this.state.items,a=n[t],o=0;o<e.length;o++){var i=e[o].name.split(".").pop(),c=this.props.buildingName+"_"+Object(r.E)(15)+"."+i.toLowerCase();n[0].photo[o]=c}Object(l.g)(e),this.setState({files:e,items:n},function(){}),this.props.handleAdder(n,this.props.type);var u=new s.b,p=Object(l.d)();if(p&&p.length)for(var d=0;d<p.length;d++){var h=p[d];u.UploadFile(s.a.DOCUMENT(),a.photo[d],h,function(e,t){e?Object(m.a)("Attachment failed to upload"):console.log(t)})}}},t.prototype.render=function(){var e=this,t=this.state,n=t.items,r=t.caLabel,l=t.labelsDropDownList,u=this.props,p=u.caOf,m=u.hideAddButton,h=void 0!==m&&m,f=u.isFromReport,b=new s.b;return a.createElement(a.Fragment,null,n&&n.map(function(t,n){var i="";return t.photo&&(i=b.GetSignedURL(s.a.DOCUMENT(),t.photo[0])),a.createElement("div",{key:n,className:"row"},a.createElement("br",null),a.createElement("div",{className:"form-group"},a.createElement("div",{className:"col-md-2"},a.createElement("label",{htmlFor:t.assessmentLabel},t.assessmentLabel)),"Space"==p&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-1"},a.createElement("input",{type:"text",id:t.age,className:"form-control",value:t.age,placeholder:"Age",name:"age",onChange:function(t){return e.handleItemChange(n,t)}})),a.createElement("div",{className:"col-md-1"},a.createElement("input",{type:"text",id:t.size,className:"form-control",value:t.size,placeholder:"Size",name:"size",onChange:function(t){return e.handleItemChange(n,t)}}))),a.createElement("div",{className:"Space"==p?"col-md-3":"col-md-5"},a.createElement("input",{type:"text",id:t.notes,className:"form-control notInPDF",value:t.notes,placeholder:"Notes",name:"notes",onChange:function(t){return e.handleItemChange(n,t)}}),a.createElement("span",{className:"inPDF",style:{display:"none"}},t.notes)),a.createElement("div",{className:"col-md-2"},a.createElement("input",{type:"text",id:t.repairCost,className:"form-control",value:t.repairCost,placeholder:"Approximate Repair Cost",name:"repairCost",onChange:function(t){return e.handleItemChange(n,t)}})),!f&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-1"},!(t.photo&&t.photo.length>0)&&a.createElement("button",{type:"button",className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.type+n,title:"Upload Attachment",onClick:function(){e.setState({files:[]})}},a.createElement("i",{className:"fa fa-paperclip"})),t.photo&&t.photo.length>0&&a.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,style:{width:"100%"}}),a.createElement(o.a,{id:"uploadImage"+e.props.type+n,onSaveButtonClick:function(){},saveButtonText:"Close",closeButtonId:"uploadImageClose"+e.props.type+n,isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.type},a.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t,n)},files:e.state.files&&e.state.files.length>0?e.state.files:[],single:!0}))),a.createElement("div",{className:"col-md-2 btn-group"},t.photo&&t.photo.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.type+n,title:"Replace Attachment",onClick:function(){e.setState({files:[]})}},a.createElement("i",{className:"fa fa-paperclip"})),i&&a.createElement("a",{className:"btn padding-5",title:"Download Attachment",href:i},a.createElement("i",{className:"fa fa-download"})),a.createElement("button",{type:"button",className:"btn btn-danger padding-5",title:"Remove Attachment",onClick:function(){return document.getElementById("removedCAAttacment"+t.caName).click()}},a.createElement("i",{className:"fa fa-trash"})),a.createElement("button",{style:{display:"none"},id:"removedCAAttacment"+t.caName,"data-toggle":"modal","data-target":"#removedDialogCAAttacment"+t.caName},"."),a.createElement(d.a,{instance:e.props.instance,id:"removedDialogCAAttacment"+t.caName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this attachment for proposed RCX ?",heading:"Alert",onConfirmButtonClick:function(){return e.removeAttachment(n)}})),a.createElement("button",{type:"button",className:"btn ml-5 padding-5",title:"Remove Item",style:{color:"#f00"},onClick:function(){return document.getElementById("removeCA"+t.caName).click()}},a.createElement("i",{className:"fa fa-remove"})),a.createElement("button",{style:{display:"none"},id:"removeCA"+t.caName,"data-toggle":"modal","data-target":"#removeCADialog"+t.caName},"."),a.createElement(d.a,{instance:e.props.instance,id:"removeCADialog"+t.caName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this proposed RCX?",heading:"Alert",onConfirmButtonClick:function(){return e.removeItem(n)}}))),f&&t.photo&&t.photo.length>0&&a.createElement("div",{className:"col-md-2"},a.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,className:"inspection-image-preview"}))))}),!h&&!f&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-11 col-xs-11"},a.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog"+this.props.type,style:{fontWeight:"bold"}},a.createElement("i",{className:"fa fa-plus"}),"Add ",this.props.type)),a.createElement(o.a,{disableSaveButton:!r,id:"AddLabelDialog"+this.props.type,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.type},l&&l.length>0&&a.createElement("div",{className:"form-group"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-12"},a.createElement(i.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCALabelChange,placeholder:this.props.type+" Assessment Labels",options:l,value:r}))))))))},t}(a.Component);t.a=g}});