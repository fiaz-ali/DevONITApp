webpackJsonp([22],{2945:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(2),l=(a.n(o),a(668)),c=a.n(l),i=a(649),s=a(673),r=a(10),d=a(659),m=a(116),p=a(31),u=a(2946),h=a(752),g=a(675),f=a(753),b=a(53),v=a(692),E=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),w=this&&this.__assign||function(){return(w=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(o,l){function c(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(c,i)}s((n=n.apply(e,t||[])).next())})},N=this&&this.__generator||function(e,t){var a,n,o,l,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,n=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){c=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){c.label=l[1];break}if(6===l[0]&&c.label<o[1]){c.label=o[1],o=l;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(l);break}o[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],n=0}finally{a=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},x=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<a;t++)for(var l=arguments[t],c=0,i=l.length;c<i;c++,o++)n[o]=l[c];return n},k=new Date,T=new Date,S=function(e){function t(t){var a=e.call(this,t)||this;return a.state={workflow:Object(),_zones:[],locationList:[],ZonesOnly:[],Floors:[],zoneLocationList:[],showZoneAndFloor:!0,itemName:"",_spaceTypes:[],newLocation:Object(),spaceName:"",spaceType:"",floorOntology:"",floorRdfsLabel:"",zoneName:"",zoneType:"",newFloor:Object(),_zoneTypes:[],_serviceProvidersList:[],floorStatusClassName:["allSelect"],zoneStatusClassName:["allSelect"],isView:!!a.props.view&&a.props.view,files:[],fileTitle:"",templateName:"",phaseTemplateDetailList:[]},k=new Date,T=new Date,n=a,a.fetchWorkflow=a.fetchWorkflow.bind(a),a.handleWorkflowChange=a.handleWorkflowChange.bind(a),a.fetchZones=a.fetchZones.bind(a),a.addItemName=a.addItemName.bind(a),a.addItem=a.addItem.bind(a),a.handleWorkflowDescriptionChange=a.handleWorkflowDescriptionChange.bind(a),a.handleSpaceType=a.handleSpaceType.bind(a),a.handleSpaceName=a.handleSpaceName.bind(a),a.createSpace=a.createSpace.bind(a),a.handleFloorOntology=a.handleFloorOntology.bind(a),a.handleFloorRdfsLabel=a.handleFloorRdfsLabel.bind(a),a.handleZoneTypeChange=a.handleZoneTypeChange.bind(a),a.handleNameChange=a.handleNameChange.bind(a),a.saveZone=a.saveZone.bind(a),a.addFloorSpaceToArray=a.addFloorSpaceToArray.bind(a),a.handleRCXCAOTHER=a.handleRCXCAOTHER.bind(a),a.addZoneSpaceToArray=a.addZoneSpaceToArray.bind(a),a.handleRCXCAOTHERZone=a.handleRCXCAOTHERZone.bind(a),a.removeItem=a.removeItem.bind(a),a.floorSelectAllEcmRcxCaOther=a.floorSelectAllEcmRcxCaOther.bind(a),a.zoneSelectAllEcmRcxCaOther=a.zoneSelectAllEcmRcxCaOther.bind(a),a.handleStatusColor=a.handleStatusColor.bind(a),a.handleStatusColorZone=a.handleStatusColorZone.bind(a),a.handlefileAttached=a.handlefileAttached.bind(a),a._getPhaseTemplateDetails=a._getPhaseTemplateDetails.bind(a),a.createWorkFlow=a.createWorkFlow.bind(a),a}return E(t,e),t.prototype.componentWillMount=function(){return y(this,void 0,void 0,function(){return N(this,function(e){return this.props.buildingName&&(this.handleDateOfStartChange(new Date),this.handleFinishDateChange(new Date)),[2]})})},t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return N(this,function(e){switch(e.label){case 0:return this.props.buildingName?(Object(m.a)(!0),[4,this.fetchZones(this.props.buildingName)]):[3,7];case 1:return e.sent(),[4,this._getSpaceTypeList()];case 2:return e.sent(),[4,this._getZoneTypesList()];case 3:return e.sent(),[4,this._getPhaseTemplateDetails()];case 4:return e.sent(),Object(m.a)(!1),this.props.ontology||this.props.templateID?[4,this.fetchWorkflow()]:[3,6];case 5:return e.sent(),[3,7];case 6:this.floorSelectAllEcmRcxCaOther(),this.zoneSelectAllEcmRcxCaOther(),e.label=7;case 7:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){return y(this,void 0,void 0,function(){return N(this,function(e){return[2]})})},t.prototype._getPhaseTemplateDetails=function(){return y(this,void 0,void 0,function(){var e=this;return N(this,function(t){switch(t.label){case 0:return[4,Object(h.j)(this.props.buildingName).then(function(t){t.length>0&&t[0].ontology?e.setState({phaseTemplateDetailList:t}):e.setState({phaseTemplateDetailList:[]})})];case 1:return t.sent(),[2]}})})},t.prototype.floorSelectAllEcmRcxCaOther=function(){var e=this.state.workflow,t=this.state.Floors,a=this.state.locationList;e.spacesWorkFlows||(e.spacesWorkFlows=[]);for(var n=0;n<t.length;n++)for(var o=0;o<a.length;o++)a[n]&&a[n].locationList[o]&&e.spacesWorkFlows&&e.spacesWorkFlows.push({ontology:Object(p.p)(12),space:a[n].locationList[o]?a[n].locationList[o].ontology.value:"",ecm:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},rcx:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},ca:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0,space_condition:!0,space_compliance:!0,space_safety:!0},other:{ontology:Object(p.p)(12),other:!0}});this.setState({workflow:e})},t.prototype.zoneSelectAllEcmRcxCaOther=function(){var e=this.state.workflow,t=this.state._zones,a=this.state.zoneLocationList;e.spacesWorkFlows||(e.spacesWorkFlows=[]);for(var n=0;n<t.length;n++)for(var o=0;o<a.length;o++)a[n]&&a[n].locationList[o]&&e.spacesWorkFlows&&e.spacesWorkFlows.push({ontology:Object(p.p)(12),space:Object(r.g)(a[n]&&a[n].locationList[o]?a[n].locationList[o].ontology:""),ecm:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},rcx:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},ca:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0,space_condition:!0,space_compliance:!0,space_safety:!0},other:{ontology:Object(p.p)(12),other:!0}});this.setState({workflow:e})},t.prototype.fetchWorkflow=function(){return y(this,void 0,void 0,function(){var e,t,a,n,o,l,c=this;return N(this,function(i){switch(i.label){case 0:return e=this.props,t=e.buildingName,a=e.ontology,n=e.templateID,o=this.state.workflow,(o={ontology:Object(p.p)(8),isTemplate:!1,description:"",dateOfStart:(new Date).toString(),finishDate:(new Date).toString(),ecm:!0,rcx:!0,ca:!0,other:!0,otherName:"",lead:"",workflowTemplate:"",workFlowDescription:[],spacesWorkFlows:[]}).dateOfStart=k.toString(),o.finishDate=T.toString(),l="",l=a||n,t&&l?[4,Object(h.k)(t,l).then(function(e){return y(c,void 0,void 0,function(){var t,a,c,i,s,d,m,u,g,f;return N(this,function(b){switch(b.label){case 0:return e&&e.length&&Object(r.g)(e[0].ontology)?(t=e[0],a=Object(r.g)(t.dateOfStart),c=Object(r.g)(t.finishDate),o.ca="true"==Object(r.g)(t.ca),o.ecm="true"==Object(r.g)(t.ecm),o.rcx="true"==Object(r.g)(t.rcx),o.other="true"==Object(r.g)(t.other),o.dateOfStart=a,k=a?new Date(a):new Date,o.description=Object(r.g)(t.description),o.isTemplate=!1,o.finishDate=c,T=c?new Date(c):new Date,o.lead=Object(r.g)(t.lead),o.workflowTemplate=Object(r.g)(t.workflowTemplate),o.ontology=n?Object(p.p)(8).toString():Object(r.g)(t.ontology),o.otherName=Object(r.g)(t.otherName),o.workFlowDescription=[],[4,Object(h.l)(l)]):[3,3];case 1:for(i=b.sent(),g=0;g<i.length;g++)s=i[g],(d=Object()).done="true"==Object(r.g)(s.done),d.fileName=Object(r.g)(s.fileName),d.number=Object(r.g)(s.number),d.ontology=n?Object(p.p)(8).toString():Object(r.g)(s.ontology),d.title=Object(r.g)(s.title),d.workFlowDescription=Object(r.g)(s.workFlowDescription),o.workFlowDescription||(o.workFlowDescription=[]),(f=o.workFlowDescription).push.apply(f,[d]);return[4,Object(h.m)(l)];case 2:for(m=b.sent(),o.spacesWorkFlows||(o.spacesWorkFlows=[]),u=function(e){var t,a=m[e],l=n?Object(p.p)(8).toString():Object(r.g)(a.space);if(-1==o.spacesWorkFlows.findIndex(function(e){return e.space==l})){var c=Object();c.ca=Object(),c.ca.ontology=n?Object(p.p)(8).toString():Object(r.g)(a.CAOntology),c.ca.cooling="true"==Object(r.g)(a.CAcooling),c.ca.heating="true"==Object(r.g)(a.CAheating),c.ca.lighting="true"==Object(r.g)(a.CAlighting),c.ca.miscellaneous="true"==Object(r.g)(a.CAmiscellaneous),c.ca.space_compliance="true"==Object(r.g)(a.CAspace_compliance),c.ca.space_condition="true"==Object(r.g)(a.CAspace_condition),c.ca.space_safety="true"==Object(r.g)(a.CAspace_safety),c.ecm=Object(),c.ecm.ontology=n?Object(p.p)(8).toString():Object(r.g)(a.ECMOntology),c.ecm.cooling="true"==Object(r.g)(a.ECMcooling),c.ecm.heating="true"==Object(r.g)(a.ECMheating),c.ecm.lighting="true"==Object(r.g)(a.ECMlighting),c.ecm.miscellaneous="true"==Object(r.g)(a.ECMmiscellaneous),c.other=Object(),c.other.ontology=n?Object(p.p)(8).toString():Object(r.g)(a.OtherOntology),c.other.other="true"==Object(r.g)(a.OTHERother),c.rcx=Object(),c.rcx.ontology=n?Object(p.p)(8).toString():Object(r.g)(a.RCXOntology),c.rcx.cooling="true"==Object(r.g)(a.RCXcooling),c.rcx.heating="true"==Object(r.g)(a.RCXheating),c.rcx.lighting="true"==Object(r.g)(a.RCXlighting),c.rcx.miscellaneous="true"==Object(r.g)(a.RCXmiscellaneous),c.ontology=n?Object(p.p)(8).toString():Object(r.g)(a.workflowOntology),c.space=l,(t=o.spacesWorkFlows).push.apply(t,[c])}},g=0;g<m.length;g++)u(g);b.label=3;case 3:return[2]}})})})]:[3,2];case 1:i.sent(),i.label=2;case 2:return this.setState({workflow:w({},o)}),[2]}})})},t.prototype.saveWorkFlow=function(e,t){return y(this,void 0,void 0,function(){var a,n,o,l,c,i,s,r,d,u=this;return N(this,function(g){switch(g.label){case 0:if(a=this.state.workflow,n=this.state.templateName,a.isTemplate=e,1==e){if(a.description=n,a.ontology=Object(p.p)(8),a.workFlowDescription&&a.workFlowDescription.length>0)for(o=0;o<a.workFlowDescription.length;o++)a.workFlowDescription[o].ontology=Object(p.p)(8);if(a.spacesWorkFlows&&a.spacesWorkFlows.length>0)for(o=0;o<a.spacesWorkFlows.length;o++)a.spacesWorkFlows[o].ontology=Object(p.p)(8),a.spacesWorkFlows[o].ecm.ontology=Object(p.p)(8),a.spacesWorkFlows[o].rcx.ontology=Object(p.p)(8),a.spacesWorkFlows[o].ca.ontology=Object(p.p)(8),a.spacesWorkFlows[o].other.ontology=Object(p.p)(8)}return l=this.state.phaseTemplateDetailList,c=this.state.phaseTemplateDetailList,i=this.props,s=i.buildingName,r=i.ontology,d=i.instance,Object(m.a)(!0),[4,Object(h.n)(s,a,!!r).then(function(e){return y(u,void 0,void 0,function(){var e,n,o;return N(this,function(i){switch(i.label){case 0:return a.workflowTemplate&&""!=a.workflowTemplate?(e=c&&c.find(function(e){return e.ontology==a.workflowTemplate}))&&e.ontology?[4,this.createWorkFlow(e)]:[3,2]:[3,4];case 1:i.sent(),i.label=2;case 2:return this.props.ontology?[3,4]:a.workflowTemplate&&""!=a.workflowTemplate?(n=l&&l.find(function(e){return e.ontology==a.workflowTemplate}),o=!n.uses||void 0==n.uses&&NaN==n.uses?"1":(n&&n.uses+1).toString(),[4,Object(h.o)(s,n.ontology,o).then(function(e){}).catch(function(e){return e})]):[3,4];case 3:i.sent(),i.label=4;case 4:return Object(m.a)(!1),t&&(this.props.fetchWorkflow(this.props.buildingName),window.location.hash=d+"/"+s+"/Inspections"),[2]}})})}).catch(function(e){console.log("error: ",e)})];case 1:return g.sent(),[2]}})})},t.prototype.createWorkFlow=function(e,t){return y(this,void 0,void 0,function(){var a,n,o,l,c,i,s,r,d,m;return N(this,function(u){switch(u.label){case 0:for(a=this.props.buildingName,(n=Object()).ontology=t&&t?t.ontology:Object(p.p)(7),n.description=e.description,n.module=e.module,n.status="Planned",n.phaseID=Object(p.n)(7).toString(),n.templateID=e.templateID,n.templateType=e.templateType,n.stageTemplateOnology=[],n.contractFileName=t&&t.description?t.description+"-"+t.ontology:"",n.contractID=t&&t.ontology?t.ontology:"",n.stages=[],o=0;o<e.stageTemplates.length;o++){for(l=e.stageTemplates[o],c=Object(),i=Object(p.p)(7),c.task=i,c.taskNumber=Object(p.n)(7).toString(),c.description=l.description,c.enteredBy=l.enteredBy,c.enteredByName=l.enteredByName,c.assignedTo=l.assignedTo,c.hasChat=!0,c.entryTimeStamp=l.entryTimeStamp,c.criticality=l.criticality,c.equipSubject=l.equipSubject,c.equipRdfsLabel=l.equipRdfsLabel,c.spaceSubject=l.spaceSubject,c.spaceRdfsLabel=l.spaceRdfsLabel,c.floor=l.floor,c.building=l.building,c.workOrder=l.workOrder,c.status="Planned",c.acknowledged=!0,c.archived=!1,c.startTime="",c.note="",c.isSequence=!0,c.QRTag=l.QRTag,c.isQRTask=l.isQRTask,c.subTasks=[],c.workflowType=l.workflowType,c.redirectionLink=l.redirectionLink,c.isStage=!0,c.isActivated=!1,c.estimatedStartTime=new Date,s=new Date,c.estimatedEndTime=new Date(s.setDate(new Date(s).getDate()+2)),c.subTasks=[],r=0;r<l.subTasks.length;r++)d=l.subTasks[r],(m=Object()).subTask=Object(p.p)(7),m.taskNumber=Object(p.n)(7).toString(),m.description=d.description,m.enteredBy=d.enteredBy,m.enteredByName=d.enteredByName,m.assignedTo=d.assignedTo,m.assignedDepartment=d.assignedDepartment,m.hasChat=!0,m.entryTimeStamp=d.entryTimeStamp,m.criticality=d.criticality,m.equipSubject=c.equipSubject,m.equipRdfsLabel=c.equipRdfsLabel,m.spaceSubject=c.spaceSubject,m.spaceRdfsLabel=c.spaceRdfsLabel,m.building=c.building,m.workOrder=d.workOrder,m.status="Planned",m.acknowledged=!0,m.archived=!1,m.index=d.index,m.parentTask=c.task,m.note=d.note,m.relatedLink=d.relatedLink,m.duration=d.duration,m.durationUnit=d.durationUnit,m.workerDuration=d.workerDuration,m.workerDurationUnit=d.workerDurationUnit,m.fileName=d.fileName,m.oldFileName=d.oldFileName,m.startTime="",m.workType=d.workType,m.status="Planned",m.checklistID=d.checklistID,m.isQRTask=d.isQRTask,m.QRTag=d.QRTag,m.notifyViaEmail=d.notifyViaEmail,m.notifyViaSMS=d.notifyViaSMS,m.estimatedStartTime=c.estimatedStartTime,m.estimatedEndTime=c.estimatedEndTime,m.workflowType=d.workflowType,m.redirectionLink=d.redirectionLink,m.isStage=!0,m.isActivated=!1,m.acknowledged=!0,m.archived=!1,c.subTasks.push(m);n&&n.stages&&n.stages.push(c)}return[4,Object(v.e)(a,n,!1,!0).then(function(e){}).catch(function(e){return e})];case 1:return u.sent(),[2]}})})},t.prototype._getSpaceTypeList=function(){return y(this,void 0,void 0,function(){var e=this;return N(this,function(t){switch(t.label){case 0:return[4,Object(d.g)(this.props.buildingName).then(function(t){e.setState({_spaceTypes:t})})];case 1:return t.sent(),[2]}})})},t.prototype.fetchZones=function(e){return y(this,void 0,void 0,function(){var t,a,n,o=this;return N(this,function(l){switch(l.label){case 0:return[4,Object(s.a)(e)];case 1:return(t=l.sent())&&t.length>0?this.setState({_zones:x(t)}):this.setState({_zones:[]}),a=t&&t.length?t.filter(function(e){return"Floor"!=Object(r.g)(e.type)}):[],n=t&&t.length?t.filter(function(e){return"Floor"==Object(r.g)(e.type)}):[],this.setState({Floors:n,ZonesOnly:a},function(){return y(o,void 0,void 0,function(){var e,t,o,l,c,i,s,m,p,u,h=this;return N(this,function(g){switch(g.label){case 0:e=[],t=[],o=[],l=function(a){return N(this,function(o){switch(o.label){case 0:return[4,Object(d.d)(Object(r.g)(c.state.Floors[a].zone),c.props.buildingName).then(function(o){e.push({floor:Object(r.g)(n[a].zone),locationList:o}),t.push("noSelect")})];case 1:return o.sent(),[2]}})},c=this,i=0,g.label=1;case 1:return i<n.length?[5,l(i)]:[3,4];case 2:g.sent(),g.label=3;case 3:return i++,[3,1];case 4:s=[],m=function(e){return N(this,function(t){switch(t.label){case 0:return[4,Object(d.e)(Object(r.g)(p.state.ZonesOnly[e].zone),p.props.buildingName).then(function(t){s||(s=[]),s.push({zone:Object(r.g)(a[e].zone),locationList:t}),o.push("noSelect")})];case 1:return t.sent(),[2]}})},p=this,u=0,g.label=5;case 5:return u<a.length?[5,m(u)]:[3,8];case 6:g.sent(),g.label=7;case 7:return u++,[3,5];case 8:return this.setState({locationList:e,zoneLocationList:s,floorStatusClassName:t,zoneStatusClassName:o},function(){h.props.ontology||(h.floorSelectAllEcmRcxCaOther(),h.zoneSelectAllEcmRcxCaOther())}),[2]}})})}),[2]}})})},t.prototype.saveZone=function(){return y(this,void 0,void 0,function(){var e,t,a=this;return N(this,function(o){switch(o.label){case 0:return e=this.props.buildingName,(t=Object()).rdfsLabel=this.state.zoneName,t.type=this.state.zoneType,[4,Object(s.c)(t,e)];case 1:return o.sent(),this.setState({zoneName:"",zoneType:""},function(){return y(a,void 0,void 0,function(){var e=this;return N(this,function(t){return setTimeout(function(){n.fetchZones(e.props.buildingName)},1500),[2]})})}),[2]}})})},t.prototype.handleWorkflowChange=function(e){var t=this.state.workflow,a=e.target.name;"checkbox"==e.target.type?t[""+a]=e.target.checked:t[""+a]=e.target.value,this.setState({workflow:t})},t.prototype.handleFloorRdfsLabel=function(e){this.setState({floorRdfsLabel:e})},t.prototype.addItemName=function(e){this.setState({itemName:e})},t.prototype.addItem=function(){var e,t=this.state.workflow;t.workFlowDescription||(t.workFlowDescription=[]),(e=t.workFlowDescription).push.apply(e,[{ontology:Object(p.p)(12),title:this.state.itemName,done:!1,fileName:"",number:"1",workFlowDescription:""}]),this.setState({workflow:t,itemName:""})},t.prototype.removeItem=function(e){var t=this.state.workflow;t.workFlowDescription||(t.workFlowDescription=[]),t.workFlowDescription.splice(e,1),this.setState({workflow:t,itemName:""})},t.prototype.handleWorkflowDescriptionChange=function(e,t){var a=this.state.workflow,n=e.target.name;"checkbox"==e.target.type?a.workFlowDescription[t][""+n]=e.target.checked:a.workFlowDescription[t][""+n]=e.target.value,this.setState({workflow:a})},t.prototype.handleSpaceType=function(e){this.setState({spaceType:e})},t.prototype.handleSpaceName=function(e){this.setState({spaceName:e})},t.prototype.handleFloorOntology=function(e){this.setState({floorOntology:e})},t.prototype.createFloor=function(){return y(this,void 0,void 0,function(){var e,t,a=this;return N(this,function(o){switch(o.label){case 0:return e=this.state.floorRdfsLabel,(t=this.state.newFloor).rdfsLabel=e,t?(t.floor=t.floor?t.floor:Object(p.p)(7),[4,Object(s.b)(this.props.buildingName,t).then(function(e){})]):[3,2];case 1:o.sent(),this.setState({floorRdfsLabel:""},function(){return y(a,void 0,void 0,function(){var e=this;return N(this,function(t){return setTimeout(function(){n.fetchZones(e.props.buildingName)},1500),[2]})})}),o.label=2;case 2:return[2]}})})},t.prototype._fetchServiceProvidersList=function(e){return y(this,void 0,void 0,function(){var t=this;return N(this,function(a){switch(a.label){case 0:return"zoneHeat"==e&&(e="both"),[4,Object(s.g)(this.props.buildingName,e).then(function(e){t.setState({_serviceProvidersList:e})}).catch(function(e){return e})];case 1:return a.sent(),[2]}})})},t.prototype._getZoneTypesList=function(){return y(this,void 0,void 0,function(){var e,t=this;return N(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,[4,Object(s.h)(e).then(function(e){t.setState({_zoneTypes:e})})];case 1:return a.sent(),[2]}})})},t.prototype.handleNameChange=function(e){this.setState({zoneName:e})},t.prototype.handleZoneTypeChange=function(e){var t=this;this.setState({zoneType:e},function(){t._fetchServiceProvidersList(e)})},t.prototype.addFloorSpaceToArray=function(e,t,a){var n=this.state.workflow,o=this.state.locationList;if(1==e)n.spacesWorkFlows||(n.spacesWorkFlows=[]),n.spacesWorkFlows.find(function(e){return e.space==o[t].locationList[a].ontology.value})||(n.spacesWorkFlows.push({ontology:Object(p.p)(12),space:o[t].locationList[a]?o[t].locationList[a].ontology.value:"",ecm:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},rcx:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},ca:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0,space_condition:!0,space_compliance:!0,space_safety:!0},other:{ontology:Object(p.p)(12),other:!0}}),this.setState({workflow:n}));else{var l=[];l=n.spacesWorkFlows;var c=o[t].locationList[a]?l.filter(function(e){return e.space==o[t].locationList[a].ontology.value}):[];n.spacesWorkFlows=x(c),this.setState({workflow:n})}},t.prototype.addZoneSpaceToArray=function(e,t,a){var n=this.state.workflow,o=this.state.zoneLocationList;if(1==e)n.spacesWorkFlows||(n.spacesWorkFlows=[]),n.spacesWorkFlows.find(function(e){return e.space==o[t].locationList[a].ontology.value})||(n.spacesWorkFlows.push({ontology:Object(p.p)(12),space:Object(r.g)(o[t].locationList[a].ontology),ecm:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},rcx:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0},ca:{ontology:Object(p.p)(12),cooling:!0,heating:!0,lighting:!0,miscellaneous:!0,space_condition:!0,space_compliance:!0,space_safety:!0},other:{ontology:Object(p.p)(12),other:!0}}),this.setState({workflow:n}));else{var l=n.spacesWorkFlows.filter(function(e){return e.space==o[t].locationList[a].ontology.value});n.spacesWorkFlows=x(l),this.setState({workflow:n})}},t.prototype.handleRCXCAOTHER=function(e,t,a,n,o){var l=this.state.workflow,c=l.spacesWorkFlows,i=this.state.locationList;c||(c=[]);var s=c.find(function(e){return e.space==i[a].locationList[n].ontology.value});s&&s&&("ecm"==t&&("Cooling"==o&&(s.ecm.cooling=e),"Heating"==o&&(s.ecm.heating=e),"Lighting"==o&&(s.ecm.lighting=e),"Miscellaneous"==o&&(s.ecm.miscellaneous=e)),"rcx"==t&&("Cooling"==o&&(s.rcx.cooling=e),"Heating"==o&&(s.rcx.heating=e),"Lighting"==o&&(s.rcx.lighting=e),"Miscellaneous"==o&&(s.rcx.miscellaneous=e)),"ca"==t&&("Cooling"==o&&(s.ca.cooling=e),"Heating"==o&&(s.ca.heating=e),"Lighting"==o&&(s.ca.lighting=e),"Miscellaneous"==o&&(s.ca.miscellaneous=e),"Space Condition"==o&&(s.ca.space_condition=e),"Space Compliance"==o&&(s.ca.space_compliance=e),"Space Safety"==o&&(s.ca.space_safety=e)),"other"==t&&(s.other.other=e)),this.setState({workflow:l})},t.prototype.handleRCXCAOTHERZone=function(e,t,a,n,o){var l=this.state.workflow,c=l.spacesWorkFlows,i=this.state.zoneLocationList;c||(c=[]);var s=c.find(function(e){return e.space==i[a].locationList[n].ontology.value});s&&("ecm"==t&&("Cooling"==o&&(s.ecm.cooling=e),"Heating"==o&&(s.ecm.heating=e),"Lighting"==o&&(s.ecm.lighting=e),"Miscellaneous"==o&&(s.ecm.miscellaneous=e)),"rcx"==t&&("Cooling"==o&&(s.rcx.cooling=e),"Heating"==o&&(s.rcx.heating=e),"Lighting"==o&&(s.rcx.lighting=e),"Miscellaneous"==o&&(s.rcx.miscellaneous=e)),"ca"==t&&("Cooling"==o&&(s.ca.cooling=e),"Heating"==o&&(s.ca.heating=e),"Lighting"==o&&(s.ca.lighting=e),"Miscellaneous"==o&&(s.ca.miscellaneous=e),"Space Condition"==o&&(s.ca.space_condition=e),"Space Compliance"==o&&(s.ca.space_compliance=e),"Space Safety"==o&&(s.ca.space_safety=e)),"other"==t&&(s.other.other=e)),this.setState({workflow:l})},t.prototype.createSpace=function(e,t){return y(this,void 0,void 0,function(){var a,o=this;return N(this,function(l){switch(l.label){case 0:return a=this.state.newLocation,t?a.floor=e:(a.floor=this.state.floorOntology,a.zone=[{value:e,label:e}]),a.rdfsLabel=this.state.spaceName,a.type=this.state.spaceType,this.setState({newLocation:a}),[4,Object(d.a)(this.props.buildingName,a,a.floor,!0)];case 1:return l.sent(),this.setState({newLocation:Object(),spaceName:"",spaceType:""},function(){return y(o,void 0,void 0,function(){var e=this;return N(this,function(t){return setTimeout(function(){n.fetchZones(e.props.buildingName)},1500),[2]})})}),[2]}})})},t.prototype.handleDateOfStartChange=function(e){var t=this.state.workflow;k=e,t.dateOfStart=e.toString(),this.setState({workflow:t})},t.prototype.handleFinishDateChange=function(e){var t=this.state.workflow;T=e,t.finishDate=e.toString(),this.setState({workflow:t})},t.prototype.handleStatusColor=function(e,t){var a=this.state.floorStatusClassName;a||(a=[]),a[t]=e,this.setState({floorStatusClassName:a})},t.prototype.handleStatusColorZone=function(e,t){var a=this.state.zoneStatusClassName;a||(a=[]),a[t]=e,this.setState({zoneStatusClassName:a})},t.prototype.handlefileAttached=function(e){var t=this.state.workflow,a=this.state.fileTitle;if(e&&e.length>0){if(t.workFlowDescription||(t.workFlowDescription=[]),t&&t.workFlowDescription){var n=e[0].name.split(".").pop(),o=(new Date).YYMMDDHHMMSS2()+"-"+a+"."+n.toLowerCase(),l=t.workFlowDescription.find(function(e){return e.title==a});l&&(l.fileName=o,t.workFlowDescription=t.workFlowDescription.filter(function(e){return e.title!=a}),t.workFlowDescription.push(l));var c=e[0];(new b.b).UploadFile(b.a.DOCUMENT(),l.fileName,c)}this.setState({workflow:t,fileTitle:"",files:e})}},t.prototype.render=function(){var e=this,t=this.state,a=t.workflow,n=t.ZonesOnly,l=t.Floors,s=t.showZoneAndFloor,d=t.locationList,m=t.zoneLocationList,p=t._spaceTypes,h=t.spaceName,v=t.spaceType,E=t.floorRdfsLabel,w=t.floorOntology,y=t._zoneTypes,N=t.zoneName,x=t.zoneType,S=t.itemName,C=t.floorStatusClassName,O=t.zoneStatusClassName,j=t.isView,D=t.files,F=t.phaseTemplateDetailList,A=t.templateName,L=this.props,R=L.instance,_=L.buildingName,W=L.ontology,B=new b.b;return o.createElement("div",{className:"content",id:"workflowDescription"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 "},j&&o.createElement("div",{className:"dropdown pull-right"},o.createElement(g.a,{filename:"InspectionDescription",data:a,ElementID:"EquipmentsList"})),j&&o.createElement("div",{className:"dropdown pull-right"},o.createElement("button",{className:"btn btn-success",onClick:function(){window.location.hash="/"+R+"/"+_+"/Inspections/InspectionReport/"+W}},"Report View")),o.createElement("button",{id:"AddDailogeButton",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(i.a,{id:"AddDailogeBox",heading:"Workflow Description",saveButtonText:"Done",onSaveButtonClick:function(){e.addItem()},disableSaveButton:!1},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Item:"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("input",{value:S,onChange:function(t){e.addItemName(t.target.value)},type:"text",className:"form-control"}))))))))))),o.createElement("br",null),o.createElement("div",{className:"card"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"content"},o.createElement("div",{className:""},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 descriptionStyle"},o.createElement("div",{className:""},o.createElement("div",{className:"row padding-5"},o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-3 headingText padding-10"}," Description: "),o.createElement("div",{className:"col-md-9 headingText"},o.createElement("input",{type:"text",name:"description",disabled:j,className:"form-control",style:{border:"1px solid gray"},value:a.description,onChange:this.handleWorkflowChange}))),o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-3 headingText padding-10"}," Lead: "),o.createElement("div",{className:"col-md-9 headingText"},o.createElement("input",{type:"text",disabled:j,name:"lead",className:"form-control",style:{border:"1px solid gray"},value:a.lead,onChange:this.handleWorkflowChange})))),o.createElement("div",{className:"row padding-5"},o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-3 headingText padding-10"}," Date of Start: "),o.createElement("div",{className:"col-md-9 headingText"},o.createElement(c.a,{id:"dateOfStart",className:"form-control",disabled:j,selected:k,onChange:function(t){return e.handleDateOfStartChange(t)},dateFormat:"MMMM d, yyyy",customInput:o.createElement("input",{type:"text",className:"form-control",placeholder:"Date of Start","aria-label":"","aria-describedby":"button-addon4",value:a.dateOfStart})}))),o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-3 headingText padding-10"}," Finish Date: "),o.createElement("div",{className:"col-md-9 headingText"},o.createElement(c.a,{id:"finishDate",className:"form-control",disabled:j,selected:T,onChange:function(t){return e.handleFinishDateChange(t)},dateFormat:"MMMM d, yyyy",customInput:o.createElement("input",{type:"text",className:"form-control",placeholder:"Finish Date","aria-label":"","aria-describedby":"button-addon4",value:a.finishDate})})))),o.createElement("div",{className:"row padding-5"},o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"row img-thumbnail no-margin"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-xs-3 headingText padding-10"}," To Do: "),o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-10",style:{marginLeft:"5px"}}," ECM "),o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-10"}," RCX "),o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-10"}," CA "),o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-10"}," Other ")),o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-xs-3 headingText"}," "),o.createElement("div",{className:"col-md-2 col-xs-2",style:{marginTop:"7px"}}," \xa0  ",o.createElement("input",{name:"ecm",onChange:this.handleWorkflowChange,disabled:j,checked:a.ecm,type:"checkbox"})," "),o.createElement("div",{className:"col-md-2 col-xs-2",style:{marginTop:"7px"}}," \xa0 ",o.createElement("input",{name:"rcx",onChange:this.handleWorkflowChange,disabled:j,checked:a.rcx,type:"checkbox"})," "),o.createElement("div",{className:"col-md-2 col-xs-2",style:{marginTop:"7px"}}," \xa0  ",o.createElement("input",{name:"ca",onChange:this.handleWorkflowChange,disabled:j,checked:a.ca,type:"checkbox"})," "),o.createElement("div",{className:"col-md-2 col-xs-2",style:{marginTop:"7px"}}," \xa0  ",o.createElement("input",{name:"other",onChange:this.handleWorkflowChange,disabled:j,checked:a.other,type:"checkbox"})," ")))),o.createElement("div",{className:"col-md-6"},a.other&&o.createElement("div",{className:"col-md-12 no-padding",style:{marginBottom:"10px"}},o.createElement("div",{className:"col-md-3 col-xs-12 headingText padding-10"}," Other Name:"),o.createElement("div",{className:"col-md-9 col-xs-12"},"  ",o.createElement("input",{name:"otherName",className:"form-control",onChange:this.handleWorkflowChange,placeholder:"Enter Other Name",disabled:j,value:a.otherName,type:"text"})," ")),o.createElement("div",{className:"col-md-12 no-padding"},o.createElement("div",{className:"col-md-3 col-xs-12 headingText padding-10"}," Inspection Workflow Template:"),o.createElement("div",{className:"col-md-9"},o.createElement("select",{className:"form-control",id:"workflowTemplate",name:"workflowTemplate",value:a.workflowTemplate,onChange:this.handleWorkflowChange},o.createElement("option",{value:""},"Select Workflow Template"),F&&F.map(function(e){return"Inspection"==e.templateType?o.createElement("option",{value:e&&e.ontology},e&&e.description):""})))))),o.createElement("br",null),o.createElement("div",{className:"card no-margin small"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"content no-padding"},o.createElement("div",{className:"dataCard"},o.createElement("div",{className:"row no-padding"},o.createElement("div",{className:"col-md-12 no-padding"},o.createElement("div",{className:"col-md-2 col-xs-2 grid-header"},"Item"),o.createElement("div",{className:"col-md-2 col-xs-2 grid-header"},o.createElement("i",{className:"fa fa-download",style:{marginTop:"4px",marginRight:"5px"}})," File Download"),o.createElement("div",{className:"col-md-2 col-xs-2 grid-header"},o.createElement("i",{className:"fa fa-upload",style:{marginTop:"4px",marginRight:"5px"}})," File Upload"),o.createElement("div",{className:"col-md-1 col-xs-2 grid-header"},"Done"),o.createElement("div",{className:"col-md-1 col-xs-2 grid-header"},"Number"),o.createElement("div",{className:"col-md-4 col-xs-4 grid-header hidden-xs d-sm-none"},"Description - State of Capture"))),a.workFlowDescription&&a.workFlowDescription.map(function(t,a){return o.createElement("div",{key:a,className:" row no-padding"},o.createElement("div",{className:"col-md-12 col-xs-12 no-padding"},o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-10"},t.title),o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-10"},o.createElement("a",{className:"text-primary trim-data",href:B.GetSignedURL(b.a.DOCUMENT(),t.fileName)},t.fileName)),o.createElement("div",{className:"col-md-2 col-xs-2 headingText padding-5",style:{display:"inline-flex"}},o.createElement("div",{style:{background:t.fileName?"green":"lightgray",border:"1px solid gray",width:"30px",marginRight:"5px",height:"30px",borderRadius:"5px"}}),"\xa0",!j&&o.createElement("button",{type:"button",className:"btn btn-xs btn-dark btn-fill",onClick:function(){e.setState({fileTitle:t.title,files:[]})},disabled:j,"data-toggle":"modal","data-target":"#fileUpload"+a},o.createElement("span",{className:"hidden-xs"},o.createElement("i",{className:"fa fa-upload",style:{marginTop:"4px",marginRight:"5px"}}),"File Upload"))),o.createElement("div",{className:"col-md-1 col-xs-2 headingText padding-5"},o.createElement("input",{style:{border:"1px solid gray"},name:"done",type:"checkbox",className:"custom-control",disabled:j,checked:!!t.done,onChange:function(t){e.handleWorkflowDescriptionChange(t,a)}})),o.createElement("div",{className:"col-md-1 col-xs-2 headingText padding-5"},o.createElement("input",{type:"text",name:"number",disabled:j,onChange:function(t){e.handleWorkflowDescriptionChange(t,a)},value:t.number,className:"custom-control",style:{border:"1px solid gray",width:"80%"}})),o.createElement("div",{className:"col-md-3 col-xs-2 headingText padding-5"},o.createElement("input",{type:"text",name:"workFlowDescription",disabled:j,onChange:function(t){e.handleWorkflowDescriptionChange(t,a)},value:t.workFlowDescription,className:"custom-control",placeholder:"Enter Description"})),o.createElement("div",{className:"col-md-1 col-xs-2 padding-5"},!j&&o.createElement("button",{className:"btn btn-xs active btn-danger",disabled:j,onClick:function(){e.removeItem(a)}},o.createElement("i",{className:"fa fa-trash"})))),o.createElement(i.a,{id:"fileUpload"+a,heading:"Workflow Description",saveButtonText:"Done",onSaveButtonClick:function(){document.getElementById("fileUpload"+a).click()},disableSaveButton:!1},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement(f.a,{single:!0,handleAttachedFile:e.handlefileAttached,files:D})))))))}),!j&&o.createElement("div",{className:"row no-padding"},o.createElement("div",{className:"col-md-12 no-padding"},o.createElement("button",{className:"btn btn-xs btn-dark btn-fill margin-5 pull-left","data-toggle":"modal","data-target":"#AddDailogeBox",title:"Add"}," ",o.createElement("i",{className:"fa fa-plus"})))))))),!j&&o.createElement("div",{className:"row",style:{paddingTop:"10px"}},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-12 center"},o.createElement("button",{className:"btn btn-dark btn-fill margin-5",disabled:!a.description,onClick:function(){e.saveWorkFlow(!1,!1)},"data-toggle":"modal","data-target":"#templateNameDailogeBox"}," Save and Make Template "),o.createElement("button",{className:"btn btn-success btn-fill margin-5",disabled:!a.description,onClick:function(){e.saveWorkFlow(!1,!0)}}," Save "),o.createElement("button",{className:"btn btn-danger margin-5",onClick:function(){window.location.hash=R+"/"+_+"/Inspections"}}," Cancel "))))))),s&&o.createElement("div",{className:"row no-padding"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 p-5"},o.createElement("div",{className:"col-md-2 headingText"},o.createElement("h4",null," ",o.createElement("b",null,o.createElement("u",null,"Floors")))," "),!j&&o.createElement("button",{type:"button","data-toggle":"modal","data-target":"#AddFloorDailogeBox",className:"btn btn-dark pull-right",style:{margin:"30px"}}," ",o.createElement("i",{className:"fa fa-plus"}),o.createElement("span",null,"Create New Floor"))),o.createElement(i.a,{id:"templateNameDailogeBox",heading:"Create Template Name",saveButtonText:"Done",onSaveButtonClick:function(){e.saveWorkFlow(!0,!0)},disableSaveButton:!A},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Template Name:"),o.createElement("div",{className:"col-md-6 headingText"},o.createElement("input",{value:A,onChange:function(t){e.setState({templateName:t.target.value})},type:"text",className:"form-control"})," ")))))))),o.createElement(i.a,{id:"AddFloorDailogeBox",heading:"Add Floor",saveButtonText:"Done",onSaveButtonClick:function(){e.createFloor()},disableSaveButton:!E},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Floor:"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("input",{value:E,onChange:function(t){e.handleFloorRdfsLabel(t.target.value)},type:"text",className:"form-control"})," "))))))))),o.createElement("div",{className:"dataCard"},l&&l.map(function(t,n){return o.createElement("div",{key:n},o.createElement("div",{className:"row clickable"},o.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},o.createElement("div",{className:"col-md-2 col-xs-2  headingText"},"Floor Name: ",Object(r.g)(t.rdfsLabel)),o.createElement("div",{className:"col-md-4 col-xs-3 headingText"},o.createElement("div",{className:C&&C[n]&&C[n],style:{border:"1px solid gray",width:"20px",height:"20px"}})),o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-xs-3 headingText",style:{paddingLeft:j?"20px":""}}," ECM "),o.createElement("div",{className:"col-md-3 col-xs-3 headingText",style:{paddingLeft:j?"20px":""}}," RCX "),o.createElement("div",{className:"col-md-3 col-xs-3 headingText",style:{paddingLeft:j?"20px":""}}," CA "),o.createElement("div",{className:"col-md-3 col-xs-3 headingText",style:{paddingLeft:j?"20px":""}}," ",a.otherName," "))))),o.createElement("br",null),d[n]&&d[n].locationList.map(function(t,l){var c=a.spacesWorkFlows&&a.spacesWorkFlows.find(function(e){return e.space==Object(r.g)(t.ontology)});return o.createElement(u.a,{ontology:e.props.ontology,addFloorSpaceToArray:e.addFloorSpaceToArray,floorSpace:t,handleRCXCAOTHER:e.handleRCXCAOTHER,ind:l,index:n,item:c,workflow:a,isView:j,handleStatusColor:function(t){e.handleStatusColor(t,n)}})}),o.createElement("br",null),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 headingText"}),!j&&o.createElement("div",{className:"col-md-2 headingText"},o.createElement("button",{className:"btn btn-default",title:"Add","data-toggle":"modal","data-target":"#AddSpace"+n}," ",o.createElement("i",{className:"fa fa-plus"})," Space ")),o.createElement("div",{className:"col-md-12 headingText"})),o.createElement(i.a,{id:"AddSpace"+n,heading:"Add Space",saveButtonText:"Done",onSaveButtonClick:function(){e.createSpace(Object(r.g)(t.zone),!0)},disableSaveButton:!h||!v},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Floor"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("input",{value:Object(r.g)(t.rdfsLabel),type:"text",className:"form-control"})," ")),o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Name"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("input",{type:"text",onChange:function(t){e.handleSpaceName(t.target.value)},value:h,className:"form-control"})," ")),o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Type"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("select",{id:"type",className:"form-control",onChange:function(t){e.handleSpaceType(t.target.value)},value:v},o.createElement("option",{value:""},"Select Type"),p.map(function(e,t){return 0===t?o.createElement("option",{key:t,selected:!0,value:e.type},e.value):o.createElement("option",{key:t,value:e.value},e.value)}))))))))))),o.createElement("br",null),o.createElement("br",null))}))),s&&o.createElement("div",{className:"row no-padding"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-2 headingText"},o.createElement("h4",null," ",o.createElement("b",null,o.createElement("u",null,"Zones"))," ")," "),!j&&o.createElement("button",{type:"button",disabled:j,"data-toggle":"modal","data-target":"#AddZoneDailogeBox",className:"btn btn-dark pull-right",style:{margin:"30px"}}," ",o.createElement("i",{className:"fa fa-plus"}),o.createElement("span",null,"Create New Zone"))),o.createElement(i.a,{id:"AddZoneDailogeBox",heading:"Add Floor",saveButtonText:"Done",onSaveButtonClick:function(){e.saveZone()},disableSaveButton:!N||!x},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-3 headingText"},"Zone Name:"),o.createElement("div",{className:"col-md-9 headingText"},o.createElement("input",{value:N,onChange:function(t){return e.handleNameChange(t.target.value)},type:"text",className:"form-control"})," "))),o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-3 headingText"},"Zone Type:"),o.createElement("div",{className:"col-md-9"},o.createElement("div",{className:"dropdown"},o.createElement("button",{className:"btn btn-default btn-block dropdown-toggle",type:"button","data-toggle":"dropdown"},x&&y&&y.find(function(e){return-1!==e.z.value.indexOf(x.substring(3))})?y.find(function(e){return-1!==e.z.value.indexOf(x.substring(3))}).zone.value:"Select Zone Type",o.createElement("span",{className:"caret"})),o.createElement("ul",{className:"dropdown-menu"},o.createElement("li",{className:"dropdown-header"},o.createElement("h5",null,o.createElement("b",null,"Space Group"))),y.filter(function(e){return"Space Group"==e.yname.value}).map(function(t,a){return o.createElement("li",{key:a},o.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.handleZoneTypeChange(t.z.value)}},t.zone.value))}),o.createElement("li",{className:"dropdown-header"},o.createElement("h5",null,o.createElement("b",null,"Service Zone"))),y.filter(function(e){return"Service Zone"==e.yname.value}).map(function(t,a){return o.createElement("li",{key:a},o.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.handleZoneTypeChange(t.z.value)}},t.zone.value))}))))))))))),o.createElement("div",{className:"dataCard"},n&&n.map(function(t,n){return o.createElement("div",{key:n},o.createElement("div",{className:"row clickable"},o.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},o.createElement("div",{className:"col-md-2 col-xs-3 headingText"},"Zone Name: ",Object(r.g)(t.rdfsLabel)," - ",Object(r.g)(t.type).replace("zone","")),o.createElement("div",{className:"col-md-4 col-xs-2 headingText"},o.createElement("div",{className:O&&O[n]&&O[n],style:{border:"1px solid gray",width:"20px",height:"20px"}})),o.createElement("div",{className:"col-md-6 col-xs-6"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-3 col-xs-3 headingText"}," ECM "),o.createElement("div",{className:"col-md-3 col-xs-3 headingText"}," RCX "),o.createElement("div",{className:"col-md-3 col-xs-3 headingText"}," CA "),o.createElement("div",{className:"col-md-3 col-xs-3 headingText"}," ",a.otherName," "))))),o.createElement("br",null),m[n]&&m[n].locationList.map(function(t,l){var c=a.spacesWorkFlows&&a.spacesWorkFlows.find(function(e){return e.space==Object(r.g)(t.ontology)});return o.createElement(u.a,{ontology:e.props.ontology,addFloorSpaceToArray:e.addZoneSpaceToArray,floorSpace:t,handleRCXCAOTHER:e.handleRCXCAOTHERZone,ind:l,index:n,item:c,workflow:a,isZone:!0,isView:j,handleStatusColor:function(t){e.handleStatusColorZone(t,n)}})}),o.createElement("br",null),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12",style:{paddingBottom:"20px"}},o.createElement("div",{className:"col-md-3 headingText"}),!j&&o.createElement("div",{className:"col-md-2 headingText"},o.createElement("button",{className:"btn btn-default",disabled:j,title:"Add","data-toggle":"modal","data-target":"#AddSpaceInZone"+n}," ",o.createElement("i",{className:"fa fa-plus"})," Space ")),o.createElement("div",{className:"col-md-12 headingText"})),o.createElement(i.a,{id:"AddSpaceInZone"+n,heading:"Add Space",saveButtonText:"Done",onSaveButtonClick:function(){e.createSpace(Object(r.g)(t.zone),!1)},disableSaveButton:!h||!v},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px",paddingRight:"1px"},className:"col-md-2 headingText"},"Is in Zone"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("input",{value:Object(r.g)(t.rdfsLabel),type:"text",className:"form-control"})," ")),o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Name"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("input",{type:"text",onChange:function(t){e.handleSpaceName(t.target.value)},value:h,className:"form-control"})," ")),o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Type"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("select",{id:"type",className:"form-control",onChange:function(t){e.handleSpaceType(t.target.value)},value:v},o.createElement("option",{value:""},"Select Type"),p.map(function(e,t){return 0===t?o.createElement("option",{key:t,selected:!0,value:e.value},e.value):o.createElement("option",{key:t,value:e.value},e.value)})))),o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-2 headingText"},"Type"),o.createElement("div",{className:"col-md-10 headingText"},o.createElement("select",{id:"floor",className:"form-control",value:w,onChange:function(t){return e.handleFloorOntology(t.target.value)}},o.createElement("option",{value:""},"Select Floor"),l.map(function(e,t){return o.createElement("option",{value:Object(r.g)(e.zone),key:t},Object(r.g)(e.rdfsLabel)," ")}))))))))))))})),o.createElement("br",null),!j&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 center"},o.createElement("button",{className:"btn btn-dark btn-fill margin-5",disabled:!a.description,onClick:function(){e.saveWorkFlow(!1,!1)},"data-toggle":"modal","data-target":"#templateNameDailogeBox"}," Save and Make Template "),o.createElement("button",{className:"btn btn-success btn-fill margin-5",onClick:function(){e.saveWorkFlow(!1,!0)}}," Save "),o.createElement("button",{className:"btn btn-danger margin-5",onClick:function(){window.location.hash=R+"/"+_+"/Inspections"}}," Cancel "))))))))))))},t}(o.Component);t.default=S},2946:function(e,t,a){"use strict";var n=a(2),o=(a.n(n),a(2947)),l=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(o,l){function c(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(c,i)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var a,n,o,l,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,n=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){c=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){c.label=l[1];break}if(6===l[0]&&c.label<o[1]){c.label=o[1],o=l;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(l);break}o[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],n=0}finally{a=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},s=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isCollapse:!0,ecm_background:"allSelect",rcx_background:"allSelect",ca_background:"allSelect",other_background:"allSelect"},a.handleCollapse=a.handleCollapse.bind(a),a.handleBackgroundECM=a.handleBackgroundECM.bind(a),a}return l(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this.props.item!==e.item&&setTimeout(function(){t.handleBackgroundECM()},1e3)},t.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){var e=this;return i(this,function(t){return this.props.item&&setTimeout(function(){e.handleBackgroundECM()},1e3),[2]})})},t.prototype.handleBackgroundECM=function(){var e=this,t=this.props.item,a=this.state,n=a.ecm_background,o=a.rcx_background,l=a.ca_background,c=a.other_background;if(t){var i=0;1==t.ecm.cooling&&i++,1==t.ecm.heating&&i++,1==t.ecm.lighting&&i++,1==t.ecm.miscellaneous&&i++,i>0&&i<4&&(n="someSelect"),4==i&&(n="allSelect"),0==i&&(n="noSelect"),i=0,1==t.rcx.cooling&&i++,1==t.rcx.heating&&i++,1==t.rcx.lighting&&i++,1==t.rcx.miscellaneous&&i++,i>0&&i<4&&(o="someSelect"),4==i&&(o="allSelect"),0==i&&(o="noSelect"),i=0,1==t.ca.cooling&&i++,1==t.ca.heating&&i++,1==t.ca.lighting&&i++,1==t.ca.miscellaneous&&i++,1==t.ca.space_compliance&&i++,1==t.ca.space_condition&&i++,1==t.ca.space_safety&&i++,i>0&&i<7&&(l="someSelect"),7==i&&(l="allSelect"),0==i&&(l="noSelect"),i=0,1==t.other.other&&i++,i>0&&(c="allSelect"),0==i&&(c="noSelect"),this.setState({ecm_background:n,rcx_background:o,ca_background:l,other_background:c},function(){"allSelect"==n&&"allSelect"==o&&"allSelect"==l&&"allSelect"==c?e.props.handleStatusColor("allSelect"):"noSelect"==n&&"noSelect"==o&&"noSelect"==l&&"noSelect"==c?e.props.handleStatusColor("noSelect"):e.props.handleStatusColor("someSelect")})}},t.prototype.handleCollapse=function(){var e=this.props,t=e.ind,a=e.index;this.setState({isCollapse:!this.state.isCollapse}),this.props.addFloorSpaceToArray(!0,a,t)},t.prototype.render=function(){var e=this,t=this.props,a=t.ind,l=t.index,c=t.workflow,i=t.floorSpace,s=t.item,r=t.isZone,d=t.isView,m=this.state,p=m.isCollapse,u=m.ecm_background,h=m.rcx_background,g=m.ca_background,f=m.other_background;return n.createElement("div",{key:a,className:"row",style:{paddingBottom:"10px"}},n.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingBottom:"10px"}},n.createElement("a",{"data-toggle":"collapse",id:"btn-details"+(r?"Zone":"Floor")+a.toString()+l.toString(),href:"#details"+(r?"Zone":"Floor")+a.toString()+l.toString(),"aria-expanded":"false",onClick:function(){e.handleCollapse()}},n.createElement("div",{className:"col-md-3 col-xs-5 col-md-offset-3 headingText trim-data"}," ",!d&&n.createElement("i",{className:p?"fa fa-plus":"fa fa-minus"})," \xa0 Space: ",i.rdfsLabel.value," ")),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"col-md-3 col-xs-3 headingText center"},c.ecm&&n.createElement("div",{className:u,style:{border:"1px solid gray",width:"20px",height:"20px",marginLeft:d?"15px":""}})),n.createElement("div",{className:"col-md-3 col-xs-3 headingText center"},c.rcx&&n.createElement("div",{className:h,style:{border:"1px solid gray",width:"20px",height:"20px",marginLeft:d?"15px":""}})),n.createElement("div",{className:"col-md-3 col-xs-3 headingText center"},c.ca&&n.createElement("div",{className:g,style:{border:"1px solid gray",width:"20px",height:"20px",marginLeft:d?"15px":""}})),n.createElement("div",{className:"col-md-3 col-xs-3 headingText center"},c.other&&n.createElement("div",{className:f,style:{border:"1px solid gray",width:"20px",height:"20px",marginLeft:d?"15px":""}}))))),n.createElement("div",{id:"details"+(r?"Zone":"Floor")+a.toString()+l.toString(),className:"panel-collapse collapse",style:{paddingTop:"20px",paddingBottom:"50px"}},(c.ecm||c.rcx||c.ca)&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,title:"Cooling",handleBackgroundECM:this.handleBackgroundECM}),(c.ecm||c.rcx||c.ca)&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,title:"Heating",handleBackgroundECM:this.handleBackgroundECM}),(c.ecm||c.rcx||c.ca)&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,title:"Lighting",handleBackgroundECM:this.handleBackgroundECM}),(c.ecm||c.rcx||c.ca)&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,title:"Miscellaneous",handleBackgroundECM:this.handleBackgroundECM}),c.ca&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,isCA_Only:!0,title:"Space Condition",handleBackgroundECM:this.handleBackgroundECM}),c.ca&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,isCA_Only:!0,title:"Space Compliance",handleBackgroundECM:this.handleBackgroundECM}),c.ca&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,isCA_Only:!0,title:"Space Safety",handleBackgroundECM:this.handleBackgroundECM}),c.other&&n.createElement(o.a,{floorSpace:i,handleRCXCAOTHER:this.props.handleRCXCAOTHER,ind:a,index:l,item:s,workflow:c,isView:d,isZone:r,isOther_Only:!0,title:"Other",handleBackgroundECM:this.handleBackgroundECM})))},t}(n.Component);t.a=s},2947:function(e,t,a){"use strict";var n=a(2),o=(a.n(n),a(31)),l=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c=function(e){function t(t){var a=e.call(this,t)||this;return a.state={},a}return l(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.workflow,l=t.title,c=t.item,i=t.ind,s=t.index,r=t.isCA_Only,d=t.isOther_Only,m=t.isView;this.state;return n.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingTop:"5px",paddingBottom:"5px",paddingLeft:"0px"}},n.createElement("div",{className:"col-md-3 col-xs-5 col-md-offset-3 trim-data",style:{paddingLeft:"60px"}}," ",l," "),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"col-md-1 col-xs-2 headingText"},a.ecm&&!r&&!d&&n.createElement("div",{className:"switch-container pull-right"},n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.ecm&&c.ecm[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"ecm",s,i,l),e.props.handleBackgroundECM()},className:"switch",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 headingText"},a.ecm&&!r&&!d&&n.createElement("div",{className:"switch-container pull-right"},m&&n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.ecm&&c.ecm[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"ecm",s,i,l),e.props.handleBackgroundECM()},className:"switch1",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 col-md-offset-1 headingText"},a.rcx&&!r&&!d&&n.createElement("div",{className:"switch-container pull-right"},n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.rcx&&c.rcx[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"rcx",s,i,l),e.props.handleBackgroundECM()},className:"switch",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 headingText"},a.rcx&&!r&&!d&&n.createElement("div",{className:"switch-container pull-right"},m&&n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.rcx&&c.rcx[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"rcx",s,i,l),e.props.handleBackgroundECM()},className:"switch1",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 col-md-offset-1 headingText"},a.ca&&!d&&n.createElement("div",{className:"switch-container pull-right"},n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.ca&&c.ca[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"ca",s,i,l),e.props.handleBackgroundECM()},className:"switch",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 headingText"},a.ca&&!d&&n.createElement("div",{className:"switch-container pull-right"},m&&n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.ca&&c.ca[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"ca",s,i,l),e.props.handleBackgroundECM()},className:"switch1",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 col-md-offset-1 headingText"},a.other&&d&&n.createElement("div",{className:"switch-container pull-right"},n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.other&&c.other[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"other",s,i,l),e.props.handleBackgroundECM()},className:"switch",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-1 col-xs-2 headingText"},a.other&&d&&n.createElement("div",{className:"switch-container pull-right"},m&&n.createElement("label",null,n.createElement("input",{disabled:m,checked:!!(c&&c.other&&c.other[Object(o.x)(l.toLowerCase())]),onChange:function(t){e.props.handleRCXCAOTHER(t.target.checked,"other",s,i,l),e.props.handleBackgroundECM()},className:"switch1",type:"checkbox"}),n.createElement("div",null,n.createElement("div",null))))))))},t}(n.Component);t.a=c},692:function(e,t,a){"use strict";t.f=function(e,t,a){return s(this,void 0,void 0,function(){return r(this,function(c){switch(c.label){case 0:return[4,Object(n.f)({buildingName:e,ontology:t,uses:a},n.a.TASKTEMPLATE.UPDATESTAGETEMPLATEUSES,o.b.TASK).then(function(){Object(l.b)('Stage Template Uses "Updated"  Successfully.')}).catch(function(e){Object(l.a)("Error occured while saving Stage Template Uses.")})];case 1:return[2,c.sent()]}})})},t.e=function(e,t,a,c){return s(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,Object(n.f)({buildingName:e,model:t,isEdit:a,saveStages:c},n.a.TASKTEMPLATE.SAVEPHASE,o.b.TASK).then(function(){Object(l.b)("Workflow "+(a?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(l.a)("Error occured while saving Workflow.")})];case 1:return[2,i.sent()]}})})},t.b=function(e,t,a){void 0===a&&(a=!0);return s(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(n.e)({buildingName:e,ontology:t},n.a.TASKTEMPLATE.GETPHASEDETAILLIST,o.b.TASK,a)];case 1:return[2,l.sent()]}})})},t.c=function(e,t,a){void 0===a&&(a=!0);return s(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(n.e)({buildingName:e,ontology:t},n.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,o.b.TASK,a)];case 1:return[2,l.sent()]}})})},t.g=function(e,t,a){return s(this,void 0,void 0,function(){return r(this,function(c){switch(c.label){case 0:return[4,Object(n.f)({taskID:e,status:t},n.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,o.b.TASK).then(function(){a||Object(l.b)("Status Updated Successfully.")}).catch(function(e){Object(l.a)("Error occured while update Status.")})];case 1:return[2,c.sent()]}})})},t.a=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(a){switch(a.label){case 0:return[4,Object(n.e)({buildingName:e,ontology:t},n.a.DEPENDENCY.GETDEPENDENCY,o.b.TASK,!0)];case 1:return[2,a.sent()]}})})},t.d=function(e,t){var a=[];if(!(t.stages&&t.stages.length&&t.stages.length>0))return void Object(l.a)("Error finding Stages");for(var n=i({},t),o=0;o<n.stages.length;o++){for(var s=[],r=n.stages[o],d=0;d<r.subTasks.length;d++){var m=r.subTasks[d];if(!m.estimatedStartTime||void 0==m.estimatedStartTime)return void Object(l.a)("Not all Template Tasks have Estimate Start Time, To Normalise, provide dates first ");s.push(m.estimatedStartTime)}a.push(s)}for(var o=0;o<a.length;o++)for(var s=a[o],d=0;d<s.length;d++)if(0==o&&0==d)t.stages[o].estimatedStartTime=e,t.stages[o].subTasks[d].estimatedStartTime=e;else if(o>0&&0==d){var p=Object(c.g)(new Date(a[o-1][a[o-1].length-1]),new Date(a[o][d])),u=new Date(t.stages[o-1].subTasks[t.stages[o-1].subTasks.length-1].estimatedStartTime);u.setDate(new Date(t.stages[o-1].subTasks[t.stages[o-1].subTasks.length-1].estimatedStartTime).getDate()+p),t.stages[o].subTasks[d].estimatedStartTime=u,t.stages[o].estimatedStartTime=u}else{var p=Object(c.g)(new Date(a[o][d-1]),new Date(a[o][d])),u=new Date(t.stages[o].subTasks[d-1].estimatedStartTime);u.setDate(new Date(t.stages[o].subTasks[d-1].estimatedStartTime).getDate()+p),t.stages[o].subTasks[d].estimatedStartTime=u}var h=Object(c.g)(new Date(t.estimatedEndTime),new Date(t.estimatedStartTime));t.estimatedStartTime=e;var g=new Date(e);return g.setDate(g.getDate()+h),t.estimatedEndTime=g,t};var n=a(12),o=a(20),l=a(32),c=a(31),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(o,l){function c(e){try{s(n.next(e))}catch(e){l(e)}}function i(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(c,i)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var a,n,o,l,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,n=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){c=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){c.label=l[1];break}if(6===l[0]&&c.label<o[1]){c.label=o[1],o=l;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(l);break}o[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],n=0}finally{a=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}}});