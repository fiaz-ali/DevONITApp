webpackJsonp([17],{1403:function(e,t,n){"use strict";(function(e){var i=n(2),r=(n.n(i),n(652)),a=n(658),o=n(53),s=n(22),c=n(986),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},d=function(t){function n(e){var n=t.call(this,e)||this;return n.state={currentConditions:[],ccLabel:[],labelsDropDownList:[]},n.addItem=n.addItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCurrentConditionLabelChange=n.handleCurrentConditionLabelChange.bind(n),n.handleCCLabelChange=n.handleCCLabelChange.bind(n),n.removeItem=n.removeItem.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return l(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){return p(this,function(t){return e.buildingName&&e.instance&&this.setState({currentConditions:e.currentConditions}),[2]})})},n.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e;return p(this,function(t){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e})),this.props.buildingName&&this.props.instance&&this.setState({currentConditions:this.props.currentConditions}),[2]})})},n.prototype.addItem=function(){var e=this,t=this.state,n=t.currentConditions;t.ccLabel.map(function(e){var t={preRCXName:"",ccBoolean:!1,ccLabel:e.value,proposedRCX:"",photo:"",entryTimeStamp:void 0};n||(n=[]),n.push(t)}),this.setState({currentConditions:n,ccLabel:[]},function(){return u(e,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this.props.handleAdder(n,this.props.isInspectionOrCleanliness)];case 1:return e.sent(),[2]}})})})},n.prototype.removeItem=function(e){var t=this.state.currentConditions;t.splice(e,1),this.setState({currentConditions:t}),this.props.handleAdder(t,this.props.isInspectionOrCleanliness)},n.prototype.handleCurrentConditionLabelChange=function(e){var t=this.state.ccLabel;t=e,this.setState({ccLabel:t})},n.prototype.handleCCLabelChange=function(e){this.setState({ccLabel:e})},n.prototype.handleItemChange=function(e,t){var n=this,i=this.state.currentConditions,r=t.target.name,a=i&&i[e];a[""+r]="ccBoolean"==r?t.target.checked:t.target.value,this.setState({currentConditions:i},function(){"ccBoolean"!=r&&document.getElementById(n.props.isInspectionOrCleanliness+"rcxCC"+e).focus()}),this.props.handleAdder(i,this.props.isInspectionOrCleanliness)},n.prototype.handleFileAttachment=function(t,n){var i=this,r=this.state.currentConditions,a=r[n];try{if(t&&(t.file||t.length>0)&&a){var c,l=this.props.buildingName+"-_-"+Object(s.y)(10),u="";"video/mp4"==t.type?(u=l+".mp4",c=t):"image/jpeg"==t.type||"image/png"==t.type?(u=l+".jpg",c=t.file):(u=l+".jpg",c=new e(t.replace(/^data:image\/\w+;base64,/,""),"base64")),r[n].photo=u,this.setState({currentConditions:r},function(){i.props.handleAdder(r,i.props.isInspectionOrCleanliness),(new o.b).UploadFile(o.a.DOCUMENT(),u,c)})}}catch(e){}},n.prototype.render=function(){var e=this,t=this.state,n=t.currentConditions,s=t.ccLabel,l=t.labelsDropDownList,u=this.props,p=u.hideAddButton,d=u.isView,h=u.isFromReport,m=new o.b;return i.createElement(i.Fragment,null,n&&n.map(function(t,n){var a=m.GetSignedURL(o.a.DOCUMENT(),t.photo);return i.createElement("div",{key:n,className:"row"},i.createElement("div",null,i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"ccBoolean"+n},t.ccLabel)),i.createElement("div",{className:"col-md-1"},i.createElement("br",null),i.createElement("div",{className:"switch-container"},"No/Yes",i.createElement("label",null,i.createElement("input",{id:"ccBoolean"+n,disabled:d,name:"ccBoolean",checked:t.ccBoolean,onChange:function(t){e.handleItemChange(n,t)},className:"switch",type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),!t.ccBoolean&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:t.proposedRCX},"Describe Proposed RCX")),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",disabled:d,id:e.props.isInspectionOrCleanliness+"rcxCC"+n,className:"form-control",value:t.proposedRCX,name:"proposedRCX",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-1"},!h&&i.createElement("button",{type:"button",disabled:d,className:"btn btn-dark",style:{fontWeight:"bold"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness,title:"Upload Image"},t.photo&&t.photo.length>3?i.createElement("img",{src:a,style:{height:20}}):i.createElement("i",{className:"fa fa-image"})),i.createElement(r.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},i.createElement(c.a,{instance:e.props.instance,handleFile:function(t){e.handleFileAttachment(t,n)},buildingName:e.props.buildingName,isImageOnly:!0}),t.photo&&t.photo.length>3?i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),i.createElement("img",{src:a,style:{height:150}})," "):i.createElement(i.Fragment,null)))),i.createElement("div",{className:"col-md-1"},!h&&n>=0&&i.createElement("button",{disabled:d,type:"button",className:"btn btn-danger",title:"Remove Item",onClick:function(){return e.removeItem(n)}},i.createElement("i",{className:"fa fa-remove"}))))))}),!p&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-1"},i.createElement("label",null,"Add:")),i.createElement("div",{className:"col-md-11 col-xs-11"},!h&&i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog_"+this.props.isInspectionOrCleanliness},i.createElement("i",{className:"fa fa-plus"}))),i.createElement(r.a,{disableSaveButton:!s,id:"AddLabelDialog_"+this.props.isInspectionOrCleanliness,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.isInspectionOrCleanliness+" labels"},l&&l.length>0&&i.createElement("div",{className:"form-group"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-12"},i.createElement(a.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCCLabelChange,placeholder:this.props.isInspectionOrCleanliness+" labels",options:l,value:s}))))))))},n}(i.Component);t.a=d}).call(t,n(6).Buffer)},1404:function(e,t,n){"use strict";(function(e){var i=n(2),r=(n.n(i),n(652)),a=n(53),o=n(22),s=n(986),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((i=i.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=function(t){function n(e){var n=t.call(this,e)||this;return n.state={rcxItems:[]},n.handleNotesChange=n.handleNotesChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return c(n,t),n.prototype.UNSAFE_componentWillReceiveProps=function(e){return l(this,void 0,void 0,function(){return u(this,function(t){return this.setState({rcxItems:e.rcxItems}),[2]})})},n.prototype.handleNotesChange=function(e,t){var n=this,i=this.state.rcxItems;i[e].notesMeasurement=t.target.value,this.setState({rcxItems:i},function(){document.getElementById(n.props.isInspectionOrCleanliness+"rcxTask"+e).focus()}),this.props.handleAdder(i)},n.prototype.handleFileAttachment=function(t,n){var i=this,r=this.state.rcxItems,s=r[n];try{if(t&&(t.file||t.length>0)&&s){var c,l=this.props.buildingName+"-_-"+Object(o.y)(10),u="";"video/mp4"==t.type?(u=l+".mp4",c=t):"image/jpeg"==t.type||"image/png"==t.type?(u=l+".jpg",c=t.file):(u=l+".jpg",c=new e(t.replace(/^data:image\/\w+;base64,/,""),"base64")),r[n].photo=u,this.setState({rcxItems:r},function(){i.props.handleAdder(r),(new a.b).UploadFile(a.a.DOCUMENT(),u,c)})}}catch(e){}},n.prototype.render=function(){var e=this,t=this.state.rcxItems,n=this.props,o=n.isView,c=n.isFromReport,l=new a.b;return i.createElement(i.Fragment,null,t&&t.map(function(t,n){var u=l.GetSignedURL(a.a.DOCUMENT(),t.photo);return i.createElement("div",{key:n,className:"row"},i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("div",{className:"col-md-5"},i.createElement("textarea",{disabled:!0,className:"form-control",value:t.ccLabel+": "+t.proposedRCX})),i.createElement("div",{className:"col-md-5 col-md-offset-1"},i.createElement("textarea",{disabled:o,id:e.props.isInspectionOrCleanliness+"rcxTask"+n,className:"form-control",value:t.notesMeasurement,placeholder:"Notes/Measurements",name:"proposedRCX",onChange:function(t){return e.handleNotesChange(n,t)}})),i.createElement("div",{className:"col-md-1"},!c&&i.createElement("button",{disabled:o,type:"button",className:"btn btn-dark",style:{fontWeight:"bold"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness,title:"Upload Image"},t.photo&&t.photo.length>3?i.createElement("img",{src:u,style:{height:20}}):i.createElement("i",{className:"fa fa-image"})),i.createElement(r.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},i.createElement(s.a,{instance:e.props.instance,handleFile:function(t){e.handleFileAttachment(t,n)},buildingName:e.props.buildingName,isImageOnly:!0}),t.photo&&t.photo.length>3?i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),i.createElement("img",{src:u,style:{height:150}})," "):i.createElement(i.Fragment,null)))))}))},n}(i.Component);t.a=p}).call(t,n(6).Buffer)},2917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"rcxInspectionLabels",function(){return y}),n.d(t,"rcxCleanlinessLabels",function(){return E});var i,r,a=n(2),o=(n.n(a),n(730)),s=n(1403),c=n(1404),l=n(1484),u=n(11),p=n(117),d=n(670),h=n(702),m=n(725),f=n(807),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),C=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((i=i.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i},y=["Appropriate Schedule","Sensors Calibrated","Equal Load Distribution Across Equipment","Ventilation Rates are Appropriate","Automatic Reset Functioning","Adjustments Made to Compensate for Oversized/Undersized Equip","No Unintended Simultaneous Cooling/Heating Occurs","Economizer Controls Functioning Properly","Air/Water Distribution Balanced","Light Levels are Appropriate","Light Sensors and Controls are Function Properly","DHW Temp. Settings are Correct","Water Pumps Properly Functioning","There Are No Water/Air Leaks"],E=["Vents/Ducts/Coils Are Clean","Filters/Steam Traps are Clean","Components in Good Condition (belts, bearings, pulleys, etc.)","Proper Insulation/Sealant Where Required"],O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={activeTab:"Current Conditions",rcxObj:{currentSchedule:[],adjustedSchedule:[],currentConditionsCleanliness:[],currentConditionsInspections:[],rcxtasksCleanliness:[],rcxtasksInspections:[]},isCompleted:!1,inspectionOntologies:[],inspectionOntology:"",SolutionList:[]},i=n,n._saveCurrentConditions=n._saveCurrentConditions.bind(n),n.handleCurrentScheduler=n.handleCurrentScheduler.bind(n),n.handleAdjustedScheduler=n.handleAdjustedScheduler.bind(n),n.handleCCItems=n.handleCCItems.bind(n),n.handleRcxIncpectionItems=n.handleRcxIncpectionItems.bind(n),n.handleRcxCleanlinessItems=n.handleRcxCleanlinessItems.bind(n),n._saveRCXTaskList=n._saveRCXTaskList.bind(n),n._fetchPreRCX=n._fetchPreRCX.bind(n),n._fetchPostRCX=n._fetchPostRCX.bind(n),n.updateTaskChecklist=n.updateTaskChecklist.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return b(t,e),t.prototype.componentWillUnmount=function(){return C(this,void 0,void 0,function(){return v(this,function(e){return clearInterval(r),[2]})})},t.prototype.componentDidMount=function(){return C(this,void 0,void 0,function(){var e,t,n,i,a,o=this;return v(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,i=e.entityName,t&&n&&i?[4,this.fetchInspection_IsComplete()]:[3,2];case 1:a=s.sent(),this.setState({isCompleted:a},function(){return C(o,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this._fetchPreRCX()];case 1:return e.sent(),[4,this._fetchPostRCX()];case 2:return e.sent(),[2]}})})}),s.label=2;case 2:return r=setInterval(function(){var e=Object(f.a)("inspectionOntology");o.state.inspectionOntology!=e&&o.setState({inspectionOntology:e},function(){return C(o,void 0,void 0,function(){return v(this,function(e){return this._getSolutionList(),[2]})})})},1e3),[2]}})})},t.prototype._getSolutionList=function(){return C(this,void 0,void 0,function(){var e,t=this;return v(this,function(n){switch(n.label){case 0:return e=this.state.inspectionOntology,[4,Object(m.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return C(this,void 0,void 0,function(){var e,t,n,i,r;return v(this,function(a){switch(a.label){case 0:return e=this.props.entityName,[4,Object(h.h)(e,"RCX")];case 1:return t=a.sent(),n=this.state,i=n.isCompleted,r=n.inspectionOntologies,t?(i="true"==Object(u.g)(t.IsCompleted),r=Object(u.g)(t.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:r}),[2,i]):[2,!1]}})})},t.prototype._fetchPreRCX=function(){return C(this,void 0,void 0,function(){var e,t,n,r,a,o,s,c,p=this;return v(this,function(d){switch(d.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,r=e.entityName,a=this.state.inspectionOntology,o=this.state.rcxObj,s=[],c=[],[4,Object(l.d)(t,r,n).then(function(e){if(e){var t=e.filter(function(e){return Object(u.g)(e.inspection)==a});t&&t.map(function(e){var t=Object(u.g)(e.type),n={ccBoolean:"true"==Object(u.g)(e.ccBoolean),ccLabel:Object(u.g)(e.ccLabel),photo:Object(u.g)(e.photo),preRCXName:Object(u.g)(e.preRCXName),entryTimeStamp:Object(u.g)(e.entryTimeStamp),proposedRCX:Object(u.g)(e.proposedRCX)};"Cleanliness"!=t||s.find(function(e){return e.preRCXName==n.preRCXName})?"Inspection"!=t||c.find(function(e){return e.preRCXName==n.preRCXName})||c.push(n):s.push(n)}),o.currentConditionsCleanliness=s,o.currentConditionsInspections=c,o=p.updateTaskChecklist(o),i.setState({rcxObj:o})}})];case 1:return d.sent(),[2]}})})},t.prototype._fetchPostRCX=function(){return C(this,void 0,void 0,function(){var e,t,n,r,a,o,s,c;return v(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,r=e.entityName,a=this.state.rcxObj,o=a.rcxtasksCleanliness,s=a.rcxtasksInspections,(c=g(o.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,r,n,c).then(function(e){e.map(function(e){var t=o.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),o.splice(o.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),o.push(t))}),a.rcxtasksCleanliness=o,i.setState({rcxObj:a})})]:[3,2];case 1:p.sent(),p.label=2;case 2:return c=[],(c=g(s.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,r,n,c).then(function(e){e.map(function(e){var t=s.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),s.splice(s.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),s.push(t))}),a.rcxtasksInspections=s,i.setState({rcxObj:a})})]:[3,4];case 3:p.sent(),p.label=4;case 4:return[2]}})})},t.prototype.updateTaskChecklist=function(e){var t=g(e.rcxtasksInspections);e.rcxtasksInspections=[],e.currentConditionsInspections&&e.currentConditionsInspections.map(function(n){if(0==n.ccBoolean){var i=t.find(function(e){return e.preRCXName==n.preRCXName});i&&n.preRCXName?(i.proposedRCX=n.proposedRCX,e.rcxtasksInspections.push(i)):e.rcxtasksInspections.push({postRCXName:"",preRCXName:n.preRCXName,proposedRCX:n.proposedRCX,ccLabel:n.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:""})}});var n=g(e.rcxtasksCleanliness);return e.rcxtasksCleanliness=[],e.currentConditionsCleanliness&&e.currentConditionsCleanliness.map(function(t){if(0==t.ccBoolean){var i=n.find(function(e){return e.preRCXName==t.preRCXName});i&&t.preRCXName?(i.proposedRCX=t.proposedRCX,e.rcxtasksCleanliness.push(i)):e.rcxtasksCleanliness.push({postRCXName:"",preRCXName:t.preRCXName,proposedRCX:t.proposedRCX,ccLabel:t.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:""})}}),e},t.prototype.handleCurrentScheduler=function(e){var t=this.state.rcxObj;t.currentSchedule=e,this.setState({rcxObj:t})},t.prototype.handleAdjustedScheduler=function(e){var t=this.state.rcxObj;t.adjustedSchedule=e,this.setState({rcxObj:t})},t.prototype.handleCCItems=function(e,t){return C(this,void 0,void 0,function(){var n;return v(this,function(i){return n=this.state.rcxObj,"inspection"==t?n.currentConditionsInspections=e:n.currentConditionsCleanliness=e,n=this.updateTaskChecklist(n),this.setState({rcxObj:n}),[2]})})},t.prototype.handleRcxIncpectionItems=function(e){var t=this.state.rcxObj;t.rcxtasksInspections=e,this.setState({rcxObj:t})},t.prototype.handleRcxCleanlinessItems=function(e){var t=this.state.rcxObj;t.rcxtasksCleanliness=e,this.setState({rcxObj:t})},t.prototype._saveCurrentConditions=function(e){return C(this,void 0,void 0,function(){var t,n,i,r,a,o,s,c,u,d,m=this;return v(this,function(f){switch(f.label){case 0:return Object(p.a)(!0),t=this.state,n=t.rcxObj,i=t.inspectionOntologies,r=t.SolutionList,a=t.inspectionOntology,o=this.props,s=o.buildingName,c=o.infoEntity,u=o.entityName,d=o.instance,[4,Object(l.f)(s,c,u,n,a,!0,r,e)];case 1:return f.sent(),this.setState({rcxObj:n},function(){return C(m,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?a?(i.push(a),[4,Object(h.c)(u,i,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(c){case"Equip":window.location.hash=d+"/"+s+"/Assets";break;case"Space":window.location.hash=d+"/"+s+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(p.a)(!1),[2]}})})},t.prototype._saveRCXTaskList=function(e){return C(this,void 0,void 0,function(){var t,n,i,r,a,o,s,c,u,d,m=this;return v(this,function(f){switch(f.label){case 0:return Object(p.a)(!0),t=this.state,n=t.rcxObj,i=t.inspectionOntologies,r=t.SolutionList,a=t.inspectionOntology,o=this.props,s=o.buildingName,c=o.infoEntity,u=o.entityName,d=o.instance,[4,Object(l.e)(s,c,u,n,!0,r,e)];case 1:return f.sent(),this.setState({rcxObj:n},function(){return C(m,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?a?(i.push(a),[4,Object(h.c)(u,i,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(c){case"Equip":window.location.hash=d+"/"+s+"/Assets";break;case"Space":window.location.hash=d+"/"+s+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(p.a)(!1),[2]}})})},t.prototype.unComplete=function(){return C(this,void 0,void 0,function(){var e,t,n,i,r;return v(this,function(a){switch(a.label){case 0:if(e=this.props.entityName,t=this.state,n=t.inspectionOntologies,i=t.inspectionOntology,!(n&&n.length>0))return[3,2];if(!i)return[3,2];for(r=0;r<n.length;r++)n[r]==i&&n.splice(r,1);return[4,Object(h.k)(e,n,"RCX")];case 1:a.sent(),a.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,r=t.entityName,l=t.infoEntity,u=this.state,p=u.activeTab,h=u.rcxObj,m=u.isCompleted,f=u.inspectionOntologies,b=u.inspectionOntology,g=f.find(function(e){return e==b}),O=!!(g&&g.length>0);return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(o.a,{instance:this.props.instance,buildingName:n,tabName:l,showComponentButton:"Equip"==l,itemName:r,showAuditTypes:!0,showBIMButtons:!0})),a.createElement("div",{className:""},a.createElement("div",{className:"col-md-12 form-group"},a.createElement("div",{className:"pull-right"},a.createElement(d.a,{ElementID:"Current Conditions"==p?"currentconditions":"checklist",data:this.state.rcxObj,filename:"rcx"})))),a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10"},a.createElement("div",{className:"col-md-12"},a.createElement("h4",{style:{marginTop:10}},"Retro-Commissioning")),a.createElement("div",{className:"col-md-12 padding-10"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("Current Conditions"==p?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"Current Conditions"})}},"Current Conditions"),a.createElement("button",{className:"btn "+("RCX Task CheckList"==p?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"RCX Task CheckList"})}}," RCX Task CheckList"))),a.createElement("div",{style:{display:"Current Conditions"==p?"block":"none"},id:"currentconditions",className:"row padding-10"},a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("h4",{className:"title"},"Inspections"),a.createElement("div",{className:"padding-10"},a.createElement(s.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"inspection",buildingName:n,instance:i,rcxOf:l,currentConditions:h.currentConditionsInspections,labels:y}))),a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("h4",{className:"title"},"Cleanliness"),a.createElement("div",{className:"padding-10"},a.createElement(s.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"cleanliness",buildingName:n,instance:i,rcxOf:l,currentConditions:h.currentConditionsCleanliness,labels:E}))),a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("div",{className:"form-group"},a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return C(e,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this._saveCurrentConditions(!1)];case 1:return e.sent(),[2]}})})}},a.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",!m&&a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCurrentConditions(!0)}},a.createElement("i",{className:"fa fa-save"})," Save & Complete"),m&&a.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},a.createElement("b",null,"Remove Inspection Completion"))))),a.createElement("div",{style:{display:"RCX Task CheckList"==p?"block":"none"},id:"checklist",className:"row padding-10"},a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("h4",{className:"title"},"Inspections"),a.createElement("div",{className:"padding-10"},a.createElement(c.a,{handleAdder:this.handleRcxIncpectionItems,buildingName:n,instance:i,rcxOf:l,rcxItems:h.rcxtasksInspections,isInspectionOrCleanliness:"Inspection"}))),a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("h4",{className:"title"},"Cleanliness"),a.createElement("div",{className:"padding-10"},a.createElement(c.a,{handleAdder:this.handleRcxCleanlinessItems,buildingName:n,instance:i,rcxOf:l,rcxItems:h.rcxtasksCleanliness,isInspectionOrCleanliness:"Cleanliness"}))),a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("div",{className:"form-group"},a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return C(e,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this._saveRCXTaskList(!1)];case 1:return e.sent(),[2]}})})}},a.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",(m||!m)&&a.createElement(a.Fragment,null," ",!O&&a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveRCXTaskList(!0)}},a.createElement("i",{className:"fa fa-save"})," Save & Complete")),m&&O&&a.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},a.createElement("b",null,"Remove Inspection Completion")))))))),a.createElement("br",null)))},t}(a.Component);t.default=O},725:function(e,t,n){"use strict";t.g=function(e,t,n,c){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(i.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},i.a.LIFE.SaveProject,a.b.LIFE).then(function(){Object(r.b)("Project saved Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Project.")})];case 1:return[2,o.sent()]}})})},t.r=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetProjectList,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteProject,a.b.LIFE).then(function(){Object(r.b)(" Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({model:e},i.a.LIFE.SaveProjectSolution,a.b.LIFE).then(function(){Object(r.b)("Solution saved Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({spreadSheetId:e,fileType:t},i.a.LIFE.ExportSheet,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetSolutionList,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.u=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({inspectionOntology:e},i.a.LIFE.GetSolutionListForInspection,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.s=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({solutionId:e},i.a.LIFE.GetSolution,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteSolution,a.b.LIFE).then(function(){Object(r.b)(" Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({manageFile:e,fileData:t},i.a.LIFE.ManageFile,a.b.LIFE).then(function(){Object(r.b)("Upload Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({communityFile:e,fileData:t},i.a.LIFE.SaveCommunityFile,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetManageFile,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetCommunityFile,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ManageFile:e},i.a.LIFE.DeleteManageFile,a.b.LIFE).then(function(){Object(r.b)(" Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({communityFile:e},i.a.LIFE.DeleteCommunityFile,a.b.LIFE).then(function(){Object(r.b)(" Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetProject,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.SaveEmailAndDrive,a.b.LIFE)];case 1:return[2,r.sent()]}})})},t.j=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({email:e,instance:t},i.a.LIFE.ShareCommunityFolder,a.b.LIFE).then(function(e){e.result?Object(r.b)("Successfully Share."):Object(r.a)("The user Email is not valid.")}).catch(function(e){Object(r.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.ShareMMTemplateFolder,a.b.LIFE).then(function(e){e.result?Object(r.b)("Successfully Share."):Object(r.a)("The user Email is not valid.")}).catch(function(e){Object(r.a)("Something Went Wrong!")})];case 1:return[2,o.sent()]}})})},t.i=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({templatePurpose:e},i.a.LIFE.SaveTemplatePurpose,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetTemplatePurpose,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),i=e.getDate().toString().padStart(2,0),r=e.getHours().toString().padStart(2,0),a=e.getMinutes().toString().padStart(2,0),o=e.getSeconds().toString().padStart(2,0);return t+n+i+r+a+o};var i=n(12),r=n(23),a=n(19),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}},986:function(e,t,n){"use strict";var i=n(2),r=(n.n(i),n(748)),a=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={attachment:Object(),cameraCaptured:Object(),isAttachment:!1,isCamera:!1,files:[]},n.handleFileAttached=n.handleFileAttached.bind(n),n.handleFile=n.handleFile.bind(n),n}return a(t,e),t.prototype.handleFileAttached=function(e){e&&e.length>0&&this.setState({attachment:e[0],files:e})},t.prototype.handleFile=function(e){e&&this.setState({cameraCaptured:e})},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.cameraCaptured,a=t.attachment,o=t.isAttachment,s=t.isCamera,c=t.files;return i.createElement(i.Fragment,null,i.createElement("div",{className:"form-group inline-block"},i.createElement("button",{type:"button",className:"btn btn-primary btn-fill",onClick:function(){e.setState({isAttachment:!0,isCamera:!1})}},i.createElement("i",{className:"fa fa-image"}),"Choose From Library")),o&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(r.a,{handleAttachedFile:this.handleFileAttached,acceptHeader:"image/jpeg, image/png"+(this.props.isImageOnly?"":", video/mp4"),files:c}))),(o||s)&&i.createElement("button",{type:"button",className:"btn btn-success btn-fill",onClick:function(){e.setState({isAttachment:!1,isCamera:!1},function(){s?e.props.handleFile(n):o&&e.props.handleFile(a)})}},i.createElement("i",{className:"fa fa-camera"}),"Done"))},t}(i.Component);t.a=o}});