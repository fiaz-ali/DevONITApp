webpackJsonp([10],{2503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),a=(n.n(l),n(121)),o=n(1150),i=n(12),s=n(675),r=n(2504),u=n(20),c=n(2505),p=n(2506),d=n(2507),m=n(2508),h=n(2509),v=n(2510),f=n(2511),g=n(2512),b=n(2513),x=n(1454),E=(n.n(x),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),y=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},w=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=function(e){function t(t){var n=e.call(this,t)||this,l=new Date(new Date(Date.now()).setMinutes(new Date(Date.now()).getMinutes()-30)),a=new Date(Date.now());return n.state={from:l,to:a,dashboardURL:"",insights:[],templatesList:[],selectedTemplate:"default",loadingDevices:!0,liveGraphRange:30,filteredInsights:[],selectedTemplateGraphs:{}},n}return E(t,e),t.prototype._fetchInsights=function(){return y(this,void 0,void 0,function(){var e,t,n,l=this;return w(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,[4,Object(s.x)(e)];case 1:return t=a.sent(),this.setState({insights:t}),n=[],e?[4,Object(o.b)(e).then(function(e){e&&e.length>0?(e.map(function(e){n.push({ontology:Object(i.g)(e.ontology),label:Object(i.g)(e.label),deviceGraphs:Object(i.g)(e.deviceGraphs)})}),l.setState({templatesList:n,selectedTemplate:(n.length-1).toString(),filteredInsights:[]},function(){var e=JSON.parse(n[n.length-1].deviceGraphs),a=Object.keys(e),o=null===t||void 0===t?void 0:t.filter(function(e){return a.indexOf(Object(i.g)(e.moncondevice))>-1});l.setState({filteredInsights:o,loadingDevices:!1,selectedTemplateGraphs:e})})):l.setState({filteredInsights:t.filter(function(e){return e.moncondevice}),loadingDevices:!1})})]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.liveGraphRangeChange=function(e){var t=this,n=new Date,l=new Date;l.setMinutes(l.getMinutes()-+e),this.setState({from:l,to:n,liveGraphRange:+e,loadingDevices:!0},function(){t.selectTemplate(t.state.selectedTemplate)})},t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return[4,this._fetchInsights()];case 1:return e.sent(),[2]}})})},t.prototype.selectTemplate=function(e){var t=this,n=this.state,l=n.templatesList,a=n.insights;"default"==e?this.setState({selectedTemplate:e,filteredInsights:a,loadingDevices:!1}):this.setState({loadingDevices:!0,selectedTemplate:e,filteredInsights:[]},function(){var n=JSON.parse(l[+e].deviceGraphs),o=Object.keys(n),s=a.filter(function(e){return o.indexOf(Object(i.g)(e.moncondevice))>-1});t.setState({filteredInsights:s,loadingDevices:!1,selectedTemplateGraphs:n})})},t.prototype.render=function(){var e=this,t=this.state,n=t.from,o=t.to,s=t.filteredInsights,x=t.templatesList,E=t.selectedTemplate,y=t.loadingDevices,w=t.liveGraphRange,D=t.selectedTemplateGraphs,k=this.props,N=k.buildingName,S=k.instance;return l.createElement("div",{className:"dashboard"},l.createElement("div",{className:"dashboard-header"},!y&&l.createElement("div",{className:"col-md-3 float-left"},l.createElement("div",{className:"col-md-7 no-padding"},l.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(t){e.selectTemplate(t.target.value)},value:E,placeholder:"Select Template"},l.createElement("option",{value:"default"},"All Graphs"),(null===x||void 0===x?void 0:x.length)>0&&x.map(function(e,t){return l.createElement("option",{value:t,key:t},e.label)}))),l.createElement(a.b,{target:"_blank",to:"/"+S+"/"+N+"/Dashboard/Templates",className:"btn btn-fill btn-secondary btn-secondary-dark margin-left-20 btn-fix-height"},"Create Template")),l.createElement("h3",{className:"dashboard-title"},Object(u.v)(N)),!y&&l.createElement("div",{className:"col-md-3 float-right"},l.createElement("div",{className:"col-md-5 padding-5"},l.createElement("label",{style:{color:"#fff",cursor:"none"}},"Graph Range: \xa0")),l.createElement("div",{className:"col-md-7 no-padding"},l.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(t){e.liveGraphRangeChange(t.target.value)},value:w},l.createElement("option",{value:5},"5 Minutes"),l.createElement("option",{value:15},"15 Minutes"),l.createElement("option",{value:30},"30 Minutes"),l.createElement("option",{value:60},"1 Hour"),l.createElement("option",{value:180},"3 Hours"),l.createElement("option",{value:360},"6 Hours"),l.createElement("option",{value:720},"12 Hours"),l.createElement("option",{value:1440},"24 Hours"))))),y?l.createElement("div",{className:"graph-box-loader full-screen"},l.createElement("div",{className:"center-object loader"})):l.createElement("div",{className:"graph-boxes full-screen"},null===s||void 0===s?void 0:s.map(function(e){var t,a,s,u,x,E,y,k=-1!=(null===(t=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===t?void 0:t.toLowerCase().indexOf("thermostat")),_=-1!=(null===(a=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===a?void 0:a.toLowerCase().indexOf("ceiling")),F=-1!=(null===(s=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===s?void 0:s.toLowerCase().indexOf("intesis")),L=-1!=(null===(u=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===u?void 0:u.toLowerCase().indexOf("ats")),O=-1!=(null===(x=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===x?void 0:x.toLowerCase().indexOf("generator")),A="CBW406"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),M="CBW418"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),C=-1!=(null===(E=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===E?void 0:E.toLowerCase().indexOf("relayv4")),j=-1!=(null===(y=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===y?void 0:y.toLowerCase().indexOf("relayi1")),G="WattNode"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype);return l.createElement(l.Fragment,null,k&&l.createElement(r.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),_&&l.createElement(p.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Temp & Humidity","Pressure","Illuminance","Air Particles","Gas Resistance","Other Parameters"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),F&&l.createElement(d.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),L&&l.createElement(m.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),O&&l.createElement(h.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Voltages","Currents","Powers","Power Factor","Other Parameters","Binary Parameters"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),A&&l.createElement(v.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),M&&l.createElement(f.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),C&&l.createElement(g.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),j&&l.createElement(c.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Totalized Energy","Frequency and Voltage","Current and Power","State and Power Factor"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}),G&&l.createElement(b.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:N,instance:S,from:n,to:o,liveGraphRange:w,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Power","Phase Voltage","Voltage","Frequency","Energy Sum Resettable","Positive Energy Sum Non-resettable"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel)}))}),0==(null===s||void 0===s?void 0:s.length)&&l.createElement("div",{className:"full-screen"},l.createElement("h1",{className:"no-graph-heading"}," No Graphs "))))},t}(l.Component);t.default=D},2504:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(675),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u;return d(this,void 0,void 0,function(){var c,p,d,h,v,f,g,b,x,E,y;return m(this,function(m){switch(m.label){case 0:return c=this.state,p=c.Moncon,d=c.graphData,h=c.axis1,v=c.grid,f=c.lastUpdatedAt,g=this.props.liveGraphRange,b=new Date,(x=new Date).setMinutes(x.getMinutes()-g),[4,Object(s.J)(p.topic,x,b,!0)];case 1:return E=m.sent(),(y=new Date(null===(e=E[0])||void 0===e?void 0:e.timestamp))>d.columns[0][d.columns[0].length-1]&&E[0]&&(null===(t=E[0])||void 0===t?void 0:t.cooltemp)&&(d.columns[0].push(y),d.columns[1].push(null===(n=E[0])||void 0===n?void 0:n.cooltemp),d.columns[2].push(null===(l=E[0])||void 0===l?void 0:l.heattemp),d.columns[3].push(null===(a=E[0])||void 0===a?void 0:a.spacetemp),d.columns[4].push(null===(o=E[0])||void 0===o?void 0:o.fan),d.columns[5].push(null===(i=E[0])||void 0===i?void 0:i.fanstate),d.columns[6].push(null===(r=E[0])||void 0===r?void 0:r.mode),d.columns[7].push(null===(u=E[0])||void 0===u?void 0:u.state),(y.getTime()-d.columns[0][2].getTime())/6e4>g&&d.columns[0].splice(1,1),h.x.tick.values[0]<d.columns[0][1]&&(h.x.tick.values.splice(0,1),v.x.lines.splice(0,1)),h.x.tick.values[2]&&h.x.tick.values[1].getTime()&&h.x.tick.values[2].getTime()-h.x.tick.values[1].getTime()<y.getTime()-h.x.tick.values[h.x.tick.values.length-1]&&(y.setSeconds(0),g>10&&y.setMinutes(y.getMinutes()-y.getMinutes()%5),h.x.tick.values.push(y),v.x.lines.push({value:y,class:"grid4"})),f=null===y||void 0===y?void 0:y.toLocaleString(),this.setState({grid:v,axis1:h,graphData:d,lastUpdatedAt:f})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.from,l=t.to,a=t.InsightName,o=t.buildingName,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.graphData,v=c.lastUpdatedAt,a?(f=Object(),[4,Object(i.x)(a,o)]):[3,3];case 1:return f=m.sent(),this.setState({Moncon:f}),[4,Object(s.J)(f.topic,n,l,h.columns.length>1)];case 2:return g=m.sent(),x=["Heat setpoint"],E=["Space Temp"],y=["Fan 0: Auto 1: On"],w=["Fan State 1: On"],D=["Mode 1: Heat 2: Cool 3: Auto"],k=["state"],N=["x"],(b=["Cool setpoint"]).push(null),x.push(null),E.push(null),y.push(null),w.push(null),D.push(null),k.push(null),N.push(new Date(n)),g.length>0&&(null===g||void 0===g||g.forEach(function(e){(null===e||void 0===e?void 0:e.cooltemp)&&(b.push(e.cooltemp),x.push(e.heattemp),E.push(e.spacetemp),y.push(e.fan),w.push(e.fanstate),D.push(e.mode),k.push(e.state),N.push(new Date(e.timestamp)))})),v=g.length>0?null===(e=N[N.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",(h.columns.length>1||0===g.length)&&(b.push(null),x.push(null),E.push(null),y.push(null),w.push(null),D.push(null),k.push(null),N.push(new Date(l))),d.y.label="\xb0C",S=Object(r.a)(5,n,l),_="",S.length>1?(F=((new Date).getTime()-S[0].getTime())/1e3,_=(F/=3600)>24?"%m-%d %H:%M":F<.3?"%H:%M:%S":"%H:%M"):_="%H:%M:%S",p.x.lines=[],S.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),h={x:"x",columns:[N,b,x,E,y,w,D,k],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 1: Heat 2: Cool 3: Auto":"y2",state:"y2"},types:{"Cool setpoint":"line","Heat setpoint":"line","Space Temp":"step","Fan 0: Auto 1: On":"step","Fan State 1: On":"step","Mode 1: Heat 2: Cool 3: Auto":"step",state:"step"}},d={x:{type:"timeseries",tick:{fit:!1,count:5,values:S,format:_}},y:{label:{text:"Temperature \xb0F",position:"outer-middle"},tick:{fit:!0,values:[0,20,40,60,80,100],count:6,format:function(e){return parseFloat(e).toFixed(1)}},max:100,min:0},y2:{show:!0,label:{text:"State, Mode, Fan, Fan State",position:"outer-middle"},tick:{fit:!0,values:[0,1,2],count:6,format:function(e){return parseFloat(e).toFixed(0)}},max:2,min:0}},this.setState({grid:p,axis1:d,graphData:h,loading:!1,lastUpdatedAt:v},function(){setInterval(function(){L.liveGraph()},u)}),[3,4];case 3:this.setState({loading:!1},function(){setInterval(function(){L.liveGraph()},u)}),m.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.axis1,s=e.grid,r=e.equipmentsLabels,u=e.lastUpdatedAt,c=this.props,p=c.instance,d=c.buildingName,m=c.space,h=c.floor,v=c.zone;return l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=p+"/"+d+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},v," Thermostat"),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",m," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",h," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",v," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",r.map(function(e,t){return e.rdfsLabel+(t<r.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",u)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:i,grid:s,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(l.Component);t.a=h},2505:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(12),s=n(668),r=n(675),u=n(769),c=n(20),p=n(713),d=(n.n(p),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),m=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(c.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return m(this,void 0,void 0,function(){return h(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,s,u;return m(this,void 0,void 0,function(){var c,p,d,m,v,f,g,b,x,E,y,w,D,k;return h(this,function(h){switch(h.label){case 0:return c=this.state,p=c.Moncon,d=c.graphData,m=c.graphData2,v=c.graphData3,f=c.graphData4,g=c.axis1,b=c.grid,x=c.lastUpdatedAt,E=this.props.liveGraphRange,y=new Date,(w=new Date).setMinutes(w.getMinutes()-E),[4,Object(r.g)(p.topic,w,y,!0)];case 1:return D=h.sent(),(k=new Date(null===(e=D[0])||void 0===e?void 0:e.timestamp))>d.columns[0][d.columns[0].length-1]&&(null===(t=D[0])||void 0===t?void 0:t.timestamp)&&(d.columns[0].splice(1,1),d.columns[0].push(k),d.columns[1].splice(1,1),d.columns[1].push(+(null===(n=D[0])||void 0===n?void 0:n.import_active_energy_Wh)/1e3),m.columns[1].splice(1,1),m.columns[1].push(null===(l=D[0])||void 0===l?void 0:l.frequency_Hz),m.columns[2].splice(1,1),m.columns[2].push(null===(a=D[0])||void 0===a?void 0:a.voltage_volts),v.columns[1].splice(1,1),v.columns[1].push(null===(o=D[0])||void 0===o?void 0:o.active_power_Watts),v.columns[2].splice(1,1),v.columns[2].push(null===(i=D[0])||void 0===i?void 0:i.current_Amperes),f.columns[1].splice(1,1),f.columns[1].push(null===(s=D[0])||void 0===s?void 0:s.i1relay_state),f.columns[2].splice(1,1),f.columns[2].push(null===(u=D[0])||void 0===u?void 0:u.power_factor),g.x.tick.values[0]<d.columns[0][1]&&(g.x.tick.values.splice(0,1),b.x.lines.splice(0,1)),(k.getTime()-d.columns[0][2].getTime())/6e4>E&&d.columns[0].splice(1,1),g.x.tick.values[0]<d.columns[0][1]&&(g.x.tick.values.splice(0,1),b.x.lines.splice(0,1)),g.x.tick.values[2]&&g.x.tick.values[1].getTime()&&g.x.tick.values[2].getTime()-g.x.tick.values[1].getTime()<k.getTime()-g.x.tick.values[g.x.tick.values.length-1]&&(k.setSeconds(0),E>10&&k.setMinutes(k.getMinutes()-k.getMinutes()%5),g.x.tick.values.push(k),b.x.lines.push({value:k,class:"grid4"})),x=null===k||void 0===k?void 0:k.toLocaleString(),this.setState({grid:b,axis1:g,graphData:d,graphData2:m,graphData3:v,graphData4:f,lastUpdatedAt:x})),[2]}})})},t.prototype._fetchData=function(){var e;return m(this,void 0,void 0,function(){var t,n,l,a,o,c,p,d,m,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P=this;return h(this,function(h){switch(h.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,c=t.updateAfterMilliSeconds,p=this.state,d=p.grid,m=p.axis1,v=p.axis2,f=p.axis3,g=p.axis4,b=p.graphData,x=p.graphData2,E=p.graphData3,y=p.graphData4,w=p.lastUpdatedAt,n?(D=Object(),[4,Object(s.x)(n,l)]):[3,4];case 1:return D=h.sent(),this.setState({Moncon:D}),[4,Object(r.g)(D.topic,a,o,b.columns.length>1)];case 2:return k=h.sent(),[4,Object(r.A)(D.deviceName)];case 3:return N=h.sent(),S=[],N[0]?(_=N[0],F=Object(i.g)(_.relayNames),S=F.split(",")):S.push("Relay"),L=[S[0]+" State"],O=[S[0]+" Watts"],A=[S[0]+"Amps"],M=[S[0]+" Freq"],C=[S[0]+" Watts"],j=[S[0]+" Power Factor"],G=[S[0]+" Volts"],R=["x"],L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(new Date(a)),k.length>0&&k.forEach(function(e){e&&(L.push(e.i1relay_state),O.push(e.active_power_Watts),A.push(e.current_Amperes),M.push(e.frequency_Hz),C.push(+e.import_active_energy_Wh/1e3),j.push(e.power_factor),G.push(e.voltage_volts),R.push(new Date(e.timestamp)))}),w=k.length>0?null===(e=R[R.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(new Date(o)),b={x:"x",columns:[R,C]},x={x:"x",columns:[R,M,G]},E={x:"x",columns:[R,O,A]},y={x:"x",columns:[R,L,j]},m.y.label="kWh",v.y.label="Hz/Volts",f.y.label="Watts/Amps",g.y.label="",T=Object(u.a)(5,a,o),q="",T.length>1?(I=((new Date).getTime()-T[0].getTime())/1e3,q=(I/=3600)>24?"%m-%d %H:%M":I<.3?"%H:%M:%S":"%H:%M"):q="%H:%M:%S",d.x.lines=[],T.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),m.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(1)},f.y.tick.format=function(e){return parseFloat(e).toFixed(1)},g.y.tick.format=function(e){return parseFloat(e).toFixed(2)},v.y.tick.values=[0,50,100,150,200],f.y.tick.values=[0,20,40,60,80,100],g.y.tick.values=[-1,0,1,2],m.y.min=0,v.y.max=200,v.y.min=0,f.y.max=100,f.y.min=0,g.y.max=2,g.y.min=-1,m.x.tick.format=q,v.x.tick.format=q,f.x.tick.format=q,g.x.tick.format=q,m.x.tick.values=T,v.x.tick.values=T,f.x.tick.values=T,g.x.tick.values=T,this.setState({grid:d,axis1:m,axis2:v,axis3:f,axis4:g,graphData:b,graphData2:x,graphData3:E,graphData4:y,loading:!1,lastUpdatedAt:w},function(){setInterval(function(){P.liveGraph()},c)}),[3,5];case 4:this.setState({loading:!1},function(){setInterval(function(){P.liveGraph()},c)}),h.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.graphData2,s=e.graphData3,r=e.graphData4,u=e.axis1,c=e.axis2,p=e.axis3,d=e.axis4,m=e.grid,h=e.lastUpdatedAt,v=e.equipmentsLabels,f=this.props,g=f.graphsList,b=f.instance,x=f.buildingName,E=f.space,y=f.floor,w=f.zone;return l.createElement(l.Fragment,null,g.indexOf("Totalized Energy")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=b+"/"+x+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",E," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",y," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",w," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===v||void 0===v?void 0:v.map(function(e,t){return e.rdfsLabel+(t<v.length-1?", ":" ")})," "),l.createElement("br",null),"F",l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Totalized Energy",l.createElement("span",{className:"lastUpdated"},"Last: ",h)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:u,grid:m,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),g.indexOf("Frequency and Voltage")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=b+"/"+x+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",E," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",y," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",w," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===v||void 0===v?void 0:v.map(function(e,t){return e.rdfsLabel+(t<v.length-1?", ":" ")})," "),l.createElement("br",null),"F",l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Frequency and Voltage",l.createElement("span",{className:"lastUpdated"},"Last: ",h)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:i,size:{height:300},axis:c,grid:m,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),g.indexOf("Current and Power")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=b+"/"+x+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",E," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",y," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",w," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===v||void 0===v?void 0:v.map(function(e,t){return e.rdfsLabel+(t<v.length-1?", ":" ")})," "),l.createElement("br",null),"F",l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Current and Power",l.createElement("span",{className:"lastUpdated"},"Last: ",h)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:s,size:{height:300},axis:p,grid:m,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),g.indexOf("State and Power Factor")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=b+"/"+x+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",E," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",y," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",w," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===v||void 0===v?void 0:v.map(function(e,t){return e.rdfsLabel+(t<v.length-1?", ":" ")})," "),l.createElement("br",null),"F",l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","State and Power Factor",l.createElement("span",{className:"lastUpdated"},"Last: ",h)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:r,size:{height:300},axis:d,grid:m,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(l.Component);t.a=v},2506:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(675),r=n(908),u=n(769),c=n(20),p=n(713),d=(n.n(p),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),m=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(c.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return m(this,void 0,void 0,function(){return h(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,u,c,p,d;return m(this,void 0,void 0,function(){var m,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L;return h(this,function(h){switch(h.label){case 0:return m=this.state,v=m.Moncon,f=m.graphData,g=m.graphData2,b=m.graphData3,x=m.graphData4,E=m.graphData5,y=m.graphData6,w=m.axis1,D=m.grid,k=m.lastUpdatedAt,N=this.props.liveGraphRange,S=new Date,(_=new Date).setMinutes(_.getMinutes()-N),[4,Object(s.d)(v.topic,_,S,!0)];case 1:return F=h.sent(),(L=new Date(null===(e=F[0])||void 0===e?void 0:e.timestamp))>f.columns[0][f.columns[0].length-1]&&(null===(t=F[0])||void 0===t?void 0:t.relhumidity_pct)&&(f.columns[0].push(L),f.columns[1].push(Object(r.a)(null===(n=F[0])||void 0===n?void 0:n.temp_celsius,v&&v.firmwareVersion?v.firmwareVersion:"",v.csbCallibration)),f.columns[2].push(null===(l=F[0])||void 0===l?void 0:l.relhumidity_pct),g.columns[1].push(null===(a=F[0])||void 0===a?void 0:a.pressure_hPa),b.columns[1].push(null===(o=F[0])||void 0===o?void 0:o.illuminance_lux),x.columns[1].push(null===(i=F[0])||void 0===i?void 0:i.gasResistance_kOhm),E.columns[1].push(parseFloat(null===(u=F[0])||void 0===u?void 0:u.equiCO2_ppm)),E.columns[2].push(parseFloat(null===(c=F[0])||void 0===c?void 0:c.tvoc_ppm)),y.columns[1].push(parseFloat(null===(p=F[0])||void 0===p?void 0:p.motion_sensed)),y.columns[2].push(parseFloat(null===(d=F[0])||void 0===d?void 0:d.num_BTdev)),(L.getTime()-f.columns[0][2].getTime())/6e4>N&&f.columns[0].splice(1,1),w.x.tick.values[0]<f.columns[0][1]&&(w.x.tick.values.splice(0,1),D.x.lines.splice(0,1)),w.x.tick.values[2]&&w.x.tick.values[1].getTime()&&w.x.tick.values[2].getTime()-w.x.tick.values[1].getTime()<L.getTime()-w.x.tick.values[w.x.tick.values.length-1]&&(L.setSeconds(0),N>10&&L.setMinutes(L.getMinutes()-L.getMinutes()%5),w.x.tick.values.push(L),D.x.lines.push({value:L,class:"grid4"})),k=null===L||void 0===L?void 0:L.toLocaleString(),this.setState({grid:D,axis1:w,graphData:f,graphData2:g,graphData3:b,graphData4:x,graphData5:E,graphData6:y,lastUpdatedAt:k})),[2]}})})},t.prototype._fetchData=function(){var e;return m(this,void 0,void 0,function(){var t,n,l,a,o,c,p,d,m,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P,U,V,H=this;return h(this,function(h){switch(h.label){case 0:return t=this.props,n=t.from,l=t.to,a=t.InsightName,o=t.buildingName,c=t.updateAfterMilliSeconds,p=this.state,d=p.grid,m=p.axis1,v=p.axis2,f=p.axis3,g=p.axis4,b=p.axis5,x=p.axis6,E=p.graphData,y=p.graphData2,w=p.graphData3,D=p.graphData4,k=p.graphData5,N=p.graphData6,S=p.lastUpdatedAt,a?(_=Object(),[4,Object(i.x)(a,o)]):[3,3];case 1:return _=h.sent(),console.log(_),this.setState({Moncon:_}),[4,Object(s.d)(_.topic,n,l,E.columns.length>1)];case 2:return F=h.sent(),O=["Humidity"],A=["Alt."],M=["CO2"],C=["TVOC"],j=["Gas Res"],G=["Illuminance"],R=["Motion"],T=["Blth Dev."],q=["Pres."],I=["x"],(L=["Temp"]).push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(null),I.push(new Date(n)),F.length>0&&F.forEach(function(e){e&&(L.push(Object(r.a)(e.temp_celsius,_&&_.firmwareVersion?_.firmwareVersion:"",_.csbCallibration)),O.push(e.relhumidity_pct),A.push(e.altitude_m),M.push(e.equiCO2_ppm),C.push(e.tvoc_ppm),q.push(e.pressure_hPa),j.push(e.gasResistance_kOhm),G.push(e.illuminance_lux),R.push(e.motion_sensed),T.push(e.num_BTdev),I.push(new Date(e.timestamp)))}),S=F.length>0?null===(e=I[I.length-1])||void 0===e?void 0:e.toLocaleString():"No data",0===F.length&&(L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(null),I.push(new Date(l))),m.y.label="\xb0F / %",v.y.label="hPa",f.y.label="Lux",g.y.label="kOhm",b.y.label="PPM",x.y.label="",I.length>1&&(P=Object(u.a)(5,n,l),U="",P.length>1?(V=((new Date).getTime()-P[0].getTime())/1e3,U=(V/=3600)>24?"%m-%d %H:%M":V<.3?"%H:%M:%S":"%H:%M"):U="%H:%M:%S",d.x.lines=[],P.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),m.y.tick.format=function(e){return parseFloat(e).toFixed(1)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},f.y.tick.format=function(e){return parseFloat(e).toFixed(0)},g.y.tick.format=function(e){return parseFloat(e).toFixed(0)},b.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},m.y.tick.values=[0,20,40,60,80,100],v.y.tick.values=[900,950,1e3,1050,1100],f.y.tick.values=[0,40,80,120,160,200,240],g.y.tick.values=[0,600,1200,1800,2400,3e3],b.y.tick.values=[0,4e3,8e3,12e3,16e3],x.y.tick.values=[0,10,20,30,40,50],m.y.max=100,m.y.min=0,v.y.max=1100,v.y.min=900,f.y.max=200,f.y.min=0,g.y.max=3e3,g.y.min=0,b.y.max=16e3,b.y.min=0,x.y.max=50,x.y.min=0,m.x.tick.format=U,v.x.tick.format=U,f.x.tick.format=U,g.x.tick.format=U,b.x.tick.format=U,x.x.tick.format=U,m.x.tick.values=P,v.x.tick.values=P,f.x.tick.values=P,g.x.tick.values=P,b.x.tick.values=P,x.x.tick.values=P,E={x:"x",columns:[I,L,O]},y={x:"x",columns:[I,q]},w={x:"x",columns:[I,G]},D={x:"x",columns:[I,j]},k={x:"x",columns:[I,M,C]},N={x:"x",columns:[I,R,T]},this.setState({grid:d,axis1:m,axis2:v,axis3:f,axis4:g,axis5:b,axis6:x,graphData:E,graphData2:y,graphData3:w,graphData4:D,graphData5:k,graphData6:N,lastUpdatedAt:S,loading:!1},function(){setInterval(function(){H.liveGraph()},c)})),[3,4];case 3:this.setState({loading:!1},function(){setInterval(function(){H.liveGraph()},c)}),h.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.graphData2,s=e.graphData3,r=e.graphData4,u=e.graphData5,c=e.graphData6,p=e.axis1,d=e.axis2,m=e.axis3,h=e.axis4,v=e.axis5,f=e.axis6,g=e.grid,b=e.lastUpdatedAt,x=e.equipmentsLabels,E=this.props,y=E.instance,w=E.buildingName,D=E.graphsList,k=E.space,N=E.floor,S=E.zone;return l.createElement(l.Fragment,null,D.indexOf("Temp & Humidity")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=y+"/"+w+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},k," Ceiling Sensor")," Temp & Humidity",l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:p,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),D.indexOf("Pressure")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=y+"/"+w+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},k," Ceiling Sensor")," Pressure",l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:i,size:{height:300},axis:d,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),D.indexOf("Illuminance")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=y+"/"+w+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},k," Ceiling Sensor")," Illuminance",l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:s,size:{height:300},axis:m,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),D.indexOf("Gas Resistance")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=y+"/"+w+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},k," Ceiling Sensor")," Gas Resistance",l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:r,size:{height:300},axis:h,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),D.indexOf("Air Particles")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=y+"/"+w+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},k," Ceiling Sensor")," Air Particles",l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:u,size:{height:300},axis:v,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),D.indexOf("Other Parameters")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=y+"/"+w+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===t||void 0===t?void 0:t.deviceName)}},k," Ceiling Sensor")," Other Parameters",l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:c,size:{height:300},axis:f,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(l.Component);t.a=v},2507:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(675),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u;return d(this,void 0,void 0,function(){var c,p,d,h,v,f,g,b,x,E,y;return m(this,function(m){switch(m.label){case 0:return c=this.state,p=c.Moncon,d=c.graphData,h=c.axis1,v=c.grid,f=c.lastUpdatedAt,g=this.props.liveGraphRange,b=new Date,(x=new Date).setMinutes(x.getMinutes()-g),[4,Object(s.e)(p.topic,x,b,!0)];case 1:return E=m.sent(),(y=new Date(null===(e=E[0])||void 0===e?void 0:e.timestamp))>d.columns[0][d.columns[0].length-1]&&(null===(t=E[0])||void 0===t?void 0:t.setpoint)&&(d.columns[0].splice(1,1),d.columns[0].push(y),d.columns[1].splice(1,1),d.columns[1].push(null===(n=E[0])||void 0===n?void 0:n.setpoint),d.columns[2].splice(1,1),d.columns[2].push(null===(l=E[0])||void 0===l?void 0:l.roomtemp),d.columns[3].splice(1,1),d.columns[3].push(null===(a=E[0])||void 0===a?void 0:a.fanspeed),d.columns[4].splice(1,1),d.columns[4].push(null===(o=E[0])||void 0===o?void 0:o.horizontalvans),d.columns[5].splice(1,1),d.columns[5].push(null===(i=E[0])||void 0===i?void 0:i.usermode),d.columns[6].splice(1,1),d.columns[6].push(null===(r=E[0])||void 0===r?void 0:r.verticalvans),d.columns[7].splice(1,1),d.columns[7].push(null===(u=E[0])||void 0===u?void 0:u.wifiSignal),(y.getTime()-d.columns[0][2].getTime())/6e4>g&&d.columns[0].splice(1,1),h.x.tick.values[0]<d.columns[0][1]&&(h.x.tick.values.splice(0,1),v.x.lines.splice(0,1)),h.x.tick.values[2]&&h.x.tick.values[1].getTime()&&h.x.tick.values[2].getTime()-h.x.tick.values[1].getTime()<y.getTime()-h.x.tick.values[h.x.tick.values.length-1]&&(y.setSeconds(0),g>10&&y.setMinutes(y.getMinutes()-y.getMinutes()%5),h.x.tick.values.push(y),v.x.lines.push({value:y,class:"grid4"})),f=null===y||void 0===y?void 0:y.toLocaleString(),this.setState({grid:v,axis1:h,graphData:d,lastUpdatedAt:f})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.graphData,v=c.lastUpdatedAt,n?(f=Object(),[4,Object(i.x)(n,l)]):[3,3];case 1:return f=m.sent(),this.setState({Moncon:f}),[4,Object(s.e)(f.topic,a,o,h.columns.length>1)];case 2:return g=m.sent(),b=["setpoint"],E=["mode"],y=["fanspeed"],w=["horizontalvans"],D=["verticalvans"],k=["wifiSignal"],N=["x"],(x=["roomtemp"]).push(null),b.push(null),y.push(null),w.push(null),E.push(null),D.push(null),k.push(null),N.push(new Date(a)),g.length>0&&g.forEach(function(e){e&&(1!=isNaN(e.roomtemp)&&x.push(e.roomtemp),1!=isNaN(e.setpoint)&&b.push(e.setpoint),e.fanspeed?y.push(e.fanspeed):y.push("undefined"),e.horizontalvans?w.push(e.horizontalvans):w.push("undefined"),e.usermode?E.push(e.usermode):E.push("undefined"),e.verticalvans?D.push(e.verticalvans):D.push("undefined"),e.wifiSignal?k.push(e.wifiSignal):k.push("undefined"),N.push(new Date(e.timestamp)))}),v=g.length>0?null===(e=N[N.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",x.push(null),b.push(null),y.push(null),w.push(null),E.push(null),D.push(null),k.push(null),N.push(new Date(o)),h={x:"x",columns:[N,b,x,y,w,E,D,k]},d.y.label="\xb0F",S=Object(r.a)(5,a,o),_="",S.length>1?(F=((new Date).getTime()-S[0].getTime())/1e3,_=(F/=3600)>24?"%m-%d %H:%M":F<.3?"%H:%M:%S":"%H:%M"):_="%H:%M:%S",p.x.lines=[],S.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,20,40,60,80,100],d.y.max=100,d.y.min=0,d.x.tick.format=_,d.x.tick.values=S,this.setState({grid:p,axis1:d,graphData:h,loading:!1,lastUpdatedAt:v},function(){setInterval(function(){L.liveGraph()},u)}),[3,4];case 3:this.setState({loading:!1},function(){setInterval(function(){L.liveGraph()},u)}),m.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.axis1,s=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,c=this.props,p=c.instance,d=c.buildingName,m=c.space,h=c.floor,v=c.zone;return l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=p+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",m," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",h," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",v," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Refrigerator 1",l.createElement("span",{className:"lastUpdated"},"Last: ",r)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:i,grid:s,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(l.Component);t.a=h},2508:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(689),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l;return d(this,void 0,void 0,function(){var a,o,i,r,u,c,p,d,h,v,f;return m(this,function(m){switch(m.label){case 0:return a=this.state,o=a.Moncon,i=a.graphData,r=a.axis1,u=a.grid,c=a.lastUpdatedAt,p=this.props.liveGraphRange,d=new Date,(h=new Date).setMinutes(h.getMinutes()-p),[4,Object(s.h)(o.topic,h,d,!0)];case 1:return v=m.sent(),(f=new Date(null===(e=v[0])||void 0===e?void 0:e.timestamp))>i.columns[0][i.columns[0].length-1]&&(null===(t=v[0])||void 0===t?void 0:t.Normal_Frequency)&&(i.columns[0].splice(1,1),i.columns[0].push(f),i.columns[1].splice(1,1),i.columns[1].push(null===(n=v[0])||void 0===n?void 0:n.Normal_Frequency),i.columns[2].splice(1,1),i.columns[2].push(null===(l=v[0])||void 0===l?void 0:l.Emergency_Frequency),(f.getTime()-i.columns[0][2].getTime())/6e4>p&&i.columns[0].splice(1,1),r.x.tick.values[0]<i.columns[0][1]&&(r.x.tick.values.splice(0,1),u.x.lines.splice(0,1)),r.x.tick.values[2]&&r.x.tick.values[1].getTime()&&r.x.tick.values[2].getTime()-r.x.tick.values[1].getTime()<f.getTime()-r.x.tick.values[r.x.tick.values.length-1]&&(f.setSeconds(0),p>10&&f.setMinutes(f.getMinutes()-f.getMinutes()%5),r.x.tick.values.push(f),u.x.lines.push({value:f,class:"grid4"})),c=null===f||void 0===f?void 0:f.toLocaleString(),this.setState({grid:u,axis1:r,graphData:i,lastUpdatedAt:c})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.graphData,v=c.lastUpdatedAt,n?(f=Object(),[4,Object(i.x)(n,l)]):[3,3];case 1:return f=m.sent(),this.setState({Moncon:f}),[4,Object(s.h)(f.topic,a,o,h.columns.length>1)];case 2:g=m.sent(),x=["Emergency Freq"],E=["x"],(b=["Normal Freq"]).push(null),x.push(null),E.push(new Date(a)),g.length>0&&g.forEach(function(e){e&&(b.push(e.Normal_Frequency),x.push(e.Emergency_Frequency),E.push(new Date(e.timestamp)))}),v=g.length>0?null===(e=E[E.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",b.push(null),x.push(null),E.push(new Date(o)),h={x:"x",xFormat:"%Y-%m-%dT%H:%M:%S.%LZ",columns:[E,b,x]},d.y.label="Hz",y=Object(r.a)(5,a,o),w="",y.length>1?(D=((new Date).getTime()-y[0].getTime())/1e3,w=(D/=3600)>24?"%m-%d %H:%M":D<.3?"%H:%M:%S":"%H:%M"):w="%H:%M:%S",p.x.lines=[],y.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,20,40,60,80],d.y.max=80,d.y.min=0,d.x.tick.format=w,d.x.tick.values=y,this.setState({grid:p,axis1:d,graphData:h,loading:!1,lastUpdatedAt:v},function(){setInterval(function(){k.liveGraph()},u)}),m.label=3;case 3:return this.setState({loading:!1},function(){setInterval(function(){k.liveGraph()},u)}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.axis1,s=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,c=this.props,p=c.instance,d=c.buildingName,m=c.space,h=c.floor,v=c.zone;return l.createElement(l.Fragment,null,l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=p+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",m," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",h," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",v," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","ATS Device",l.createElement("span",{className:"lastUpdated"},"Last: ",r)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:i,grid:s,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})))},t}(l.Component);t.a=h},2509:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(689),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u,c,p,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P,U,V,H,z,W,B,Z;return d(this,void 0,void 0,function(){var d,K,J,Y,Q,X,$,ee,te,ne,le,ae,oe,ie,se,re;return m(this,function(m){switch(m.label){case 0:return d=this.state,K=d.Moncon,J=d.graphData,Y=d.graphData2,Q=d.graphData3,X=d.graphData4,$=d.graphData5,ee=d.graphData6,te=d.axis1,ne=d.grid,le=d.lastUpdatedAt,ae=this.props.liveGraphRange,oe=new Date,(ie=new Date).setMinutes(ie.getMinutes()-ae),[4,Object(s.k)(K.topic,ie,oe,!0)];case 1:return se=m.sent(),(re=new Date(null===(e=se[0])||void 0===e?void 0:e.timestamp))>J.columns[0][J.columns[0].length-1]&&(null===(t=se[0])||void 0===t?void 0:t.GenVAB_Volts)&&(J.columns[0].splice(1,1),J.columns[0].push(re),J.columns[1].splice(1,1),J.columns[1].push(null===(n=se[0])||void 0===n?void 0:n.GenVAB_Volts),J.columns[2].splice(1,1),J.columns[2].push(null===(l=se[0])||void 0===l?void 0:l.GenVBC_Volts),J.columns[3].splice(1,1),J.columns[3].push(null===(a=se[0])||void 0===a?void 0:a.GenVCA_Volts),J.columns[1].splice(1,1),J.columns[1].push(null===(o=se[0])||void 0===o?void 0:o.GenVAN_Volts),J.columns[2].splice(1,1),J.columns[2].push(null===(i=se[0])||void 0===i?void 0:i.GenVBN_Volts),J.columns[3].splice(1,1),J.columns[3].push(null===(r=se[0])||void 0===r?void 0:r.GenVCN_Volts),J.columns[4].splice(1,1),J.columns[4].push(null===(u=se[0])||void 0===u?void 0:u.BusVoltage_Volts),Y.columns[1].splice(1,1),Y.columns[1].push(null===(c=se[0])||void 0===c?void 0:c.GenIA_Amps),Y.columns[2].splice(1,1),Y.columns[2].push(null===(p=se[0])||void 0===p?void 0:p.GenIB_Amps),Y.columns[3].splice(1,1),Y.columns[3].push(null===(h=se[0])||void 0===h?void 0:h.GenIC_Amps),Q.columns[1].splice(1,1),Q.columns[1].push(null===(v=se[0])||void 0===v?void 0:v.GenKVA_A_KiloVA),Q.columns[2].splice(1,1),Q.columns[2].push(null===(f=se[0])||void 0===f?void 0:f.GenKVA__B_KiloVA),Q.columns[3].splice(1,1),Q.columns[3].push(null===(g=se[0])||void 0===g?void 0:g.GenKVA_C_KiloVA),Q.columns[4].splice(1,1),Q.columns[4].push(null===(b=se[0])||void 0===b?void 0:b.GenKVA_Total_KiloVA),Q.columns[5].splice(1,1),Q.columns[5].push(null===(x=se[0])||void 0===x?void 0:x.Gen_A_kW),Q.columns[6].splice(1,1),Q.columns[6].push(null===(E=se[0])||void 0===E?void 0:E.Gen_B_kW),Q.columns[7].splice(1,1),Q.columns[7].push(null===(y=se[0])||void 0===y?void 0:y.Gen_C_kW),Q.columns[8].splice(1,1),Q.columns[8].push(null===(w=se[0])||void 0===w?void 0:w.Gen_Total_kW),X.columns[1].splice(1,1),X.columns[1].push(null===(D=se[0])||void 0===D?void 0:D.GenPFLagging),$.columns[1].splice(1,1),$.columns[1].push(null===(k=se[0])||void 0===k?void 0:k.ActiveSpeedSource),$.columns[2].splice(1,1),$.columns[2].push(null===(N=se[0])||void 0===N?void 0:N.EngineSpeed_rpm),$.columns[3].splice(1,1),$.columns[3].push(null===(S=se[0])||void 0===S?void 0:S.EngineLoad_pct),$.columns[4].splice(1,1),$.columns[4].push(null===(_=se[0])||void 0===_?void 0:_.CoolantTemp_F),$.columns[5].splice(1,1),$.columns[5].push(null===(F=se[0])||void 0===F?void 0:F.OilPressure_psi),$.columns[6].splice(1,1),$.columns[6].push(null===(L=se[0])||void 0===L?void 0:L.BatteryVoltage_DeciVolt),$.columns[7].splice(1,1),$.columns[7].push(null===(O=se[0])||void 0===O?void 0:O.FuelLevel),$.columns[8].splice(1,1),$.columns[8].push(null===(A=se[0])||void 0===A?void 0:A.ECUCoolantLevel),$.columns[9].splice(1,1),$.columns[9].push(null===(M=se[0])||void 0===M?void 0:M.CoolDownTimeRemaining_mins),ee.columns[1].splice(1,1),ee.columns[1].push(null===(C=se[0])||void 0===C?void 0:C.UnexpectedShutdown),ee.columns[2].splice(1,1),ee.columns[2].push(null===(j=se[0])||void 0===j?void 0:j.GlobalAlarm),ee.columns[3].splice(1,1),ee.columns[3].push(null===(G=se[0])||void 0===G?void 0:G.AutoRestartFailure),ee.columns[4].splice(1,1),ee.columns[4].push(null===(R=se[0])||void 0===R?void 0:R.FuelLeakDetect),ee.columns[5].splice(1,1),ee.columns[5].push(null===(T=se[0])||void 0===T?void 0:T.BatteryChargerFailure),ee.columns[6].splice(1,1),ee.columns[6].push(null===(q=se[0])||void 0===q?void 0:q.TransferFail),ee.columns[7].splice(1,1),ee.columns[7].push(null===(I=se[0])||void 0===I?void 0:I.LowCoolantLevel),ee.columns[8].splice(1,1),ee.columns[8].push(null===(P=se[0])||void 0===P?void 0:P.ECUShutdown),ee.columns[9].splice(1,1),ee.columns[9].push(null===(U=se[0])||void 0===U?void 0:U.EmergencyShutdown),ee.columns[10].splice(1,1),ee.columns[10].push(null===(V=se[0])||void 0===V?void 0:V.Overcrank),ee.columns[11].splice(1,1),ee.columns[11].push(null===(H=se[0])||void 0===H?void 0:H.LossofECUComms),ee.columns[12].splice(1,1),ee.columns[12].push(null===(z=se[0])||void 0===z?void 0:z.GlobalSenderFail),ee.columns[13].splice(1,1),ee.columns[13].push(null===(W=se[0])||void 0===W?void 0:W.LowFuelLevel),ee.columns[14].splice(1,1),ee.columns[14].push(null===(B=se[0])||void 0===B?void 0:B.LowOilPressure),ee.columns[15].splice(1,1),ee.columns[15].push(null===(Z=se[0])||void 0===Z?void 0:Z.HighCoolantTemp),(re.getTime()-J.columns[0][2].getTime())/6e4>ae&&J.columns[0].splice(1,1),te.x.tick.values[0]<J.columns[0][1]&&(te.x.tick.values.splice(0,1),ne.x.lines.splice(0,1)),te.x.tick.values[2]&&te.x.tick.values[1].getTime()&&te.x.tick.values[2].getTime()-te.x.tick.values[1].getTime()<re.getTime()-te.x.tick.values[te.x.tick.values.length-1]&&(re.setSeconds(0),ae>10&&re.setMinutes(re.getMinutes()-re.getMinutes()%5),te.x.tick.values.push(re),ne.x.lines.push({value:re,class:"grid4"})),this.setState({grid:ne,axis1:te,graphData:J,graphData2:Y,graphData3:Q,graphData4:X,graphData5:$,graphData6:ee,lastUpdatedAt:le})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P,U,V,H,z,W,B,Z,K,J,Y,Q,X,$,ee,te,ne,le,ae,oe,ie,se,re,ue,ce,pe,de,me,he,ve,fe,ge,be,xe,Ee,ye=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.axis2,v=c.axis3,f=c.axis4,g=c.axis5,b=c.axis6,x=c.graphData,E=c.graphData2,y=c.graphData3,w=c.graphData4,D=c.graphData5,k=c.graphData6,N=c.lastUpdatedAt,n?(S=Object(),[4,Object(i.x)(n,l)]):[3,3];case 1:return S=m.sent(),this.setState({Moncon:S}),[4,Object(s.k)(S.topic,a,o,x.columns.length>1)];case 2:_=m.sent(),L=["VBC"],O=["VCA"],A=["VA"],M=["VB"],C=["VC"],j=["Bus Voltage"],G=["Gen IA"],R=["Gen IB"],T=["Gen IC"],q=["Gen kVA A"],I=["Gen kVA B"],P=["Gen kVA C"],U=["Gen kVA Total"],V=["Gen kW A"],H=["Gen kW B"],z=["Gen kW C"],W=["Gen kW Total"],B=["Gen Power Factor"],Z=["Act speed"],K=["Engine Speed"],J=["Engine Load"],Y=["Coolant Temp"],Q=["Oil Press"],X=["Battery Volt"],$=["Fuel Level"],ee=["ECU Coolant level"],te=["Cool Down Time Rem."],ne=["Unexp. Shutdown"],le=["Global Alarm"],ae=["Auto Restart Fail"],oe=["Fuel Leak Det."],ie=["Battery Chg. Fail"],se=["Transfer Fail"],re=["Low Coolant level"],ue=["ECU Shutdown"],ce=["Emerg. Shut"],pe=["Overcrank"],de=["Loss of ECU Comms"],me=["Global Sender Fail"],he=["Low Fuel Level"],ve=["Low Oil Press"],fe=["High Coolant"],ge=["x"],(F=["VAB"]).push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(null),I.push(null),P.push(null),U.push(null),V.push(null),H.push(null),z.push(null),W.push(null),B.push(null),Z.push(null),K.push(null),J.push(null),Y.push(null),Q.push(null),X.push(null),$.push(null),ee.push(null),te.push(null),ne.push(null),le.push(null),ae.push(null),oe.push(null),ie.push(null),se.push(null),re.push(null),ue.push(null),ce.push(null),pe.push(null),de.push(null),me.push(null),he.push(null),ve.push(null),fe.push(null),ge.push(new Date(a)),_.length>0&&_.forEach(function(e){e&&(F.push(e.GenVAB_Volts),L.push(e.GenVBC_Volts),O.push(e.GenVCA_Volts),A.push(e.GenVAN_Volts),M.push(e.GenVBN_Volts),C.push(e.GenVCN_Volts),j.push(e.BusVoltage_Volts),G.push(e.GenIA_Amps),R.push(e.GenIB_Amps),T.push(e.GenIC_Amps),q.push(e.GenKVA_A_KiloVA),I.push(e.GenKVA__B_KiloVA),P.push(e.GenKVA_C_KiloVA),U.push(e.GenKVA_Total_KiloVA),V.push(e.Gen_A_kW),H.push(e.Gen_B_kW),z.push(e.Gen_C_kW),W.push(e.Gen_Total_kW),B.push(e.GenPFLagging),Z.push(e.ActiveSpeedSource),K.push(e.EngineSpeed_rpm),J.push(e.EngineLoad_pct),Y.push(e.CoolantTemp_F),Q.push(e.OilPressure_psi),X.push(e.BatteryVoltage_DeciVolt),$.push(e.FuelLevel),ee.push(e.ECUCoolantLevel),te.push(e.CoolDownTimeRemaining_mins),ne.push(e.UnexpectedShutdown),le.push(e.GlobalAlarm),ae.push(e.AutoRestartFailure),oe.push(e.FuelLeakDetect),ie.push(e.BatteryChargerFailure),se.push(e.TransferFail),re.push(e.LowCoolantLevel),ue.push(e.ECUShutdown),ce.push(e.EmergencyShutdown),pe.push(e.Overcrank),de.push(e.LossofECUComms),me.push(e.GlobalSenderFail),he.push(e.LowFuelLevel),ve.push(e.LowOilPressure),fe.push(e.HighCoolantTemp),ge.push(new Date(e.timestamp)))}),N=_.length>0?null===(e=ge[ge.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(null),I.push(null),P.push(null),U.push(null),V.push(null),H.push(null),z.push(null),W.push(null),B.push(null),Z.push(null),K.push(null),J.push(null),Y.push(null),Q.push(null),X.push(null),$.push(null),ee.push(null),te.push(null),ne.push(null),le.push(null),ae.push(null),oe.push(null),ie.push(null),se.push(null),re.push(null),ue.push(null),ce.push(null),pe.push(null),de.push(null),me.push(null),he.push(null),ve.push(null),fe.push(null),ge.push(new Date(o)),x={x:"x",columns:[ge,F,L,O,A,M,C,j]},E={x:"x",columns:[ge,G,R,T]},y={x:"x",columns:[ge,q,I,P,U,V,H,z,W]},w={x:"x",columns:[ge,B]},D={x:"x",columns:[ge,Z,K,J,Y,Q,X,$,ee,te]},k={x:"x",columns:[ge,ne,le,ae,oe,ie,se,re,ue,ce,pe,de,me,he,ve,fe]},d.y.label="Volts",h.y.label="Amps",v.y.label="Watts",f.y.label="",g.y.label="",b.y.label="",ge.length>1&&(be=Object(r.a)(5,a,o),xe="",be.length>1?(Ee=((new Date).getTime()-be[0].getTime())/1e3,xe=(Ee/=3600)>24?"%m-%d %H:%M":Ee<.3?"%H:%M:%S":"%H:%M"):xe="%H:%M:%S",p.x.lines=[],be.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},v.y.tick.format=function(e){return parseFloat(e).toFixed(1)},f.y.tick.format=function(e){return parseFloat(e).toFixed(0)},g.y.tick.format=function(e){return parseFloat(e).toFixed(0)},b.y.tick.format=function(e){return parseFloat(e).toFixed(0)},d.y.tick.values=[0,50,100,150,200,250],h.y.tick.values=[0,10,20,30,40,50],v.y.tick.values=[0,20,40,60,80,100],f.y.tick.values=[-1,0,1],g.y.tick.values=[0,40,80,120,160,160],b.y.tick.values=[-1,0,1],d.y.max=250,d.y.min=0,h.y.max=50,h.y.min=0,v.y.max=100,v.y.min=0,f.y.max=1,f.y.min=-1,g.y.max=160,g.y.min=0,b.y.max=1,b.y.min=-1,d.x.tick.format=xe,h.x.tick.format=xe,v.x.tick.format=xe,f.x.tick.format=xe,g.x.tick.format=xe,b.x.tick.format=xe,d.x.tick.values=be,h.x.tick.values=be,v.x.tick.values=be,f.x.tick.values=be,g.x.tick.values=be,b.x.tick.values=be,this.setState({grid:p,axis1:d,axis2:h,axis3:v,axis4:f,axis5:g,axis6:b,graphData:x,graphData2:E,graphData3:y,graphData4:w,graphData5:D,graphData6:k,lastUpdatedAt:N,loading:!1},function(){setInterval(function(){ye.liveGraph()},u)})),m.label=3;case 3:return this.setState({loading:!1},function(){setInterval(function(){ye.liveGraph()},u)}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.graphData2,s=e.graphData3,r=e.graphData4,u=e.graphData5,c=e.graphData6,p=e.axis1,d=e.axis2,m=e.axis3,h=e.axis4,v=e.axis5,f=e.axis6,g=e.grid,b=e.lastUpdatedAt,x=e.equipmentsLabels,E=this.props,y=E.graphsList,w=E.instance,D=E.buildingName,k=E.space,N=E.floor,S=E.zone;return l.createElement(l.Fragment,null,y.indexOf("Voltages")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Voltages",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:p,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),y.indexOf("Currents")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Currents",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:i,size:{height:300},axis:d,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Powers")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Powers",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:s,size:{height:300},axis:m,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Power Factor")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Power Factor",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:r,size:{height:300},axis:h,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Other Parameters")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Other Parameters",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:u,size:{height:300},axis:v,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Binary Parameters")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Binary Parameters",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:c,size:{height:300},axis:f,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(l.Component);t.a=h},2510:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(689),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u,c,p,h,v,f,g,b,x,E;return d(this,void 0,void 0,function(){var d,y,w,D,k,N,S,_,F,L,O,A;return m(this,function(m){switch(m.label){case 0:return d=this.state,y=d.Moncon,w=d.graphData,D=d.graphData2,k=d.axis1,N=d.grid,S=d.lastUpdatedAt,_=this.props.liveGraphRange,F=new Date,(L=new Date).setMinutes(L.getMinutes()-_),[4,Object(s.i)(y.topic,L,F,!0)];case 1:return O=m.sent(),(A=new Date(null===(e=O[0])||void 0===e?void 0:e.timestamp))>w.columns[0][w.columns[0].length-1]&&(null===(t=O[0])||void 0===t?void 0:t.vin)&&(w.columns[0].splice(1,1),w.columns[0].push(A),w.columns[1].splice(1,1),w.columns[1].push(null===(n=O[0])||void 0===n?void 0:n.vin),w.columns[2].splice(1,1),w.columns[2].push(null===(l=O[0])||void 0===l?void 0:l.register1),w.columns[3].splice(1,1),w.columns[3].push(null===(a=O[0])||void 0===a?void 0:a.t3frontRefrigerator1),w.columns[4].splice(1,1),w.columns[4].push(null===(o=O[0])||void 0===o?void 0:o.t4backRefrigerator1),w.columns[5].splice(1,1),w.columns[5].push(null===(i=O[0])||void 0===i?void 0:i.t5evapfanRefrigerator1),w.columns[6].splice(1,1),w.columns[6].push(null===(r=O[0])||void 0===r?void 0:r.t6comprinRefrigerator1),w.columns[7].splice(1,1),w.columns[7].push(null===(u=O[0])||void 0===u?void 0:u.t7comproutRefrigerator1),w.columns[8].splice(1,1),w.columns[8].push(null===(c=O[0])||void 0===c?void 0:c.t8probeRefrigerator1),D.columns[1].splice(1,1),D.columns[1].push(null===(p=O[0])||void 0===p?void 0:p.vin),D.columns[2].splice(1,1),D.columns[2].push(null===(h=O[0])||void 0===h?void 0:h.register1),D.columns[3].splice(1,1),D.columns[3].push(null===(v=O[0])||void 0===v?void 0:v.t3frontRefrigerator2),D.columns[4].splice(1,1),D.columns[4].push(null===(f=O[0])||void 0===f?void 0:f.t4backRefrigerator2),D.columns[5].splice(1,1),D.columns[5].push(null===(g=O[0])||void 0===g?void 0:g.t5evapfanRefrigerator2),D.columns[6].splice(1,1),D.columns[6].push(null===(b=O[0])||void 0===b?void 0:b.t6comprinRefrigerator2),D.columns[7].splice(1,1),D.columns[7].push(null===(x=O[0])||void 0===x?void 0:x.t7comproutRefrigerator2),D.columns[8].splice(1,1),D.columns[8].push(null===(E=O[0])||void 0===E?void 0:E.t8probeRefrigerator2),(A.getTime()-w.columns[0][2].getTime())/6e4>_&&w.columns[0].splice(1,1),k.x.tick.values[0]<w.columns[0][1]&&(k.x.tick.values.splice(0,1),N.x.lines.splice(0,1)),k.x.tick.values[2]&&k.x.tick.values[1].getTime()&&k.x.tick.values[2].getTime()-k.x.tick.values[1].getTime()<A.getTime()-k.x.tick.values[k.x.tick.values.length-1]&&(A.setSeconds(0),_>10&&A.setMinutes(A.getMinutes()-A.getMinutes()%5),k.x.tick.values.push(A),N.x.lines.push({value:A,class:"grid4"})),S=null===A||void 0===A?void 0:A.toLocaleString(),this.setState({grid:N,axis1:k,graphData:w,graphData2:D,lastUpdatedAt:S})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.axis2,v=c.graphData,f=c.graphData2,g=c.lastUpdatedAt,n?(b=Object(),[4,Object(i.x)(n,l)]):[3,3];case 1:return b=m.sent(),this.setState({Moncon:b}),[4,Object(s.i)(b.topic,a,o,v.columns.length>1)];case 2:x=m.sent(),y=["Register"],w=["Front"],D=["Back"],k=["Evaporator Fan"],N=["Compressor In"],S=["Compressor Out"],_=["Solid"],F=["Front"],L=["Back"],O=["Evaporator Fan"],A=["Compressor In"],M=["Compressor Out"],C=["Solid"],j=["x"],(E=["Vin"]).push(null),y.push(null),w.push(null),D.push(null),k.push(null),N.push(null),S.push(null),_.push(null),F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(new Date(a)),x.length>0&&x.forEach(function(e){e&&(E.push(""+e.vin),y.push(""+e.register1),w.push(""+e.t3frontRefrigerator1),D.push(""+e.t4backRefrigerator1),k.push(""+e.t5evapfanRefrigerator1),N.push(""+e.t6comprinRefrigerator1),S.push(""+e.t7comproutRefrigerator1),_.push(""+e.t8probeRefrigerator1),F.push(""+e.t3frontRefrigerator2),L.push(""+e.t4backRefrigerator2),O.push(""+e.t5evapfanRefrigerator2),A.push(""+e.t6comprinRefrigerator2),M.push(""+e.t7comproutRefrigerator2),C.push(""+e.t8probeRefrigerator2),j.push(new Date(e.timestamp)))}),g=x.length>0?null===(e=j[j.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",E.push(null),y.push(null),w.push(null),D.push(null),k.push(null),N.push(null),S.push(null),_.push(null),F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(new Date(o)),v={x:"x",columns:[j,E,y,w,D,k,N,S,_]},f={x:"x",columns:[j,E,y,F,L,O,A,M,C]},d.y.label="Amps",h.y.label="Amps",j.length>1&&(G=Object(r.a)(5,a,o),R="",G.length>1?(T=((new Date).getTime()-G[0].getTime())/1e3,R=(T/=3600)>24?"%m-%d %H:%M":T<.3?"%H:%M:%S":"%H:%M"):R="%H:%M:%S",p.x.lines=[],G.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,20,40,60,80,100],h.y.tick.values=[0,20,40,60,80,100],d.y.max=100,d.y.min=0,h.y.max=100,h.y.min=0,d.x.tick.format=R,h.x.tick.format=R,d.x.tick.values=G,h.x.tick.values=G,this.setState({grid:p,axis1:d,axis2:h,graphData:v,graphData2:f,lastUpdatedAt:g,loading:!1},function(){setInterval(function(){q.liveGraph()},u)})),m.label=3;case 3:return this.setState({loading:!1},function(){setInterval(function(){q.liveGraph()},u)}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.graphData2,s=e.axis1,r=e.axis2,u=e.grid,c=e.lastUpdatedAt,p=e.equipmentsLabels,d=this.props,m=d.graphsList,h=d.instance,v=d.buildingName,f=d.space,g=d.floor,b=d.zone;return l.createElement(l.Fragment,null,m.indexOf("Refrigerator 1")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=h+"/"+v+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",f," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",g," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",b," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===p||void 0===p?void 0:p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Refrigerator 1",l.createElement("span",{className:"lastUpdated"},"Last: ",c)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:s,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),m.indexOf("Refrigerator 2")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=h+"/"+v+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",f," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",g," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",b," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Refrigerator 2",l.createElement("span",{className:"lastUpdated"},"Last: ",c)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:i,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(l.Component);t.a=h},2511:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(689),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u,c,p;return d(this,void 0,void 0,function(){var d,h,v,f,g,b,x,E,y,w,D,k;return m(this,function(m){switch(m.label){case 0:return d=this.state,h=d.Moncon,v=d.graphData,f=d.graphData2,g=d.axis1,b=d.grid,x=d.lastUpdatedAt,E=this.props.liveGraphRange,y=new Date,(w=new Date).setMinutes(w.getMinutes()-E),[4,Object(s.j)(h.topic,w,y,!0)];case 1:return D=m.sent(),k=new Date(null===(e=D[0])||void 0===e?void 0:e.timestamp),(null===(t=v.columns)||void 0===t?void 0:t.length)>2&&k>v.columns[0][v.columns[0].length-1]&&(null===(n=D[0])||void 0===n?void 0:n.vin)&&(v.columns[0].splice(1,1),v.columns[0].push(k),v.columns[1].splice(1,1),v.columns[1].push(null===(l=D[0])||void 0===l?void 0:l.a13comprcurrRefrigerator1),v.columns[2].splice(1,1),v.columns[2].push(null===(a=D[0])||void 0===a?void 0:a.a14efmcurrRefrigerator1),v.columns[3].splice(1,1),v.columns[3].push(null===(o=D[0])||void 0===o?void 0:o.a15prRefrigerator1),v.columns[4].splice(1,1),v.columns[4].push(null===(i=D[0])||void 0===i?void 0:i.a16doorRefrigerator1),f.columns[1].splice(1,1),f.columns[1].push(null===(r=D[0])||void 0===r?void 0:r.a13comprcurrRefrigerator2),f.columns[2].splice(1,1),f.columns[2].push(null===(u=D[0])||void 0===u?void 0:u.a14efmcurrRefrigerator2),f.columns[3].splice(1,1),f.columns[3].push(null===(c=D[0])||void 0===c?void 0:c.a15prRefrigerator2),f.columns[4].splice(1,1),f.columns[4].push(null===(p=D[0])||void 0===p?void 0:p.a16doorRefrigerator2),(k.getTime()-v.columns[0][2].getTime())/6e4>E&&v.columns[0].splice(1,1),g.x.tick.values[0]<v.columns[0][1]&&(g.x.tick.values.splice(0,1),b.x.lines.splice(0,1)),g.x.tick.values[2]&&g.x.tick.values[1].getTime()&&g.x.tick.values[2].getTime()-g.x.tick.values[1].getTime()<k.getTime()-g.x.tick.values[g.x.tick.values.length-1]&&(k.setSeconds(0),E>10&&k.setMinutes(k.getMinutes()-k.getMinutes()%5),g.x.tick.values.push(k),b.x.lines.push({value:k,class:"grid4"})),x=null===k||void 0===k?void 0:k.toLocaleString(),this.setState({grid:b,axis1:g,graphData:v,graphData2:f,lastUpdatedAt:x})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P,U,V=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.axis2,v=c.axis3,f=c.graphData,g=c.graphData2,b=c.graphData3,x=c.lastUpdatedAt,n?(E=Object(),[4,Object(i.x)(n,l)]):[3,3];case 1:return E=m.sent(),this.setState({Moncon:E}),[4,Object(s.j)(E.topic,a,o,f.columns.length>1)];case 2:return y=m.sent(),D=["Freezer Defrost"],k=["Pressure Sensor"],N=["Door Contact"],S=["Analog Input 5"],_=["Analog Input 6"],F=["Analog Input 7"],L=["Analog Input 8"],O=["Register"],A=["Serial Number"],M=["Refresh"],C=["Power Analog Input 5"],j=["Power Analog Input 6"],G=["Power Analog Input 7"],R=["Power Analog Input 8"],T=["Amalgamated Watts"],q=["x"],(w=["Compressor"]).push(null),D.push(null),k.push(null),N.push(null),S.push(null),_.push(null),F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(new Date(a)),y.length>0&&y.forEach(function(e){e&&(e.a13comprcurrRefrigerator1&&w.push(""+e.a13comprcurrRefrigerator1),e.a14efmcurrRefrigerator1&&D.push(""+e.a14efmcurrRefrigerator1),e.a15prRefrigerator1&&k.push(""+e.a15prRefrigerator1),e.a16doorRefrigerator1&&N.push(""+e.a16doorRefrigerator1),e.a13comprcurrRefrigerator2&&S.push(""+e.a13comprcurrRefrigerator2),e.a14efmcurrRefrigerator2&&_.push(""+e.a14efmcurrRefrigerator2),e.a15prRefrigerator2&&F.push(""+e.a15prRefrigerator2),e.a16doorRefrigerator2&&L.push(""+e.a16doorRefrigerator2),e.register1&&O.push(""+e.register1),e.serialNumber&&A.push(""+e.serialNumber),e.minRecRefresh&&M.push(""+e.minRecRefresh),e.poweranalogInput5&&C.push(""+e.poweranalogInput5),e.poweranalogInput6&&C.push(""+e.poweranalogInput6),e.poweranalogInput7&&C.push(""+e.poweranalogInput7),e.poweranalogInput8&&C.push(""+e.poweranalogInput8),T.push(""+360*e.a13comprcurrRefrigerator1),q.push(new Date(e.timestamp)))}),x=y.length>0?null===(e=q[q.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",w.push(null),D.push(null),k.push(null),N.push(null),S.push(null),_.push(null),F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(new Date(o)),(w.length>3||D.length>3||k.length>3||N.length>3)&&(f={x:"x",columns:[q,w,D,k,N]}),(S.length>3||_.length>3||F.length>3||L.length>3)&&(g={x:"x",columns:[q,S,_,F,L]}),(C.length>3||j.length>3||G.length>3||R.length>3)&&(b={x:"x",columns:[q,C,j,G,R]},v.y.label="kw"),d.y.label="Amps",h.y.label="Amps",q.length>1&&(I=Object(r.a)(5,a,o),P="",I.length>1?(U=((new Date).getTime()-I[0].getTime())/1e3,P=(U/=3600)>24?"%m-%d %H:%M":U<.3?"%H:%M:%S":"%H:%M"):P="%H:%M:%S",p.x.lines=[],I.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},v.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[-10,-5,0,5,10],h.y.tick.values=[-10,-5,0,5,10],v.y.tick.values=[0,20,40,60,80,100],d.y.max=10,d.y.min=-10,h.y.max=10,h.y.min=-10,v.y.max=100,v.y.min=0,d.x.tick.format=P,h.x.tick.format=P,v.x.tick.format=P,d.x.tick.values=I,h.x.tick.values=I,v.x.tick.values=I,this.setState({grid:p,axis1:d,axis2:h,axis3:v,graphData:f,graphData2:g,graphData3:b,lastUpdatedAt:x,loading:!1},function(){setInterval(function(){V.liveGraph()},u)})),[3,4];case 3:this.setState({loading:!1},function(){setInterval(function(){V.liveGraph()},u)}),m.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,n,a=this.state,i=a.Moncon,s=a.loading,r=a.graphData,u=a.graphData2,c=a.graphData3,p=a.axis1,d=a.axis2,m=a.axis3,h=a.grid,v=a.lastUpdatedAt,f=a.equipmentsLabels,g=this.props,b=g.graphsList,x=g.instance,E=g.buildingName,y=g.space,w=g.floor,D=g.zone;return l.createElement(l.Fragment,null,b.indexOf("Refrigerator 1")>-1&&(null===(e=r.columns[1])||void 0===e?void 0:e.length)>2&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=x+"/"+E+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===i||void 0===i?void 0:i.deviceName)}},null===i||void 0===i?void 0:i.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",y," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",w," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",D," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===f||void 0===f?void 0:f.map(function(e,t){return e.rdfsLabel+(t<f.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===i||void 0===i?void 0:i.rdfsLabel," "))," ","Refrigerator 1",l.createElement("span",{className:"lastUpdated"},"Last: ",v)),s?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:r,size:{height:300},axis:p,grid:h,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),b.indexOf("Refrigerator 2")>-1&&(null===(t=u.columns[1])||void 0===t?void 0:t.length)>2&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=x+"/"+E+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===i||void 0===i?void 0:i.deviceName)}},null===i||void 0===i?void 0:i.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",y," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",w," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",D," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===f||void 0===f?void 0:f.map(function(e,t){return e.rdfsLabel+(t<f.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===i||void 0===i?void 0:i.rdfsLabel," "))," ","Refrigerator 2",l.createElement("span",{className:"lastUpdated"},"Last: ",v)),s?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:u,size:{height:300},axis:d,grid:h,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),b.indexOf("Refrigerator 1")>-1&&b.indexOf("Power Analog Inputs")>-1&&(null===(n=c.columns[1])||void 0===n?void 0:n.length)>2&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center"},l.createElement("a",{onClick:function(){window.location.hash=x+"/"+E+"/Insights/Equipment/Graphs/CBW418/"+(null===i||void 0===i?void 0:i.deviceName)}},null===i||void 0===i?void 0:i.rdfsLabel)," Power Analog Inputs ",l.createElement("span",{className:"lastUpdated"},"Last: ",v)),s?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:c,size:{height:300},axis:m,grid:h,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(l.Component);t.a=h},2512:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(675),r=n(12),u=n(769),c=n(20),p=n(713),d=(n.n(p),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),m=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(c.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return m(this,void 0,void 0,function(){return h(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u,c,p;return m(this,void 0,void 0,function(){var d,m,v,f,g,b,x,E,y,w,D,k,N,S,_,F;return h(this,function(h){switch(h.label){case 0:return d=this.state,m=d.Moncon,v=d.graphData,f=d.axis1,g=d.grid,b=d.lastUpdatedAt,x=this.props.liveGraphRange,E=new Date,(y=new Date).setMinutes(y.getMinutes()-x),[4,Object(s.h)(m.topic,y,E,!0)];case 1:return w=h.sent(),(D=new Date(null===(e=w[0])||void 0===e?void 0:e.timestamp))>v.columns[0][v.columns[0].length-1]&&(null===(t=w[0])||void 0===t?void 0:t.timestamp)&&(v.columns[0].splice(1,1),v.columns[0].push(D),v.columns[1].splice(1,1),v.columns[1].push(null===(n=w[0])||void 0===n?void 0:n.mAmps_relay1),v.columns[2].splice(1,1),v.columns[2].push(null===(l=w[0])||void 0===l?void 0:l.mAmps_relay2),v.columns[3].splice(1,1),v.columns[3].push(null===(a=w[0])||void 0===a?void 0:a.mAmps_relay3),v.columns[4].splice(1,1),v.columns[4].push(null===(o=w[0])||void 0===o?void 0:o.mAmps_relay4),v.columns[5].splice(1,1),v.columns[5].push(null===(i=w[0])||void 0===i?void 0:i.power_Wt_relay1),v.columns[6].splice(1,1),v.columns[6].push(null===(r=w[0])||void 0===r?void 0:r.power_Wt_relay2),v.columns[7].splice(1,1),v.columns[7].push(null===(u=w[0])||void 0===u?void 0:u.power_Wt_relay3),3==(k=Object(s.a)(parseInt(null===(c=w[0])||void 0===c?void 0:c.v4relay_state))).length?k="0"+k:2==k.length?k="00"+k:1==k.length&&(k="000"+k),N=k[3],S=k[2],_=k[1],F=k[0],v.columns[8].splice(1,1),v.columns[8].push(N||"0"),v.columns[9].splice(1,1),v.columns[9].push(S||"0"),v.columns[10].splice(1,1),v.columns[10].push(_||"0"),v.columns[11].splice(1,1),v.columns[11].push(F||"0"),v.columns[12].splice(1,1),v.columns[12].push(null===(p=w[0])||void 0===p?void 0:p.nominal_src_volts),(D.getTime()-v.columns[0][2].getTime())/6e4>x&&v.columns[0].splice(1,1),f.x.tick.values[0]<v.columns[0][1]&&(f.x.tick.values.splice(0,1),g.x.lines.splice(0,1)),f.x.tick.values[2]&&f.x.tick.values[1].getTime()&&f.x.tick.values[2].getTime()-f.x.tick.values[1].getTime()<D.getTime()-f.x.tick.values[f.x.tick.values.length-1]&&(D.setSeconds(0),x>10&&D.setMinutes(D.getMinutes()-D.getMinutes()%5),f.x.tick.values.push(D),g.x.lines.push({value:D,class:"grid4"})),b=null===D||void 0===D?void 0:D.toLocaleString(),this.setState({grid:g,axis1:f,graphData:v,lastUpdatedAt:b})),[2]}})})},t.prototype._fetchData=function(){var e;return m(this,void 0,void 0,function(){var t,n,l,a,o,c,p,d,m,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P,U,V,H,z,W,B=this;return h(this,function(h){switch(h.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,c=t.updateAfterMilliSeconds,p=this.state,d=p.grid,m=p.axis1,v=p.graphData,f=p.lastUpdatedAt,n?(g=Object(),[4,Object(i.x)(n,l)]):[3,4];case 1:return g=h.sent(),this.setState({Moncon:g}),[4,Object(s.h)(g.topic,a,o,v.columns.length>1)];case 2:return b=h.sent(),[4,Object(s.A)(g.deviceName)];case 3:if(x=h.sent(),E=[],x[0]?(y=x[0],w=Object(r.g)(y.relayNames),E=w.split(",")):(E.push("Relay 1"),E.push("Relay 2"),E.push("Relay 3"),E.push("Relay 4")),D=[E[0]+" Amp"],k=[E[1]+" Amp"],N=[E[2]+" Amp"],S=[E[3]+" Amp"],_=["Nom. Source Volts"],F=[E[0]+" Watts"],L=[E[1]+" Watts"],O=[E[2]+" Watts"],A=[E[0]+" State"],M=[E[1]+" State"],C=[E[2]+" State"],j=[E[3]+" State"],G=["x"],D.push(null),k.push(null),N.push(null),S.push(null),_.push(null),F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(new Date(a)),b.length>0)for(R=0;R<b.length;R++)(null===(T=b[R])||void 0===T?void 0:T.mAmps_relay1)&&(D.push(T.mAmps_relay1),k.push(T.mAmps_relay2),N.push(T.mAmps_relay3),S.push(T.mAmps_relay4),_.push(T.nominal_src_volts),F.push(T.power_Wt_relay1),L.push(T.power_Wt_relay2),O.push(T.power_Wt_relay3),q=Object(s.a)(parseInt(T.v4relay_state)),G.push(new Date(T.timestamp)),3==q.length?q="0"+q:2==q.length?q="00"+q:1==q.length&&(q="000"+q),I=q[3],P=q[2],U=q[1],V=q[0],A.push(I||"0"),M.push(P||"0"),C.push(U||"0"),j.push(V||"0"));return f=b.length>0?null===(e=G[G.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",D.push(null),k.push(null),N.push(null),S.push(null),_.push(null),F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(new Date(o)),v={x:"x",columns:[G,D,k,N,S,F,L,O,A,M,C,j,_]},m.y.label="Amp, W, On/Off, Volts",H=Object(u.a)(5,a,o),z="",H.length>1?(W=((new Date).getTime()-H[0].getTime())/1e3,z=(W/=3600)>24?"%m-%d %H:%M":W<.3?"%H:%M:%S":"%H:%M"):z="%H:%M:%S",d.x.lines=[],H.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),m.y.tick.format=function(e){return parseFloat(e).toFixed(0)},m.y.tick.values=[0,50,100,150,200,250,300],m.y.max=300,m.y.min=0,m.x.tick.format=z,m.x.tick.values=H,this.setState({grid:d,axis1:m,graphData:v,loading:!1,lastUpdatedAt:f},function(){setInterval(function(){B.liveGraph()},c)}),[3,5];case 4:this.setState({loading:!1},function(){setInterval(function(){B.liveGraph()},c)}),h.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.axis1,s=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,c=this.props,p=c.instance,d=c.buildingName,m=c.space,h=c.floor,v=c.zone;return l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=p+"/"+d+"/Insights/Equipment/Graphs/RelayControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",m," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",h," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",v," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),l.createElement("span",{className:"lastUpdated"},"Last: ",r)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:i,grid:s,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(l.Component);t.a=v},2513:function(e,t,n){"use strict";var l=n(2),a=(n.n(l),n(726)),o=n.n(a),i=n(668),s=n(689),r=n(769),u=n(20),c=n(713),p=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}()),d=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))(function(a,o){function i(e){try{r(l.next(e))}catch(e){o(e)}}function s(e){try{r(l.throw(e))}catch(e){o(e)}}function r(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}r((l=l.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,l,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,l&&(a=2&o[0]?l.return:o[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,o[1])).done)return a;switch(l=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,l=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],l=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},n._fetchData=n._fetchData.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=t.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){return[2]})})},t.prototype.liveGraph=function(){var e,t,n,l,a,o,i,r,u,c,p,h,v,f,g;return d(this,void 0,void 0,function(){var d,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M;return m(this,function(m){switch(m.label){case 0:return d=this.state,b=d.Moncon,x=d.graphData,E=d.graphData2,y=d.graphData3,w=d.graphData4,D=d.graphData5,k=d.graphData6,N=d.axis1,S=d.grid,_=d.lastUpdatedAt,F=this.props.liveGraphRange,L=new Date,(O=new Date).setMinutes(O.getMinutes()-F),[4,Object(s.l)(b.topic,O,L,!0)];case 1:return A=m.sent(),(M=new Date(null===(e=A[0])||void 0===e?void 0:e.timestamp))>x.columns[0][x.columns[0].length-1]&&(null===(t=A[0])||void 0===t?void 0:t.timestamp)&&(x.columns[0].splice(1,1),x.columns[0].push(M),x.columns[1].splice(1,1),x.columns[1].push(null===(n=A[0])||void 0===n?void 0:n.PowerA),x.columns[2].splice(1,1),x.columns[2].push(null===(l=A[0])||void 0===l?void 0:l.PowerB),x.columns[3].splice(1,1),x.columns[3].push(null===(a=A[0])||void 0===a?void 0:a.PowerC),x.columns[4].splice(1,1),x.columns[4].push(null===(o=A[0])||void 0===o?void 0:o.PowerSum),E.columns[1].splice(1,1),E.columns[1].push(null===(i=A[0])||void 0===i?void 0:i.VoltAB),E.columns[2].splice(1,1),E.columns[2].push(null===(r=A[0])||void 0===r?void 0:r.VoltAC),E.columns[3].splice(1,1),E.columns[3].push(null===(u=A[0])||void 0===u?void 0:u.VoltBC),y.columns[1].splice(1,1),y.columns[1].push(null===(c=A[0])||void 0===c?void 0:c.VoltA),y.columns[2].splice(1,1),y.columns[2].push(null===(p=A[0])||void 0===p?void 0:p.VoltB),y.columns[3].splice(1,1),y.columns[3].push(null===(h=A[0])||void 0===h?void 0:h.VoltC),w.columns[1].splice(1,1),w.columns[1].push(null===(v=A[0])||void 0===v?void 0:v.Freq),D.columns[1].splice(1,1),D.columns[1].push(parseFloat(null===(f=A[0])||void 0===f?void 0:f.EnergySumNR)),k.columns[1].splice(1,1),k.columns[1].push(parseFloat(null===(g=A[0])||void 0===g?void 0:g.EnergyPosSumNR)),(M.getTime()-x.columns[0][2].getTime())/6e4>F&&x.columns[0].splice(1,1),N.x.tick.values[0]<x.columns[0][1]&&(N.x.tick.values.splice(0,1),S.x.lines.splice(0,1)),N.x.tick.values[2]&&N.x.tick.values[1].getTime()&&N.x.tick.values[2].getTime()-N.x.tick.values[1].getTime()<M.getTime()-N.x.tick.values[N.x.tick.values.length-1]&&(M.setSeconds(0),F>10&&M.setMinutes(M.getMinutes()-M.getMinutes()%5),N.x.tick.values.push(M),S.x.lines.push({value:M,class:"grid4"})),_=null===M||void 0===M?void 0:M.toLocaleString(),this.setState({grid:S,axis1:N,graphData:x,graphData2:E,graphData3:y,graphData4:w,graphData5:D,graphData6:k,lastUpdatedAt:_})),[2]}})})},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,n,l,a,o,u,c,p,d,h,v,f,g,b,x,E,y,w,D,k,N,S,_,F,L,O,A,M,C,j,G,R,T,q,I,P,U,V,H,z,W,B,Z,K=this;return m(this,function(m){switch(m.label){case 0:return t=this.props,n=t.InsightName,l=t.buildingName,a=t.from,o=t.to,u=t.updateAfterMilliSeconds,c=this.state,p=c.grid,d=c.axis1,h=c.axis2,v=c.axis3,f=c.axis4,g=c.axis5,b=c.axis6,x=c.graphData,E=c.graphData2,y=c.graphData3,w=c.graphData4,D=c.graphData5,k=c.graphData6,N=c.lastUpdatedAt,n?(S=Object(),[4,Object(i.x)(n,l)]):[3,3];case 1:return S=m.sent(),this.setState({Moncon:S}),[4,Object(s.l)(S.topic,a,o,x.columns.length>1)];case 2:return _=m.sent(),L=["EnergyPOSSUM"],O=["EnergySumR"],A=["EnergyPosSumNR"],M=["PowerSum"],C=["Power A"],j=["Power B"],G=["Power C"],R=["Volts A"],T=["Volts B"],q=["Volts C"],I=["VoltsAvgLL"],P=["Volts AB"],U=["Volts AC"],V=["Volts BC"],H=["Freq"],z=["x"],(F=["EnerygySum"]).push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(null),I.push(null),P.push(null),U.push(null),V.push(null),H.push(null),z.push(new Date(a)),_.length>0&&_.forEach(function(e){e&&(F.push(e.EnergySum),L.push(e.EnergyPosSum),O.push(e.EnergySumNR),A.push(e.EnergyPosSumNR),M.push(e.PowerSum),C.push(e.PowerA),j.push(e.PowerB),G.push(e.PowerC),R.push(e.VoltA),T.push(e.VoltB),q.push(e.VoltC),I.push(e.VoltAvgLL),P.push(e.VoltAB),U.push(e.VoltAC),V.push(e.VoltBC),H.push(e.Freq),z.push(new Date(e.timestamp)))}),N=_.length>0?null===(e=z[z.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",F.push(null),L.push(null),O.push(null),A.push(null),M.push(null),C.push(null),j.push(null),G.push(null),R.push(null),T.push(null),q.push(null),I.push(null),P.push(null),U.push(null),V.push(null),H.push(null),z.push(new Date(o)),x={x:"x",columns:[z,C,j,G,M]},E={x:"x",columns:[z,P,V,U]},y={x:"x",columns:[z,R,T,q]},w={x:"x",columns:[z,H]},D={x:"x",columns:[z,O]},k={x:"x",columns:[z,A]},d.y.label="Watts",h.y.label="Volts",v.y.label="Volts",f.y.label="Hz",g.y.label="MWh",b.y.label="MWh",W=Object(r.a)(5,a,o),B="",W.length>1?(Z=((new Date).getTime()-W[0].getTime())/1e3,B=(Z/=3600)>24?"%m-%d %H:%M":Z<.3?"%H:%M:%S":"%H:%M"):B="%H:%M:%S",p.x.lines=[],W.forEach(function(e){p.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},f.y.tick.format=function(e){return parseFloat(e).toFixed(1)},g.y.tick.format=function(e){return parseFloat(e).toFixed(1)},b.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,1e4,2e4,3e4,4e4],h.y.tick.values=[0,50,100,150,200,250],v.y.tick.values=[0,50,100,150],f.y.tick.values=[0,20,40,60,80],g.y.tick.values=[0,2e3,4e3,6e3,8e3,1e4],b.y.tick.values=[0,2e3,4e3,6e3,8e3,1e4],d.y.max=4e4,d.y.min=0,h.y.max=250,h.y.min=0,v.y.max=150,v.y.min=0,f.y.max=80,f.y.min=0,g.y.max=1e4,g.y.min=0,b.y.max=1e4,b.y.min=0,d.x.tick.format=B,h.x.tick.format=B,v.x.tick.format=B,f.x.tick.format=B,g.x.tick.format=B,b.x.tick.format=B,d.x.tick.values=W,h.x.tick.values=W,v.x.tick.values=W,f.x.tick.values=W,g.x.tick.values=W,b.x.tick.values=W,this.setState({grid:p,axis1:d,axis2:h,axis3:v,axis4:f,axis5:g,axis6:b,graphData:x,graphData2:E,graphData3:y,graphData4:w,graphData5:D,graphData6:k,lastUpdatedAt:N,loading:!1},function(){setInterval(function(){K.liveGraph()},u)}),[3,4];case 3:this.setState({loading:!1},function(){setInterval(function(){K.liveGraph()},u)}),m.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,n=e.loading,a=e.graphData,i=e.graphData2,s=e.graphData3,r=e.graphData4,u=e.graphData5,c=e.graphData6,p=e.axis1,d=e.axis2,m=e.axis3,h=e.axis4,v=e.axis5,f=e.axis6,g=e.grid,b=e.lastUpdatedAt,x=e.equipmentsLabels,E=this.props,y=E.graphsList,w=E.instance,D=E.buildingName,k=E.space,N=E.floor,S=E.zone;return l.createElement(l.Fragment,null,y.indexOf("Power")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Power",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:a,size:{height:300},axis:p,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),y.indexOf("Phase Voltage")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Phase Voltage",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:i,size:{height:300},axis:d,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Voltage")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Voltage",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:s,size:{height:300},axis:m,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Frequency")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Frequency",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:r,size:{height:300},axis:h,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Energy Sum Resettable")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Energy Sum Resettable",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:u,size:{height:300},axis:v,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),y.indexOf("Positive Energy Sum Non-resettable")>-1&&l.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},l.createElement("br",null),l.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard"},l.createElement("a",{onClick:function(){window.location.hash=w+"/"+D+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},null===t||void 0===t?void 0:t.rdfsLabel),l.createElement("div",{className:"tooltiptextDashboard"},l.createElement("span",null,"Space: ",k," "),l.createElement("br",null),l.createElement("span",null,"Floor: ",N," "),l.createElement("br",null),l.createElement("span",null,"Zone: ",S," "),l.createElement("br",null),l.createElement("span",null,"Equipments: ",null===x||void 0===x?void 0:x.map(function(e,t){return e.rdfsLabel+(t<x.length-1?", ":" ")})," "),l.createElement("br",null),l.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," "))," ","Positive Energy Sum Non-resettable",l.createElement("span",{className:"lastUpdated"},"Last: ",b)),n?l.createElement("div",{className:"graph-box-loader"},l.createElement("div",{className:"loader center-object"})):l.createElement(o.a,{data:c,size:{height:300},axis:f,grid:g,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(l.Component);t.a=h},769:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(e,t,n){for(var l=new Date(t.setSeconds(0)),a=new Date(n.setSeconds(0)),o=[],i=a.getTime()-l.getTime(),s=i/1e3/3600,r=0;r<e+1;r++){var u=void 0;if(0===r)s>48?(l.setSeconds(0),l.setMinutes(0),l.setHours(l.getHours()+(24-l.getHours()%24))):s>24?(l.setSeconds(0),l.setMinutes(0),l.setHours(l.getHours()+(10-l.getHours()%10))):s>1?(l.setSeconds(0),l.setMinutes(l.getMinutes()+(10-l.getMinutes()%10))):s>.1?(l.setSeconds(0),l.setMinutes(l.getMinutes()+(10-l.getMinutes()%10))):s>.1&&(l.setSeconds(0),l.setMinutes(l.getMinutes()+(5-l.getMinutes()%5))),u=l;else if(s>72){var c=Math.ceil(s);c+=360-c%360,(u=new Date(o[o.length-1].getTime()+6e5*c)).setSeconds(0)}else if(s>24){c=Math.ceil(s);c+=60-c%60,(u=new Date(o[o.length-1].getTime()+6e5*c)).setSeconds(0)}else s>1?(u=new Date(o[o.length-1].getTime()+Math.ceil(s)%60*6e5)).setSeconds(0):s>.2?(u=new Date(o[o.length-1].getTime()+6e5)).setSeconds(0):u=new Date(o[o.length-1].getTime()+Math.ceil(i/e));u!=o[o.length-1]&&u<=a&&o.push(u)}return o}}});