webpackJsonp([70],{1294:function(e,t,n){"use strict";t.c=function(e,t,n,s,l,c,o,m){return r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return t?[4,Object(a.d)(e?a.a.ALARMS.GetCutomerAlarm:a.a.ALARMS.GetSupervisorAlarm,"buildingName="+t+"&isArchivedOnly="+n+"&skip="+s+"&limit="+l+(c?"&equipmentName="+c:"")+(o?"&spaceName="+o:"")+(m?"&deviceId="+m:""))]:[3,2];case 1:return r=i.sent(),[3,4];case 2:return[4,Object(a.d)(e?a.a.ALARMS.GetCutomerAlarm:a.a.ALARMS.GetSupervisorAlarm)];case 3:r=i.sent(),i.label=4;case 4:return[2,r.result]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.ALARMS.UpdateSuperviorAlarm,"").then(function(e){if(e&&e.result)return e.result;Object(s.b)("Supervisory Alarm updated Successfully.")}).catch(function(e){Object(s.a)("Error occured while updating Supervisory Alarm.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.ALARMS.UpdateCustomerAlarm,"").then(function(e){if(e&&e.result)return e.result;Object(s.b)("Customer Alarm updated Successfully.")}).catch(function(e){Object(s.a)("Error occured while updating Customer Alarm.")})];case 1:return[2,t.sent()]}})})};var a=n(4),s=n(3),r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,l)}c((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,s,r,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(s=2&r[0]?a.return:r[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,r[1])).done)return s;switch(a=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){i.label=r[1];break}if(6===r[0]&&i.label<s[1]){i.label=s[1],s=r;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(r);break}s[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(2),r=(n.n(s),n(1294)),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,l)}c((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,s,r,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(s=2&r[0]?a.return:r[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,r[1])).done)return s;switch(a=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){i.label=r[1];break}if(6===r[0]&&i.label<s[1]){i.label=s[1],s=r;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(r);break}s[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},o=function(e){function t(t){var n=e.call(this,t)||this;return n.pageLength=15,n.state={AcknowledgedItems:[],sortOrder:1,AlarmList:[],showArchivedOnly:!1,isCustomerAlarms:!0},a=n,n.handleAcknowledgeCheck=n.handleAcknowledgeCheck.bind(n),n.handleAcknowledgeButton=n.handleAcknowledgeButton.bind(n),n.handleStatusChange=n.handleStatusChange.bind(n),n._FetchAlarmList=n._FetchAlarmList.bind(n),n.sortAlarmList=n.sortAlarmList.bind(n),n.handleAcknowledgeChange=n.handleAcknowledgeChange.bind(n),n.handleClear=n.handleClear.bind(n),n.handleAcknowledge=n.handleAcknowledge.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){return l(this,void 0,void 0,function(){var e,t,n,s,r=this;return c(this,function(i){return e=this.props,t=e.isCustomerAlarms,n=void 0===t||t,s=e.buildingName,this.setState({isCustomerAlarms:n},function(){return l(r,void 0,void 0,function(){var e=this;return c(this,function(t){return s&&setTimeout(function(){return l(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,a._FetchAlarmList(!1)];case 1:return e.sent(),[2]}})})},1e3),[2]})})}),[2]})})},t.prototype._FetchAlarmList=function(e){return l(this,void 0,void 0,function(){var t,n,a,s,i,l,o,m,u,d,h,f;return c(this,function(c){switch(c.label){case 0:return t=this.props,n=t.buildingName,a=t.equipmentName,s=t.spaceName,i=t.deviceId,l=this.state,o=l.isCustomerAlarms,m=l.showArchivedOnly,(u=l.AlarmList)||(u=[]),d=this.pageLength,h=e?0:u.length,[4,Object(r.c)(o,n,m,h,d,a,s,i)];case 1:return f=c.sent(),e?u=f.slice():u.push.apply(u,f),this.setState({AlarmList:u}),[2]}})})},t.prototype.handleAcknowledgeCheck=function(e){if(e.target.checked){var t=this.state.AlarmList.find(function(t){return t.id==e.target.value});(n=this.state.AcknowledgedItems).push(t),this.setState({AcknowledgedItems:n})}else{var n,a=(n=this.state.AcknowledgedItems).findIndex(function(t){return t.id==e.target.value});n.splice(a,1),this.setState({AcknowledgedItems:n})}},t.prototype.sortAlarmList=function(e,t){var n=this.state.AlarmList,a=this.state.sortOrder,s=n.sort(function(t,n){if(t&&n){var s="",r="";switch(e){case"Floor":t.floorRdfsLabel&&n.floorRdfsLabel&&(s=t.floorRdfsLabel,r=n.floorRdfsLabel);break;case"Description":t.description&&n.description&&(s=t.description,r=n.description);break;case"Space":t.spaceRdfsLabel&&n.spaceRdfsLabel&&(s=t.spaceRdfsLabel,r=n.spaceRdfsLabel);break;case"Zone":t.zoneRdfsLabel&&n.zoneRdfsLabel&&(s=t.zoneRdfsLabel,r=n.zoneRdfsLabel);break;case"EquipmentSensor":t.equipmentsensor&&n.equipmentsensor&&(s=t.equipmentsensor,r=n.equipmentsensor);break;case"Status":t.status&&n.status&&(s=t.status,r=n.status);break;case"TimeofAlarm":t.timeofalarm&&n.timeofalarm&&(s=t.timeofalarm,r=n.timeofalarm)}var i=0;return s.toLocaleLowerCase()<r.toLocaleLowerCase()?i=-1:s.toLocaleLowerCase()>r.toLocaleLowerCase()&&(i=1),i*a}});this.setState({AlarmList:s,sortOrder:-1*a})},t.prototype.handleStatusChange=function(e,t){var n=this.state.AlarmList;n[t].status=e,this.setState({AlarmList:n})},t.prototype.handleAcknowledgeChange=function(e,t){var n=this.state.AlarmList;n[t].isSelected=e,this.setState({AlarmList:n})},t.prototype.handleClear=function(){return l(this,void 0,void 0,function(){var e,t,n;return c(this,function(a){switch(a.label){case 0:for(e=this.state.isCustomerAlarms,t=this.state.AlarmList,n=0;n<t.length;n++)t[n].status=t[n].isSelected?"clear":t[n].status,t[n].isSelected=!1;return this.setState({AlarmList:t}),e?[4,Object(r.a)(t)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,Object(r.b)(t)];case 3:a.sent(),a.label=4;case 4:return[4,this._FetchAlarmList(!0)];case 5:return a.sent(),[2]}})})},t.prototype.handleAcknowledge=function(){return l(this,void 0,void 0,function(){var e,t,n;return c(this,function(a){switch(a.label){case 0:for(e=this.state.isCustomerAlarms,t=this.state.AlarmList,!1,t.map(function(e){e.acknowledge}),n=0;n<t.length;n++)!!t[n].isSelected&&(t[n].acknowledge=!!t[n].isSelected),t[n].isSelected=!1;return this.setState({AlarmList:t}),e?[4,Object(r.a)(t)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,Object(r.b)(t)];case 3:a.sent(),a.label=4;case 4:return[4,this._FetchAlarmList(!0)];case 5:return a.sent(),[2]}})})},t.prototype.handleArchive=function(){return l(this,void 0,void 0,function(){var e,t,n;return c(this,function(a){switch(a.label){case 0:for(e=this.state.isCustomerAlarms,t=this.state.AlarmList,!1,t.map(function(e){e.archived}),n=0;n<t.length;n++)!!t[n].isSelected&&(t[n].archived=!!t[n].isSelected),t[n].isSelected=!1;return this.setState({AlarmList:t}),e?[4,Object(r.a)(t)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,Object(r.b)(t)];case 3:a.sent(),a.label=4;case 4:return[4,this._FetchAlarmList(!0)];case 5:return a.sent(),[2]}})})},t.prototype.handleAcknowledgeButton=function(){this.setState({AcknowledgedItems:[]})},t.prototype.render=function(){for(var e=this,t=this.state.isCustomerAlarms,n=this.props,a=n.buildingName,r=n.instance,i=n.equipmentName,o=n.spaceName,m=n.isInTab,u=this.state,d=u.AlarmList,h=u.showArchivedOnly,f=!!(d&&d.length>0),p=0;p<d.length;p++){d[p].isSelected||(f=!1)}return s.createElement("div",{className:"content"},s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12 "},s.createElement("div",{className:"btn-group margin-5",style:{marginLeft:"0px"}},s.createElement("button",{type:"button",className:"btn btn-dark "+(t?"btn-fill":"")+" ",onClick:function(){m?e.setState({isCustomerAlarms:!0,showArchivedOnly:!1,AlarmList:[]},function(){return l(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+r+"/"+a+"/"+(i?"Alarms/CustomerAlarms/Equip/"+i:o?"Alarms/CustomerAlarms/Space/"+o:"Health/Alarms/CustomerAlarms")}},s.createElement("span",null,"Customer Alarms")),s.createElement("button",{type:"button",className:"btn btn-dark "+(t?"":"btn-fill")+" ",onClick:function(){m?e.setState({isCustomerAlarms:!1,showArchivedOnly:!1,AlarmList:[]},function(){return l(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+r+"/"+a+"/"+(i?"Alarms/SupervisoryAlarms/Equip/"+i:o?"Alarms/SupervisoryAlarms/Space/"+o:"Health/Alarms/SupervisoryAlarms")}},s.createElement("span",{className:""},"Supervisor Alarms"))),!h&&s.createElement(s.Fragment,null," ",s.createElement("button",{type:"button",className:"margin-5 btn btn-dark pull-right active",onClick:function(){e.handleArchive()}}," ",s.createElement("span",null,"ARCHIVE")),s.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleClear()}}," ",s.createElement("span",null,"CLEAR")),s.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleAcknowledge()}}," ",s.createElement("span",null,"ACKNOWLEDGE")),s.createElement("button",{type:"button",className:"margin-5 btn btn-success active pull-right"}," ",s.createElement("span",null,"GRAPH"))))),s.createElement("br",null),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("a",{className:"btn-sm btn-success pull-left custom-icon-btn",title:"Archived "+(t?"Customer":"Supervisory")+" Alarms",style:{marginTop:"0px"},onClick:function(t){e.setState({showArchivedOnly:!h,AlarmList:[]},function(){return e._FetchAlarmList(!0)})}},h?s.createElement("img",{className:"icon-img",style:{backgroundColor:"#B3A2C7"},src:"assets/img/alarm.png"}):s.createElement("img",{className:"icon-img",style:{backgroundColor:"#B3A2C7"},src:"assets/img/archive.png"})))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("br",null),s.createElement("div",{className:"card padding-10",style:{paddingTop:"0px"}},s.createElement("div",{className:"content",style:{paddingTop:"10px"}},s.createElement("div",{className:"dataCard"},s.createElement("div",{className:"row hidden-sm hidden-xs no-padding"},s.createElement("div",{className:"col-md-12 no-padding dataCard"},s.createElement("div",{className:"col-md-1 col-sm-12 small grid-header-left",onClick:function(){return e.sortAlarmList("Floor")}},s.createElement("i",{className:"fa fas fa-sort"}),"Floor"),s.createElement("div",{className:(h?"col-md-4":"col-md-3")+" col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("Description")}},s.createElement("i",{className:"fa fas fa-sort"}),"Description"),s.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("Space")}},s.createElement("i",{className:"fa fas fa-sort"}),"Space"),s.createElement("div",{className:"col-md-3 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("EquipmentSensor")}},s.createElement("i",{className:"fa fas fa-sort"}),"Equipment/Sensor"),s.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("Status")}},s.createElement("i",{className:"fa fas fa-sort"}),"Status"),s.createElement("div",{className:"col-md-2 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("TimeofAlarm")}},s.createElement("i",{className:"fa fas fa-sort"}),"Time of Alarm"),!h&&s.createElement("div",{className:"col-md-1 col-sm-12 small  grid-header"},s.createElement("input",{style:{marginTop:"0px",marginLeft:"50px",height:"17px"},onChange:function(t){for(var n=0;n<d.length;n++){d[n].isSelected=t.target.checked}e.setState({AlarmList:d})},type:"checkbox",checked:f,className:"form-control"})))),d&&d.length>0&&d.map(function(t,n){return s.createElement("div",{key:n,className:" row clickable"},s.createElement("div",{className:t.acknowledge?"col-md-12 no-padding":"text-danger col-md-12 no-padding blink-text"},s.createElement("div",{className:"col-md-1 small headingText trim-data",title:t.floorRdfsLabel},s.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Floor"),t.floorRdfsLabel),s.createElement("div",{className:(h?"col-md-4":"col-md-3")+" small headingText trim-data",title:t.description},s.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Description"),t.description),s.createElement("div",{className:"col-md-1 small headingText trim-data",title:t.spaceRdfsLabel},s.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Space"),t.spaceRdfsLabel),s.createElement("div",{className:"col-md-3 small headingText trim-data",title:t.equipmentsensor?t.equipmentsensor:t.device?t.device:""},s.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Equipment/Sensor"),"\xa0\xa0",t.equipmentsensor?t.equipmentsensor:t.device?t.device:""),s.createElement("div",{className:"col-md-1 small headingText trim-data",title:t.status},s.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Status"),t.status),s.createElement("div",{className:"col-md-2 small headingText trim-data",title:t.timeofalarm.ToEasternDateTime()},s.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Time of Alarm"),t.timeofalarm.ToEasternDateTime()),!h&&s.createElement("div",{className:"col-md-1 headingText"},s.createElement("span",{className:"visible-sm-inline visible-xs-inline  headingText"},"Select"),s.createElement("input",{style:{marginTop:"0px",marginLeft:"36px",height:"22px"},onChange:function(t){e.handleAcknowledgeChange(t.target.checked,n)},type:"checkbox",checked:t.isSelected,className:"form-control"}))))}),d&&d.length>=this.pageLength&&d.length%this.pageLength==0&&s.createElement("div",{className:"row center"},s.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e._FetchAlarmList(!1)}}," ",s.createElement("span",null,"Load More..."))))))))))},t}(s.Component);t.default=o}});