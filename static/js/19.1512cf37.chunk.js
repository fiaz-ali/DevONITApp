webpackJsonp([19],{1007:function(e,t,a){"use strict";var n=a(3),r=(a.n(n),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),s=function(e){function t(t){var a=e.call(this,t)||this;return a.state={contactObj:Object()},a.handleVendorForm=a.handleVendorForm.bind(a),a}return r(t,e),t.prototype.handleVendorForm=function(e){var t=this.state.contactObj,a=e.target.name;a&&a.length>0&&"contact"==a&&(e.target.value=e.target.value.replace(new RegExp(" ","g"),"")),t[""+a]=e.target.value,this.setState({contactObj:t}),this.props.handleVendorChange(t)},t.prototype.componentWillReceiveProps=function(e){if(e.contactObj.contact)this.setState({contactObj:e.contactObj});else{var t=Object();t.contact="",t.name="",t.mobile="",t.zipcode="",t.email="",t.streetAddress="",t.company="",t.city="",t.state="",this.setState({contactObj:t})}},t.prototype.render=function(){var e=this,t=(this.props,this.state.contactObj);return n.createElement("div",{className:"content"},n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},n.createElement("label",{htmlFor:"contact"},"Title:")),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"text",id:"contact",disabled:this.props.isEdit,name:"contact",placeholder:"e.g BMFS",className:"form-control col-md-6",value:t.contact,onChange:function(t){return e.handleVendorForm(t)}})))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},n.createElement("label",{htmlFor:"name"},"Name:")),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"text",id:"name",name:"name",className:"form-control col-md-6",value:t.name,onChange:function(t){return e.handleVendorForm(t)}})))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},n.createElement("label",{htmlFor:"company"},"Company:")),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"text",id:"company",name:"company",className:"form-control col-md-6",value:t.company,onChange:function(t){return e.handleVendorForm(t)}})))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},n.createElement("label",{htmlFor:"streetAddress"},"Address:")),n.createElement("div",{className:"col-md-9"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-6 form-group"},n.createElement("input",{type:"text",id:"streetAddress",name:"streetAddress",className:"form-control",value:t.streetAddress,placeholder:"Street",onChange:function(t){return e.handleVendorForm(t)}})),n.createElement("div",{className:"col-md-6 form-group"},n.createElement("input",{type:"text",id:"city",name:"city",className:"form-control",value:t.city,placeholder:"City",onChange:function(t){return e.handleVendorForm(t)}})),n.createElement("div",{className:"col-md-6 form-group"},n.createElement("input",{type:"text",id:"state",name:"state",className:"form-control",value:t.state,placeholder:"State",onChange:function(t){return e.handleVendorForm(t)}})),n.createElement("div",{className:"col-md-6 form-group"},n.createElement("input",{type:"text",id:"zipcode",name:"zipcode",className:"form-control",value:t.zipcode,placeholder:"Zip Code",onChange:function(t){return e.handleVendorForm(t)}})))))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},n.createElement("label",{htmlFor:"email"},"Email:")),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"text",id:"email",name:"email",className:"form-control col-md-6",value:t.email,onChange:function(t){return e.handleVendorForm(t)}})))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},n.createElement("label",{htmlFor:"mobile"},"Contact #:")),n.createElement("div",{className:"col-md-4"},n.createElement("input",{type:"text",id:"contact",name:"mobile",className:"form-control col-md-6",value:t.mobile,onChange:function(t){return e.handleVendorForm(t)}})),n.createElement("div",{className:"col-md-1"},n.createElement("label",{htmlFor:"notes"},"Fax:")),n.createElement("div",{className:"col-md-4"},n.createElement("input",{type:"text",id:"notes",name:"notes",className:"form-control col-md-6",value:t.notes,onChange:function(t){return e.handleVendorForm(t)}})))))},t}(n.Component);t.a=s},1460:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(3),s=(a.n(r),a(1461)),o=a(87),c=a(661),l=a(17),i=a(568),m=a(1007),d=a(583),u=a(14),h=a(578),p=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),f=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function c(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,c)}l((n=n.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var a,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},b=function(e){function t(t){var a=e.call(this,t)||this;return a.state={PurchaseOrder:Object(),isEdit:!1,WOList:[],_peoples:[],contactObj:Object(),shipToItems:[],newVendorDropDown:"",purchasedFromAddress:"",shipToAddress:""},n=a,a.handleTaxChange=a.handleTaxChange.bind(a),a.handleItems=a.handleItems.bind(a),a.handleShippingChange=a.handleShippingChange.bind(a),a.handleOtherChange=a.handleOtherChange.bind(a),a.setPurchaseOrderTotal=a.setPurchaseOrderTotal.bind(a),a.handlePOFormChange=a.handlePOFormChange.bind(a),a._savePurchaseOrder=a._savePurchaseOrder.bind(a),a._fetchPurchaseOrder=a._fetchPurchaseOrder.bind(a),a.handlePOFormAddressChange=a.handlePOFormAddressChange.bind(a),a.createVendor=a.createVendor.bind(a),a.handleVendorChange=a.handleVendorChange.bind(a),a.setPurchasedFromAddress=a.setPurchasedFromAddress.bind(a),a.setShipToAddress=a.setShipToAddress.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._getWorkOrdersList()]:[3,5];case 1:return e.sent(),[4,this._fetchPurchaseOrder()];case 2:return e.sent(),[4,this.fetchShipToItems()];case 3:return e.sent(),[4,this.fetchVendors()];case 4:e.sent(),e.label=5;case 5:return[2]}})})},t.prototype.setPurchasedFromAddress=function(e){return f(this,void 0,void 0,function(){var t,a,n,r;return v(this,function(s){return t=this.state,a=t._peoples,n=t.purchasedFromAddress,r=a.find(function(t){return Object(l.g)(t.contact)==e}),n=r&&r.name?Object(l.g)(r.street)+", "+Object(l.g)(r.city)+", "+Object(l.g)(r.state):"",this.setState({purchasedFromAddress:n}),[2]})})},t.prototype.setShipToAddress=function(e){return f(this,void 0,void 0,function(){var t,a,n,r;return v(this,function(s){return t=this.state,a=t.shipToItems,n=t.shipToAddress,r=a.find(function(t){return Object(l.g)(t.value)==e}),n=r&&r.name?Object(l.g)(r.street)+", "+Object(l.g)(r.city)+", "+Object(l.g)(r.state):"",this.setState({shipToAddress:n}),[2]})})},t.prototype.fetchShipToItems=function(){return f(this,void 0,void 0,function(){var e,t=this;return v(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,Object(o.a)(!0),[4,Object(c.d)(this.props.buildingName).then(function(a){t.setState({shipToItems:a},function(){return f(t,void 0,void 0,function(){var t=this;return v(this,function(a){return setTimeout(function(){return f(t,void 0,void 0,function(){var t;return v(this,function(a){return t=n.state.PurchaseOrder,n.setShipToAddress(t.shipToCompany?t.shipToCompany:e),[2]})})},500),[2]})})})}).catch(function(e){return e})];case 1:return a.sent(),Object(o.a)(!1),[2]}})})},t.prototype.fetchVendors=function(){return f(this,void 0,void 0,function(){var e,t,a=this;return v(this,function(n){switch(n.label){case 0:return e=[],Object(o.a)(!0),[4,Object(h.n)(this.props.buildingName)];case 1:return(t=n.sent())&&t.length>0&&(e=t.filter(function(e){return"Vendor"==Object(l.g)(e.group)}),this.setState({_peoples:e},function(){return f(a,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return this.state.PurchaseOrder.purchasedFromCompany?[4,this.setPurchasedFromAddress(this.state.PurchaseOrder.purchasedFromCompany)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})),Object(o.a)(!1),[2]}})})},t.prototype.createVendor=function(){return f(this,void 0,void 0,function(){var e,t,a=this;return v(this,function(n){switch(n.label){case 0:return e=this.state.PurchaseOrder,(t=this.state.contactObj).role="3",t.group="Vendor",t.groups=[{label:"Vendor",value:"Vendor"}],t.facilityAssignedTo=[{value:this.props.buildingName,label:""}],t?(Object(o.a)(!0),[4,Object(h.g)(this.props.buildingName,t,!1).then(function(n){var r=a.state.newVendorDropDown;r&&r.length>0&&(e[r]=a.state.contactObj.contact),t.contact="",t.name="",t.mobile="",t.zipcode="",t.email="",t.streetAddress="",t.company="",t.city="",t.state=""})]):[3,2];case 1:n.sent(),Object(o.a)(!1),this.setState({contactObj:t,PurchaseOrder:e},function(){a.fetchVendors(),a.fetchShipToItems()}),n.label=2;case 2:return[2]}})})},t.prototype._getWorkOrdersList=function(){return f(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return Object(o.a)(!0),[4,Object(c.e)(this.props.buildingName).then(function(t){e.setState({WOList:t})}).catch(function(e){return e})];case 1:return t.sent(),Object(o.a)(!1),[2]}})})},t.prototype._fetchPurchaseOrder=function(){return f(this,void 0,void 0,function(){var e,t,a=this;return v(this,function(n){switch(n.label){case 0:return e={poID:"",title:"",status:"",relatedwo:"",purchasedFromCompany:"",shipToCompany:this.props.buildingName,items:[{ontology:"",rdfsLabel:"",quantity:0,units:"",description:"",unitPrice:0,total:0}],shippedVia:"",tax:0,createdDate:"",shipping:0,other:0,total:0},t=!!this.props.purchaseOrderNo,e.poID=(new Date).PO_Number(),this.props.purchaseOrderNo?[4,Object(c.c)(this.props.buildingName,this.props.purchaseOrderNo).then(function(n){if(n&&n.length>0){var r=n[0];e.poID=Object(l.g)(r.poid),e.title=Object(l.g)(r.title),e.status=Object(l.g)(r.status),e.relatedwo=Object(l.g)(r.relatedwo),e.purchasedFromCompany=Object(l.g)(r.purchasedfromcompany),e.shipToCompany=Object(l.g)(r.shiptocompany),e.shippedVia=Object(l.g)(r.shippedvia),e.tax=parseInt(Object(l.g)(r.tax)),e.createdDate=Object(l.g)(r.createddate),e.shipping=parseInt(Object(l.g)(r.shipping)),e.other=parseInt(Object(l.g)(r.other)),e.total=parseInt(Object(l.g)(r.total)),a.setState({PurchaseOrder:e,isEdit:t},function(){return f(a,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return[4,Object(c.b)(this.props.buildingName,this.props.purchaseOrderNo).then(function(t){if(t&&t.length>0){for(var a=e.state.PurchaseOrder,n=[],r=Object(),s=0;s<t.length;s++)(r=Object()).ontology=t[s].ontology&&t[s].ontology.value,r.rdfsLabel=t[s].rdfsLabel&&t[s].rdfsLabel.value,r.quantity=parseInt(t[s].quantity&&t[s].quantity.value),r.units=t[s].units&&t[s].units.value,r.description=t[s].description&&t[s].description.value,r.unitPrice=parseInt(t[s].unitprice&&t[s].unitprice.value),r.total=parseInt(t[s].total&&t[s].total.value),n.push(r);a.items=n,e.setState({PurchaseOrder:a})}})];case 1:return t.sent(),[2]}})})})}})]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.setState({PurchaseOrder:e,isEdit:t}),[2]}})})},t.prototype.handleTaxChange=function(e){if(!this.props.isView){var t=this.state.PurchaseOrder;t.tax=parseFloat(parseFloat(e.toString()).toFixed(4)),this.setState({PurchaseOrder:t}),this.setPurchaseOrderTotal()}},t.prototype.handleItems=function(e){if(!this.props.isView){var t=this.state.PurchaseOrder;t.items=e,this.setState({PurchaseOrder:t}),this.setPurchaseOrderTotal()}},t.prototype.handleShippingChange=function(e){if(!this.props.isView){var t=this.state.PurchaseOrder;t.shipping=parseFloat(parseFloat(e.toString()).toFixed(2)),this.setState({PurchaseOrder:t}),this.setPurchaseOrderTotal()}},t.prototype.handleOtherChange=function(e){if(!this.props.isView){var t=this.state.PurchaseOrder;t.other=parseFloat(parseFloat(e.toString()).toFixed(2)),this.setState({PurchaseOrder:t}),this.setPurchaseOrderTotal()}},t.prototype.setPurchaseOrderTotal=function(){for(var e=this.state.PurchaseOrder,t=0,a=0;a<e.items.length;a++)t+=e.items[a].total;var n=e.tax?e.tax:0,r=e.shipping?e.shipping:0,s=e.other?e.other:0;e.total=t+t*n/100+r+s,this.setState({PurchaseOrder:e})},t.prototype.handlePOFormChange=function(e){if(!this.props.isView)if("addVendor"==e.target.value)this.setState({newVendorDropDown:e.target.name},function(){document.getElementById("btnOpenVendorForm").click()});else{var t=this.state.PurchaseOrder,a=e.target.name;t[""+a]=e.target.value,this.setState({PurchaseOrder:t}),"purchasedFromCompany"==a?this.setPurchasedFromAddress(e.target.value):"shipToCompany"==a&&this.setShipToAddress(e.target.value)}},t.prototype.handlePOFormAddressChange=function(e,t){if(!this.props.isView){var a=this.state.PurchaseOrder,n=t.target.name;a[""+e][""+n]=t.target.value,this.setState({PurchaseOrder:a})}},t.prototype.handleVendorChange=function(e){this.setState({contactObj:e})},t.prototype._savePurchaseOrder=function(){return f(this,void 0,void 0,function(){var e,t,a,n,r,s;return v(this,function(l){switch(l.label){case 0:return e=this.props,t=e.instance,a=e.buildingName,e.isView?[3,3]:(n=this.state,r=n.PurchaseOrder,s=n.isEdit,r&&r.poID?(Object(o.a)(!0),[4,Object(c.a)(a,r.poID)]):[3,3]);case 1:return l.sent(),s||(r.createdDate=new Date(Date.now()).toString()),[4,Object(c.f)(a,r,s)];case 2:l.sent(),Object(o.a)(!1),window.location.hash=t+"/"+a+"/PurchaseOrders",l.label=3;case 3:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,a=t.PurchaseOrder,n=t.WOList,o=t._peoples,c=t.contactObj,h=t.shipToItems,p=t.shipToAddress,f=t.purchasedFromAddress,v=this.props,b=v.isView,E=v.instance,g=v.buildingName,O=a.title&&a.shipToCompany&&a.purchasedFromCompany&&!0,N=c&&c.name&&c.contact&&!0,y=JSON.parse(u.a.getItem("user")),C=Object(d.b)(y,"work-po","write");return r.createElement("div",{className:"content "+(C&&b?"overlay":"")},r.createElement("div",{className:"card"},r.createElement("button",{type:"button",id:"btnOpenVendorForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#vendorFormDialog"}," ."),r.createElement(i.a,{id:"vendorFormDialog",onSaveButtonClick:function(){e.createVendor()},saveButtonText:"Save",disableSaveButton:!N},r.createElement(m.a,{instance:E,buildingName:g,isEdit:!1,contactObj:c,handleVendorChange:this.handleVendorChange})),r.createElement("div",{className:"container-fluid"},r.createElement("div",{className:"header"},r.createElement("div",{className:"col-md-9"},r.createElement("h4",{className:"title"},"Create Purchase Order")),r.createElement("div",{className:"col-md-3"},b&&C&&r.createElement("button",{className:"btn-sm btn-success btn-fill pull-right",onClick:function(){window.location.hash=E+"/"+g+"/PurchaseOrder/"+a.poID+"/Edit"}},r.createElement("i",{className:"fa fa-edit"})," Edit"))),r.createElement("br",null),r.createElement("br",null),r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"row form-group"},r.createElement("div",{className:"col-md-2 col-xs-12"},r.createElement("label",{htmlFor:"pOrder"},"Purchase Order #")),r.createElement("div",{className:"col-md-4 col-xs-12"},r.createElement("input",{disabled:!0,id:"pOrder",type:"text",className:"form-control",name:"title",value:a.poID})),r.createElement("div",{className:"col-md-2 col-xs-12"},r.createElement("label",{htmlFor:"status"},"Status")),r.createElement("div",{className:"col-md-4 col-xs-12"},r.createElement("select",{className:"form-control",id:"status",name:"status",value:a.status,onChange:function(t){return e.handlePOFormChange(t)}},r.createElement("option",{value:""},"Select Status"),r.createElement("option",null,"Open"),r.createElement("option",null,"In Progress"),r.createElement("option",null,"On Hold"),r.createElement("option",null,"Complete"),r.createElement("option",null,"Cancel"))))),r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"row form-group"},r.createElement("div",{className:"col-md-2 col-xs-12"},r.createElement("label",{htmlFor:"title"},"Title:")),r.createElement("div",{className:"col-md-4 col-xs-12"},r.createElement("input",{type:"text",id:"title",name:"title",className:"form-control",value:a.title,placeholder:"Title",onChange:function(t){return e.handlePOFormChange(t)}})),r.createElement("div",{className:"col-md-2 col-xs-12"},r.createElement("label",{htmlFor:"relatedWO"},"Related WO #")),r.createElement("div",{className:"col-md-4 col-xs-12"},r.createElement("select",{className:"form-control",id:"relatedWO",name:"relatedwo",value:a.relatedwo,onChange:function(t){return e.handlePOFormChange(t)}},r.createElement("option",{value:""},"Select Related"),n.map(function(e,t){return r.createElement("option",{value:e.value,key:t},e.value," ")}))))),r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"headingText"},"Purchased From"),r.createElement("div",{className:"row padding-10"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"col-md-2"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"purchasedFromCompany"},"Company:"))),r.createElement("div",{className:"col-md-4"},r.createElement("select",{className:"form-control",id:"purchasedFromCompany",name:"purchasedFromCompany",value:a.purchasedFromCompany,onChange:function(t){return e.handlePOFormChange(t)}},r.createElement("option",{value:""},"Select"),r.createElement("option",{value:"addVendor",key:-1},"New Vendor"),r.createElement("hr",null),o.map(function(e,t){return r.createElement("option",{value:Object(l.g)(e.contact),key:t},Object(l.g)(e.name)," ",Object(l.g)(e.company)," ")}))),r.createElement("div",{className:"col-md-1"},r.createElement("label",null,r.createElement("i",{className:"fa fas fa-asterisk"}))),r.createElement("div",null,r.createElement("div",{className:"col-md-5"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"purchasedFromAddress"},"Address:"),r.createElement("br",null),r.createElement("span",null,f)))))),r.createElement("div",{className:"headingText"},"Ship To"),r.createElement("div",{className:"row padding-10"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"col-md-2"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"shipToCompany"},"Name:"))),r.createElement("div",{className:"col-md-4"},r.createElement("select",{className:"form-control",id:"shipToCompany",name:"shipToCompany",value:a.shipToCompany,onChange:function(t){return e.handlePOFormChange(t)}},r.createElement("option",{value:""},"Select"),r.createElement("option",{value:"addVendor",key:-1},"New Vendor"),r.createElement("hr",null),h.map(function(e,t){return r.createElement("option",{value:e.value.value,key:t},e.name.value," ")}))),r.createElement("div",{className:"col-md-1"},r.createElement("label",null,r.createElement("i",{className:"fa fas fa-asterisk"}))),r.createElement("div",null,r.createElement("div",{className:"col-md-5"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"shipToAddress"},"Address:"),r.createElement("br",null),r.createElement("span",null,p))))))),r.createElement("div",{className:"col-md-12"},"\xa0"),r.createElement("div",{className:"col-md-12"},r.createElement(s.a,{name:"itemsList",items:a.items,onItemChange:this.handleItems,isView:b})),r.createElement("div",{className:"col-md-12"},"\xa0"),r.createElement("div",{className:"col-md-10 col-sm-6 col-xs-12 labelDynamic"},r.createElement("label",{htmlFor:"tax"},"Tax: (%)")),r.createElement("div",{className:"col-md-2 col-sm-6 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("input",{type:"number",className:"form-control",placeholder:"Tax in %",name:"tax",value:a.tax,onChange:function(t){return e.handleTaxChange(parseFloat(t.target.value))}}))),r.createElement("div",{className:"col-md-4 col-sm-6 col-xs-12 labelDynamic"},r.createElement("label",{htmlFor:"shippedVia"},"Shipped Via:")),r.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("select",{className:"form-control",value:a.shippedVia,id:"shippedVia",name:"shippedVia",onChange:function(t){return e.handlePOFormChange(t)}},r.createElement("option",{value:""},"Select Shipping Via"),r.createElement("option",null,"DHL"),r.createElement("option",null,"FedEx"),r.createElement("option",null,"UPS")))),r.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 labelDynamic"},r.createElement("label",{htmlFor:"shipping"},"Shipping: ($)")),r.createElement("div",{className:"col-md-2 col-sm-6 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("input",{type:"number",className:"form-control",value:a.shipping,placeholder:"Shipping",name:"shipping",onChange:function(t){return e.handleShippingChange(parseFloat(t.target.value))}}))),r.createElement("div",{className:"col-md-10 col-sm-6 col-xs-12 labelDynamic"},r.createElement("label",{htmlFor:"other"},"Other: ($)")),r.createElement("div",{className:"col-md-2 col-sm-6 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("input",{type:"number",className:"form-control",value:a.other,placeholder:"Other",name:"other",onChange:function(t){return e.handleOtherChange(parseFloat(t.target.value))}}))),r.createElement("div",{className:"col-md-10 col-sm-6 col-xs-12 labelDynamic"},r.createElement("label",{htmlFor:"total"},"Total: ($)")),r.createElement("div",{className:"col-md-2 col-sm-6 col-xs-12"},r.createElement("div",{className:"form-group"},r.createElement("input",{type:"number",disabled:!0,className:"form-control",value:a.total,placeholder:"Total",name:"total"}))),!b&&r.createElement("div",{className:"col-md-12 inline-flex"},r.createElement("button",{disabled:!O,className:"btn btn-primary btn-fill",onClick:function(t){return e._savePurchaseOrder()}},r.createElement("i",{className:"fa fa-save"})," Save"),r.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(e){window.location.hash="/"+E+"/"+g+"/PurchaseOrders"}},r.createElement("i",{className:"fa fa-window-close"})," Cancel")))))},t}(r.Component);t.default=b},1461:function(e,t,a){"use strict";var n=a(3),r=(a.n(n),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),s=function(e){function t(t){var a=e.call(this,t)||this;return a.state={items:[]},a.addItem=a.addItem.bind(a),a.handleQuantityChange=a.handleQuantityChange.bind(a),a.handleUnitsChange=a.handleUnitsChange.bind(a),a.handleDescriptionChange=a.handleDescriptionChange.bind(a),a.handleUnitPriceChange=a.handleUnitPriceChange.bind(a),a}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.items?this.setState({items:e.items}):this.setState({items:[{ontology:"",rdfsLabel:"",quantity:0,units:"",description:"",unitPrice:0,total:0}]})},t.prototype.addItem=function(){var e=this.state.items;e.push({ontology:"",rdfsLabel:"",quantity:0,units:"",description:"",unitPrice:0,total:0}),this.setState({items:e}),this.props.onItemChange(e)},t.prototype.handleQuantityChange=function(e,t){if(!this.props.isView){var a=this.state.items;a[t].quantity=e,this.setState({items:a}),this.props.onItemChange(a),this.handleTotalChange(t)}},t.prototype.handleUnitsChange=function(e,t){if(!this.props.isView){var a=this.state.items;a[t].units=e,this.setState({items:a}),this.props.onItemChange(a),this.handleTotalChange(t)}},t.prototype.handleDescriptionChange=function(e,t){if(!this.props.isView){var a=this.state.items;a[t].description=e,this.setState({items:a}),this.props.onItemChange(a)}},t.prototype.handleUnitPriceChange=function(e,t){if(!this.props.isView){var a=this.state.items,n=parseFloat(e.toString()).toFixed(2);a[t].unitPrice=parseFloat(n),this.setState({items:a}),this.props.onItemChange(a),this.handleTotalChange(t)}},t.prototype.handleItemChange=function(e,t){if(!this.props.isView){var a=this.state.items;a[t].rdfsLabel=e,this.setState({items:a}),this.props.onItemChange(a)}},t.prototype.handleTotalChange=function(e){if(!this.props.isView){var t=this.state.items,a=t[e].quantity*t[e].unitPrice;t[e].total=parseFloat(parseFloat(a.toString()).toFixed(2)),this.setState({items:t}),this.props.onItemChange(t)}},t.prototype.render=function(){var e=this,t=this.state.items,a=this.props.isView,r=t&&!1===t.map(function(e){return""!==e.rdfsLabel}).find(function(e){return!1===e}),s=t&&!r||!t;return n.createElement(n.Fragment,null,n.createElement("div",{className:"dataCard"},n.createElement("div",{className:"row hidden-xs"},n.createElement("div",{className:"col-sm-2 headingText"},"Item"),n.createElement("div",{className:"col-sm-1 headingText"},"Quantity"),n.createElement("div",{className:"col-sm-2 headingText"},"Units"),n.createElement("div",{className:"col-sm-3 headingText"},"Description"),n.createElement("div",{className:"col-sm-2 headingText"},"Unit Price"),n.createElement("div",{className:"col-sm-2 headingText"},"Total")),t.map(function(t,a){return n.createElement("div",{key:a,className:"row"},n.createElement("div",{className:"col-sm-2 col-xs-12"},n.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-3"},n.createElement("label",{htmlFor:"items"},"Item")),n.createElement("span",{className:"fullWidth"},n.createElement("input",{type:"text",id:"items",className:"form-control",placeholder:"item name",value:t.rdfsLabel,name:"items",onChange:function(t){return e.handleItemChange(t.target.value,a)}}))),n.createElement("div",{className:"col-sm-1 col-xs-6"},n.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-6"},n.createElement("label",{htmlFor:"quantity"},"Quantity")),n.createElement("span",{className:"fullWidth"},n.createElement("input",{type:"number",id:"quantity",className:"form-control",value:t.quantity,placeholder:"Quantity",name:"quantity",onChange:function(t){return e.handleQuantityChange(parseInt(t.target.value),a)}}))),n.createElement("div",{className:"col-sm-2 col-xs-6"},n.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-6"},n.createElement("label",{htmlFor:"units"},"Units")),n.createElement("span",{className:"fullWidth"},n.createElement("input",{type:"text",className:"form-control",id:"units",value:t.units,placeholder:"Units",name:"units",onChange:function(t){return e.handleUnitsChange(t.target.value,a)}}))),n.createElement("div",{className:"col-sm-3 col-xs-12"},n.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-3"},n.createElement("label",{htmlFor:"description"},"Description")),n.createElement("span",{className:"fullWidth"},n.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,placeholder:"Description",name:"description",onChange:function(t){return e.handleDescriptionChange(t.target.value,a)}}))),n.createElement("div",{className:"col-sm-2 col-xs-6"},n.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-6"},n.createElement("label",{htmlFor:"unitprice"},"Unit Price")),n.createElement("span",{className:"fullWidth"},n.createElement("input",{type:"number",className:"form-control",id:"unitprice",value:t.unitPrice,placeholder:"Unit Price",name:"unitPrice",onChange:function(t){return e.handleUnitPriceChange(parseFloat(t.target.value),a)}}))),n.createElement("div",{className:"col-sm-2 col-xs-6"},n.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-6"},n.createElement("label",{htmlFor:"total"},"Total")),n.createElement("span",{className:"fullWidth"},n.createElement("input",{type:"text",disabled:!0,className:"form-control",id:"total",value:t.total,placeholder:"Total",name:"total"}))))})),n.createElement("br",null),!a&&n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-1"},n.createElement("label",null,"Add:")),n.createElement("div",{className:"col-md-11"},n.createElement("button",{type:"button",disabled:!s,className:"btn btn-dark btn-fill btn-sm",onClick:this.addItem},n.createElement("i",{className:"fa fa-plus"})))))},t}(n.Component);t.a=s},661:function(e,t,a){"use strict";t.f=function(e,t,a){return o(this,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return[4,Object(s.f)({buildingName:e,purchaseOrder:t,isEdit:a},s.a.PURCHASEORDER.SavePurchaseOrder,n.b.PURCHASEORDER).then(function(){Object(r.b)("Purchase Order "+(a?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Purchase Order.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(s.f)({buildingName:e,poID:t},s.a.PURCHASEORDER.DeletePO_Items,n.b.PURCHASEORDER)];case 1:return[2,a.sent()]}})})},t.c=function(e,t,a){return o(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:return[4,Object(s.e)({buildingName:e,purchaseOrderID:t,workOrderID:a},s.a.PURCHASEORDER.FetchPurchaseOrders,n.b.PURCHASEORDER)];case 1:return[2,r.sent()]}})})},t.b=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(s.e)({buildingName:e,purchaseOrderID:t},s.a.PURCHASEORDER.FetchPurchaseOrderItems,n.b.PURCHASEORDER)];case 1:return[2,a.sent()]}})})},t.d=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(s.e)({buildingName:e},s.a.PURCHASEORDER.GetShipToItems,n.b.VENDOR)];case 1:return[2,t.sent()]}})})},t.g=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(s.f)({purchaseOrderID:e,newStatus:t},s.a.PURCHASEORDER.SetNewStatusPO,n.b.PURCHASEORDER).then(function(){Object(r.b)("Purchase Order Updated Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Purchase Order.")})];case 1:return[2,a.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(s.e)({buildingName:e},s.a.PURCHASEORDER.GetWorkOrdersList,n.b.PURCHASEORDER)];case 1:return[2,t.sent()]}})})};var n=a(26),r=a(44),s=a(19),o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function c(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,c)}l((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var a,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}}});