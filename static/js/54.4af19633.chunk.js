webpackJsonp([54],{679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=(n.n(a),n(17)),l=n(120),i=n(793),c=n(8),o=n(6),s=n(850),u=n(113),d=n(727),m=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},b=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function c(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}o((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),Old_RelayBoardInfo:Object(),RelayBoardInfo:Object(),I1RelayBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[]},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[],relayControlStatusDesc:"",scheduleSelected:!1,relayisOn:!1,relayisOnNo:0,relayCensorStatus:Object(),relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,I1RelayStatus:!1,relayControlStatus:"",relayControlType:"",isOptimizeControl:!1,isOptimizeControlStatus:"",RelayBoardControl:Object(),relayOptimizeSettings:"",I4RelayBoardInfo:Object(),relayNoOptimize:0},n,n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n._fetchRelayCensorStatus=n._fetchRelayCensorStatus.bind(n),n._fetchV4RelayBoardInfo=n._fetchV4RelayBoardInfo.bind(n),n._fetchI1RelayBoardInfo=n._fetchI1RelayBoardInfo.bind(n),n._fetchI4RelayBoardInfo=n._fetchI4RelayBoardInfo.bind(n),n.fetchRelayControlSettings=n.fetchRelayControlSettings.bind(n),n.saveRelayStatusChanges=n.saveRelayStatusChanges.bind(n),n.setOptimizeSettings=n.setOptimizeSettings.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.handleRelayOnOff=n.handleRelayOnOff.bind(n),n.handleRelayControlStatus=n.handleRelayControlStatus.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n}return m(t,e),t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var e=this;return f(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:t.sent(),t.label=2;case 2:return setInterval(function(){e.resetChanges(!1)},5e3),[2]}})})},t.prototype.componentWillUnmount=function(){return b(this,void 0,void 0,function(){return f(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._fetchData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,r,l,o,s,m,h,p,y=this;return f(this,function(g){switch(g.label){case 0:return e=this.state,t=e.scheduleSelected,n=e.relayControlType,a=this.props,r=a.RelayDeviceName,l=a.buildingName,r?(Object(u.a)(!0),[4,Object(d.f)(this.props.buildingName)]):[3,3];case 1:return o=g.sent(),s=o&&o.length>0&&o.map(function(e){return{value:Object(c.g)(e.ontology),label:Object(c.g)(e.rdfsLabel)}}),m=Object(),[4,Object(i.d)(r,l)];case 2:m=g.sent(),t=m.isSchedule,n=m.monitoringControlDeviceType,localStorage.getItem(m.deviceID)&&localStorage.getItem(m.deviceID).length>0&&(-1!=n.indexOf("OneRelay")?(h=JSON.parse(localStorage.getItem(m.deviceID)),this.setState({I1RelayBoardInfo:h,modelChanged:!1,currentChange:""})):(p=JSON.parse(localStorage.getItem(m.deviceID)),this.setState({RelayBoardInfo:p,modelChanged:!1,currentChange:""}))),this.setState({Moncon:m,EquipmentList:s,scheduleSelected:t,relayControlType:n},function(){return b(y,void 0,void 0,function(){return f(this,function(e){return this._fetchRelayCensorStatus(!0),-1!=n.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(!0):-1!=n.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(!0):this._fetchV4RelayBoardInfo(!0),this._fetchCeilingSensorBoardInfo(!0),this.fetchRelayControlSettings(),[2]})})}),Object(u.a)(!1),g.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return b(this,void 0,void 0,function(){var t,n,a,r=this;return f(this,function(c){return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.props.buildingName,a="",t.sensors&&t.sensors.map(function(e){return b(r,void 0,void 0,function(){var t,r;return f(this,function(c){switch(c.label){case 0:return a=e.value,t=Object(),[4,Object(i.d)(a,n)];case 1:return"CeilingSensor"!=(t=c.sent()).monitoringControlDeviceType?[3,3]:[4,Object(l.l)(t).then(function(e){return!e||e&&e.error?(Object(o.a)("Error occurred while fetching ceiling sensor board info."),Object()):e}).catch(function(e){return Object()})];case 2:return r=c.sent(),this.setState({CeilingSensorBoardInfo:r,modelChanged:!1,currentChange:""}),[2];case 3:return[2]}})})}),e&&Object(u.a)(!1),[2]})})},t.prototype._fetchI1RelayBoardInfo=function(e){return b(this,void 0,void 0,function(){var t,n,a;return f(this,function(r){switch(r.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state.I1RelayStatus,[4,Object(l.n)(t).then(function(e){return!e||e&&e.error?(Object(o.a)("Error occurred while fetching relay board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return(a=r.sent()).relay_state&&a.relay_state[0]&&(n="1"==a.relay_state[0]),a.relay_state&&0==a.relay_state[0]&&(n=!1),this.setState({I1RelayBoardInfo:a,modelChanged:!1,currentChange:"",I1RelayStatus:n}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchV4RelayBoardInfo=function(e){return b(this,void 0,void 0,function(){var t,n,a,r,i,c,s,d,m;return f(this,function(b){switch(b.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,r=n.relay2Status,i=n.relay3Status,c=n.relay4Status,s=Object(),[4,Object(l.y)(t).then(function(e){return!e||e&&e.error?(Object(o.a)("Error occurred while fetching relay board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return(s=b.sent()).relay_state&&(d=this.ConvertDecimalToBinary(parseInt(s.relay_state)),m=d.split(","),a="1"==m[0],r="1"==m[1],i="1"==m[2],c="1"==m[3]),this.setState({RelayBoardInfo:s,Old_RelayBoardInfo:h({},s),modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:r,relay3Status:i,relay4Status:c}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchI4RelayBoardInfo=function(e){return b(this,void 0,void 0,function(){var t,n,a,r,i,c,s;return f(this,function(d){switch(d.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,r=n.relay2Status,i=n.relay3Status,c=n.relay4Status,s=Object(),[4,Object(l.o)(t).then(function(e){return!e||e&&e.error?(Object(o.a)("Error occurred while fetching relay board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return s=d.sent(),a=120==s.voltage_volts_Ch1,r=120==s.voltage_volts_Ch2,i=120==s.voltage_volts_Ch3,c=120==s.voltage_volts_Ch4,this.setState({modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:r,relay3Status:i,relay4Status:c,I4RelayBoardInfo:s}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchRelayCensorStatus=function(e){return b(this,void 0,void 0,function(){var t,n,a,r=this;return f(this,function(i){switch(i.label){case 0:return e&&Object(u.a)(!0),t=this.props,n=t.buildingName,a=t.RelayDeviceName,[4,Object(l.v)(n,a).then(function(e){var t=e[0];if(!t)return r.setState({relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1}),Object();var n=Object();n.relayStatus=[],n.controlStatus=Object(c.g)(t.controlStatus),n.deviceType=Object(c.g)(t.deviceType);var a=r.state,l=a.relay1Status,i=a.relay2Status,o=a.relay3Status,s=a.relay4Status,u=a.relayControlStatus,d=a.I1RelayStatus,m=a.relayOptimizeSettings,h=Object(c.g)(t.relayStatus).split(",");-1!=n.deviceType.indexOf("OneRelay")?(h&&(d="1"==h[0],n.relayStatus=h),u=Object(c.g)(t.controlStatus),r.setState({I1RelayStatus:d,relayControlStatus:u})):(h&&(l="1"==h[0],i="1"==h[1],o="1"==h[2],s="1"==h[3],n.relayStatus=h),u=Object(c.g)(t.controlStatus),r.setState({relay1Status:l,relay2Status:i,relay3Status:o,relay4Status:s,relayControlStatus:u}));var b="Optimize"==n.controlStatus||"Normal"==n.controlStatus;(m=Object(c.g)(t.relayOptimizeSettings))||(m=-1==n.deviceType.indexOf("OneRelay")?",,,,":""),r.setState({isOptimizeControl:b,isOptimizeControlStatus:b?n.controlStatus:"",relayOptimizeSettings:m})}).catch(function(e){return Object()})];case 1:return i.sent(),e&&Object(u.a)(!1),[2]}})})},t.prototype.fetchRelayControlSettings=function(){return b(this,void 0,void 0,function(){var e,t,n,a,r,i;return f(this,function(o){switch(o.label){case 0:return e=this.props.RelayDeviceName,t=this.state,n=t.relayControlType,a=t.RelayBoardControl,[4,Object(l.w)(e)];case 1:return(r=o.sent())[0]?(i=r[0],n&&-1==n.indexOf("OneRelay")?a.relays="1,2,3,4":a.relays="OneRelay",a.controlChoice=Object(c.g)(i.controlChoice),a.relayNames=Object(c.g)(i.relayNames),a.lightingTypes=Object(c.g)(i.lightingTypes)):n&&-1==n.indexOf("OneRelay")?(a.relays="1,2,3,4",a.controlChoice="0,0,0,0",a.relayNames="Relay 1,Relay 2,Relay 3,Relay 4",a.lightingTypes="0,0,0,0"):(a.relays="OneRelay",a.controlChoice="0",a.relayNames="Relay",a.lightingTypes="0"),this.setState({RelayBoardControl:a}),[2]}})})},t.prototype.ConvertDecimalToBinary=function(e){for(var t=[],n=e;n>0;)n%2==0?t.push("0"):t.push("1"),n=Math.floor(n/2);if(-1==this.state.relayControlType.indexOf("OneRelay"))for(var a=4-t.length,r=0;r<a;r++)t.push("0");return t.reverse().join(",")},t.prototype.handleRelayOnOff=function(e,t){var n=this.state,a=n.relay1Status,r=n.relay2Status,l=n.relay3Status,i=n.relay4Status;1==t&&(a=e),2==t&&(r=e),3==t&&(l=e),4==t&&(i=e),this.setState({modelChanged:!0,relayisOnNo:t,relayisOn:e,relay1Status:a,relay2Status:r,relay3Status:l,relay4Status:i})},t.prototype.handleI1RelayOnOff=function(e){this.setState({I1RelayStatus:e,modelChanged:!0})},t.prototype.handleChange=function(e,t){var n=this.state.RelayBoardInfo;n[e]=t,this.setState({RelayBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.handleRelayOptimizeSettings=function(e,t){return b(this,void 0,void 0,function(){var n,a,r,l,i,c;return f(this,function(o){return n=this.state,a=n.relayOptimizeSettings,r=n.isOptimizeControl,l=n.modelChanged,i=n.relayNoOptimize,(c=a.split(","))[t]=e,r=!0,l=!0,a=c.join(","),i=t+1,this.setState({isOptimizeControlStatus:e,relayOptimizeSettings:a,isOptimizeControl:r,modelChanged:l,relayNoOptimize:i}),[2]})})},t.prototype.handleRelayControlStatus=function(e){return b(this,void 0,void 0,function(){var t=this;return f(this,function(n){switch(n.label){case 0:if("Schedule"==e)this.handleScheduleSelection(!0);else{if("Optimize"==e)return this.setState({modelChanged:!0,isOptimizeControl:!0,relayControlStatus:e,currentChange:"Optimize"}),[2];this.state.scheduleSelected&&this.handleScheduleSelection(!1)}return[4,this.saveRelayStatusChanges(e).then(function(){t.setState({relayControlStatus:e,isOptimizeControl:!1})})];case 1:return n.sent(),[2]}})})},t.prototype.cancelSend=function(){var e=this.state,t=e.relay1Status,n=e.relay2Status,a=e.relay3Status,r=e.relay4Status,l=e.I1RelayStatus,i=e.relayCensorStatus,c=e.relayControlType,o=e.relayOptimizeSettings,s=e.isOptimizeControl,u=e.relayNoOptimize;if(-1!=c.indexOf("OneRelay"))l=!l,this.setState({I1RelayStatus:l,modelChanged:!1,isOptimizeControl:!1});else{if(i&&i.relayStatus&&i.relayStatus.length>0&&(t="1"==i.relayStatus[0],n="1"==i.relayStatus[1],a="1"==i.relayStatus[2],r="1"==i.relayStatus[3],this.setState({relay1Status:t,relay2Status:n,relay3Status:a,relay4Status:r})),s){var d=o.split(",");d[u]="Normal"==d[u]?"Optimize":"Normal",o=d.join(",")}this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",relayOptimizeSettings:o,relayNoOptimize:0})}},t.prototype.setOptimizeSettings=function(){return b(this,void 0,void 0,function(){var e,t,n,a=this;return f(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.RelayDeviceName,[4,Object(l.b)(t,n).then(function(e){return b(a,void 0,void 0,function(){var t,a,r,i,s,u,d,m,h=this;return f(this,function(p){switch(p.label){case 0:return t=Object(),e[0]?(t.device=Object(c.g)(e[0].device),t.A1=Object(c.g)(e[0].A1),t.A2=Object(c.g)(e[0].A2),t.B1=Object(c.g)(e[0].B1),t.B2=Object(c.g)(e[0].B2),t.C1=Object(c.g)(e[0].C1),t.C2=Object(c.g)(e[0].C2),t.D1=Object(c.g)(e[0].D1),t.D2=Object(c.g)(e[0].D2),t.E1=Object(c.g)(e[0].E1),t.E2=Object(c.g)(e[0].E2),t.F1=Object(c.g)(e[0].F1),t.F2=Object(c.g)(e[0].F2),t.G1=Object(c.g)(e[0].G1),t.G2=Object(c.g)(e[0].G2)):(t.device=n,t.A1="0",t.A2="0",t.B1="0",t.B2="0",t.C1="0",t.C2="0",t.D1="0",t.D2="0",t.E1="0",t.E2="0",t.F1="0",t.F2="0",t.G1="0",t.G2="0"),a=Object(),r=this.state,i=r.Moncon,s=r.relayNoOptimize,u=r.relayControlType,d=r.relayOptimizeSettings,m=d.split(","),a.isOptimize="Optimize"==m[s-1],a.isOptimize?(a.varA=parseInt(t.A2),a.varB=parseInt(t.B2),a.varC=parseInt(t.C2),a.varD=parseInt(t.D2),a.varE=parseInt(t.E2),a.varF=parseInt(t.F2),a.varG=parseInt(t.G2)):(a.varA=parseInt(t.A1),a.varB=parseInt(t.B1),a.varC=parseInt(t.C1),a.varD=parseInt(t.D1),a.varE=parseInt(t.E1),a.varF=parseInt(t.F1),a.varG=parseInt(t.G1)),a.deviceID=i.deviceName,a.relaynum=""+s,a.rlb_add=i.boardAddress,i.wirelessConfig.ipAddress&&(a.controllerPI=i.wirelessConfig.ipAddress),i.wirelessConfig.controllerIPAddress&&(a.controllerPI=i.wirelessConfig.controllerIPAddress),-1!=u.toLowerCase().indexOf("v1")?a.rlb_ver="v1":-1!=u.toLowerCase().indexOf("v4")?a.rlb_ver="v4":-1!=u.toLowerCase().indexOf("i1")?a.rlb_ver="i1":-1!=u.toLowerCase().indexOf("i4")&&(a.rlb_ver="i4"),[4,Object(l.H)(a).then(function(e){return b(h,void 0,void 0,function(){return f(this,function(t){return e?Object(o.b)("Settings posted successfully. "):e.error&&Object(o.a)(e.reason),[2]})})}).catch(function(e){Object(o.a)("Some error orccured. ")})];case 1:return p.sent(),[2]}})})})];case 1:return r.sent(),[2]}})})},t.prototype.resetChanges=function(e){return b(this,void 0,void 0,function(){var t=this;return f(this,function(n){return this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:""},function(){return b(t,void 0,void 0,function(){var t;return f(this,function(n){switch(n.label){case 0:return t=this.state.relayControlType,[4,this._fetchRelayCensorStatus(e)];case 1:return n.sent(),-1!=t.indexOf("OneRelay")?this._fetchI1RelayBoardInfo(e):this._fetchV4RelayBoardInfo(e),[4,this._fetchCeilingSensorBoardInfo(e)];case 2:return n.sent(),[2]}})})}),[2]})})},t.prototype.handleScheduleSelection=function(e){return b(this,void 0,void 0,function(){var t=this;return f(this,function(n){switch(n.label){case 0:return[4,Object(l.N)(this.props.RelayDeviceName,e)];case 1:return n.sent(),e?Object(o.b)("Successfully Selected Schedule"):Object(o.b)("Successfully unSelected Schedule"),this.setState({scheduleSelected:e},function(){-1!=t.state.relayControlType.indexOf("OneRelay")?t._fetchI1RelayBoardInfo(!0):t._fetchV4RelayBoardInfo(!0),t._fetchCeilingSensorBoardInfo(!0)}),[2]}})})},t.prototype.saveRelayStatusChanges=function(e){return b(this,void 0,void 0,function(){var t,n,a,r,i,c,s,d,m,h,b,p,y;return f(this,function(f){return Object(u.a)(!0),t=this.props,n=t.buildingName,a=t.RelayDeviceName,r=this.state,i=r.relay1Status,c=r.relay2Status,s=r.relay3Status,d=r.relay4Status,m=r.relayCensorStatus,h=r.relayControlType,b=r.I1RelayStatus,p=r.relayOptimizeSettings,y=[],-1!=h.indexOf("OneRelay")?y.push(b?"1":"0"):(y.push(i?"1":"0"),y.push(c?"1":"0"),y.push(s?"1":"0"),y.push(d?"1":"0")),m.relayStatus=y,m.controlStatus=e,m.deviceType=h,m.device=a,m.relayOptimizeSettings=p.split(","),console.log(JSON.stringify(m)),Object(l.L)(n,m).then(function(e){}).catch(function(e){Object(o.a)("Some error orccured. ")}),Object(u.a)(!1),[2]})})},t.prototype.applyChanges=function(){return b(this,void 0,void 0,function(){var e=this;return f(this,function(t){return Object(u.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return b(e,void 0,void 0,function(){var e,t,n,a,r,i,c,s,d=this;return f(this,function(m){switch(m.label){case 0:return Object(u.a)(!0),e=this.state,t=e.Moncon,n=e.relayisOnNo,a=e.relayisOn,r=e.relayControlStatus,i=e.I1RelayStatus,c=e.relayControlType,s=e.isOptimizeControl,[4,this.saveRelayStatusChanges(r)];case 1:return m.sent(),s?this.setOptimizeSettings():-1!=c.indexOf("OneRelay")?-1!=c.indexOf("V1")||Object(l.C)(t,i).then(function(e){return b(d,void 0,void 0,function(){return f(this,function(t){return e?Object(o.b)("Changes applied successfully. "):e.error&&Object(o.a)(e.reason),[2]})})}).catch(function(e){Object(o.a)("Some error orccured. ")}):-1!=c.indexOf("V4")?Object(l.I)(t,!1,a,n).then(function(e){return b(d,void 0,void 0,function(){return f(this,function(t){return e?Object(o.b)("Changes applied successfully. "):e.error&&Object(o.a)(e.reason),[2]})})}).catch(function(e){Object(o.a)("Some error orccured. ")}):Object(l.D)(t,!1,a,n).then(function(e){return b(d,void 0,void 0,function(){return f(this,function(t){return e?Object(o.b)("Changes applied successfully. "):e.error&&Object(o.a)(e.reason),[2]})})}).catch(function(e){Object(o.a)("Some error orccured. ")}),this.setState({isOptimizeControl:!1}),Object(u.a)(!1),[2]}})})}),[2]})})},t.prototype.render=function(){var e,t,n,l=this,i=this.state,c=i.CeilingSensorBoardInfo,o=i.Moncon,u=i.modelChanged,d=i.currentChange,m=i.detailsExpanded,h=i.localBTNState,b=i.RelayBoardInfo,f=i.relayControlStatus,p=i.relayisOn,y=i.relayisOnNo,g=i.relay1Status,E=i.relay2Status,v=i.relay3Status,O=i.relay4Status,C=i.relayControlType,S=i.I1RelayBoardInfo,_=i.I1RelayStatus,N=i.isOptimizeControl,I=i.isOptimizeControlStatus,w=i.RelayBoardControl,j=i.relayOptimizeSettings,R=i.I4RelayBoardInfo,x=this.props,T=x.instance,z=x.buildingName,A=x.RelayDeviceName,P=x.type,D="Local"!=f;return e=w.relayNames&&w.relayNames.split(","),t=w.lightingTypes&&w.lightingTypes.split(","),n=j&&j.split(","),a.createElement(r.AppContext.Consumer,null,function(r){return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(s.a,{InsightName:A,ControlName:"RelayControl",buildingName:z,instance:T,type:P}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h3",{className:"title"},a.createElement("strong",null,o.rdfsLabel)," "),a.createElement("h4",{className:"title"},a.createElement("strong",null,l.props.type.toUpperCase(),":",o&&o.relatedEquipment.map(function(e,t){return a.createElement("span",{key:t},t+1==o.relatedEquipment.length?"":",")}))))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},-1!=C.indexOf("OneRelay")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-8 InsightRow"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("h4",{className:"padding-5 margin-5"},"Power Watts: ",a.createElement("b",null,S&&S.active_power_Watts?S.active_power_Watts:0," ")),a.createElement("h4",{className:"padding-5 margin-5"},"Amperes: ",a.createElement("b",null,S&&S.current_Amperes?S.current_Amperes:0)),a.createElement("h4",{className:"padding-5 margin-5"},"Frequency Hz: ",a.createElement("b",null,S&&S.frequency_Hz?S.frequency_Hz:0))),a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("h4",{className:"padding-5 margin-5"},"Energy Watt/Hour: ",a.createElement("b",null,S&&S.import_active_energy_Wh?S.import_active_energy_Wh:0," ")),a.createElement("h4",{className:"padding-5 margin-5"},"Power Factor: ",a.createElement("b",null,S&&S.power_factor?S.power_factor:0)),a.createElement("h4",{className:"padding-5 margin-5"},"Voltage volts: ",a.createElement("b",null,S&&S.voltage_volts?S.voltage_volts:0))))),a.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},a.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",a.createElement("b",null,b&&b.nominal_src_volts?b.nominal_src_volts:0," ")),a.createElement("h4",{className:"padding-5 margin-5"},"Illumiance: ",a.createElement("b",null,c&&c.illuminance_lux?c.illuminance_lux:0," Lumens")),a.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",a.createElement("b",null,c&&c.illuminance_lux&&c.motion_sensed>0?"True":"False")))),-1==C.indexOf("OneRelay")&&a.createElement("div",{className:"col-md-12 InsightRow"},a.createElement("table",{className:"table table-striped"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",null,a.createElement("b",null,"Amperes")),a.createElement("th",null,a.createElement("b",null,"Power Watt")),-1!=C.toLowerCase().indexOf("i4")&&a.createElement(a.Fragment,null,a.createElement("th",null,a.createElement("b",null,"Frequency")),a.createElement("th",null,a.createElement("b",null,"Energy")),a.createElement("th",null,a.createElement("b",null,"Power Factor")),a.createElement("th",null,a.createElement("b",null,"Voltage"))),a.createElement("th",null,"Manual"==f?"Status":""),a.createElement("th",null,"Optimize Settings"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("b",null,e&&e[0])),-1!=C.toLowerCase().indexOf("v4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,b&&b.mAmps_relay1?b.mAmps_relay1:0," A")),a.createElement("td",null,a.createElement("b",null,b&&b.power_Wt_relay1?b.power_Wt_relay1:0," W"))),-1!=C.toLowerCase().indexOf("i4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,R&&R.current_Amperes_Ch1?R.current_Amperes_Ch1:0," A")),a.createElement("td",null,a.createElement("b",null,R&&R.active_power_Watts_Ch1?R.active_power_Watts_Ch1:0," W")),a.createElement("td",null,a.createElement("b",null,R&&R.frequency_Hz_Ch1?R.active_power_Watts_Ch1:0," Hz")),a.createElement("td",null,a.createElement("b",null,R&&R.import_active_energy_Wh_Ch1?R.active_power_Watts_Ch1:0," Wh")),a.createElement("td",null,a.createElement("b",null,R&&R.power_factor_Ch1?R.active_power_Watts_Ch1:0)),a.createElement("td",null,a.createElement("b",null,R&&R.voltage_volts_Ch1?R.active_power_Watts_Ch1:0," volts"))),a.createElement("td",null,"Manual"==f&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",className:g?"btn":"btn btn-fill",disabled:u,onClick:function(){l.handleRelayOnOff(!1,1)}},"Off"),a.createElement("button",{type:"button",className:g?"btn btn-fill":"btn",disabled:u,onClick:function(){l.handleRelayOnOff(!0,1)}},"On"))),a.createElement("td",null,t&&"C"!=t[0]&&a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Normal",0)}},"Normal"),a.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),a.createElement("tr",null,a.createElement("td",null,a.createElement("b",null,e&&e[1])),-1!=C.toLowerCase().indexOf("v4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,b&&b.mAmps_relay2?b.mAmps_relay2:0," A")),a.createElement("td",null,a.createElement("b",null,b&&b.power_Wt_relay2?b.power_Wt_relay2:0," W"))),-1!=C.toLowerCase().indexOf("i4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,R&&R.current_Amperes_Ch2?R.current_Amperes_Ch2:0," A")),a.createElement("td",null,a.createElement("b",null,R&&R.active_power_Watts_Ch2?R.active_power_Watts_Ch2:0," W")),a.createElement("td",null,a.createElement("b",null,R&&R.frequency_Hz_Ch2?R.active_power_Watts_Ch2:0," Hz")),a.createElement("td",null,a.createElement("b",null,R&&R.import_active_energy_Wh_Ch2?R.active_power_Watts_Ch2:0," Wh")),a.createElement("td",null,a.createElement("b",null,R&&R.power_factor_Ch2?R.active_power_Watts_Ch2:0)),a.createElement("td",null,a.createElement("b",null,R&&R.voltage_volts_Ch2?R.active_power_Watts_Ch2:0," volts"))),a.createElement("td",null,"Manual"==f&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",className:E?"btn":"btn btn-fill",disabled:u,onClick:function(){l.handleRelayOnOff(!1,2)}},"Off"),a.createElement("button",{type:"button",className:E?"btn btn-fill":"btn",disabled:u,onClick:function(){l.handleRelayOnOff(!0,2)}},"On"))),a.createElement("td",null,t&&"C"!=t[1]&&a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:n&&"Normal"==n[1]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Normal",1)}},"Normal"),a.createElement("button",{type:"button",className:n&&"Optimize"==n[1]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Optimize",1)}},"Optimize")))),a.createElement("tr",null,a.createElement("td",null,a.createElement("b",null,e&&e[2])),-1!=C.toLowerCase().indexOf("v4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,b&&b.mAmps_relay3?b.mAmps_relay3:0," A")),a.createElement("td",null,a.createElement("b",null,b&&b.power_Wt_relay3?b.power_Wt_relay3:0," W"))),-1!=C.toLowerCase().indexOf("i4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,R&&R.current_Amperes_Ch3?R.current_Amperes_Ch3:0," A")),a.createElement("td",null,a.createElement("b",null,R&&R.active_power_Watts_Ch3?R.active_power_Watts_Ch3:0," W")),a.createElement("td",null,a.createElement("b",null,R&&R.frequency_Hz_Ch3?R.active_power_Watts_Ch3:0," Hz")),a.createElement("td",null,a.createElement("b",null,R&&R.import_active_energy_Wh_Ch3?R.active_power_Watts_Ch3:0," Wh")),a.createElement("td",null,a.createElement("b",null,R&&R.power_factor_Ch3?R.active_power_Watts_Ch3:0)),a.createElement("td",null,a.createElement("b",null,R&&R.voltage_volts_Ch3?R.active_power_Watts_Ch3:0," volts"))),a.createElement("td",null,"Manual"==f&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",className:v?"btn":"btn btn-fill",disabled:u,onClick:function(){l.handleRelayOnOff(!1,3)}},"Off"),a.createElement("button",{type:"button",className:v?"btn btn-fill":"btn",disabled:u,onClick:function(){l.handleRelayOnOff(!0,3)}},"On"))),a.createElement("td",null,t&&"C"!=t[2]&&a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:n&&"Normal"==n[2]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Normal",2)}},"Normal"),a.createElement("button",{type:"button",className:n&&"Optimize"==n[2]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Optimize",2)}},"Optimize")))),a.createElement("tr",null,a.createElement("td",null,a.createElement("b",null,e&&e[3])),-1!=C.toLowerCase().indexOf("v4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,b&&b.mAmps_relay4?b.mAmps_relay4:0," A")),a.createElement("td",null,a.createElement("b",null,"-"))),-1!=C.toLowerCase().indexOf("i4")&&a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("b",null,R&&R.current_Amperes_Ch4?R.current_Amperes_Ch4:0," A")),a.createElement("td",null,a.createElement("b",null,R&&R.active_power_Watts_Ch4?R.active_power_Watts_Ch4:0," W")),a.createElement("td",null,a.createElement("b",null,R&&R.frequency_Hz_Ch4?R.active_power_Watts_Ch4:0," Hz")),a.createElement("td",null,a.createElement("b",null,R&&R.import_active_energy_Wh_Ch4?R.active_power_Watts_Ch4:0," Wh")),a.createElement("td",null,a.createElement("b",null,R&&R.power_factor_Ch4?R.active_power_Watts_Ch4:0)),a.createElement("td",null,a.createElement("b",null,R&&R.voltage_volts_Ch4?R.active_power_Watts_Ch4:0," volts"))),a.createElement("td",null,"Manual"==f&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",className:O?"btn":"btn btn-fill",disabled:u,onClick:function(){l.handleRelayOnOff(!1,4)}},"Off"),a.createElement("button",{type:"button",className:O?"btn btn-fill":"btn",disabled:u,onClick:function(){l.handleRelayOnOff(!0,4)}},"On"))),a.createElement("td",null,t&&"C"!=t[3]&&a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:n&&"Normal"==n[3]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Normal",3)}},"Normal"),a.createElement("button",{type:"button",className:n&&"Optimize"==n[3]?"btn btn-fill":"btn",disabled:N,onClick:function(){l.handleRelayOptimizeSettings("Optimize",3)}},"Optimize"))))))),a.createElement("div",{className:"col-md-8 col-xs-12 InsightRow"},-1!=C.indexOf("OneRelay")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-6"},"Manual"==f&&a.createElement(a.Fragment,null,a.createElement("div",{className:"RelayHeading"},"Relay Status"),a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:_?"btn":"btn btn-fill",disabled:u,onClick:function(){l.handleI1RelayOnOff(!1)}},"Off"),a.createElement("button",{type:"button",className:_?"btn btn-fill":"btn",disabled:u,onClick:function(){l.handleI1RelayOnOff(!0)}},"On")))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"RelayHeading"},"Optimize Settings"),a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",onClick:function(){l.handleRelayOptimizeSettings("Normal",0)}},"Normal"),a.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",onClick:function(){l.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),-1==C.indexOf("OneRelay")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-4"},a.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",a.createElement("b",null,b&&b.nominal_src_volts?b.nominal_src_volts:0," "))),a.createElement("div",{className:"col-md-4"},a.createElement("h4",{className:"padding-5 margin-5"},"Illumiance: ",a.createElement("b",null,c&&c.illuminance_lux?c.illuminance_lux:0," Lumens"))),a.createElement("div",{className:"col-md-4"},a.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",a.createElement("b",null,c&&c.illuminance_lux&&c.motion_sensed>0?"True":"False"))))),a.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:"Local"==f?"btn btn-success btn-fill":"btn btn-success",disabled:""!=d&&"state"!=d,onClick:function(){l.handleRelayControlStatus("Local")}},"Local"),a.createElement("button",{type:"button",className:D?"btn btn-success btn-fill":"btn btn-success",disabled:""!=d&&"state"!=d},"Remote"),a.createElement("button",{type:"button",className:"Manual"==f?"btn btn-success btn-fill":"btn btn-success",disabled:""!=d&&"state"!=d||h,onClick:function(){l.handleRelayControlStatus("Manual")}},"Manual"),a.createElement("button",{type:"button",className:"Schedule"==f?"btn btn-success btn-fill":"btn btn-success",disabled:""!=d&&"state"!=d||h,onClick:function(){l.handleRelayControlStatus("Schedule")}},"Schedule")))),a.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},a.createElement("div",{className:"",id:"headingOne"},a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){l.setState({detailsExpanded:!m})}},a.createElement("i",{className:m?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}))),a.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},a.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},a.createElement("h5",{className:"title"},a.createElement("strong",null,"IP Address:")," ",o.wirelessConfig&&o.wirelessConfig.ipAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Controller IP Address:")," ",o.wirelessConfig&&o.wirelessConfig.controllerIPAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Manufacturer:")," ",o.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Model:")," ",o.model),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Board Address:")," ",o.boardAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Device ID:")," ",o.deviceID?o.deviceID:"")))),a.createElement("div",{className:u?"InsightApplyChanges":"hidden"},N?a.createElement("h4",null,"Do you want to apply these changes (Optimize Settings: ",I,") ?"):a.createElement("h4",null,"Do you want to apply these changes (Relay ",-1!=C.indexOf("OneRelay")?" : "+(_?"on":"off"):y+" : "+(p?"on":"off"),")?"),a.createElement("div",null,a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return l.cancelSend()}},"Cancel"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return l.resetChanges(!0)}},"Reset"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return l.applyChanges()}},"Apply Changes")))))))))})},t}(a.Component);t.default=p},727:function(e,t,n){"use strict";t.s=function(e,t,n,o){return i(this,void 0,void 0,function(){return c(this,function(i){switch(i.label){case 0:return[4,Object(l.f)({buildingName:e,equipment:t,isEdit:n},l.a.EQUIPMENT.SaveEquipment,a.b.EQUIP).then(function(){1==o||Object(r.b)("Equipment "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Equipment.")})];case 1:return[2,i.sent()]}})})},t.q=function(e,t,n,o){return i(this,void 0,void 0,function(){var i;return c(this,function(c){switch(c.label){case 0:return i=!!n.name,[4,Object(l.f)({buildingName:e,equipmentName:t,component:n,counter:o},l.a.EQUIPMENT.SaveComponent,a.b.EQUIP).then(function(){Object(r.b)("Component(s) "+(i?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Component(s).")})];case 1:return[2,c.sent()]}})})},t.t=function(e,t,n,o){return i(this,void 0,void 0,function(){return c(this,function(i){switch(i.label){case 0:return[4,Object(l.f)({isEdit:e,buildingName:t,equipmentName:n,lightingInformation:o},l.a.EQUIPMENT.SaveLightingInformation,a.b.EQUIP).then(function(){Object(r.b)("Lighting Info "+(e?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Lighting Info.")})];case 1:return[2,i.sent()]}})})},t.u=function(e,t,n,o,s){return i(this,void 0,void 0,function(){return c(this,function(i){switch(i.label){case 0:return[4,Object(l.f)({isEdit:e,buildingName:t,equipmentName:n,plugLoadModel:o,isCustom:s},l.a.EQUIPMENT.SavePlugLoadModel,a.b.EQUIP).then(function(){Object(r.b)("Plugload Info "+(e?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Plugload Info.")})];case 1:return[2,i.sent()]}})})},t.d=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(l.e)({buildingName:e},l.a.EQUIPMENT.FetchEquipments,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.l=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,equipmentName:t},l.a.EQUIPMENT.GetEquipmentDetails,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.e=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(l.e)({buildingName:e},l.a.EQUIPMENT.GetAllCoolingAndHeatingEquipmentsList,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.f=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(l.e)({buildingName:e},l.a.EQUIPMENT.GetAllEquipmentExceptCoolingAndHeatingList,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.g=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(l.e)({buildingName:e},l.a.EQUIPMENT.GetAllEquipmentsList,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.m=function(){return i(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Object(l.e)({},l.a.EQUIPMENT.GetEquipmentTypeList,a.b.EQUIP)];case 1:return[2,e.sent()]}})})},t.o=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({typeName:e,distance:t},l.a.EQUIPMENT.GetSubClassTypeListForEquipment,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.j=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({typeName:e,distance:t},l.a.EQUIPMENT.GetComponentTypesList,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.i=function(){return i(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Object(l.e)({},l.a.EQUIPMENT.GetComponentSubclassList,a.b.EQUIP)];case 1:return[2,e.sent()]}})})},t.r=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(l.f)({componentType:e},l.a.EQUIPMENT.SaveComponentSubClass,a.b.EQUIP).then(function(){Object(r.b)("Component Type Added Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Component Type.")})];case 1:return[2,t.sent()]}})})},t.c=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(l.e)({buildingName:e},l.a.EQUIPMENT.FetchEquipmentExportData,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.k=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,equipmentName:t},l.a.EQUIPMENT.GetComponents,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.h=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,component:t},l.a.EQUIPMENT.GetComponentPoints,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.n=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,equipmentName:t},l.a.EQUIPMENT.GetFixtures,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,equipmentName:t},l.a.EQUIPMENT.GetTypeByEquipmentName,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.b=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,equipmentName:t},l.a.EQUIPMENT.FetchPowerSource,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e,equipmentName:t},l.a.EQUIPMENT.FetchPlugLoad,a.b.EQUIP)];case 1:return[2,n.sent()]}})})};var a=n(7),r=n(6),l=n(5),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function c(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}o((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}},793:function(e,t,n){"use strict";t.b=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return[4,Object(l.f)({model:e,buildingName:t,isEdit:n},l.a.DEVICES.UPDATEDEVICE,a.b.POINT).then(function(){Object(r.b)("Device "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Device.")})];case 1:return[2,i.sent()]}})})},t.e=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({buildingName:e},l.a.DEVICES.GETDEVICEDETAIL,a.b.POINT,t)];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(l.e)({DeviceID:e,buildingName:t},l.a.DEVICES.CheckDeviceID,a.b.POINT)];case 1:return[2,n.sent()]}})})},t.f=function(){return c(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(l.e)({},l.a.DEVICES.GETDEVICETYPELIST,a.b.POINT)];case 1:return[2,e.sent()]}})})},t.g=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(l.f)({newEquipmentType:e,buildingName:t},l.a.DEVICES.SaveEquipmentType,a.b.POINT).then(function(){Object(r.b)("New Equipment Type Added Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving New Equipment type.")})];case 1:return[2,n.sent()]}})})},t.d=function(e,t){return c(this,void 0,void 0,function(){var n,r,s,u,d,m;return o(this,function(h){switch(h.label){case 0:return t?[4,function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Object(l.e)({buildingName:e,pointName:t,deviceName:n},l.a.DEVICES.GETDEVICEDETAIL,a.b.POINT)];case 1:return[2,r.sent()]}})})}(t,null,e)]:[2];case 1:return n=h.sent(),r=Object(),n&&n.length>0&&(s=n[0],r.monitoringControl=Object(i.g)(s.moncondevice),r.monitoringControlDeviceType=Object(i.g)(s.moncontype),r.deviceName=Object(i.g)(s.moncondevice),r.deviceID=Object(i.g)(s.deviceID),r.rdfsLabel=Object(i.g)(s.rdfsLabel),r.manufacturer=Object(i.g)(s.manufacturer),r.model=Object(i.g)(s.model),r.graphURL=Object(i.g)(s.graphURL),r.location=Object(i.g)(s.location),r.floor=Object(i.g)(s.floor),r.connectionType=Object(i.g)(s.connectiontype),r.notes=Object(i.g)(s.notes),r.setpointRangeFrom=Object(i.g)(s.setpointRangeFrom),r.setpointRangeTo=Object(i.g)(s.setpointRangeTo),r.createdby=Object(i.g)(s.createdby),r.adminPassword=Object(i.g)(s.adminPassword),r.onitUrlLink=Object(i.g)(s.onitUrlLink),r.relayLightingType=Object(i.g)(s.relayLightingType),r.boardAddress=Object(i.g)(s.boardAddress),u=[],s.relatedEquipment&&s.relatedEquipment.value&&(u=s.relatedEquipment.value.indexOf(",")>0?s.relatedEquipment.value.split(","):[s.relatedEquipment.value]),r.relatedEquipment=u.map(function(e,t){return{label:e,value:e}}),d=[],s.strategy&&s.strategy.value&&(d=s.strategy.value.indexOf(",")>0?s.strategy.value.split(","):[s.strategy.value]),r.strategy=d.map(function(e,t){return{label:e,value:e}}),m=[],s.sensors&&s.sensors.value&&(m=s.sensors.value.indexOf(",")>0?s.sensors.value.split(","):[s.sensors.value]),r.sensors=m.map(function(e,t){return{label:e,value:e}}),r.isExisting="false"!=Object(i.g)(s.isExisting),r.wirelessConfig={ipAddress:Object(i.g)(s.ipaddress),controllerIPAddress:Object(i.g)(s.controllerIPAddress),thermostatMacAddress:Object(i.g)(s.macaddress),ssid:Object(i.g)(s.ssid),password:Object(i.g)(s.password)},r.isSchedule="true"==Object(i.g)(s.isSchedule)),[2,r]}})})},t.c=function(e){return c(this,void 0,void 0,function(){var t,n,a,r;return o(this,function(l){if(t=[],e.length>0)for(n=0;n<e.length;n++)a=Object(),r=e[n],a.aa_DeviceName=r.moncontype,a.ab_DeviceID=r.deviceID,a.ac_Manufacturer=r.manufacturer,a.ad_Model=r.model,a.ba_Floor=r.rdfsLabelFloor,a.bb_FloorCode=r.floor,a.bc_Space=r.rdfsLabelLocation,a.bd_SpaceCode=r.location,a.ca_Equipment=r.rdfsLabel,a.cb_Equipmentcode=r.moncondevice,a.cc_Connection=r.connectiontype,a.cd_OnitUrlLink=r.onitUrlLink,t.push(a);return[2,t]})})};var a=n(7),r=n(6),l=n(5),i=n(8),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function c(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}o((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}},850:function(e,t,n){"use strict";var a=n(2),r=(n.n(a),n(23)),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return l(t,e),t.prototype.render=function(){var e=this.props,t=e.InsightName,n=e.buildingName,l=e.instance,i=e.ControlName,c=e.type;this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 "},a.createElement("ul",{className:"nav nav-tabs"},a.createElement("li",{className:window.location.hash.indexOf("/"+c+"/"+i+"/")>-1?"active":""},a.createElement(r.b,{to:"/"+l+"/"+n+"/Insights/"+c+"/"+i+"/"+t},"Current Values")),"Optimal"!=c&&a.createElement(a.Fragment,null,a.createElement("li",{className:window.location.hash.indexOf("Schedule")>-1?"active":""},a.createElement(r.b,{to:"/"+l+"/"+n+"/Insights/"+c+"/Schedule/"+i+"/"+t},"Schedule")),a.createElement("li",{className:window.location.hash.indexOf("Alarms")>-1?"active":""},a.createElement(r.b,{to:"/"+l+"/"+n+"/Insights/"+c+"/Alarms/"+i+"/"+t},"Alarms"))),a.createElement("li",{className:window.location.hash.indexOf("Graphs")>-1?"active":""},a.createElement(r.b,{to:"/"+l+"/"+n+"/Insights/"+c+"/Graphs/"+i+"/"+t},"Graphs")),a.createElement("li",{className:window.location.hash.indexOf("ADP")>-1?"active":""},a.createElement(r.b,{to:"/"+l+"/"+n+"/Insights/"+c+"/ADP/"+i+"/"+t},"ADP"))))))},t}(a.Component);t.a=i}});