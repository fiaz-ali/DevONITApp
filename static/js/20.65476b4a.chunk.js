webpackJsonp([20],{714:function(e,t,n){"use strict";t.g=function(e,t,n,c){return a(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(i.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},i.a.LIFE.SaveProject,r.b.LIFE).then(function(){Object(o.b)("Project saved Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Project.")})];case 1:return[2,a.sent()]}})})},t.r=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetProjectList,r.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteProject,r.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({model:e},i.a.LIFE.SaveProjectSolution,r.b.LIFE).then(function(){Object(o.b)("Solution saved Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({spreadSheetId:e,fileType:t},i.a.LIFE.ExportSheet,r.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e?[4,Object(i.e)({projectId:e},i.a.LIFE.GetSolutionList,r.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.u=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e?[4,Object(i.e)({inspectionOntology:e},i.a.LIFE.GetSolutionListForInspection,r.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.s=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({solutionId:e},i.a.LIFE.GetSolution,r.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteSolution,r.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({manageFile:e,fileData:t},i.a.LIFE.ManageFile,r.b.LIFE).then(function(){Object(o.b)("Upload Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({communityFile:e,fileData:t},i.a.LIFE.SaveCommunityFile,r.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetManageFile,r.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetCommunityFile,r.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ManageFile:e},i.a.LIFE.DeleteManageFile,r.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({communityFile:e},i.a.LIFE.DeleteCommunityFile,r.b.LIFE).then(function(){Object(o.b)(" Deleted Successfully.")}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetProject,r.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return a(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.SaveEmailAndDrive,r.b.LIFE)];case 1:return[2,o.sent()]}})})},t.j=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({email:e,instance:t},i.a.LIFE.ShareCommunityFolder,r.b.LIFE).then(function(e){e.result?Object(o.b)("Successfully Share."):Object(o.a)("The user Email is not valid.")}).catch(function(e){Object(o.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return a(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.ShareMMTemplateFolder,r.b.LIFE).then(function(e){e.result?Object(o.b)("Successfully Share."):Object(o.a)("The user Email is not valid.")}).catch(function(e){Object(o.a)("Something Went Wrong!")})];case 1:return[2,a.sent()]}})})},t.i=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({templatePurpose:e},i.a.LIFE.SaveTemplatePurpose,r.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetTemplatePurpose,r.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),i=e.getDate().toString().padStart(2,0),o=e.getHours().toString().padStart(2,0),r=e.getMinutes().toString().padStart(2,0),a=e.getSeconds().toString().padStart(2,0);return t+n+i+o+r+a};var i=n(11),o=n(21),r=n(13),a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}},866:function(e,t,n){"use strict";var i=n(2),o=(n.n(i),n(677)),r=n(680),a=n(54),s=n(20),c=n(716),l=n(8),u=n(711),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentConditions:[],ccLabel:[],labelsDropDownList:[],selectedAttachment:void 0},n.addItem=n.addItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCurrentConditionLabelChange=n.handleCurrentConditionLabelChange.bind(n),n.handleCCLabelChange=n.handleCCLabelChange.bind(n),n.removeItem=n.removeItem.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return d(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){return p(this,void 0,void 0,function(){return h(this,function(t){return e.buildingName&&e.instance&&this.setState({currentConditions:e.currentConditions}),[2]})})},t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){var e;return h(this,function(t){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e})),this.props.buildingName&&this.props.instance&&this.setState({currentConditions:this.props.currentConditions}),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.currentConditions;t.ccLabel.map(function(e){var t={preRCXName:"",ccBoolean:!1,ccLabel:e.value,proposedRCX:"",photo:"",entryTimeStamp:void 0};n||(n=[]),n.push(t)}),this.setState({currentConditions:n,ccLabel:[]},function(){return p(e,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.props.handleAdder(n,this.props.isInspectionOrCleanliness)];case 1:return e.sent(),[2]}})})})},t.prototype.removeItem=function(e){var t=this.state.currentConditions;t.splice(e,1),this.setState({currentConditions:t}),this.props.handleAdder(t,this.props.isInspectionOrCleanliness)},t.prototype.handleCurrentConditionLabelChange=function(e){var t=this.state.ccLabel;t=e,this.setState({ccLabel:t})},t.prototype.handleCCLabelChange=function(e){this.setState({ccLabel:e})},t.prototype.handleItemChange=function(e,t){var n=this,i=this.state.currentConditions,o=t.target.name,r=i&&i[e];r[""+o]="ccBoolean"==o?t.target.checked:t.target.value,this.setState({currentConditions:i},function(){"ccBoolean"!=o&&document.getElementById(n.props.isInspectionOrCleanliness+"rcxCC"+e).focus()}),this.props.handleAdder(i,this.props.isInspectionOrCleanliness)},t.prototype.handleFileAttachment=function(e,t){var n=this,i=this.props,o=i.buildingName,r=i.entityName,c=i.infoEntity,d=JSON.parse(l.a.getItem("user")),p=this.state.currentConditions,h=p[t];try{if(e&&e.name&&(e.file||e.length>0)&&h){var m,f,b=this.props.buildingName+"-_-"+Object(s.C)(10),C=e.name.substring(e.name.indexOf("."));m=""+b+C,f=e,p[t].photo=m,this.setState({currentConditions:p,selectedAttachment:e},function(){n.props.handleAdder(p,n.props.isInspectionOrCleanliness),(new a.b).UploadFile(a.a.DOCUMENT(),m,f,function(){var t={building:o,docOntology:Object(s.C)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:d.contact,enteredByName:d.name,entityOntology:[{label:"",value:r}],entityType:c,rdfsLabel:e.name,s3FileName:m,entryTimeStamp:(new Date).toString(),linkToDocument:m};Object(u.f)(t).then(function(){})})})}}catch(e){}},t.prototype.render=function(){var e=this,t=this.state,n=t.currentConditions,s=t.ccLabel,l=t.labelsDropDownList,u=this.props,d=u.hideAddButton,p=u.isView,h=u.isFromReport,m=new a.b;return i.createElement(i.Fragment,null,n&&n.map(function(t,n){var r="";return t.photo&&(t.photo.toLowerCase().indexOf(".mp4")>0&&(r="assets/img/video-file-icon.png"),t.photo.toLowerCase().indexOf(".pdf")>0&&(r="assets/img/pdf-file-icon.png"),(t.photo.toLowerCase().indexOf(".xls")>0||t.photo.toLowerCase().indexOf(".csv")>0)&&(r="assets/img/excel-file-icon.png"),(t.photo.toLowerCase().indexOf(".docx")>0||t.photo.toLowerCase().indexOf(".txt")>0)&&(r="assets/img/doc-file-icon.png"),(t.photo.toLowerCase().indexOf(".png")>0||t.photo.toLowerCase().indexOf(".jpeg")>0||t.photo.toLowerCase().indexOf(".jpg")>0||t.photo.toLowerCase().indexOf(".tiff")>0)&&(r=m.GetSignedURL(a.a.DOCUMENT(),t.photo))),i.createElement("div",{key:n,className:"row padding-5",style:{borderBottom:"1px dotted #20cac738"}},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"ccBoolean"+n},t.ccLabel)),i.createElement("div",{className:"col-md-1",style:{maxWidth:120}},i.createElement("div",{className:"switch-container"},"No / Yes",i.createElement("label",null,i.createElement("input",{id:"ccBoolean"+n,disabled:p,name:"ccBoolean",checked:t.ccBoolean,onChange:function(t){e.handleItemChange(n,t)},className:"switch",type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),!t.ccBoolean&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},i.createElement("label",{className:"pull-right",htmlFor:t.proposedRCX},"Describe Proposed RCX:")),i.createElement("div",{className:"col-md-4"},i.createElement("textarea",{disabled:p,id:e.props.isInspectionOrCleanliness+"rcxCC"+n,className:"form-control",value:t.proposedRCX,name:"proposedRCX",onChange:function(t){return e.handleItemChange(n,t)},style:{width:"100%",height:"60px",resize:"vertical"}})),i.createElement("div",{className:"col-md-1"},i.createElement("button",{type:"button",disabled:p||h,className:"btn btn-dark pull-right",style:{fontWeight:"bold",fontSize:"12pt",width:"70px"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Upload Attachment",onClick:function(){e.setState({selectedAttachment:void 0})}},t.photo&&t.photo.length>3?i.createElement("img",{src:r,style:{height:20}}):i.createElement("i",{className:"fa fa-paperclip"})),i.createElement(o.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness+n,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},i.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t[0],n)},files:e.state.selectedAttachment?[e.state.selectedAttachment]:[],single:!0})))),i.createElement("div",{className:"col-md-1"},!h&&n>=0&&i.createElement("button",{disabled:p,type:"button",className:"btn btn-danger",title:"Remove Item",style:{fontWeight:"bold",fontSize:"12pt"},onClick:function(){return e.removeItem(n)}},i.createElement("i",{className:"fa fa-remove"}))))}),!d&&!h&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-1"},i.createElement("label",null,"Add:")),i.createElement("div",{className:"col-md-11 col-xs-11"},i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog_"+this.props.isInspectionOrCleanliness},i.createElement("i",{className:"fa fa-plus"}))),i.createElement(o.a,{disableSaveButton:!s,id:"AddLabelDialog_"+this.props.isInspectionOrCleanliness,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.isInspectionOrCleanliness+" labels"},l&&l.length>0&&i.createElement("div",{className:"form-group"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-12"},i.createElement(r.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCCLabelChange,placeholder:this.props.isInspectionOrCleanliness+" labels",options:l,value:s}))))))))},t}(i.Component);t.a=m},867:function(e,t,n){"use strict";var i=n(2),o=(n.n(i),n(677)),r=n(54),a=n(20),s=n(716),c=n(8),l=n(711),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={rcxItems:[],selectedAttachment:void 0},n.handleNotesChange=n.handleNotesChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return u(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){return d(this,void 0,void 0,function(){return p(this,function(t){return this.setState({rcxItems:e.rcxItems}),[2]})})},t.prototype.handleNotesChange=function(e,t){var n=this,i=this.state.rcxItems;i[e].notesMeasurement=Object(a.J)(t.target.value,!0),this.setState({rcxItems:i},function(){document.getElementById(n.props.isInspectionOrCleanliness+"rcxTask"+e).focus()}),this.props.handleAdder(i)},t.prototype.handleFileAttachment=function(e,t){var n=this,i=this.state.rcxItems,o=this.props,s=o.buildingName,u=o.entityName,d=o.infoEntity,p=JSON.parse(c.a.getItem("user")),h=i[t];try{if(e&&(e.file||e.length>0)&&h){var m,f=this.props.buildingName+"-_-"+Object(a.C)(10),b="";i[t].photo=b,this.setState({rcxItems:i},function(){n.props.handleAdder(i),(new r.b).UploadFile(r.a.DOCUMENT(),b,m)});var C=e.name.substring(e.name.indexOf("."));b=""+f+C,m=e,i[t].photo=b,this.setState({rcxItems:i,selectedAttachment:e},function(){n.props.handleAdder(i),(new r.b).UploadFile(r.a.DOCUMENT(),b,m,function(){var t={building:s,docOntology:Object(a.C)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:p.contact,enteredByName:p.name,entityOntology:[{label:"",value:u}],entityType:d,rdfsLabel:e.name,s3FileName:b,entryTimeStamp:(new Date).toString(),linkToDocument:b};Object(l.f)(t).then(function(){})})})}}catch(e){}},t.prototype.render=function(){var e=this,t=this.state.rcxItems,n=this.props,c=n.isView,l=n.isFromReport,u=new r.b;return i.createElement(i.Fragment,null,t&&t.map(function(t,n){var d=u.GetSignedURL(r.a.DOCUMENT(),t.photo);return i.createElement("div",{key:n,className:"row padding-5",style:{borderBottom:"1px dotted #20cac738"}},i.createElement("div",{className:"col-md-5"},i.createElement("textarea",{disabled:!0,className:"form-control",value:t.ccLabel+": "+t.proposedRCX,style:{resize:"none"}})),i.createElement("div",{className:"col-md-5 col-md-offset-1"},i.createElement("textarea",{disabled:c,id:e.props.isInspectionOrCleanliness+"rcxTask"+n,className:"form-control",value:Object(a.J)(t.notesMeasurement,!1),placeholder:"Notes/Measurements",name:"proposedRCX",onChange:function(t){return e.handleNotesChange(n,t)},style:{resize:"vertical"}})),i.createElement("div",{className:"col-md-1"},i.createElement("button",{disabled:c||l,type:"button",className:"btn btn-dark",style:{fontWeight:"bold",fontSize:"12pt",width:"70px"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Upload Image"},t.photo&&t.photo.length>3?i.createElement("img",{src:d,style:{height:20}}):i.createElement("i",{className:"fa fa-image"})),i.createElement(o.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness+n,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},i.createElement(s.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t[0],n)},files:e.state.selectedAttachment?[e.state.selectedAttachment]:[],single:!0}),t.photo&&t.photo.length>3?i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),i.createElement("img",{src:d,style:{height:150}})," "):i.createElement(i.Fragment,null))))}))},t}(i.Component);t.a=h},971:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"rcxInspectionLabels",function(){return E}),n.d(t,"rcxCleanlinessLabels",function(){return O});var i,o,r=n(2),a=(n.n(r),n(718)),s=n(866),c=n(867),l=n(1020),u=n(12),d=n(118),p=n(685),h=n(712),m=n(714),f=n(730),b=n(20),C=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,s)}c((i=i.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},y=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i},E=["Appropriate Schedule","Sensors or Actuators Calibrated","Equal Load Distribution Across Equipment","Ventilation Rates are Appropriate","Automatic Reset Functioning","Adjustments Made to Compensate for Oversized/Undersized Equip","No Unintended Simultaneous Cooling/Heating Occurs","Economizer Controls Functioning Properly","Air/Water Distribution Balanced","Light Levels are Appropriate","Light Sensors and Controls are Function Properly","DHW Temp. Settings are Correct","Water Pumps Properly Functioning","There Are No Water/Air Leaks"],O=["Vents/Ducts/Coils Are Clean","Filters/Steam Traps are Clean","Components in Good Condition (belts, bearings, pulleys, etc.)","Proper Insulation/Sealant Where Required"],N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={activeTab:"Current Conditions",rcxObj:{currentSchedule:[],adjustedSchedule:[],currentConditionsCleanliness:[],currentConditionsInspections:[],rcxtasksCleanliness:[],rcxtasksInspections:[]},isCompleted:!1,inspectionOntologies:[],SolutionList:[]},i=n,n._saveCurrentConditions=n._saveCurrentConditions.bind(n),n.handleCurrentScheduler=n.handleCurrentScheduler.bind(n),n.handleAdjustedScheduler=n.handleAdjustedScheduler.bind(n),n.handleCCItems=n.handleCCItems.bind(n),n.handleRcxIncpectionItems=n.handleRcxIncpectionItems.bind(n),n.handleRcxCleanlinessItems=n.handleRcxCleanlinessItems.bind(n),n._saveRCXTaskList=n._saveRCXTaskList.bind(n),n._fetchPreRCX=n._fetchPreRCX.bind(n),n._fetchPostRCX=n._fetchPostRCX.bind(n),n.updateTaskChecklist=n.updateTaskChecklist.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return C(t,e),t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return g(this,function(e){return clearInterval(o),[2]})})},t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n,i,r,a=this;return g(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,i=e.entityName,t&&n&&i?[4,this.fetchInspection_IsComplete()]:[3,2];case 1:r=s.sent(),this.setState({isCompleted:r},function(){return v(a,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this._fetchPreRCX()];case 1:return e.sent(),[4,this._fetchPostRCX()];case 2:return e.sent(),[2]}})})}),s.label=2;case 2:return this._getSolutionList(),o=setInterval(function(){var e=Object(f.a)("inspectionOntology");e!=Object(f.a)("inspectionOntology_Old")&&(Object(f.b)("inspectionOntology_Old",e),a._getSolutionList())},1e4),[2]}})})},t.prototype._getSolutionList=function(){return v(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return e=Object(f.a)("inspectionOntology"),[4,Object(m.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,i,o;return g(this,function(r){switch(r.label){case 0:return e=this.props.entityName,[4,Object(h.h)(e,"RCX")];case 1:return t=r.sent(),n=this.state,i=n.isCompleted,o=n.inspectionOntologies,t?(i="true"==Object(u.g)(t.IsCompleted),o=Object(u.g)(t.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:o}),[2,i]):[2,!1]}})})},t.prototype._fetchPreRCX=function(){return v(this,void 0,void 0,function(){var e,t,n,o,r,a,s,c,d=this;return g(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,o=e.entityName,r=Object(f.a)("inspectionOntology"),a=this.state.rcxObj,s=[],c=[],[4,Object(l.d)(t,o,n).then(function(e){if(e){var t=e.filter(function(e){return Object(u.g)(e.inspection)==r});t&&t.map(function(e){var t=Object(u.g)(e.type),n={ccBoolean:"true"==Object(u.g)(e.ccBoolean),ccLabel:Object(u.g)(e.ccLabel),photo:Object(u.g)(e.photo),preRCXName:Object(u.g)(e.preRCXName),entryTimeStamp:Object(u.g)(e.entryTimeStamp),proposedRCX:Object(u.g)(e.proposedRCX)};"Cleanliness"!=t||s.find(function(e){return e.preRCXName==n.preRCXName})?"Inspection"!=t||c.find(function(e){return e.preRCXName==n.preRCXName})||c.push(n):s.push(n)}),a.currentConditionsCleanliness=s,a.currentConditionsInspections=c,a=d.updateTaskChecklist(a),i.setState({rcxObj:a})}})];case 1:return p.sent(),[2]}})})},t.prototype._fetchPostRCX=function(){return v(this,void 0,void 0,function(){var e,t,n,o,r,a,s,c;return g(this,function(d){switch(d.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,o=e.entityName,r=this.state.rcxObj,a=r.rcxtasksCleanliness,s=r.rcxtasksInspections,(c=y(a.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,o,n,c).then(function(e){e.map(function(e){var t=a.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),a.splice(a.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),a.push(t))}),r.rcxtasksCleanliness=a,i.setState({rcxObj:r})})]:[3,2];case 1:d.sent(),d.label=2;case 2:return c=[],(c=y(s.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,o,n,c).then(function(e){e.map(function(e){var t=s.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),s.splice(s.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),s.push(t))}),r.rcxtasksInspections=s,i.setState({rcxObj:r})})]:[3,4];case 3:d.sent(),d.label=4;case 4:return[2]}})})},t.prototype.updateTaskChecklist=function(e){var t=y(e.rcxtasksInspections);e.rcxtasksInspections=[],e.currentConditionsInspections&&e.currentConditionsInspections.map(function(n){if(0==n.ccBoolean){var i=t.find(function(e){return e.preRCXName==n.preRCXName});i&&n.preRCXName?(i.proposedRCX=n.proposedRCX,e.rcxtasksInspections.push(i)):e.rcxtasksInspections.push({postRCXName:"",preRCXName:n.preRCXName,proposedRCX:n.proposedRCX,ccLabel:n.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:""})}});var n=y(e.rcxtasksCleanliness);return e.rcxtasksCleanliness=[],e.currentConditionsCleanliness&&e.currentConditionsCleanliness.map(function(t){if(0==t.ccBoolean){var i=n.find(function(e){return e.preRCXName==t.preRCXName});i&&t.preRCXName?(i.proposedRCX=t.proposedRCX,e.rcxtasksCleanliness.push(i)):e.rcxtasksCleanliness.push({postRCXName:"",preRCXName:t.preRCXName,proposedRCX:t.proposedRCX,ccLabel:t.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:""})}}),e},t.prototype.handleCurrentScheduler=function(e){var t=this.state.rcxObj;t.currentSchedule=e,this.setState({rcxObj:t})},t.prototype.handleAdjustedScheduler=function(e){var t=this.state.rcxObj;t.adjustedSchedule=e,this.setState({rcxObj:t})},t.prototype.handleCCItems=function(e,t){return v(this,void 0,void 0,function(){var n;return g(this,function(i){return n=this.state.rcxObj,"inspection"==t?n.currentConditionsInspections=e:n.currentConditionsCleanliness=e,n=this.updateTaskChecklist(n),this.setState({rcxObj:n}),[2]})})},t.prototype.handleRcxIncpectionItems=function(e){var t=this.state.rcxObj;t.rcxtasksInspections=e,this.setState({rcxObj:t})},t.prototype.handleRcxCleanlinessItems=function(e){var t=this.state.rcxObj;t.rcxtasksCleanliness=e,this.setState({rcxObj:t})},t.prototype._saveCurrentConditions=function(e){return v(this,void 0,void 0,function(){var t,n,i,o,r,a,s,c,u,p,m=this;return g(this,function(b){switch(b.label){case 0:return Object(d.a)(!0),t=this.state,n=t.rcxObj,i=t.inspectionOntologies,o=t.SolutionList,r=this.props,a=r.buildingName,s=r.infoEntity,c=r.entityName,u=r.instance,p=Object(f.a)("inspectionOntology"),[4,Object(l.f)(a,s,c,n,p,!0,o,e)];case 1:return b.sent(),this.setState({rcxObj:n},function(){return v(m,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return e?p?(i.push(p),[4,Object(h.c)(c,i,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(s){case"Equip":window.location.hash=u+"/"+a+"/Assets";break;case"Space":window.location.hash=u+"/"+a+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(d.a)(!1),[2]}})})},t.prototype._saveRCXTaskList=function(e){return v(this,void 0,void 0,function(){var t,n,i,o,r,a,s,c,u,p,m=this;return g(this,function(b){switch(b.label){case 0:return Object(d.a)(!0),t=this.state,n=t.rcxObj,i=t.inspectionOntologies,o=t.SolutionList,r=this.props,a=r.buildingName,s=r.infoEntity,c=r.entityName,u=r.instance,p=Object(f.a)("inspectionOntology"),[4,Object(l.e)(a,s,c,n,!0,o,e)];case 1:return b.sent(),this.setState({rcxObj:n},function(){return v(m,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return e?p?(i.push(p),[4,Object(h.c)(c,i,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(s){case"Equip":window.location.hash=u+"/"+a+"/Assets";break;case"Space":window.location.hash=u+"/"+a+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(d.a)(!1),[2]}})})},t.prototype.unComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,i;return g(this,function(o){switch(o.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(f.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(i=0;i<t.length;i++)t[i]==n&&t.splice(i,1);return[4,Object(h.k)(e,t,"RCX")];case 1:o.sent(),o.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,o=t.entityName,l=t.infoEntity,u=t.viewOnly,d=this.state,h=d.activeTab,m=d.rcxObj,C=d.isCompleted,y=d.inspectionOntologies.find(function(e){return e==N}),N=Object(f.a)("inspectionOntology"),I=!!(y&&y.length>0);return r.createElement("div",{className:"content",style:{width:"100%"}},r.createElement("div",{className:"container-fluid",style:{width:"100%"}},r.createElement("div",{className:"row"},!u&&r.createElement("div",{className:"col-md-12"},r.createElement(a.a,{instance:this.props.instance,buildingName:n,tabName:l,showComponentButton:"Equip"==l,itemName:o,showAuditTypes:!0,showBIMButtons:!0})),r.createElement("div",{className:"card"},r.createElement("div",{className:"container-fluid padding-10"},!u&&r.createElement("div",{className:"col-md-12 padding-10"},r.createElement("div",{className:"btn-group"},r.createElement("button",{className:"btn "+("Current Conditions"==h?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"Current Conditions"})}},"Current Conditions"),r.createElement("button",{className:"btn "+("RCX Task CheckList"==h?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"RCX Task CheckList"})}}," RCX Task CheckList")),r.createElement("div",{className:"pull-right"},r.createElement(p.a,{ElementID:"retroCommissioning",data:this.state.rcxObj,filename:"Retro-Commissioning - "+Object(b.x)(o),beforeExportPdfClick:function(){$("#currentconditions").css("display","block"),$("#checklist").css("display","block")},afterExportPdfClick:function(){"Current Conditions"==h?$("#currentconditions").css("display","block"):$("#currentconditions").css("display","none"),"RCX Task CheckList"==h?$("#checklist").css("display","block"):$("#checklist").css("display","none")}}))),r.createElement("div",{className:"col-md-12 padding-10",id:"retroCommissioning"},r.createElement("div",{className:"col-md-12 padding-10"},r.createElement("h3",{style:{margin:10}},"Retro-Commissioning - ",Object(b.x)(o))),r.createElement("div",{style:{display:"Current Conditions"==h||u?"block":"none"},id:"currentconditions",className:"col-md-12 padding-10"},r.createElement("div",{className:"col-md-12 padding-10"},r.createElement("h4",{className:"title"},r.createElement("u",null,"Current Conditions"))),r.createElement("div",{className:"col-md-12 padding-10"},r.createElement("h4",{className:"title"},"Inspections"),r.createElement("div",{className:"col-md-12 padding-10"},r.createElement(s.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"inspection",buildingName:n,instance:i,rcxOf:l,currentConditions:m.currentConditionsInspections,labels:E,entityName:o,infoEntity:l,isView:u,isFromReport:u}))),r.createElement("div",{className:"col-md-12 padding-10 "},r.createElement("h4",{className:"title"},"Cleanliness"),r.createElement("div",{className:"col-md-12 padding-10"},r.createElement(s.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"cleanliness",buildingName:n,instance:i,rcxOf:l,currentConditions:m.currentConditionsCleanliness,labels:O,entityName:o,infoEntity:l,isView:u,isFromReport:u}))),!u&&r.createElement("div",{className:"col-md-12 padding-10 ","data-html2canvas-ignore":"true"},r.createElement("div",{className:"form-group"},r.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return v(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this._saveCurrentConditions(!1)];case 1:return e.sent(),[2]}})})}},r.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",!C&&r.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCurrentConditions(!0)}},r.createElement("i",{className:"fa fa-save"})," Save & Complete"),C&&r.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},r.createElement("b",null,"Remove Inspection Completion"))))),r.createElement("div",{style:{display:"RCX Task CheckList"==h||u?"block":"none"},id:"checklist",className:"col-md-12 padding-10"},r.createElement("div",{className:"col-md-12 padding-10"},r.createElement("h4",{className:"title"},r.createElement("u",null,"RCX Task CheckList"))),r.createElement("div",{className:"col-md-12 padding-10 "},r.createElement("h4",{className:"title"},"Inspections"),r.createElement("div",{className:"col-md-12 padding-10"},r.createElement(c.a,{handleAdder:this.handleRcxIncpectionItems,buildingName:n,instance:i,rcxOf:l,rcxItems:m.rcxtasksInspections,isInspectionOrCleanliness:"Inspection",entityName:o,infoEntity:l,isView:u,isFromReport:u}))),r.createElement("div",{className:"col-md-12 padding-10 "},r.createElement("h4",{className:"title"},"Cleanliness"),r.createElement("div",{className:"col-md-12 padding-10"},r.createElement(c.a,{handleAdder:this.handleRcxCleanlinessItems,buildingName:n,instance:i,rcxOf:l,rcxItems:m.rcxtasksCleanliness,isInspectionOrCleanliness:"Cleanliness",entityName:o,infoEntity:l,isView:u,isFromReport:u}))),!u&&r.createElement("div",{className:"col-md-12 padding-10 ","data-html2canvas-ignore":"true"},r.createElement("div",{className:"form-group"},r.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return v(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this._saveRCXTaskList(!1)];case 1:return e.sent(),[2]}})})}},r.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",(C||!C)&&r.createElement(r.Fragment,null," ",!I&&r.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveRCXTaskList(!0)}},r.createElement("i",{className:"fa fa-save"})," Save & Complete")),C&&I&&r.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},r.createElement("b",null,"Remove Inspection Completion"))))))))),r.createElement("br",null)))},t}(r.Component);t.default=N}});