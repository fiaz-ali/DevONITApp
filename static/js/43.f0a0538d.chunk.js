webpackJsonp([43],{1531:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(112)),r=n(115),o=n(788),s=n(739),c=n(726),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={supplyChainObject:n.props.supplyChainObject,_infoEntityItems:[],DropDownList:[],isEdit:n.props.isEdit},n.handleFormChange=n.handleFormChange.bind(n),n.handleMultiInfoEntityChange=n.handleMultiInfoEntityChange.bind(n),n._fetchItems=n._fetchItems.bind(n),n}return l(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return this.props.buildingName&&this.props.infoEntity?[4,this._fetchItems()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){this.setState({isEdit:e.isEdit,supplyChainObject:e.supplyChainObject})},t.prototype._fetchItems=function(){return u(this,void 0,void 0,function(){var e,t,n;return d(this,function(i){switch(i.label){case 0:if(Object(a.a)(!0),!(e=this.props.infoEntity))return[2];switch(t=[],e){case"Equip":return[3,1];case"Space":return[3,3];case"Zone":return[3,5];case"Point":return[3,7]}return[3,8];case 1:return[4,Object(c.g)(this.props.buildingName)];case 2:return t=i.sent(),[3,8];case 3:return[4,Object(s.b)(this.props.buildingName)];case 4:return t=i.sent(),[3,8];case 5:return[4,Object(o.e)(this.props.buildingName)];case 6:return t=i.sent(),[3,8];case 7:return[3,8];case 8:return n=t.map(function(e){return{value:e.ontology.value,label:e.rdfsLabel.value}}),this.setState({_infoEntityItems:t,DropDownList:n}),Object(a.a)(!1),[2]}})})},t.prototype.handleMultiInfoEntityChange=function(e){var t=this.state.supplyChainObject;t.infoEntity=e,this.setState({supplyChainObject:t}),this.props.handleSupplyChain(t)},t.prototype.handleFormChange=function(e){var t=this.state.supplyChainObject;t[""+e.target.name]=e.target.value,this.setState({supplyChainObject:t}),this.props.handleSupplyChain(t)},t.prototype.render=function(){var e=this,t=this.state,n=t.supplyChainObject,a=t.DropDownList,o=t.isEdit;return i.createElement("div",{className:"content"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"infoEntity"},this.props.infoEntity,":")),i.createElement("div",{className:"col-md-9"},o&&n&&n.infoEntity&&i.createElement("input",{id:"item",name:"item",disabled:!0,className:"form-control",value:n.infoEntity[0].label}),!o&&i.createElement(r.a,{id:"infoEntity",name:"infoEntity",closeMenuOnSelect:!1,isMulti:!0,value:n.infoEntity,onChange:this.handleMultiInfoEntityChange,placeholder:"Select "+this.props.infoEntity,options:a})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"item"},"Name:")),i.createElement("div",{className:"col-md-9"},i.createElement("input",{id:"item",name:"rdfsLabel",className:"form-control",value:n.rdfsLabel,onChange:function(t){return e.handleFormChange(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"item"},"Product Inventory Link:")),i.createElement("div",{className:"col-md-9"},i.createElement("input",{id:"item",name:"item",className:"form-control",value:n.item,onChange:function(t){return e.handleFormChange(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"link"},"Product Link:")),i.createElement("div",{className:"col-md-9"},i.createElement("input",{id:"link",name:"link",className:"form-control",value:n.link,onChange:function(t){return e.handleFormChange(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"vendor"},"Vendor:")),i.createElement("div",{className:"col-md-9"},i.createElement("input",{id:"vendor",name:"vendor",className:"form-control",value:n.vendor,onChange:function(t){return e.handleFormChange(t)}})))))},t}(i.Component);t.a=p},1532:function(e,t,n){"use strict";t.c=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.f)({model:e,isEdit:t,itemToUpdate:n},r.a.SUPPLY.SaveSupplyChain,i.b.SUPPLYCHAIN).then(function(){Object(a.b)("Supply Chain "+(t?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Supply Chain.")})];case 1:return[2,o.sent()]}})})},t.b=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(r.e)({buildingName:e,infoEntity:t,entityName:n},r.a.SUPPLY.GetSupplyChains,i.b.SUPPLYCHAIN)];case 1:return[2,a.sent()]}})})},t.a=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.f)({itemToDelete:e},r.a.SUPPLY.DeleteSupplyChain,i.b.SUPPLYCHAIN)];case 1:return[2,t.sent()]}})})};var i=n(7),a=n(6),r=n(5),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}},617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=(n.n(i),n(17)),r=n(112),o=n(8),s=n(38),c=n(59),l=n(1531),u=n(1532),d=n(802),p=n(60),h=n(6),f=n(13),m=n(11),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},w=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_list:[],supplyChainObject:{infoEntity:[],link:"",vendor:"",item:"",linkName:"",rdfsLabel:""},itemToDelete:Object(),isEdit:!1},n.AddSupplyChain=n.AddSupplyChain.bind(n),n.onDeleteInfoEntityItem=n.onDeleteInfoEntityItem.bind(n),n.handleSupplyChainForm=n.handleSupplyChainForm.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return this.props.buildingName&&this.props.infoEntity&&this.props.entityName?[4,this.fetchSupplyChains()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.AddSupplyChain=function(){return v(this,void 0,void 0,function(){var e,t,n,i;return w(this,function(a){switch(a.label){case 0:return e=this.state,t=e.supplyChainObject,n=e.isEdit,i=e.itemToDelete,t&&t.infoEntity?(Object(r.a)(!0),1!=n?[3,2]:[4,Object(u.c)(t,this.state.isEdit,i)]):[3,6];case 1:return a.sent(),[3,4];case 2:return[4,Object(u.c)(t,!1)];case 3:a.sent(),a.label=4;case 4:return[4,this.fetchSupplyChains()];case 5:a.sent(),Object(r.a)(!1),a.label=6;case 6:return[2]}})})},t.prototype.handleSupplyChainForm=function(e){this.setState({supplyChainObject:e})},t.prototype.fetchSupplyChains=function(){return v(this,void 0,void 0,function(){var e=this;return w(this,function(t){switch(t.label){case 0:return Object(r.a)(!0),[4,Object(u.b)(this.props.buildingName,this.props.infoEntity,this.props.entityName).then(function(t){e.setState({_list:t})}).catch(function(e){return e})];case 1:return t.sent(),Object(r.a)(!1),[2]}})})},t.prototype.deleteInfoEntityItem=function(){return v(this,void 0,void 0,function(){var e,t=this;return w(this,function(n){return e=this.state.itemToDelete,Object(u.a)(e).then(function(){Object(h.b)("Supply Chain Record Deleted Successfully."),t.fetchSupplyChains()}).catch(function(e){Object(h.a)("Error occured while deleting.")}),[2]})})},t.prototype.onEditInfoEntityItem=function(e){return v(this,void 0,void 0,function(){var t;return w(this,function(n){return(t=this.state.supplyChainObject).infoEntity=[],t.infoEntity.push({label:Object(o.g)(e.equipRdfsLabel),value:Object(o.g)(e.infoEntity)}),t.linkName=Object(o.g)(e.linkName),t.item=Object(o.g)(e.linkItem),t.rdfsLabel=Object(o.g)(e.rdfsLabel),t.vendor=Object(o.g)(e.vendor),t.link=Object(o.g)(e.link),this.setState({supplyChainObject:t,isEdit:!0,itemToDelete:e}),document.getElementById("btnAddSupplyChain").click(),[2]})})},t.prototype.onDeleteInfoEntityItem=function(e){return v(this,void 0,void 0,function(){return w(this,function(t){return this.setState({itemToDelete:e}),[2]})})},t.prototype.render=function(){var e=this,t=this.state,n=t._list,r=t.supplyChainObject,u=this.props,h=u.buildingName,b=u.entityName,v=u.infoEntity,w=JSON.parse(m.a.getItem("user")),E=Object(p.b)(w,"info-equip","write"),y=r&&r.rdfsLabel&&r.vendor&&r.infoEntity.length>0&&r.link&&!0;return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(d.a,{workFlowSpaceList:this.props.workFlowSpaceList,inspectionOntology:"",instance:this.props.instance,buildingName:h,tabName:v,itemName:b,showDevicesButton:"Point"==v,showComponentButton:"Equip"==v,showAuditTypes:"Equip"==v||"Space"==v,showBIMButtons:"Equip"==v||"Space"==v}),i.createElement("div",{className:"dropdown pull-right"}),E&&i.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){e.setState({isEdit:!1,supplyChainObject:{infoEntity:[{value:e.props.entityName,label:Object(f.g)(e.props.entityName)}],link:"",vendor:"",item:"",linkName:"",rdfsLabel:""}}),document.getElementById("btnAddSupplyChain").click()}},i.createElement("i",{className:"fa fa-plus"})," Add "))),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"card",id:"SpacesList"},i.createElement("div",{className:"header"},i.createElement("h4",{className:"title"},"Supply Chain")),i.createElement("div",{className:"content"},i.createElement(a.AppContext.Consumer,null,function(t){return i.createElement("div",{className:"dataCard"},i.createElement("button",{type:"button",id:"btnAddSupplyChain",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#supplychainFormDialog"}," ."),i.createElement(s.a,{id:"supplychainFormDialog",onSaveButtonClick:function(){e.AddSupplyChain()},saveButtonText:"Save",disableSaveButton:!y},i.createElement(l.a,{instance:e.props.instance,isEdit:e.state.isEdit,infoEntity:e.props.infoEntity,buildingName:e.props.buildingName,supplyChainObject:r,handleSupplyChain:e.handleSupplyChainForm})),i.createElement("div",{className:"row hidden-xs"},i.createElement("div",{className:"col-sm-12"},i.createElement("div",{className:"col-sm-3 headingText"},"Name"),i.createElement("div",{className:"col-sm-3 headingText"},"Product Inventory"),i.createElement("div",{className:"col-sm-3 headingText"},"Link"),i.createElement("div",{className:"col-sm-3 headingText"},"Vendor"))),n.map(function(t,n){return i.createElement(i.Fragment,null,i.createElement("div",{key:n,className:"row"},i.createElement("div",{className:"col-sm-12"},i.createElement("div",{className:"col-sm-3 trim-data",title:Object(o.g)(t.linkName)},i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Name"),Object(o.g)(t.rdfsLabel)),i.createElement("div",{className:"col-sm-3 trim-data",title:Object(o.g)(t.linkItem)},i.createElement("a",{href:t.linkItem&&t.linkItem.value.indexOf("ttp")>0?t.linkItem&&t.linkItem.value:"http://"+(t.linkItem&&t.linkItem.value),target:"_blank"},i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Product Inventory"),t.linkItem&&t.linkItem.value)),i.createElement("div",{className:"col-sm-3 trim-data",title:Object(o.g)(t.link)},i.createElement("a",{href:t.link&&t.link.value.indexOf("ttp")>0?t.link&&t.link.value:"http://"+(t.link&&t.link.value),target:"_blank"},i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Link"),t.link&&t.link.value)),i.createElement("div",{className:"col-sm-3 trim-data",title:t.vendor&&t.vendor.value},i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Vendor"),t.vendor&&t.vendor.value),E&&i.createElement("div",{className:"col-sm-12 col-xs-12 pull-right"},i.createElement("button",{className:"btn-xs btn-danger btn-fill pull-right",style:{margin:5},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog",onClick:function(n){e.onDeleteInfoEntityItem(t)}},i.createElement("i",{className:"fa fa-trash"})," Delete"),i.createElement("button",{className:"btn-xs btn-success btn-fill pull-right",style:{margin:5},onClick:function(){e.onEditInfoEntityItem(t)}},i.createElement("i",{className:"fa fa-edit"})," Edit")))),i.createElement(c.a,{instance:e.props.instance,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this item?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteInfoEntityItem()}}))}))})))))))},t}(i.Component);t.default=E},726:function(e,t,n){"use strict";t.p=function(e,t,n,c){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.f)({buildingName:e,equipment:t,isEdit:n},r.a.EQUIPMENT.SaveEquipment,i.b.EQUIP).then(function(){1==c||Object(a.b)("Equipment "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Equipment.")})];case 1:return[2,o.sent()]}})})},t.o=function(e,t,n,c){return o(this,void 0,void 0,function(){var o;return s(this,function(s){switch(s.label){case 0:return o=!!n.name,[4,Object(r.f)({buildingName:e,equipmentName:t,component:n,counter:c},r.a.EQUIPMENT.SaveComponent,i.b.EQUIP).then(function(){Object(a.b)("Component(s) "+(o?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Component(s).")})];case 1:return[2,s.sent()]}})})},t.q=function(e,t,n,c){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.f)({isEdit:e,buildingName:t,equipmentName:n,lightingInformation:c},r.a.EQUIPMENT.SaveLightingInformation,i.b.EQUIP).then(function(){Object(a.b)("Lighting Info "+(e?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Lighting Info.")})];case 1:return[2,o.sent()]}})})},t.r=function(e,t,n,c,l){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.f)({isEdit:e,buildingName:t,equipmentName:n,plugLoadModel:c,isCustom:l},r.a.EQUIPMENT.SavePlugLoadModel,i.b.EQUIP).then(function(){Object(a.b)("Plugload Info "+(e?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Plugload Info.")})];case 1:return[2,o.sent()]}})})},t.d=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.EQUIPMENT.FetchEquipments,i.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.j=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentName:t},r.a.EQUIPMENT.GetEquipmentDetails,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.EQUIPMENT.GetAllCoolingAndHeatingEquipmentsList,i.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.f=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.EQUIPMENT.GetAllEquipmentExceptCoolingAndHeatingList,i.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.g=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.EQUIPMENT.GetAllEquipmentsList,i.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.k=function(){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Object(r.e)({},r.a.EQUIPMENT.GetEquipmentTypeList,i.b.EQUIP)];case 1:return[2,e.sent()]}})})},t.m=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({typeName:e,distance:t},r.a.EQUIPMENT.GetSubClassTypeListForEquipment,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.h=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({typeName:e,distance:t},r.a.EQUIPMENT.GetComponentTypesList,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.c=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.EQUIPMENT.FetchEquipmentExportData,i.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.i=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentName:t},r.a.EQUIPMENT.GetComponents,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.l=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentName:t},r.a.EQUIPMENT.GetFixtures,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.n=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentName:t},r.a.EQUIPMENT.GetTypeByEquipmentName,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.b=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentName:t},r.a.EQUIPMENT.FetchPowerSource,i.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentName:t},r.a.EQUIPMENT.FetchPlugLoad,i.b.EQUIP)];case 1:return[2,n.sent()]}})})};var i=n(7),a=n(6),r=n(5),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}},739:function(e,t,n){"use strict";t.g=function(e,t,n,a){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.e)({buildingName:e,spaceName:t,spaceWithCalendar:n},r.a.SPACES.GETSPACES,i.b.SPACE,a)];case 1:return[2,o.sent()]}})})},t.c=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(r.e)({floor:e,buildingName:t},r.a.SPACES.GetLocationsList,i.b.SPACE,n)];case 1:return[2,a.sent()]}})})},t.d=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({zone:e,buildingName:t},r.a.SPACES.getLocationsListSpacesByZones,i.b.SPACE)];case 1:return[2,n.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return o(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(r.e)({buildingName:e,type:t},r.a.SPACES.GetAllLocationsList,i.b.SPACE,n)];case 1:return[2,a.sent()]}})})},t.a=function(e,t,n,c,l){return o(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.f)({buildingName:e,model:t,floor:n,isEdit:c,spacetoUpdate:l},r.a.SPACES.SAVESPACE,i.b.SPACE).then(function(){Object(a.b)("Space "+(c?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Space.")})];case 1:return[2,o.sent()]}})})},t.f=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.SPACES.GetSpaceTypesList,i.b.SPACE)];case 1:return[2,t.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({spaceName:e},r.a.SPACES.GetSpaceOptimalInfo,i.b.SPACE)];case 1:return[2,t.sent()]}})})},t.h=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.f)({spaceToUpdate:e},r.a.SPACES.UpdateSpaceOptimalInfo,i.b.SPACE).then(function(){Object(a.b)("Space Updated Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Space.")})];case 1:return[2,t.sent()]}})})};var i=n(7),a=n(6),r=n(5),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}},772:function(e,t){e.exports={APIKey:"f51abd3013784ac6a0985f87f5ecbf03",Version:"3.2"}},788:function(e,t,n){"use strict";t.a=function(e,t,n){return o(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(r.e)({buildingName:e,zoneName:t,bimSid:n},r.a.ZONES.GETZONES,i.b.ZONE)];case 1:return[2,a.sent()]}})})},t.b=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.f)({buildingName:e,floor:t},r.a.ZONES.SAVEFLOOR,i.b.ZONE).then(function(){Object(a.b)("Floor Added Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Floor.")})];case 1:return[2,n.sent()]}})})},t.c=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.f)({model:e,buildingName:t},r.a.ZONES.SAVEZONE,i.b.ZONE).then(function(){Object(a.b)("Zone Added Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Zone.")})];case 1:return[2,n.sent()]}})})},t.f=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.ZONES.GETFLOORLIST,i.b.ZONE)];case 1:return[2,t.sent()]}})})},t.g=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentType:t},r.a.ZONES.GETSERVICEPROVIDERSLIST,i.b.ZONE)];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return o(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,excludeFloors:t},r.a.ZONES.GetAllZonesList,i.b.ZONE)];case 1:return[2,n.sent()]}})})},t.h=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.ZONES.GetZoneTypesList,i.b.ZONE)];case 1:return[2,t.sent()]}})})},t.d=function(e,t){return o(this,void 0,void 0,function(){var n=this;return s(this,function(c){switch(c.label){case 0:return[4,Object(r.f)({buildingName:e,zoneName:t},r.a.ZONES.DELETEZONE,i.b.ZONE).then(function(){return o(n,void 0,void 0,function(){return s(this,function(e){return Object(a.b)("Zone Deleted Successfully."),[2]})})}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,c.sent()]}})})};var i=n(7),a=n(6),r=n(5),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}},791:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(38)),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={sdk:Object(),isStarted:!1,selectedSteps:n.props.sweeps,modelDetails:Object(),spaceDetails:[],currentSweep:Object(),matterTags:[],floorDetails:Object(),logMessage:"",sdkReady:!1,hasStartSweep:!1,startSweep:Object(),isViewForm:n.props.isViewForm,prevSweepIndex:0,onPropsReceivedStateChanged:!1,linkBimism:n.props.bimURL,destinationSweeps:n.props.sweeps,addCurrentSweep:!1,sweepPosition:Object()},n.loadSDK=n.loadSDK.bind(n),n.loadFrame=n.loadFrame.bind(n),n.toggleTourStartStop=n.toggleTourStartStop.bind(n),n.toggleTourSweepsStartStop=n.toggleTourSweepsStartStop.bind(n),n.addCurrentSweep=n.addCurrentSweep.bind(n),n.toggleAddingSweep=n.toggleAddingSweep.bind(n),n.removeSweep=n.removeSweep.bind(n),n.setDialogState=n.setDialogState.bind(n),n.onSaveHandle=n.onSaveHandle.bind(n),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){(0==this.state.selectedSteps.length&&e.sweeps.length>0||e.isSweepChangeable)&&(this.setState({selectedSteps:e.sweeps,hasStartSweep:!0,startSweep:e.sweeps[0],onPropsReceivedStateChanged:!0}),e.isSweepChangeable&&this.props.onSweepChangeable(e.isSweepChangeable)),e.bimURL&&this.setState({linkBimism:e.bimURL}),e.sweeps&&this.setState({destinationSweeps:e.sweeps}),this.setState({addCurrentSweep:e.addCurrentSweep})},t.prototype.componentDidUpdate=function(){this.state.onPropsReceivedStateChanged&&this.setState({onPropsReceivedStateChanged:!1})},t.prototype.onSaveHandle=function(){var e=this.state.selectedSteps,t=this.state.sweepPosition;this.props.onSaveClickButton(e,t)},t.prototype.toggleAddingSweep=function(){window.toggleStartStopAddingSweep()},t.prototype.toggleTourStartStop=function(){window.toggleTourSelectedSweep()},t.prototype.toggleTourSweepsStartStop=function(e){window.toggleTourSweepsSelectedSweep(e)},t.prototype.addCurrentSweep=function(){window.addCurrentSweep()},t.prototype.removeSweep=function(e){window.removeSweep(e)},t.prototype.setDialogState=function(e,t,n,i,a,r,o,s,c,l){null!=e&&this.setState({isStarted:e}),null!=t&&this.setState({isTourSelected:t}),null!=n&&this.setState({selectedSteps:n}),null!=i&&this.setState({modelDetails:i}),null!=a&&this.setState({currentSweep:a}),null!=r&&this.setState({logMessage:r}),null!=s&&this.setState({prevSweepIndex:s}),null!=c&&this.setState({sweepPosition:c}),null!=o&&this.setState({sdkReady:o}),null!=l&&(this.setState({sdk:l}),this.loadFrame(l,this.setDialogState,this.state))},t.prototype.loadSDK=function(e,t){var i=n(772),a=i.APIKey,r=i.Version,o=document.getElementById("showcase");window.MP_SDK.connect(o,a,r).then(function(t){console.log("SDK Connected!"),e(null,null,null,null,null,null,null,null,null,t)}).catch(function(e){console.log("Error while connecting with Matterport SDK")})},t.prototype.loadFrame=function(e,t,n){var i=this.state,a=i.modelDetails,r=i.currentSweep,o=i.isStarted,s=i.isTourSelected,c=i.selectedSteps,l=i.sdkReady,u=i.startSweep,d=i.hasStartSweep,p=i.isViewForm,h=i.prevSweepIndex,f=i.addCurrentSweep;function m(e){if(c.length>0){var t=c.find(function(t){return t.uuid==e});if(null!=t||""+t!="undefined"){var n="Sweep "+t.uuid+" of index "+t.uuidIndex+" is already added in the current list";return console.log(n),!0}}return!1}l||e.App.state.subscribe(function(n){n.phase===e.App.Phase.LOADING&&console.log("The app has started loading!"),n.phase===e.App.Phase.STARTING&&console.log("The transition into the start location begins!"),n.phase===e.App.Phase.PLAYING&&(console.log("The app is ready to take user input now!"),l=!0,t(null,null,null,null,null,null,!0),d&&window.goToSweep(u.uuid),f&&(c=[],window.setTimeout(function(){window.addCurrentSweep()},2e3)))}),e.Model.getData().then(function(e){console.log("Model data loaded for sid:",e.sid),t(null,null,null,a=e)}),window.addSweep=function(e){var n=a.sweeps.find(function(t){return t.uuid==e});t(null,null,null,null,r=n);var i=a.sweeps.indexOf(n);if(!m(r.uuid)){c.push({uuid:r.uuid,uuidIndex:i,stepNo:c.length});var o="Sweep "+r.uuid+" of index "+i+" is added in the current list";console.log(o)}},window.addCurrentSweep=function(){e.Camera.getPose().then(function(e){var n=a.sweeps.find(function(t){return t.uuid==e.sweep});t(null,null,null,null,r=n);var i=a.sweeps.indexOf(n);if(!m(r.uuid)){c.push({uuid:r.uuid,uuidIndex:i,stepNo:c.length});var o=e.position;t(null,null,c,null,null,null,null,null,o);var s="Sweep "+r.uuid+" of index "+i+" is added in the current list";console.log(s)}})},window.removeSweep=function(e){var n=c.find(function(t){return t.uuid==e}),i=c.indexOf(n);if(i>-1){c.splice(i,1),t(null,null,c);var a="Sweep "+n.uuid+" of index "+n.uuidIndex+" is removed from the current list";console.log(a)}},window.goToSweep=function(t){console.log("Will move to "+t),e.Sweep.moveTo(t,{transition:e.Sweep.Transition.FLY}).then(function(e){var n="Moved to sweep "+t;console.log(n)}).catch(function(e){console.log("Error: "+JSON.stringify(e))})},e.on(e.Sweep.Event.ENTER,function(){if(s)return!1;e.Camera.getPose().then(function(e){if("mode.inside"==e.mode||"mode.outside"==e.mode)if(p&&c.length>0){var n=c.find(function(t){return t.uuid==e.sweep});if(null!=n&&""+n!="undefined"){var i="Moved to sweep "+n.uuid;console.log(i),h=c.indexOf(n),t(null,null,null,null,null,null,null,h)}else{i="Not allowed in the current step ";console.log(i),window.goToSweep(c[h].uuid)}}else console.log("Current Sweep is: "+JSON.stringify(e.sweep)),o&&0==c.length&&window.addCurrentSweep()})})},t.prototype.render=function(){var e=this;this.props.isRefreshDialog&&(this.setState({isStarted:!1,isTourSelected:!1,selectedSteps:[],modelDetails:Object(),spaceDetails:[],currentSweep:Object(),matterTags:[],floorDetails:Object(),logMessage:"",sdkReady:!1,hasStartSweep:!1,startSweep:Object(),isViewForm:this.props.isViewForm,prevSweepIndex:0,onPropsReceivedStateChanged:!1,linkBimism:this.props.bimURL,destinationSweeps:[]}),this.props.onRefreshMatterport(!1));var t=this.props,n=t.id,r=t.heading,o=t.isViewForm,s=t.showSaveButton,c=this.state,l=c.isStarted,u=c.selectedSteps,d=c.logMessage,p=c.sdkReady,h=0,f=this.state.linkBimism;f&&!f.includes("&utm_source=sdkdebug&play=0&tourcta=0")&&(f+="&utm_source=sdkdebug&play=0&tourcta=0");var m=!1;return m=!p||(u.length>0||l),i.createElement(a.a,{id:n,saveButtonText:"Save",heading:r,isEditForm:!0,showSaveButton:s,showCancelButton:o,onSaveButtonClick:function(){e.onSaveHandle()}},i.createElement("div",{className:""},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("iframe",{id:"showcase",src:f,onLoad:function(){e.loadSDK(e.setDialogState,e.state)},width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0}))),!o&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-7 col-xs-12"},i.createElement("button",{type:"button",id:"btnAddCurrentStep",disabled:m,title:"Add current step",className:"btn btn-primary btn-fill matterport-dialog-btn-tour-margin",onClick:this.addCurrentSweep},i.createElement("i",{className:"fa fa-thumb-tack"})),i.createElement("br",null),i.createElement("br",null),i.createElement("span",{className:"small-font-list"},d)),i.createElement("div",{className:"col-md-5 col-xs-12"},i.createElement("table",null,i.createElement("tr",null,i.createElement("th",null,"Step"),i.createElement("th",null)),u&&u.map(function(t){return h+=1,i.createElement("tr",null,i.createElement("td",{className:"link",onClick:function(){p&&window.goToSweep(t.uuid)}},"Step ",h,": ",i.createElement("input",{type:"checkbox",disabled:!0,checked:!0,style:{cursor:"pointer"}})),i.createElement("td",null,!o&&p&&i.createElement("button",{type:"button",title:"Remove step",onClick:function(){e.removeSweep(t.uuid)},className:"btn btn-light matterport-dialog-btn-no-border"},i.createElement("i",{className:"fa fa-times"}))))})))))))},t}(i.Component);t.a=o},802:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(116)),r=n(8),o=n(40),s=n(726),c=n(791),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={virtualBIM:"",cadBIM:"",showCA:!1,showECM:!1,showRCX:!1,ECMCompleted:!1,RCXCompleted:!1,CACompleted:!1,workFlowSpaceList:[],equipmentSweeps:[],addCurrentSweep:!1,selectedVirtualBIM:""},n.updateInspectionButtonsVisibility=n.updateInspectionButtonsVisibility.bind(n),n}return l(t,e),t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){var t,n=this;return d(this,function(i){return"Equip"!=e.tabName&&"Space"!=e.tabName||(t=[],e.workFlowSpaceList&&e.workFlowSpaceList.length&&(t=e.workFlowSpaceList),this.setState({workFlowSpaceList:t},function(){return u(n,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this.updateInspectionButtonsVisibility()];case 1:return e.sent(),[4,this.getBIM_Links()];case 2:return e.sent(),[2]}})})})),[2]})})},t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e,t=this;return d(this,function(n){return"Equip"!=this.props.tabName&&"Space"!=this.props.tabName||(e=[],this.props.workFlowSpaceList&&this.props.workFlowSpaceList.length&&(e=this.props.workFlowSpaceList),this.setState({workFlowSpaceList:e},function(){return u(t,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this.updateInspectionButtonsVisibility()];case 1:return e.sent(),[2]}})})})),[2]})})},t.prototype.updateInspectionButtonsVisibility=function(){return u(this,void 0,void 0,function(){var e,t,n,i;return d(this,function(a){switch(a.label){case 0:return this.props.inspectionOntology?(e=this.state.workFlowSpaceList,t=localStorage.getItem("spaceOntology"),n=localStorage.getItem("equipmentType"),[4,Object(o.d)(this.props.tabName,t,n,e,this.props.itemName,this.props.inspectionOntology)]):[3,2];case 1:i=a.sent(),this.setState({showRCX:i.showRCX,showECM:i.showECM,showCA:i.showCA,RCXCompleted:i.RCXCompleted,ECMCompleted:i.ECMCompleted,CACompleted:i.CACompleted}),a.label=2;case 2:return[2]}})})},t.prototype.getBIM_Links=function(){return u(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return[4,Object(a.d)(this.props.buildingName,this.props.itemName,this.props.tabName).then(function(t){if(t){var n=Object(r.g)(t.virtualBIM),i=Object(r.g)(t.cadBIM);e.setState({virtualBIM:n,cadBIM:i})}})];case 1:return t.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,a=t.buildingName,o=t.tabName,l=t.itemName,u=t.showDevicesButton,d=void 0!==u&&u,p=t.showComponentButton,h=void 0!==p&&p,f=t.showAuditTypes,m=void 0!==f&&f,b=t.showBIMButtons,v=void 0!==b&&b,w=this.state,E=w.virtualBIM,y=w.cadBIM,S=w.showCA,g=w.showECM,N=w.showRCX,C=w.ECMCompleted,O=w.RCXCompleted,I=w.CACompleted,k=w.equipmentSweeps,j=w.addCurrentSweep,P=w.selectedVirtualBIM,x=window.location.hash;return i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 col-sm-12 no-padding"},i.createElement("div",{className:"btn-group",id:"tabbtn"},i.createElement("a",{className:"btn "+(x.indexOf("/Profile")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/Profile/"+l},"Profile"),d&&i.createElement("a",{className:"btn "+(x.indexOf("/Devices")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/Devices/"+l},"Devices"),h&&i.createElement("a",{className:"btn "+(x.indexOf("/Components")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/Components/"+l},"Components"),i.createElement("a",{className:"btn "+(x.indexOf("/Related")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/Related/"+l},"Related"),i.createElement("a",{className:"btn "+(x.indexOf("/Documents")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/Documents/"+l},"Docs"),i.createElement("a",{className:"btn "+(x.indexOf("/SupplyChain")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/SupplyChain/"+l},"Supply"),m&&i.createElement("a",{className:"btn "+(x.indexOf("/P/")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",title:"Points",href:"#"+n+"/"+a+"/"+o+"/P/"+l},"Points"),"Space"==this.props.tabName&&i.createElement("a",{className:"btn "+(x.indexOf("/SpaceSchedule")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+a+"/"+o+"/SpaceSchedule/"+l},"Schedule"),i.createElement("span",{className:"hidden-xs hidden-sm spacebtn"}),m&&i.createElement("span",null,g&&i.createElement("a",{className:"btn "+(x.indexOf("/ECM")>0?"btn-fill":"")+" btn-dark",title:"Energy Conservation Measures",href:"#"+n+"/"+a+"/"+o+"/ECM/"+l},"ECM",C&&i.createElement("i",{className:"fa fa-check inspection-completed"})),N&&i.createElement("a",{className:"btn "+(x.indexOf("/RCX")>0?"btn-fill":"")+" btn-dark",title:"Retro-Commissioning",href:"#"+n+"/"+a+"/"+o+"/RCX/"+l},"RCX",O&&i.createElement("i",{className:"fa fa-check inspection-completed"})),S&&i.createElement("a",{className:"btn "+(x.indexOf("/CA")>0?"btn-fill":"")+" btn-dark",title:"Condition Assessment",href:"#"+n+"/"+a+"/"+o+"/CA/"+l},"CA",I&&i.createElement("i",{className:"fa fa-check inspection-completed"}))),i.createElement("span",{className:"hidden-xs hidden-sm spacebtn"}),v&&i.createElement("span",null,E&&"Equip"!=this.props.tabName&&i.createElement("a",{className:"btn btn-success",href:E&&E.indexOf("ttp")>0?E:"http://"+E,target:"_blank",title:E},"Virtual BIM"),E&&"Equip"==this.props.tabName&&i.createElement("button",{className:"btn btn-success",title:"Virtual BIM",onClick:function(){Object(s.j)(a,e.props.itemName).then(function(t){if(t.length>0){var n=t[0],i=Object(r.g)(n.sweep);if(i){var a=[],o=Object();o.uuid=i,a.push(o);var s=!(a.length>0)&&(E&&E.includes("camera_position")),c=E;e.setState({equipmentSweeps:a,addCurrentSweep:s,selectedVirtualBIM:c})}}document.getElementById("btnVirtualBIMDialog").click()})}},"Virtual BIM"),y&&i.createElement("button",{className:"btn btn-success",onClick:function(){window.open(y&&y.indexOf("ttp")>0?y:"http://"+y,"_blank")},title:y},"Digital Twin")))),v&&E&&i.createElement(i.Fragment,null,i.createElement("button",{id:"btnVirtualBIMDialog",className:"hidden","data-toggle":"modal","data-target":"#virtualBIMDialog",title:"Add"},". "),i.createElement(c.a,{id:"virtualBIMDialog",heading:"Virtual BIM Equipment View",showSaveButton:!1,sweeps:k,bimURL:P,isViewForm:!0,addCurrentSweep:j,buildingName:this.props.buildingName,isRefreshDialog:!1,isSweepChangeable:!1})," "))))},t}(i.Component);t.a=p}});