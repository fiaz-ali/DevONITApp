webpackJsonp([14],{1780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),i=(n.n(a),n(44)),s=n(87),c=n(872),o=n(26),r=n(17),l=n(623),u=n(595),d=n(578),f=n(849),h=n(573),b=n(18),m=n(627),p=n(579),g=n(14),v=n(629),T=n(607),y=n(935),k=n(655),O=n(592),w=n(650),E=n(1781),S=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),j=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function c(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(c,o)}r((a=a.apply(e,t||[])).next())})},N=this&&this.__generator||function(e,t){var n,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,a=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){c.label=s[1];break}if(6===s[0]&&c.label<i[1]){c.label=i[1],i=s;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(s);break}i[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},A="",D="",C="",_="",x=function(e){function t(t){var n=e.call(this,t)||this;return n.state={building:"Select Building",ticketType:"",_buildings:[],_floors:[],_spaces:[],_assets:[],_components:[],_ticketType:[],ticketObject:Object(),phaseTemplateDetailList:[],emailsList:[],peopleList:[],actions:[],isTicketSaved:!1,departments:[]},n.ticketTypeChangeHandler=n.ticketTypeChangeHandler.bind(n),n.buildingChangeHandler=n.buildingChangeHandler.bind(n),n.getFloorBasesOnBuildingHandler=n.getFloorBasesOnBuildingHandler.bind(n),n.floorChangeHandler=n.floorChangeHandler.bind(n),n.getSpacesBasedOnFloorHandler=n.getSpacesBasedOnFloorHandler.bind(n),n.spaceChangeHandler=n.spaceChangeHandler.bind(n),n.getAssetsHandler=n.getAssetsHandler.bind(n),n.assetChangeHandler=n.assetChangeHandler.bind(n),n.getComponentsHandler=n.getComponentsHandler.bind(n),n.checkingValidations=n.checkingValidations.bind(n),n.saveTicketHandler=n.saveTicketHandler.bind(n),n.handleActivateStage=n.handleActivateStage.bind(n),n._fetchDepartmentOrGroup=n._fetchDepartmentOrGroup.bind(n),n}return S(t,e),t.prototype.componentDidMount=function(){return j(this,void 0,void 0,function(){var e,t,n,a;return N(this,function(i){switch(i.label){case 0:return this._fetchBuildings(),this._fetchTicketTypes(),this._fetchPhaseTemplateDetails(),this._fetchContact(),this._fetchDepartmentOrGroup(),this.props.ticketOntology?[4,Object(y.e)(this.props.ticketOntology)]:[3,5];case 1:return e=i.sent(),[4,Object(p.c)(e.floorOntology,e.buildingOntology)];case 2:return t=i.sent(),[4,Object(l.g)(e.buildingOntology,o.b.POINT,e.floorOntology,e.spaceOntology)];case 3:return n=i.sent(),[4,Object(h.m)(e.buildingOntology,e.assetOntology)];case 4:return a=i.sent(),this.setState({ticketObject:e,_spaces:t,_assets:n,_components:a}),[3,6];case 5:this.setState({ticketObject:Object(),building:this.props.buildingName}),i.label=6;case 6:return[2]}})})},t.prototype.componentWillUnmount=function(){return j(this,void 0,void 0,function(){return N(this,function(e){return this.setState({ticketObject:Object(),_spaces:[],_assets:[],_components:[]}),[2]})})},t.prototype._fetchBuildings=function(){return j(this,void 0,void 0,function(){var e=this;return N(this,function(t){switch(t.label){case 0:return[4,Object(u.d)().then(function(t){e.setState({_buildings:t}),e.buildingChangeHandler(t[0].building.value)}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchTicketTypes=function(){return j(this,void 0,void 0,function(){var e=this;return N(this,function(t){switch(t.label){case 0:return[4,Object(y.d)().then(function(t){e.setState({_ticketType:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchPhaseTemplateDetails=function(){return j(this,void 0,void 0,function(){var e=this;return N(this,function(t){switch(t.label){case 0:return[4,Object(k.j)(this.props.buildingName).then(function(t){e.setState({phaseTemplateDetailList:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchContact=function(){return j(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:return[4,Object(d.n)(this.props.buildingName)];case 1:return(e=t.sent())&&this.setState({peopleList:e}),[2]}})})},t.prototype._fetchDepartmentOrGroup=function(){return j(this,void 0,void 0,function(){var e=this;return N(this,function(t){switch(t.label){case 0:return[4,Object(d.e)().then(function(t){t&&t.length>0&&e.setState({departments:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.ticketTypeChangeHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){return t=this.state.ticketObject,this.setState({ticketType:e}),t.ticketTypeOntology=e,[2]})})},t.prototype.buildingChangeHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){return(t=this.state.ticketObject).buildingOntology=e,this.setState({ticketObject:t,building:e}),this.getFloorBasesOnBuildingHandler(e),[2]})})},t.prototype.getFloorBasesOnBuildingHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,Object(O.f)(e)];case 1:return t=n.sent(),this.setState({_floors:t,_spaces:[],_assets:[],_components:[]}),[2]}})})},t.prototype.floorChangeHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){return(t=this.state.ticketObject).floorOntology=e,this.setState({ticketObject:t}),this.getSpacesBasedOnFloorHandler(e),[2]})})},t.prototype.getSpacesBasedOnFloorHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return console.log(e),console.log(this.state.building),[4,Object(p.c)(e,this.state.building)];case 1:return t=n.sent(),this.setState({_spaces:t,_assets:[],_components:[]}),[2]}})})},t.prototype.spaceChangeHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){return(t=this.state.ticketObject).spaceOntology=e,this.setState({ticketObject:t}),this.getAssetsHandler(e),[2]})})},t.prototype.getAssetsHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return""==e?(this.setState({_assets:[],_components:[]}),[2]):[4,Object(l.g)(this.state.building,o.b.POINT,this.state.ticketObject.floorOntology,e)];case 1:return t=n.sent(),this.setState({_assets:t,_components:[]}),[2]}})})},t.prototype.assetChangeHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){return(t=this.state.ticketObject).assetOntology=e,this.setState({ticketObject:t}),this.getComponentsHandler(e),[2]})})},t.prototype.getComponentsHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,Object(h.m)(this.state.building,e)];case 1:return t=n.sent(),this.setState({_components:t}),[2]}})})},t.prototype.componentChangeHandler=function(e){return j(this,void 0,void 0,function(){var t;return N(this,function(n){return(t=this.state.ticketObject).componentOntology=e,this.setState({ticketObject:t}),[2]})})},t.prototype.checkingValidations=function(e,t){document.getElementById(e).classList.add("text-success"),document.getElementById(t).classList.add("is-valid")},t.prototype.saveTicketHandler=function(){return j(this,void 0,void 0,function(){var e,t,n,a,i,c,o,l,u,d=this;return N(this,function(h){switch(h.label){case 0:return Object(s.a)(!0),e=this.props.buildingName,t=this.state.ticketObject,document.getElementById("btnSave").setAttribute("disabled","disabled"),t.ontology=(new Date).Ticket_Number(),n=JSON.parse(g.a.getItem("user")),t.enteredBy=n.contact,a=t.ticketTypeOntology,[4,Object(y.c)(a)];case 1:i=h.sent(),c=i.split(","),o=function(n){var a,i,s,o,u,h,p,g,v,y,k;return N(this,function(O){switch(O.label){case 0:for(a=l.state.phaseTemplateDetailList.find(function(e){return e.ontology===c[n]}),i="Dynamic"==a.behaviour,s=[],o=0;o<a.stageTemplates.length;o++)(s=a.stageTemplates[o].subTasks.map(function(e){return e.ontology})).push.apply(s,s);return[4,Object(m.b)(l.props.buildingName,s)];case 1:u=O.sent(),(h=Object()).ontology=Object(b.l)(7),D=D+h.ontology+",",h.description=a.description,h.module=a.module,h.status="Planned",h.phaseID=Object(b.k)(7).toString(),h.templateID=a.templateID,h.templateType=a.templateType,h.stageTemplateOnology=[],h.ticketOntology=t.ontology,h.stages=[],p=[],g=[],v=function(n){var s,c,o,d,m,v,T;return N(this,function(y){switch(y.label){case 0:s=a.stageTemplates[n],c=Object(),o=Object(b.l)(7),c.task=o,C=C+o+",",c.wfOntology=h.ontology,c.taskNumber=Object(b.k)(7).toString(),c.description=s.description,c.action=s.description,c.enteredBy=s.enteredBy,c.enteredByName=s.enteredByName,c.assignedTo=s.assignedTo,s.assignedDepartment&&""!=s.assignedDepartment&&(d=l.state.peopleList&&l.state.peopleList.find(function(e){return Object(r.g)(e.departmentsAndGroups).includes(s.assignedDepartment)&&Object(r.g)(e.assignedTo).includes(s.building)&&"2"==Object(r.g)(e.role)}),c.assignedTo=void 0!==d?[{label:Object(r.g)(d.name),value:Object(r.g)(d.contact)}]:s.assignedTo),c.hasChat=!0,c.entryTimeStamp=s.entryTimeStamp,c.criticality=s.criticality,c.equipSubject=s.equipSubject,c.equipRdfsLabel=s.equipRdfsLabel,c.spaceSubject=s.spaceSubject,c.spaceRdfsLabel=s.spaceRdfsLabel,c.floor=s.floor,c.building=s.building,c.workOrder=s.workOrder,c.status="Planned",c.acknowledged=!0,c.archived=!1,c.startTime="",c.note="",c.isSequence=!0,c.QRTag=s.QRTag,c.isQRTask=s.isQRTask,c.subTasks=[],c.workflowType=s.workflowType,c.redirectionLink=s.redirectionLink,c.isStage=!0,c.isActivated=!1,c.estimatedStartTime=new Date,m=new Date,c.estimatedEndTime=new Date(m.setDate(new Date(m).getDate()+2)),c.ticketOntology=t.ontology,c.subTasks=[],v=function(n){var a,o,l,d,m,v,T,y,k,O,w,E;return N(this,function(S){switch(S.label){case 0:return a=s.subTasks[n],(o=Object()).subTask=Object(b.l)(7),_=_+o.subTask+",",[4,Object(f.d)(e,["TaskTemplate"],[a.ontology])];case 1:if((l=S.sent())&&l.length>0&&l[0].entityOntology)for(d=0;d<l.length;d++)m=Object(),v=l[d],m.docOntology=o.subTask+Object(b.p)()+d,m.building=Object(r.g)(v.building),m.documentType=Object(r.g)(v.documentType),m.enteredBy=Object(r.g)(v.enteredBy),m.entityOntology=[{label:o.subTask,value:o.subTask}],m.entityType="Task",m.entryTimeStamp=(new Date).toString(),m.rdfsLabel=Object(r.g)(v.rdfsLabel),m.s3FileName=Object(r.g)(v.s3FileName),g.push(m);for(o.taskNumber=Object(b.k)(7).toString(),o.description=a.description,o.action=a.action,o.enteredBy=a.enteredBy,o.enteredByName=a.enteredByName,o.assignedTo=a.assignedTo,o.assignedDepartment=a.assignedDepartment,o.hasChat=!0,o.entryTimeStamp=a.entryTimeStamp,o.criticality=a.criticality,o.equipSubject=c.equipSubject,o.equipRdfsLabel=c.equipRdfsLabel,o.spaceSubject=c.spaceSubject,o.spaceRdfsLabel=c.spaceRdfsLabel,o.building=c.building,o.workOrder=a.workOrder,o.status="Planned",o.acknowledged=!0,o.archived=!1,o.index=a.index,o.parentTask=c.task,o.note=a.note,o.relatedLink=a.relatedLink,o.duration=a.duration,o.durationUnit=a.durationUnit,o.workerDuration=a.workerDuration,o.workerDurationUnit=a.workerDurationUnit,o.fileName=a.fileName,o.oldFileName=a.oldFileName,o.startTime="",o.workType=a.workType,o.checklistID=a.checklistID,o.isQRTask=a.isQRTask,o.QRTag=a.QRTag,o.notifyViaEmail=a.notifyViaEmail,o.notifyViaSMS=a.notifyViaSMS,o.estimatedStartTime=a.estimatedStartTime,o.estimatedEndTime=a.estimatedEndTime,o.workflowType=a.workflowType,o.redirectionLink=a.redirectionLink,o.isStage=!0,o.isActivated=!1,o.acknowledged=!0,o.archived=!1,o.ticketOntology=t.ontology,o.wfOntology=h.ontology,c.subTasks.push(o),T=u.filter(function(e){return e.taskOntology==a.ontology}),y=0;y<T.length;y++)k=T[y],(O=Object()).ontology=Object(b.l)(10),O.directive=k.directive,O.directiveType=k.directiveType,O.floorOntology=i?t.floorOntology:k.floorOntology,O.spaceOntology=i?t.spaceOntology:k.spaceOntology,O.componentOntology=i?t.componentOntology:k.componentOntology,O.assetOntology=i?t.assetOntology:k.assetOntology,O.pointOntology=i?"":k.pointOntology,O.unit=k.unit,O.taskOntology=o.subTask,O.taskDescription=k.taskDescription,O.isTemplate=!1,O.objectTemplateReferenceID=k.ontology,O.isQrCodeVerified=!1,O.qrCode=k.qrCode,O.visibleObjectFormActions=[],p.push(O);for(w=function(e){var t=p[e],n=u.find(function(e){return e.ontology==t.objectTemplateReferenceID});if(n.visibleObjectFormActions&&n.visibleObjectFormActions.length>0)for(var a=function(e){var a=n.visibleObjectFormActions[e];if(""!=a){var i=u.find(function(e){return e.ontology==a}),s=p.find(function(e){return e.objectTemplateReferenceID==i.ontology});-1==t.visibleObjectFormActions.findIndex(function(e){return e==s.ontology})&&t.visibleObjectFormActions.push(s.ontology)}},i=0;i<n.visibleObjectFormActions.length;i++)a(i)},E=0;E<p.length;E++)w(E);return[2]}})},T=0,y.label=1;case 1:return T<s.subTasks.length?[5,v(T)]:[3,4];case 2:y.sent(),y.label=3;case 3:return T++,[3,1];case 4:return h&&h.stages&&h.stages.push(c),[2]}})},y=0,O.label=2;case 2:return y<a.stageTemplates.length?[5,v(y)]:[3,5];case 3:O.sent(),O.label=4;case 4:return y++,[3,2];case 5:return g.length>0&&g.map(function(e){Object(f.f)(e)}),[4,Object(m.c)(e,p)];case 6:return O.sent(),[4,Object(T.d)(e,h,!1,!0).then(function(e){return j(d,void 0,void 0,function(){return N(this,function(e){return[2]})})}).catch(function(e){return e})];case 7:return O.sent(),a.stageTemplateOnology&&a.stageTemplateOnology.length>0?(k=a.uses?a.uses+1:1,[4,Object(T.e)(e,a.ontology,k.toString()).then(function(e){}).catch(function(e){return e})]):[3,9];case 8:O.sent(),O.label=9;case 9:return[2]}})},l=this,u=0,h.label=2;case 2:return u<c.length?[5,o(u)]:[3,5];case 3:h.sent(),h.label=4;case 4:return u++,[3,2];case 5:return D=D.substr(0,D.length-1),C=C.substr(0,D.length-1),_=_.substr(0,D.length-1),t.deployedWFOntology=D,t.stageOntology=C,t.subTasksOntology=_,[4,Object(y.g)(t)];case 6:return h.sent(),Object(s.a)(!1),this.setState({isTicketSaved:!0}),[2]}})})},t.prototype.handleActivateStage=function(e,t,n){return j(this,void 0,void 0,function(){var a,c,o,l,u,d;return N(this,function(f){switch(f.label){case 0:if(a=this.props.buildingName,c=this.state.peopleList,o=this.state.emailsList,e.startTime=n&&null!=n?0==n?new Date(Date.now()).toString():"":new Date(Date.now()).toString(),e.startTaskCondition=n&&null!=n?0==n?"daytime":"completionof":"daytime",e.conditionalTasks=n&&null!=n?0==n?[]:[{label:A,value:A}]:[],e.status=n&&null!=n?0==n?"Assigned":"Pending":"Assigned",e.acknowledged=!0,e.isSequence=!0,e.archived=!1,e.isDeleted=!1,e.isActivated=!0,e.workflowType=e.workflowType?e.workflowType:t,e.assignedTo&&e.assignedTo.length>0)for(l=function(t){if(e.assignedTo[t]&&e.assignedTo[t].value){var n=c&&c.find(function(n){return Object(r.g)(n.contact)==e.assignedTo[t].value});if(o||(o=[]),n&&n.email)o.find(function(e){return e==Object(r.g)(n.email)})||o.push(Object(r.g)(n.email))}},d=0;d<e.assignedTo.length;d++)l(d);for(e.hasChat=!0,u=function(a){if(e.subTasks[a].workflowType=e.workflowType?e.workflowType:t,e.subTasks[a].isActivated=!0,e.subTasks[a].assignedTo&&e.subTasks[a].assignedTo.length>0){var i=c&&c.find(function(t){return Object(r.g)(t.contact)==e.subTasks[a].assignedTo});if(o||(o=[]),i&&i.email)o.find(function(e){return e==Object(r.g)(i.email)})||o.push(Object(r.g)(i.email))}e.subTasks[a].startTime=n&&null!=n?0==n&&0==a?new Date(Date.now()).toString():"":0==a?new Date(Date.now()).toString():"",e.subTasks[a].status=n&&null!=n?0==n&&0==a?"Assigned":"Pending":0==a?"Assigned":"Pending",e.subTasks[a].acknowledged=!0,e.subTasks[a].isDeleted=!1,e.subTasks[a].startTaskCondition=n&&null!=n?0==n&&0==a?"daytime":"completionof":0==a?"daytime":"completionof",e.subTasks[a].conditionalTasks=n&&null!=n?0==n&&0==a?[]:n>0&&0==a?[{label:A,value:A}]:[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:a>0?[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:[],A=e.task},d=0;d<e.subTasks.length;d++)u(d);return Object(s.a)(!0),"Contract"!=t?[3,2]:[4,Object(v.q)(o,["read"],e.contractFileName).then(function(t){if(t.link){var n=t.link[0].link.webUrl;e.contractFileUrl=n;for(var c=0;c<e.subTasks.length;c++){e.subTasks[c].contractFileUrl=n}Object(v.n)(a,e,!0),Object(T.f)("","Assigned",!0).then(function(){}),Object(s.a)(!1)}else console.log(t),Object(i.a)("Error occured while requesting permissions for Contract File.")})];case 1:return f.sent(),[3,5];case 2:return[4,Object(v.n)(a,e,!0)];case 3:return f.sent(),[4,Object(T.f)("","Assigned",!0).then(function(){})];case 4:f.sent(),Object(s.a)(!1),f.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,i=t.buildingName,s=t.isView,o=this.state,l=o._buildings,u=o._floors,d=o._spaces,f=o._assets,h=o._components,b=o._ticketType,m=o.ticketObject,p=o.departments,g=this.props.isView?"none":"block",v=this.state.isTicketSaved?"block":"none",T=m.deployedWFOntology&&m.deployedWFOntology.split(",");return a.createElement(a.Fragment,null,a.createElement("div",{className:""},a.createElement("div",{className:""},a.createElement("div",{className:""},a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid small"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2 no-margin"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row no-margin p-2"},a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"ONIT Ticket Type: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{name:"ticketType",id:"ticketType",className:"form-control",value:m.ticketTypeOntology,disabled:s,onChange:function(t){e.ticketTypeChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Ticket Type "),b&&b.length>0&&b.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology},e.ticketType," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{id:"issueLabel",className:"col-md-3 py-2 px-0 headingText"}," Describe the Issue:"),a.createElement("div",{className:"col-md-9 no-padding "},a.createElement("textarea",{id:"issue",rows:3,className:"form-control",value:m.ticketIssue,disabled:s,onChange:function(e){m.ticketIssue=e.target.value}}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Building: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",name:"building",disabled:s,value:m.buildingOntology,id:"building",onChange:function(t){e.buildingChangeHandler(t.target.value)}},l&&l.length>0&&l.map(function(e,t){return a.createElement("option",{key:t,value:Object(r.g)(e.building)},Object(r.g)(e.rdfsLabel)," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Floor: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"floor",name:"floor",disabled:s,value:m.floorOntology,onChange:function(t){e.floorChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Floor"),u&&u.length>0&&u.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Space: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"space",name:"space",value:m.spaceOntology,disabled:s,onChange:function(t){e.spaceChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Space"),d&&d.length>0&&d.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Asset: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"asset",name:"asset",value:m.assetOntology,disabled:s,onChange:function(t){e.assetChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Assets"),f&&f.length>0&&f.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Component: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"component",name:"component",value:m.componentOntology,disabled:s,onChange:function(t){e.componentChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Component"),h&&h.length>0&&h.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.name),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Concern: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{name:"ticketType",id:"ticketType",className:"form-control",value:m.criticalityOntology,disabled:s,onChange:function(e){m.criticalityOntology=e.target.value}},a.createElement("option",{value:""},"Select Concern"),c.c&&c.c.length>0&&c.c.map(function(e,t){return a.createElement("option",{key:t,value:e.id}," ",e.id," - ",e.name," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Suggest Fix: "),a.createElement("div",{className:"col-md-9 no-padding "},a.createElement("textarea",{rows:4,className:"form-control",value:m.suggestionFix,disabled:s,onChange:function(e){m.suggestionFix=e.target.value}})))))))),a.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2 no-margin"},a.createElement("div",{className:"container-fluid p-1"},a.createElement("div",{className:"content p-1"},a.createElement("div",{className:"row no-margin p-2"},a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Customer Name: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("input",{className:"form-control",name:"customerName",id:"customerName",type:"text",value:m.customerName,disabled:s,onChange:function(t){m.customerName=t.target.value,e.setState({ticketObject:m})}}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Customer Email: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("input",{className:"form-control",name:"customerEmail",id:"customerEmail",value:m.customerEmail,disabled:s,onChange:function(t){m.customerEmail=t.target.value,e.setState({ticketObject:m})}}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Department Assigned: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",name:"department",id:"department",value:m.departmentAssigned,disabled:s,onChange:function(t){m.departmentAssigned=t.target.value,e.setState({ticketObject:m})}},a.createElement("option",{value:""},"Select Department"),p&&p.length>0&&p.map(function(e,t){return a.createElement("option",{key:t,value:e},e)}))))))))),a.createElement("div",{style:{display:g},className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2"},a.createElement("div",{className:"row py-0 no-margin p-2"},a.createElement(w.a,{showUploader:!0,buildingName:this.props.buildingName,assetOntology:"equipment.equipmentName",entityType:"Tickets"})))),T&&a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2"},a.createElement("h3",{className:"text-center"},"WorkFlow Status"),T&&T.map(function(t,n){return a.createElement("div",{key:n,className:"card p-2"},a.createElement("div",{className:"row py-0 no-margin p-2"},a.createElement(E.a,{instance:e.props.instance,buildingName:e.props.buildingName,ontology:t})))}))),a.createElement("br",null),a.createElement("div",{className:"col-md-12 inline-block"},a.createElement("div",{className:"form-inline"},a.createElement("button",{style:{display:g},id:"btnSave",className:"btn btn-primary btn-fill",type:"button",onClick:function(){return j(e,void 0,void 0,function(){return N(this,function(e){return this.saveTicketHandler(),[2]})})}},a.createElement("i",{className:"fa fa-save"}),"Save"),m.deployedWFOntology&&T.map(function(t,s){return a.createElement("button",{key:s,style:{display:v},id:"btnSave",className:"btn btn-primary btn-fill",type:"button",onClick:function(){return j(e,void 0,void 0,function(){return N(this,function(e){return window.location.origin.indexOf("/localhost")>-1?window.open("http://localhost:3004/#"+n+"/"+i+"/Deploy/WorkflowView/"+t,"_blank"):window.open("https://projects.onitnetwork.com/#"+n+"/"+i+"/Deploy/WorkflowView/"+t,"_blank"),[2]})})}},a.createElement("i",{className:"fa fa-location-arrow"}),"Navigate to Deployed WF")})),a.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=n+"/"+i+"/Tickets"}},a.createElement("i",{className:"fa fa-angle-double-left"}),"  Back to ONIT Tickets")))))))))},t}(a.Component);t.default=x},1781:function(e,t,n){"use strict";var a,i=n(3),s=(n.n(i),n(87)),c=n(607),o=n(17),r=n(44),l=n(629),u=n(578),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),f=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function c(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(c,o)}r((a=a.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,a=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){c.label=s[1];break}if(6===s[0]&&c.label<i[1]){c.label=i[1],i=s;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(s);break}i[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},b="",m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={phase:Object(),emailsList:[],peopleList:[]},a=n,n.getPhaseDetail=n.getPhaseDetail.bind(n),n.handleActivateStage=n.handleActivateStage.bind(n),n.handleActivatePhase=n.handleActivatePhase.bind(n),n.validatePhaseAssignments=n.validatePhaseAssignments.bind(n),n.validateStageAssignments=n.validateStageAssignments.bind(n),n._fetchContact=n._fetchContact.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this.props.buildingName?(Object(s.a)(!0),[4,this._fetchContact()]):[3,4];case 1:return e.sent(),this.props.ontology?[4,this.getPhaseDetail()]:[3,3];case 2:e.sent(),e.label=3;case 3:Object(s.a)(!1),e.label=4;case 4:return[2]}})})},t.prototype._fetchContact=function(){return f(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,Object(u.n)(this.props.buildingName)];case 1:return(e=t.sent())&&a.setState({peopleList:e}),[2]}})})},t.prototype.getPhaseDetail=function(){return f(this,void 0,void 0,function(){var e=this;return h(this,function(t){switch(t.label){case 0:return[4,Object(c.b)(this.props.buildingName,this.props.ontology).then(function(t){if(t.length){if("Completed"!==t[0].status)t[0].stages.every(function(e){return"Completed"==e.status})&&Object(c.f)(t[0].ontology,"Completed",!0);e.setState({phase:t[0]})}})];case 1:return t.sent(),[2]}})})},t.prototype.handleActivatePhase=function(e){return f(this,void 0,void 0,function(){var t,n;return h(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<e.stages.length?(n=e.stages[t],[4,this.handleActivateStage(n,e.templateType,t)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},t.prototype.handleActivateStage=function(e,t,n){return f(this,void 0,void 0,function(){var a,i,r,u,d,f,m=this;return h(this,function(h){switch(h.label){case 0:if(a=this.props.buildingName,i=this.state.peopleList,r=this.state.emailsList,e.startTime=n&&null!=n?0==n?new Date(Date.now()).toString():"":new Date(Date.now()).toString(),e.startTaskCondition=n&&null!=n?0==n?"daytime":"completionof":"daytime",e.conditionalTasks=n&&null!=n?0==n?[]:[{label:b,value:b}]:[],e.status=n&&null!=n?0==n?"Assigned":"Pending":"Assigned",e.acknowledged=!0,e.isSequence=!0,e.archived=!1,e.isDeleted=!1,e.isActivated=!0,e.workflowType=e.workflowType?e.workflowType:t,e.assignedTo&&e.assignedTo.length>0)for(u=function(t){if(e.assignedTo[t]&&e.assignedTo[t].value){var n=i&&i.find(function(n){return Object(o.g)(n.contact)==e.assignedTo[t].value});if(r||(r=[]),n&&n.email)r.find(function(e){return e==Object(o.g)(n.email)})||r.push(Object(o.g)(n.email))}},f=0;f<e.assignedTo.length;f++)u(f);for(e.hasChat=!0,d=function(a){if(e.subTasks[a].workflowType=e.workflowType?e.workflowType:t,e.subTasks[a].isActivated=!0,e.subTasks[a].assignedTo&&e.subTasks[a].assignedTo.length>0){var s=i&&i.find(function(t){return Object(o.g)(t.contact)==e.subTasks[a].assignedTo});if(r||(r=[]),s&&s.email)r.find(function(e){return e==Object(o.g)(s.email)})||r.push(Object(o.g)(s.email))}e.subTasks[a].startTime=n&&null!=n?0==n&&0==a?new Date(Date.now()).toString():"":0==a?new Date(Date.now()).toString():"",e.subTasks[a].status=n&&null!=n?0==n&&0==a?"Assigned":"Pending":0==a?"Assigned":"Pending",e.subTasks[a].acknowledged=!0,e.subTasks[a].isDeleted=!1,e.subTasks[a].startTaskCondition=n&&null!=n?0==n&&0==a?"daytime":"completionof":0==a?"daytime":"completionof",e.subTasks[a].conditionalTasks=n&&null!=n?0==n&&0==a?[]:n>0&&0==a?[{label:b,value:b}]:[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:a>0?[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:[],b=e.task},f=0;f<e.subTasks.length;f++)d(f);return Object(s.a)(!0),[4,Object(l.n)(a,e,!0)];case 1:return h.sent(),[4,Object(c.f)("","Assigned",!0).then(function(){m.getPhaseDetail()})];case 2:return h.sent(),Object(s.a)(!1),[2]}})})},t.prototype.validatePhaseAssignments=function(e){var t=!0;if(e.stages&&e.stages.length>0)for(var n=0;n<e.stages.length;n++){var a=e.stages[n];if(a.assignedTo&&a.assignedTo.length>0){if(-1!=a.subTasks.findIndex(function(e){return""==e.assignedTo})){t=!1;break}t=!0}else t=!1}t?document.getElementById("btnActivatePhase").click():Object(r.a)("Not all Tasks have assignments, please assign all tasks.")},t.prototype.validateStageAssignments=function(e,t){var n=!0;e.assignedTo&&e.assignedTo.length>0?n=-1==e.subTasks.findIndex(function(e){return""==e.assignedTo}):n=!1;n?document.getElementById("btnActivateStage"+t).click():Object(r.a)("Not all Tasks have assignments, please assign all tasks.")},t.prototype.render=function(){var e=this.props.showGraphOnly,t=this.state.phase;return i.createElement("div",{className:e?"col-md-12":"content"},i.createElement("div",{className:e?"row padding-10":"container-fluid"},i.createElement("div",{className:"row"}),i.createElement("br",null),i.createElement("div",null,i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 img-thumbnail",style:{background:"#b8d8f9",color:"black"}},i.createElement("label",null," ",i.createElement("h5",{style:{color:"black",marginBottom:"9px"}},t&&t.description),"  "),i.createElement("span",{style:{color:"black"},className:"pull-right"},"Workflow ID: ",t.phaseID))),t&&t.stages&&t.stages.map(function(e,t){return i.createElement("div",{key:t,className:"row"},i.createElement("div",{className:"col-md-12 row.match-my-cols"},i.createElement("div",{className:"col-md-3 col-sm-3 col-xs-4"},i.createElement("div",{className:"card no-margin left-side-card",id:"discriptionCard"},i.createElement("div",{className:"content no-paddingLR"},i.createElement("div",{className:"container-fluid no-paddingLR"},i.createElement("div",{className:"row no-paddingLR"},i.createElement("div",{className:" "},i.createElement("div",{className:"timeline-item-content left-side-card"},i.createElement("h4",{style:{marginTop:"auto",marginBottom:"auto"}},"Stage ",t+1),i.createElement("label",{className:"headingText"},e.description),e.taskNumber&&i.createElement("label",{className:"small"},"Stage ID: "+e.taskNumber)))))))),e.task&&i.createElement("div",{className:"col-md-9 col-sm-9 col-xs-8"},i.createElement("div",{className:"card no-margin right-side-card",id:"taskCard"},i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"timeline-item"},i.createElement("div",{className:"timeline-item-content no-padding"},i.createElement("span",{className:"no-margin"},i.createElement("ul",null,e&&e.subTasks&&e.subTasks.map(function(e,t){return i.createElement("div",{key:t},e.description&&i.createElement(i.Fragment,null,i.createElement("li",null,i.createElement("label",{title:(e.assignedTo?"Assigned to : "+e.assignedTo:e.assignedTo?"Assigned to : "+e.assignedTo+"  ":"No Assignment")+" "},e.description," \xa0 \xa0 ","Pending"!=e.status&&i.createElement("div",{className:"badge ml-2 stage-task-"+e.status,style:{fontSize:"85%"}},e.status),e.checklistID&&i.createElement("a",{style:{color:"#174b54"},"data-toggle":"collapse","data-target":"#checklist"+t},i.createElement("i",{className:"fa fa-check"}))))))}))),i.createElement("span",{className:"circle stage-"+e.status,title:e&&e.status,style:{top:"50%"}}))))))))),!e.equipSubject&&i.createElement("div",{className:"col-md-9 col-sm-9 col-xs-8"},i.createElement("div",{className:"card no-margin right-side-card",id:"taskCard"},i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("label",{style:{color:"red"}}," STAGE MIGHT HAVE DELETED"))))))))}))))))},t}(i.Component);t.a=m},607:function(e,t,n){"use strict";t.e=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(c){switch(c.label){case 0:return[4,Object(a.f)({buildingName:e,ontology:t,uses:n},a.a.TASKTEMPLATE.UPDATESTAGETEMPLATEUSES,i.b.TASK).then(function(){Object(s.b)('Stage Template Uses "Updated"  Successfully.')}).catch(function(e){Object(s.a)("Error occured while saving Stage Template Uses.")})];case 1:return[2,c.sent()]}})})},t.d=function(e,t,n,r){return c(this,void 0,void 0,function(){return o(this,function(c){switch(c.label){case 0:return[4,Object(a.f)({buildingName:e,model:t,isEdit:n,saveStages:r},a.a.TASKTEMPLATE.SAVEPHASE,i.b.TASK).then(function(){Object(s.b)("Workflow "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(s.a)("Error occured while saving Workflow.")})];case 1:return[2,c.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return c(this,void 0,void 0,function(){return o(this,function(s){switch(s.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASEDETAILLIST,i.b.TASK,n)];case 1:return[2,s.sent()]}})})},t.c=function(e,t,n){void 0===n&&(n=!0);return c(this,void 0,void 0,function(){return o(this,function(s){switch(s.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,i.b.TASK,n)];case 1:return[2,s.sent()]}})})},t.f=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(c){switch(c.label){case 0:return[4,Object(a.f)({taskID:e,status:t},a.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,i.b.TASK).then(function(){n||Object(s.b)("Status Updated Successfully.")}).catch(function(e){Object(s.a)("Error occured while update Status.")})];case 1:return[2,c.sent()]}})})},t.a=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.DEPENDENCY.GETDEPENDENCY,i.b.TASK,!0)];case 1:return[2,n.sent()]}})})};var a=n(19),i=n(26),s=n(44),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function c(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(c,o)}r((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,a=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){c.label=s[1];break}if(6===s[0]&&c.label<i[1]){c.label=i[1],i=s;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(s);break}i[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}},627:function(e,t,n){"use strict";t.b=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(a){switch(a.label){case 0:return[4,Object(s.e)({buildingName:e,tasks:t,ontologies:n},s.a.OBJECTFORM.GetObjectFormActions,i.b.TASK,!0)];case 1:return[2,a.sent()]}})})},t.c=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({buildingName:e,ObjectActionTemplates:t},s.a.OBJECTFORM.SaveObjectFormActions,i.b.TASK).then(function(){Object(a.b)(" Assigned Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving.")})];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({buildingName:e,ontology:t},s.a.OBJECTFORM.DeleteObjectFormActions,i.b.TASK).then(function(){Object(a.b)("All Actions Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving.")})];case 1:return[2,n.sent()]}})})};var a=n(44),i=n(26),s=n(19),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function c(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(c,o)}r((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,a=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){c.label=s[1];break}if(6===s[0]&&c.label<i[1]){c.label=i[1],i=s;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(s);break}i[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}},629:function(e,t,n){"use strict";t.k=function(){return c(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(s.e)({},s.a.TASKS.GetTaskTypeList,a.b.TASK)];case 1:return[2,e.sent()]}})})},t.l=function(){return c(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(s.e)({},s.a.TASKS.GetWorkTypeList,a.b.TASK)];case 1:return[2,e.sent()]}})})},t.h=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.e)({buildingName:e,getArchivedOnly:t},s.a.CHATS.GetChats,a.b.TASK)];case 1:return[2,n.sent()]}})})},t.f=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,chatName:t},s.a.CHATS.DeleteChat,a.b.TASK).then(function(){Object(i.b)("Chat Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting Chat.")})];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,chatName:t},s.a.TASKS.UpdateLastMessageOn,a.b.CHAT)];case 1:return[2,n.sent()]}})})},t.u=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({chatName:e},s.a.TASKS.UpdateUnreadCount,a.b.TASK)];case 1:return[2,t.sent()]}})})},t.n=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(c){switch(c.label){case 0:return[4,Object(s.f)({buildingName:e,model:t,isEdit:n},s.a.TASKS.UpdateRootTask,a.b.TASK).then(function(){Object(i.b)("Task "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Task.")})];case 1:return[2,c.sent()]}})})},t.i=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return[4,Object(s.e)({buildingName:e,taskNumber:t,isArchived:n},s.a.TASKS.GETTASKS,a.b.TASK,!0)];case 1:return[2,i.sent()]}})})},t.j=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return[4,Object(s.e)({buildingName:e,parentTask:t,subTaskNumber:n},s.a.TASKS.GetSubTask,a.b.TASK)];case 1:return[2,i.sent()]}})})},t.r=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,isDeleted:t},s.a.TASKS.UpdateRootTaskDeleteStatus,a.b.TASK).then(function(){Object(i.b)("Task Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting Task.")})];case 1:return[2,n.sent()]}})})},t.t=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(c){switch(c.label){case 0:return[4,Object(s.f)({taskID:e,status:t},s.a.TASKS.UpdateTaskStatus,a.b.TASK).then(function(){n||Object(i.b)("Status Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Task.")})];case 1:return[2,c.sent()]}})})},t.s=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,startTime:t},s.a.TASKS.UpdateTaskStartTime,a.b.TASK).then(function(){Object(i.b)("Start Time Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Task.")})];case 1:return[2,n.sent()]}})})},t.d=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,isArchived:t},s.a.TASKS.ArchiveTask,a.b.TASK).then(function(){Object(i.b)((t?"Archived":"Unarchived")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while Archiving Task.")})];case 1:return[2,n.sent()]}})})},t.c=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,note:t},s.a.TASKS.AddPauseNote,a.b.TASK).then(function(){}).catch(function(e){Object(i.a)("Error occured while saving Task.")})];case 1:return[2,n.sent()]}})})},t.g=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({taskID:e},s.a.TASKS.DeletePauseNote,a.b.TASK).then(function(){}).catch(function(e){Object(i.a)("Error occured while saving Task.")})];case 1:return[2,t.sent()]}})})},t.b=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,note:t},s.a.TASKS.AddNote,a.b.TASK).then(function(){Object(i.b)("Note Added Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Task.")})];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,isAcknowledged:t},s.a.TASKS.AcknowledgeRootTask,a.b.TASK).then(function(){Object(i.b)(t?"Acknowledged Successfully.":"Unacknowledged Successfully.")}).catch(function(e){Object(i.a)("Error occured while Acknowledging.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return c(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(s.f)({taskID:e,checklistID:t},s.a.TASKS.AssignChecklist,a.b.TASK).then(function(){Object(i.b)("Checklist Assigned Successfully.")}).catch(function(e){Object(i.a)("Error occured while Assigning Checklist.")})];case 1:return[2,n.sent()]}})})},t.q=function(e,t,n){return c(this,void 0,void 0,function(){return o(this,function(c){switch(c.label){case 0:return[4,Object(s.f)({email:e,roles:t,fileName:n},s.a.ONEDRIVE.UPDATEPERMISSION,a.b.TASK,"",!0).then(function(e){return e}).catch(function(e){Object(i.a)("Error occured while update Permission.")})];case 1:return[2,c.sent()]}})})},t.m=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({fileName:e},s.a.ONEDRIVE.REMOVEPERMISSION,a.b.TASK,"",!0).then(function(e){return e}).catch(function(e){Object(i.a)("Error occured while removing Permission.")})];case 1:return[2,t.sent()]}})})},t.o=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({buildingName:e},s.a.TASKS.TriggerTaskManagement,a.b.TASK,"").then(function(e){return e}).catch(function(e){Object(i.a)("Error occured while triggering task automation.")})];case 1:return[2,t.sent()]}})})};var a=n(26),i=n(44),s=n(19),c=(n(14),this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function c(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(c,o)}r((a=a.apply(e,t||[])).next())})}),o=this&&this.__generator||function(e,t){var n,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,a=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){c.label=s[1];break}if(6===s[0]&&c.label<i[1]){c.label=i[1],i=s;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(s);break}i[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}},935:function(e,t,n){"use strict";t.g=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)(e,s.a.TICKETS.AddNewTicket,i.b.TICKET).then(function(){Object(a.b)("Ticket Added")}).catch(function(e){Object(a.a)("Error occured while saving Ticket.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({ticketType:e},s.a.TICKETS.AddNewTicketType,i.b.TICKET).then(function(){Object(a.b)("Ticket Type Added")}).catch(function(e){Object(a.a)("Error occured while saving Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.b=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({ticketTypeOntology:e},s.a.TICKETS.DeleteTicketType,i.b.TICKET).then(function(){Object(a.b)("Ticket Type Deleted")}).catch(function(e){Object(a.a)("Error occured while deleting Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.f=function(){return c(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(s.e)({},s.a.TICKETS.GetAllTickets,i.b.TICKET,!0)];case 1:return[2,e.sent()]}})})},t.d=function(){return c(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(s.e)({},s.a.TICKETS.GetTicketTypes,i.b.TICKET)];case 1:return[2,e.sent()]}})})},t.c=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.e)({ticketTypeOntology:e},s.a.TICKETS.GetTicketTypeUsingOntology,i.b.TICKET,!0)];case 1:return[2,t.sent()]}})})},t.e=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.e)({ticketOntology:e},s.a.TICKETS.GetTicketUsingOntology,i.b.TICKET,!0)];case 1:return[2,t.sent()]}})})},t.a=function(e){return c(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(s.f)({ticketOntology:e},s.a.TICKETS.DeleteTicket,i.b.TICKET).then(function(){Object(a.b)("Ticket Deleted")}).catch(function(e){Object(a.a)("Error occured while deleting Ticket.")})];case 1:return[2,t.sent()]}})})};var a=n(44),i=n(26),s=n(19),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function c(e){try{r(a.next(e))}catch(e){s(e)}}function o(e){try{r(a.throw(e))}catch(e){s(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(c,o)}r((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,a&&(i=2&s[0]?a.return:s[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,s[1])).done)return i;switch(a=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,a=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){c=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){c.label=s[1];break}if(6===s[0]&&c.label<i[1]){c.label=i[1],i=s;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(s);break}i[2]&&c.ops.pop(),c.trys.pop();continue}s=t.call(e,c)}catch(e){s=[6,e],a=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}}});