webpackJsonp([30],{1123:function(e,t,n){"use strict";var a=n(3),s=(n.n(a),n(615)),o=n(609),r=n(18),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}l((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={tenantAlertObj:Object(),tenantDropDownList:[],zonesDropDownList:[],zonesList:[],tenantsList:[],contactList:[]},n.onRadioRoleChange=n.onRadioRoleChange.bind(n),n.onMessageChange=n.onMessageChange.bind(n),n.handleMultiTenantChange=n.handleMultiTenantChange.bind(n),n.handleMultiZoneChange=n.handleMultiZoneChange.bind(n),n._fetchTenantList=n._fetchTenantList.bind(n),n._fetchZonesList=n._fetchZonesList.bind(n),n.handleIncludeSecondaryContactChange=n.handleIncludeSecondaryContactChange.bind(n),n.filterZoneContactsList=n.filterZoneContactsList.bind(n),n}return c(t,e),t.prototype.componentDidMount=function(){return l(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchTenantList()]:[3,3];case 1:return e.sent(),[4,this._fetchZonesList()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){return l(this,void 0,void 0,function(){var t,n;return i(this,function(a){switch(a.label){case 0:return t=this.props.refresh,n=this.state.tenantAlertObj,e.refresh==t?[3,2]:[4,this._fetchTenantList()];case 1:a.sent(),a.label=2;case 2:return e.message&&(n.message=e.message,this.setState({tenantAlertObj:n})),[2]}})})},t.prototype.onRadioRoleChange=function(e){var t=this,n=this.state.tenantAlertObj;n.role=e,this.setState({tenantAlertObj:n},function(){t.filterZoneContactsList()}),this.props.handleTenantAlerts(n)},t.prototype.handleMultiTenantChange=function(e){var t=this.state,n=t.contactList,a=t.tenantsList,s=this.state.tenantAlertObj,o=s.contactNumbers?s.contactNumbers:[];e.map(function(e){var t=Object(r.g)(a.find(function(t){return t.userName.value==e.value}).mobile);o.find(function(e){return e==t})||o.push(t)}),s.additionalContacts=e,s.contactNumbers=o,this.setState({tenantAlertObj:s,contactList:n}),this.props.handleTenantAlerts(s)},t.prototype.handleMultiZoneChange=function(e){var t=this,n=this.state.tenantAlertObj;n.zones=e,this.setState({tenantAlertObj:n},function(){t.filterZoneContactsList()}),this.props.handleTenantAlerts(n)},t.prototype.handleIncludeSecondaryContactChange=function(e){var t=this,n=this.state.tenantAlertObj;n.includeSecondaryContacts=e,this.setState({tenantAlertObj:n},function(){t.filterZoneContactsList()}),this.props.handleTenantAlerts(n)},t.prototype.onMessageChange=function(e){var t=this.state.tenantAlertObj;t.message=e,this.setState({tenantAlertObj:t}),this.props.handleTenantAlerts(t)},t.prototype._fetchTenantList=function(){return l(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,Object(o.q)(this.props.buildingName).then(function(t){var n=t.map(function(e){return{value:e.userName.value,label:e.name.value}});e.setState({tenantDropDownList:n,tenantsList:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchZonesList=function(){return l(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,Object(o.f)(this.props.buildingName).then(function(t){var n=[];t.map(function(e){n.find(function(t){return t.value==e.zone.value})||n.push({value:e.zone.value,label:e.rdfsLabel.value})}),e.setState({zonesDropDownList:n,zonesList:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.filterZoneContactsList=function(){var e=this.state,t=e.zonesList,n=e.tenantAlertObj,a=n.contactNumbers?n.contactNumbers:[],s=n.role?n.role:"both",o=!!n.includeSecondaryContacts&&n.includeSecondaryContacts;n.zones&&n.zones.map(function(e){("owns"==s&&1==o?t.filter(function(t){return("owns"==t.role.value||"owns2"==t.role.value)&&e.value==t.zone.value}):"owns"==s&&0==o?t.filter(function(t){return"owns"==t.role.value&&e.value==t.zone.value}):"occupies"==s&&1==o?t.filter(function(t){return("occupies"==t.role.value||"occupies2"==t.role.value)&&e.value==t.zone.value}):"occupies"==s&&0==o?t.filter(function(t){return"occupies"==t.role.value&&e.value==t.zone.value}):"both"==s&&1==o?t.filter(function(t){return e.value==t.zone.value}):"both"==s&&0==o?t.filter(function(t){return"occupies2"!=t.role.value&&"owns2"!=t.role.value&&e.value==t.zone.value}):t).map(function(e){a.find(function(t){return t==Object(r.g)(e.mobile)})||a.push(Object(r.g)(e.mobile))})}),n.contactNumbers=a,this.setState({tenantAlertObj:n}),this.props.handleTenantAlerts(n)},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.tenantAlertObj,o=t.tenantDropDownList,r=t.zonesDropDownList;return a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"zones"},"Select Affected Zones:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement(s.a,{closeMenuOnSelect:!1,isMulti:!0,value:n.zones,onChange:this.handleMultiZoneChange,placeholder:"Select Affected Zones",options:r}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"spaces"},"Select Additional Contacts:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement(s.a,{closeMenuOnSelect:!1,isMulti:!0,value:n.additionalContacts,onChange:this.handleMultiTenantChange,placeholder:"Select Additional Contacts",options:o}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:""},"Contact Role:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{className:"radio-inline"}," ",a.createElement("input",{type:"radio",name:"rdOwner",value:"owns",checked:"owns"==n.role,onChange:function(t){e.onRadioRoleChange(t.target.value)}}),"Owners"),a.createElement("label",{className:"radio-inline"}," ",a.createElement("input",{type:"radio",name:"rdOccupant",value:"occupies",checked:"occupies"==n.role,onChange:function(t){e.onRadioRoleChange(t.target.value)}}),"Occupants"),a.createElement("label",{className:"radio-inline"}," ",a.createElement("input",{type:"radio",name:"rdBoth",value:"both",checked:"both"==n.role,onChange:function(t){e.onRadioRoleChange(t.target.value)}}),"Both"))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"include"},"Include secondary contacts:"))),a.createElement("div",{className:"col-md-1"},a.createElement("div",{className:"form-group"},a.createElement("input",{id:"include",type:"checkbox",className:"form-control",checked:n.includeSecondaryContacts,onChange:function(t){return e.handleIncludeSecondaryContactChange(t.target.checked)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"message"},"Message:"))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("textarea",{className:"form-control",id:"message",value:n.message,rows:5,onChange:function(t){e.onMessageChange(t.target.value)}}))))))},t}(a.Component);t.a=u},1800:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(3),o=(n.n(s),n(99)),r=n(18),c=n(49),l=n(600),i=n(609),u=n(29),m=n(1123),d=n(911),p=n(1801),h=n(604),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}l((a=a.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,a,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_customerList:[],isEdit:!1,tenantAlertObj:Object(),TenantAlertLog:[],refreshChild:!1,spaceCustomerObj:Object(),_spaceCustomers:[],otherCustomerObj:Object(),SelectedSpaceCustomer:Object(),sortOrder:1,isValidate:!1,isView:!1},a=n,n.s3=new c.b,n.saveAlertLog=n.saveAlertLog.bind(n),n.handleTenantAlerts=n.handleTenantAlerts.bind(n),n.getAllAlertLogs=n.getAllAlertLogs.bind(n),n._saveCustomerSpace=n._saveCustomerSpace.bind(n),n.handleCustomerSpace=n.handleCustomerSpace.bind(n),n.deleteSpaceCustomer=n.deleteSpaceCustomer.bind(n),n.fetchSpaceCustomers=n.fetchSpaceCustomers.bind(n),n.sortSpaceCustomerList=n.sortSpaceCustomerList.bind(n),n.handleEdit=n.handleEdit.bind(n),n}return f(t,e),t.prototype.handleEdit=function(e){var t=this.state.SelectedSpaceCustomer;t=e,this.setState({isEdit:!0,SelectedSpaceCustomer:t,isView:!1}),document.getElementById("btn-assignCustomerSpace").click()},t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this.getAllAlertLogs()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,this.fetchSpaceCustomers()];case 3:return e.sent(),[2]}})})},t.prototype.getAllAlertLogs=function(){return b(this,void 0,void 0,function(){return v(this,function(e){return Object(o.a)(!0),this.s3.GetObject(c.a.DOCUMENT(),"AlertLog.json",function(e,t){if(e)console.log("Get Object Error Returned",e);else{var n=Object(u.c)(t.Body);if(n){var s=JSON.parse(n);s.length>0&&a.setState({TenantAlertLog:s})}}}),Object(o.a)(!1),[2]})})},t.prototype.handleTenantAlerts=function(e){this.setState({tenantAlertObj:e})},t.prototype.sendAlertsToTenants=function(){return b(this,void 0,void 0,function(){var e,t,n=this;return v(this,function(a){switch(a.label){case 0:e=this.state.tenantAlertObj,t=new d.a,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t.SendSMS_Multiple(e.contactNumbers,e.message,this.props.instance,!1,function(){n.saveAlertLog()})];case 2:return a.sent(),[3,4];case 3:return a.sent(),Object(o.a)(!1),[3,4];case 4:return[2]}})})},t.prototype.saveAlertLog=function(){return b(this,void 0,void 0,function(){var e,t,n,a,s,l=this;return v(this,function(i){return e=this.state,t=e.tenantAlertObj,n=e._customerList,a=e.TenantAlertLog,s=a,t.contactNumbers&&t.contactNumbers.length&&(Object(o.a)(!0),t.contactNumbers.map(function(e){n.map(function(n){Object(r.g)(n.mobile)==e&&s.push({alertMessage:t.message,group:Object(r.g)(n.group),date:(new Date).toString(),contact:e,site:l.props.buildingName})})}),this.setState({TenantAlertLog:s},function(){l.s3.PutObject(c.a.DOCUMENT(),"AlertLog.json",JSON.stringify(l.state.TenantAlertLog))}),Object(o.a)(!1)),[2]})})},t.prototype._saveCustomerSpace=function(){return b(this,void 0,void 0,function(){var e,t,n,a,s=this;return v(this,function(r){switch(r.label){case 0:return e=this.state,t=e.spaceCustomerObj,n=e.isEdit,a=this.props.buildingName,Object(o.a)(!0),t?[4,Object(i.h)(a,t,n).then(function(){s.fetchSpaceCustomers()})]:[3,2];case 1:r.sent(),r.label=2;case 2:return Object(o.a)(!1),[2]}})})},t.prototype.handleCustomerSpace=function(e){var t=!!(e&&e.customer&&e.role&&e.selectedSpaces);this.setState({spaceCustomerObj:e,isValidate:t})},t.prototype.fetchSpaceCustomers=function(){return b(this,void 0,void 0,function(){var e,t,n,a;return v(this,function(s){switch(s.label){case 0:return e=[],t=[],Object(o.a)(!0),[4,Object(i.m)(this.props.buildingName)];case 1:e=s.sent(),n=function(n){var a,s,o,c;return v(this,function(l){switch(l.label){case 0:return a=e[n],[4,Object(u.q)(Object(r.g)(a.selectedSpaces).split(","))];case 1:return s=l.sent(),o=[],s&&s.length>0&&s.map(function(e){o.push({value:e.ontology,label:e.rdfsLabel})}),""!=(c={ontology:Object(r.g)(a.ontology),customer:{value:Object(r.g)(a.customer),label:Object(r.g)(a.customerLabel)},notes:Object(r.g)(a.notes),role:Object(r.g)(a.role),selectedSpaces:o}).ontology&&t.push(c),[2]}})},a=0,s.label=2;case 2:return a<e.length?[5,n(a)]:[3,5];case 3:s.sent(),s.label=4;case 4:return a++,[3,2];case 5:return this.setState({_spaceCustomers:t}),Object(o.a)(!1),[2]}})})},t.prototype.deleteSpaceCustomer=function(){return b(this,void 0,void 0,function(){var e,t=this;return v(this,function(n){switch(n.label){case 0:return e=this.state.SelectedSpaceCustomer,Object(o.a)(!0),e&&e.ontology?[4,Object(i.j)(e.ontology).then(function(e){return b(t,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this.fetchSpaceCustomers()];case 1:return[2,e.sent()]}})})})]:[3,2];case 1:n.sent(),this.setState({SelectedSpaceCustomer:Object()}),n.label=2;case 2:return[2]}})})},t.prototype.sortSpaceCustomerList=function(e,t){var n=this.state._spaceCustomers,a=this.state.sortOrder,s=n.sort(function(t,n){if(t&&n){var s="",o="";switch(e){case"Customer":t.customer&&n.customer&&(s=t.customer.value,o=n.customer.value);break;case"Role":t.role&&n.role&&(s=t.role,o=n.role)}var r=0;return s.toLocaleLowerCase()<o.toLocaleLowerCase()?r=-1:s.toLocaleLowerCase()>o.toLocaleLowerCase()&&(r=1),r*a}});this.setState({_spaceCustomers:s,sortOrder:-1*a})},t.prototype.render=function(){var e=this,t=this.state,n=t.refreshChild,a=t._spaceCustomers,o=t.isEdit,r=t.SelectedSpaceCustomer,c=t.isValidate,i=t.isView,u=this.props,d=u.buildingName,f=u.instance;return s.createElement("div",{className:"content",id:"chats",style:{paddingTop:"0px"}},s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12 "},s.createElement("div",{style:{marginTop:5},className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"dropdown pull-right"},s.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){window.location.hash=f+"/"+d+"/Concierge/NewCustomer"}},s.createElement("i",{className:"fa fa-plus"}),s.createElement("span",{className:"hidden-xs"},"Add Customer")),s.createElement("button",{type:"button",style:{marginRight:3},className:"btn btn-dark btn-fill pull-right","data-toggle":"modal","data-target":"#sendAlertModal"},s.createElement("i",{className:"fa fa-bell"}),s.createElement("span",{className:"hidden-xs"},"Send Alerts")),s.createElement("button",{type:"button",className:"btn btn-dark pull-right",style:{marginRight:3},"data-toggle":"modal",onClick:function(){var t=e.state.spaceCustomerObj;t.ontology="",t.selectedSpaces=null,t.customer=null,t.notes=null,t.role="",e.setState({spaceCustomerObj:t,isEdit:!1,isView:!1,SelectedSpaceCustomer:Object()}),document.getElementById("btn-assignCustomerSpace").click()}},s.createElement("i",{className:"fa fa-bell"}),s.createElement("span",{className:"hidden-xs"},"Assign Space(s) To Customer")),s.createElement(l.a,{id:"sendAlertModal",heading:"Send Alert To Customers",saveButtonText:"Send",onSaveButtonClick:function(){e.sendAlertsToTenants()},disableSaveButton:!1},s.createElement(m.a,{instance:f,buildingName:d,handleTenantAlerts:this.handleTenantAlerts,refresh:n})),s.createElement("button",{type:"button",id:"btn-assignCustomerSpace",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#assignCustomerSpace",style:{display:"none"}},"."),s.createElement(l.a,{showSaveButton:!i,showCancelButton:!0,id:"assignCustomerSpace",heading:"Space Customer Information",onSaveButtonClick:function(){e._saveCustomerSpace()},saveButtonText:"Save",disableSaveButton:!c},s.createElement(p.a,{instance:f,SelectedSpaceCustomer:r,isEdit:o,buildingName:d,handleCustomerSpace:this.handleCustomerSpace,isView:i}))))),s.createElement("br",null),s.createElement("div",null,s.createElement("div",{className:"card padding-10",id:"TenantList",style:{paddingTop:"0px"}},s.createElement("div",{className:"content",style:{paddingTop:"10px"}},s.createElement("div",{className:"dataCard"},s.createElement("div",{className:"row hidden-xs no-padding"},s.createElement("div",{className:"col-md-10 col-sm-12 dataCard"},s.createElement("div",{className:"col-md-3 col-sm-12 small grid-header",onClick:function(){return e.sortSpaceCustomerList("Customer")}},s.createElement("i",{className:"fa fas fa-sort"}),"Customer"),s.createElement("div",{className:"col-md-3 col-sm-12 small grid-header-left"},s.createElement("i",{className:"fa fas fa-sort"}),"Space"),s.createElement("div",{className:"col-md-3 col-sm-12 small grid-header",onClick:function(){return e.sortSpaceCustomerList("Role")}},s.createElement("i",{className:"fa fas fa-sort"}),"Role"))),a.map(function(t,n){return s.createElement("div",{key:n,className:"row clickable"},s.createElement("div",{className:"col-md-10 col-sm-12 "},s.createElement("div",{className:"col-md-3 col-sm-12 padding-10 small trim-data",title:t.customer.label},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Customer"),s.createElement("a",{onClick:function(){e.setState({SelectedSpaceCustomer:t,isView:!0}),document.getElementById("btn-assignCustomerSpace").click()},title:t.customer.label}," ",s.createElement("span",null,t.customer.label))),s.createElement("div",{className:"col-md-3 col-sm-12 padding-10 small trim-data",title:t&&t.selectedSpaces&&t.selectedSpaces.map(function(e){return e.label}).join(", ")},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Space"),t&&t.selectedSpaces&&t.selectedSpaces.map(function(e){return e.label}).join(", ")),s.createElement("div",{className:"col-md-2 col-sm-12 padding-10 small trim-data",title:t.role},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Role"),t.role)),s.createElement("div",{className:"col-md-2 col-sm-12 no-padding col-xs-12",style:{display:"inline-flex"}},s.createElement("a",{className:"btn-sm btn-danger active pull-right","data-target":"#ConfirmDeleteDialog",title:"Delete Customer Space",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(n){e.setState({SelectedSpaceCustomer:t}),document.getElementById("btnDeleteCustomerSpaceDialog").click()}},s.createElement("i",{className:"fa fa-trash"})),s.createElement("a",{className:"btn-sm btn-success active pull-right",title:"Edit Customer Space",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(){return e.handleEdit(t)}},s.createElement("i",{className:"fa fa-pencil"}))))})))),s.createElement("button",{type:"button",id:"btnDeleteCustomerSpaceDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog"}," ."),s.createElement(h.a,{instance:f,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Customer Space Relation?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteSpaceCustomer()}}))))))},t}(s.Component);t.default=g},1801:function(e,t,n){"use strict";var a=n(3),s=(n.n(a),n(615)),o=n(611),r=n(609),c=n(99),l=n(18),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,o){function r(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}l((a=a.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,a,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},d=[{name:"Owner",value:"Owner"},{name:"Renter",value:"Renter"}],p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_spaceList:[],addContactDropDownList:[],spaceDropDownList:[],tenantDropDownList:[],_tenantList:[],spaceCustomerObj:n.props.isEdit?n.props.SelectedSpaceCustomer:Object(),newLocation:Object()},n._saveSpaceCustomer=n._saveSpaceCustomer.bind(n),n._getSpacesList=n._getSpacesList.bind(n),n._fetchTenantList=n._fetchTenantList.bind(n),n.handleMultiSpacesChange=n.handleMultiSpacesChange.bind(n),n.handleMultiCustomerChange=n.handleMultiCustomerChange.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return e=this.state.spaceCustomerObj,e=this.props.isEdit?this.props.SelectedSpaceCustomer:Object(),this.props.buildingName?[4,this._getSpacesList()]:[3,3];case 1:return t.sent(),[4,this._fetchTenantList()];case 2:t.sent(),this.setState({spaceCustomerObj:e}),t.label=3;case 3:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){return m(this,function(t){return e.SelectedSpaceCustomer&&this.setState({spaceCustomerObj:e.SelectedSpaceCustomer}),[2]})})},t.prototype._getSpacesList=function(){return u(this,void 0,void 0,function(){var e,t=this;return m(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,[4,Object(o.b)(e).then(function(e){var n=e.map(function(e){return{value:e.ontology.value,label:e.rdfsLabel.value}});t.setState({_spaceList:e,spaceDropDownList:n})})];case 1:return n.sent(),[2]}})})},t.prototype._fetchTenantList=function(){return u(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return[4,Object(r.l)(this.props.buildingName).then(function(t){var n=t.map(function(e){return{value:Object(l.g)(e.userName),label:Object(l.g)(e.name)}});e.setState({_tenantList:t,tenantDropDownList:n,addContactDropDownList:n})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.handleMultiSpacesChange=function(e){var t=this.state.spaceCustomerObj;t.selectedSpaces=e,this.setState({spaceCustomerObj:t}),this.props.handleCustomerSpace(t)},t.prototype.handleMultiCustomerChange=function(e){var t=this.state.spaceCustomerObj;t.customer=e,this.setState({spaceCustomerObj:t}),this.props.handleCustomerSpace(t)},t.prototype.handleNotesChange=function(e){var t=this.state.spaceCustomerObj;t.notes=e,this.setState({spaceCustomerObj:t}),this.props.handleCustomerSpace(t)},t.prototype._saveSpaceCustomer=function(){return u(this,void 0,void 0,function(){var e,t,n,a,s;return m(this,function(o){switch(o.label){case 0:return e=this.state.spaceCustomerObj,t=this.props,n=t.instance,a=t.buildingName,s=t.isEdit,e?(Object(c.a)(!0),[4,Object(r.h)(a,e,s).then(function(e){window.location.hash=n+"/"+a+"/Space/Customers"})]):[3,2];case 1:o.sent(),Object(c.a)(!1),o.label=2;case 2:return[2]}})})},t.prototype.handleRoleChange=function(e){var t=this.state.spaceCustomerObj;t.role=e,this.setState({spaceCustomerObj:t}),this.props.handleCustomerSpace(t)},t.prototype.render=function(){var e=this,t=this.props.isView,n=this.state,o=n.spaceCustomerObj,r=n.spaceDropDownList,c=n.tenantDropDownList;return a.createElement("div",{className:"content"},a.createElement("div",{className:""},a.createElement("div",{className:"container-fluid padding-10"},a.createElement("div",{className:""},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"spaces"},"Spaces"))),a.createElement("div",{className:"col-md-9 col-sm-3"},a.createElement("div",{className:(o.selectedSpaces?"":"addFieldValidate")+" form-group"},a.createElement(s.a,{isDisabled:t,closeMenuOnSelect:!1,isMulti:!0,value:o.selectedSpaces?o.selectedSpaces:"",onChange:this.handleMultiSpacesChange,placeholder:"Select Spaces",options:r}))))),a.createElement("div",{className:""},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"Customer"},"Customer"))),a.createElement("div",{className:"col-md-9 col-sm-3"},a.createElement("div",{className:(o.customer?"":"addFieldValidate")+" form-group"},a.createElement(s.a,{id:"Customer",name:"Customer",isDisabled:t,closeMenuOnSelect:!0,isMulti:!1,value:o.customer?o.customer:"",onChange:this.handleMultiCustomerChange,placeholder:"Select Customer",options:c}))))),a.createElement("div",{className:""},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"role"},"Role"))),a.createElement("div",{className:"col-md-9 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("select",{id:"role",disabled:t,className:(o.role?"":"addFieldValidate")+" form-control",value:o.role?o.role:"",onChange:function(t){return e.handleRoleChange(t.target.value)}},a.createElement("option",{value:"",key:-1,disabled:!0,selected:!0},"Select Role"),d.map(function(e,t){return a.createElement("option",{value:e.value,key:t},e.name," ")})))))),a.createElement("div",{className:""},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"notes"},"Notes"))),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",disabled:t,id:"notes",className:"form-control",value:o.notes?o.notes:"",onChange:function(t){return e.handleNotesChange(t.target.value)}})))))))},t}(a.Component);t.a=p}});