webpackJsonp([10,16,18,23,24,30,45,63,70,74,75,76,91],{1057:function(e,t,n){"use strict";var a,i=n(2),r=(n.n(i),n(660)),o=n(656),l=n(654),s=n(20),c=n(53),u=n(23),d=n(116),m=n(650),h=n(663),p=n.n(h),f=n(696),g=n(680),v=n(10),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},x=function(e){function t(t){var n=e.call(this,t)||this;return n.state={component:n.props.component?n.props.component:Object(),newComponentType:Object(),locationList:[],typeList:[],componentSubclassTypeList:[],fileTitle:"",files:[],recentSelectedFiles:[],showhideImageUploader:!1,componentToDelete:Object(),isConfirmDelete:!1,componentManufactureDate:void 0,componentLastInspectionDate:void 0,componentLastServiceDate:void 0,componentLastRechargeDate:void 0,componentNextInspectionDate:void 0,pointsList:[],PanelEquipmentList:[]},a=n,n.handleComponentChange=n.handleComponentChange.bind(n),n._getLocationsList=n._getLocationsList.bind(n),n._getTypeList=n._getTypeList.bind(n),n._getComponentTypeSubclassList=n._getComponentTypeSubclassList.bind(n),n.handleTitleChange=n.handleTitleChange.bind(n),n.onFileChange=n.onFileChange.bind(n),n.saveImage=n.saveImage.bind(n),n.handlefileAttached=n.handlefileAttached.bind(n),n.saveComponentSubclassType=n.saveComponentSubclassType.bind(n),n.deletecomponent=n.deletecomponent.bind(n),n.toDeleteComponent=n.toDeleteComponent.bind(n),n.handleManufactureDate=n.handleManufactureDate.bind(n),n.handleLastInspectionDate=n.handleLastInspectionDate.bind(n),n.handleLastServiceDate=n.handleLastServiceDate.bind(n),n.handleLastRechargeDate=n.handleLastRechargeDate.bind(n),n.handleNextInspectionDate=n.handleNextInspectionDate.bind(n),n._getPointsList=n._getPointsList.bind(n),n.handlerPointChange=n.handlerPointChange.bind(n),n}return b(t,e),t.prototype.componentWillReceiveProps=function(e){return y(this,void 0,void 0,function(){var t;return E(this,function(n){return t=this.state.component,(t=e.component).name=e.component&&e.component.name?e.component.name:Object(u.t)(12),this.setState({component:t}),[2]})})},t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._getLocationsList(this.props.buildingName)]:[3,6];case 1:return e.sent(),[4,this._getTypeList()];case 2:return e.sent(),[4,this._getComponentTypeSubclassList()];case 3:return e.sent(),[4,this._getPointsList()];case 4:return e.sent(),[4,this.getEnclosureEquipmentList()];case 5:e.sent(),e.label=6;case 6:return[2]}})})},t.prototype._getPointsList=function(){return y(this,void 0,void 0,function(){var e;return E(this,function(t){switch(t.label){case 0:return e=this.state.pointsList,[4,Object(g.h)(this.props.buildingName).then(function(t){e=t})];case 1:return t.sent(),this.setState({pointsList:e}),[2]}})})},t.prototype._getLocationsList=function(e){return y(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,Object(o.b)(e).then(function(e){a.setState({locationList:e})})];case 1:return t.sent(),[2]}})})},t.prototype._getComponentTypeSubclassList=function(){return y(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return[4,Object(l.l)().then(function(e){var t=e.sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0});a.setState({componentSubclassTypeList:t})})];case 1:return e.sent(),[2]}})})},t.prototype._getTypeList=function(){return y(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return[4,Object(l.m)("Equip",1).then(function(e){var t=e.sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0});a.setState({typeList:t})})];case 1:return e.sent(),[2]}})})},t.prototype.handleComponentChange=function(e,t){var n=this.state.component;switch(e){case"rdfsLabel":n.rdfsLabel=t;break;case"volts":n.volts=t;break;case"ampere":n.ampere=t;break;case"phase":n.phase=t;break;case"location":n.location=t;break;case"profileLink":n.profileLink=t;break;case"quantity":n.quantity=t;break;case"description":n.description=t;break;case"notes":n.notes=t;break;case"type":"newComponent"==t?document.getElementById("btnNewComponentTypeFormDialog").click():n.componentType=t;break;case"usertype":n.userType=t;break;case"manufacturer":n.manufacturer=t;break;case"model":n.model=t;break;case"inputCapacity":n.inputCapacity=t;break;case"inputCapacityUnits":n.inputCapacityUnits=t;break;case"outputCapacity":n.outputCapacity=t;break;case"outputCapacityUnits":n.outputCapacityUnits=t;break;case"componentState":n.componentState=t;break;case"enclosure":n.enclosure=t}this.setState({component:n},function(){a.props.onComponentChange(n)})},t.prototype.handlerPointChange=function(e){var t=this.state.component;t.asignPoints=e,this.setState({component:t})},t.prototype.handleComponentTypeFormChange=function(e,t){var n=this.state.newComponentType;switch(e){case"rdfsLabel":n.componentTypeName=t,n.componentType=t.replace(new RegExp(" ","g"),"");break;case"type":n.subClassOf=t}this.setState({newComponentType:n})},t.prototype.onFileChange=function(e){return y(this,void 0,void 0,function(){var t;return E(this,function(n){return(t=this.state.component).componentFileName=e,this.props.onComponentChange(t),[2]})})},t.prototype.handlefileAttached=function(e){var t=this,n=this.state.fileTitle;if(e&&e.length>0){var a=this.state,i=a.files,r=a.component,o=a.recentSelectedFiles;r.componentFileName||(r.componentFileName=[]),i||(i=[]),o||(o=[]);for(var l=0;l<e.length;l++){var c=e[l].name.split(".").pop(),u=(new Date).YYMMDDHHMMSS2()+"-"+n+"."+c.toLowerCase();u=u.replace(new RegExp(" ","g"),"-"),r.componentFileName.push(u),o.push(u)}Object(s.g)(e),this.setState({files:e,recentSelectedFiles:o,component:r},function(){return y(t,void 0,void 0,function(){return E(this,function(e){return[2]})})})}},t.prototype.handleTitleChange=function(e){this.setState({fileTitle:e.replace(new RegExp(" ","g"),"")},function(){document.getElementById("fileTitle").style.boxShadow=e?"0px 0px 15px gainsboro":"0px 0px 15px red"})},t.prototype.saveImage=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,o=this;return E(this,function(l){if(e=this.state.recentSelectedFiles,t=this.state.component,this.props.onComponentChange(t),n=new c.b,(a=Object(s.d)())&&a.length)for(i=0;i<a.length;i++)r=a[i],n.UploadFile(c.a.DOCUMENT(),e[i],r);return this.setState({fileTitle:"",files:[],recentSelectedFiles:[],component:t,showhideImageUploader:!1},function(){return y(o,void 0,void 0,function(){return E(this,function(e){return[2]})})}),[2]})})},t.prototype.saveComponentSubclassType=function(){return y(this,void 0,void 0,function(){var e,t=this;return E(this,function(n){switch(n.label){case 0:return e=this.state.newComponentType,[4,Object(l.w)(e).then(function(){t._getTypeList()})];case 1:return n.sent(),[2]}})})},t.prototype.deletecomponent=function(e){this.setState({componentToDelete:e})},t.prototype.toDeleteComponent=function(){return y(this,void 0,void 0,function(){var e;return E(this,function(t){switch(t.label){case 0:return Object(d.a)(!0),e=this.state.componentToDelete,[4,Object(u.f)(e.name,s.b.EQUIP)];case 1:return t.sent(),Object(d.a)(!1),this.props.fetchComponentList(),document.getElementById("closeDialogue").click(),[2]}})})},t.prototype.handleManufactureDate=function(e){var t=this.state.component;t.manufactureDate=e.toLocaleString(),this.setState({component:t,componentManufactureDate:e}),this.props.onComponentChange(t)},t.prototype.handleLastInspectionDate=function(e){var t=this.state.component;t.lastInspectionDate=e.toLocaleString(),this.setState({component:t,componentLastInspectionDate:e}),this.props.onComponentChange(t)},t.prototype.handleLastServiceDate=function(e){var t=this.state.component;t.lastServiceDate=e.toLocaleString(),this.setState({component:t,componentLastServiceDate:e}),this.props.onComponentChange(t)},t.prototype.handleLastRechargeDate=function(e){var t=this.state.component;t.lastRechargeDate=e.toLocaleString(),this.setState({component:t,componentLastRechargeDate:e}),this.props.onComponentChange(t)},t.prototype.handleNextInspectionDate=function(e){var t=this.state.component;t.nextInspectionDate=e.toLocaleString(),this.setState({component:t,componentNextInspectionDate:e}),this.props.onComponentChange(t)},t.prototype.getEnclosureEquipmentList=function(){return y(this,void 0,void 0,function(){var e,t;return E(this,function(n){switch(n.label){case 0:return this.props.buildingName?[4,Object(l.o)(this.props.buildingName)]:[3,2];case 1:e=n.sent(),t=e&&e.length>0&&e.map(function(e){return{value:Object(v.g)(e.ontology),label:Object(v.g)(e.rdfsLabel)}}),this.setState({PanelEquipmentList:t}),n.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e,t=this,n=this.props,a=n.isEdit,o=n.isView,l=this.state,s=l.component,c=l.locationList,d=l.typeList,h=l.componentSubclassTypeList,g=l.newComponentType,v=l.isConfirmDelete,b=l.pointsList,y=l.PanelEquipmentList,E=s.name&&s.name.split("_"),x=this.props.component.manufactureDate,S=this.props.component.lastInspectionDate,w=this.props.component.lastServiceDate,N=this.props.component.lastRechargeDate,C=this.props.component.nextInspectionDate,_=!(!o||!this.props.component.name);return E&&(e=Object(u.o)(E[0])+" - "+s.componentType),document.getElementById("warningText")&&(document.getElementById("warningText").style.display="none"),i.createElement("div",{className:"content"},i.createElement("div",{className:"card no-margin padding-10 padding-10"},i.createElement("div",{className:"row "},a&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"type"},"Component Name:"))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",disabled:a||o,id:"name",className:"form-control",value:e})))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"type"},"Component Type:"))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement("select",{disabled:o,id:"type",className:(s.componentType?"":"addFieldValidate")+" form-control",value:s.componentType,onChange:function(e){return t.handleComponentChange("type",e.target.value)}},i.createElement("option",{value:"",key:-1},"Select Subclass"),i.createElement("option",{value:"newComponent",className:"headingText"},"Other "),i.createElement("hr",null),d&&d.length>0&&d.map(function(e,t){return i.createElement("option",{value:e.value,key:t},e.value," ")})))),!(a||o)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"quantity"},"Quantity:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"quantity",type:"number",className:"form-control",value:s.quantity?s.quantity:"1",onChange:function(e){return t.handleComponentChange("quantity",e.target.value)}})))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"name"},"Component Label:")),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",id:"rdfsLabel",disabled:o,className:(s.rdfsLabel?"":"addFieldValidate")+" form-control",value:s.rdfsLabel,onChange:function(e){return t.handleComponentChange("rdfsLabel",e.target.value)}})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"location"},"Location:")),i.createElement("div",{className:"col-md-3"},i.createElement("select",{id:"location",disabled:o,className:(s.location?"":"addFieldValidate")+" form-control",value:s.location,onChange:function(e){return t.handleComponentChange("location",e.target.value)}},i.createElement("option",{value:"",key:-2},"Select Location"),c&&c.length>0&&c.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"manufacturer"},"Manufacturer:")),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",id:"manufacturer",disabled:o,className:"form-control",value:s.manufacturer,onChange:function(e){return t.handleComponentChange("manufacturer",e.target.value)}})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"model"},"Model:")),i.createElement("div",{className:"col-md-3"},i.createElement("input",{type:"text",id:"model",disabled:o,className:"form-control",value:s.model,onChange:function(e){return t.handleComponentChange("model",e.target.value)}}))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"age"},"MANUFACTURE DATE:"))),_&&i.createElement("div",{className:"col-md-4"},i.createElement("input",{id:"usertype",type:"text",disabled:o,className:"form-control",value:s.manufactureDate?new Date(s.manufactureDate).toLocaleString():""})),!_&&i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement(p.a,{className:"form-control",selected:x?new Date(this.props.component.manufactureDate):this.state.componentManufactureDate,onChange:function(e){return t.handleManufactureDate(e)},dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",customInput:i.createElement("input",{type:"text",className:"form-control",disabled:!(!o||!x),placeholder:"Manufacture Date","aria-label":"","aria-describedby":"button-addon4",value:s.manufactureDate})}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"age"},"LAST INSPECTION DATE:"))),_&&i.createElement("div",{className:"col-md-4"},i.createElement("input",{id:"usertype",type:"text",disabled:o,className:"form-control",value:s.lastInspectionDate?new Date(s.lastInspectionDate).toLocaleString():""})),!_&&i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement(p.a,{className:"form-control",selected:S?new Date(this.props.component.lastInspectionDate):this.state.componentLastInspectionDate,onChange:function(e){return t.handleLastInspectionDate(e)},dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",customInput:i.createElement("input",{type:"text",className:"form-control",disabled:o,placeholder:"Last Inspection Date","aria-label":"","aria-describedby":"button-addon4",value:s.lastInspectionDate})})))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"age"},"LAST RECHARGE DATE:"))),_&&i.createElement("div",{className:"col-md-4"},i.createElement("input",{id:"usertype",type:"text",disabled:o,className:"form-control",value:s.lastRechargeDate?new Date(s.lastRechargeDate).toLocaleString():""})),!_&&i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement(p.a,{className:"form-control",selected:N?new Date(this.props.component.lastRechargeDate):this.state.componentLastRechargeDate,onChange:function(e){return t.handleLastRechargeDate(e)},dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",customInput:i.createElement("input",{type:"text",className:"form-control",disabled:o,placeholder:"Last Recharge Date","aria-label":"","aria-describedby":"button-addon4",value:s.lastRechargeDate})}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"age"},"LAST SERVICE DATE:"))),_&&i.createElement("div",{className:"col-md-4"},i.createElement("input",{id:"usertype",type:"text",disabled:o,className:"form-control",value:s.lastServiceDate?new Date(s.lastServiceDate).toLocaleString():""})),!_&&i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement(p.a,{className:"form-control",selected:w?new Date(this.props.component.lastServiceDate):this.state.componentLastServiceDate,onChange:function(e){return t.handleLastServiceDate(e)},dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",customInput:i.createElement("input",{type:"text",className:"form-control",disabled:o,placeholder:"Last Service Date","aria-label":"","aria-describedby":"button-addon4",value:s.lastServiceDate})})))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"age"},"NEXT INSPECTION DATE:"))),_&&i.createElement("div",{className:"col-md-4"},i.createElement("input",{id:"usertype",type:"text",disabled:o,className:"form-control",value:s.nextInspectionDate?new Date(s.nextInspectionDate).toLocaleString():""})),!_&&i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement(p.a,{className:"form-control",selected:C?new Date(this.props.component.nextInspectionDate):this.state.componentNextInspectionDate,onChange:function(e){return t.handleNextInspectionDate(e)},dateFormat:"MMMM d, yyyy h:mm aa",showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",customInput:i.createElement("input",{type:"text",className:"form-control",disabled:o,placeholder:"Next Inspection Date","aria-label":"","aria-describedby":"button-addon4",value:s.nextInspectionDate})}))),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"inputCapacity"},"USER TYPE:")),i.createElement("div",{className:"col-md-3"},i.createElement("input",{id:"usertype",type:"text",disabled:o,className:"form-control",value:s.userType,onChange:function(e){return t.handleComponentChange("usertype",e.target.value)}}))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"description"},"Assign Points:")),i.createElement("div",{className:"col-md-4"},i.createElement(r.a,{closeMenuOnSelect:!1,isMulti:!0,onChange:function(e){t.handlerPointChange(e)},placeholder:"Select Points",options:b&&b.length>0?b:[],isDisabled:o,value:s.asignPoints?s.asignPoints:[]})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"inputCapacity"},"Component State:")),i.createElement("div",{className:"col-md-3"},i.createElement("select",{className:"form-control",id:"componentState",name:"componentState",disabled:o,onChange:function(e){return t.handleComponentChange("componentState",e.target.value)},value:s.componentState?s.componentState:""},i.createElement("option",{value:"Planned"},"Planned"),i.createElement("option",{value:"Ordered"},"Ordered"),i.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),i.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),i.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),i.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),i.createElement("option",{value:"Assembly"},"Assembly"),i.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),i.createElement("option",{value:"Kitting"},"Kitting"),i.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),i.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),i.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),i.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),i.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),i.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),i.createElement("option",{value:"Existing"},"Existing In Use"),i.createElement("option",{value:"Retired"},"Retired"),i.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),i.createElement("option",{value:"Sold"},"Sold"),i.createElement("option",{value:"DisposedOf"},"Disposed Of"),i.createElement("option",{value:"ErrorDeleted"},"Error Deleted")))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"profileLink"},"Profile Link:")),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",id:"profileLink",disabled:o,className:"form-control",value:s.profileLink,onChange:function(e){return t.handleComponentChange("profileLink",e.target.value)}})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"enclosure"},"Cabinet / Panel:")),i.createElement("div",{className:"col-md-4"},i.createElement("select",{className:"form-control",id:"enclosure",disabled:o,value:s.enclosure,onChange:function(e){return t.handleComponentChange("enclosure",e.target.value)}},i.createElement("option",{value:"",key:-2},"Select Cabinet Equipment"),y&&y.length>0&&y.map(function(e,t){return i.createElement("option",{key:t,value:e.value},e.label," ")})))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"volt"},"Volt:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"volt",type:"number",disabled:o,className:"form-control",value:s.volts,onChange:function(e){return t.handleComponentChange("volts",e.target.value)}})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"amphere"},"Amps:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"amphere",type:"number",disabled:o,className:"form-control",value:s.ampere,onChange:function(e){return t.handleComponentChange("ampere",e.target.value)}})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"phase"},"Phase:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"phase",type:"number",disabled:o,className:"form-control",value:s.phase,onChange:function(e){return t.handleComponentChange("phase",e.target.value)}}))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"inputCapacity"},"Input Capacity:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"inputCapacity",type:"number",disabled:o,className:"form-control",value:s.inputCapacity,onChange:function(e){return t.handleComponentChange("inputCapacity",e.target.value)}})),i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"inputCapacityUnits"},"Input Capacity Units:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"inputCapacityUnits",type:"text",disabled:o,className:"form-control",value:s.inputCapacityUnits,onChange:function(e){return t.handleComponentChange("inputCapacityUnits",e.target.value)}}))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"outputCapacity"},"Output Capacity:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"outputCapacity",type:"number",disabled:o,className:"form-control",value:s.outputCapacity,onChange:function(e){return t.handleComponentChange("outputCapacity",e.target.value)}})),i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"outputCapacityUnits"},"Output Capacity Units:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"outputCapacityUnits",type:"text",disabled:o,className:"form-control",value:s.outputCapacityUnits,onChange:function(e){return t.handleComponentChange("outputCapacityUnits",e.target.value)}}))),i.createElement("div",{className:"row form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"description"},"Description:")),i.createElement("div",{className:"col-md-4"},i.createElement("textarea",{className:"form-control",id:"description",disabled:o,value:s.description,onChange:function(e){t.handleComponentChange("description",e.target.value)}})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"notes"},"Notes:")),i.createElement("div",{className:"col-md-4"},i.createElement("textarea",{className:"form-control",id:"notes",disabled:o,value:s.notes,onChange:function(e){t.handleComponentChange("notes",e.target.value)}}))),i.createElement("br",null),s.name&&i.createElement(f.a,{buildingName:this.props.buildingName,assetOntology:s.name,entityType:"Component",showUploader:!o}),i.createElement("button",{type:"button",id:"btnNewComponentTypeFormDialog",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#newComponentTypeFormDialog",style:{display:"none"},onClick:function(){$("div").scrollTop(0)}},"."),i.createElement(m.a,{id:"newComponentTypeFormDialog",onSaveButtonClick:function(){t.saveComponentSubclassType()},showSaveButton:!0,heading:"Add Component Type",saveButtonText:"Save and Continue",disableSaveButton:""==g.componentTypeName&&""==g.subClassOf},i.createElement("div",{className:"dataCard padding-10 no-margin"},i.createElement("div",{className:""},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"type"},"Component Type:")),i.createElement("div",{className:"col-md-9"},i.createElement("select",{id:"type",className:"form-control",name:"type",onChange:function(e){return t.handleComponentTypeFormChange("type",e.target.value)},value:g.subClassOf},i.createElement("option",{value:""},"Select Type"),h&&h.map(function(e,t){return 0===t?i.createElement("option",{key:t,selected:!0,value:e.value},e.value):i.createElement("option",{key:t,value:e.value},e.value)}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"rdfsLabel"},"Name:")),i.createElement("div",{className:"col-md-9"},i.createElement("input",{name:"rdfsLabel",value:g.componentTypeName,onChange:function(e){return t.handleComponentTypeFormChange("rdfsLabel",e.target.value)},type:"text",className:"form-control"})," "))),i.createElement("br",null))))),i.createElement("br",null),i.createElement("div",{className:"row"},v&&i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,"Are you sure to Delete Component?"),i.createElement("button",{className:"btn btn-danger btn-fill",onClick:function(){t.state.isConfirmDelete;t.setState({isConfirmDelete:!1},function(){t.toDeleteComponent()})}},"Yes"),"\xa0\xa0\xa0",i.createElement("button",{className:"btn btn-primary btn-fill",onClick:function(){t.state.isConfirmDelete;t.setState({isConfirmDelete:!1},function(){})}},"No"))),a&&!o&&i.createElement("button",{className:"btn btn-danger active pull-right",onClick:function(){var e=t.props.component;t.state.isConfirmDelete;t.setState({isConfirmDelete:!0},function(){t.deletecomponent(e)})}},i.createElement("span",{className:"fa fa-trash-o"}),"Delete Component"),i.createElement("br",null),i.createElement("br",null))},t}(i.Component);t.a=x},1058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(10)),r=n(1116),o=n(654),l=n(656),s=n(658),c=n(23),u=n(660),d=n(1117),m=n(116),h=n(1118),p=n(11),f=n(769),g=n(824),v=n(775),b=n(772),y=n(1119),E=n(1120),x=n(696),S=n(670),w=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),N=this&&this.__assign||function(){return(N=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},C=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},_=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},T=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],o=0,l=r.length;o<l;o++,i++)a[i]=r[o];return a},O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:Object(c.t)(12),floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:"",subnetmask:"255.255.255.0"},topic:"",deviceNumber:"",enclosure:"",deviceState:"",supervisorAlarmTimeDelay:180},oldModel:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:"",subnetmask:"255.255.255.0"},topic:"",deviceNumber:"",enclosure:"",deviceState:"",supervisorAlarmTimeDelay:180},_spaces:[],_monconDeviceTypes:[],newLocation:{ontology:"",buildingName:n.props.buildingName,floor:"",type:"",name:"",rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""},SensorList:[],HVAC_List:[],Equipment_List:[],newEquipmentType:"",EquipmentList:[],PanelEquipmentList:[],ComputingDevice_List:[],NetworkDevice_List:[],isHistorian:!1,deviceType:n.props.deviceType?n.props.deviceType:"Electronic",networkDevice:Object(),computingDevice:Object(),deviceID:"",MonconApplications:[]},n.getHVAC_List=n.getHVAC_List.bind(n),n.getEquipment_List=n.getEquipment_List.bind(n),n.getEnclosureEquipment_List=n.getEnclosureEquipment_List.bind(n),n.handleLocationChange=n.handleLocationChange.bind(n),n.handleMonConDeviceTypeChange=n.handleMonConDeviceTypeChange.bind(n),n.handleLightningTypeChange=n.handleLightningTypeChange.bind(n),n.handleManufacturerChange=n.handleManufacturerChange.bind(n),n.handleModelChange=n.handleModelChange.bind(n),n.handleConnectionTypeChange=n.handleConnectionTypeChange.bind(n),n.getComputingDevices=n.getComputingDevices.bind(n),n.getNetworkDevices=n.getNetworkDevices.bind(n),n.handleNotesChange=n.handleNotesChange.bind(n),n.handleLocationChange=n.handleLocationChange.bind(n),n.handleWirelessConfigChange=n.handleWirelessConfigChange.bind(n),n.handleNewLocationChange=n.handleNewLocationChange.bind(n),n.handleMultiSensorChange=n.handleMultiSensorChange.bind(n),n.handleMultiStrategiesChange=n.handleMultiStrategiesChange.bind(n),n.onChangeGraphURL=n.onChangeGraphURL.bind(n),n.verifyDeviceID=n.verifyDeviceID.bind(n),n.checkDeviceID=n.checkDeviceID.bind(n),n.handleDeviceNameChange=n.handleDeviceNameChange.bind(n),n.handleDeviceChange=n.handleDeviceChange.bind(n),n.getDevices=n.getDevices.bind(n),n.handleEquipmentList=n.handleEquipmentList.bind(n),n.onChangeComputingDevice=n.onChangeComputingDevice.bind(n),n.onChangeNetworkDevice=n.onChangeNetworkDevice.bind(n),n.onChangeControllerIpAddress=n.onChangeControllerIpAddress.bind(n),n.onChangeDigitalTwinLink=n.onChangeDigitalTwinLink.bind(n),n.onChangeVirtualBimLink=n.onChangeVirtualBimLink.bind(n),n.restoreSelectedVersion=n.restoreSelectedVersion.bind(n),n.handleNetworkDeviceChange=n.handleNetworkDeviceChange.bind(n),n.handleComputingDeviceChange=n.handleComputingDeviceChange.bind(n),n.saveNetworkingDevice=n.saveNetworkingDevice.bind(n),n.getNetworkingDevice=n.getNetworkingDevice.bind(n),n.getComputingDevice=n.getComputingDevice.bind(n),n.saveDevice=n.saveDevice.bind(n),n.saveComputingDevice=n.saveComputingDevice.bind(n),n.getMonconApplicatons=n.getMonconApplicatons.bind(n),n}return w(t,e),t.prototype.componentDidMount=function(){return C(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,u,d,h,f,g,v,b,y,E=this;return _(this,function(x){switch(x.label){case 0:return Object(m.a)(!0),e=this.props,t=e.deviceName,n=void 0===t?"":t,a=e.buildingName,i=e.isInsight,r=e.isView,o=e.isEdit,l=e.deviceType,[4,this.verifyDeviceID()];case 1:return x.sent(),a?(this.getDevices(),[4,this.getHVAC_List()]):[3,11];case 2:return x.sent(),[4,this.getEquipment_List()];case 3:return x.sent(),[4,this.getEnclosureEquipment_List()];case 4:return x.sent(),[4,this.fetchSpaces()];case 5:return x.sent(),u=Object(),d=Object(),h=Object(),i&&(u.monitoringControlDeviceType="Thermostat",u.connectionType="Wireless"),(r||o)&&n?"Electronic"!=l?[3,7]:[4,Object(s.t)(n,a)]:[3,9];case 6:return u=x.sent(),[3,8];case 7:"Network"==l?this.getNetworkingDevice(n):"Computing"==l&&this.getComputingDevice(n),x.label=8;case 8:return[3,10];case 9:f=JSON.parse(p.a.getItem("user")),u.deviceName=Object(c.t)(12),u.createdby=f.contact,u.wirelessConfig={ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:"",subnetmask:"255.255.255.0"},u.deviceID=this.state.deviceID,u.deviceState="Planned",u.timestamp=new Date,u.supervisorAlarmTimeDelay=180,d.ontology=Object(c.t)(12),d.deviceID=this.state.deviceID,d.deviceState="Planned",d.createdBy=f.contact,d.timestamp=new Date,h.ontology=Object(c.t)(12),h.deviceID=this.state.deviceID,h.instance=this.props.instance,h.deviceState="Planned",d.createdBy=f.contact,d.timestamp=new Date,this.setState({deviceType:this.props.tab}),x.label=10;case 10:u&&(u.rdfsLabel&&-1!=u.rdfsLabel.toLowerCase().indexOf(u.deviceID)&&(u.rdfsLabel=u.rdfsLabel.split("-").length>0?u.rdfsLabel.split("-")[0]:u.rdfsLabel),u.relatedEquipment&&u.relatedEquipment.length>0&&(g=this.state.EquipmentList).length>0&&(v=[],u.relatedEquipment&&u.relatedEquipment.map(function(e){var t=Object();t=g.find(function(t){return t.value==e.value}),v.push(t)}),u.relatedEquipment=v),u.sensors&&u.sensors.length>0&&(b=this.state.SensorList).length>0&&(y=[],u.sensors&&u.sensors.map(function(e){var t=Object();t=b.find(function(t){return t.value==e.value}),y.push(t)}),u.sensors=y),this.setState({Moncon:u,oldModel:N({},u),networkDevice:d,computingDevice:h},function(){E.getMonconApplicatons()})),x.label=11;case 11:return this.getComputingDevices(),this.getNetworkDevices(),Object(m.a)(!1),[2]}})})},t.prototype.getDevices=function(){return C(this,void 0,void 0,function(){var e,t,n,a;return _(this,function(r){switch(r.label){case 0:return e=this.props.buildingName,t=[],e?[4,Object(s.v)(e)]:[3,2];case 1:(n=r.sent())&&n.length>0&&(a=Object(),n.map(function(e){a={value:Object(i.g)(e.moncondevice),label:Object(i.g)(e.rdfsLabel)},t.push(a)})),r.label=2;case 2:return this.setState({SensorList:t}),[2]}})})},t.prototype.verifyDeviceID=function(){return C(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return""!=(e=this.state.deviceID)&&e?[3,2]:[4,this.checkDeviceID()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.handleDeviceTypeChange=function(e){return C(this,void 0,void 0,function(){return _(this,function(t){return this.setState({deviceType:e}),[2]})})},t.prototype.checkDeviceID=function(){return C(this,void 0,void 0,function(){var e,t,n=this;return _(this,function(a){switch(a.label){case 0:return e=this.state.deviceID,t=Object(c.r)(6).toString(),this.props.buildingName?[4,Object(s.a)(t,this.props.buildingName).then(function(n){e=n&&n[0]?"":t}).catch(function(e){return e})]:[3,2];case 1:a.sent(),this.setState({deviceID:e},function(){return C(n,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:return[4,this.verifyDeviceID()];case 1:return e.sent(),[2]}})})}),a.label=2;case 2:return[2]}})})},t.prototype.getHVAC_List=function(){return C(this,void 0,void 0,function(){var e=this;return _(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,Object(o.g)(this.props.buildingName).then(function(t){for(var n=0;n<t.length;n++){var a=t[n];Object(i.g)(a.ontology)&&Object(i.g)(a.rdfsLabel)&&Object(c.E)(Object(i.g)(a.ontology),Object(i.g)(a.rdfsLabel))}e.setState({HVAC_List:t})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.getNetworkingDevice=function(e){return C(this,void 0,void 0,function(){var t,n,a;return _(this,function(r){switch(r.label){case 0:return[4,Object(g.f)(e)];case 1:return t=r.sent(),n=Object(),t&&t.length>0&&t[0]?n={ontology:Object(i.g)(t[0].ontology),name:Object(i.g)(t[0].name),modelNo:Object(i.g)(t[0].modelNo),ipAddress:Object(i.g)(t[0].ipAddress),networkType:Object(i.g)(t[0].networkType),networkDevice:Object(i.g)(t[0].networkDevice),networkURL:Object(i.g)(t[0].networkURL),floor:Object(i.g)(t[0].floor)?Object(i.g)(t[0].floor):"",location:Object(i.g)(t[0].location)?Object(i.g)(t[0].location):"",building:Object(i.g)(t[0].building)?Object(i.g)(t[0].building):"",enclosure:Object(i.g)(t[0].enclosure),deviceState:Object(i.g)(t[0].deviceState),deviceID:Object(i.g)(t[0].deviceID)?Object(i.g)(t[0].deviceID):this.state.deviceID,createdBy:Object(i.g)(t[0].createdBy),timestamp:Object(i.g)(t[0].timestamp)&&new Date(Object(i.g)(t[0].timestamp))?new Date(Object(i.g)(t[0].timestamp)):new Date,referenceSolutionOntology:Object(i.g)(t[0].referenceSolutionOntology)}:(a=JSON.parse(p.a.getItem("user")),n.ontology=Object(c.t)(12),n.deviceID=this.state.deviceID,n.createdBy=a.contact,n.timestamp=new Date),this.setState({networkDevice:n}),[2]}})})},t.prototype.getComputingDevice=function(e){return C(this,void 0,void 0,function(){var t,n,a,r,o,l,s,u,d,m,h,g;return _(this,function(v){switch(v.label){case 0:return[4,Object(f.f)(e)];case 1:return t=v.sent(),n=Object(),t&&t.length>0&&t[0]?(a=Object(i.g)(t[0].devices),r=a&&a.split(","),o=[],r&&r.length>0?[4,Object(c.v)(r)]:[3,3]):[3,6];case 2:if((d=v.sent())&&d.length>0)for(m=0;m<d.length;m++)h=d[m],o.push({label:h.rdfsLabel,value:h.ontology});v.label=3;case 3:return l=Object(i.g)(t[0].relatedComputingDevices),s=l&&l.split(","),u=[],s&&s.length>0?[4,Object(c.v)(s)]:[3,5];case 4:if((d=v.sent())&&d.length>0)for(m=0;m<d.length;m++)h=d[m],u.push({label:h.rdfsLabel,value:h.ontology});v.label=5;case 5:return n={building:Object(i.g)(t[0].building),controllerIpAddress:Object(i.g)(t[0].controllerIpAddress),deviceID:Object(i.g)(t[0].deviceID)?Object(i.g)(t[0].deviceID):this.state.deviceID,deviceState:Object(i.g)(t[0].deviceState),networkDevice:Object(i.g)(t[0].networkDevice),devices:o,relatedComputingDevices:u,enclosure:Object(i.g)(t[0].enclosure),floor:Object(i.g)(t[0].floor),instance:Object(i.g)(t[0].instance),name:Object(i.g)(t[0].name),ontology:Object(i.g)(t[0].ontology),space:Object(i.g)(t[0].space),createdBy:Object(i.g)(t[0].createdBy),timestamp:Object(i.g)(t[0].timestamp)&&new Date(Object(i.g)(t[0].timestamp))?new Date(Object(i.g)(t[0].timestamp)):new Date,referenceSolutionOntology:Object(i.g)(t[0].referenceSolutionOntology)},[3,7];case 6:g=JSON.parse(p.a.getItem("user")),n.ontology=Object(c.t)(12),n.deviceID=this.state.deviceID,n.createdBy=g.contact,n.timestamp=new Date,v.label=7;case 7:return this.setState({computingDevice:n}),[2]}})})},t.prototype.getEquipment_List=function(){return C(this,void 0,void 0,function(){var e,t;return _(this,function(n){switch(n.label){case 0:return this.props.buildingName?[4,Object(o.h)(this.props.buildingName)]:[3,2];case 1:e=n.sent(),t=e&&e.length>0?e.map(function(e){return{value:Object(i.g)(e.ontology),label:Object(i.g)(e.rdfsLabel)}}):[],this.setState({EquipmentList:t}),n.label=2;case 2:return[2]}})})},t.prototype.getEnclosureEquipment_List=function(){return C(this,void 0,void 0,function(){var e,t;return _(this,function(n){switch(n.label){case 0:return this.props.buildingName?[4,Object(o.o)(this.props.buildingName)]:[3,2];case 1:e=n.sent(),t=e&&e.length>0&&e.map(function(e){return{value:Object(i.g)(e.ontology),label:Object(i.g)(e.rdfsLabel)}}),this.setState({PanelEquipmentList:t}),n.label=2;case 2:return[2]}})})},t.prototype.fetchSpaces=function(){return C(this,void 0,void 0,function(){var e=this;return _(this,function(t){return Object(l.h)(this.props.buildingName).then(function(t){e.setState({_spaces:t})}).catch(function(e){return e}),[2]})})},t.prototype.handleNewLocationChange=function(e){this.setState({newLocation:e})},t.prototype.handleMonConDeviceTypeChange=function(e){var t=this;this.setState({Moncon:e},function(){t.getMonconApplicatons()})},t.prototype.getMonconApplicatons=function(){return C(this,void 0,void 0,function(){var e,t;return _(this,function(n){switch(n.label){case 0:return e=this.state.Moncon,[4,Object(s.j)([e.monitoringControlDeviceType]).catch(function(e){return[]})];case 1:return t=n.sent(),this.setState({MonconApplications:T(t)}),[2]}})})},t.prototype.handleDeviceNameChange=function(e){var t=this.state.Moncon;t.rdfsLabel=e,this.setState({Moncon:t})},t.prototype.handleEquipmentList=function(e){if(!this.props.isView){var t=this.state.Moncon;t.relatedEquipment=e,this.setState({Moncon:t})}},t.prototype.handleSupervisorAlarmTimeDelayChange=function(e){var t=this.state.Moncon;t.supervisorAlarmTimeDelay=e.target.value,this.setState({Moncon:t})},t.prototype.handleDeviceChange=function(e){var t=this.state.Moncon;t.adminPassword=e,this.setState({Moncon:t})},t.prototype.handleDeviceIDChange=function(e){var t=this.state.Moncon;t.deviceID=e,this.setState({Moncon:t})},t.prototype.handleDeviceStateChange=function(e){var t=this.state.Moncon;t.deviceState=e,this.setState({Moncon:t})},t.prototype.handleManufacturerChange=function(e){var t=this.state.Moncon;t.manufacturer=e,this.setState({Moncon:t})},t.prototype.handleModelChange=function(e){var t=this.state.Moncon;t.model=e,this.setState({Moncon:t})},t.prototype.handleBoardAddressChange=function(e){var t=this.state.Moncon;t.boardAddress=e,this.setState({Moncon:t})},t.prototype.handleLocationChange=function(e){var t=this.state.Moncon;t.location=e.selectedLocation,t.floor=e.selectedFloor},t.prototype.handleLightningTypeChange=function(e){var t=this.state.Moncon;t.relayLightingType=e,this.setState({Moncon:t})},t.prototype.handleConnectionTypeChange=function(e){var t=this.state.Moncon;t.connectionType=e,this.setState({Moncon:t})},t.prototype.onChangeComputingDevice=function(e){var t=this,n=this.state.Moncon;n.computingDevice=e.target.value,this.setState({Moncon:n},function(){t.onChangeControllerIpAddress()})},t.prototype.onChangeNetworkDevice=function(e){var t=this.state.Moncon;t.networkDevice=e.target.value,this.setState({Moncon:t},function(){})},t.prototype.onChangeMonconApplication=function(e){var t=this.state.Moncon;t.application=e.target.value,this.setState({Moncon:t})},t.prototype.onChangeControllerIpAddress=function(){var e=this.state,t=e.Moncon,n=e.ComputingDevice_List;if(t.computingDevice){var a=n.find(function(e){return Object(i.g)(e.ontology)==t.computingDevice}).controllerIpAddress;t.wirelessConfig.controllerIPAddress=Object(i.g)(a),this.setState({Moncon:t})}},t.prototype.getComputingDevices=function(){return C(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return[4,Object(f.f)()];case 1:return e=t.sent(),this.setState({ComputingDevice_List:e}),[2]}})})},t.prototype.getNetworkDevices=function(){return C(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return[4,Object(g.f)()];case 1:return e=t.sent(),this.setState({NetworkDevice_List:e}),[2]}})})},t.prototype.handleNotesChange=function(e){var t=this.state.Moncon;t.notes=e,this.setState({Moncon:t})},t.prototype.handleEnclosureChange=function(e){var t=this.state.Moncon;t.enclosure=e,this.setState({Moncon:t})},t.prototype.handleDeviceNumberChange=function(e){var t=this.state.Moncon;t.deviceNumber=e,this.setState({Moncon:t})},t.prototype.handleWirelessConfigChange=function(e){var t=this.state.Moncon,n=e.target.name;t.wirelessConfig[""+n]=e.target.value,this.setState({Moncon:t})},t.prototype.saveDevice=function(){return C(this,void 0,void 0,function(){var e;return _(this,function(t){return"Electronic"==(e=this.state.deviceType)?this._saveMoncon():"Network"==e?this.saveNetworkingDevice():"Computing"==e&&this.saveComputingDevice(),[2]})})},t.prototype._saveMoncon=function(e){return C(this,void 0,void 0,function(){var t,n,a,r,o,l,u,d,h,f,g,v,y;return _(this,function(E){switch(E.label){case 0:return t=this.state,n=t.Moncon,a=t.oldModel,r=this.props,o=r.instance,l=r.buildingName,u=r.isEdit,d=JSON.parse(p.a.getItem("user")),n?(n.deviceName=n&&n.deviceName?n.deviceName:Object(c.t)(12),n.createdby||(n.createdby=d.name),Object(m.a)(!0),n.deviceName?n.onitUrlLink=window.location.origin+"/#"+o+"/"+l+"/Point/EditDevice/Electronic/"+n.deviceName:n.onitUrlLink=window.location.origin+"/#"+o+"/"+l+"/Point/EditDevice/Electronic/",n.rdfsLabel=n.rdfsLabel+"-"+n.deviceID,[4,Object(S.d)(this.props.buildingName)]):[3,5];case 1:return h=E.sent(),f=Object(i.g)(h[0].buildingCode),g=Object(s.e)(n.wirelessConfig&&n.wirelessConfig.ipAddress,n.wirelessConfig&&n.wirelessConfig.controllerIPAddress,n.boardAddress,n.monitoringControlDeviceType,f),n.topic=g,v=void 0,y=void 0,e?(v=e||n,y=n):(v=n,y=u?a:null),[4,Object(s.l)(n,l,this.props.isEdit)];case 2:return E.sent(),[4,Object(b.b)(n.deviceName,v,y,d.contact)];case 3:return E.sent(),this.props.getNewDeviceLabel&&this.props.getNewDeviceLabel(n.deviceName),[4,Object(c.E)(n.deviceName,n.rdfsLabel)];case 4:E.sent(),Object(m.a)(!1),E.label=5;case 5:return this.props.onChangeTab?this.props.onChangeTab("Tab1"):document.getElementById("AddDeviceDailogeButton")?document.getElementById("AddDeviceDailogeButton").click():window.history.back(),Object(m.a)(!1),[2]}})})},t.prototype.saveNetworkingDevice=function(){return C(this,void 0,void 0,function(){var e,t,n,a;return _(this,function(i){switch(i.label){case 0:return Object(m.a)(!0),e=this.props,t=e.isEdit,n=e.buildingName,(a=this.state.networkDevice).building=n,[4,Object(g.d)(a,t)];case 1:return i.sent(),this.props.onChangeTab&&this.props.onChangeTab("Tab1"),Object(m.a)(!1),[2]}})})},t.prototype.saveComputingDevice=function(){return C(this,void 0,void 0,function(){var e,t;return _(this,function(n){switch(n.label){case 0:return Object(m.a)(!0),e=this.props.isEdit,t=this.state.computingDevice,[4,Object(f.c)(t,e)];case 1:return n.sent(),this.props.onChangeTab?this.props.onChangeTab("Tab1"):document.getElementById("AddDeviceDailogeButton")?document.getElementById("AddDeviceDailogeButton").click():window.history.back(),Object(m.a)(!1),[2]}})})},t.prototype.handleMultiSensorChange=function(e){var t=this.state.Moncon;t.sensors=[e],this.setState({Moncon:t})},t.prototype.handleMultiStrategiesChange=function(e){var t=this.state.Moncon;t.strategy=e,this.setState({Moncon:t})},t.prototype.onChangeGraphURL=function(e){var t=this.state.Moncon;t.graphURL=e,this.setState({Moncon:t})},t.prototype.onChangeDigitalTwinLink=function(e){var t=this.state.Moncon;t.digitalTwinLink=e,this.setState({Moncon:t})},t.prototype.onChangeVirtualBimLink=function(e){var t=this.state.Moncon;t.virtualBimLink=e,this.setState({Moncon:t})},t.prototype.handleNetworkDeviceChange=function(e){this.setState({networkDevice:e})},t.prototype.handleComputingDeviceChange=function(e){this.setState({computingDevice:e})},t.prototype.restoreSelectedVersion=function(e){return C(this,void 0,void 0,function(){var t;return _(this,function(n){switch(n.label){case 0:return e&&e.model?(t=JSON.parse(e.model),[4,this._saveMoncon(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.Moncon,o=t.SensorList,l=t.EquipmentList,s=t.ComputingDevice_List,c=t.NetworkDevice_List,m=t.isHistorian,f=t.PanelEquipmentList,g=t.deviceType,b=t.networkDevice,S=t.computingDevice,w=t.MonconApplications,N=this.props,C=N.instance,_=N.hideBackButton,T=this.props,O=T.isInsight,D=T.buildingName,A=T.isView,L=T.isEdit,I=T.deviceName,P=JSON.parse(p.a.getItem("user")),k=n.monitoringControlDeviceType&&(-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("relay")||-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")||-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ats")||-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("generator")||-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("watt")),j=n.monitoringControlDeviceType&&-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("cbw"),M=!1;"Electronic"==g?(M=k?!!(n.floor&&n.location&&n.rdfsLabel&&n.boardAddress&&n.computingDevice&&n.wirelessConfig&&n.wirelessConfig.controllerIPAddress&&n.wirelessConfig&&n.wirelessConfig.ipAddress):j?!!(n.floor&&n.location&&n.rdfsLabel&&n.computingDevice&&n.wirelessConfig&&n.wirelessConfig.controllerIPAddress&&n.wirelessConfig&&n.wirelessConfig.ipAddress):!!(n.floor&&n.location&&n.rdfsLabel),M=!!(n.rdfsLabel&&n.adminPassword&&n.monitoringControlDeviceType&&n.floor&&n.location&&n.wirelessConfig.ipAddress&&n.location)):"Network"==g?M=!!(b.name&&b.deviceID&&b.ipAddress&&b.networkType&&b.floor&&b.location):"Computing"==g&&(M=!!(S.name&&S.deviceID&&S.building&&S.floor&&S.space));var R=n&&n.monitoringControlDeviceType&&-1!=n.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),F=!1,B="";return"Network"==g&&b.ontology?(F=!0,B=b.ontology):"Computing"==g&&S.ontology?(F=!0,B=S.ontology):"Electronic"==g&&n.deviceName&&(F=!0,B=n.deviceName),(A||L)&&(B=I),a.createElement(a.Fragment,null,m&&a.createElement("div",null,a.createElement("div",{className:"col-md-12"},a.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",style:{marginLeft:3,marginTop:5},onClick:function(){e.setState({isHistorian:!1})}}," Go To Back"))),m&&a.createElement(v.default,{buildingName:D,instance:C,ObjectId:n.deviceName,restoreSelectedVersion:this.restoreSelectedVersion}),!m&&a.createElement("div",{className:"content",style:{marginRight:"10px",marginLeft:"10px"}},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10",style:{marginTop:"-15px"}},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"deviceType"},"Device Type:"))),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-4"},a.createElement("div",{className:"form-group"},a.createElement("select",{className:(g?"":"addFieldValidate")+" form-control",id:"deviceType",name:"deviceType",disabled:A||L,onChange:function(t){return e.handleDeviceTypeChange(t.target.value)},value:g||""},a.createElement("option",{value:"Electronic"},"Electronic Device"),a.createElement("option",{value:"Network"},"Network Device"),a.createElement("option",{value:"Computing"},"Computing Device")))),a.createElement("div",{className:"col-md-6"},a.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(){e.setState({isHistorian:!0})}}," ",a.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," Historian Archive"))))),"Network"==g&&a.createElement(y.a,{buildingName:D,isView:A,networkDevice:b,handleNetworkDeviceChange:this.handleNetworkDeviceChange,NetworkDevice_List:c}),"Computing"==g&&a.createElement(E.a,{instance:C,buildingName:D,isView:A,computingDevice:S,handleComputingDeviceChange:this.handleComputingDeviceChange,NetworkDevice_List:c}),"Electronic"==g&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"devicename"},O?"Insight":"Device"," Name:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"devicename",disabled:A,className:(n.rdfsLabel?"":"addFieldValidate")+" form-control",value:n.rdfsLabel?n.rdfsLabel:"",onChange:function(t){return e.handleDeviceNameChange(t.target.value)}}))))),(P&&"1"==P.role||P.name==n.createdby)&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"adminPassword"},O?"Insight":"Device"," Admin Password:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text",id:"adminPassword",disabled:A,className:(n.adminPassword?"":"addFieldValidate")+" form-control",value:n.adminPassword?n.adminPassword:"",name:"adminPassword",onChange:function(t){return e.handleDeviceChange(t.target.value)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"deviceID"},O?"Insight":"Device"," ID:"))),a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"deviceID",disabled:!R,className:"form-control",value:n.deviceID?n.deviceID:"",onChange:function(t){return e.handleDeviceIDChange(t.target.value)}}))),R&&a.createElement(h.a,{buildingName:D}),a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"pull-right padding-5"},a.createElement("label",{htmlFor:"deviceState"},"Device State:"))),a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("select",{className:(n.deviceState?"":"addFieldValidate")+" form-control",id:"deviceState",name:"deviceState",disabled:A,onChange:function(t){return e.handleDeviceStateChange(t.target.value)},value:n.deviceState?n.deviceState:""},a.createElement("option",{value:"Planned"},"Planned"),a.createElement("option",{value:"Ordered"},"Ordered"),a.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),a.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),a.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),a.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),a.createElement("option",{value:"Assembly"},"Assembly"),a.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),a.createElement("option",{value:"Kitting"},"Kitting"),a.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),a.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),a.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),a.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),a.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),a.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),a.createElement("option",{value:"Existing"},"Existing In Use"),a.createElement("option",{value:"Retired"},"Retired"),a.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),a.createElement("option",{value:"Sold"},"Sold"),a.createElement("option",{value:"DisposedOf"},"Disposed Of"),a.createElement("option",{value:"ErrorDeleted"},"Error Deleted"))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"txtDeviceNumber"},"Device Number:"))),a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"txtDeviceNumber",className:"form-control",disabled:A,value:n.deviceNumber?n.deviceNumber:"",name:"txtDeviceNumber",onChange:function(t){return e.handleDeviceNumberChange(t.target.value)}}))),a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"pull-right padding-5"},a.createElement("label",{htmlFor:"txtEnclosure"},"Cabinet / Panel:"))),a.createElement("div",{className:"col-md-3 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("select",{className:"form-control",id:"otherEquipment",disabled:A,value:n.enclosure?n.enclosure:"",onChange:function(t){return e.handleEnclosureChange(t.target.value)}},a.createElement("option",{value:"",key:-2},"Select Cabinet Equipment"),f&&f.length>0&&f.map(function(e,t){return a.createElement("option",{key:t,value:e.value},e.label," ")})))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"computingdevice"},"Connected Computing Device:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("select",{className:(k||j?n.computingDevice?"":"addFieldValidate":"")+" form-control",id:"computingdevice",disabled:A,value:n.computingDevice?n.computingDevice:"",onChange:function(t){e.onChangeComputingDevice(t)}},a.createElement("option",{value:"",key:-2},"Select Computing Device"),s.length>0&&s.map(function(e,t){return a.createElement("option",{key:t,value:Object(i.g)(e.ontology)},Object(i.g)(e.name))})))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"networkdevice"},"Networking Device:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("select",{className:"form-control",id:"networkdevice",value:n.networkDevice?n.networkDevice:"",disabled:A,onChange:function(t){e.onChangeNetworkDevice(t)}},a.createElement("option",{value:"",key:-2},"Select Network Device"),c.length>0&&c.map(function(e,t){return a.createElement("option",{key:t,value:Object(i.g)(e.ontology)},Object(i.g)(e.name))})))))),a.createElement("div",{className:"row "},a.createElement("div",{className:"col-md-12"},a.createElement(d.a,{buildingName:D,Moncon:n,isEdit:L,isView:A,handleMonConDeviceTypeChange:this.handleMonConDeviceTypeChange}))),a.createElement("div",{className:"row "},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"application"},"Moncon Application:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("select",{className:"form-control",id:"application",value:n.application?n.application:"",disabled:A,onChange:function(t){e.onChangeMonconApplication(t)}},a.createElement("option",{value:"",key:-2},"General"),w.length>0&&w.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology},e.applicationLabel)})))))),k&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"boardAddress"},"Board Address"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"boardAddress",disabled:A,className:(n.boardAddress?"":"addFieldValidate")+" form-control",value:n.boardAddress?n.boardAddress:"",onChange:function(t){return e.handleBoardAddressChange(t.target.value)}})))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"Manufacturer"},"Manufacturer:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"Manufacturer",disabled:A,className:"form-control",value:n.manufacturer?n.manufacturer:"",onChange:function(t){return e.handleManufacturerChange(t.target.value)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"Model"},"Model:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"Model",disabled:A,className:"form-control",value:n.model?n.model:"",onChange:function(t){return e.handleModelChange(t.target.value)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"hvac"},"Related Equipment:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement(u.a,{isDisabled:A,closeMenuOnSelect:!1,isMulti:!0,value:n.relatedEquipment?n.relatedEquipment:[],onChange:this.handleEquipmentList,placeholder:"Select Equipment",options:l})),a.createElement("div",{className:"col-md-2 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"supervisorAlarmTimeDelay"},"Supervisory Alarm Time Delay (sec):"))),a.createElement("div",{className:"col-md-2 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"supervisorAlarmTimeDelay",name:"supervisorAlarmTimeDelay",disabled:A,className:"form-control",value:n.supervisorAlarmTimeDelay?n.supervisorAlarmTimeDelay:"",onChange:function(t){return e.handleSupervisorAlarmTimeDelayChange(t)}}))))),a.createElement(r.a,{instance:this.props.instance,buildingName:D,isDisabled:A,selectedFloorLocation:{selectedFloor:n.floor,selectedLocation:n.location},onLocationChange:this.handleLocationChange}),(P&&"1"==P.role||P.name==n.createdby)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"connectiontype"},"Connection Type:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("select",{className:"form-control",id:"connectiontype",disabled:A,value:n.connectionType?n.connectionType:"",onChange:function(t){return e.handleConnectionTypeChange(t.target.value)}},a.createElement("option",{value:"",key:-2},"Select Connection Type"),a.createElement("option",{value:"Physical"},"Physical"),a.createElement("option",{value:"Wireless"},"Wireless")))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"cadBIM"},"ONIT URL Link:"))),a.createElement("div",{className:"col-md-8 col-sm-8"},a.createElement("div",{className:"form-group"},a.createElement("div",{className:"form-control",id:"onitUrlLink"},n.onitUrlLink?n.onitUrlLink:""))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"ipaddress"},"IP Address:"))),a.createElement("div",{className:"col-md-2 col-sm-2"},a.createElement("div",{className:"form-group"},a.createElement("input",{onKeyPress:function(e){/[.0-9]/.test(e.key)||e.preventDefault()},type:"text ",id:"ipaddress",className:(n.wirelessConfig&&n.wirelessConfig.ipAddress?"":"addFieldValidate")+" form-control",disabled:A,value:n.wirelessConfig&&n.wirelessConfig.ipAddress,name:"ipAddress",onChange:function(t){return e.handleWirelessConfigChange(t)}}))),a.createElement("div",{className:"col-md-2 col-sm-3"},a.createElement("div",{className:"form-group pull-right"},a.createElement("label",{htmlFor:"controllerIPAddress"},"Controller IP Address:"))),a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{onKeyPress:function(e){/[.0-9]/.test(e.key)||e.preventDefault()},type:"text ",id:"controllerIPAddress",className:"form-control",disabled:!0,value:n.wirelessConfig&&n.wirelessConfig.controllerIPAddress?n.wirelessConfig.controllerIPAddress:"",name:"controllerIPAddress"}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"thermostatMacAddress"},"MAC Address:"))),a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{onKeyPress:function(e){/[.0-9]/.test(e.key)||e.preventDefault()},type:"text ",id:"thermostatMacAddress",className:"form-control",disabled:A,value:n.wirelessConfig&&n.wirelessConfig.thermostatMacAddress?n.wirelessConfig.thermostatMacAddress:"",name:"thermostatMacAddress",onChange:function(t){return e.handleWirelessConfigChange(t)}}))),a.createElement("div",{className:"col-md-2 col-sm-3"},a.createElement("div",{className:"form-group pull-right"},a.createElement("label",{htmlFor:"thermostatMacAddress"},"Subnet Mask:"))),a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{onKeyPress:function(e){/[.0-9]/.test(e.key)||e.preventDefault()},type:"text ",id:"subnetmask",className:"form-control",disabled:A,value:n.wirelessConfig&&n.wirelessConfig.subnetmask?n.wirelessConfig.subnetmask:"",name:"subnetmask",onChange:function(t){return e.handleWirelessConfigChange(t)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"ssid"},"SSID (Wireless Network):"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"ssid",className:"form-control",disabled:A,value:n.wirelessConfig&&n.wirelessConfig.ssid?n.wirelessConfig.ssid:"",name:"ssid",onChange:function(t){return e.handleWirelessConfigChange(t)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"password"},"Password (Wireless Network):"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"password",className:"form-control",disabled:A,value:n.wirelessConfig&&n.wirelessConfig.password?n.wirelessConfig.password:"",name:"password",onChange:function(t){return e.handleWirelessConfigChange(t)}})))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"graphURLs"},"Graph URL:"))),a.createElement("div",{className:"col-md-8 col-sm-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text",disabled:A,id:"graphURL",className:"form-control",value:n.graphURL?n.graphURL:"",onChange:function(t){return e.onChangeGraphURL(t.target.value)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"digitalTwinLink"},"Digital Twin URL:"))),a.createElement("div",{className:"col-md-8 col-sm-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text",disabled:A,id:"digitalTwinLink",className:"form-control",value:n.digitalTwinLink?n.digitalTwinLink:"",onChange:function(t){return e.onChangeDigitalTwinLink(t.target.value)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"virtualBimLink"},"Virtual Bim URL:"))),a.createElement("div",{className:"col-md-8 col-sm-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text",disabled:A,id:"virtualBimLink",className:"form-control",value:n.virtualBimLink?n.virtualBimLink:"",onChange:function(t){return e.onChangeVirtualBimLink(t.target.value)}}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"connectiontype"},"Sensors:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",null,a.createElement(u.a,{disabled:A,isDisabled:A,closeMenuOnSelect:!0,isMulti:!1,value:n.sensors?n.sensors:[],onChange:this.handleMultiSensorChange,placeholder:"Sensors for Optimization Strategies",options:o}))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"notes"},"Notes:"))),a.createElement("div",{className:"col-md-6 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"text ",id:"notes",className:"form-control",disabled:A,value:n.notes?n.notes:"",onChange:function(t){return e.handleNotesChange(t.target.value)}})))))),F&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement(x.a,{buildingName:D,assetOntology:B,showUploader:!A,entityType:g+"Device"}))),!_&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 inline-block"},!A&&a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",disabled:!M,onClick:function(){e.saveDevice()}},a.createElement("i",{className:"fa fa-save"})," Save")))))))},t}(a.Component);t.default=O},1065:function(e,t,n){"use strict";t.b=function(e,t,n){return l(this,void 0,void 0,function(){var r=this;return s(this,function(c){switch(c.label){case 0:return[4,Object(o.f)({buildingName:e,model:t},o.a.ESOLUTION.SavePTACInfo,i.b.ESolution).then(function(e){return l(r,void 0,void 0,function(){return s(this,function(e){return n||Object(a.b)("Saved PTAC Info Successfully"),[2]})})}).catch(function(e){n||Object(a.a)("Error occured while Saving PTAC Info.")})];case 1:return[2,c.sent()]}})})},t.a=function(e,t,n,a){return l(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(o.e)({buildingName:e,ontology:t,solution:n,equipment:a},o.a.ESOLUTION.FetchPTACInfo,i.b.TEMPLATES,!0)];case 1:return[2,r.sent()]}})})},t.f=function(e){return l(this,void 0,void 0,function(){var t,n,a,i;return s(this,function(o){for(t=[],n=0;n<e.length;n++)a=e[n],i={isOptimizedActive:!(!a.isOptimizedActive||!Object(r.g)(a.isOptimizedActive)||"true"!=Object(r.g)(a.isOptimizedActive)),isShutdownActive:!(!a.isOptimizedActive||!Object(r.g)(a.isOptimizedActive)||"true"!=Object(r.g)(a.isOptimizedActive)),optimizeStatus:Object(r.g)(a.optimizeStatus),ontology:Object(r.g)(a.ontology),solutionOntology:Object(r.g)(a.solutionOntology),coolTemp:a.coolTemp&&Object(r.g)(a.coolTemp)?parseFloat(Object(r.g)(a.coolTemp)):0,heatTemp:a.heatTemp&&Object(r.g)(a.heatTemp)?parseFloat(Object(r.g)(a.heatTemp)):0,controlType:Object(r.g)(a.controlType),equipment:Object(r.g)(a.equipment),fanStatus:Object(r.g)(a.fanStatus),isRelayOn:!(!a.isRelayOn||!Object(r.g)(a.isRelayOn)||"true"!=Object(r.g)(a.isRelayOn)),isAutoOff:!(!a.isAutoOff||!Object(r.g)(a.isAutoOff)||"true"!=Object(r.g)(a.isAutoOff)),mode:Object(r.g)(a.mode),isRoomOccupied:a.isRoomOccupied&&Object(r.g)(a.isRoomOccupied)?Object(r.g)(a.isRoomOccupied):"UNOCCUPIED"},t.push(i);return[2,t]})})},t.h=function(e){return l(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({model:e},o.a.ESOLUTION.SavePTACADP,i.b.ESolution).then(function(){Object(a.b)("PTAC ADP saved successfully.")}).catch(function(e){Object(a.a)("Error occured while saving PTAC ADP.")})];case 1:return[2,t.sent()]}})})},t.c=function(e,t,n,a){return l(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(o.e)({buildingName:e,ontology:t,equipment:n,solution:a},o.a.ESOLUTION.GetPTACADPDetail,i.b.ESolution,!0)];case 1:return[2,r.sent()]}})})},t.i=function(e,t){return l(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(o.f)({model:t,buildingName:e},o.a.ESOLUTION.SavePTACControllerSettings,i.b.ESolution).then(function(){Object(a.b)("PTAC Controller Settings saved successfully.")}).catch(function(e){Object(a.a)("Error occured while saving PTAC Controller Settings.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t,n){return l(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(o.e)({ontology:e,solutionOntology:t,equipment:n},o.a.ESOLUTION.FetchPTACControllerSettings,i.b.ESolution,!0)];case 1:return[2,a.sent()]}})})},t.d=function(e,t,n,a,r){return l(this,void 0,void 0,function(){return s(this,function(l){switch(l.label){case 0:return[4,Object(o.e)({buildingName:e,solutionOntology:t,equipment:n,startDate:a,endDate:r},o.a.ESOLUTION.FetchPTACControllerLogs,i.b.ESolution,!0)];case 1:return[2,l.sent()]}})})},t.g=function(e){return l(this,void 0,void 0,function(){var t,n,a,i;return s(this,function(o){for(t=[],n=0;n<e.length;n++)a=e[n],i={ontology:Object(r.g)(a.ontology),solutionOntology:Object(r.g)(a.solutionOntology),equipment:Object(r.g)(a.equipment),controlType:Object(r.g)(a.controlType),equipmentType:Object(r.g)(a.equipmentType),ptactType:Object(r.g)(a.ptactType),sensorDevice:Object(r.g)(a.sensorDevice)},t.push(i);return[2,t]})})};var a=n(31),i=n(20),r=n(10),o=n(12),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}},1116:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(665)),r=n(656),o=n(650),l=n(23),s=n(882),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={floorsList:[],locationList:[],newFloor:Object(),newLocation:{ontology:"",buildingName:n.props.buildingName,floor:"",type:"",name:"",rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""},toggleDialogForm:!1,selectedFloorLocation:{selectedFloor:"",selectedLocation:""}},n._getFloorsList=n._getFloorsList.bind(n),n._getLocationsList=n._getLocationsList.bind(n),n.handleNewFloorChange=n.handleNewFloorChange.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.handleLocationChange=n.handleLocationChange.bind(n),n.createFloor=n.createFloor.bind(n),n.updateSpace=n.updateSpace.bind(n),n}return c(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._getFloorsList()]:[3,3];case 1:return t.sent(),[4,this._getLocationsList(this.state.selectedFloorLocation.selectedFloor)];case 2:t.sent(),(e=this.props.selectedFloorLocation)&&this.setState({selectedFloorLocation:e}),t.label=3;case 3:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){var t,n=this;return d(this,function(a){return e.selectedFloorLocation&&(t=this.state.selectedFloorLocation,e.selectedFloorLocation.selectedFloor&&e.selectedFloorLocation.selectedLocation&&(e.selectedFloorLocation.selectedFloor!=t.selectedFloor||e.selectedFloorLocation.selectedLocation!=t.selectedLocation)&&this.setState({selectedFloorLocation:e.selectedFloorLocation},function(){n._getFloorsList(),n._getLocationsList(n.state.selectedFloorLocation.selectedFloor)})),[2]})})},t.prototype._getFloorsList=function(){return u(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return[4,Object(i.f)(this.props.buildingName).then(function(t){e.setState({floorsList:t})})];case 1:return t.sent(),[2]}})})},t.prototype._getLocationsList=function(e){return u(this,void 0,void 0,function(){var t,n=this;return d(this,function(a){switch(a.label){case 0:return t=this.props.buildingName,[4,Object(r.d)(e,t).then(function(e){n.setState({locationList:e})})];case 1:return a.sent(),[2]}})})},t.prototype.handleNewFloorChange=function(e){var t=this.state.newFloor;t.rdfsLabel=e,this.setState({newFloor:t})},t.prototype.handleFloorChange=function(e){return u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return"newFloor"!==e?[3,1]:(document.getElementById("btnShowFloorForm").click(),[3,4]);case 1:return""===e?[3,4]:(t=this.state.selectedFloorLocation,e===t.selectedFloor?[3,3]:(t.selectedFloor=e,t.selectedLocation="",this.setState({selectedFloorLocation:t}),[4,this._getLocationsList(e)]));case 2:n.sent(),n.label=3;case 3:this.props.onLocationChange(t),n.label=4;case 4:return[2]}})})},t.prototype.handleLocationChange=function(e){return u(this,void 0,void 0,function(){var t;return d(this,function(n){return t=this.state.selectedFloorLocation,"addLocation"===e?this.setState({toggleDialogForm:!0},function(){document.getElementById("btnShowSpaceFormDialog").click()}):t.selectedLocation=e,this.setState({selectedFloorLocation:t}),this.props.onLocationChange(t),[2]})})},t.prototype.createFloor=function(){return u(this,void 0,void 0,function(){var e,t=this;return d(this,function(n){switch(n.label){case 0:return(e=this.state.newFloor)&&e.rdfsLabel?(e.floor=e.floor?e.floor:Object(l.t)(7),[4,Object(i.b)(this.props.buildingName,e)]):[3,4];case 1:return n.sent(),[4,this._getFloorsList()];case 2:return n.sent(),[4,this.handleFloorChange(e.floor)];case 3:n.sent(),setTimeout(function(){document.getElementById("btnShowSpaceFormDialog").click(),t.setState({toggleDialogForm:!1})},1e3),n.label=4;case 4:return[2]}})})},t.prototype.updateSpace=function(e){return u(this,void 0,void 0,function(){var t;return d(this,function(n){switch(n.label){case 0:return[4,this._getLocationsList(e.floor)];case 1:return n.sent(),(t=this.state.selectedFloorLocation).selectedFloor=e.floor,t.selectedLocation=e.name,this.setState({selectedFloorLocation:t}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.isDisabled,i=t.buildingName,r=t.instance,l=this.state,c=l.selectedFloorLocation,u=l.floorsList,d=l.locationList,m=l.newFloor,h=l.toggleDialogForm;return a.createElement("div",{className:"row",style:{paddingTop:"10px"}},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"floor"},"Floor:"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("select",{id:"floor",className:(c.selectedFloor?"":"addFieldValidate")+" form-control",disabled:n,value:c.selectedFloor,onChange:function(t){return e.handleFloorChange(t.target.value)}},a.createElement("option",{value:"",key:-2},"Select Floor"),a.createElement("option",{value:"newFloor",key:-1},"New Floor"),a.createElement("hr",null),u&&u.length>0&&u.map(function(e,t){return a.createElement("option",{value:e.ontology.value,key:t},e.rdfsLabel.value," ")})),a.createElement("button",{type:"button",id:"btnShowFloorForm",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#floorFormDialog",style:{display:"none"}},"."),a.createElement(o.a,{id:"floorFormDialog",onSaveButtonClick:function(){e.createFloor()},saveButtonText:"Save and Create Space",disableSaveButton:!1},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-4 center"},a.createElement("label",{htmlFor:"newfloor"},"Floor:")),a.createElement("div",{className:"col-md-7"},a.createElement("input",{id:"newfloor",type:"text",className:"form-control",value:m.rdfsLabel,onChange:function(t){return e.handleNewFloorChange(t.target.value)}}))))))),a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"space"},"Space:"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("select",{id:"space",className:(c.selectedLocation?"":"addFieldValidate")+" form-control",disabled:n,value:c.selectedLocation,onChange:function(t){return e.handleLocationChange(t.target.value)}},a.createElement("option",{value:"",key:-2},"Select Location"),a.createElement("hr",null),a.createElement("option",{value:"addLocation",key:-1},"New Space"),a.createElement("hr",null),d.map(function(e,t){return a.createElement("option",{value:e.ontology.value,key:t},e.rdfsLabel.value," ")}))))),h&&a.createElement(s.a,{updateSpace:this.updateSpace,closeDailogBtnID:"btnShowSpaceFormDialog",floor:c.selectedFloor,buildingName:i,instance:r}))},t}(a.Component);t.a=m},1117:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(650)),r=n(116),o=n(658),l=n(11),s=n(10),c=n(660),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_monconDeviceTypes:[],_monconDeviceTypesMulti:[],newDeviceType:"",Moncon:Object(),selectedMonconDevice:Object()},n._fetchMonConDeviceTypes=n._fetchMonConDeviceTypes.bind(n),n.saveEquipmentType=n.saveEquipmentType.bind(n),n.onchangeEquipmentType=n.onchangeEquipmentType.bind(n),n.handleMonConDeviceTypeChange=n.handleMonConDeviceTypeChange.bind(n),n}return u(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.state,n=t.selectedMonconDevice,a=t._monconDeviceTypesMulti;e&&e.Moncon&&e.Moncon.monitoringControlDeviceType&&(n=a&&a.find(function(t){return t.value==e.Moncon.monitoringControlDeviceType})),this.setState({Moncon:e.Moncon,selectedMonconDevice:n})},t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchMonConDeviceTypes()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype._fetchMonConDeviceTypes=function(){return d(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return Object(r.a)(!0),[4,Object(o.x)().then(function(t){var n=[];t.map(function(e){var t=Object();t.label=Object(s.g)(e.moncon),t.value=Object(s.g)(e.moncon),n.push(t)}),"1"==JSON.parse(l.a.getItem("user")).role&&n.push({label:"Add New Device Type",value:"newDeviceType"}),e.setState({_monconDeviceTypes:t,_monconDeviceTypesMulti:n})}).catch(function(e){return e})];case 1:return t.sent(),Object(r.a)(!1),[2]}})})},t.prototype.onchangeEquipmentType=function(e){var t=e.target.value;this.setState({newDeviceType:t})},t.prototype.saveEquipmentType=function(){return d(this,void 0,void 0,function(){var e,t,n,a=this;return m(this,function(i){switch(i.label){case 0:return e=this.state.Moncon,t=this.state.newDeviceType,n=t.replace(new RegExp(" ","g"),""),t="",Object(r.a)(!0),[4,Object(o.y)(n,this.props.buildingName).then(function(e){}).catch(function(e){return e})];case 1:return i.sent(),e.monitoringControlDeviceType=n,this.setState({Moncon:e,newDeviceType:t},function(){return d(a,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,this._fetchMonConDeviceTypes()];case 1:return e.sent(),[2]}})})}),Object(r.a)(!1),this.props.handleMonConDeviceTypeChange(e),[2]}})})},t.prototype.handleMonConDeviceTypeChange=function(e){var t=this.state,n=t.selectedMonconDevice,a=t.Moncon;if(e){var i=e.value;"newDeviceType"==i?document.getElementById("newEquipTypeDailogebtn").click():(a.monitoringControlDeviceType=i,n=e,this.props.handleMonConDeviceTypeChange(a)),this.setState({Moncon:a,selectedMonconDevice:n})}},t.prototype.render=function(){var e=this,t=this.props.isView,n=this.state,r=n.newDeviceType,o=n._monconDeviceTypesMulti,l=n.selectedMonconDevice;return a.createElement("div",{className:""},a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"moncontype"},"Monitoring/Control Device Type:"))),a.createElement("div",{className:"col-md-4 col-sm-3"},a.createElement("div",{className:(l.value?"":"addFieldValidate")+" form-group"},a.createElement(c.a,{isDisabled:t,closeMenuOnSelect:!0,isMulti:!1,value:l,onChange:this.handleMonConDeviceTypeChange,placeholder:"Select Monitoring",options:o}))),a.createElement("div",{className:"colmd-12"},a.createElement("button",{id:"newEquipTypeDailogebtn",type:"button","data-toggle":"modal","data-target":"#AddTypeDailogeBox",className:"btn btn-dark hidden"}),a.createElement(i.a,{id:"AddTypeDailogeBox",heading:"Add New Device Type",saveButtonText:"Done",onSaveButtonClick:function(){e.saveEquipmentType()},disableSaveButton:!r},a.createElement("div",{className:"content"},a.createElement("div",{className:"dataCard"},a.createElement("div",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{style:{padding:"10px"},className:"row"},a.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"New Device Type:"),a.createElement("div",{className:"col-md-8 headingText"},a.createElement("input",{value:r,onChange:function(t){e.onchangeEquipmentType(t)},type:"text",className:"form-control"})," "))))))))))},t}(a.Component);t.a=h},1118:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(650)),r=n(116),o=n(678),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={intesisHome_Devices:[],filterString:""},n._fetchIntesisInfo=n._fetchIntesisInfo.bind(n),n}return l(t,e),t.prototype._fetchIntesisInfo=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return Object(r.a)(!0),[4,Object(o.v)(this.props.buildingName)];case 1:return(e=t.sent())&&e.devices&&this.setState({intesisHome_Devices:e.devices}),Object(r.a)(!1),[2]}})})},t.prototype.handleFilterStringChange=function(e){this.setState({filterString:e})},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.intesisHome_Devices,r=t.filterString;return a.createElement("div",{className:"col-md-1 col-sm-1 padding-5"},a.createElement("button",{className:"btn btn-xs btn-secondary btn-fill","data-toggle":"modal","data-target":"#IntesisHomeDeviceList",type:"button",title:"View available IntesisHome devices",onClick:function(){return s(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._fetchIntesisInfo()];case 1:return e.sent(),[2]}})})}},a.createElement("i",{className:"fa fa-list"})),a.createElement(i.a,{id:"IntesisHomeDeviceList",heading:"IntesisHome Device List",saveButtonText:"Close",disableSaveButton:!1},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-9"},a.createElement("div",{className:"col-md-3 padding-5"},a.createElement("label",null,"Filters: ")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{className:"form-control",type:"text",name:"filter",id:"filter",value:r,onChange:function(t){return e.handleFilterStringChange(t.target.value)},title:"Search filter..."}))),a.createElement("div",{className:"col-md-3 padding-5"},a.createElement("button",{className:"btn btn-sm btn-secondary btn-fill pull-right",type:"button",title:"Configure available IntesisHome devices to the API Credentials",onClick:function(){return s(e,void 0,void 0,function(){return c(this,function(e){return window.open("https://user.intesishome.com/oauth2/devices?scope=unused&state=asdflkjlaks&redirect_uri=google.com&client_id=my2wy-k2d5b-pmkgp-dbjr6-1ze2j"),[2]})})}},a.createElement("i",{className:"fa fas fa-tasks"})," Configure Devices"))),a.createElement("hr",null),n&&n.filter(function(e){return-1!=e.name.toLowerCase().indexOf(r.toLowerCase())}).map(function(e){return a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-5"},a.createElement("label",{htmlFor:""},"Device Name:"),a.createElement("br",null),a.createElement("b",null,e.name)),a.createElement("div",{className:"col-md-7"},a.createElement("label",{htmlFor:""},"Device ID:"),a.createElement("br",null),a.createElement("b",null,e.device_id)))})))},t}(a.Component);t.a=u},1119:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(650),o=n(10),l=n(823),s=n(654),c=n(656),u=n(665),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={DropdownModelObj:Object(),PanelEquipmentList:[],floorsList:[],locationList:[],networkDevice:n.props.networkDevice?n.props.networkDevice:Object(),networkListType:[]},n.getNetworkDeviceType=n.getNetworkDeviceType.bind(n),n.getPanelEquipmentList=n.getPanelEquipmentList.bind(n),n.getFloorsList=n.getFloorsList.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.getLocationsList=n.getLocationsList.bind(n),n.handleDeviceChange=n.handleDeviceChange.bind(n),n.handleNetworkType=n.handleNetworkType.bind(n),n.saveNetworkType=n.saveNetworkType.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this.getNetworkDeviceType()];case 1:return e.sent(),[4,this.getFloorsList()];case 2:return e.sent(),[4,this.getPanelEquipmentList()];case 3:return e.sent(),[2]}})})},t.prototype.componentWillReceiveProps=function(e){e&&e.networkDevice&&(e.networkDevice.floor&&this.state.locationList&&0==this.state.locationList.length&&this.getLocationsList(e.networkDevice.floor),this.setState({networkDevice:e.networkDevice}))},t.prototype.getNetworkDeviceType=function(){return m(this,void 0,void 0,function(){var e,t;return h(this,function(n){switch(n.label){case 0:return e=this.state.networkListType,[4,Object(l.c)()];case 1:return(t=n.sent())&&t.length>0&&(e=t.filter(function(e){return"Network Type"==Object(o.g)(e.type)}),this.setState({networkListType:e})),[2]}})})},t.prototype.getPanelEquipmentList=function(){return m(this,void 0,void 0,function(){var e,t;return h(this,function(n){switch(n.label){case 0:return this.props.buildingName?[4,Object(s.o)(this.props.buildingName)]:[3,2];case 1:e=n.sent(),t=e&&e.length>0&&e.map(function(e){return{value:Object(o.g)(e.ontology),label:Object(o.g)(e.rdfsLabel)}}),this.setState({PanelEquipmentList:t}),n.label=2;case 2:return[2]}})})},t.prototype.getFloorsList=function(){return m(this,void 0,void 0,function(){var e=this;return h(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,Object(u.f)(this.props.buildingName).then(function(t){e.setState({floorsList:t})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.getLocationsList=function(e){return m(this,void 0,void 0,function(){var t,n,a=this;return h(this,function(i){switch(i.label){case 0:return t=this.props.buildingName,n=this.state.locationList,""===e?[3,2]:[4,Object(c.d)(e,t).then(function(e){n=e,a.setState({locationList:n})})];case 1:return i.sent(),[3,3];case 2:n=[],this.setState({locationList:n}),i.label=3;case 3:return[2]}})})},t.prototype.handleFloorChange=function(e){return m(this,void 0,void 0,function(){var t;return h(this,function(n){switch(n.label){case 0:return(t=this.state.networkDevice).floor=e,e||(t.location=""),this.setState({networkDevice:t}),this.props.handleNetworkDeviceChange(t),[4,this.getLocationsList(e)];case 1:return n.sent(),[2]}})})},t.prototype.handleDeviceChange=function(e){var t=this.state.networkDevice;t[""+e.target.name]=e.target.value,this.setState({networkDevice:t}),this.props.handleNetworkDeviceChange(t)},t.prototype.handleNetworkType=function(e){var t=this.state.networkDevice;"Others"==e.target.value?(t.networkType="",document.getElementById("networkTypeDialog").click()):this.handleDeviceChange(e)},t.prototype.saveNetworkType=function(){return m(this,void 0,void 0,function(){var e,t,n=this;return h(this,function(a){switch(a.label){case 0:return e=this.state.DropdownModelObj,t=this.state.networkDevice.networkType,e.name=t,e.type="Network Type",[4,Object(l.b)(e,!1).then(function(){n.getNetworkDeviceType()}).catch(function(e){console.log(e)})];case 1:return a.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.isView,a=t.NetworkDevice_List,l=this.state,s=l.networkDevice,c=l.networkListType,u=l.PanelEquipmentList,d=l.floorsList,m=l.locationList;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row padding-10"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Device Name"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"name",name:"name",disabled:n,className:(s.name?"":"addFieldValidate")+" form-control",value:s.name,onChange:function(t){return e.handleDeviceChange(t)}}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"deviceID"},"Device ID"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"deviceID",disabled:!0,className:"form-control",value:s.deviceID,name:"deviceID",onChange:function(t){return e.handleDeviceChange(t)}}))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"pull-right padding-5"},i.a.createElement("label",{htmlFor:"deviceState"},"Device State"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("select",{className:"form-control",id:"deviceState",name:"deviceState",disabled:n,onChange:function(t){return e.handleDeviceChange(t)},value:s.deviceState?s.deviceState:""},i.a.createElement("option",{value:"Planned"},"Planned"),i.a.createElement("option",{value:"Ordered"},"Ordered"),i.a.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),i.a.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),i.a.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),i.a.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),i.a.createElement("option",{value:"Assembly"},"Assembly"),i.a.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),i.a.createElement("option",{value:"Kitting"},"Kitting"),i.a.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),i.a.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),i.a.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),i.a.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),i.a.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),i.a.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),i.a.createElement("option",{value:"Existing"},"Existing In Use"),i.a.createElement("option",{value:"Retired"},"Retired"),i.a.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),i.a.createElement("option",{value:"Sold"},"Sold"),i.a.createElement("option",{value:"DisposedOf"},"Disposed Of"),i.a.createElement("option",{value:"ErrorDeleted"},"Error Deleted"))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"modelNo"},"Model"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"modelNo",name:"modelNo",disabled:n,className:"form-control",value:s.modelNo,onChange:function(t){return e.handleDeviceChange(t)}}))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"pull-right padding-5"},i.a.createElement("label",{htmlFor:"ipAddress"},"IP Address"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"ipAddress",name:"ipAddress",disabled:n,className:(s.ipAddress?"":"addFieldValidate")+" form-control",value:s.ipAddress,onChange:function(t){return e.handleDeviceChange(t)}}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"networkType"},"Network Type"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:(s.networkType?"":"addFieldValidate")+" form-control",id:"networkType",disabled:n,name:"networkType",value:s.networkType,onChange:function(t){return e.handleNetworkType(t)}},i.a.createElement("option",{value:""},"Select Network Type"),c&&c.map(function(e,t){return i.a.createElement("option",{key:t,value:Object(o.g)(e.name)},Object(o.g)(e.name))}),i.a.createElement("option",{value:"Others"},"Others")))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"pull-right padding-5"},i.a.createElement("label",{htmlFor:"enclosure"},"Cabinet"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:"form-control",id:"enclosure",name:"enclosure",disabled:n,value:s.enclosure,onChange:function(t){return e.handleDeviceChange(t)}},i.a.createElement("option",{value:"",key:-2},"Select Cabinet Equipment"),u&&u.length>0&&u.map(function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.label," ")})))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"floor"},"Floor"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{id:"floor",className:(s.floor?"":"addFieldValidate")+" form-control",disabled:n,value:s.floor?s.floor:"",onChange:function(t){return e.handleFloorChange(t.target.value)}},i.a.createElement("option",{value:"",key:-2},"Select Floor"),d&&d.length>0&&d.map(function(e,t){return i.a.createElement("option",{value:Object(o.g)(e.ontology),key:t},Object(o.g)(e.rdfsLabel)," ")})))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"pull-right padding-5"},i.a.createElement("label",{htmlFor:"location"},"Space"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:(s.location?"":"addFieldValidate")+" form-control",id:"location",name:"location",disabled:n,value:s.location,onChange:function(t){return e.handleDeviceChange(t)}},i.a.createElement("option",{value:"",key:-2},"Select Space"),m.map(function(e,t){return i.a.createElement("option",{key:t,value:Object(o.g)(e.ontology)}," ",Object(o.g)(e.rdfsLabel)," ")})))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"networkdevice"},"Networking Device:"))),i.a.createElement("div",{className:"col-md-4 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:"form-control",id:"networkDevice",name:"networkDevice",value:s.networkDevice?s.networkDevice:"",disabled:n,onChange:function(t){return e.handleDeviceChange(t)}},i.a.createElement("option",{value:"",key:-2},"Select Network Device"),a.length>0&&a.map(function(e,t){return i.a.createElement("option",{key:t,value:Object(o.g)(e.ontology)},Object(o.g)(e.name))})))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"networkURL"},"Network URL:"))),i.a.createElement("div",{className:"col-md-4 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"networkURL",name:"networkURL",disabled:n,className:"form-control",value:s.networkURL,onChange:function(t){return e.handleDeviceChange(t)}})))))),i.a.createElement("button",{type:"button",id:"networkTypeDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#dialogNetworkType"}," ."),i.a.createElement(r.a,{id:"dialogNetworkType",heading:"New Network Type",saveButtonText:"Save",cancelButtonText:"Cancel",disableSaveButton:!!s.networkType,showCancelButton:!0,showSaveButton:!0,onSaveButtonClick:function(){e.saveNetworkType()}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("label",{htmlFor:"point"},"Name:"),i.a.createElement("br",null),i.a.createElement("input",{type:"text",className:"controls clearfix form-control",name:"networkType",placeholder:"Other Name",onChange:function(t){return e.handleDeviceChange(t)},value:s.networkType})))))},t}(i.a.Component);t.a=p},1120:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(10),o=n(670),l=n(654),s=n(656),c=n(678),u=n(665),d=n(660),m=n(769),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={PanelEquipmentList:[],floorsList:[],locationList:[],computingDevice:n.props.computingDevice?n.props.computingDevice:Object(),devicesList:[],buildings:[],computingDeviceList:[],filteredComputingDeviceList:[]},n.getPanelEquipmentList=n.getPanelEquipmentList.bind(n),n.getFloorsList=n.getFloorsList.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.getLocationsList=n.getLocationsList.bind(n),n.handleDeviceChange=n.handleDeviceChange.bind(n),n.fetchBuildings=n.fetchBuildings.bind(n),n.getDevicesList=n.getDevicesList.bind(n),n.handleRelatedDevices=n.handleRelatedDevices.bind(n),n.handleRelatedComputingDevices=n.handleRelatedComputingDevices.bind(n),n.handleBuildingChange=n.handleBuildingChange.bind(n),n.getComputingDevices=n.getComputingDevices.bind(n),n.filterComputingDevices=n.filterComputingDevices.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.fetchBuildings()];case 1:return e.sent(),[4,this.getComputingDevices()];case 2:return e.sent(),[4,this.getPanelEquipmentList()];case 3:return e.sent(),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return p(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return e&&e.computingDevice?e.computingDevice.building?(this.filterComputingDevices(e.computingDevice.building),this.state.devicesList&&0==this.state.devicesList.length?[4,this.getDevicesList(e.computingDevice.building)]:[3,2]):[3,4]:[3,5];case 1:t.sent(),t.label=2;case 2:return this.state.floorsList&&0==this.state.floorsList.length?[4,this.getFloorsList(e.computingDevice.building)]:[3,4];case 3:t.sent(),t.label=4;case 4:e.computingDevice.floor&&this.state.locationList&&0==this.state.locationList.length&&this.getLocationsList(e.computingDevice.floor),this.setState({computingDevice:e.computingDevice}),t.label=5;case 5:return[2]}})})},t.prototype.fetchBuildings=function(){return p(this,void 0,void 0,function(){var e=this;return f(this,function(t){switch(t.label){case 0:return[4,Object(o.d)().then(function(t){e.setState({buildings:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.getComputingDevices=function(){return p(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,Object(m.f)()];case 1:return e=t.sent(),this.setState({computingDeviceList:e}),[2]}})})},t.prototype.filterComputingDevices=function(e){return p(this,void 0,void 0,function(){var t,n,a,i,o;return f(this,function(l){if(t=this.state.computingDeviceList,n=[],e)for(a=t.filter(function(t){return Object(r.g)(t.building)==e}),i=0;i<a.length;i++)o=a[i],n.push({value:Object(r.g)(o.ontology),label:Object(r.g)(o.name)});else n=[];return this.setState({filteredComputingDeviceList:n}),[2]})})},t.prototype.getDevicesList=function(e){return p(this,void 0,void 0,function(){var t,n,a;return f(this,function(i){switch(i.label){case 0:return t=[],e?[4,Object(c.u)(e)]:[3,2];case 1:(n=i.sent())&&n.length>0&&(a=Object(),n.map(function(e){a={value:Object(r.g)(e.moncondevice),label:Object(r.g)(e.rdfsLabel)},t&&t.push(a)})),i.label=2;case 2:return this.setState({devicesList:t}),[2]}})})},t.prototype.getPanelEquipmentList=function(){return p(this,void 0,void 0,function(){var e,t;return f(this,function(n){switch(n.label){case 0:return this.props.buildingName?[4,Object(l.o)(this.props.buildingName)]:[3,2];case 1:e=n.sent(),t=e&&e.length>0&&e.map(function(e){return{value:Object(r.g)(e.ontology),label:Object(r.g)(e.rdfsLabel)}}),this.setState({PanelEquipmentList:t}),n.label=2;case 2:return[2]}})})},t.prototype.getFloorsList=function(e){return p(this,void 0,void 0,function(){var t=this;return f(this,function(n){switch(n.label){case 0:return e?[4,Object(u.f)(e).then(function(e){t.setState({floorsList:e})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.getLocationsList=function(e){return p(this,void 0,void 0,function(){var t,n,a=this;return f(this,function(i){switch(i.label){case 0:return t=this.props.buildingName,n=this.state.locationList,""===e?[3,2]:[4,Object(s.d)(e,t).then(function(e){n=e,a.setState({locationList:n})})];case 1:return i.sent(),[3,3];case 2:n=[],this.setState({locationList:n}),i.label=3;case 3:return[2]}})})},t.prototype.handleBuildingChange=function(e){var t=this,n=this.state.computingDevice;n.building=e,e||(n.floor="",n.space=""),this.setState({computingDevice:n},function(){t.getDevicesList(e),t.getFloorsList(e),t.filterComputingDevices(e)}),this.props.handleComputingDeviceChange(n)},t.prototype.handleFloorChange=function(e){return p(this,void 0,void 0,function(){var t;return f(this,function(n){switch(n.label){case 0:return(t=this.state.computingDevice).floor=e,e||(t.space=""),this.setState({computingDevice:t}),this.props.handleComputingDeviceChange(t),[4,this.getLocationsList(e)];case 1:return n.sent(),[2]}})})},t.prototype.handleDeviceChange=function(e){var t=this.state.computingDevice;t[""+e.target.name]=e.target.value,this.setState({computingDevice:t}),this.props.handleComputingDeviceChange(t)},t.prototype.handleRelatedDevices=function(e){var t=this.state.computingDevice;t.devices=e,this.setState({computingDevice:t}),this.props.handleComputingDeviceChange(t)},t.prototype.handleRelatedComputingDevices=function(e){var t=this.state.computingDevice;t.relatedComputingDevices=e,this.setState({computingDevice:t}),this.props.handleComputingDeviceChange(t)},t.prototype.render=function(){var e=this,t=this.props,n=t.isView,a=t.NetworkDevice_List,o=this.state,l=o.computingDevice,s=o.buildings,c=o.devicesList,u=o.PanelEquipmentList,m=o.floorsList,h=o.locationList,p=o.filteredComputingDeviceList;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row padding-10"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Device Name"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"name",name:"name",disabled:n,className:(l.name?"":"addFieldValidate")+" form-control",value:l.name,onChange:function(t){return e.handleDeviceChange(t)}}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"deviceID"},"Device ID"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"deviceID",disabled:!0,className:"form-control",value:l.deviceID,name:"deviceID",onChange:function(t){return e.handleDeviceChange(t)}}))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"deviceState"},"Device State"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("select",{className:(l.deviceState?"":"addFieldValidate")+" form-control",id:"deviceState",name:"deviceState",disabled:n,onChange:function(t){return e.handleDeviceChange(t)},value:l.deviceState?l.deviceState:""},i.a.createElement("option",{value:"Planned"},"Planned"),i.a.createElement("option",{value:"Ordered"},"Ordered"),i.a.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),i.a.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),i.a.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),i.a.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),i.a.createElement("option",{value:"Assembly"},"Assembly"),i.a.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),i.a.createElement("option",{value:"Kitting"},"Kitting"),i.a.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),i.a.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),i.a.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),i.a.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),i.a.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),i.a.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),i.a.createElement("option",{value:"Existing"},"Existing In Use"),i.a.createElement("option",{value:"Retired"},"Retired"),i.a.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),i.a.createElement("option",{value:"Sold"},"Sold"),i.a.createElement("option",{value:"DisposedOf"},"Disposed Of"),i.a.createElement("option",{value:"ErrorDeleted"},"Error Deleted"))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"controllerIpAddress"},"Controller IP Address"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{type:"text ",id:"controllerIpAddress",name:"controllerIpAddress",disabled:n,className:"form-control",value:l.controllerIpAddress,onChange:function(t){return e.handleDeviceChange(t)}}))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"enclosure"},"Cabinet"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:"form-control",id:"enclosure",name:"enclosure",disabled:n,value:l.enclosure,onChange:function(t){return e.handleDeviceChange(t)}},i.a.createElement("option",{value:"",key:-2},"Select Cabinet Equipment"),u&&u.length>0&&u.map(function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.label," ")})))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"building"},"Building"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:(l.building?"":"addFieldValidate")+" form-control",id:"building",disabled:n,name:"building",value:l.building,onChange:function(t){return e.handleBuildingChange(t.target.value)}},i.a.createElement("option",{value:""},"Select Building"),s&&s.map(function(e,t){return i.a.createElement("option",{key:t,value:Object(r.g)(e.building)},Object(r.g)(e.rdfsLabel))})))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"floor"},"Floor"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{id:"floor",className:(l.floor?"":"addFieldValidate")+" form-control",disabled:n,value:l.floor?l.floor:"",onChange:function(t){return e.handleFloorChange(t.target.value)}},i.a.createElement("option",{value:"",key:-2},"Select Floor"),m&&m.length>0&&m.map(function(e,t){return i.a.createElement("option",{value:Object(r.g)(e.ontology),key:t},Object(r.g)(e.rdfsLabel)," ")})))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"space"},"Space"))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:(l.space?"":"addFieldValidate")+" form-control",id:"space",name:"space",disabled:n,value:l.space,onChange:function(t){return e.handleDeviceChange(t)}},i.a.createElement("option",{value:"",key:-2},"Select Space"),h.map(function(e,t){return i.a.createElement("option",{key:t,value:Object(r.g)(e.ontology)}," ",Object(r.g)(e.rdfsLabel)," ")})))),i.a.createElement("div",{className:"col-md-2 col-sm-2"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"connectedDevices"},"Related Devices"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement(d.a,{isDisabled:n,closeMenuOnSelect:!1,isMulti:!0,value:l.devices,onChange:this.handleRelatedDevices,placeholder:"Select Devices",options:c}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"space"},"Related Computing Devices"))),i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement(d.a,{isDisabled:n,closeMenuOnSelect:!1,isMulti:!0,value:l.relatedComputingDevices,onChange:this.handleRelatedComputingDevices,placeholder:"Select Computing Devices",options:p}))))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-3 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"networkdevice"},"Networking Device:"))),i.a.createElement("div",{className:"col-md-4 col-sm-3"},i.a.createElement("div",{className:"form-group"},i.a.createElement("select",{className:"form-control",id:"networkDevice",name:"networkDevice",value:l.networkDevice?l.networkDevice:"",disabled:n,onChange:function(t){return e.handleDeviceChange(t)}},i.a.createElement("option",{value:"",key:-2},"Select Network Device"),a.length>0&&a.map(function(e,t){return i.a.createElement("option",{key:t,value:Object(r.g)(e.ontology)},Object(r.g)(e.name))}))))))))},t}(i.a.Component);t.a=g},1164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(783)),r=n(1484),o=n(678),l=n(116),s=n(701),c=n(658),u=n(10),d=n(31),m=n(653),h=n(23),p=n(1165),f=n(668),g=n(669),v=n(11),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},x=function(e){function t(t){var n=e.call(this,t)||this;return n.state={schedule:Object(),Moncon:Object(),intesisHome_Device:Object(),InsightInfo:Object(),building:!1,RelayBoardInfo:Object(),compressorADPDB:Object(),compressorTemperature:n.props.compressorTemperatureOrDefrostState?n.props.compressorTemperatureOrDefrostState:"",showLogs:!1},n.update_Schedule=n.update_Schedule.bind(n),n.saveSchedule=n.saveSchedule.bind(n),n.fetchSchedule=n.fetchSchedule.bind(n),n.resetSchedule=n.resetSchedule.bind(n),n._fetchRelayBoardInfo=n._fetchRelayBoardInfo.bind(n),n.fetchSolutionsSchedule=n.fetchSolutionsSchedule.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,l,s,u,m,h,p,f,g;return E(this,function(v){switch(v.label){case 0:return e=this.props,t=e.buildingName,n=e.InsightName,a=e.type,i=e.ControlName,r=e.isSolution,t&&a&&a.length>0?(l=!!(a&&a.length>0&&"Building"==a),s=Object(),[4,Object(c.t)(n,t)]):[3,10];case 1:return s=v.sent(),u=Object(),r?[4,this.fetchSolutionsSchedule()]:[3,3];case 2:return m=v.sent(),[3,5];case 3:return[4,this.fetchSchedule(l)];case 4:m=v.sent(),v.label=5;case 5:return u=m,h=s.monitoringControlDeviceType&&-1!=s.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),p=Object(),f=Object(),(g=localStorage.getItem(s.deviceID))&&g.length>0&&"undefined"!=g?h?(p=JSON.parse(g),[3,9]):[3,6]:[3,9];case 6:return s&&s.deviceName?[4,Object(o.B)(t,n).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})]:[3,8];case 7:return f=v.sent(),[3,9];case 8:f=JSON.parse(g),v.label=9;case 9:"CompressorControl"==i&&this.fetchADPValues(),this.setState({Moncon:s,schedule:u,InsightInfo:f,intesisHome_Device:p,building:l},function(){}),v.label=10;case 10:return[2]}})})},t.prototype.fetchThermostatMQTTData=function(e){return y(this,void 0,void 0,function(){var t,n,a;return E(this,function(i){switch(i.label){case 0:return t=Object(),[4,Object(o.F)(e,new Date,new Date,!0)];case 1:return(n=i.sent())&&n.length>0&&n[0]&&(a=n[0],t={activestage:a.activestage,availablemodes:a.availablemodes,away:a.away,cooltemp:a.cooltemp,cooltempmax:a.cooltempmax,cooltempmin:a.cooltempmin,dehum_setpoint:0,fan:a.fan,fanstate:a.fanstate,forceunocc:0,heattemp:a.heattemp,heattempmax:a.heattempmax,heattempmin:a.heattempmin,holiday:0,hum:0,hum_setpoint:0,insightName:this.props.InsightName,mode:a.mode,name:a.name,override:0,overridetime:0,schedule:a.schedule,schedulepart:a.schedulepart,setpointdelta:a.setpointdelta,spacetemp:a.spacetemp,state:a.state,tempunits:a.tempunits,thermostatControlStatus:"",timestamp:a.timestamp}),[2,t]}})})},t.prototype.componentWillReceiveProps=function(e){e.compressorTemperatureOrDefrostState&&this.setState({compressorTemperature:e.compressorTemperatureOrDefrostState})},t.prototype.fetchADPValues=function(){return y(this,void 0,void 0,function(){var e,t,n,a;return E(this,function(i){switch(i.label){case 0:return e=this.props,t=e.equipmentOntology,n=e.buildingName,[4,Object(o.o)(n,"",t)];case 1:return a=i.sent(),this.setState({compressorADPDB:a}),[2]}})})},t.prototype._fetchRelayBoardInfo=function(){return y(this,void 0,void 0,function(){var e,t;return E(this,function(n){switch(n.label){case 0:return e=this.state.Moncon,[4,Object(o.C)(e).then(function(t){if(!t||t&&t.error)return Object(d.a)("Error occurred while fetching relay board info."),Object();var n=JSON.stringify(t);return n=(n=n.replace(/'/g,'"')).replace(/^"(.*)"$/,"$1"),t=JSON.parse(n),localStorage.setItem(e.deviceID,JSON.stringify(t)),t}).catch(function(e){return Object()})];case 1:return t=n.sent(),this.setState({RelayBoardInfo:t}),[2]}})})},t.prototype.fetchSolutionsSchedule=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,l,s;return E(this,function(c){switch(c.label){case 0:return e=this.props,t=e.equipmentOntology,n=e.isDefrost,t&&t.length>0?(a=Object(),i=n?"Defrost":0==n?"Box":"",[4,Object(o.z)(t,"",i)]):[3,2];case 1:for(r=c.sent(),l=0;l<r.length;l++)s=r[l],a[Object(u.g)(s.day)]||(a[Object(u.g)(s.day)]=[]),a[Object(u.g)(s.day)].push({ontology:Object(u.g)(s.ontology),setPoint:Object(u.g)(s.setPoint),setRelayStatus:Object(u.g)(s.setStatusType),compressorScheduleType:Object(u.g)(s.compressorScheduleType),start:Object(u.g)(s.start)});return[2,a];case 2:return[2]}})})},t.prototype.fetchSchedule=function(e){return y(this,void 0,void 0,function(){var t,n,a,i,r,l,s;return E(this,function(c){switch(c.label){case 0:return t=this.props,n=t.buildingName,a=t.InsightName,(i=Object()).deviceName=a,[4,Object(o.t)(n,a,e)];case 1:for(r=c.sent(),l=0;l<r.length;l++)s=r[l],i[Object(u.g)(s.day)]||(i[Object(u.g)(s.day)]=[]),i[Object(u.g)(s.day)].push({ontology:Object(u.g)(s.ontology),setPoint:Object(u.g)(s.setPoint),setHeatPoint:Object(u.g)(s.setHeatPoint),setCoolPoint:Object(u.g)(s.setCoolPoint),setRelayStatus:Object(u.g)(s.setRelayStatus),setRelayName:Object(u.g)(s.setRelayName),start:Object(u.g)(s.start),compressorScheduleType:Object(u.g)(s.compressorScheduleType),refEquipment:Object(u.g)(s.refEquipment)});return[2,i]}})})},t.prototype.update_Schedule=function(e){this.setState({schedule:e})},t.prototype.saveSchedule=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,s,c,u,m,h,p,f,g,v,b,y,x,S;return E(this,function(E){switch(E.label){case 0:for(e=this.props,t=e.buildingName,n=e.ControlName,a=e.isSolution,i=e.equipmentOntology,r=e.solutionOntology,s=e.solutionEquipmentType,c=e.isDefrost,u=this.state,m=u.schedule,h=u.building,Object(l.a)(!0),p=Object.keys(m),f=0;f<p.length;f++)if(g=p[f],(v=g.toLowerCase())&&""!=v||m[g].splice(f,1),"monday"==v||"tuesday"==v||"wednesday"==v||"thursday"==v||"friday"==v||"saturday"==v||"sunday"==v)for(b=m[g],y=0;y<b.length;y++)(x=b[y]).setPoint||x.setCoolPoint&&x.setHeatPoint||x.setRelayStatus||x.setRelayName||x.start||b.splice(y,1);return m.monconType=n,this.setState({schedule:m}),a?(S=c?"Defrost":0==c?"Box":"",[4,Object(o.Y)(m,r,i,s,S)]):[3,2];case 1:return E.sent(),Object(d.b)("Schedule Saved successfully. "),[3,4];case 2:return[4,Object(o.S)(m,t,h).then(function(e){Object(l.a)(!1),Object(d.b)("Schedule updated successfully. ")}).catch(function(e){Object(l.a)(!1),console.log("error: ",e)})];case 3:E.sent(),E.label=4;case 4:return Object(l.a)(!1),[2]}})})},t.prototype.resetSchedule=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,l,s,c,u,m,h;return E(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.isSolution,a=e.equipmentOntology,i=e.isDefrost,r=this.state,l=r.schedule,s=r.building,Object(),n?(c=i?"Defrost":0==i?"Box":"",[4,Object(o.m)(a,c)]):[3,2];case 1:return p.sent(),Object(d.b)("Successfully Reset your Schedule"),[3,4];case 2:return[4,Object(o.Q)(l,t,s)];case 3:p.sent()?Object(d.b)("Successfully Reset your Schedule"):Object(d.a)("Error"),p.label=4;case 4:return u=l.monconType,m=l.deviceName,(h=Object()).deviceName=m,h.monconType=u,this.setState({schedule:h}),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.Moncon,o=t.schedule,l=t.InsightInfo,c=t.intesisHome_Device,u=t.building,d=t.compressorADPDB,b=t.compressorTemperature,y=t.showLogs,E=this.props,x=E.instance,S=E.buildingName,w=E.InsightName,N=E.ControlName,C=E.type,_=E.hideTabs,T=E.isDefrost,O=E.equipmentOntology,D=n&&n.monitoringControlDeviceType&&-1!=n.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),A=c&&c.services&&c.services["com.intesishome.setpoint-temp"]?c.services["com.intesishome.setpoint-temp"].value:0,L=c&&c.services&&c.services["com.intesishome.user-mode"]&&c.services&&c.services["com.intesishome.user-mode"].value,I=localStorage.getItem("hvacUNIT"),P=JSON.parse(v.a.getItem("user"));return y?a.createElement(f.a,{instance:x,buildingName:S,fromEntityList:!0,ontology:w,module:g.a.Assets,entityName:"InsightSchedule",onLogClose:function(){return e.setState({showLogs:!1})}}):a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12  col-sm-12 col-xs-12"},!u&&!_&&a.createElement(s.a,{InsightName:w,buildingName:S,instance:x,ControlName:N,type:C,isCompressorDefrost:T}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},P&&"1"==P.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),!u&&a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 tempCounter roomTemp",style:{height:"300px"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"header pull-left",style:{textAlign:"left"}},I&&a.createElement("h4",{className:"title"},a.createElement("strong",null,"HVAC:")," (",I,")"),a.createElement("h3",{className:"title"},"CompressorControl"!=N&&a.createElement("strong",null,n.rdfsLabel," ")),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Moncon Manufacturer:"),"\xa0 ","CompressorControl"==N?"ONIT":n.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Moncon Model:")," \xa0 ","CompressorControl"==N?"3B+":n.model),a.createElement("br",null),a.createElement("br",null))),a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"header"},!D&&l&&"CompressorControl"!=N&&a.createElement(a.Fragment,null,l.mode===i.c.HEAT&&a.createElement(a.Fragment,null,a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},Object(h.a)(l.heattemp).toFixed(2),"\xb0F")),l.mode===i.c.COOL&&a.createElement(a.Fragment,null,a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(h.a)(l.cooltemp).toFixed(2),"\xb0F")),(l.mode===i.c.AUTO||l.mode===i.c.OFF)&&a.createElement(a.Fragment,null,a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},Object(h.a)(l.heattemp).toFixed(2),"\xb0F"),a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(h.a)(l.cooltemp).toFixed(2),"\xb0F"))),D&&L&&"CompressorControl"!=N&&a.createElement(a.Fragment,null,a.createElement("div",null,"Mode:"," ",L==p.b.AUTO?"AUTO":L==p.b.COOL?"COOL":L==p.b.DRY?"DRY":L==p.b.FAN?"FAN":L==p.b.HEAT?"HEAT":"NONE"),a.createElement("div",{className:"counter"},Object(h.a)(A).toFixed(2),"\xb0F")),"CompressorControl"==N&&!T&&a.createElement(a.Fragment,null,a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},b," \xb0F")),"CompressorControl"==N&&T&&a.createElement(a.Fragment,null,a.createElement("div",{className:"counter"},b," State")))))),u&&a.createElement("div",{className:"col-md-8 col-sm-12 col-xs-12 tempCounter roomTemp",style:{height:"300px"}}),a.createElement("div",{className:"col-md-7 col-sm-12 col-xs-12 dataCard"},a.createElement("div",{className:"card hidden-sm hidden-xs"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"35px"}},"Day"),"RelayControl"==N&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"15px"}},"Set Relay"),"RelayControl"==N&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"30px"}},"Off/On"),"RelayControl"==N&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"45px"}},"Start"),"RelayControl"!=N&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"50px",textAlign:"center"}},"Set Point"),"RelayControl"!=N&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"50px",textAlign:"center"}},"Start"),a.createElement("div",{className:"col-md-2 headingText"},a.createElement("button",{className:"btn btn-primary btn-fill pull-right",style:{marginRight:"10px"},onClick:function(){document.getElementById("btnReset").click()}},"Reset Schedule")))),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Monday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Tuesday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Wednesday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Thursday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Friday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Saturday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement(r.a,{equipmentOntology:O,buildingName:S,schedule:o,day:"Sunday",update_Schedule:this.update_Schedule,ControlName:N,DeviceType:n.monitoringControlDeviceType,compressorADPDB:d,InsightInfo:l,isDefrost:T}),a.createElement("div",{className:"col-md-12"},a.createElement("button",{className:"btn btn-success btn-fill mr-4",style:{marginRight:"2px"},onClick:function(){e.saveSchedule()}},"Save Schedule"),"\xa0",a.createElement("button",{className:"btn btn-primary btn-fill",onClick:function(){document.getElementById("btnReset").click()}},"Reset Schedule"))),a.createElement("button",{id:"btnReset",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmResetDialog"},"."),a.createElement(m.a,{instance:"",id:"ConfirmResetDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to reset Schedule?",heading:"Confirm...",onConfirmButtonClick:function(){e.resetSchedule()}})))))))))},t}(a.Component);t.default=x},1165:function(e,t,n){"use strict";var a,i,r,o,l;n.d(t,"c",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u}),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(a||(a={})),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE"}(i||(i={})),function(e){e[e.NOTALARMING=0]="NOTALARMING",e[e.ALARMING=1]="ALARMING"}(r||(r={})),function(e){e[e.ENABLED=0]="ENABLED",e[e.DISABLED=1]="DISABLED"}(o||(o={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.OPEN=1]="OPEN"}(l||(l={}));var s,c={AUTO:"auto",HEAT:"heat",DRY:"dry",FAN:"fan",COOL:"cool"};!function(e){e[e.AUTO=0]="AUTO",e[e.LOW=1]="LOW",e[e.MID=2]="MID",e[e.HIGH=3]="HIGH",e[e.POWERFUL=4]="POWERFUL"}(s||(s={}));var u={AUTO:"auto",LOW:"position-one",MID:"position-two",HIGH:"position-three",POWERFUL:"position-four"}},1166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(701)),r=n(783),o=n(678),l=n(116),s=n(31),c=n(658),u=n(10),d=n(23),m=n(668),h=n(669),p=n(11),f=n(1065),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ADPData:[],spaceName:"",RelayADPData:Object(),compressorADP:Object(),showLogs:!1,ptacADP:Object()},n.handleChangeInputs=n.handleChangeInputs.bind(n),n.handleRelayChangeInputs=n.handleRelayChangeInputs.bind(n),n.SaveADP=n.SaveADP.bind(n),n._fetchADP=n._fetchADP.bind(n),n._fetchRelayADP=n._fetchRelayADP.bind(n),n.handleValueChange=n.handleValueChange.bind(n),n}return g(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n,a,i,r;return b(this,function(o){switch(o.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.ControlName,i=this.state.spaceName,t&&n?"IntesisControl"!=a&&"InsightControl"!=a?[3,2]:[4,Object(c.t)(t,n)]:[3,5];case 1:return r=o.sent(),i=r.location,this._fetchADP(t,i),this.setState({spaceName:i}),[3,5];case 2:return"RelayControl"!=a?[3,4]:[4,this._fetchRelayADP(n,t)];case 3:return o.sent(),[3,5];case 4:"CompressorControl"==a?this.fetchCompressorADP():"PTACControl"==a&&this.fetchPTACADP(),o.label=5;case 5:return[2]}})})},t.prototype._fetchADP=function(e,t){return v(this,void 0,void 0,function(){var n,a,i,l,s,c,d;return b(this,function(m){switch(m.label){case 0:return n=this.state.ADPData,n=[],e&&t?[4,Object(o.p)(e)]:[3,3];case 1:return a=m.sent(),[4,Object(o.A)(t)];case 2:if(i=m.sent(),a&&a.length>0&&i&&i.length>0){for(l=0;l<a.length;l++)s=Object(),c=a[l],d=i[l],s.ontology=Object(u.g)(c.ontology),s.season=Object(u.g)(c.season),s.occType=Object(u.g)(c.occType),s.defaultTargetTemp=Object(u.g)(c.defaultTargetTemp),s.fanSetting=Object(u.g)(c.fanSetting),s.warmLittleTemp=Object(u.g)(d.warmLittleTemp),s.warmLittleHowBad=Object(u.g)(d.warmLittleHowBad),s.warmLotTemp=Object(u.g)(d.warmLotTemp),s.warmLotHowBad=Object(u.g)(d.warmLotHowBad),s.warmHardLimitTemp=Object(u.g)(d.warmHardLimitTemp),s.coolLittleTemp=Object(u.g)(d.coolLittleTemp),s.coolLittleHowBad=Object(u.g)(d.coolLittleHowBad),s.coolLotTemp=Object(u.g)(d.coolLotTemp),s.coolLotHowBad=Object(u.g)(d.coolLotHowBad),s.coolHardLimitTemp=Object(u.g)(d.coolHardLimitTemp),n.push(s);this.setState({ADPData:n})}else this.setState({ADPData:r.a});m.label=3;case 3:return[2]}})})},t.prototype._fetchRelayADP=function(e,t){return v(this,void 0,void 0,function(){var n=this;return b(this,function(a){switch(a.label){case 0:return e&&t?[4,Object(o.b)(e,t).then(function(e){var a=Object();e[0]?(a.device=Object(u.g)(e[0].device),a.A1=Object(u.g)(e[0].A1),a.A2=Object(u.g)(e[0].A2),a.B1=Object(u.g)(e[0].B1),a.B2=Object(u.g)(e[0].B2),a.C1=Object(u.g)(e[0].C1),a.C2=Object(u.g)(e[0].C2),a.D1=Object(u.g)(e[0].D1),a.D2=Object(u.g)(e[0].D2),a.E1=Object(u.g)(e[0].E1),a.E2=Object(u.g)(e[0].E2),a.F1=Object(u.g)(e[0].F1),a.F2=Object(u.g)(e[0].F2),a.G1=Object(u.g)(e[0].G1),a.G2=Object(u.g)(e[0].G2)):(a.device=t,a.A1="0",a.A2="0",a.B1="1",a.B2="1",a.C1="0",a.C2="0",a.D1="1",a.D2="1",a.E1="1",a.E2="1",a.F1="0",a.F2="0",a.G1="1",a.G2="1"),n.setState({RelayADPData:a})})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.fetchCompressorADP=function(){return v(this,void 0,void 0,function(){var e,t,n,a,i,r;return b(this,function(l){switch(l.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.solutionOntology,i=this.state.compressorADP,[4,Object(o.o)(this.props.buildingName,"",t,a)];case 1:return r=l.sent(),i=r&&r.equipment?r:{ontology:Object(d.t)(12),BackTempWeight:30,BackTempActualWeight:50,FrontTempActualWeight:50,FrontTempWeight:40,HighTemp:0,LowTemp:0,MedianTemp:0,MinTimeBeforeRestart:0,SolidTempWeight:30,ThresholdAmps:0,ThresholdTemp:0,building:n,equipment:t,DeadBandMinutes:0,DeadBandTemp:1,solutionOntology:a},this.setState({compressorADP:i}),[2]}})})},t.prototype.fetchPTACADP=function(){return v(this,void 0,void 0,function(){var e,t,n,a,i,o;return b(this,function(l){switch(l.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.solutionOntology,i=this.state.ptacADP,[4,Object(f.c)(n,"",t,a)];case 1:return o=l.sent(),i=o&&o.equipment?o:{ontology:Object(d.t)(12),building:n,equipment:t,DeadBandMinutes:1,DeadBandTemp:1,MotinoDetectionE1:1,MotinoDetectionE2:1,solutionOntology:a,NoOfMotionTriggers:100,OccupancyDeadband:1,ADPSettings:r.a},this.setState({ptacADP:i,ADPData:i.ADPSettings}),[2]}})})},t.prototype.handleChangeInputs=function(e,t){var n=this.state.ADPData;n[t][e.target.name]=e.target.value?e.target.value:"0.0",this.setState({ADPData:n})},t.prototype.handleRelayChangeInputs=function(e){var t=this.state.RelayADPData;t[e.target.name]=e.target.value?e.target.value:"0",this.setState({RelayADPData:t})},t.prototype.handlePTACInputs=function(e){var t=this.state.ptacADP;t[e.target.name]=e.target.value?e.target.value:0,this.setState({ptacADP:t})},t.prototype.handleCompressorChangeInputs=function(e,t,n){var a=this.state.compressorADP,i=0;i=-1!=e.indexOf("Weight")||-1!=e.indexOf("Time")||-1!=e.indexOf("Min")||-1!=e.indexOf("Threshold")?1:.1;var r=n?t+i:t-i;r=parseFloat(r.toFixed(1)),a[e]=r,this.setState({compressorADP:a})},t.prototype.SaveADP=function(){return v(this,void 0,void 0,function(){var e,t,n,a,i,r,c,u,d,m;return b(this,function(h){switch(h.label){case 0:return e=this.state,t=e.ADPData,n=e.spaceName,a=e.RelayADPData,i=this.props,r=i.buildingName,c=i.InsightName,u=i.ControlName,Object(l.a)(!0),"RelayControl"!=u?[3,2]:(a.building=r,a.device=c,[4,Object(o.k)(a).then(function(e){e?Object(s.b)("Successfully Save"):Object(s.a)("Something Went Wrong")}).catch(function(e){console.log("error: ",e)})]);case 1:return h.sent(),[3,8];case 2:return"IntesisControl"!=u&&"InsightControl"!=u?[3,4]:[4,Object(o.i)(t,r,c,n).then(function(e){e?Object(s.b)("Successfully Save"):Object(s.a)("Something Went Wrong")}).catch(function(e){console.log("error: ",e)})];case 3:return h.sent(),this._fetchADP(c,n),[3,8];case 4:return"CompressorControl"!=u?[3,6]:((d=this.state.compressorADP).building=r,d.equipment=c,[4,Object(o.R)(d)]);case 5:return h.sent(),[3,8];case 6:return"PTACControl"!=u?[3,8]:((m=this.state.ptacADP).building=r,m.equipment=c,m.ADPSettings=t,[4,Object(f.h)(m)]);case 7:h.sent(),h.label=8;case 8:return Object(l.a)(!1),[2]}})})},t.prototype.handleValueChange=function(e){var t=this.state.compressorADP;t[""+e.target.name]=e.target.value?parseFloat(e.target.value):0,this.setState({compressorADP:t})},t.prototype.handleFieldValidation=function(e,t){var n=this.state.RelayADPData;"A1"==e&&n.A1&&t?parseInt(t)<0?n.A1="0":parseInt(t)>1e3&&(n.A1="1000"):"A2"==e&&n.A2&&t?parseInt(t)<0?n.A2="0":parseInt(t)>1e3&&(n.A2="1000"):"B1"==e&&n.B1&&t?parseInt(t)<1&&(n.B1="1"):"B2"==e&&n.B2&&t?parseInt(t)<1&&(n.B2="1"):"C1"==e&&n.C1&&t?parseInt(t)<0?n.C1="0":parseInt(t)>1e3&&(n.C1="1000"):"C2"==e&&n.C2&&t?parseInt(t)<0?n.C2="0":parseInt(t)>1e3&&(n.C2="1000"):"D1"==e&&n.D1&&t?parseInt(t)<1&&(n.D1="1"):"D2"==e&&n.D2&&t?parseInt(t)<1&&(n.D2="1"):"E1"==e&&n.E1&&t?parseInt(t)<1&&(n.E1="1"):"E2"==e&&n.E2&&t?parseInt(t)<1&&(n.E2="1"):"F1"==e&&n.F1&&t?parseInt(t)<0&&(n.F1="0"):"F2"==e&&n.F2&&t?parseInt(t)<0&&(n.F2="0"):"G1"==e&&n.G1&&t?parseInt(t)<1&&(n.G1="1"):"G2"==e&&n.G2&&t&&parseInt(t)<1&&(n.G2="1"),this.setState({RelayADPData:n})},t.prototype.render=function(){var e=this,t=this.props,n=t.InsightName,r=t.buildingName,o=t.instance,l=t.ControlName,s=t.type,c=t.hideTabs,u=this.state,d=u.ADPData,f=u.RelayADPData,g=u.compressorADP,v=u.ptacADP,b=u.showLogs,y=g.FrontTempWeight+g.SolidTempWeight+g.BackTempWeight!=100,E=JSON.parse(p.a.getItem("user"));return b?a.createElement(m.a,{instance:o,buildingName:r,fromEntityList:!0,ontology:n,module:h.a.Assets,entityName:"DeviceADP",onLogClose:function(){return e.setState({showLogs:!1})}}):a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},E&&"1"==E.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),!c&&a.createElement(i.a,{InsightName:n,ControlName:l,buildingName:r,instance:o,type:s}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:""},("IntesisControl"==l||"InsightControl"==l||"PTACControl"==l)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row cell_border hidden-sm hidden-xs",style:{padding:"0px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{padding:"0px 0px",height:"91px"}},a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"4%"}},"Season"),a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"10%"}},"Occ. Type"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"91px",paddingTop:"4%",paddingLeft:"4%"}},"Default Target F\xb0"),a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"10%"}},"Fan Setting")),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 cell_border",style:{height:"91px"}},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},"Too Warm")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A little")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A Lot")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"69px",paddingTop:"2%",paddingLeft:"3%"}},"Hard limit F\xb0"))))),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 cell_border",style:{height:"91px"}},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12  col-xsm-12"},"Too Cool")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A little")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A Lot")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6  col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6  col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-2 col-sm-2  col-xs-6  cell_border",style:{height:"69px",paddingTop:"2%",paddingLeft:"3%"}},"Hard limit F\xb0")))))),a.createElement("br",null),d&&d.map(function(t,n){return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12 "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Season"),t.season),a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Occ. Type")," ",t.occType),a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Default Target F\xb0"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"defaultTargetTemp",value:t.defaultTargetTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 trim-data"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Fan Setting"),a.createElement("div",{className:"form-group",style:{background:"PTACControl"==l?"lightgrey":"",margin:"0px"}},a.createElement("select",{className:"form-control form-control-adp",value:t.fanSetting,name:"fanSetting",disabled:"PTACControl"==l,onChange:function(t){e.handleChangeInputs(t,n)}},a.createElement("option",{value:""})))))),a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12",style:{width:"57%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Little Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLittleTemp",value:t.warmLittleTemp,disabled:"PTACControl"==l&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Little HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLittleHowBad",value:t.warmLittleHowBad,disabled:"PTACControl"==l&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Lot Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLotTemp",value:t.warmLotTemp,disabled:"PTACControl"==l&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12  col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Lot HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLotHowBad",value:t.warmLotHowBad,disabled:"PTACControl"==l&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 no-padding",style:{width:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Hard Limit Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmHardLimitTemp",value:t.warmHardLimitTemp,disabled:"PTACControl"==l&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-6 col-sm-12  col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Little Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLittleTemp",value:t.coolLittleTemp,disabled:"PTACControl"==l&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Little HowBad"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLittleHowBad",value:t.coolLittleHowBad,disabled:"PTACControl"==l&&("COOLING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Lot Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLotTemp",value:t.coolLotTemp,disabled:"PTACControl"==l&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Lot HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLotHowBad",value:t.coolLotHowBad,disabled:"PTACControl"==l&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-2 col-sm-12  col-xs-12 no-padding",style:{width:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Hard Limit Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolHardLimitTemp",value:t.coolHardLimitTemp,disabled:"PTACControl"==l&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})))))))})),"PTACControl"==l&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 pl-1"},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10"},a.createElement("h4",{className:"title"},"Occupancy Detection"),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"MotinoDetectionE1"},"Settings Variable Under Normal - E1 (min):"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"MotinoDetectionE1",className:"form-control",autoComplete:"off",name:"MotinoDetectionE1",value:v.MotinoDetectionE1,onChange:function(t){e.handlePTACInputs(t)}})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"MotinoDetectionE2"},"Settings Variable Under Optimize - E2 (min):"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"MotinoDetectionE2",className:"form-control",autoComplete:"off",name:"MotinoDetectionE2",value:v.MotinoDetectionE2,onChange:function(t){e.handlePTACInputs(t)}})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"OccupancyDeadband"},"Occupancy Deadband (min):"))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"OccupancyDeadband",className:"form-control",autoComplete:"off",name:"OccupancyDeadband",value:v.OccupancyDeadband,onChange:function(t){e.handlePTACInputs(t)}}))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group pull-right"},a.createElement("label",{htmlFor:"NoOfMotionTriggers"},"No. of Motion Triggers:"))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"NoOfMotionTriggers",className:"form-control",autoComplete:"off",name:"NoOfMotionTriggers",value:v.NoOfMotionTriggers,onChange:function(t){e.handlePTACInputs(t)}}))))))),a.createElement("div",{className:"col-md-6 pr-1"},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10"},a.createElement("h4",{className:"title"},"Dead Band Settings"),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"DeadBandTemp"},"Temperature (\xb0F):"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"DeadBandTemp",className:"form-control",autoComplete:"off",name:"DeadBandTemp",value:v.DeadBandTemp,onChange:function(t){e.handlePTACInputs(t)}})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"DeadBandMinutes"},"Starting Minutes:"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"DeadBandMinutes",className:"form-control",autoComplete:"off",name:"DeadBandMinutes",value:v.DeadBandMinutes,onChange:function(t){e.handlePTACInputs(t)}}))))))))),"RelayControl"==l&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row cell_border hidden-sm hidden-xs",style:{padding:"0px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 grid-header"},"Description"),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3 grid-header"},"Settings Variable Under Normal"),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3 grid-header"},"Settings Variable Under Optimize")),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance High Limit \u2013 0-1000 Lumens"),"Illuminance High Limit \u2013 0-1000 Lumens"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A1")," A1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"A1",onChange:this.handleRelayChangeInputs,value:f.A1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.A1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A2")," A2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"A2",onChange:this.handleRelayChangeInputs,value:f.A2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.A2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance High Limit Time Delay to initiate OFF - Sec "),"Illuminance High Limit Time Delay to initiate OFF - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B1")," B1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"B1",onChange:this.handleRelayChangeInputs,value:f.B1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.B1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B2")," B2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"B2",onChange:this.handleRelayChangeInputs,value:f.B2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.B2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance Low Limit \u2013 0-1000 Lumens"),"Illuminance Low Limit \u2013 0-1000 Lumens"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C1")," C1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"C1",onChange:this.handleRelayChangeInputs,value:f.C1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.C1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C2")," C2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"C2",onChange:this.handleRelayChangeInputs,value:f.C2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.C2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance Low Limit Time Delay to initiate ON - sec"),"Illuminance Low Limit Time Delay to initiate ON - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D1")," D1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"D1",onChange:this.handleRelayChangeInputs,value:f.D1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.D1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D2")," D2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"D2",onChange:this.handleRelayChangeInputs,value:f.D2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.D2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Motion Detection Time Delay to initiate light OFF"),"Motion Detection Time Delay to initiate light OFF"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E1")," E1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"E1",onChange:this.handleRelayChangeInputs,value:f.E1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.E1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E2")," E2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"E2",onChange:this.handleRelayChangeInputs,value:f.E2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.E2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Blue Tooth (BT) High Limit initiate On - Integer"),"Blue Tooth (BT) High Limit initiate On - Integer"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F1")," F1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"F1",onChange:this.handleRelayChangeInputs,value:f.F1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.F1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F2")," F2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"F2",onChange:this.handleRelayChangeInputs,value:f.F2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.F2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"BT Time Delay to shut off upon below high limit - sec"),"BT Time Delay to shut off upon below high limit - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G1")," G1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"G1",onChange:this.handleRelayChangeInputs,value:f.G1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.G1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G2")," G2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"G2",onChange:this.handleRelayChangeInputs,value:f.G2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.G2)}})))))),"CompressorControl"==l&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"}),a.createElement("div",{className:"col-md-6"},a.createElement("h4",{className:"center"},a.createElement("strong",null,"Temp Set"))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6 col-sm-12"},a.createElement("h5",{className:""},a.createElement("strong",null,"High Temperature"))),a.createElement("div",{className:"col-md-6 col-sm-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("HighTemp",g.HighTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(g.HighTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"HighTemp",name:"HighTemp",value:g.HighTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("HighTemp",g.HighTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Median Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MedianTemp",g.MedianTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(g.MedianTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"MedianTemp",name:"MedianTemp",value:g.MedianTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MedianTemp",g.MedianTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Low Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("LowTemp",g.LowTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(g.LowTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"LowTemp",name:"LowTemp",value:g.LowTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("LowTemp",g.LowTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("DeadBandTemp",g.DeadBandTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(null!=g.DeadBandTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"DeadBandTemp",name:"DeadBandTemp",value:g.DeadBandTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("DeadBandTemp",g.DeadBandTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Minutes"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("DeadBandMinutes",g.DeadBandMinutes,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.DeadBandMinutes," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("DeadBandMinutes",g.DeadBandMinutes,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("div",{style:{color:"grey"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Min Time Before Restart"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MinTimeBeforeRestart",g.MinTimeBeforeRestart,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.MinTimeBeforeRestart," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MinTimeBeforeRestart",g.MinTimeBeforeRestart,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Threshold Amps before evap fan forced on"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("ThresholdAmps",g.ThresholdAmps,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.ThresholdAmps," amps"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("ThresholdAmps",g.ThresholdAmps,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Threshold temp before evap fan turns on above/below control set point"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("ThresholdTemp",g.ThresholdTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.ThresholdTemp," deg"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("ThresholdTemp",g.ThresholdTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("br",null))))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"}),a.createElement("div",{className:"col-md-7"},a.createElement("h4",{className:"center"},a.createElement("strong",null,"Temp Sensor"))),a.createElement("div",{className:"col-md-5"}),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Weights"))),a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Actual Weights")))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Front Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("FrontTempWeight",g.FrontTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.FrontTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("FrontTempWeight",g.FrontTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("FrontTempActualWeight",g.FrontTempActualWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.FrontTempActualWeight))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("FrontTempActualWeight",g.FrontTempActualWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Back Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("BackTempWeight",g.BackTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.BackTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("BackTempWeight",g.BackTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("BackTempActualWeight",g.BackTempActualWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.BackTempActualWeight))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("BackTempActualWeight",g.BackTempActualWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Solid Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("SolidTempWeight",g.SolidTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.SolidTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("SolidTempWeight",g.SolidTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null)))))))),y&&a.createElement("div",{className:"row",style:{marginTop:10,marginLeft:5}},a.createElement("div",{className:"col-md-6"},a.createElement("p",{className:"center",style:{color:"red",fontSize:13}},"* The sum of weights should be 100")))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("button",{className:"btn btn-success pull-left",disabled:y&&"CompressorControl"==l,onClick:function(){e.SaveADP()}},"Save ADP"))),a.createElement("br",null),"  ",a.createElement("br",null)))))))))},t}(a.Component);t.default=y},1298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(2)),o=s(n(4)),l=n(54);function s(e){return e&&e.__esModule?e:{default:e}}var c=void 0,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),i(t,[{key:"componentDidMount",value:function(){c=n(1488),this.updateChart(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.updateChart(e)}},{key:"componentWillUnmount",value:function(){this.destroyChart()}},{key:"destroyChart",value:function(){try{this.chart=this.chart.destroy()}catch(e){throw new Error("Internal C3 error",e)}}},{key:"generateChart",value:function(e,t){var n=a({bindto:e},t);return c.generate(n)}},{key:"loadNewData",value:function(e){this.chart.load(e)}},{key:"unloadData",value:function(){this.chart.unload()}},{key:"updateChart",value:function(e){this.chart||(this.chart=this.generateChart((0,l.findDOMNode)(this),e)),e.unloadBeforeLoad&&this.unloadData(),this.loadNewData(e.data)}},{key:"render",value:function(){var e=this.props.className?" "+this.props.className:"",t=this.props.style?this.props.style:{};return r.default.createElement("div",{className:e,style:t})}}],[{key:"displayName",get:function(){return"C3Chart"}},{key:"propTypes",get:function(){return{data:o.default.object.isRequired,title:o.default.object,size:o.default.object,padding:o.default.object,color:o.default.object,interaction:o.default.object,transition:o.default.object,oninit:o.default.func,onrendered:o.default.func,onmouseover:o.default.func,onmouseout:o.default.func,onresize:o.default.func,onresized:o.default.func,axis:o.default.object,grid:o.default.object,regions:o.default.array,legend:o.default.object,tooltip:o.default.object,subchart:o.default.object,zoom:o.default.object,point:o.default.object,line:o.default.object,area:o.default.object,bar:o.default.object,pie:o.default.object,donut:o.default.object,gauge:o.default.object,className:o.default.string,style:o.default.object,unloadBeforeLoad:o.default.bool}}}]),t}();t.default=u},1462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(2),r=(n.n(i),n(759)),o=n(10),l=n(1256),s=n(1393),c=n(1051),u=n(761),d=n(654),m=n(667),h=n(116),p=n(23),f=n(11),g=n(779),v=n(650),b=n(1057),y=n(696),E=n(658),x=n(680),S=n(769),w=n(824),N=n(846),C=n(1262),_=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),T=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},O=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},D=function(e){function t(t){var n=e.call(this,t)||this;return n.state={equipment:Object(),equipmentInformation:r.j,componentInformation:Object(),plugLoadModel:r.m,heatingInformation:r.k,lightingInformation:r.l,lampTypes:[],equipmentSweeps:[],selectedComponent:Object(),selectedInventory:Object(),showMatterportDialog:!0,relatedEquipmentDevice:[],relatedComputingDevices:[],relatedNetworkDevices:[],relatedPoints:[],openComponentDetails:!1,invent:[],organizeLogs:[],inventory:[],selectedAssetInventoryObj:Object(),isShowModelDialog:!1,selectedModelAsset:"",inventoryLightingInformation:[]},a=n,n.fetchLightingInfo=n.fetchLightingInfo.bind(n),n.fetchPlugLoad=n.fetchPlugLoad.bind(n),n.fetchComponent=n.fetchComponent.bind(n),n.fetchEquipment=n.fetchEquipment.bind(n),n.onDialogCancelButton=n.onDialogCancelButton.bind(n),n.fetchRelatedDevices=n.fetchRelatedDevices.bind(n),n.fetchEnclosureDevices=n.fetchEnclosureDevices.bind(n),n.fetchPoints=n.fetchPoints.bind(n),n.fetchInventoryStateLogs=n.fetchInventoryStateLogs.bind(n),n}return _(t,e),t.prototype.componentDidMount=function(){return T(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return this.props.buildingName&&this.props.equipmentName?(Object(h.a)(!0),[4,this.fetchEquipment(this.props.equipmentName,this.props.buildingName)]):[3,10];case 1:return e.sent(),this.props.showEquipmentInfoOnly?[3,7]:[4,this.fetchComponent(this.props.equipmentName)];case 2:return e.sent(),[4,this.fetchRelatedDevices(this.props.equipmentName)];case 3:return e.sent(),[4,this.fetchEnclosureDevices(this.props.equipmentName)];case 4:return e.sent(),[4,this.fetchPoints()];case 5:return e.sent(),[4,this.fetchInventoryStateLogs()];case 6:e.sent(),e.label=7;case 7:return[4,this.fetchPowerSource(this.props.equipmentName,this.props.buildingName)];case 8:return e.sent(),[4,this.fetchInventoriesLightingInfo(this.props.buildingName)];case 9:e.sent(),Object(h.a)(!1),e.label=10;case 10:return[2]}})})},t.prototype.fetchInventoriesLightingInfo=function(e){return T(this,void 0,void 0,function(){var t,n,a,i,r,l;return O(this,function(s){switch(s.label){case 0:t=this.state,n=t.inventory,a=t.equipment,i=this.state.inventoryLightingInformation,i=[],r=function(t){var r,l;return O(this,function(s){switch(s.label){case 0:return r=n[t],(l=Object()).fixtureQuantity="1",l.fixtureName=Object(p.t)(12),l.fixtureType=a.subclassType,[4,Object(d.r)(e,r.ontology).then(function(e){if(e&&e.length>0){var t=e[0];l.ballast=Object(o.g)(t.ballast),l.color=Object(o.g)(t.color),l.control=Object(o.g)(t.control),l.description=Object(o.g)(t.description),l.fixtureName=Object(o.g)(t.fixture),l.lampType=Object(o.g)(t.lampType),l.lensType=Object(o.g)(t.lensType),l.numberOfLampFixtures=Object(o.g)(t.numberOfLampFixtures),l.switchType=Object(o.g)(t.switchType),l.wattsPerLamp=Object(o.g)(t.wattsPerLamp),l.dimmableToday=Object(o.g)(t.dimmableToday),l.translucentCover=Object(o.g)(t.translucentCover),l.lightLocation=Object(o.g)(t.lightLocation),l.existingFixtureWattage=Object(o.g)(t.existingFixtureWattage),l.fixtureHeight=Object(o.g)(t.fixtureHeight),l.operatingSchedule=Object(o.g)(t.operatingSchedule),l.operatingHourPerYear=Object(o.g)(t.operatingHourPerYear)}}).catch(function(e){return e})];case 1:return s.sent(),i.push.apply(i,[l]),[2]}})},l=0,s.label=1;case 1:return l<n.length?[5,r(l)]:[3,4];case 2:s.sent(),s.label=3;case 3:return l++,[3,1];case 4:return this.setState({inventoryLightingInformation:i}),[2]}})})},t.prototype.fetchInventoryStateLogs=function(){return T(this,void 0,void 0,function(){var e,t,n;return O(this,function(a){switch(a.label){case 0:return Object(h.a)(!0),e=this.props.assetType,t=this.state.inventory,n=[],this.props.equipmentName?[4,Object(N.c)("",this.props.equipmentName)]:[3,2];case 1:return n=a.sent(),[3,4];case 2:return[4,Object(N.c)("","",e)];case 3:n=a.sent(),a.label=4;case 4:return t=n,this.setState({inventory:t}),Object(h.a)(!1),[2]}})})},t.prototype.fetchEquipment=function(e,t){return T(this,void 0,void 0,function(){var n=this;return O(this,function(i){switch(i.label){case 0:return[4,Object(d.p)(t,e).then(function(i){if(i&&i.length>0){var r=i[0],l=n.state.equipment,s=n.state.equipmentInformation;if(l.equipmentName=Object(o.g)(r.equip),l.rdfsLabel=Object(o.g)(r.rdfsLabel),l.equipmentType=Object(o.g)(r.type),l.subclassType=Object(o.g)(r.subtype),l.floor=Object(o.g)(r.floor),l.floorRdfsLabel=Object(o.g)(r.floorRdfsLabel),l.location=Object(o.g)(r.location),l.locationRdfsLabel=Object(o.g)(r.locationRdfsLabel),l.locationDescription=Object(o.g)(r.locationDescription),l.manufacturer=Object(o.g)(r.manufacturer),l.userType=Object(o.g)(r.userType),l.manufacturerDate=r.manufacturerDate?new Date(Object(o.g)(r.manufacturerDate)).toLocaleString():"",l.lastInspectionDate=r.lastInspectionDate?new Date(Object(o.g)(r.lastInspectionDate)).toLocaleString():"",l.lastServiceDate=r.lastServiceDate?new Date(Object(o.g)(r.lastServiceDate)).toLocaleString():"",l.lastRechargeDate=r.lastRechargeDate?new Date(Object(o.g)(r.lastRechargeDate)).toLocaleString():"",l.nextInspectionDate=r.nextInspectionDate?new Date(Object(o.g)(r.nextInspectionDate)).toLocaleString():"",l.model=Object(o.g)(r.model),l.serial=Object(o.g)(r.serial),l.uploadedby=Object(o.g)(r.uploadedby),l.uploadedtime=Object(o.g)(r.uploadedtime),l.virtualBIM=Object(o.g)(r.virtualBIM),l.cadBIM=Object(o.g)(r.cadBIM),l.sweep=Object(o.g)(r.sweep),l.capacity=Object(o.g)(r.capacity),l.refrigerantType=Object(o.g)(r.refrigerantType),l.units=Object(o.g)(r.units),l.coilType=Object(o.g)(r.coilType),l.inputCapacity=Object(o.g)(r.inputCapacity),l.inputUnits=Object(o.g)(r.inputUnits),l.outputCapacity=Object(o.g)(r.outputCapacity),l.outputUnits=Object(o.g)(r.outputUnits),l.sourceName=Object(o.g)(r.sourceName),l.powerSource=Object(o.g)(r.powerSource),l.profileFileName=Object(o.g)(r.profileFileName).split(","),l.panelID=Object(o.g)(r.panelID),l.enclosure=Object(p.o)(Object(o.g)(r.enclosure)),l.cableLength=Object(o.g)(r.cableLength),l.cableColor=Object(o.g)(r.cableColor),l.cableUnit=Object(o.g)(r.cableUnit),l.installEquipmentDate=r.installEquipmentDate?new Date(Object(o.g)(r.installEquipmentDate)).toLocaleString():"",l.age=parseInt(Object(o.g)(r.age)),l.age&&(l.ageMonth=Math.trunc(l.age%12),l.ageYear=Math.trunc(l.age/12)),l.notes=Object(o.g)(r.notes),l.sourceName=Object(o.g)(r.sourceName),l.rdfsLabelSource=Object(o.g)(r.rdfsLabelSource),l.powerSource=Object(o.g)(r.powerSource),l.profileFileName=Object(o.g)(r.profileFileName).split(","),l.panelID=Object(o.g)(r.panelID),l.equipmentState=Object(o.g)(r.equipmentState),s.capacity=Object(o.g)(r.capacity),s.refrigerantType=Object(o.g)(r.refrigerantType),s.units=Object(o.g)(r.units),s.notes=Object(o.g)(r.notes),localStorage.setItem("spaceOntology",l.location),localStorage.setItem("equipmentType",l.equipmentType),e&&l.rdfsLabel&&Object(p.E)(e,l.rdfsLabel),l.sweep){var c=[],u=Object();u.uuid=l.sweep,c.push(u),n.setState({equipmentSweeps:c})}a.setState({equipment:l,equipmentInformation:s},function(){return T(n,void 0,void 0,function(){return O(this,function(n){switch(n.label){case 0:return"Lighting"!==l.equipmentType?[3,2]:[4,a.fetchLightingInfo(e,t)];case 1:return n.sent(),[3,6];case 2:return"PlugLoad"!==l.subclassType?[3,4]:[4,a.fetchPlugLoad(e,t)];case 3:return n.sent(),[3,6];case 4:return[4,a.fetchComponent(e)];case 5:n.sent(),n.label=6;case 6:return[2]}})})})}}).catch(function(e){return e})];case 1:return i.sent(),[2]}})})},t.prototype.fetchPoints=function(){return T(this,void 0,void 0,function(){var e,t,n,a;return O(this,function(i){switch(i.label){case 0:return e=this.props,t=e.buildingName,n=e.equipmentName,a=[],[4,Object(x.j)(t,null,n)];case 1:return a=i.sent(),this.setState({relatedPoints:a}),[2]}})})},t.prototype.fetchPowerSource=function(e,t){return T(this,void 0,void 0,function(){var n=this;return O(this,function(i){return Object(d.b)(t,e).then(function(e){if(e&&e.length>0){var t=n.state.equipment;e.map(function(e,n){switch(Object(o.g)(e.sequence)){case"1":t.breaker1=Object(o.g)(e.breaker).replace("breaker","");break;case"2":t.breaker2=Object(o.g)(e.breaker).replace("breaker","");break;case"3":t.breaker3=Object(o.g)(e.breaker).replace("breaker","")}}),a.setState({equipment:t})}}).catch(function(e){return e}),[2]})})},t.prototype.fetchLightingInfo=function(e,t){return T(this,void 0,void 0,function(){var n,i=this;return O(this,function(r){switch(r.label){case 0:return n={fixtureName:"",fixtureQuantity:"",fixtureType:"",ballast:"",lensType:"",switchType:"",control:"",lampType:"",color:"",wattsPerLamp:"",numberOfLampFixtures:"",description:""},[4,Object(d.r)(t,e).then(function(e){var t=i.state.lightingInformation;if(e&&e.length>0){var r=e[0];t.ballast=Object(o.g)(r.ballast),t.color=Object(o.g)(r.color),t.control=Object(o.g)(r.control),t.description=Object(o.g)(r.description),t.fixtureName=Object(o.g)(r.fixture),t.fixtureQuantity=Object(o.g)(r.fixtureQuantity),t.fixtureType=Object(o.g)(r.fixtureType),t.lampType=Object(o.g)(r.lampType),t.lensType=Object(o.g)(r.lensType),t.numberOfLampFixtures=Object(o.g)(r.numberOfLampFixtures),t.switchType=Object(o.g)(r.switchType),t.wattsPerLamp=Object(o.g)(r.wattsPerLamp),t.dimmableToday=Object(o.g)(r.dimmableToday),t.translucentCover=Object(o.g)(r.translucentCover),t.lightLocation=Object(o.g)(r.lightLocation),t.existingFixtureWattage=Object(o.g)(r.existingFixtureWattage),t.fixtureHeight=Object(o.g)(r.fixtureHeight),t.operatingSchedule=Object(o.g)(r.operatingSchedule),t.operatingHourPerYear=Object(o.g)(r.operatingHourPerYear);var l=a.state.equipment,s=c.a[l.subclassType]?c.a[l.subclassType]:[];a.setState({lightingInformation:t,lampTypes:s})}else a.setState({lightingInformation:n})}).catch(function(e){return e})];case 1:return[2,r.sent()]}})})},t.prototype.fetchPlugLoad=function(e,t){return T(this,void 0,void 0,function(){var n=this;return O(this,function(i){return Object(d.a)(t,e).then(function(e){var t=n.state.plugLoadModel;if(e&&e.length>0){var i=e[0];t.ontology=Object(o.g)(i.ontology),t.rdfsLabel=Object(o.g)(i.rdfsLabel),t.amps=Object(o.g)(i.amps),t.volts=Object(o.g)(i.volts),t.notes=Object(o.g)(i.notes),t.plugLoadType=Object(o.g)(i.plugLoadType),t.receptecale=Object(o.g)(i.receptecale),a.setState({plugLoadModel:t})}else a.setState({plugLoadModel:r.m})}).catch(function(e){return e}),[2]})})},t.prototype.fetchComponent=function(e){return T(this,void 0,void 0,function(){var t=this;return O(this,function(n){return Object(d.n)(this.props.buildingName,e).then(function(e){return T(t,void 0,void 0,function(){var t,n;return O(this,function(i){switch(i.label){case 0:return t=this.state.equipmentInformation,e&&e.length>0?(n=[],[4,e.map(function(e){var t={ampere:Object(o.g)(e.ampere),location:Object(o.g)(e.location),rdfsLabelLocation:Object(o.g)(e.rdfsLabelLocation),profileLink:Object(o.g)(e.profile),name:Object(o.g)(e.name),rdfsLabel:Object(o.g)(e.rdfsLabel),phase:Object(o.g)(e.phase),volts:Object(o.g)(e.volts),quantity:Object(o.g)(e.quantity),description:Object(o.g)(e.description),notes:Object(o.g)(e.notes),componentType:Object(o.g)(e.type),userType:Object(o.g)(e.userType),manufacturer:Object(o.g)(e.manufacturer),manufactureDate:Object(o.g)(e.manufactureDate),lastInspectionDate:Object(o.g)(e.lastInspectionDate),lastServiceDate:Object(o.g)(e.lastServiceDate),lastRechargeDate:Object(o.g)(e.lastRechargeDate),nextInspectionDate:Object(o.g)(e.nextInspectionDate),model:Object(o.g)(e.model),inputCapacity:Object(o.g)(e.inputCapacity),inputCapacityUnits:Object(o.g)(e.inputCapacityUnits),outputCapacity:Object(o.g)(e.outputCapacity),outputCapacityUnits:Object(o.g)(e.outputCapacityUnits),componentFileName:Object(o.g)(e.componentFileName).split(","),enclosure:Object(o.g)(e.enclosure)};n.push(t)})]):[3,2];case 1:return i.sent(),t.components=n,a.setState({componentInformation:t}),[3,3];case 2:t.components=[],a.setState({componentInformation:t}),i.label=3;case 3:return[2]}})})}).catch(function(e){return e}),[2]})})},t.prototype.fetchRelatedDevices=function(e){return T(this,void 0,void 0,function(){var t=this;return O(this,function(n){switch(n.label){case 0:return[4,Object(d.d)(this.props.buildingName,e).then(function(e){return T(t,void 0,void 0,function(){var t,n,a,i;return O(this,function(r){switch(r.label){case 0:if(t=[],!(e&&e.length>0))return[3,4];n=0,r.label=1;case 1:return n<e.length?(a=e[n],[4,Object(E.q)(a)]):[3,4];case 2:i=r.sent(),t.push(i),r.label=3;case 3:return n++,[3,1];case 4:return this.setState({relatedEquipmentDevice:t}),[2]}})})}).catch(function(e){return e})];case 1:return n.sent(),[2]}})})},t.prototype.fetchEnclosureDevices=function(e){return T(this,void 0,void 0,function(){var t,n=this;return O(this,function(a){switch(a.label){case 0:return t=this.props.buildingName,[4,Object(S.a)(t,e).then(function(e){return T(n,void 0,void 0,function(){var t;return O(this,function(n){switch(n.label){case 0:return t=[],[4,Object(S.d)(e)];case 1:return t=n.sent(),this.setState({relatedComputingDevices:t}),[2]}})})})];case 1:return a.sent(),[4,Object(w.b)(t,e).then(function(e){return T(n,void 0,void 0,function(){var t;return O(this,function(n){switch(n.label){case 0:return t=[],[4,Object(w.e)(e)];case 1:return t=n.sent(),this.setState({relatedNetworkDevices:t}),[2]}})})})];case 2:return a.sent(),[4,Object(E.g)(t,e).then(function(e){return T(n,void 0,void 0,function(){var t,n,a,i;return O(this,function(r){switch(r.label){case 0:if(t=this.state.relatedEquipmentDevice,!(e&&e.length>0))return[3,4];n=0,r.label=1;case 1:return n<e.length?(a=e[n],[4,Object(E.q)(a)]):[3,4];case 2:i=r.sent(),t.push(i),r.label=3;case 3:return n++,[3,1];case 4:return this.setState({relatedEquipmentDevice:t}),[2]}})})})];case 3:return a.sent(),[2]}})})},t.prototype.onDialogCancelButton=function(e){this.setState({showMatterportDialog:e})},t.prototype.setCollapseIcon=function(e){var t=e.currentTarget.children[0].className;e.currentTarget.children[0].className="fa fa-plus"==t?"fa fa-minus":"fa fa-plus"},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,a=t.buildingName,r=t.equipmentName,d=t.showEquipmentInfoOnly,h=this.state,E=h.componentInformation,x=h.equipment,S=h.equipmentInformation,w=h.lightingInformation,N=h.plugLoadModel,_=h.lampTypes,T=h.equipmentSweeps,O=h.selectedComponent,D=h.showMatterportDialog,A=h.relatedEquipmentDevice,L=h.relatedPoints,I=h.openComponentDetails,P=h.relatedComputingDevices,k=h.relatedNetworkDevices,j=h.inventory,M=h.selectedAssetInventoryObj,R=h.isShowModelDialog,F=h.selectedModelAsset,B=h.inventoryLightingInformation,V=x.equipmentType,G=x.subclassType,H=x.profileFileName,z=x.ageMonth,q=x.ageYear,W=x.virtualBIM,U=x.floor,X=x.location,Y=JSON.parse(f.a.getItem("user")),Q=Object(m.b)(Y,"info-equip","write"),J=!(T&&T.length>0)&&(W&&W.includes("camera_position"));return i.createElement(i.Fragment,null,i.createElement("div",{className:"container-fluid"},!d&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(u.a,{instance:n,buildingName:a,tabName:"Equip",itemName:r,showComponentButton:!0,showAuditTypes:!0,showBIMButtons:!1}),"\xa0",Q&&i.createElement("button",{className:"btn-sm btn-success btn-fill pull-right",onClick:function(e){setTimeout(function(){window.location.hash=n+"/"+a+"/EditEquipment/"+r},200)}},i.createElement("i",{className:"fa fa-edit"})," Edit "))),i.createElement("br",null)),i.createElement("div",{className:"card"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("h3",null," ",x.rdfsLabel," Details"),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("label",null,"Floor"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.floorRdfsLabel}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Space"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.locationRdfsLabel}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Location Description"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.locationDescription})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Type"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.equipmentType&&x.equipmentType.replace(new RegExp("MiscAndProcess","g"),"Misc & Process")}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("label",null,"Source name/Descrp"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.rdfsLabelSource}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Sub Class"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.subclassType})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Cabinet / Panel"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.enclosure}))),x.subclassType&&"cable"==x.subclassType.toLocaleLowerCase()&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2 col-sm-4"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Length"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.cableLength}))),i.createElement("div",{className:"col-md-1 col-sm-2"},i.createElement("div",{className:"form-group "},i.createElement("label",{style:{marginBottom:"15px"}}),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.cableUnit}))),i.createElement("div",{className:"col-md-2 col-sm-4"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Color"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.cableColor}))))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Power Source"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.powerSource}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Panel ID"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.panelID}))),i.createElement("div",{className:"col-md-3"},W&&i.createElement(i.Fragment,null," ",i.createElement("div",{className:"form-group margin-top"},i.createElement("br",null),i.createElement("button",{className:"btn btn-success",title:W,onClick:function(){T&&T.length>0?e.setState({showMatterportDialog:!0},function(){document.getElementById("btnVirtualBIMDialog").click()}):document.getElementById("btnNoStepsFound").click()}},"Virtual BIM")),i.createElement("button",{id:"btnVirtualBIMDialog",className:"hidden","data-toggle":"modal","data-target":"#virtualBIMDialog",title:"Add"},". "),D&&i.createElement(g.a,{id:"virtualBIMDialog",heading:"Virtual BIM Equipment View",showSaveButton:!1,sweeps:T,bimURL:W,isViewForm:!0,addCurrentSweep:J,buildingName:this.props.buildingName,isRefreshDialog:!1,isSweepChangeable:!1,showFloorMap:!0,floor:U,onDialogCancelButton:this.onDialogCancelButton,showInBuildingRoutes:!0,space:X}),i.createElement("button",{id:"btnNoStepsFound",className:"hidden","data-toggle":"modal","data-target":"#NoStepsFound",title:"Add"},". "),i.createElement(v.a,{id:"NoStepsFound",heading:"Virtual BIM Equipment View",showSaveButton:!1,showCancelButton:!0},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("h4",{className:"modal-title",style:{textAlign:"center"}},"No Virtual Equipment View"),i.createElement("div",{className:"text-center"},i.createElement("br",null),i.createElement("a",{className:"modal-title","data-dismiss":"modal",style:{color:"black"},onClick:function(){window.location.href="#"+n+"/"+a+"/EditEquipment/"+r}},"Click here to add virtual equipment view")))))))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"age"},"Equipment Age:"),i.createElement("input",{id:"age",type:"number",disabled:!0,className:"form-control",value:x.age}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("label",null,"Year(s)"),i.createElement("input",{id:"age",type:"number",disabled:!0,className:"form-control",min:0,value:q}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("label",null,"Month(s)"),i.createElement("input",{id:"age",type:"number",disabled:!0,className:"form-control",min:0,value:z})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Breaker number 1"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.breaker1}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group "},i.createElement("label",null,"Breaker number 2"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.breaker2}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Breaker number 3"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.breaker3})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Manufacturer"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.manufacturer?x.manufacturer:""}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Model#"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.model}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Serial"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.serial})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Manufacturer Date"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.manufacturerDate}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Last Inspection Date"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.lastInspectionDate?x.lastInspectionDate:""}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Last Service Date"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.lastServiceDate?x.lastServiceDate:""})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Last Recharge Date"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.lastRechargeDate?x.lastRechargeDate:""}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Next Inspection Date"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.nextInspectionDate?x.nextInspectionDate:""}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Install Date"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.installEquipmentDate})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"User Type"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.userType}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Equipment State"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:x.equipmentState})))),"Cooling"==x.equipmentType&&i.createElement("div",{className:"col-md-12 form-group"},i.createElement("h4",{className:"title padding-10"},"Cooling"),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"capacity"},"Capacity:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"capacity",type:"text",disabled:!0,className:"form-control",value:x.capacity})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"units"},"Units:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"units",type:"text",disabled:!0,className:"form-control",value:x.units})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"refrigeranttype"},"Refrigerant Type:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"refrigeranttype",type:"text",disabled:!0,className:"form-control",value:x.refrigerantType}))),("Cooling"==x.equipmentType||"Heating"==x.equipmentType)&&i.createElement("div",{className:"col-md-12 form-group"},i.createElement("h4",{className:"title padding-10"},"Heating"),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"coiltype"},"Coil Type:")),i.createElement("div",{className:"col-md-2"},i.createElement("select",{id:"coiltype",className:"form-control",disabled:!0,value:x.coilType},i.createElement("option",{value:"",key:-2},"Select Coil Type"),i.createElement("option",{value:"Electric"},"Electric"),i.createElement("option",{value:"HotWater"},"Hot Water "),i.createElement("option",{value:"Steam"},"Steam"),i.createElement("option",{value:"NaturalGas"},"Natural Gas"))),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"inputcapacity"},"Input Capacity:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"inputcapacity",type:"text",disabled:!0,className:"form-control",value:x.inputCapacity})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"inputunits"},"Input Units:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"inputunits",type:"text",disabled:!0,className:"form-control",value:x.inputUnits})),i.createElement("div",{className:"col-md-4"}),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"outputcapacity"},"Output Capacity:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"outputcapacity",type:"text",disabled:!0,className:"form-control",value:x.outputCapacity})),i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"outputunits"},"Output Units:")),i.createElement("div",{className:"col-md-2"},i.createElement("input",{id:"outputunits",type:"text",disabled:!0,className:"form-control",value:x.outputUnits}))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-9"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Notes"),i.createElement("textarea",{className:"form-control",disabled:!0,value:S.notes})))),H&&i.createElement("div",{className:"col-md-12"},"  ",i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:r,showUploader:!1,entityType:"Equipment"})),i.createElement("br",null),"Lighting"===V&&w&&i.createElement("div",{className:"row m-0"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.createElement("h4",{className:"panel-title"},i.createElement("div",null,i.createElement("span",{style:{marginLeft:"15px"}},"Lighting Information"),i.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse4",href:"#collapse4",onClick:function(t){e.setCollapseIcon(t)}},i.createElement("i",{className:"fa fa-minus"}))))),i.createElement("div",{id:"collapse4",className:"panel-collapse collapse in"},i.createElement("div",{className:"panel-body"},i.createElement("div",{style:{height:"auto"}},i.createElement(l.a,{lightingInformation:w,lampTypes:_,isView:!0,onLightingInformationChange:function(){}})))))),i.createElement("br",null),"MiscAndProcess"===V&&("PlugLoad"===G||"Custom"===G)&&N&&N.ontology&&i.createElement("div",{className:"row m-0"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.createElement("h4",{className:"panel-title"},i.createElement("div",null,i.createElement("span",{style:{marginLeft:"15px"}},"Miscellaneous and Process Information"),i.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse5",href:"#collapse5",onClick:function(t){e.setCollapseIcon(t)}},i.createElement("i",{className:"fa fa-minus"}))))),i.createElement("div",{id:"collapse5",className:"panel-collapse collapse in"},i.createElement("div",{className:"panel-body"},i.createElement("div",{style:{height:"auto"}},("PlugLoad"===G||"Custom"===G)&&i.createElement(s.a,{isView:!0,plugLoadModel:N,heading:"PlugLoad"===G?"Plug Load":"Custom"===G?"Equipment":"",onPlugLoadModelChange:function(){}})))))),!d&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("div",{className:"row m-0"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.createElement("h4",{className:"panel-title"},i.createElement("div",null,i.createElement("span",{style:{marginLeft:"15px"}},"Components"),i.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse",href:"#collapse",onClick:function(t){e.setCollapseIcon(t)}},i.createElement("i",{className:"fa fa-minus"}))))),i.createElement("div",{id:"collapse",className:"panel-collapse collapse in"},i.createElement("div",{className:"panel-body"},i.createElement("div",{style:{height:"auto"}},E.components&&E.components.length>0&&E.components.map(function(t,n){if(t.name){var r=Object(p.o)(t.location);return i.createElement("div",{key:n,className:"row padding-10"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-10 col-sm-9 col-xs-9",style:{paddingLeft:"30px"}},i.createElement("h5",null,i.createElement("b",null,n+1,"\xa0 - \xa0",t.rdfsLabel," - ",t.componentType,":"))),i.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 "},i.createElement("button",{className:"btn btn-primary active",style:{cursor:"pointer"},onClick:function(){e.setState({selectedComponent:t,openComponentDetails:!0},function(){document.getElementById("btnComponentDialog").click()})}},i.createElement("b",null," Detail ")))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Type"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:t.componentType})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Component Label"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:t.rdfsLabel}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Location"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:r})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-6"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Description"),i.createElement("textarea",{className:"form-control",disabled:!0,value:t.description})))),i.createElement("div",{className:"col-md-12",style:{marginBottom:"0px"}},i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:t.name,showUploader:!1,entityType:"Component"})),i.createElement("div",{className:"col-md-12"},i.createElement("hr",{style:{marginTop:"0px",marginBottom:"10px"}})))}})))))),i.createElement("br",null),i.createElement("div",{className:"row m-0"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.createElement("h4",{className:"panel-title"},i.createElement("div",null,i.createElement("span",{style:{marginLeft:"15px"}},"Devices"),i.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse2",href:"#collapse2",onClick:function(t){e.setCollapseIcon(t)}},i.createElement("i",{className:"fa fa-minus"}))))),i.createElement("div",{id:"collapse2",className:"panel-collapse collapse in"},i.createElement("div",{className:"panel-body"},i.createElement("div",{style:{height:"auto"}},A&&A.length>0&&A.map(function(e,t){if(e.deviceName){var r=Object(p.o)(e.floor),o=Object(p.o)(e.location);return i.createElement("div",{key:t,className:"row padding-10"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-10 col-sm-9 col-xs-9",style:{paddingLeft:"30px"}},i.createElement("h5",null,i.createElement("b",null,t+1,"\xa0 - \xa0",e.rdfsLabel,":"))),i.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 "},i.createElement("button",{className:"btn btn-primary active",style:{cursor:"pointer"},onClick:function(){window.location.hash=n+"/"+a+"/Point/ViewDevice/Electronic/"+e.deviceName}},i.createElement("b",null," Detail ")))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device Type"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:"Electronic Device"})),i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Moncon Type"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.monitoringControlDeviceType})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Floor"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:r}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Location"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:o})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device ID"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.deviceID})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Device State"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:e.deviceState}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"IP Address"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:e.wirelessConfig&&e.wirelessConfig.ipAddress}))),i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Mac Address"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.wirelessConfig&&e.wirelessConfig.thermostatMacAddress}))),i.createElement("div",{className:"col-md-12",style:{marginBottom:"0px"}},i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:e.deviceName,showUploader:!1,entityType:"ElectronicDevice"})),i.createElement("div",{className:"col-md-12"},i.createElement("hr",{style:{marginTop:"0px",marginBottom:"10px"}})))}}),P&&P.length>0&&P.map(function(e,t){if(e.ontology){var r=Object(p.o)(e.floor),o=Object(p.o)(e.space);return i.createElement("div",{key:t,className:"row padding-10"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-10 col-sm-9 col-xs-9",style:{paddingLeft:"30px"}},i.createElement("h5",null,i.createElement("b",null,t+1,"\xa0 - \xa0",e.name,":"))),i.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 "},i.createElement("button",{className:"btn btn-primary active",style:{cursor:"pointer"},onClick:function(){window.location.hash=n+"/"+a+"/Point/ViewDevice/Computing/"+e.ontology}},i.createElement("b",null," Detail ")))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device Type"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:"Computing Device"})),i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Controller IP Address"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.controllerIpAddress})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Floor"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:r}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Location"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:o})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device ID"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.deviceID})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Device State"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:e.deviceState})))),i.createElement("div",{className:"col-md-12",style:{marginBottom:"0px"}},i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:e.ontology,showUploader:!1,entityType:"ComputingDevice"})),i.createElement("div",{className:"col-md-12"},i.createElement("hr",{style:{marginTop:"0px",marginBottom:"10px"}})))}}),k&&k.length>0&&k.map(function(e,t){if(e.ontology){var r=Object(p.o)(e.floor),o=Object(p.o)(e.location);return i.createElement("div",{key:t,className:"row padding-10"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-10 col-sm-9 col-xs-9",style:{paddingLeft:"30px"}},i.createElement("h5",null,i.createElement("b",null,t+1,"\xa0 - \xa0",e.name,":"))),i.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 "},i.createElement("button",{className:"btn btn-primary active",style:{cursor:"pointer"},onClick:function(){window.location.hash=n+"/"+a+"/Point/ViewDevice/Network/"+e.ontology}},i.createElement("b",null," Detail ")))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device Type"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:"Network Device"})),i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"IP Address"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.ipAddress})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Floor"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:r}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Location"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:o})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device ID"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:e.deviceID})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Device State"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:e.deviceState}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Network Type"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:e.networkType}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Model"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:e.modelNo})))),i.createElement("div",{className:"col-md-12",style:{marginBottom:"0px"}},i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:e.ontology,showUploader:!1,entityType:"ComputingDevice"})),i.createElement("div",{className:"col-md-12"},i.createElement("hr",{style:{marginTop:"0px",marginBottom:"10px"}})))}})))))),i.createElement("br",null),i.createElement("div",{className:"row m-0"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.createElement("h4",{className:"panel-title"},i.createElement("div",null,i.createElement("span",{style:{marginLeft:"15px"}},"Points"),i.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse3",href:"#collapse3",onClick:function(t){e.setCollapseIcon(t)}},i.createElement("i",{className:"fa fa-minus"}))))),i.createElement("div",{id:"collapse3",className:"panel-collapse collapse in"},i.createElement("div",{className:"panel-body"},i.createElement("div",{style:{height:"auto"}},L&&L.length>0&&L.map(function(e,t){if(e.point){var r=Object(p.o)(Object(o.g)(e.floor)),l=Object(p.o)(Object(o.g)(e.space)),s=Object(p.o)(Object(o.g)(e.pointDevice));return i.createElement("div",{key:t,className:"row padding-10"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-10 col-sm-9 col-xs-9",style:{paddingLeft:"30px"}},i.createElement("h5",null,i.createElement("b",null,t+1,"\xa0 - \xa0",Object(o.g)(e.pointLabel),":"))),i.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 "},i.createElement("button",{className:"btn btn-primary active",style:{cursor:"pointer"},onClick:function(){window.location.hash=n+"/"+a+"/PointForm/View/"+Object(o.g)(e.point)}},i.createElement("b",null," Detail ")))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Type"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:Object(o.g)(e.pointType)})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Function"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:s}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," P&ID Name"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:Object(o.g)(e.pointPIDName)}))),i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Device ID"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:Object(o.g)(e.pointId)}))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Point State"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:Object(o.g)(e.pointState)}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Floor"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:r}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Location"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:l})))),i.createElement("div",{className:"col-md-12",style:{marginBottom:"0px"}},i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:Object(o.g)(e.point),showUploader:!1,entityType:"Point"})))}})))))),i.createElement("br",null),i.createElement("div",{className:"row m-0"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.createElement("h4",{className:"panel-title"},i.createElement("div",null,i.createElement("span",{style:{marginLeft:"15px"}},"Inventories"),i.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse6",href:"#collapse6",onClick:function(t){e.setCollapseIcon(t)}},i.createElement("i",{className:"fa fa-minus"}))))),i.createElement("div",{id:"collapse6",className:"panel-collapse collapse in"},i.createElement("div",{className:"panel-body"},i.createElement("div",{style:{height:"auto"}},j&&j.length>0&&j.map(function(t,n){if(t.ontology)return i.createElement("div",{key:n,className:"row padding-10"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8",style:{paddingLeft:"30px"}},i.createElement("h5",null,i.createElement("b",null,n+1,"\xa0 ",t.manufacturer,":"))),i.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 "},"Lighting"==x.equipmentType&&i.createElement(i.Fragment,null,i.createElement("button",{className:"btn btn-primary",type:"button","data-toggle":"modal","data-target":"#lightingInformationDialog_Inventory"+n,title:"Update Lighting Information"},i.createElement("b",null,i.createElement("i",{className:"fa fa-save"}),"Inventory Lighting Information")),"\xa0\xa0",i.createElement(v.a,{id:"lightingInformationDialog_Inventory"+n,onSaveButtonClick:function(){},isEditForm:!0,showSaveButton:!1,showCancelButton:!0,cancelButtonText:"Close",heading:"Inventory Lighting Information"},B[n]&&i.createElement(l.a,{lightingInformation:B[n],lampTypes:c.a[x.subclassType],isInventoryLightingInfo:!0,onLightingInformationChange:function(e){},isView:!0}))),i.createElement("button",{className:"btn btn-primary active",style:{cursor:"pointer"},onClick:function(){e.setState({selectedAssetInventoryObj:t,isShowModelDialog:!0,selectedModelAsset:t.modeledAsset},function(){document.getElementById("btn-assetInventoryViewDialog").click()})}},i.createElement("b",null," Detail ")))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Manufacturer"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:t.manufacturer})),i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Model"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:t.modelNo})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"Serial"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:t.serialNo})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"State"),i.createElement("input",{disabled:!0,type:"text",className:"form-control",value:t.assetState})),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null,"WareHouse"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:Object(p.o)(t.warehouseOntology)}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Mac Address"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:t.macAddress})))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-6"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Notes"),i.createElement("textarea",{className:"form-control",disabled:!0,value:t.notes}))),i.createElement("div",{className:"col-md-3"}," ",i.createElement("div",{className:"form-group "},i.createElement("label",null," Lot Area"),i.createElement("input",{type:"text",disabled:!0,className:"form-control",value:Object(p.o)(t.lotAreaOntology)})))),i.createElement("div",{className:"col-md-12",style:{marginBottom:"0px"}},i.createElement("br",null),i.createElement(y.a,{buildingName:a,assetOntology:t.manufacturer,showUploader:!1,entityType:"Component"})),i.createElement("div",{className:"col-md-12"},i.createElement("hr",{style:{marginTop:"0px",marginBottom:"10px"}})))})))))),i.createElement("br",null)),i.createElement("br",null)))),i.createElement("button",{id:"btnComponentDialog",className:"hidden","data-toggle":"modal","data-target":"#addComponentDialog",title:"Details"},". "),i.createElement(v.a,{id:"addComponentDialog",isEditForm:!0,showCancelButton:!0,showSaveButton:!1,cancelButtonText:"Close",heading:"Component Detail",onCancelButtonClickActive:!0,onCancelButtonClick:function(){e.setState({openComponentDetails:!1})}},I&&i.createElement(b.a,{instance:this.props.instance,buildingName:a,isEdit:!0,redirectURL:window.location.hash,onComponentChange:function(){},component:O,isView:!0})),i.createElement("button",{id:"btn-assetInventoryViewDialog","data-toggle":"modal","data-target":"#assetInventoryViewDialog",type:"button",className:"btn btn-primary btn-fill hidden"},"."),R&&i.createElement(v.a,{isEditForm:!0,id:"assetInventoryViewDialog",heading:Object(p.o)(F)+" details",showSaveButton:!1,showCancelButton:!0,cancelButtonText:"Cancel",onCancelButtonClick:function(){e.setState({isShowModelDialog:!1})},onCancelButtonClickActive:!0},i.createElement(C.a,{buildingName:a,instance:n,assetInventoryModel:M,isView:!0})))},t}(i.Component);t.default=D},1464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(2),r=(n.n(i),n(783)),o=n(678),l=n(658),s=n(10),c=n(23),u=n(654),d=n(31),m=n(701),h=n(116),p=n(656),f=n(670),g=n(650),v=n(55),b=n(11),y=n(781),E=n(668),x=n(669),S=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),w=this&&this.__assign||function(){return(w=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},N=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},C=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},_=function(e){function t(t){var n=e.call(this,t)||this;return n.state={InsightInfo:Object(),Old_InsightInfo:Object(),InsightChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,filteredInsight:[],buildingOptimalTStat:[],spaceOptimalTStat:[],spaces:[],spacesOptimalInfo:[],avgBuildingOptimalTStat:Object(),buildingInsightInfos:[],spaceInsightInfos:[],avgSpaceOptimalTStat:Object(),buildingOptimal:!1,spaceOptimal:!1,scheduleSelected:!1,callInterval:!0,controlStatus:"Manual",showLogs:!1},n.changeMode=n.changeMode.bind(n),n.changeOverrideState=n.changeOverrideState.bind(n),n.changeFanSetting=n.changeFanSetting.bind(n),n.increaseTemp=n.increaseTemp.bind(n),n.decreaseTemp=n.decreaseTemp.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchInsightInfo=n._fetchInsightInfo.bind(n),n.changeStateLocal=n.changeStateLocal.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleOptimize=n.handleOptimize.bind(n),n._fetchInsights=n._fetchInsights.bind(n),n._fetchSelectedTStatData=n._fetchSelectedTStatData.bind(n),n.handleOptimalSelection=n.handleOptimalSelection.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n}return S(t,e),t.prototype.componentDidMount=function(){return N(this,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return t.sent(),[4,this._fetchInsights()];case 2:return t.sent(),[4,this.fetchThermostatInfo()];case 3:t.sent(),this._fetchInsightInfo(!0),t.label=4;case 4:return e=JSON.parse(b.a.getItem("user")),v.q.emit("device remote control",e.contact),this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a);var t=0;a=setInterval(function(){++t>=20&&(t=0,e._fetchInsightInfo(!1),Object(h.a)(!1))},1e3)},t.prototype.componentWillUnmount=function(){clearInterval(a)},t.prototype.handleScheduleSelection=function(e){return N(this,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,Object(o.X)(this.props.InsightName,e)];case 1:return t.sent(),e?Object(d.b)("Successfully Selected Schedule"):Object(d.b)("Successfully unSelected Schedule"),this.setState({scheduleSelected:e}),this._fetchData(),[2]}})})},t.prototype.handleOptimalSelection=function(e,t){var n=this.state,a=n.buildingOptimal,i=n.spaceOptimal;"spaceOptimal"==e?i=t:a=t,this.setState({spaceOptimal:i,buildingOptimal:a}),this.handleOptimize()},t.prototype.handleOptimize=function(){return N(this,void 0,void 0,function(){var e,t,n,a;return C(this,function(i){return e=this.state,t=e.avgBuildingOptimalTStat,n=e.avgSpaceOptimalTStat,a=e.spaceOptimal,e.buildingOptimal&&!a?this.setState({InsightInfo:t,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}):this.setState({InsightInfo:n,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}),[2]})})},t.prototype._fetchSelectedTStatData=function(){return N(this,void 0,void 0,function(){var e,t,n,a,i,r,c,u,m,h,p,f,g,v,b,y,E,x,S;return C(this,function(w){switch(w.label){case 0:e=this.state,t=e.buildingOptimalTStat,n=e.buildingInsightInfos,a=e.spaceInsightInfos,i=e.spaceOptimalTStat,r=e.buildingOptimal,c=e.spaceOptimal,h=0,w.label=1;case 1:return h<t.length?(u=t[h],(b=Object(s.g)(u.moncondevice))?[4,Object(l.t)(b,this.props.buildingName)]:[3,4]):[3,5];case 2:return y=w.sent(),[4,Object(o.s)(y).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 3:m=w.sent(),n.push(m),w.label=4;case 4:return h++,[3,1];case 5:h=0,w.label=6;case 6:if(!(h<i.length))return[3,12];if(p=i[h],!((f=p.spaceInsights)&&f.length>0))return[3,11];g=0,w.label=7;case 7:return g<f.length?(v=f[g],(b=Object(s.g)(v.moncondevice))?[4,Object(l.t)(b,this.props.buildingName)]:[3,10]):[3,11];case 8:return y=w.sent(),[4,Object(o.s)(y).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 9:E=w.sent(),a.push(E),w.label=10;case 10:return g++,[3,7];case 11:return h++,[3,6];case 12:return r=n.length>0,c=a.length>0,[4,Object(o.D)(n)];case 13:return x=w.sent(),[4,Object(o.D)(a)];case 14:return S=w.sent(),this.setState({avgBuildingOptimalTStat:x,avgSpaceOptimalTStat:S,buildingInsightInfos:n,spaceInsightInfos:a,buildingOptimal:r,spaceOptimal:c}),[2]}})})},t.prototype._fetchInsights=function(){return N(this,void 0,void 0,function(){var e,t,n,a,i,r,l,u,d,m,h,g,v,b,y;return C(this,function(E){switch(E.label){case 0:return(e=this.props.buildingName)?[4,Object(o.u)(e)]:[3,7];case 1:for(t=E.sent(),y=0;y<t.length;y++)n=t[y],Object(s.g)(n.moncondevice)&&Object(s.g)(n.rdfsLabel)&&Object(c.E)(Object(s.g)(n.moncondevice),Object(s.g)(n.rdfsLabel));for(a=this.state,i=a.spaces,r=a.spacesOptimalInfo,l=a.spaceOptimalTStat,u=a.buildingOptimalTStat,i=[],d=function(e){var n=t[e],a=Object(s.g)(n.space),r=Object(s.g)(n.spaceRdfsLabel);a&&r&&-1==i.findIndex(function(e){return e.ontology==a})&&i.push({ontology:a,rdfsLabel:r})},y=0;y<t.length;y++)d(y);r=[],l=[],u=[],m=function(e){var n,a,o,c,u,d,m;return C(this,function(h){switch(h.label){case 0:return n=i[e],[4,Object(p.f)(n.ontology)];case 1:return a=h.sent(),o=t.filter(function(e){return Object(s.g)(e.space)==n.ontology}),c={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:o},r.push.apply(r,[c]),u=t.find(function(e){return Object(s.g)(e.space)==n.ontology}),d=[],u&&(d=Object(s.g)(u.spaceOptimalTStats).split(",")),m={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:t.filter(function(e){return-1!=d.findIndex(function(t){return t==Object(s.g)(e.moncondevice)})})},l.push.apply(l,[m]),[2]}})},h=0,E.label=2;case 2:return h<i.length?[5,m(h)]:[3,5];case 3:E.sent(),E.label=4;case 4:return h++,[3,2];case 5:return[4,Object(f.c)(this.props.buildingName)];case 6:if((g=E.sent())&&g[0])for(v=g[0],v=(v=Object(s.g)(v.buildingOptimal)).split(","),b=function(e){var n=v[e],a=t&&t.length>0&&t[0]&&t.find(function(e){return Object(s.g)(e.moncondevice)==n});a&&u.push.apply(u,[a])},y=0;y<v.length;y++)b(y);this.setState({spaces:i,spacesOptimalInfo:r,spaceOptimalTStat:l,buildingOptimalTStat:u}),E.label=7;case 7:return[2]}})})},t.prototype._fetchData=function(){return N(this,void 0,void 0,function(){var e,t,n,a,i,r,o,c,d,m,f=this;return C(this,function(g){switch(g.label){case 0:return e=this.state.scheduleSelected,t=this.props,n=t.InsightName,a=t.buildingName,i=t.type,n?(Object(h.a)(!0),[4,Object(u.h)(this.props.buildingName)]):[3,6];case 1:return r=g.sent(),o=r&&r.length>0&&r.map(function(e){return{value:Object(s.g)(e.ontology),label:Object(s.g)(e.rdfsLabel)}}),c=Object(),d=Object(),"Optimal"!=i?[3,3]:[4,Object(p.f)(n)];case 2:return d=g.sent(),[3,5];case 3:return[4,Object(l.t)(n,a)];case 4:c=g.sent(),g.label=5;case 5:localStorage.getItem(c.deviceID)&&localStorage.getItem(c.deviceID).length>0&&(m=JSON.parse(localStorage.getItem(c.deviceID)),this.setState({InsightInfo:m,Old_InsightInfo:w({},m),InsightChanged:!1,currentChange:""})),e=c.isSchedule,this.setState({Moncon:c,space:d,EquipmentList:o,scheduleSelected:e},function(){return N(f,void 0,void 0,function(){return C(this,function(e){return[2]})})}),Object(h.a)(!1),g.label=6;case 6:return[2]}})})},t.prototype.fetchThermostatInfo=function(){return N(this,void 0,void 0,function(){var e,t,n,a,i,r,l;return C(this,function(s){switch(s.label){case 0:return Object(h.a)(!0),e=this.props,t=e.InsightName,n=e.buildingName,a=this.state,i=a.Moncon,r=a.controlStatus,this.setState({callInterval:!1}),[4,Object(o.B)(n,t).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(i.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return l=s.sent(),this.setState({InsightInfo:l,Old_InsightInfo:w({},l),InsightChanged:!1,currentChange:"",callInterval:!0,controlStatus:l.thermostatControlStatus?l.thermostatControlStatus:r}),Object(h.a)(!1),[2]}})})},t.prototype._fetchInsightInfo=function(e){return N(this,void 0,void 0,function(){var t,n,a,i;return C(this,function(r){switch(r.label){case 0:return t=this.state,n=t.Moncon,a=t.controlStatus,e&&Object(h.a)(!0,"Fetching data from Thermostat"),i=Object(),[4,Object(o.s)(n).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(n.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return(i=r.sent())?(i.thermostatControlStatus=a,i.insightName=this.props.InsightName,i.timestamp=(new Date).toString(),[4,Object(o.Z)(this.props.buildingName,i)]):[3,3];case 2:r.sent(),this.setState({InsightInfo:i,Old_InsightInfo:w({},i),InsightChanged:!1,currentChange:"",callInterval:!0}),r.label=3;case 3:return e&&Object(h.a)(!1),[2]}})})},t.prototype.changeMode=function(e,t){e.mode=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"mode"})},t.prototype.changeOverrideState=function(e,t,n){"Local"==this.state.controlStatus&&"Remote"==n?(n="Manual",e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1})):"Manual"==n&&(e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1}))},t.prototype.changeFanSetting=function(e,t){e.fan=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"fan"})},t.prototype.increaseTemp=function(e,t){"Heat"==t?e.heattemp=(e.heattemp?e.heattemp:0)+.555556:e.cooltemp=(e.cooltemp?e.cooltemp:0)+.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.decreaseTemp=function(e,t){"Heat"==t?e.heattemp=e.heattemp-.555556:e.cooltemp=e.cooltemp-.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.cancelSend=function(){this.setState({InsightChanged:!1,currentChange:""}),this._fetchInsightInfo(!1)},t.prototype.resetChanges=function(e){return N(this,void 0,void 0,function(){var t=this;return C(this,function(n){return this.setState({InsightChanged:!1,currentChange:""},function(){return N(t,void 0,void 0,function(){return C(this,function(t){switch(t.label){case 0:return[4,this._fetchInsightInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return N(this,void 0,void 0,function(){var n=this;return C(this,function(a){return Object(h.a)(!0),this.setState({InsightChanged:!1,currentChange:""},function(){return N(n,void 0,void 0,function(){var n;return C(this,function(a){switch(a.label){case 0:return"Local"!=(n=this.state.controlStatus)?[3,2]:[4,Object(o.X)(this.props.InsightName,!1)];case 1:return a.sent(),[3,10];case 2:return"Manual"!=n?[3,4]:[4,Object(o.X)(this.props.InsightName,!1)];case 3:return a.sent(),[3,10];case 4:return"Remote"!=n?[3,6]:[4,Object(o.X)(this.props.InsightName,!1)];case 5:return a.sent(),[3,10];case 6:return"Schedule"!=n?[3,8]:[4,Object(o.X)(this.props.InsightName,!0)];case 7:return a.sent(),[3,10];case 8:return"Optimize"!=n?[3,10]:[4,Object(o.X)(this.props.InsightName,!1)];case 9:a.sent(),a.label=10;case 10:return t.thermostatControlStatus=n,t.insightName=this.props.InsightName,[4,Object(o.Z)(this.props.buildingName,t)];case 11:return a.sent(),Object(o.J)(e,t,this.state.Old_InsightInfo,this.props.buildingName).then(function(e){e.success?Object(d.b)("Changes applied successfully. "):e.error&&Object(d.a)(e.reason)}).catch(function(e){Object(d.a)("Some error orccured. ")}),this.setIntervalStart(),Object(h.a)(!1),[2]}})})}),[2]})})},t.prototype.changeStateLocal=function(e){this.setState({localBTNState:e,controlStatus:"Local",InsightChanged:!0,currentChange:"state"})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.state,n=t.InsightInfo,a=t.Moncon,o=t.space,l=t.InsightChanged,s=t.detailsExpanded,u=t.buildingOptimal,d=t.spaceOptimal,h=t.controlStatus,p=t.showLogs,f=this.props,v=f.instance,S=f.buildingName,w=f.InsightName,N=f.type,C=f.hideTabs,_="Optimal"==N,T="Local"==h,O=n.mode==r.c.AUTO&&n.cooltemp<n.heattemp+.5,D="not refreshed";if(n&&n.timestamp&&(D=new Date(n.timestamp).toLocaleString()),p)return i.createElement(E.a,{instance:v,buildingName:S,fromEntityList:!0,module:x.a.Assets,ontology:a.monitoringControl,entityName:"Device",onLogClose:function(){return e.setState({showLogs:!1})}});var A=JSON.parse(b.a.getItem("user"));return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},!C&&i.createElement(m.a,{InsightName:w,ControlName:"InsightControl",buildingName:S,instance:v,type:N}),A&&"1"==A.role&&i.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",i.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),i.createElement("div",{className:"card",id:"InsightsList"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"header"},i.createElement("h3",{className:"title"},i.createElement("strong",null,_?o.rdfsLabel:a.rdfsLabel)," "),!_&&i.createElement("h4",{className:"title"},i.createElement("strong",null,this.props.type.toUpperCase(),":",a&&a.relatedEquipment&&a.relatedEquipment.map(function(t,n){return i.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==a.relatedEquipment.length?"":",")}),"STATUS:")," (",r.d[n.state],")"))),i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp pull-right"},i.createElement("div",null,"Room Temp"),i.createElement("div",{className:"counter"},Object(c.a)(n.spacetemp).toFixed(2),"\xb0F")),i.createElement("div",{className:"col-md-6 col-xs-12"},i.createElement("div",{className:"row"},(n.mode==r.c.HEAT||n.mode==r.c.AUTO)&&i.createElement(i.Fragment,null,i.createElement("div",{className:(n.mode==r.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},i.createElement("div",null,"Heat To"),i.createElement("div",{className:"counter"},Object(c.a)(n.heattemp).toFixed(2),"\xb0F")),i.createElement("div",{className:(n.mode==r.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},i.createElement("div",{className:"btn-group-vertical"},i.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:T||O,onClick:function(){return e.increaseTemp(n,"Heat")}},i.createElement("div",null,i.createElement("i",{className:"fa fa-angle-up"})),i.createElement("div",null,"Warmer")),i.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:T,onClick:function(){return e.decreaseTemp(n,"Heat")}},i.createElement("div",null,"Cooler"),i.createElement("div",null,i.createElement("i",{className:"fa fa-angle-down"})))))),(n.mode==r.c.COOL||n.mode==r.c.AUTO)&&i.createElement(i.Fragment,null,i.createElement("div",{className:(n.mode==r.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},i.createElement("div",null,"Cool To"),i.createElement("div",{className:"counter"},Object(c.a)(n.cooltemp).toFixed(2),"\xb0F")),i.createElement("div",{className:(n.mode==r.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},i.createElement("div",{className:"btn-group-vertical"},i.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:T,onClick:function(){return e.increaseTemp(n,"Cool")}},i.createElement("div",null,i.createElement("i",{className:"fa fa-angle-up"})),i.createElement("div",null,"Warmer")),i.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:T||O,onClick:function(){return e.decreaseTemp(n,"Cool")}},i.createElement("div",null,"Cooler"),i.createElement("div",null,i.createElement("i",{className:"fa fa-angle-down"}))))))))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},i.createElement("div",{className:"btn-group"},!_&&i.createElement(i.Fragment,null,i.createElement("button",{type:"button",className:"btn btn-success "+("Local"==h?"btn-fill":""),onClick:function(){e.changeStateLocal(!0)}},"Local"),i.createElement("button",{type:"button",className:"btn btn-success "+("Remote"==h||"Schedule"==h||"Manual"==h||"Optimize"==h?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,r.e.ON,"Remote")}},"Remote"),i.createElement("button",{type:"button",disabled:T,className:"btn btn-success "+("Manual"==h?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,r.e.OFF,"Manual")}},"Manual")),i.createElement("button",{type:"button",className:"btn btn-success "+("Schedule"==h?"btn-fill":""),disabled:T,onClick:function(){e.setState({InsightChanged:!0,currentChange:"state",controlStatus:"Schedule"})}},"Schedule"),i.createElement("button",{type:"button",disabled:T,className:"btn btn-success "+("Optimize"==h?"btn-fill":""),onClick:function(){u&&d?document.getElementById("btnOptimize").click():e.handleOptimize()}},"Optimize"))),i.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",disabled:T,className:n.mode===r.c.OFF?"btn btn-fill":"btn",onClick:function(){return e.changeMode(n,r.c.OFF)}},"Off"),i.createElement("button",{type:"button",className:n.mode===r.c.HEAT?"btn btn-fill":"btn",disabled:T,onClick:function(){return e.changeMode(n,r.c.HEAT)}},"Heat"),i.createElement("button",{type:"button",className:n.mode===r.c.COOL?"btn btn-fill":"btn",disabled:T,onClick:function(){return e.changeMode(n,r.c.COOL)}},"Cool"),i.createElement("button",{type:"button",className:n.mode===r.c.AUTO?"btn btn-fill":"btn",disabled:T,onClick:function(){return e.changeMode(n,r.c.AUTO)}},"Auto")))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},i.createElement("div",{className:"InsightHeading"},i.createElement("i",{className:"fa fa-first-order"})," Fan"),i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:n.fan===r.b.AUTO?"btn btn-fill":"btn",disabled:T,onClick:function(){return e.changeFanSetting(n,r.b.AUTO)}},"Auto"),i.createElement("button",{type:"button",className:n.fan===r.b.ON?"btn btn-fill":"btn",disabled:T,onClick:function(){return e.changeFanSetting(n,r.b.ON)}},"On")))),a.monitoringControl&&a.monitoringControlDeviceType&&i.createElement(y.a,{instance:v,buildingName:S,monconType:a.monitoringControlDeviceType,moncon:a.monitoringControl,deviceId:a.deviceID,monconRDFsLabel:a.rdfsLabel}),!_&&i.createElement("div",{className:"accordion row padding-10",id:"accordionExample"+w,style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},i.createElement("div",{className:"",id:"headingOne"},i.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne"+w,style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne"+w,onClick:function(){e.setState({detailsExpanded:!s})}},i.createElement("i",{className:s?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),i.createElement("div",{id:"collapseOne"+w,className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"+w},i.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},i.createElement("h5",{className:"title"},i.createElement("strong",null,"IP Address:")," ",a.wirelessConfig&&a.wirelessConfig.ipAddress),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Controller IP Address:")," ",a.wirelessConfig.controllerIPAddress),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Manufacturer:")," ",a.manufacturer),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Model:")," ",a.model),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Device ID:")," ",a.deviceID?a.deviceID:""),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Last Data Synced At:")," ",D)))),i.createElement("div",{className:l?"InsightApplyChanges":"hidden"},!O&&i.createElement("h4",null,"Do you want to apply these changes?"),O&&i.createElement("h4",null," Both heating and cooling could be on at the same time with these setpoints, please modify your request"),!O&&i.createElement("div",null,i.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",i.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",i.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(a,n)}},"Apply Changes"))))),i.createElement("button",{id:"btnOptimize",style:{display:"none"},"data-toggle":"modal","data-target":"#showOptimizeDialog"},"."),i.createElement(g.a,{id:"showOptimizeDialog",cancelButtonId:"cancelOptimizeDialog",onSaveButtonClick:function(){e.handleOptimize()},saveButtonText:"Yes",showCancelButton:!0,showSaveButton:!1,cancelButtonText:"Cancel",heading:"Select One"},i.createElement("div",{className:"card padding-10"},i.createElement("div",{className:"row text-center col-md-offset-1"},u&&i.createElement("div",{onClick:function(){e.handleOptimalSelection("buildingOptimal",!0),e.setState({spaceOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},i.createElement("label",{className:"text-center title"}," Building Optimal ")),d&&i.createElement("div",{onClick:function(){e.handleOptimalSelection("spaceOptimal",!0),e.setState({buildingOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},i.createElement("label",{className:"text-center title"}," Space Optimal ")))))))))},t}(i.Component);t.default=_},1484:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(783)),r=n(663),o=n.n(r),l=n(31),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},m=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={schedule:Object(),relayBoardsList:[],isDefrost:n.props.isDefrost,compressorADPDB:n.props.compressorADPDB?n.props.compressorADPDB:Object(),refEquipment:n.props.equipmentOntology?n.props.equipmentOntology:""},n.addItem=n.addItem.bind(n),n.setDropdownValues=n.setDropdownValues.bind(n),n.onchangeHandler=n.onchangeHandler.bind(n),n.onSelectChangeHandler=n.onSelectChangeHandler.bind(n),n.onRelayStatusChangeHandler=n.onRelayStatusChangeHandler.bind(n),n}return s(t,e),t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){var t=this;return d(this,function(n){return this.setState({schedule:e.schedule,deviceType:e.DeviceType,isDefrost:e.isDefrost,compressorADPDB:e.compressorADPDB,refEquipment:e.equipmentOntology},function(){t.setDropdownValues()}),[2]})})},t.prototype.setDropdownValues=function(){var e=this.state.deviceType,t=[];e&&-1==e.indexOf("OneRelay")?(t.push({ontology:"all",rdfsLabel:"All"}),t.push({ontology:"1",rdfsLabel:"Relay 1"}),t.push({ontology:"2",rdfsLabel:"Relay 2"}),t.push({ontology:"3",rdfsLabel:"Relay 3"}),t.push({ontology:"4",rdfsLabel:"Relay 4"})):t.push({ontology:"OneRelay",rdfsLabel:"Relay"}),this.setState({schedule:this.props.schedule,relayBoardsList:t})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.schedule,a=t.deviceType,i=t.compressorADPDB,r=t.refEquipment,o=t.isDefrost,l=this.props,s=l.day,c=l.ControlName;n&&!n[s]&&(n[s]=[]);var u=new Date(new Date(new Date(new Date(Date.now()).setMinutes(0)).setHours(9)).setSeconds(0)),d=u;if(d=n[s].length>0&&n[s][n[s].length-1]&&n[s][n[s].length-1].start?new Date(new Date(new Date(new Date(Date.now()).setHours(new Date(n[s][n[s].length-1].start).getHours()+1)).setMinutes(0)).setSeconds(0)):u,a&&-1!=a.indexOf("OneRelay"))n[s].push({setPoint:"",setRelayName:"OneRelay",setRelayStatus:"",start:d});else if(c&&"CompressorControl"==c){var m=o?void 0:i&&i.LowTemp?i.LowTemp:0,h=o?"Defrost":"Box";n[s].push({setCoolPoint:""+m,setRelayStatus:"",start:d,compressorScheduleType:h,refEquipment:r,setRelayName:""})}else c&&"PTACControl"==c?n[s].push({setCoolPoint:"",setRelayStatus:"",start:d,setHeatPoint:""}):n[s].push({setPoint:"",setRelayName:"",setRelayStatus:"",start:d});this.setState({schedule:n},function(){e.props.update_Schedule(n)})},t.prototype.removeItem=function(e){var t=this,n=this.state.schedule,a=this.props.day;n[a].splice(e,1),this.setState({schedule:n},function(){t.props.update_Schedule(n)})},t.prototype.onchangeHandler=function(e,t){var n=this,a=this.state.schedule,i=this.props.day;a[i][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onBlurSetPoint=function(e,t){var n=this,a=this.state.schedule,r=this.props,o=r.day,s=r.InsightInfo;s&&s.mode==i.c.AUTO&&a[o][e].setHeatPoint>=a[o][e].setCoolPoint&&("setHeatPoint"==t.target.name?a[o][e].setCoolPoint=a[o][e].setHeatPoint?parseInt(a[o][e].setHeatPoint)+1:parseInt(t.target.value)+1:a[o][e].setHeatPoint=a[o][e].setCoolPoint?parseInt(a[o][e].setCoolPoint)-1:parseInt(t.target.value)-1,Object(l.a)("Both heating and cooling could be on at the same time with these setpoints, please modify your request")),a[o][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onBlurSetPointCompressor=function(e,t){var n=this,a=this.state,i=a.schedule,r=a.compressorADPDB,o=this.props,l=o.day,s=o.ControlName;i[l][e][t.target.name]=t.target.value,"CompressorControl"==s&&r&&(t.target.value<=r.LowTemp&&(i[l][e][t.target.name]=""+r.LowTemp),t.target.value>=r.HighTemp&&(i[l][e][t.target.name]=""+r.HighTemp)),this.setState({schedule:i},function(){n.props.update_Schedule(i)})},t.prototype.onSelectChangeHandler=function(e,t){var n=this,a=this.state.schedule,i=this.props.day;a[i][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onRelayStatusChangeHandler=function(e,t,n){var a=this,i=this.state.schedule,r=this.props.day;i[r][e][t.target.name]=n,this.setState({schedule:i},function(){a.props.update_Schedule(i)})},t.prototype.startChangeHandler=function(e,t){var n=this,a=this.state.schedule,i=this.props.day;if(t){var r=t.getHours(),o=t.getMinutes(),l=t.getSeconds(),s=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),r,o,l);a[i][e].start=s.toString(),this.setState({schedule:a},function(){n.props.update_Schedule(a)})}},t.prototype.render=function(){var e=this,t=this.props,n=t.day,r=t.ControlName,l=t.InsightInfo,s=this.state,u=s.schedule,d=s.relayBoardsList,h=s.deviceType,p=s.isDefrost,f=h&&-1!=h.indexOf("OneRelay"),g=function(e){var t=e.value,n=m(e,["value"]);return a.createElement("input",c({value:t.toLocaleString()},n))};return a.createElement(a.Fragment,null,a.createElement("div",{className:"card"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 headingText",style:{paddingLeft:30,paddingTop:15}},n),a.createElement("div",{className:"col-md-9 col-sm-12 col-xs-12 headingText no-padding"},u[n]&&u[n].map(function(t,n){var s=new Date(new Date(new Date(new Date(Date.now()).setMinutes(0)).setHours(9)).setSeconds(0)),c=t.start&&t.start.toString().length>10?new Date(t.start):s;return a.createElement("div",{className:"row padding-5"},"RelayControl"==r&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-6"},a.createElement("select",{className:"form-control",name:"setRelayName",disabled:f,value:t.setRelayName,onChange:function(t){e.onSelectChangeHandler(n,t)}},!f&&a.createElement("option",{value:"",key:-2},"Select"),d.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology},e.rdfsLabel," ")}))),a.createElement("div",{className:"col-sm-6"},a.createElement("button",{type:"button",className:"off"==t.setRelayStatus?"btn btn-sm btn-fill":"btn btn-sm",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"off")}},"Off"),a.createElement("button",{type:"button",className:"on"==t.setRelayStatus?"btn btn-sm btn-fill":"btn btn-sm",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"on")}},"On")))),"CompressorControl"==r&&p&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12 center"},a.createElement("button",{type:"button",className:"Inhibit"==t.setRelayStatus?"btn btn-sm btn-fill":"btn btn-sm",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"Inhibit")}},"Inhibit"),a.createElement("button",{type:"button",className:"Released"==t.setRelayStatus?"btn btn-sm btn-fill":"btn btn-sm",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"Released")}},"Released")))),"CompressorControl"==r&&!p&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Cool Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setPoint,name:"setPoint",onChange:function(t){return e.onchangeHandler(n,t)},onBlur:function(t){return e.onBlurSetPointCompressor(n,t)},style:{border:"1px solid gray"}})))),"PTACControl"==r&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-8"},a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setPoint,name:"setPoint",onChange:function(t){return e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})))),h&&h.toLowerCase().indexOf("thermostat")>-1&&a.createElement(a.Fragment,null," ","RelayControl"!=r&&l&&l.mode==i.c.HEAT&&a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Heat Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setHeatPoint,name:"setHeatPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})),"RelayControl"!=r&&l&&l.mode==i.c.COOL&&a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Cool Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})),"RelayControl"!=r&&l&&(l.mode==i.c.AUTO||l.mode==i.c.OFF)&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6",style:{padding:"4px"}},a.createElement("span",null,"Heat To"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setHeatPoint,name:"setHeatPoint",onChange:function(t){e.onchangeHandler(n,t)},onBlur:function(t){e.onBlurSetPoint(n,t)},style:{border:"1px solid gray"}})),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6",style:{padding:"4px"}},a.createElement("span",null,"Cool To"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},onBlur:function(t){e.onBlurSetPoint(n,t)},style:{border:"1px solid gray"}}))))," "),h&&h.toLowerCase().indexOf("intesis")>-1&&a.createElement(a.Fragment,null," ",a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setPoint,name:"setPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}}))),a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Start"),a.createElement(o.a,{className:"form-control",selected:c,name:"start",onChange:function(t){e.startChangeHandler(n,t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"hh:mm aa",timeIntervals:15,customInput:a.createElement(g,{value:c.toLocaleTimeString(),onChange:function(t){e.startChangeHandler(n,t)}})})),a.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 headingText"},a.createElement("button",{className:"btn-sm btn-danger active shortcut-btn",onClick:function(){e.removeItem(n)}},"X")))}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2",style:{paddingTop:"10px",textAlign:"center"}},a.createElement("button",{className:"btn btn-success",onClick:function(){e.addItem()}},a.createElement("i",{className:"fa fa-plus"}))))))},t}(a.Component);t.a=h},1485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(701)),r=n(1274),o=n(658),l=n(11),s=n(759),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},enclosure:"",deviceNumber:""}},n}return c(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e,t,n,a;return d(this,function(i){switch(i.label){case 0:return e=this.props,t=e.buildingName,n=e.InsightName,[4,Object(o.t)(n,t)];case 1:return a=i.sent(),this.setState({Moncon:a}),[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,o=e.InsightName,c=e.ControlName,u=e.type,d=e.hideTabs,m=this.state.Moncon,h=JSON.parse(l.a.getItem("user")),p=parseInt(h.role);return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!d&&a.createElement(i.a,{InsightName:o,buildingName:n,instance:t,ControlName:c,type:u}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement(r.default,{instance:t,alarmType:4==p?s.a.CustomerAlarm:s.a.OperationalAlarm,deviceName:o,buildingName:n,isInTab:!0,deviceId:m.deviceID}))))))},t}(a.Component);t.default=m},1486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(701)),r=n(658),o=n(656),l=n(1487),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},d=function(e){function t(t){var n=e.call(this,t)||this;return n.graphTypes={"Ambient Temp":"http://18.188.22.84:5601/app/kibana#/visualize/edit/ac22fe30-2a9c-11e9-ac7b-91aa8480a091?embed=true&_g=(refreshInterval:(pause:!f,value:5000),time:(from:now-4h,mode:quick,to:now))&_a=(filters:!(),linked:!f,query:(language:lucene,query:''),uiState:(),vis:(aggs:!(),params:(expression:'.es(index%3D+test*,metric%3Davg:properties.cooltemp,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.spacetemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.heattemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.fan,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.fanstate,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.mode,timefield%3Dproperties.@timestamp)',interval:auto),title:thermostat,type:timelion))","Set Point":"","Outside Temp":"",Combined:"http://18.188.117.70:3000/d/Hgyp5OpZz/office-lab?tab=queries&orgId=1&fullscreen&edit&panelId=4&_g=(refreshInterval:(pause:!f,value:3000),time:(from:now-4h,mode:quick,to:now))&refresh=3s"},n.state={selectedMode:"Combined",selectedGraph:"",InsightInfo:Object(),HVAC_List:[],Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1}},n.onGraphTypeChange=n.onGraphTypeChange.bind(n),n._fetchData=n._fetchData.bind(n),n}return s(t,e),t.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.onGraphTypeChange=function(e){this.setState({selectedMode:e,selectedGraph:this.graphTypes[e]})},t.prototype._fetchData=function(){return c(this,void 0,void 0,function(){var e,t,n,a,i,l;return u(this,function(s){switch(s.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.type,t?(i=Object(),l=Object(),"Optimal"!=a?[3,2]:[4,Object(o.f)(t)]):[3,5];case 1:return l=s.sent(),[3,4];case 2:return[4,Object(r.t)(t,n)];case 3:i=s.sent(),s.label=4;case 4:this.setState({selectedGraph:"Optimal"==a?l.graphURL:i.graphURL,Moncon:i,space:l}),s.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,r=e.InsightName,o=e.ControlName,s=e.type,c=e.hideTabs,u=this.state,d=u.selectedGraph,m=u.Moncon,h=m&&m.monitoringControlDeviceType&&-1!=m.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),p=m&&m.monitoringControlDeviceType&&-1!=m.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),f=m&&m.monitoringControlDeviceType&&-1!=m.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),g=m&&m.monitoringControlDeviceType&&-1!=m.monitoringControlDeviceType.toLowerCase().indexOf("wattnode"),v=m&&m.monitoringControlDeviceType&&-1!=m.monitoringControlDeviceType.toLowerCase().indexOf("ats"),b=m&&m.monitoringControlDeviceType&&-1!=m.monitoringControlDeviceType.toLowerCase().indexOf("generator"),y=m&&m.monitoringControlDeviceType&&"CBW406"==m.monitoringControlDeviceType,E=m&&m.monitoringControlDeviceType&&"CBW418"==m.monitoringControlDeviceType,x=g||y||E||v||b,S=g||y||E||v||b,w=g||y||E||v||b;return d=d&&-1!=d.indexOf("http")?d:"https://"+d,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!c&&a.createElement(i.a,{InsightName:r,buildingName:n,instance:t,ControlName:o,type:s,hideADP:S,hideAlarms:w,hideSchedule:x}),a.createElement("div",{className:"card InsightsListGraph",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("div",{className:"content"},!h&&!p&&!f&&!E&&!y&&!g&&!v&&a.createElement(a.Fragment,null,!d&&a.createElement("p",{id:"txtnograph"},"No Graph Available"),d&&a.createElement("iframe",{src:d,height:"600",width:"100%"})),(h||p||f||g||v||b||y||E)&&a.createElement(a.Fragment,null,a.createElement(l.a,{Moncon:m,buildingName:n,instance:t}))))))))))))},t}(a.Component);t.default=d},1487:function(e,t,n){"use strict";var a,i=n(2),r=(n.n(i),n(1298)),o=n.n(r),l=n(1215),s=(n.n(l),n(23)),c=n(663),u=n.n(c),d=n(116),m=n(678),h=n(10),p=n(650),f=n(31),g=n(710),v=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},E={height:600},x={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"\xb0F"}},S={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp, W, On/Off, Volts"}},w={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp"}},N={x:{type:"timeseries",tick:{fit:!1,format:"%m-%d %H:%M:%S"}},y:{label:"W"}},C={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"State"}},_={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Volts"}},T={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Hz"}},O={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"MWh"}},D=function(e){function t(t){var n=e.call(this,t)||this,a=new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-1)),i=new Date(Date.now());return n.state={graphData:{x:"x",columns:[]},graphData1:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},fourRelayGraphData:{x:"x",columns:[]},sixwattNodeGraphData:{x:"x",columns:[]},from:a,to:i,timeIntervalLog:{buildingName:n.props.buildingName,minutes:0,seconds:0},isRelayV4Device:!1,isRelayI1Device:!1,isIntesisDevice:!1,btnSeparateGraph:!1,btngraph:!1,showGraph:!1,isCBW406:!1,isCBW418:!1,isWattNode:!1,isATS:!1,showLoading:!0},n.handleGraph=n.handleGraph.bind(n),n.handleFromTimeChange=n.handleFromTimeChange.bind(n),n.handleToTimeChange=n.handleToTimeChange.bind(n),n.fetchIntesisGraphData=n.fetchIntesisGraphData.bind(n),n.getRelayV4GraphData=n.getRelayV4GraphData.bind(n),n.fetchGraphData=n.fetchGraphData.bind(n),n.handleTimeIntervalChange=n.handleTimeIntervalChange.bind(n),n.saveTimeLog=n.saveTimeLog.bind(n),n.getTimeLog=n.getTimeLog.bind(n),n.showgraphData=n.showgraphData.bind(n),n.getCBW406GraphData=n.getCBW406GraphData.bind(n),n.getCBW418GparhData=n.getCBW418GparhData.bind(n),n.getATSGraphData=n.getATSGraphData.bind(n),n.validation=n.validation.bind(n),n}return v(t,e),t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return Object(s.D)(!1),[4,this.getTimeLog()];case 1:return e.sent(),this.validation(),[2]}})})},t.prototype.validation=function(){var e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),i=e&&e.monitoringControlDeviceType&&"WattNode"==e.monitoringControlDeviceType;this.setState({isRelayV4Device:t,isIntesisDevice:n,isRelayI1Device:a,isWattNode:i})},t.prototype.handleGraph=function(){var e=[75,72,70,65,66,68,77,80],t=[73,78,72,68,74,80,65,69],n=[70,82,65,62,76,78,67,60],a=[];a=Object(s.q)(new Date(2020,0,1),new Date,8),e.unshift("heattemp"),t.unshift("cooltemp"),n.unshift("roomtemp"),a.unshift("x");var i={x:"x",columns:[a,e,t,n]};this.setState({graphData:i})},t.prototype.handleFromTimeChange=function(e){this.setState({from:e,graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]}})},t.prototype.handleToTimeChange=function(e){this.setState({to:e,graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]}})},t.prototype.handleTimeIntervalChange=function(e){var t=this.state.timeIntervalLog;t[e.target.name]=e.target.value,this.setState({timeIntervalLog:t})},t.prototype.fetchGraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l;return y(this,function(s){return e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),i=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ats"),r=e&&e.monitoringControlDeviceType&&"WattNode"==e.monitoringControlDeviceType,o=e&&e.monitoringControlDeviceType&&"CBW406"==e.monitoringControlDeviceType,l=e&&e.monitoringControlDeviceType&&"CBW418"==e.monitoringControlDeviceType,t&&(this.getRelayV4GraphData(),this.setState({isRelayV4Device:t})),a&&(this.getRelayI1GraphData(),this.setState({isRelayI1Device:a})),n&&(this.fetchIntesisGraphData(),this.setState({isIntesisDevice:n})),o&&(this.getCBW406GraphData(),this.setState({isCBW406:o})),l&&(this.getCBW418GparhData(),this.setState({isCBW418:l})),r&&(this.GetWattNodeBasicGraphData(),this.setState({isWattNode:r})),i&&(this.getATSGraphData(),this.setState({isATS:i})),[2]})})},t.prototype.fetchIntesisGraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,c,u,h,p,f=this;return y(this,function(g){switch(g.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,Object(d.a)(!0),i=[],r=[],o=[],l=[],c=[],u=[],h=[],p=[],e.deviceID?[4,Object(m.d)(e.deviceID,n,a).then(function(e){e.forEach(function(e){1!=isNaN(e.roomtemp)&&r.push(Object(s.a)(e.roomtemp)),1!=isNaN(e.setpoint)&&i.push(Object(s.a)(e.setpoint)),e.fanspeed?l.push(e.fanspeed):l.push("undefined"),e.horizontalvans?c.push(e.horizontalvans):c.push("undefined"),e.usermode?o.push(e.usermode):o.push("undefined"),e.verticalvans?u.push(e.verticalvans):u.push("undefined"),e.wifiSignal?h.push(e.wifiSignal):h.push("undefined"),p.push(new Date(e.timestamp))}),i.unshift("setpoint"),r.unshift("roomtemp"),l.unshift("fanspeed"),c.unshift("horizontalvans"),o.unshift("mode"),u.unshift("verticalvans"),h.unshift("wifiSignal"),p.unshift("x");var t={x:"x",columns:[p,i,r,l,c,o,u,h]};f.setState({graphData:t})})]:[3,2];case 1:g.sent(),g.label=2;case 2:return Object(d.a)(!1),[2]}})})},t.prototype.getRelayV4GraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,c,u,p,f,g,v,b,E,x,S,w,N,C,_,T,O,D,A,L,I,P,k,j,M,R,F;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,i=[],r=[],o=[],l=[],s=[],c=[],u=[],p=[],f=[],g=[],v=[],b=[],E=[],x=this.state.btngraph,e.deviceID?(x||Object(d.a)(!0,"loading graph data..."),[4,Object(m.g)(e.topic,n,a)]):[3,4];case 1:if(!((S=y.sent()).length>0))return[3,3];for(w=0;w<S.length;w++)(N=S[w])&&(i.push(N.mAmps_relay1),r.push(N.mAmps_relay2),o.push(N.mAmps_relay3),l.push(N.mAmps_relay4),s.push(N.nominal_src_volts),c.push(N.power_Wt_relay1),u.push(N.power_Wt_relay2),p.push(N.power_Wt_relay3),C=Object(m.a)(parseInt(N.v4relay_state)),E.push(new Date(N.timestamp)),3==C.length?C="0"+C:2==C.length?C="00"+C:1==C.length&&(C="000"+C),_=C[3],T=C[2],O=C[1],D=C[0],f.push(_||"0"),g.push(T||"0"),v.push(O||"0"),b.push(D||"0"));return[4,Object(m.x)(e.deviceName)];case 2:A=y.sent(),L=[],A[0]?(I=A[0],P=Object(h.g)(I.relayNames),L=P.split(",")):(L.push("Relay 1"),L.push("Relay 2"),L.push("Relay 3"),L.push("Relay 4")),i.unshift(L[0]+" Amp"),r.unshift(L[1]+" Amp"),o.unshift(L[2]+" Amp"),l.unshift(L[3]+" Amp"),s.unshift("Nominal Source Volts"),c.unshift(L[0]+" Watts"),u.unshift(L[1]+" Watts"),p.unshift(L[2]+" Watts"),E.unshift("x"),f.unshift(L[0]+" State"),g.unshift(L[1]+" State"),v.unshift(L[2]+" State"),b.unshift(L[3]+" State"),j={x:"x",columns:[E,i,r,o,l]},M={x:"x",columns:[E,c,u,p]},R={x:"x",columns:[E,f,g,v,b]},F={x:"x",columns:[E,s]},(k={x:"x",columns:[E,i,r,o,l,c,u,p,f,g,v,b,s]}).columns[k.columns.length-1][1]&&this.setState({fourRelayGraphData:k}),j.columns[j.columns.length-1][1]&&this.setState({graphData:j}),M.columns[M.columns.length-1][1]&&this.setState({graphData2:M}),R.columns[R.columns.length-1][1]&&this.setState({graphData3:R}),s[s.length-1]&&this.setState({graphData4:F}),y.label=3;case 3:x||Object(d.a)(!1),y.label=4;case 4:return[2]}})})},t.prototype.GetWattNodeBasicGraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,c,u,m,h,p,f,v,b,E,x,S,w,N,C,_,T,O,D,A,L,I;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,i=t.btngraph,r=e.topic.split(","),l=[],s=[],c=[],u=[],m=[],h=[],p=[],f=[],v=[],b=[],E=[],x=[],S=[],w=[],N=[],C=[],(o=[]).push("EnerygySum"),l.push("energyPOSSUM"),s.push("energySumR"),c.push("energyPosSumNR"),u.push("powerSum"),m.push("powerA"),h.push("powerB"),p.push("powerC"),f.push("voltA"),v.push("voltB"),b.push("voltC"),E.push("VoltAvgLL"),x.push("voltAB"),S.push("voltAC"),w.push("voltBC"),N.push("freq"),C.push("x"),e.deviceID?(i||Object(d.a)(!0,"loading graph data..."),[4,Object(g.h)(r[0],a,n)]):[3,2];case 1:(_=y.sent()).length>0&&(_.forEach(function(e){e&&(o.push(e.EnergySum),l.push(e.EnergyPosSum),s.push(e.EnergySumNR),c.push(e.EnergyPosSumNR),u.push(e.PowerSum),m.push(e.PowerA),h.push(e.PowerB),p.push(e.PowerC),f.push(e.VoltA),v.push(e.VoltC),b.push(e.VoltC),E.push(e.VoltAvgLL),x.push(e.VoltAB),S.push(e.VoltAC),w.push(e.VoltBC),N.push(e.Freq),C.push(new Date(e.timestamp)))}),O={x:"x",columns:[C,x,w,S]},D={x:"x",columns:[C,f,v,b]},A={x:"x",columns:[C,N]},L={x:"x",columns:[C,s]},I={x:"x",columns:[C,c]},(T={x:"x",columns:[C,m,h,p,u]}).columns[T.columns.length-1][1]&&this.setState({graphData:T}),O.columns[O.columns.length-1][1]&&this.setState({graphData2:O}),D.columns[D.columns.length-1][1]&&this.setState({graphData3:D}),A.columns[A.columns.length-1][1]&&this.setState({graphData4:A}),L.columns[L.columns.length-1][1]&&this.setState({graphData5:L}),I.columns[I.columns.length-1][1]&&this.setState({graphData6:I})),i||Object(d.a)(!1),y.label=2;case 2:return[2]}})})},t.prototype.getRelayI1GraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,c,u,d,p,f,g,v,b,E;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,i=[],r=[],o=[],l=[],s=[],c=[],u=[],d=[],[4,Object(m.f)(e.topic,a,n)];case 1:return(p=y.sent()).length>0?(p.forEach(function(e){e&&(i.push(e.i1relay_state),r.push(e.active_power_Watts),r.push(e.active_power_Watts),o.push(e.current_Amperes),l.push(e.frequency_Hz),s.push(e.import_active_energy_Wh),c.push(e.power_factor),u.push(e.voltage_volts),d.push(new Date(e.timestamp)))}),[4,Object(m.x)(e.deviceName)]):[3,3];case 2:f=y.sent(),g=[],f[0]?(v=f[0],b=Object(h.g)(v.relayNames),g=b.split(",")):g.push("Relay"),i.unshift(g[0]+" State"),r.unshift(g[0]+" Watts"),o.unshift(g[0]+"Amps"),l.unshift(g[0]+" frequency_Hz"),s.unshift(g[0]+" Watts/Hour"),c.unshift(g[0]+" Power Factor"),u.unshift(g[0]+" Volts"),d.unshift("x"),E={x:"x",columns:[d,i,r,r,o,l,s,c,u]},this.setState({graphData:E}),y.label=3;case 3:return[2]}})})},t.prototype.getCBW406GraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,c,u,m,h,p,f,v,b,E,x,S,w,N,C;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,(i=t.showLoading)&&Object(d.a)(!0),r=[],o=[],l=[],s=[],c=[],u=[],m=[],h=[],p=[],f=[],v=[],b=[],E=[],x=[],S=[],[4,Object(g.f)(e.topic,n,a)];case 1:return(w=y.sent()).length>0&&w.forEach(function(e){e&&(r.push(""+e.vin),o.push(""+e.register1),l.push(""+e.t3Ref1Front.toFixed(2)),s.push(""+e.t4Ref1Back.toFixed(2)),c.push(""+e.t5Ref1EvapFan.toFixed(2)),u.push(""+e.t6Ref1CompressorIn.toFixed(2)),m.push(""+e.t7Ref1CompressorOut.toFixed(2)),h.push(""+e.t8Ref1WaxProbe.toFixed(2)),p.push(""+e.t3Ref2Front.toFixed(2)),f.push(""+e.t4Ref2Back.toFixed(2)),v.push(""+e.t5Ref2EvapFan.toFixed(2)),b.push(""+e.t6Ref2CompressorIn.toFixed(2)),E.push(""+e.t7Ref2CompressorOut.toFixed(2)),x.push(""+e.t8Ref2WaxProbe.toFixed(2)),S.push(new Date(e.timestamp)))}),r.unshift("Vin"),o.unshift("Register"),l.unshift("Front"),s.unshift("Back"),c.unshift("Evaporator Fan"),u.unshift("Compressor In"),m.unshift("Compressor Out"),h.unshift("Solid"),p.unshift("Front"),f.unshift("Back"),v.unshift("Evaporator Fan"),b.unshift("Compressor In"),E.unshift("Compressor Out"),x.unshift("Solid"),S.unshift("x"),N={x:"x",columns:[r,o,l,s,c,u,m,h,S]},C={x:"x",columns:[r,o,p,f,v,b,E,x,S]},this.setState({graphData:N,graphData2:C}),i&&Object(d.a)(!1),[2]}})})},t.prototype.getCBW418GparhData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,c,u,m,h,p,f,v,b,E,x,S,w,N,C,_,T;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,Object(d.a)(!0),i=[],r=[],o=[],l=[],s=[],c=[],u=[],m=[],h=[],p=[],f=[],v=[],b=[],E=[],x=[],S=[],w=[],[4,Object(g.g)(e.topic,n,a)];case 1:return(N=y.sent()).length>0&&N.forEach(function(e){e&&(i.push(""+e.a13Ref1Compressor),r.push(""+e.a14Ref1FreezerDefrost),o.push(""+e.a15Ref1PressureSensor),l.push(""+e.a16Ref1DoorContact),s.push(""+e.analogInput5),c.push(""+e.analogInput6),u.push(""+e.analogInput7),m.push(""+e.analogInput8),h.push(""+e.register1),p.push(""+e.serialNumber),f.push(""+e.minRecRefresh),v.push(""+e.poweranalogInput5),b.push(""+e.poweranalogInput6),E.push(""+e.poweranalogInput7),x.push(""+e.poweranalogInput8),S.push(new Date(e.timestamp)),w.push(""+360*e.a13Ref1Compressor))}),i.unshift("Compressor"),r.unshift("Freezer Defrost"),o.unshift("Pressure Sensor"),l.unshift("Door Contact"),s.unshift("Analog Input 5"),c.unshift("Analog Input 6"),u.unshift("Analog Input 7"),m.unshift("Analog Input 8"),h.unshift("Register"),p.unshift("Serial Number"),f.unshift("Refresh"),v.unshift("Power Analog Input 5"),b.unshift("Power Analog Input 6"),E.unshift("Power Analog Input 7"),x.unshift("Power Analog Input 8"),w.unshift("Amalgamated Watts"),S.unshift("x"),_={x:"x",columns:[S,s,c,u,m]},T={x:"x",columns:[S,v,b,E,x]},(C={x:"x",columns:[S,i,r,o,l]}).columns[C.columns.length-1][1]&&this.setState({graphData:C}),_.columns[_.columns.length-1][1]&&this.setState({graphData2:_}),T.columns[T.columns.length-1][1]&&this.setState({graphData3:T}),Object(d.a)(!1),[2]}})})},t.prototype.getATSGraphData=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,c;return y(this,function(u){switch(u.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,i=[],r=[],o=[],l=e.topic&&e.topic.split(",")&&e.topic.split(",").length>0?e.topic.split(",")[0]:e.topic,[4,Object(g.e)(l,a,n)];case 1:return(s=u.sent()).length>0&&(s.forEach(function(e){e&&(i.push(e.Normal_Frequency),r.push(e.Emergency_Frequency),o.push(new Date(e.timestamp)))}),r.unshift("Emergency Frequency"),i.unshift("Normal Frequency"),o.unshift("x"),c={x:"x",xFormat:"%Y-%m-%dT%H:%M:%S.%LZ",columns:[o,r,i]},this.setState({graphData:c})),[2]}})})},t.prototype.saveTimeLog=function(){return b(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=this.state.timeIntervalLog,[4,Object(m.l)(e)];case 1:return t.sent()&&Object(f.b)("Successfully Save TimeInterval"),[2]}})})},t.prototype.getTimeLog=function(){return b(this,void 0,void 0,function(){var e,t;return y(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(m.h)(e)]:[3,2];case 1:(t=n.sent())[0]?this.setState({timeIntervalLog:t[0]}):this.setState({timeIntervalLog:{buildingName:this.props.buildingName,minutes:0,seconds:0}}),n.label=2;case 2:return[2]}})})},t.prototype.showgraphData=function(){var e=this,t=this.state,n=t.btngraph,i=t.to,r=t.from;n=!n,this.setState({btngraph:n},function(){n?(a&&clearInterval(a),a=setInterval(function(){i=new Date,(r=new Date).setMinutes(r.getMinutes()-30),e.setState({to:i,from:r},function(){e.fetchGraphData()})},5e3)):clearInterval(a)})},t.prototype.render=function(){var e=this,t=this.state,n=t.from,a=t.to,r=t.graphData,l=t.isRelayV4Device,s=t.graphData2,c=t.graphData3,d=t.graphData4,m=t.graphData5,h=t.graphData6,f=t.isRelayI1Device,g=t.isIntesisDevice,v=t.btnSeparateGraph,b=t.fourRelayGraphData,y=t.timeIntervalLog,D=t.btngraph,A=t.isCBW406,L=t.isCBW418,I=t.isWattNode,P=t.isATS,k={x:{show:!0},y:{show:!0}},j=i.createElement(o.a,{data:r,size:E,axis:l?w:x,unloadBeforeLoad:!0,grid:k}),M=i.createElement(o.a,{data:r,size:E,axis:f?w:x,unloadBeforeLoad:!0,grid:k}),R=i.createElement(o.a,{data:b,size:E,axis:S,unloadBeforeLoad:!0,grid:k}),F=i.createElement(o.a,{data:s,size:E,axis:N,unloadBeforeLoad:!0,grid:k}),B=i.createElement(o.a,{data:c,size:E,axis:C,unloadBeforeLoad:!0,grid:k}),V=i.createElement(o.a,{data:d,size:E,axis:_,unloadBeforeLoad:!0,grid:k}),G=i.createElement(o.a,{data:r,size:E,axis:x,unloadBeforeLoad:!0,grid:k}),H=i.createElement(o.a,{data:s,size:E,axis:x,unloadBeforeLoad:!0,grid:k}),z=i.createElement(o.a,{data:r,size:E,axis:w,unloadBeforeLoad:!0,grid:k}),q=i.createElement(o.a,{data:r,size:E,axis:N,unloadBeforeLoad:!0,grid:k}),W=i.createElement(o.a,{data:s,size:E,axis:_,unloadBeforeLoad:!0,grid:k}),U=i.createElement(o.a,{data:c,size:E,axis:_,unloadBeforeLoad:!0,grid:k}),X=i.createElement(o.a,{data:d,size:E,axis:T,unloadBeforeLoad:!0,grid:k}),Y=i.createElement(o.a,{data:m,size:E,axis:O,unloadBeforeLoad:!0,grid:k}),Q=i.createElement(o.a,{data:h,size:E,axis:O,unloadBeforeLoad:!0,grid:k}),J=i.createElement(o.a,{data:s,size:E,axis:w,unloadBeforeLoad:!0,grid:k}),Z=i.createElement(o.a,{data:c,size:E,axis:w,unloadBeforeLoad:!0,grid:k}),K=i.createElement(o.a,{data:r,size:E,axis:T,unloadBeforeLoad:!0,grid:k});return i.createElement("div",{className:"row col-md-12",id:"divGraphs"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2 col-md-offset-10"})),i.createElement("br",null),!D&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row showhide timeLine col-md-6"},i.createElement("div",{className:"col-md-4 col-sm-6"},i.createElement("div",{className:"col-md-2 padding-5"},i.createElement("label",null,"From: \xa0")),i.createElement("div",{className:"col-md-10 no-padding"},i.createElement(u.a,{id:"startTime",className:"form-control",selected:n,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),i.createElement("div",{className:"col-md-4 col-sm-6"},i.createElement("div",{className:"col-md-1 padding-5"},i.createElement("label",null,"To: \xa0")),i.createElement("div",{className:"col-md-10 no-padding"},i.createElement(u.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))))),i.createElement("div",{className:"row"},!D&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement("div",{className:"col-md-2 padding-5"},i.createElement("label",{style:{color:"#fff"}},"From: \xa0")),i.createElement("div",{className:"col-md-10 no-padding"},i.createElement(u.a,{id:"startTime",className:"form-control",selected:n,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement("div",{className:"col-md-1 padding-5"},i.createElement("label",{style:{color:"#fff"}},"To: \xa0")),i.createElement("div",{className:"col-md-10 no-padding"},i.createElement(u.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),i.createElement("div",{className:"col-md-6 col-sm-6"},i.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.fetchGraphData()}},i.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Load Graph"),i.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({btnSeparateGraph:!v})},style:{margin:"0 5px"}},i.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),v?"Combine":"Separate"," Graphs"),i.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:this.showgraphData,style:{margin:"0 5px"}},i.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),D?"Hide":"Show"," Live Graph"))),g&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},j),f&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},M),A&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Refrigerator 1")),G),A&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Refrigerator 2")),H),L&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Refrigerator ")),z),L&&s&&s.columns&&s.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Analog Inputs")),J),L&&c&&c.columns&&c.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Power Analog Inputs")),Z),P&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},K),I&&r&&r.columns&&r.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Power")),q),I&&s&&s.columns&&s.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Phase Voltage")),W),I&&c&&c.columns&&c.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Voltage")),U),I&&d&&d.columns&&d.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Frequency")),X),I&&m&&m.columns&&m.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Energy Sum Non-resettable")),Y),I&&h&&h.columns&&h.columns.length>0&&i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,"Positive Energy Sum Non-resettable")),Q),!v&&l&&b&&b.columns&&b.columns.length>0&&i.createElement("div",{className:"row margin-top-25px  pdfDiv",id:"DeviceStatusGraph"},R),v&&l&&r&&s&&c&&d&&c.columns[1]&&d.columns[1]&&c.columns&&r.columns&&c.columns.length>0&&d.columns&&d.columns.length>0&&r.columns.length>0&&i.createElement(i.Fragment,null," ",i.createElement("div",{id:"DeviceStatusGraph"},i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},j),i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphWatt"},F),i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphState"},B),i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphVolts"},V))," "),i.createElement("button",{id:"addTimeIntervalLog",className:"hidden","data-toggle":"modal","data-target":"#addTimeIntervalLogDialog",title:"Add"}," "," ",i.createElement("i",{className:"fa fa-plus"})," "),i.createElement(p.a,{id:"addTimeIntervalLogDialog",saveButtonText:"Save",heading:"Time Interval Log",onSaveButtonClick:function(){e.saveTimeLog()},disableSaveButton:!1},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3 padding-5"},i.createElement("label",null,"Time Interval:")))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 col-md-offset-2"},i.createElement("div",{className:"col-md-1 padding-5"},i.createElement("label",null,"Minute:")," "),i.createElement("div",{className:"col-md-3"},i.createElement("input",{className:"form-control",type:"number",name:"minutes",value:y.minutes,onChange:function(t){e.handleTimeIntervalChange(t)}})),i.createElement("div",{className:"col-md-1 padding-5"},i.createElement("label",null,"Second:")," "),i.createElement("div",{className:"col-md-3"},i.createElement("input",{className:"form-control",type:"number",name:"seconds",value:y.seconds,onChange:function(t){e.handleTimeIntervalChange(t)}}))))))},t}(i.Component);t.a=D},1488:function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";var e,t,a={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},l=function(e){return e||0===e},s=function(e){return"function"===typeof e},c=function(e){return Array.isArray(e)},u=function(e){return"string"===typeof e},d=function(e){return"undefined"===typeof e},m=function(e){return"undefined"!==typeof e},h=function(e){return 10*Math.ceil(e/10)},p=function(e){return Math.ceil(e)+.5},f=function(e){return e[1]-e[0]},g=function(e){return"undefined"===typeof e||null===e||u(e)&&0===e.length||"object"===("undefined"===typeof e?"undefined":i(e))&&0===Object.keys(e).length},v=function(e){return!C.isEmpty(e)},b=function(e,t,n){return m(e[t])?e[t]:n},y=function(e,t){var n=!1;return Object.keys(e).forEach(function(a){e[a]===t&&(n=!0)}),n},E=function(e){return"string"===typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},x=function(e){var t=e.getBoundingClientRect(),n=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)];return{x:n[0].x,y:Math.min(n[0].y,n[1].y),width:t.width,height:t.height}};function S(e,t){this.component=e,this.params=t||{},this.d3=e.d3,this.scale=this.d3.scale.linear(),this.range,this.orient="bottom",this.innerTickSize=6,this.outerTickSize=this.params.withOuterTick?6:0,this.tickPadding=3,this.tickValues=null,this.tickFormat,this.tickArguments,this.tickOffset=0,this.tickCulling=!0,this.tickCentered,this.tickTextCharSize,this.tickTextRotate=this.params.tickTextRotate,this.tickLength,this.axis=this.generateAxis()}(t=S.prototype).axisX=function(e,t,n){e.attr("transform",function(e){return"translate("+Math.ceil(t(e)+n)+", 0)"})},t.axisY=function(e,t){e.attr("transform",function(e){return"translate(0,"+Math.ceil(t(e))+")"})},t.scaleExtent=function(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]},t.generateTicks=function(e){var t,n,a=[];if(e.ticks)return e.ticks.apply(e,this.tickArguments);for(n=e.domain(),t=Math.ceil(n[0]);t<n[1];t++)a.push(t);return a.length>0&&a[0]>0&&a.unshift(a[0]-(a[1]-a[0])),a},t.copyScale=function(){var e,t=this.scale.copy();return this.params.isCategory&&(e=this.scale.domain(),t.domain([e[0],e[1]-1])),t},t.textFormatted=function(e){var t=this.tickFormat?this.tickFormat(e):e;return"undefined"!==typeof t?t:""},t.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},t.updateTickTextCharSize=function(e){var t=this;if(t.tickTextCharSize)return t.tickTextCharSize;var n={h:11.5,w:5.5};return e.select("text").text(function(e){return t.textFormatted(e)}).each(function(e){var a=this.getBoundingClientRect(),i=t.textFormatted(e),r=a.height,o=i?a.width/i.length:void 0;r&&o&&(n.h=r,n.w=o)}).text(""),t.tickTextCharSize=n,n},t.transitionise=function(e){return this.params.withoutTransition?e:this.d3.transition(e)},t.isVertical=function(){return"left"===this.orient||"right"===this.orient},t.tspanData=function(e,t,n,a){var i=this.params.tickMultiline?this.splitTickText(e,n,a):[].concat(this.textFormatted(e));return this.params.tickMultiline&&this.params.tickMultilineMax>0&&(i=this.ellipsify(i,this.params.tickMultilineMax)),i.map(function(e){return{index:t,splitted:e,length:i.length}})},t.splitTickText=function(e,t,n){var a,i,r,o=this,l=o.textFormatted(e),s=o.params.tickWidth;if("[object Array]"===Object.prototype.toString.call(l))return l;return(!s||s<=0)&&(s=o.isVertical()?95:o.params.isCategory?Math.ceil(n(t[1])-n(t[0]))-12:110),function e(t,n){i=void 0;for(var l=1;l<n.length;l++)if(" "===n.charAt(l)&&(i=l),a=n.substr(0,l+1),r=o.tickTextCharSize.w*a.length,s<r)return e(t.concat(n.substr(0,i||l)),n.slice(i?i+1:l));return t.concat(n)}([],l+"")},t.ellipsify=function(e,t){if(e.length<=t)return e;for(var n=e.slice(0,t),a=3,i=t-1;i>=0;i--){var r=n[i].length;if(n[i]=n[i].substr(0,r-a).padEnd(r,"."),(a-=r)<=0)break}return n},t.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},t.lineY2=function(e){var t=this.scale(e)+(this.tickCentered?0:this.tickOffset);return this.range[0]<t&&t<this.range[1]?this.innerTickSize:0},t.textY=function(){var e=this.tickTextRotate;return e?11.5-e/15*2.5*(e>0?1:-1):this.tickLength},t.textTransform=function(){var e=this.tickTextRotate;return e?"rotate("+e+")":""},t.textTextAnchor=function(){var e=this.tickTextRotate;return e?e>0?"start":"end":"middle"},t.tspanDx=function(){var e=this.tickTextRotate;return e?8*Math.sin(Math.PI*(e/180)):0},t.tspanDy=function(e,t){var n=this.tickTextCharSize.h;return 0===t&&(n=this.isVertical()?-((e.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),n},t.generateAxis=function(){var e=this,t=e.d3,n=e.params;function a(i){i.each(function(){var i,r,o,l=a.g=t.select(this),s=this.__chart__||e.scale,c=this.__chart__=e.copyScale(),u=e.tickValues?e.tickValues:e.generateTicks(c),d=l.selectAll(".tick").data(u,c),m=d.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),h=d.exit().remove(),p=e.transitionise(d).style("opacity",1);n.isCategory?(e.tickOffset=Math.ceil((c(1)-c(0))/2),r=e.tickCentered?0:e.tickOffset,o=e.tickCentered?e.tickOffset:0):e.tickOffset=r=0,m.append("line"),m.append("text"),e.updateRange(),e.updateTickLength(),e.updateTickTextCharSize(l.select(".tick"));var f=p.select("line"),g=p.select("text"),v=d.select("text").selectAll("tspan").data(function(t,n){return e.tspanData(t,n,u,c)});v.enter().append("tspan"),v.exit().remove(),v.text(function(e){return e.splitted});var b=l.selectAll(".domain").data([0]),y=(b.enter().append("path").attr("class","domain"),e.transitionise(b));switch(e.orient){case"bottom":i=e.axisX,f.attr("x1",r).attr("x2",r).attr("y2",function(t,n){return e.lineY2(t,n)}),g.attr("x",0).attr("y",function(t,n){return e.textY(t,n)}).attr("transform",function(t,n){return e.textTransform(t,n)}).style("text-anchor",function(t,n){return e.textTextAnchor(t,n)}),v.attr("x",0).attr("dy",function(t,n){return e.tspanDy(t,n)}).attr("dx",function(t,n){return e.tspanDx(t,n)}),y.attr("d","M"+e.range[0]+","+e.outerTickSize+"V0H"+e.range[1]+"V"+e.outerTickSize);break;case"top":i=e.axisX,f.attr("x1",r).attr("x2",r).attr("y2",function(t,n){return-1*e.lineY2(t,n)}),g.attr("x",0).attr("y",function(t,a){return-1*e.textY(t,a)-(n.isCategory?2:e.tickLength-2)}).attr("transform",function(t,n){return e.textTransform(t,n)}).style("text-anchor",function(t,n){return e.textTextAnchor(t,n)}),v.attr("x",0).attr("dy",function(t,n){return e.tspanDy(t,n)}).attr("dx",function(t,n){return e.tspanDx(t,n)}),y.attr("d","M"+e.range[0]+","+-e.outerTickSize+"V0H"+e.range[1]+"V"+-e.outerTickSize);break;case"left":i=e.axisY,f.attr("x2",-e.innerTickSize).attr("y1",o).attr("y2",o),g.attr("x",-e.tickLength).attr("y",e.tickOffset).style("text-anchor","end"),v.attr("x",-e.tickLength).attr("dy",function(t,n){return e.tspanDy(t,n)}),y.attr("d","M"+-e.outerTickSize+","+e.range[0]+"H0V"+e.range[1]+"H"+-e.outerTickSize);break;case"right":i=e.axisY,f.attr("x2",e.innerTickSize).attr("y1",o).attr("y2",o),g.attr("x",e.tickLength).attr("y",e.tickOffset).style("text-anchor","start"),v.attr("x",e.tickLength).attr("dy",function(t,n){return e.tspanDy(t,n)}),y.attr("d","M"+e.outerTickSize+","+e.range[0]+"H0V"+e.range[1]+"H"+e.outerTickSize)}if(c.rangeBand){var E=c,x=E.rangeBand()/2;s=c=function(e){return E(e)+x}}else s.rangeBand?s=c:h.call(i,c,e.tickOffset);m.call(i,s,e.tickOffset),p.call(i,c,e.tickOffset)})}return a.scale=function(t){return arguments.length?(e.scale=t,a):e.scale},a.orient=function(t){return arguments.length?(e.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",a):e.orient},a.tickFormat=function(t){return arguments.length?(e.tickFormat=t,a):e.tickFormat},a.tickCentered=function(t){return arguments.length?(e.tickCentered=t,a):e.tickCentered},a.tickOffset=function(){return e.tickOffset},a.tickInterval=function(){var t;return(t=n.isCategory?2*e.tickOffset:(a.g.select("path.domain").node().getTotalLength()-2*e.outerTickSize)/a.g.selectAll("line").size())===1/0?0:t},a.ticks=function(){return arguments.length?(e.tickArguments=arguments,a):e.tickArguments},a.tickCulling=function(t){return arguments.length?(e.tickCulling=t,a):e.tickCulling},a.tickValues=function(t){if("function"===typeof t)e.tickValues=function(){return t(e.scale.domain())};else{if(!arguments.length)return e.tickValues;e.tickValues=t}return a},a};var w=function(n){function a(n){r(this,a);var i={fn:e,internal:{fn:t}},l=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n,"axis",i));return l.d3=n.d3,l.internal=S,l}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,T),a}();(e=w.prototype).init=function(){var e=this.owner,t=e.config,n=e.main;e.axes.x=n.append("g").attr("class",a.axis+" "+a.axisX).attr("clip-path",t.axis_x_inner?"":e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",t.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",a.axisXLabel).attr("transform",t.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=n.append("g").attr("class",a.axis+" "+a.axisY).attr("clip-path",t.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",t.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",a.axisYLabel).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=n.append("g").attr("class",a.axis+" "+a.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",t.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",a.axisY2Label).attr("transform",t.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},e.getXAxis=function(e,t,n,a,i,r,o){var l=this.owner,s=l.config,c={isCategory:l.isCategorized(),withOuterTick:i,tickMultiline:s.axis_x_tick_multiline,tickMultilineMax:s.axis_x_tick_multiline?Number(s.axis_x_tick_multilineMax):0,tickWidth:s.axis_x_tick_width,tickTextRotate:o?0:s.axis_x_tick_rotate,withoutTransition:r},u=new this.internal(this,c).axis.scale(e).orient(t);return l.isTimeSeries()&&a&&"function"!==typeof a&&(a=a.map(function(e){return l.parseDate(e)})),u.tickFormat(n).tickValues(a),l.isCategorized()&&(u.tickCentered(s.axis_x_tick_centered),g(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1)),u},e.updateXAxisTickValues=function(e,t){var n,a=this.owner,i=a.config;return(i.axis_x_tick_fit||i.axis_x_tick_count)&&(n=this.generateTickValues(a.mapTargetsToUniqueXs(e),i.axis_x_tick_count,a.isTimeSeries())),t?t.tickValues(n):(a.xAxis.tickValues(n),a.subXAxis.tickValues(n)),n},e.getYAxis=function(e,t,n,a,i,r,o){var l=this.owner,s=l.config,c={withOuterTick:i,withoutTransition:r,tickTextRotate:o?0:s.axis_y_tick_rotate},u=new this.internal(this,c).axis.scale(e).orient(t).tickFormat(n);return l.isTimeSeriesY()?u.ticks(l.d3.time[s.axis_y_tick_time_value],s.axis_y_tick_time_interval):u.tickValues(a),u},e.getId=function(e){var t=this.owner.config;return e in t.data_axes?t.data_axes[e]:"y"},e.getXAxisTickFormat=function(){var e=this.owner,t=e.config,n=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(e){return e<0?e.toFixed(0):e};return t.axis_x_tick_format&&(s(t.axis_x_tick_format)?n=t.axis_x_tick_format:e.isTimeSeries()&&(n=function(n){return n?e.axisTimeFormat(t.axis_x_tick_format)(n):""})),s(n)?function(t){return n.call(e,t)}:n},e.getTickValues=function(e,t){return e||(t?t.tickValues():void 0)},e.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},e.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},e.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},e.getLabelOptionByAxisId=function(e){var t,n=this.owner.config;return"y"===e?t=n.axis_y_label:"y2"===e?t=n.axis_y2_label:"x"===e&&(t=n.axis_x_label),t},e.getLabelText=function(e){var t=this.getLabelOptionByAxisId(e);return u(t)?t:t?t.text:null},e.setLabelText=function(e,t){var n=this.owner.config,a=this.getLabelOptionByAxisId(e);u(a)?"y"===e?n.axis_y_label=t:"y2"===e?n.axis_y2_label=t:"x"===e&&(n.axis_x_label=t):a&&(a.text=t)},e.getLabelPosition=function(e,t){var n=this.getLabelOptionByAxisId(e),a=n&&"object"===("undefined"===typeof n?"undefined":i(n))&&n.position?n.position:t;return{isInner:a.indexOf("inner")>=0,isOuter:a.indexOf("outer")>=0,isLeft:a.indexOf("left")>=0,isCenter:a.indexOf("center")>=0,isRight:a.indexOf("right")>=0,isTop:a.indexOf("top")>=0,isMiddle:a.indexOf("middle")>=0,isBottom:a.indexOf("bottom")>=0}},e.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},e.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},e.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},e.getLabelPositionById=function(e){return"y2"===e?this.getY2AxisLabelPosition():"y"===e?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},e.textForXAxisLabel=function(){return this.getLabelText("x")},e.textForYAxisLabel=function(){return this.getLabelText("y")},e.textForY2AxisLabel=function(){return this.getLabelText("y2")},e.xForAxisLabel=function(e,t){var n=this.owner;return e?t.isLeft?0:t.isCenter?n.width/2:n.width:t.isBottom?-n.height:t.isMiddle?-n.height/2:0},e.dxForAxisLabel=function(e,t){return e?t.isLeft?"0.5em":t.isRight?"-0.5em":"0":t.isTop?"-0.5em":t.isBottom?"0.5em":"0"},e.textAnchorForAxisLabel=function(e,t){return e?t.isLeft?"start":t.isCenter?"middle":"end":t.isBottom?"start":t.isMiddle?"middle":"end"},e.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},e.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},e.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},e.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},e.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},e.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},e.dyForXAxisLabel=function(){var e=this.owner,t=e.config,n=this.getXAxisLabelPosition();return t.axis_rotated?n.isInner?"1.2em":-25-(e.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":t.axis_x_height?t.axis_x_height-10:"3em"},e.dyForYAxisLabel=function(){var e=this.owner,t=this.getYAxisLabelPosition();return e.config.axis_rotated?t.isInner?"-0.5em":"3em":t.isInner?"1.2em":-10-(e.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},e.dyForY2AxisLabel=function(){var e=this.owner,t=this.getY2AxisLabelPosition();return e.config.axis_rotated?t.isInner?"1.2em":"-2.2em":t.isInner?"-0.5em":15+(e.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},e.textAnchorForXAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(!e.config.axis_rotated,this.getXAxisLabelPosition())},e.textAnchorForYAxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getYAxisLabelPosition())},e.textAnchorForY2AxisLabel=function(){var e=this.owner;return this.textAnchorForAxisLabel(e.config.axis_rotated,this.getY2AxisLabelPosition())},e.getMaxTickWidth=function(e,t){var n,a,i,r,o=this.owner,l=o.config,s=0;return t&&o.currentMaxTickWidths[e]?o.currentMaxTickWidths[e]:(o.svg&&(n=o.filterTargetsToShow(o.data.targets),"y"===e?(a=o.y.copy().domain(o.getYDomain(n,"y")),i=this.getYAxis(a,o.yOrient,l.axis_y_tick_format,o.yAxisTickValues,!1,!0,!0)):"y2"===e?(a=o.y2.copy().domain(o.getYDomain(n,"y2")),i=this.getYAxis(a,o.y2Orient,l.axis_y2_tick_format,o.y2AxisTickValues,!1,!0,!0)):(a=o.x.copy().domain(o.getXDomain(n)),i=this.getXAxis(a,o.xOrient,o.xAxisTickFormat,o.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,i)),(r=o.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(i).each(function(){o.d3.select(this).selectAll("text").each(function(){var e=this.getBoundingClientRect();s<e.width&&(s=e.width)}),r.remove()})),o.currentMaxTickWidths[e]=s<=0?o.currentMaxTickWidths[e]:s,o.currentMaxTickWidths[e])},e.updateLabels=function(e){var t=this.owner,n=t.main.select("."+a.axisX+" ."+a.axisXLabel),i=t.main.select("."+a.axisY+" ."+a.axisYLabel),r=t.main.select("."+a.axisY2+" ."+a.axisY2Label);(e?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(e?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(e?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},e.getPadding=function(e,t,n,a){var i="number"===typeof e?e:e[t];return l(i)?"ratio"===e.unit?e[t]*a:this.convertPixelsToAxisPadding(i,a):n},e.convertPixelsToAxisPadding=function(e,t){var n=this.owner;return t*(e/(n.config.axis_rotated?n.width:n.height))},e.generateTickValues=function(e,t,n){var a,i,r,o,l,c,u,d=e;if(t)if(1===(a=s(t)?t():t))d=[e[0]];else if(2===a)d=[e[0],e[e.length-1]];else if(a>2){for(o=a-2,i=e[0],l=((r=e[e.length-1])-i)/(o+1),d=[i],c=0;c<o;c++)u=+i+l*(c+1),d.push(n?new Date(u):u);d.push(r)}return n||(d=d.sort(function(e,t){return e-t})),d},e.generateTransitions=function(e){var t=this.owner.axes;return{axisX:e?t.x.transition().duration(e):t.x,axisY:e?t.y.transition().duration(e):t.y,axisY2:e?t.y2.transition().duration(e):t.y2,axisSubX:e?t.subx.transition().duration(e):t.subx}},e.redraw=function(e,t){var n=this.owner;n.axes.x.style("opacity",t?0:1),n.axes.y.style("opacity",t?0:1),n.axes.y2.style("opacity",t?0:1),n.axes.subx.style("opacity",t?0:1),e.axisX.call(n.xAxis),e.axisY.call(n.yAxis),e.axisY2.call(n.y2Axis),e.axisSubX.call(n.subXAxis)};var N,C,_={version:"0.4.24"};function T(e,t,n){this.owner=e,_.chart.internal[t]=n}function O(e){var t=this.internal=new D(this);t.loadConfig(e),t.beforeInit(e),t.init(),t.afterInit(e),function e(t,n,a){Object.keys(t).forEach(function(i){n[i]=t[i].bind(a),Object.keys(t[i]).length>0&&e(t[i],n[i],a)})}(N,this,this)}function D(e){var t=this;t.d3=window.d3?window.d3:n(1489),t.api=e,t.config=t.getDefaultConfig(),t.data={},t.cache={},t.axes={}}return _.generate=function(e){return new O(e)},_.chart={fn:O.prototype,internal:{fn:D.prototype}},N=_.chart.fn,(C=_.chart.internal.fn).beforeInit=function(){},C.afterInit=function(){},C.init=function(){var e=this,t=e.config;if(e.initParams(),t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_headers,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else{if(!t.data_columns)throw Error("url or json or rows or columns is required.");e.initWithData(e.convertColumnsToData(t.data_columns))}},C.initParams=function(){var e=this,t=e.d3,n=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=n.data_xLocaltime?t.time.format:t.time.format.utc,e.axisTimeFormat=n.axis_x_localtime?t.time.format:t.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&1!==e.getDate()}],["%-m/%-d",function(e){return 1!==e.getDate()}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",e.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",e.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",e.subXOrient=n.axis_rotated?"left":"bottom",e.isLegendRight="right"===n.legend_position,e.isLegendInset="inset"===n.legend_position,e.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,e.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=t.selectAll([])},C.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},C.initWithData=function(e){var t,n,i=this,r=i.d3,o=i.config,l=!0;i.axis=new w(i),i.initPie&&i.initPie(),i.initBrush&&i.initBrush(),i.initZoom&&i.initZoom(),o.bindto?"function"===typeof o.bindto.node?i.selectChart=o.bindto:i.selectChart=r.select(o.bindto):i.selectChart=r.selectAll([]),i.selectChart.empty()&&(i.selectChart=r.select(document.createElement("div")).style("opacity",0),i.observeInserted(i.selectChart),l=!1),i.selectChart.html("").classed("c3",!0),i.data.xs={},i.data.targets=i.convertDataToTargets(e),o.data_filter&&(i.data.targets=i.data.targets.filter(o.data_filter)),o.data_hide&&i.addHiddenTargetIds(!0===o.data_hide?i.mapToIds(i.data.targets):o.data_hide),o.legend_hide&&i.addHiddenLegendIds(!0===o.legend_hide?i.mapToIds(i.data.targets):o.legend_hide),i.updateSizes(),i.updateScales(),i.x.domain(r.extent(i.getXDomain(i.data.targets))),i.y.domain(i.getYDomain(i.data.targets,"y")),i.y2.domain(i.getYDomain(i.data.targets,"y2")),i.subX.domain(i.x.domain()),i.subY.domain(i.y.domain()),i.subY2.domain(i.y2.domain()),i.orgXDomain=i.x.domain(),i.brush&&i.brush.scale(i.subX),o.zoom_enabled&&i.zoom.scale(i.x),i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return o.onmouseover.call(i)}).on("mouseleave",function(){return o.onmouseout.call(i)}),i.config.svg_classname&&i.svg.attr("class",i.config.svg_classname),t=i.svg.append("defs"),i.clipChart=i.appendClip(t,i.clipId),i.clipXAxis=i.appendClip(t,i.clipIdForXAxis),i.clipYAxis=i.appendClip(t,i.clipIdForYAxis),i.clipGrid=i.appendClip(t,i.clipIdForGrid),i.clipSubchart=i.appendClip(t,i.clipIdForSubchart),i.updateSvgSize(),n=i.main=i.svg.append("g").attr("transform",i.getTranslate("main")),i.initSubchart&&i.initSubchart(),i.initTooltip&&i.initTooltip(),i.initLegend&&i.initLegend(),i.initTitle&&i.initTitle(),n.append("text").attr("class",a.text+" "+a.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),i.initRegion(),i.initGrid(),n.append("g").attr("clip-path",i.clipPath).attr("class",a.chart),o.grid_lines_front&&i.initGridLines(),i.initEventRect(),i.initChartElements(),n.insert("rect",o.zoom_privileged?null:"g."+a.regions).attr("class",a.zoomRect).attr("width",i.width).attr("height",i.height).style("opacity",0).on("dblclick.zoom",null),o.axis_x_extent&&i.brush.extent(i.getDefaultExtent()),i.axis.init(),i.updateTargets(i.data.targets),l&&(i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),i.bindResize(),i.api.element=i.selectChart.node()},C.smoothLines=function(e,t){var n=this;"grid"===t&&e.each(function(){var e=n.d3.select(this),t=e.attr("x1"),a=e.attr("x2"),i=e.attr("y1"),r=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(a),y1:Math.ceil(i),y2:Math.ceil(r)})})},C.updateSizes=function(){var e=this,t=e.config,n=e.legend?e.getLegendHeight():0,a=e.legend?e.getLegendWidth():0,i=e.isLegendRight||e.isLegendInset?0:n,r=e.hasArcType(),o=t.axis_rotated||r?0:e.getHorizontalAxisHeight("x"),l=t.subchart_show&&!r?t.subchart_size_height+o:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:r?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+i+e.getCurrentPaddingBottom(),left:l+(r?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:r?0:e.getCurrentPaddingRight(),bottom:o+l+i+e.getCurrentPaddingBottom(),left:r?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+i,left:e.rotated_padding_left}:{top:e.currentHeight-l-i,right:NaN,bottom:o+i,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(n,a),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?a+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!t.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&r&&(e.margin3.left=e.arcWidth/2+1.1*e.radiusExpanded)},C.updateTargets=function(e){var t=this;t.updateTargetsForText(e),t.updateTargetsForBar(e),t.updateTargetsForLine(e),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(e),t.updateTargetsForSubchart&&t.updateTargetsForSubchart(e),t.showTargets()},C.showTargets=function(){var e=this;e.svg.selectAll("."+a.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},C.redraw=function(e,t){var n,i,r,o,l,s,c,u,d,m,h,p,f,g,v,y,E,x,S,w,N,C,_,T,O,D,A,L,I,P=this,k=P.main,j=P.d3,M=P.config,R=P.getShapeIndices(P.isAreaType),F=P.getShapeIndices(P.isBarType),B=P.getShapeIndices(P.isLineType),V=P.hasArcType(),G=P.filterTargetsToShow(P.data.targets),H=P.xv.bind(P);if(n=b(e=e||{},"withY",!0),i=b(e,"withSubchart",!0),r=b(e,"withTransition",!0),s=b(e,"withTransform",!1),c=b(e,"withUpdateXDomain",!1),u=b(e,"withUpdateOrgXDomain",!1),d=b(e,"withTrimXDomain",!0),f=b(e,"withUpdateXAxis",c),m=b(e,"withLegend",!1),h=b(e,"withEventRect",!0),p=b(e,"withDimension",!0),o=b(e,"withTransitionForExit",r),l=b(e,"withTransitionForAxis",r),S=r?M.transition_duration:0,w=o?S:0,N=l?S:0,t=t||P.axis.generateTransitions(N),m&&M.legend_show?P.updateLegend(P.mapToIds(P.data.targets),e,t):p&&P.updateDimension(!0),P.isCategorized()&&0===G.length&&P.x.domain([0,P.axes.x.selectAll(".tick").size()]),G.length?(P.updateXDomain(G,c,u,d),M.axis_x_tick_values||(T=P.axis.updateXAxisTickValues(G))):(P.xAxis.tickValues([]),P.subXAxis.tickValues([])),M.zoom_rescale&&!e.flow&&(A=P.x.orgDomain()),P.y.domain(P.getYDomain(G,"y",A)),P.y2.domain(P.getYDomain(G,"y2",A)),!M.axis_y_tick_values&&M.axis_y_tick_count&&P.yAxis.tickValues(P.axis.generateTickValues(P.y.domain(),M.axis_y_tick_count)),!M.axis_y2_tick_values&&M.axis_y2_tick_count&&P.y2Axis.tickValues(P.axis.generateTickValues(P.y2.domain(),M.axis_y2_tick_count)),P.axis.redraw(t,V),P.axis.updateLabels(r),(c||f)&&G.length)if(M.axis_x_tick_culling&&T){for(O=1;O<T.length;O++)if(T.length/O<M.axis_x_tick_culling_max){D=O;break}P.svg.selectAll("."+a.axisX+" .tick text").each(function(e){var t=T.indexOf(e);t>=0&&j.select(this).style("display",t%D?"none":"block")})}else P.svg.selectAll("."+a.axisX+" .tick text").style("display","block");g=P.generateDrawArea?P.generateDrawArea(R,!1):void 0,v=P.generateDrawBar?P.generateDrawBar(F):void 0,y=P.generateDrawLine?P.generateDrawLine(B,!1):void 0,E=P.generateXYForText(R,F,B,!0),x=P.generateXYForText(R,F,B,!1),n&&(P.subY.domain(P.getYDomain(G,"y")),P.subY2.domain(P.getYDomain(G,"y2"))),P.updateXgridFocus(),k.select("text."+a.text+"."+a.empty).attr("x",P.width/2).attr("y",P.height/2).text(M.data_empty_label_text).transition().style("opacity",G.length?0:1),P.updateGrid(S),P.updateRegion(S),P.updateBar(w),P.updateLine(w),P.updateArea(w),P.updateCircle(),P.hasDataLabel()&&P.updateText(w),P.redrawTitle&&P.redrawTitle(),P.redrawArc&&P.redrawArc(S,w,s),P.redrawSubchart&&P.redrawSubchart(i,t,S,w,R,F,B),k.selectAll("."+a.selectedCircles).filter(P.isBarType.bind(P)).selectAll("circle").remove(),M.interaction_enabled&&!e.flow&&h&&(P.redrawEventRect(),P.updateZoom&&P.updateZoom()),P.updateCircleY(),L=(P.config.axis_rotated?P.circleY:P.circleX).bind(P),I=(P.config.axis_rotated?P.circleX:P.circleY).bind(P),e.flow&&(_=P.generateFlow({targets:G,flow:e.flow,duration:e.flow.duration,drawBar:v,drawLine:y,drawArea:g,cx:L,cy:I,xv:H,xForText:E,yForText:x})),(S||_)&&P.isTabVisible()?j.transition().duration(S).each(function(){var t=[];[P.redrawBar(v,!0),P.redrawLine(y,!0),P.redrawArea(g,!0),P.redrawCircle(L,I,!0),P.redrawText(E,x,e.flow,!0),P.redrawRegion(!0),P.redrawGrid(!0)].forEach(function(e){e.forEach(function(e){t.push(e)})}),C=P.generateWait(),t.forEach(function(e){C.add(e)})}).call(C,function(){_&&_(),M.onrendered&&M.onrendered.call(P)}):(P.redrawBar(v),P.redrawLine(y),P.redrawArea(g),P.redrawCircle(L,I),P.redrawText(E,x,e.flow),P.redrawRegion(),P.redrawGrid(),M.onrendered&&M.onrendered.call(P)),P.mapToIds(P.data.targets).forEach(function(e){P.withoutFadeIn[e]=!0})},C.updateAndRedraw=function(e){var t,n=this,a=n.config;(e=e||{}).withTransition=b(e,"withTransition",!0),e.withTransform=b(e,"withTransform",!1),e.withLegend=b(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=b(e,"withTransitionForTransform",e.withTransition),n.updateSizes(),e.withLegend&&a.legend_show||(t=n.axis.generateTransitions(e.withTransitionForAxis?a.transition_duration:0),n.updateScales(),n.updateSvgSize(),n.transformAll(e.withTransitionForTransform,t)),n.redraw(e,t)},C.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},C.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},C.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},C.isCustomX=function(){var e=this.config;return!this.isTimeSeries()&&(e.data_x||v(e.data_xs))},C.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},C.getTranslate=function(e){var t,n,a=this,i=a.config;return"main"===e?(t=p(a.margin.left),n=p(a.margin.top)):"context"===e?(t=p(a.margin2.left),n=p(a.margin2.top)):"legend"===e?(t=a.margin3.left,n=a.margin3.top):"x"===e?(t=0,n=i.axis_rotated?0:a.height):"y"===e?(t=0,n=i.axis_rotated?a.height:0):"y2"===e?(t=i.axis_rotated?0:a.width,n=i.axis_rotated?1:0):"subx"===e?(t=0,n=i.axis_rotated?0:a.height2):"arc"===e&&(t=a.arcWidth/2,n=a.arcHeight/2-(a.hasType("gauge")?6:0)),"translate("+t+","+n+")"},C.initialOpacity=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?1:0},C.initialOpacityForCircle=function(e){return null!==e.value&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},C.opacityForCircle=function(e){var t=(s(this.config.point_show)?this.config.point_show(e):this.config.point_show)?1:0;return l(e.value)?this.isScatterType(e)?.5:t:0},C.opacityForText=function(){return this.hasDataLabel()?1:0},C.xx=function(e){return e?this.x(e.x):null},C.xv=function(e){var t=this,n=e.value;return t.isTimeSeries()?n=t.parseDate(e.value):t.isCategorized()&&"string"===typeof e.value&&(n=t.config.axis_x_categories.indexOf(e.value)),Math.ceil(t.x(n))},C.yv=function(e){var t=e.axis&&"y2"===e.axis?this.y2:this.y;return Math.ceil(t(e.value))},C.subxx=function(e){return e?this.subX(e.x):null},C.transformMain=function(e,t){var n,i,r,o=this;t&&t.axisX?n=t.axisX:(n=o.main.select("."+a.axisX),e&&(n=n.transition())),t&&t.axisY?i=t.axisY:(i=o.main.select("."+a.axisY),e&&(i=i.transition())),t&&t.axisY2?r=t.axisY2:(r=o.main.select("."+a.axisY2),e&&(r=r.transition())),(e?o.main.transition():o.main).attr("transform",o.getTranslate("main")),n.attr("transform",o.getTranslate("x")),i.attr("transform",o.getTranslate("y")),r.attr("transform",o.getTranslate("y2")),o.main.select("."+a.chartArcs).attr("transform",o.getTranslate("arc"))},C.transformAll=function(e,t){var n=this;n.transformMain(e,t),n.config.subchart_show&&n.transformContext(e,t),n.legend&&n.transformLegend(e)},C.updateSvgSize=function(){var e=this,t=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()?t.attr("height"):0),e.svg.select("."+a.zoomRect).attr("width",e.width).attr("height",e.height),e.selectChart.style("max-height",e.currentHeight+"px")},C.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},C.observeInserted=function(e){var t,n=this;"undefined"!==typeof MutationObserver?(t=new MutationObserver(function(a){a.forEach(function(a){"childList"===a.type&&a.previousSibling&&(t.disconnect(),n.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},C.bindResize=function(){var e=this,t=e.config;if(e.resizeFunction=e.generateResize(),e.resizeFunction.add(function(){t.onresize.call(e)}),t.resize_auto&&e.resizeFunction.add(function(){void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),e.resizeTimeout=window.setTimeout(function(){delete e.resizeTimeout,e.api.flush()},100)}),e.resizeFunction.add(function(){t.onresized.call(e)}),e.resizeIfElementDisplayed=function(){null!=e.api&&e.api.element.offsetParent&&e.resizeFunction()},window.attachEvent)window.attachEvent("onresize",e.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",e.resizeIfElementDisplayed,!1);else{var n=window.onresize;n?n.add&&n.remove||(n=e.generateResize()).add(window.onresize):n=e.generateResize(),n.add(e.resizeFunction),window.onresize=function(){e.api.element.offsetParent&&n()}}},C.generateResize=function(){var e=[];function t(){e.forEach(function(e){e()})}return t.add=function(t){e.push(t)},t.remove=function(t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}},t},C.endall=function(e,t){var n=0;e.each(function(){++n}).each("end",function(){--n||t.apply(this,arguments)})},C.generateWait=function(){var e=[],t=function(t,n){var a=setInterval(function(){var t=0;e.forEach(function(e){if(e.empty())t+=1;else try{e.transition()}catch(e){t+=1}}),t===e.length&&(clearInterval(a),n&&n())},10)};return t.add=function(t){e.push(t)},t},C.parseDate=function(e){var t;return e instanceof Date?t=e:"string"===typeof e?t=this.dataTimeFormat(this.config.data_xFormat).parse(e):"object"===("undefined"===typeof e?"undefined":i(e))?t=new Date(+e):"number"!==typeof e||isNaN(e)||(t=new Date(+e)),t&&!isNaN(+t)||window.console.error("Failed to parse x '"+e+"' to Date object"),t},C.isTabVisible=function(){var e;return"undefined"!==typeof document.hidden?e="hidden":"undefined"!==typeof document.mozHidden?e="mozHidden":"undefined"!==typeof document.msHidden?e="msHidden":"undefined"!==typeof document.webkitHidden&&(e="webkitHidden"),!document[e]},C.isValue=l,C.isFunction=s,C.isString=u,C.isUndefined=d,C.isDefined=m,C.ceil10=h,C.asHalfPixel=p,C.diffDomain=f,C.isEmpty=g,C.notEmpty=v,C.notEmpty=v,C.getOption=b,C.hasValue=y,C.sanitise=E,C.getPathBox=x,C.CLASS=a,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,a=function(){},i=function(){return n.apply(this instanceof a?this:e,t.concat(Array.prototype.slice.call(arguments)))};return a.prototype=this.prototype,i.prototype=new a,i}),"SVGPathSeg"in window||(window.SVGPathSeg=function(e,t,n){this.pathSegType=e,this.pathSegTypeAsLetter=t,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=t,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=t,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=t,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=t,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(e,t,n,a,i,r,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",e),this._x=t,this._y=n,this._x1=a,this._y1=i,this._x2=r,this._y2=o},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(e,t,n,a,i,r,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",e),this._x=t,this._y=n,this._x1=a,this._y1=i,this._x2=r,this._y2=o},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(e,t,n,a,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",e),this._x=t,this._y=n,this._x1=a,this._y1=i},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(e,t,n,a,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",e),this._x=t,this._y=n,this._x1=a,this._y1=i},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(e,t,n,a,i,r,o,l){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",e),this._x=t,this._y=n,this._r1=a,this._r2=i,this._angle=r,this._largeArcFlag=o,this._sweepFlag=l},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(e,t,n,a,i,r,o,l){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",e),this._x=t,this._y=n,this._r1=a,this._r2=i,this._angle=r,this._largeArcFlag=o,this._sweepFlag=l},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",e),this._x=t},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",e),this._x=t},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",e),this._y=t},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(e,t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",e),this._y=t},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(e,t,n,a,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",e),this._x=t,this._y=n,this._x2=a,this._y2=i},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(e,t,n,a,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",e),this._x=t,this._y=n,this._x2=a,this._y2=i},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=t,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(e,t,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=t,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new window.SVGPathSegMovetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new window.SVGPathSegMovetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new window.SVGPathSegLinetoAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new window.SVGPathSegLinetoRel(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,n,a,i,r){return new window.SVGPathSegCurvetoCubicAbs(void 0,e,t,n,a,i,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,n,a,i,r){return new window.SVGPathSegCurvetoCubicRel(void 0,e,t,n,a,i,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,n,a){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,e,t,n,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,n,a){return new window.SVGPathSegCurvetoQuadraticRel(void 0,e,t,n,a)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,n,a,i,r,o){return new window.SVGPathSegArcAbs(void 0,e,t,n,a,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,n,a,i,r,o){return new window.SVGPathSegArcRel(void 0,e,t,n,a,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new window.SVGPathSegLinetoHorizontalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new window.SVGPathSegLinetoHorizontalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new window.SVGPathSegLinetoVerticalAbs(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new window.SVGPathSegLinetoVerticalRel(void 0,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,n,a){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,e,t,n,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,n,a){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,e,t,n,a)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,e,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,e,t)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(e){if(void 0===e||!isFinite(e))throw"Invalid arguments.";var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getAttribute("d"));var n=t.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(t.pathSegList.removeItem(n),e>t.getTotalLength())break;n--}while(n>0);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(this._pathElement){var t=!1;e.forEach(function(e){"d"==e.attributeName&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(e){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||e<0||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},window.SVGPathSegList.prototype.insertItemBefore=function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.replaceItem=function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t},window.SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},window.SVGPathSegList._pathSegArrayAsString=function(e){var t="",n=!0;return e.forEach(function(e){n?(n=!1,t+=e._asPathString()):t+=" "+e._asPathString()}),t},window.SVGPathSegList.prototype._parsePath=function(e){if(!e||0==e.length)return[];var t=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(e){this.pathSegList.push(e)};var a=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};a.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return e<=" "&&(" "==e||"\n"==e||"\t"==e||"\r"==e||"\f"==e)},a.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},a.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},a.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},a.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},a.prototype._pathSegTypeFromChar=function(e){switch(e){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},a.prototype._nextCommandHelper=function(e,t){return("+"==e||"-"==e||"."==e||e>="0"&&e<="9")&&t!=window.SVGPathSeg.PATHSEG_CLOSEPATH?t==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:t==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:t:window.SVGPathSeg.PATHSEG_UNKNOWN},a.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==window.SVGPathSeg.PATHSEG_MOVETO_ABS||e==window.SVGPathSeg.PATHSEG_MOVETO_REL},a.prototype._parseNumber=function(){var e=0,t=0,n=1,a=0,i=1,r=1,o=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,i=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&"."!=this._string.charAt(this._currentIndex))){for(var l=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=l)for(var s=this._currentIndex-1,c=1;s>=l;)t+=c*(this._string.charAt(s--)-"0"),c*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)n*=10,a+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)e*=10,e+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var u=t+a;if(u*=i,e&&(u*=Math.pow(10,r*e)),o!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),u}},a.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var e=!1,t=this._string.charAt(this._currentIndex++);if("0"==t)e=!1;else{if("1"!=t)return;e=!0}return this._skipOptionalSpacesOrDelimiter(),e}},a.prototype.parseSegment=function(){var e=this._string[this._currentIndex],n=this._pathSegTypeFromChar(e);if(n==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((n=this._nextCommandHelper(e,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=n,n){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(t);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var a={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(t,a.x,a.y,a.x1,a.y1,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return a={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(t,a.x,a.y,a.x1,a.y1,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return a={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(t,a.x,a.y,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return a={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(t,a.x,a.y,a.x2,a.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return a={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(t,a.x,a.y,a.x1,a.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return a={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(t,a.x,a.y,a.x1,a.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return a={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(t,a.x,a.y,a.x1,a.y1,a.arcAngle,a.arcLarge,a.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return a={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(t,a.x,a.y,a.x1,a.y1,a.arcAngle,a.arcLarge,a.arcSweep);default:throw"Unknown path seg type."}};var i=new n,r=new a(e);if(!r.initialCommandIsMoveTo())return[];for(;r.hasMoreData();){var o=r.parseSegment();if(!o)return[];i.appendSegment(o)}return i.pathSegList}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e>>=0,t=String("undefined"!==typeof t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))}),N.axis=function(){},N.axis.labels=function(e){var t=this.internal;arguments.length&&(Object.keys(e).forEach(function(n){t.axis.setLabelText(n,e[n])}),t.axis.updateLabels())},N.axis.max=function(e){var t=this.internal,n=t.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"===("undefined"===typeof e?"undefined":i(e))?(l(e.x)&&(n.axis_x_max=e.x),l(e.y)&&(n.axis_y_max=e.y),l(e.y2)&&(n.axis_y2_max=e.y2)):n.axis_y_max=n.axis_y2_max=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},N.axis.min=function(e){var t=this.internal,n=t.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"===("undefined"===typeof e?"undefined":i(e))?(l(e.x)&&(n.axis_x_min=e.x),l(e.y)&&(n.axis_y_min=e.y),l(e.y2)&&(n.axis_y2_min=e.y2)):n.axis_y_min=n.axis_y2_min=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},N.axis.range=function(e){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};m(e.max)&&this.axis.max(e.max),m(e.min)&&this.axis.min(e.min)},N.category=function(e,t){var n=this.internal,a=n.config;return arguments.length>1&&(a.axis_x_categories[e]=t,n.redraw()),a.axis_x_categories[e]},N.categories=function(e){var t=this.internal,n=t.config;return arguments.length?(n.axis_x_categories=e,t.redraw(),n.axis_x_categories):n.axis_x_categories},N.resize=function(e){var t=this.internal.config;t.size_width=e?e.width:null,t.size_height=e?e.height:null,this.flush()},N.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},N.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent("onresize",e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",e.resizeIfElementDisplayed);else{var t=window.onresize;t&&t.add&&t.remove&&t.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},N.color=function(e){return this.internal.color(e)},N.data=function(e){var t=this.internal.data.targets;return"undefined"===typeof e?t:t.filter(function(t){return[].concat(e).indexOf(t.id)>=0})},N.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},N.data.values=function(e){var t,n=null;return e&&(n=(t=this.data(e))[0]?t[0].values.map(function(e){return e.value}):null),n},N.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},N.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},N.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},N.flow=function(e){var t,n,a,i,r,o,s,c=this.internal,u=[],d=c.getMaxDataCount(),h=0,p=0;if(e.json)n=c.convertJsonToData(e.json,e.keys);else if(e.rows)n=c.convertRowsToData(e.rows);else{if(!e.columns)return;n=c.convertColumnsToData(e.columns)}t=c.convertDataToTargets(n,!0),c.data.targets.forEach(function(e){var n,a,i=!1;for(n=0;n<t.length;n++)if(e.id===t[n].id){for(i=!0,e.values[e.values.length-1]&&(p=e.values[e.values.length-1].index+1),h=t[n].values.length,a=0;a<h;a++)t[n].values[a].index=p+a,c.isTimeSeries()||(t[n].values[a].x=p+a);e.values=e.values.concat(t[n].values),t.splice(n,1);break}i||u.push(e.id)}),c.data.targets.forEach(function(e){var t,n;for(t=0;t<u.length;t++)if(e.id===u[t])for(p=e.values[e.values.length-1].index+1,n=0;n<h;n++)e.values.push({id:e.id,index:p+n,x:c.isTimeSeries()?c.getOtherTargetX(p+n):p+n,value:null})}),c.data.targets.length&&t.forEach(function(e){var t,n=[];for(t=c.data.targets[0].values[0].index;t<p;t++)n.push({id:e.id,index:t,x:c.isTimeSeries()?c.getOtherTargetX(t):t,value:null});e.values.forEach(function(e){e.index+=p,c.isTimeSeries()||(e.x+=p)}),e.values=n.concat(e.values)}),c.data.targets=c.data.targets.concat(t),c.getMaxDataCount(),r=(i=c.data.targets[0]).values[0],m(e.to)?(h=0,s=c.isTimeSeries()?c.parseDate(e.to):e.to,i.values.forEach(function(e){e.x<s&&h++})):m(e.length)&&(h=e.length),d?1===d&&c.isTimeSeries()&&(o=(i.values[i.values.length-1].x-r.x)/2,a=[new Date(+r.x-o),new Date(+r.x+o)],c.updateXDomain(null,!0,!0,!1,a)):(o=c.isTimeSeries()?i.values.length>1?i.values[i.values.length-1].x-r.x:r.x-c.getXDomain(c.data.targets)[0]:1,a=[r.x-o,r.x],c.updateXDomain(null,!0,!0,!1,a)),c.updateTargets(c.data.targets),c.redraw({flow:{index:r.index,length:h,duration:l(e.duration)?e.duration:c.config.transition_duration,done:e.done,orgDataCount:d},withLegend:!0,withTransition:d>1,withTrimXDomain:!1,withUpdateXAxis:!0})},C.generateFlow=function(e){var t=this,n=t.config,i=t.d3;return function(){var r,o,l,s,c=e.targets,u=e.flow,d=e.drawBar,m=e.drawLine,h=e.drawArea,p=e.cx,g=e.cy,v=e.xv,b=e.xForText,y=e.yForText,E=e.duration,x=u.index,S=u.length,w=t.getValueOnIndex(t.data.targets[0].values,x),N=t.getValueOnIndex(t.data.targets[0].values,x+S),C=t.x.domain(),_=u.duration||E,T=u.done||function(){},O=t.generateWait(),D=t.xgrid||i.selectAll([]),A=t.xgridLines||i.selectAll([]),L=t.mainRegion||i.selectAll([]),I=t.mainText||i.selectAll([]),P=t.mainBar||i.selectAll([]),k=t.mainLine||i.selectAll([]),j=t.mainArea||i.selectAll([]),M=t.mainCircle||i.selectAll([]);t.flowing=!0,t.data.targets.forEach(function(e){e.values.splice(0,S)}),s=t.updateXDomain(c,!0,!0),t.updateXGrid&&t.updateXGrid(!0),u.orgDataCount?r=1===u.orgDataCount||(w&&w.x)===(N&&N.x)?t.x(C[0])-t.x(s[0]):t.isTimeSeries()?t.x(C[0])-t.x(s[0]):t.x(w.x)-t.x(N.x):1!==t.data.targets[0].values.length?r=t.x(C[0])-t.x(s[0]):t.isTimeSeries()?(w=t.getValueOnIndex(t.data.targets[0].values,0),N=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),r=t.x(w.x)-t.x(N.x)):r=f(s)/2,o=f(C)/f(s),l="translate("+r+",0) scale("+o+",1)",t.hideXGridFocus(),i.transition().ease("linear").duration(_).each(function(){O.add(t.axes.x.transition().call(t.xAxis)),O.add(P.transition().attr("transform",l)),O.add(k.transition().attr("transform",l)),O.add(j.transition().attr("transform",l)),O.add(M.transition().attr("transform",l)),O.add(I.transition().attr("transform",l)),O.add(L.filter(t.isRegionOnX).transition().attr("transform",l)),O.add(D.transition().attr("transform",l)),O.add(A.transition().attr("transform",l))}).call(O,function(){var e,i=[],r=[],o=[];if(S){for(e=0;e<S;e++)i.push("."+a.shape+"-"+(x+e)),r.push("."+a.text+"-"+(x+e)),o.push("."+a.eventRect+"-"+(x+e));t.svg.selectAll("."+a.shapes).selectAll(i).remove(),t.svg.selectAll("."+a.texts).selectAll(r).remove(),t.svg.selectAll("."+a.eventRects).selectAll(o).remove(),t.svg.select("."+a.xgrid).remove()}D.attr("transform",null).attr(t.xgridAttr),A.attr("transform",null),A.select("line").attr("x1",n.axis_rotated?0:v).attr("x2",n.axis_rotated?t.width:v),A.select("text").attr("x",n.axis_rotated?t.width:0).attr("y",v),P.attr("transform",null).attr("d",d),k.attr("transform",null).attr("d",m),j.attr("transform",null).attr("d",h),M.attr("transform",null).attr("cx",p).attr("cy",g),I.attr("transform",null).attr("x",b).attr("y",y).style("fill-opacity",t.opacityForText.bind(t)),L.attr("transform",null),L.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t)),n.interaction_enabled&&t.redrawEventRect(),T(),t.flowing=!1})}},N.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(a.focused,!0).classed(a.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},N.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(a.focused,!1).classed(a.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},N.revert=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e)).classed(a.focused,!1).classed(a.defocused,!1),t.hasArcType()&&t.unexpandArc(e),t.config.legend_show&&(t.showLegend(e.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(e)).filter(function(){return t.d3.select(this).classed(a.legendItemFocused)}).classed(a.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},N.xgrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_x_lines=e,t.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},N.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e||[]))},N.xgrids.remove=function(e){this.internal.removeGridLines(e,!0)},N.ygrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_y_lines=e,t.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},N.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e||[]))},N.ygrids.remove=function(e){this.internal.removeGridLines(e,!1)},N.groups=function(e){var t=this.internal,n=t.config;return d(e)?n.data_groups:(n.data_groups=e,t.redraw(),n.data_groups)},N.legend=function(){},N.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},N.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},N.load=function(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"names"in e&&N.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):"unload"in e?t.unload(t.mapToTargetIds("boolean"===typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},N.unload=function(e){var t=this.internal;(e=e||{})instanceof Array?e={ids:e}:"string"===typeof e&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},N.regions=function(e){var t=this.internal,n=t.config;return e?(n.regions=e,t.redrawWithoutRescale(),n.regions):n.regions},N.regions.add=function(e){var t=this.internal,n=t.config;return e?(n.regions=n.regions.concat(e),t.redrawWithoutRescale(),n.regions):n.regions},N.regions.remove=function(e){var t,n,i,r=this.internal,o=r.config;return e=e||{},t=r.getOption(e,"duration",o.transition_duration),n=r.getOption(e,"classes",[a.region]),i=r.main.select("."+a.regions).selectAll(n.map(function(e){return"."+e})),(t?i.transition().duration(t):i).style("opacity",0).remove(),o.regions=o.regions.filter(function(e){var t=!1;return!e.class||(e.class.split(" ").forEach(function(e){n.indexOf(e)>=0&&(t=!0)}),!t)}),o.regions},N.selected=function(e){var t=this.internal,n=t.d3;return n.merge(t.main.selectAll("."+a.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+a.shape).filter(function(){return n.select(this).classed(a.SELECTED)}).map(function(e){return e.map(function(e){var t=e.__data__;return t.data?t.data:t})}))},N.select=function(e,t,n){var i=this.internal,r=i.d3,o=i.config;o.data_selection_enabled&&i.main.selectAll("."+a.shapes).selectAll("."+a.shape).each(function(l,s){var c=r.select(this),u=l.data?l.data.id:l.id,d=i.getToggle(this,l).bind(i),h=o.data_selection_grouped||!e||e.indexOf(u)>=0,p=!t||t.indexOf(s)>=0,f=c.classed(a.SELECTED);c.classed(a.line)||c.classed(a.area)||(h&&p?o.data_selection_isselectable(l)&&!f&&d(!0,c.classed(a.SELECTED,!0),l,s):m(n)&&n&&f&&d(!1,c.classed(a.SELECTED,!1),l,s))})},N.unselect=function(e,t){var n=this.internal,i=n.d3,r=n.config;r.data_selection_enabled&&n.main.selectAll("."+a.shapes).selectAll("."+a.shape).each(function(o,l){var s=i.select(this),c=o.data?o.data.id:o.id,u=n.getToggle(this,o).bind(n),d=r.data_selection_grouped||!e||e.indexOf(c)>=0,m=!t||t.indexOf(l)>=0,h=s.classed(a.SELECTED);s.classed(a.line)||s.classed(a.area)||d&&m&&r.data_selection_isselectable(o)&&h&&u(!1,s.classed(a.SELECTED,!1),o,l)})},N.show=function(e,t){var n,a=this.internal;e=a.mapToTargetIds(e),t=t||{},a.removeHiddenTargetIds(e),(n=a.svg.selectAll(a.selectorTargets(e))).transition().style("opacity",1,"important").call(a.endall,function(){n.style("opacity",null).style("opacity",1)}),t.withLegend&&a.showLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},N.hide=function(e,t){var n,a=this.internal;e=a.mapToTargetIds(e),t=t||{},a.addHiddenTargetIds(e),(n=a.svg.selectAll(a.selectorTargets(e))).transition().style("opacity",0,"important").call(a.endall,function(){n.style("opacity",null).style("opacity",0)}),t.withLegend&&a.hideLegend(e),a.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},N.toggle=function(e,t){var n=this,a=this.internal;a.mapToTargetIds(e).forEach(function(e){a.isTargetToShow(e)?n.hide(e,t):n.show(e,t)})},N.tooltip=function(){},N.tooltip.show=function(e){var t,n,a=this.internal;e.mouse&&(n=e.mouse),e.data?a.isMultipleX()?(n=[a.x(e.data.x),a.getYScale(e.data.id)(e.data.value)],t=null):t=l(e.data.index)?e.data.index:a.getIndexByX(e.data.x):"undefined"!==typeof e.x?t=a.getIndexByX(e.x):"undefined"!==typeof e.index&&(t=e.index),a.dispatchEvent("mouseover",t,n),a.dispatchEvent("mousemove",t,n),a.config.tooltip_onshow.call(a,e.data)},N.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},N.transform=function(e,t){var n=this.internal,a=["pie","donut"].indexOf(e)>=0?{withTransform:!0}:null;n.transformTo(t,e,a)},C.transformTo=function(e,t,n){var a=this,i=!a.hasArcType(),r=n||{withTransitionForAxis:i};r.withTransitionForTransform=!1,a.transiting=!1,a.setTargetType(e,t),a.updateTargets(a.data.targets),a.updateAndRedraw(r)},N.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},N.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},N.zoom=function(e){var t=this.internal;return e&&(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.brush.extent(e),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()},N.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},N.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},N.zoom.max=function(e){var t=this.internal,n=t.config,a=t.d3;if(0!==e&&!e)return n.zoom_x_max;n.zoom_x_max=a.max([t.orgXDomain[1],e])},N.zoom.min=function(e){var t=this.internal,n=t.config,a=t.d3;if(0!==e&&!e)return n.zoom_x_min;n.zoom_x_min=a.min([t.orgXDomain[0],e])},N.zoom.range=function(e){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};m(e.max)&&this.domain.max(e.max),m(e.min)&&this.domain.min(e.min)},C.initPie=function(){var e=this.d3;this.pie=e.layout.pie().value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)}),this.pie.sort(this.getOrderFunction()||null)},C.updateRadius=function(){var e=this,t=e.config,n=t.gauge_width||t.donut_width,a=e.filterTargetsToShow(e.data.targets).length*e.config.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(e.hasType("gauge")?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=n?(e.radius-n)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0,e.gaugeArcWidth=n||(a<=e.radius-e.innerRadius?e.radius-e.innerRadius:a<=e.radius?a:e.radius)},C.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},C.updateAngle=function(e){var t,n,a,i,r=this,o=r.config,l=!1,s=0;return o?(r.pie(r.filterTargetsToShow(r.data.targets)).forEach(function(t){l||t.data.id!==e.data.id||(l=!0,(e=t).index=s),s++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),r.isGaugeType(e.data)&&(t=o.gauge_min,n=o.gauge_max,a=Math.PI*(o.gauge_fullCircle?2:1)/(n-t),i=e.value<t?0:e.value<n?e.value-t:n-t,e.startAngle=o.gauge_startingAngle,e.endAngle=e.startAngle+a*i),l?e:null):null},C.getSvgArc=function(){var e=this,t=e.hasType("gauge"),n=e.gaugeArcWidth/e.filterTargetsToShow(e.data.targets).length,a=e.d3.svg.arc().outerRadius(function(a){return t?e.radius-n*a.index:e.radius}).innerRadius(function(a){return t?e.radius-n*(a.index+1):e.innerRadius}),i=function(t,n){var i;return n?a(t):(i=e.updateAngle(t))?a(i):"M 0 0"};return i.centroid=a.centroid,i},C.getSvgArcExpanded=function(e){e=e||1;var t=this,n=t.hasType("gauge"),a=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,i=Math.min(t.radiusExpanded*e-t.radius,.8*a-100*(1-e)),r=t.d3.svg.arc().outerRadius(function(r){return n?t.radius-a*r.index+i:t.radiusExpanded*e}).innerRadius(function(e){return n?t.radius-a*(e.index+1):t.innerRadius});return function(e){var n=t.updateAngle(e);return n?r(n):"M 0 0"}},C.getArc=function(e,t,n){return n||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},C.transformForArcLabel=function(e){var t,n,a,i,r,o=this,l=o.config,c=o.updateAngle(e),u="",d=o.hasType("gauge");if(c&&!d)t=this.svgArc.centroid(c),n=isNaN(t[0])?0:t[0],a=isNaN(t[1])?0:t[1],i=Math.sqrt(n*n+a*a),u="translate("+n*(r=o.hasType("donut")&&l.donut_label_ratio?s(l.donut_label_ratio)?l.donut_label_ratio(e,o.radius,i):l.donut_label_ratio:o.hasType("pie")&&l.pie_label_ratio?s(l.pie_label_ratio)?l.pie_label_ratio(e,o.radius,i):l.pie_label_ratio:o.radius&&i?(36/o.radius>.375?1.175-36/o.radius:.8)*o.radius/i:0)+","+a*r+")";else if(c&&d&&o.filterTargetsToShow(o.data.targets).length>1){var m=Math.sin(c.endAngle-Math.PI/2);u="translate("+(n=Math.cos(c.endAngle-Math.PI/2)*(o.radiusExpanded+25))+","+(a=m*(o.radiusExpanded+15-Math.abs(10*m))+3)+")"}return u},C.getArcRatio=function(e){var t=this.config,n=Math.PI*(this.hasType("gauge")&&!t.gauge_fullCircle?1:2);return e?(e.endAngle-e.startAngle)/n:null},C.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},C.textForArcLabel=function(e){var t,n,a,i,r,o=this;return o.shouldShowArcLabel()?(n=(t=o.updateAngle(e))?t.value:null,a=o.getArcRatio(t),i=e.data.id,o.hasType("gauge")||o.meetsArcLabelThreshold(a)?(r=o.getArcLabelFormat())?r(n,a,i):o.defaultArcValueFormat(n,a):""):""},C.textForGaugeMinMax=function(e,t){var n=this.getGaugeLabelExtents();return n?n(e,t):e},C.expandArc=function(e){var t,n=this;n.transiting?t=window.setInterval(function(){n.transiting||(window.clearInterval(t),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(e))},10):(e=n.mapToTargetIds(e),n.svg.selectAll(n.selectorTargets(e,"."+a.chartArc)).each(function(e){n.shouldExpand(e.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(e.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(e.data.id)).attr("d",n.svgArcExpandedSub).each(function(e){n.isDonutType(e.data)})}))},C.unexpandArc=function(e){var t=this;t.transiting||(e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,"."+a.chartArc)).selectAll("path").transition().duration(function(e){return t.expandDuration(e.data.id)}).attr("d",t.svgArc),t.svg.selectAll("."+a.arc))},C.expandDuration=function(e){var t=this.config;return this.isDonutType(e)?t.donut_expand_duration:this.isGaugeType(e)?t.gauge_expand_duration:this.isPieType(e)?t.pie_expand_duration:50},C.shouldExpand=function(e){var t=this.config;return this.isDonutType(e)&&t.donut_expand||this.isGaugeType(e)&&t.gauge_expand||this.isPieType(e)&&t.pie_expand},C.shouldShowArcLabel=function(){var e=this.config,t=!0;return this.hasType("donut")?t=e.donut_label_show:this.hasType("pie")&&(t=e.pie_label_show),t},C.meetsArcLabelThreshold=function(e){var t=this.config;return e>=(this.hasType("donut")?t.donut_label_threshold:t.pie_label_threshold)},C.getArcLabelFormat=function(){var e=this.config,t=e.pie_label_format;return this.hasType("gauge")?t=e.gauge_label_format:this.hasType("donut")&&(t=e.donut_label_format),t},C.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},C.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},C.updateTargetsForArc=function(e){var t,n=this,i=n.main,r=n.classChartArc.bind(n),o=n.classArcs.bind(n),l=n.classFocus.bind(n);(t=i.select("."+a.chartArcs).selectAll("."+a.chartArc).data(n.pie(e)).attr("class",function(e){return r(e)+l(e.data)}).enter().append("g").attr("class",r)).append("g").attr("class",o),t.append("text").attr("dy",n.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},C.initArc=function(){var e=this;e.arcs=e.main.select("."+a.chart).append("g").attr("class",a.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",a.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},C.redrawArc=function(e,t,n){var i,r,o,l=this,s=l.d3,c=l.config,u=l.main,d=l.hasType("gauge");if((i=u.selectAll("."+a.arcs).selectAll("."+a.arc).data(l.arcData.bind(l))).enter().append("path").attr("class",l.classArc.bind(l)).style("fill",function(e){return l.color(e.data)}).style("cursor",function(e){return c.interaction_enabled&&c.data_selection_isselectable(e)?"pointer":null}).each(function(e){l.isGaugeType(e.data)&&(e.startAngle=e.endAngle=c.gauge_startingAngle),this._current=e}),d&&((o=u.selectAll("."+a.arcs).selectAll("."+a.arcLabelLine).data(l.arcData.bind(l))).enter().append("rect").attr("class",function(e){return a.arcLabelLine+" "+a.target+" "+a.target+"-"+e.data.id}),1===l.filterTargetsToShow(l.data.targets).length?o.style("display","none"):o.style("fill",function(e){return c.color_pattern.length>0?l.levelColor(e.data.values[0].value):l.color(e.data)}).style("display",c.gauge_labelLine_show?"":"none").each(function(e){var t=0,n=0,a=0,i="";if(l.hiddenTargetIds.indexOf(e.data.id)<0){var r=l.updateAngle(e),o=l.gaugeArcWidth/l.filterTargetsToShow(l.data.targets).length*(r.index+1),c=r.endAngle-Math.PI/2,u=l.radius-o,d=c-(0===u?0:1/u);t=l.radiusExpanded-l.radius+o,n=Math.cos(d)*u,a=Math.sin(d)*u,i="rotate("+180*c/Math.PI+", "+n+", "+a+")"}s.select(this).attr({x:n,y:a,width:t,height:2,transform:i}).style("stroke-dasharray","0, "+(t+2)+", 0")})),i.attr("transform",function(e){return!l.isGaugeType(e.data)&&n?"scale(0)":""}).on("mouseover",c.interaction_enabled?function(e){var t,n;l.transiting||(t=l.updateAngle(e))&&(n=l.convertToArcData(t),l.expandArc(t.data.id),l.api.focus(t.data.id),l.toggleFocusLegend(t.data.id,!0),l.config.data_onmouseover(n,this))}:null).on("mousemove",c.interaction_enabled?function(e){var t,n=l.updateAngle(e);n&&(t=[l.convertToArcData(n)],l.showTooltip(t,this))}:null).on("mouseout",c.interaction_enabled?function(e){var t,n;l.transiting||(t=l.updateAngle(e))&&(n=l.convertToArcData(t),l.unexpandArc(t.data.id),l.api.revert(),l.revertLegend(),l.hideTooltip(),l.config.data_onmouseout(n,this))}:null).on("click",c.interaction_enabled?function(e,t){var n,a=l.updateAngle(e);a&&(n=l.convertToArcData(a),l.toggleShape&&l.toggleShape(this,n,t),l.config.data_onclick.call(l.api,n,this))}:null).each(function(){l.transiting=!0}).transition().duration(e).attrTween("d",function(e){var t,n=l.updateAngle(e);return n?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),t=s.interpolate(this._current,n),this._current=t(0),function(n){var a=t(n);return a.data=e.data,l.getArc(a,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(e){return l.levelColor?l.levelColor(e.data.values[0].value):l.color(e.data.id)}).call(l.endall,function(){l.transiting=!1}),i.exit().transition().duration(t).style("opacity",0).remove(),u.selectAll("."+a.chartArc).select("text").style("opacity",0).attr("class",function(e){return l.isGaugeType(e.data)?a.gaugeValue:""}).text(l.textForArcLabel.bind(l)).attr("transform",l.transformForArcLabel.bind(l)).style("font-size",function(e){return l.isGaugeType(e.data)&&1===l.filterTargetsToShow(l.data.targets).length?Math.round(l.radius/5)+"px":""}).transition().duration(e).style("opacity",function(e){return l.isTargetToShow(e.data.id)&&l.isArcType(e.data)?1:0}),u.select("."+a.chartArcsTitle).style("opacity",l.hasType("donut")||d?1:0),d){var m=0;(r=l.arcs.select("g."+a.chartArcsBackground).selectAll("path."+a.chartArcsBackground).data(l.data.targets)).enter().append("path"),r.attr("class",function(e,t){return a.chartArcsBackground+" "+a.chartArcsBackground+"-"+t}).attr("d",function(e){if(l.hiddenTargetIds.indexOf(e.id)>=0)return"M 0 0";var t={data:[{value:c.gauge_max}],startAngle:c.gauge_startingAngle,endAngle:-1*c.gauge_startingAngle*(c.gauge_fullCircle?Math.PI:1),index:m++};return l.getArc(t,!0,!0)}),r.exit().remove(),l.arcs.select("."+a.chartArcsGaugeUnit).attr("dy",".75em").text(c.gauge_label_show?c.gauge_units:""),l.arcs.select("."+a.chartArcsGaugeMin).attr("dx",-1*(l.innerRadius+(l.radius-l.innerRadius)/(c.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(c.gauge_label_show?l.textForGaugeMinMax(c.gauge_min,!1):""),l.arcs.select("."+a.chartArcsGaugeMax).attr("dx",l.innerRadius+(l.radius-l.innerRadius)/(c.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(c.gauge_label_show?l.textForGaugeMinMax(c.gauge_max,!0):"")}},C.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("g").attr("class",a.chartArcsBackground),e.append("text").attr("class",a.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",a.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",a.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},C.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},C.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},C.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},C.getCaches=function(e){var t,n=[];for(t=0;t<e.length;t++)e[t]in this.cache&&n.push(this.cloneTarget(this.cache[e[t]]));return n},C.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},C.generateClass=function(e,t){return" "+e+" "+e+this.getTargetSelectorSuffix(t)},C.classText=function(e){return this.generateClass(a.text,e.index)},C.classTexts=function(e){return this.generateClass(a.texts,e.id)},C.classShape=function(e){return this.generateClass(a.shape,e.index)},C.classShapes=function(e){return this.generateClass(a.shapes,e.id)},C.classLine=function(e){return this.classShape(e)+this.generateClass(a.line,e.id)},C.classLines=function(e){return this.classShapes(e)+this.generateClass(a.lines,e.id)},C.classCircle=function(e){return this.classShape(e)+this.generateClass(a.circle,e.index)},C.classCircles=function(e){return this.classShapes(e)+this.generateClass(a.circles,e.id)},C.classBar=function(e){return this.classShape(e)+this.generateClass(a.bar,e.index)},C.classBars=function(e){return this.classShapes(e)+this.generateClass(a.bars,e.id)},C.classArc=function(e){return this.classShape(e.data)+this.generateClass(a.arc,e.data.id)},C.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(a.arcs,e.data.id)},C.classArea=function(e){return this.classShape(e)+this.generateClass(a.area,e.id)},C.classAreas=function(e){return this.classShapes(e)+this.generateClass(a.areas,e.id)},C.classRegion=function(e,t){return this.generateClass(a.region,t)+" "+("class"in e?e.class:"")},C.classEvent=function(e){return this.generateClass(a.eventRect,e.index)},C.classTarget=function(e){var t=this.config.data_classes[e],n="";return t&&(n=" "+a.target+"-"+t),this.generateClass(a.target,e)+n},C.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},C.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?a.focused:"")},C.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?a.defocused:"")},C.classChartText=function(e){return a.chartText+this.classTarget(e.id)},C.classChartLine=function(e){return a.chartLine+this.classTarget(e.id)},C.classChartBar=function(e){return a.chartBar+this.classTarget(e.id)},C.classChartArc=function(e){return a.chartArc+this.classTarget(e.data.id)},C.getTargetSelectorSuffix=function(e){return e||0===e?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},C.selectorTarget=function(e,t){return(t||"")+"."+a.target+this.getTargetSelectorSuffix(e)},C.selectorTargets=function(e,t){var n=this;return(e=e||[]).length?e.map(function(e){return n.selectorTarget(e,t)}):null},C.selectorLegend=function(e){return"."+a.legendItem+this.getTargetSelectorSuffix(e)},C.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null},C.getClipPath=function(e){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+e+")"},C.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")},C.getAxisClipX=function(e){var t=Math.max(30,this.margin.left);return e?-(1+t):-(t-1)},C.getAxisClipY=function(e){return e?-20:-this.margin.top},C.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},C.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},C.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},C.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},C.getAxisClipWidth=function(e){var t=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return e?this.width+2+t+n:this.margin.left+20},C.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},C.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},C.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},C.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},C.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},C.generateColor=function(){var e=this.config,t=this.d3,n=e.data_colors,a=v(e.color_pattern)?e.color_pattern:t.scale.category10().range(),i=e.data_color,r=[];return function(e){var t,o=e.id||e.data&&e.data.id||e;return n[o]instanceof Function?t=n[o](e):n[o]?t=n[o]:(r.indexOf(o)<0&&r.push(o),t=a[r.indexOf(o)%a.length],n[o]=t),i instanceof Function?i(t,e):t}},C.generateLevelColor=function(){var e=this.config,t=e.color_pattern,n=e.color_threshold,a="value"===n.unit,i=n.values&&n.values.length?n.values:[],r=n.max||100;return v(e.color_threshold)?function(e){var n,o=t[t.length-1];for(n=0;n<i.length;n++)if((a?e:100*e/r)<i[n]){o=t[n];break}return o}:null},C.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(e,t,n,a){return this.getTooltipContent?this.getTooltipContent(e,t,n,a):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},C.additionalConfig={},C.loadConfig=function(e){var t,n,a,r=this.config;Object.keys(r).forEach(function(o){t=e,n=o.split("_"),a=function e(){var a=n.shift();return a&&t&&"object"===("undefined"===typeof t?"undefined":i(t))&&a in t?(t=t[a],e()):a?void 0:t}(),m(a)&&(r[o]=a)})},C.convertUrlToData=function(e,t,n,a,i){var r=this,o=t||"csv",l=r.d3.xhr(e);n&&Object.keys(n).forEach(function(e){l.header(e,n[e])}),l.get(function(e,t){var n,l=t.response||t.responseText;if(!t)throw new Error(e.responseURL+" "+e.status+" ("+e.statusText+")");n="json"===o?r.convertJsonToData(JSON.parse(l),a):"tsv"===o?r.convertTsvToData(l):r.convertCsvToData(l),i.call(r,n)})},C.convertXsvToData=function(e,t){var n,a=t.parseRows(e);return 1===a.length?(n=[{}],a[0].forEach(function(e){n[0][e]=null})):n=t.parse(e),n},C.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},C.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},C.convertJsonToData=function(e,t){var n,a,i=this,r=[];return t?(t.x?(n=t.value.concat(t.x),i.config.data_x=t.x):n=t.value,r.push(n),e.forEach(function(e){var t=[];n.forEach(function(n){var a=i.findValueInJson(e,n);d(a)&&(a=null),t.push(a)}),r.push(t)}),a=i.convertRowsToData(r)):(Object.keys(e).forEach(function(t){r.push([t].concat(e[t]))}),a=i.convertColumnsToData(r)),a},C.findValueInJson=function(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),a=0;a<n.length;++a){var i=n[a];if(!(i in e))return;e=e[i]}return e},C.convertRowsToData=function(e){for(var t=[],n=e[0],a=1;a<e.length;a++){for(var i={},r=0;r<e[a].length;r++){if(d(e[a][r]))throw new Error("Source data is missing a component at ("+a+","+r+")!");i[n[r]]=e[a][r]}t.push(i)}return t},C.convertColumnsToData=function(e){for(var t=[],n=0;n<e.length;n++)for(var a=e[n][0],i=1;i<e[n].length;i++){if(d(t[i-1])&&(t[i-1]={}),d(e[n][i]))throw new Error("Source data is missing a component at ("+n+","+i+")!");t[i-1][a]=e[n][i]}return t},C.convertDataToTargets=function(e,t){var n,a=this,i=a.config,r=a.d3.keys(e[0]).filter(a.isNotX,a),o=a.d3.keys(e[0]).filter(a.isX,a);return r.forEach(function(n){var r=a.getXKey(n);a.isCustomX()||a.isTimeSeries()?o.indexOf(r)>=0?a.data.xs[n]=(t&&a.data.xs[n]?a.data.xs[n]:[]).concat(e.map(function(e){return e[r]}).filter(l).map(function(e,t){return a.generateTargetX(e,n,t)})):i.data_x?a.data.xs[n]=a.getOtherTargetXs():v(i.data_xs)&&(a.data.xs[n]=a.getXValuesOfXKey(r,a.data.targets)):a.data.xs[n]=e.map(function(e,t){return t})}),r.forEach(function(e){if(!a.data.xs[e])throw new Error('x is not defined for id = "'+e+'".')}),(n=r.map(function(t,n){var r=i.data_idConverter(t);return{id:r,id_org:t,values:e.map(function(e,o){var l,s=e[a.getXKey(t)],c=null===e[t]||isNaN(e[t])?null:+e[t];return a.isCustomX()&&a.isCategorized()&&!d(s)?(0===n&&0===o&&(i.axis_x_categories=[]),-1===(l=i.axis_x_categories.indexOf(s))&&(l=i.axis_x_categories.length,i.axis_x_categories.push(s))):l=a.generateTargetX(s,t,o),(d(e[t])||a.data.xs[t].length<=o)&&(l=void 0),{x:l,value:c,id:r}}).filter(function(e){return m(e.x)})}})).forEach(function(e){var t;i.data_xSort&&(e.values=e.values.sort(function(e,t){return(e.x||0===e.x?e.x:1/0)-(t.x||0===t.x?t.x:1/0)})),t=0,e.values.forEach(function(e){e.index=t++}),a.data.xs[e.id].sort(function(e,t){return e-t})}),a.hasNegativeValue=a.hasNegativeValueInTargets(n),a.hasPositiveValue=a.hasPositiveValueInTargets(n),i.data_type&&a.setTargetType(a.mapToIds(n).filter(function(e){return!(e in i.data_types)}),i.data_type),n.forEach(function(e){a.addCache(e.id_org,e)}),n},C.isX=function(e){var t=this.config;return t.data_x&&e===t.data_x||v(t.data_xs)&&y(t.data_xs,e)},C.isNotX=function(e){return!this.isX(e)},C.getXKey=function(e){var t=this.config;return t.data_x?t.data_x:v(t.data_xs)?t.data_xs[e]:null},C.getXValuesOfXKey=function(e,t){var n,a=this;return(t&&v(t)?a.mapToIds(t):[]).forEach(function(t){a.getXKey(t)===e&&(n=a.data.xs[t])}),n},C.getIndexByX=function(e){var t=this.filterByX(this.data.targets,e);return t.length?t[0].index:null},C.getXValue=function(e,t){return e in this.data.xs&&this.data.xs[e]&&l(this.data.xs[e][t])?this.data.xs[e][t]:t},C.getOtherTargetXs=function(){var e=Object.keys(this.data.xs);return e.length?this.data.xs[e[0]]:null},C.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},C.addXs=function(e){var t=this;Object.keys(e).forEach(function(n){t.config.data_xs[n]=e[n]})},C.hasMultipleX=function(e){return this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()>1},C.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},C.addName=function(e){var t;return e&&(t=this.config.data_names[e.id],e.name=void 0!==t?t:e.id),e},C.getValueOnIndex=function(e,t){var n=e.filter(function(e){return e.index===t});return n.length?n[0]:null},C.updateTargetX=function(e,t){var n=this;e.forEach(function(e){e.values.forEach(function(a,i){a.x=n.generateTargetX(t[i],e.id,i)}),n.data.xs[e.id]=t})},C.updateTargetXs=function(e,t){var n=this;e.forEach(function(e){t[e.id]&&n.updateTargetX([e],t[e.id])})},C.generateTargetX=function(e,t,n){var a=this;return a.isTimeSeries()?e?a.parseDate(e):a.parseDate(a.getXValue(t,n)):a.isCustomX()&&!a.isCategorized()?l(e)?+e:a.getXValue(t,n):n},C.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},C.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},C.getPrevX=function(e){var t=this.xs[e-1];return"undefined"!==typeof t?t:null},C.getNextX=function(e){var t=this.xs[e+1];return"undefined"!==typeof t?t:null},C.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(e){return e.values.length})},C.getMaxDataCountTarget=function(e){var t,n=e.length,a=0;return n>1?e.forEach(function(e){e.values.length>a&&(t=e,a=e.values.length)}):t=n?e[0]:null,t},C.getEdgeX=function(e){return e.length?[this.d3.min(e,function(e){return e.values[0].x}),this.d3.max(e,function(e){return e.values[e.values.length-1].x})]:[0,0]},C.mapToIds=function(e){return e.map(function(e){return e.id})},C.mapToTargetIds=function(e){return e?[].concat(e):this.mapToIds(this.data.targets)},C.hasTarget=function(e,t){var n,a=this.mapToIds(e);for(n=0;n<a.length;n++)if(a[n]===t)return!0;return!1},C.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0},C.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0},C.filterTargetsToShow=function(e){var t=this;return e.filter(function(e){return t.isTargetToShow(e.id)})},C.mapTargetsToUniqueXs=function(e){var t=this.d3.set(this.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return(t=this.isTimeSeries()?t.map(function(e){return new Date(+e)}):t.map(function(e){return+e})).sort(function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN})},C.addHiddenTargetIds=function(e){e=e instanceof Array?e:new Array(e);for(var t=0;t<e.length;t++)this.hiddenTargetIds.indexOf(e[t])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(e[t]))},C.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},C.addHiddenLegendIds=function(e){e=e instanceof Array?e:new Array(e);for(var t=0;t<e.length;t++)this.hiddenLegendIds.indexOf(e[t])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(e[t]))},C.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},C.getValuesAsIdKeyed=function(e){var t={};return e.forEach(function(e){t[e.id]=[],e.values.forEach(function(n){t[e.id].push(n.value)})}),t},C.checkValueInTargets=function(e,t){var n,a,i,r=Object.keys(e);for(n=0;n<r.length;n++)for(i=e[r[n]].values,a=0;a<i.length;a++)if(t(i[a].value))return!0;return!1},C.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e<0})},C.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e>0})},C.isOrderDesc=function(){var e=this.config;return"string"===typeof e.data_order&&"desc"===e.data_order.toLowerCase()},C.isOrderAsc=function(){var e=this.config;return"string"===typeof e.data_order&&"asc"===e.data_order.toLowerCase()},C.getOrderFunction=function(){var e=this.config,t=this.isOrderAsc(),n=this.isOrderDesc();if(t||n)return function(e,t){var a=function(e,t){return e+Math.abs(t.value)},i=e.values.reduce(a,0),r=t.values.reduce(a,0);return n?r-i:i-r};if(s(e.data_order))return e.data_order;if(c(e.data_order)){var a=e.data_order;return function(e,t){return a.indexOf(e.id)-a.indexOf(t.id)}}},C.orderTargets=function(e){var t=this.getOrderFunction();return t&&(e.sort(t),(this.isOrderAsc()||this.isOrderDesc())&&e.reverse()),e},C.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return e.x-t===0})},C.filterRemoveNull=function(e){return e.filter(function(e){return l(e.value)})},C.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},C.hasDataLabel=function(){var e=this.config;return!("boolean"!==typeof e.data_labels||!e.data_labels)||!("object"!==i(e.data_labels)||!v(e.data_labels))},C.getDataLabelLength=function(e,t,n){var a=this,i=[0,0];return a.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return a.dataLabelFormat(e.id)(e)}).each(function(e,t){i[t]=1.3*this.getBoundingClientRect()[n]}).remove(),i},C.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},C.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},C.findSameXOfValues=function(e,t){var n,a=e[t].x,i=[];for(n=t-1;n>=0&&a===e[n].x;n--)i.push(e[n]);for(n=t;n<e.length&&a===e[n].x;n++)i.push(e[n]);return i},C.findClosestFromTargets=function(e,t){var n,a=this;return n=e.map(function(e){return a.findClosest(e.values,t)}),a.findClosest(n,t)},C.findClosest=function(e,t){var n,i=this,r=i.config.point_sensitivity;return e.filter(function(e){return e&&i.isBarType(e.id)}).forEach(function(e){var t=i.main.select("."+a.bars+i.getTargetSelectorSuffix(e.id)+" ."+a.bar+"-"+e.index).node();!n&&i.isWithinBar(t)&&(n=e)}),e.filter(function(e){return e&&!i.isBarType(e.id)}).forEach(function(e){var a=i.dist(e,t);a<r&&(r=a,n=e)}),n},C.dist=function(e,t){var n=this.config,a=n.axis_rotated?1:0,i=n.axis_rotated?0:1,r=this.circleY(e,e.index),o=this.x(e.x);return Math.sqrt(Math.pow(o-t[a],2)+Math.pow(r-t[i],2))},C.convertValuesToStep=function(e){var t,n=[].concat(e);if(!this.isCategorized())return e;for(t=e.length+1;0<t;t--)n[t]=n[t-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[e.length+1]={x:n[e.length].x+1,value:n[e.length].value,id:n[e.length].id},n},C.updateDataAttributes=function(e,t){var n=this.config["data_"+e];return"undefined"===typeof t?n:(Object.keys(t).forEach(function(e){n[e]=t[e]}),this.redraw({withLegend:!0}),n)},C.load=function(e,t){var n=this;e&&(t.filter&&(e=e.filter(t.filter)),(t.type||t.types)&&e.forEach(function(e){var a=t.types&&t.types[e.id]?t.types[e.id]:t.type;n.setTargetType(e.id,a)}),n.data.targets.forEach(function(t){for(var n=0;n<e.length;n++)if(t.id===e[n].id){t.values=e[n].values,e.splice(n,1);break}}),n.data.targets=n.data.targets.concat(e)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()},C.loadFromArgs=function(e){var t=this;e.data?t.load(t.convertDataToTargets(e.data),e):e.url?t.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(n){t.load(t.convertDataToTargets(n),e)}):e.json?t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e):e.rows?t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e):e.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e):t.load(null,e)},C.unload=function(e,t){var n=this;t||(t=function(){}),(e=e.filter(function(e){return n.hasTarget(n.data.targets,e)}))&&0!==e.length?(n.svg.selectAll(e.map(function(e){return n.selectorTarget(e)})).transition().style("opacity",0).remove().call(n.endall,t),e.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+a.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):t()},C.getYDomainMin=function(e){var t,n,a,i,r,o,l=this,s=l.config,c=l.mapToIds(e),u=l.getValuesAsIdKeyed(e);if(s.data_groups.length>0)for(o=l.hasNegativeValueInTargets(e),t=0;t<s.data_groups.length;t++)if(0!==(i=s.data_groups[t].filter(function(e){return c.indexOf(e)>=0})).length)for(a=i[0],o&&u[a]&&u[a].forEach(function(e,t){u[a][t]=e<0?e:0}),n=1;n<i.length;n++)r=i[n],u[r]&&u[r].forEach(function(e,t){l.axis.getId(r)!==l.axis.getId(a)||!u[a]||o&&+e>0||(u[a][t]+=+e)});return l.d3.min(Object.keys(u).map(function(e){return l.d3.min(u[e])}))},C.getYDomainMax=function(e){var t,n,a,i,r,o,l=this,s=l.config,c=l.mapToIds(e),u=l.getValuesAsIdKeyed(e);if(s.data_groups.length>0)for(o=l.hasPositiveValueInTargets(e),t=0;t<s.data_groups.length;t++)if(0!==(i=s.data_groups[t].filter(function(e){return c.indexOf(e)>=0})).length)for(a=i[0],o&&u[a]&&u[a].forEach(function(e,t){u[a][t]=e>0?e:0}),n=1;n<i.length;n++)r=i[n],u[r]&&u[r].forEach(function(e,t){l.axis.getId(r)!==l.axis.getId(a)||!u[a]||o&&+e<0||(u[a][t]+=+e)});return l.d3.max(Object.keys(u).map(function(e){return l.d3.max(u[e])}))},C.getYDomain=function(e,t,n){var a,i,r,o,s,c,u,d,m,h,p=this,g=p.config,b=e.filter(function(e){return p.axis.getId(e.id)===t}),y=n?p.filterByXDomain(b,n):b,E="y2"===t?g.axis_y2_min:g.axis_y_min,x="y2"===t?g.axis_y2_max:g.axis_y_max,S=p.getYDomainMin(y),w=p.getYDomainMax(y),N="y2"===t?g.axis_y2_center:g.axis_y_center,C=p.hasType("bar",y)&&g.bar_zerobased||p.hasType("area",y)&&g.area_zerobased,_="y2"===t?g.axis_y2_inverted:g.axis_y_inverted,T=p.hasDataLabel()&&g.axis_rotated,O=p.hasDataLabel()&&!g.axis_rotated;return S=l(E)?E:l(x)?S<x?S:x-10:S,w=l(x)?x:l(E)?E<w?w:E+10:w,0===y.length?"y2"===t?p.y2.domain():p.y.domain():(isNaN(S)&&(S=0),isNaN(w)&&(w=S),S===w&&(S<0?w=0:S=0),m=S>=0&&w>=0,h=S<=0&&w<=0,(l(E)&&m||l(x)&&h)&&(C=!1),C&&(m&&(S=0),h&&(w=0)),r=o=.1*(i=Math.abs(w-S)),"undefined"!==typeof N&&(w=N+(s=Math.max(Math.abs(S),Math.abs(w))),S=N-s),T?(c=p.getDataLabelLength(S,w,"width"),u=f(p.y.range()),r+=i*((d=[c[0]/u,c[1]/u])[1]/(1-d[0]-d[1])),o+=i*(d[0]/(1-d[0]-d[1]))):O&&(c=p.getDataLabelLength(S,w,"height"),r+=p.axis.convertPixelsToAxisPadding(c[1],i),o+=p.axis.convertPixelsToAxisPadding(c[0],i)),"y"===t&&v(g.axis_y_padding)&&(r=p.axis.getPadding(g.axis_y_padding,"top",r,i),o=p.axis.getPadding(g.axis_y_padding,"bottom",o,i)),"y2"===t&&v(g.axis_y2_padding)&&(r=p.axis.getPadding(g.axis_y2_padding,"top",r,i),o=p.axis.getPadding(g.axis_y2_padding,"bottom",o,i)),C&&(m&&(o=S),h&&(r=-w)),a=[S-o,w+r],_?a.reverse():a)},C.getXDomainMin=function(e){var t=this,n=t.config;return m(n.axis_x_min)?t.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:t.d3.min(e,function(e){return t.d3.min(e.values,function(e){return e.x})})},C.getXDomainMax=function(e){var t=this,n=t.config;return m(n.axis_x_max)?t.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:t.d3.max(e,function(e){return t.d3.max(e.values,function(e){return e.x})})},C.getXDomainPadding=function(e){var t,n,a,r,o=this.config,s=e[1]-e[0];return n=this.isCategorized()?0:this.hasType("bar")?(t=this.getMaxDataCount())>1?s/(t-1)/2:.5:.01*s,"object"===i(o.axis_x_padding)&&v(o.axis_x_padding)?(a=l(o.axis_x_padding.left)?o.axis_x_padding.left:n,r=l(o.axis_x_padding.right)?o.axis_x_padding.right:n):a=r="number"===typeof o.axis_x_padding?o.axis_x_padding:n,{left:a,right:r}},C.getXDomain=function(e){var t=this,n=[t.getXDomainMin(e),t.getXDomainMax(e)],a=n[0],i=n[1],r=t.getXDomainPadding(n),o=0,l=0;return a-i!==0||t.isCategorized()||(t.isTimeSeries()?(a=new Date(.5*a.getTime()),i=new Date(1.5*i.getTime())):(a=0===a?1:.5*a,i=0===i?-1:1.5*i)),(a||0===a)&&(o=t.isTimeSeries()?new Date(a.getTime()-r.left):a-r.left),(i||0===i)&&(l=t.isTimeSeries()?new Date(i.getTime()+r.right):i+r.right),[o,l]},C.updateXDomain=function(e,t,n,a,i){var r=this,o=r.config;return n&&(r.x.domain(i||r.d3.extent(r.getXDomain(e))),r.orgXDomain=r.x.domain(),o.zoom_enabled&&r.zoom.scale(r.x).updateScaleExtent(),r.subX.domain(r.x.domain()),r.brush&&r.brush.scale(r.subX)),t&&(r.x.domain(i||(!r.brush||r.brush.empty()?r.orgXDomain:r.brush.extent())),o.zoom_enabled&&r.zoom.scale(r.x).updateScaleExtent()),a&&r.x.domain(r.trimXDomain(r.x.orgDomain())),r.x.domain()},C.trimXDomain=function(e){var t=this.getZoomDomain(),n=t[0],a=t[1];return e[0]<=n&&(e[1]=+e[1]+(n-e[0]),e[0]=n),a<=e[1]&&(e[0]=+e[0]-(e[1]-a),e[1]=a),e},C.drag=function(e){var t,n,i,r,o,l,s,c,u=this,d=u.config,m=u.main,h=u.d3;u.hasArcType()||d.data_selection_enabled&&(d.zoom_enabled&&!u.zoom.altDomain||d.data_selection_multiple&&(t=u.dragStart[0],n=u.dragStart[1],i=e[0],r=e[1],o=Math.min(t,i),l=Math.max(t,i),s=d.data_selection_grouped?u.margin.top:Math.min(n,r),c=d.data_selection_grouped?u.height:Math.max(n,r),m.select("."+a.dragarea).attr("x",o).attr("y",s).attr("width",l-o).attr("height",c-s),m.selectAll("."+a.shapes).selectAll("."+a.shape).filter(function(e){return d.data_selection_isselectable(e)}).each(function(e,t){var n,i,r,d,m,p,f=h.select(this),g=f.classed(a.SELECTED),v=f.classed(a.INCLUDED),b=!1;if(f.classed(a.circle))n=1*f.attr("cx"),i=1*f.attr("cy"),m=u.togglePoint,b=o<n&&n<l&&s<i&&i<c;else{if(!f.classed(a.bar))return;n=(p=x(this)).x,i=p.y,r=p.width,d=p.height,m=u.togglePath,b=!(l<n||n+r<o)&&!(c<i||i+d<s)}b^v&&(f.classed(a.INCLUDED,!v),f.classed(a.SELECTED,!g),m.call(u,!g,f,e,t))})))},C.dragstart=function(e){var t=this,n=t.config;t.hasArcType()||n.data_selection_enabled&&(t.dragStart=e,t.main.select("."+a.chart).append("rect").attr("class",a.dragarea).style("opacity",.1),t.dragging=!0)},C.dragend=function(){var e=this,t=e.config;e.hasArcType()||t.data_selection_enabled&&(e.main.select("."+a.dragarea).transition().duration(100).style("opacity",0).remove(),e.main.selectAll("."+a.shape).classed(a.INCLUDED,!1),e.dragging=!1)},C.getYFormat=function(e){var t=this,n=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,a=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(e,i,r){return("y2"===t.axis.getId(r)?a:n).call(t,e,i)}},C.yFormat=function(e){var t=this.config;return(t.axis_y_tick_format?t.axis_y_tick_format:this.defaultValueFormat)(e)},C.y2Format=function(e){var t=this.config;return(t.axis_y2_tick_format?t.axis_y2_tick_format:this.defaultValueFormat)(e)},C.defaultValueFormat=function(e){return l(e)?+e:""},C.defaultArcValueFormat=function(e,t){return(100*t).toFixed(1)+"%"},C.dataLabelFormat=function(e){var t=this.config.data_labels,n=function(e){return l(e)?+e:""};return"function"===typeof t.format?t.format:"object"===i(t.format)?t.format[e]?!0===t.format[e]?n:t.format[e]:function(){return""}:n},C.initGrid=function(){var e=this,t=e.config,n=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",a.grid),t.grid_x_show&&e.grid.append("g").attr("class",a.xgrids),t.grid_y_show&&e.grid.append("g").attr("class",a.ygrids),t.grid_focus_show&&e.grid.append("g").attr("class",a.xgridFocus).append("line").attr("class",a.xgridFocus),e.xgrid=n.selectAll([]),t.grid_lines_front||e.initGridLines()},C.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",a.grid+" "+a.gridLines),e.gridLines.append("g").attr("class",a.xgridLines),e.gridLines.append("g").attr("class",a.ygridLines),e.xgridLines=t.selectAll([])},C.updateXGrid=function(e){var t=this,n=t.config,i=t.d3,r=t.generateGridData(n.grid_x_type,t.x),o=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=n.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-o},y2:function(e){return t.x(e)-o}}:{x1:function(e){return t.x(e)+o},x2:function(e){return t.x(e)+o},y1:0,y2:t.height},t.xgrid=t.main.select("."+a.xgrids).selectAll("."+a.xgrid).data(r),t.xgrid.enter().append("line").attr("class",a.xgrid),e||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?t.height:0)?0:1}),t.xgrid.exit().remove()},C.updateYGrid=function(){var e=this,t=e.config,n=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select("."+a.ygrids).selectAll("."+a.ygrid).data(n),e.ygrid.enter().append("line").attr("class",a.ygrid),e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},C.gridTextAnchor=function(e){return e.position?e.position:"end"},C.gridTextDx=function(e){return"start"===e.position?4:"middle"===e.position?0:-4},C.xGridTextX=function(e){return"start"===e.position?-this.height:"middle"===e.position?-this.height/2:0},C.yGridTextX=function(e){return"start"===e.position?0:"middle"===e.position?this.width/2:this.width},C.updateGrid=function(e){var t,n,i,r=this,o=r.main,l=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),o.select("line."+a.xgridFocus).style("visibility","hidden"),l.grid_x_show&&r.updateXGrid(),r.xgridLines=o.select("."+a.xgridLines).selectAll("."+a.xgridLine).data(l.grid_x_lines),(t=r.xgridLines.enter().append("g").attr("class",function(e){return a.xgridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0),t.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",l.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(e).style("opacity",0).remove(),l.grid_y_show&&r.updateYGrid(),r.ygridLines=o.select("."+a.ygridLines).selectAll("."+a.ygridLine).data(l.grid_y_lines),(n=r.ygridLines.enter().append("g").attr("class",function(e){return a.ygridLine+(e.class?" "+e.class:"")})).append("line").style("opacity",0),n.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",l.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),i=r.yv.bind(r),r.ygridLines.select("line").transition().duration(e).attr("x1",l.axis_rotated?i:0).attr("x2",l.axis_rotated?i:r.width).attr("y1",l.axis_rotated?0:i).attr("y2",l.axis_rotated?r.height:i).style("opacity",1),r.ygridLines.select("text").transition().duration(e).attr("x",l.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",i).text(function(e){return e.text}).style("opacity",1),r.ygridLines.exit().transition().duration(e).style("opacity",0).remove()},C.redrawGrid=function(e){var t=this,n=t.config,a=t.xv.bind(t),i=t.xgridLines.select("line"),r=t.xgridLines.select("text");return[(e?i.transition():i).attr("x1",n.axis_rotated?0:a).attr("x2",n.axis_rotated?t.width:a).attr("y1",n.axis_rotated?a:0).attr("y2",n.axis_rotated?a:t.height).style("opacity",1),(e?r.transition():r).attr("x",n.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",a).text(function(e){return e.text}).style("opacity",1)]},C.showXGridFocus=function(e){var t=this,n=t.config,i=e.filter(function(e){return e&&l(e.value)}),r=t.main.selectAll("line."+a.xgridFocus),o=t.xx.bind(t);n.tooltip_show&&(t.hasType("scatter")||t.hasArcType()||(r.style("visibility","visible").data([i[0]]).attr(n.axis_rotated?"y1":"x1",o).attr(n.axis_rotated?"y2":"x2",o),t.smoothLines(r,"grid")))},C.hideXGridFocus=function(){this.main.select("line."+a.xgridFocus).style("visibility","hidden")},C.updateXgridFocus=function(){var e=this.config;this.main.select("line."+a.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?this.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:this.height)},C.generateGridData=function(e,t){var n,i,r,o,l=[],s=this.main.select("."+a.axisX).selectAll(".tick").size();if("year"===e)for(i=(n=this.getXDomain())[0].getFullYear(),r=n[1].getFullYear(),o=i;o<=r;o++)l.push(new Date(o+"-01-01 00:00:00"));else(l=t.ticks(10)).length>s&&(l=l.filter(function(e){return(""+e).indexOf(".")<0}));return l},C.getGridFilterToRemove=function(e){return e?function(t){var n=!1;return[].concat(e).forEach(function(e){("value"in e&&t.value===e.value||"class"in e&&t.class===e.class)&&(n=!0)}),n}:function(){return!0}},C.removeGridLines=function(e,t){var n=this.config,i=this.getGridFilterToRemove(e),r=function(e){return!i(e)},o=t?a.xgridLines:a.ygridLines,l=t?a.xgridLine:a.ygridLine;this.main.select("."+o).selectAll("."+l).filter(i).transition().duration(n.transition_duration).style("opacity",0).remove(),t?n.grid_x_lines=n.grid_x_lines.filter(r):n.grid_y_lines=n.grid_y_lines.filter(r)},C.initEventRect=function(){this.main.select("."+a.chart).append("g").attr("class",a.eventRects).style("fill-opacity",0)},C.redrawEventRect=function(){var e,t,n=this,i=n.config,r=n.isMultipleX(),o=n.main.select("."+a.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null).classed(a.eventRectsMultiple,r).classed(a.eventRectsSingle,!r);o.selectAll("."+a.eventRect).remove(),n.eventRect=o.selectAll("."+a.eventRect),r?(e=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(e.enter()),n.updateEventRect(e)):(t=n.getMaxDataCountTarget(n.data.targets),o.datum(t?t.values:[]),n.eventRect=o.selectAll("."+a.eventRect),e=n.eventRect.data(function(e){return e}),n.generateEventRectsForSingleX(e.enter()),n.updateEventRect(e),e.exit().remove())},C.updateEventRect=function(e){var t,n,a,i,r,o,l=this,s=l.config;e=e||l.eventRect.data(function(e){return e}),l.isMultipleX()?(t=0,n=0,a=l.width,i=l.height):(!l.isCustomX()&&!l.isTimeSeries()||l.isCategorized()?(r=l.getEventRectWidth(),o=function(e){return l.x(e.x)-r/2}):(l.updateXs(),r=function(e){var t=l.getPrevX(e.index),n=l.getNextX(e.index);return null===t&&null===n?s.axis_rotated?l.height:l.width:(null===t&&(t=l.x.domain()[0]),null===n&&(n=l.x.domain()[1]),Math.max(0,(l.x(n)-l.x(t))/2))},o=function(e){var t=l.getPrevX(e.index),n=l.getNextX(e.index),a=l.data.xs[e.id][e.index];return null===t&&null===n?0:(null===t&&(t=l.x.domain()[0]),(l.x(a)+l.x(t))/2)}),t=s.axis_rotated?0:o,n=s.axis_rotated?o:0,a=s.axis_rotated?l.width:r,i=s.axis_rotated?r:l.height),e.attr("class",l.classEvent.bind(l)).attr("x",t).attr("y",n).attr("width",a).attr("height",i)},C.generateEventRectsForSingleX=function(e){var t=this,n=t.d3,i=t.config;e.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("mouseover",function(e){var n=e.index;t.dragging||t.flowing||t.hasArcType()||(i.point_focus_expand_enabled&&t.expandCircles(n,null,!0),t.expandBars(n,null,!0),t.main.selectAll("."+a.shape+"-"+n).each(function(e){i.data_onmouseover.call(t.api,e)}))}).on("mouseout",function(e){var n=e.index;t.config&&(t.hasArcType()||(t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars(),t.main.selectAll("."+a.shape+"-"+n).each(function(e){i.data_onmouseout.call(t.api,e)})))}).on("mousemove",function(e){var r,o=e.index,l=t.svg.select("."+a.eventRect+"-"+o);t.dragging||t.flowing||t.hasArcType()||(t.isStepType(e)&&"step-after"===t.config.line_step_type&&n.mouse(this)[0]<t.x(t.getXValue(e.id,o))&&(o-=1),r=t.filterTargetsToShow(t.data.targets).map(function(e){return t.addName(t.getValueOnIndex(e.values,o))}),i.tooltip_grouped&&(t.showTooltip(r,this),t.showXGridFocus(r)),(!i.tooltip_grouped||i.data_selection_enabled&&!i.data_selection_grouped)&&t.main.selectAll("."+a.shape+"-"+o).each(function(){n.select(this).classed(a.EXPANDED,!0),i.data_selection_enabled&&l.style("cursor",i.data_selection_grouped?"pointer":null),i.tooltip_grouped||(t.hideXGridFocus(),t.hideTooltip(),i.data_selection_grouped||(t.unexpandCircles(o),t.unexpandBars(o)))}).filter(function(e){return t.isWithinShape(this,e)}).each(function(e){i.data_selection_enabled&&(i.data_selection_grouped||i.data_selection_isselectable(e))&&l.style("cursor","pointer"),i.tooltip_grouped||(t.showTooltip([e],this),t.showXGridFocus([e]),i.point_focus_expand_enabled&&t.expandCircles(o,e.id,!0),t.expandBars(o,e.id,!0))}))}).on("click",function(e){var r=e.index;!t.hasArcType()&&t.toggleShape&&(t.cancelClick?t.cancelClick=!1:(t.isStepType(e)&&"step-after"===i.line_step_type&&n.mouse(this)[0]<t.x(t.getXValue(e.id,r))&&(r-=1),t.main.selectAll("."+a.shape+"-"+r).each(function(e){(i.data_selection_grouped||t.isWithinShape(this,e))&&(t.toggleShape(this,e,r),t.config.data_onclick.call(t.api,e,this))})))}).call(i.data_selection_draggable&&t.drag?n.behavior.drag().origin(Object).on("drag",function(){t.drag(n.mouse(this))}).on("dragstart",function(){t.dragstart(n.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})},C.generateEventRectsForMultipleXs=function(e){var t=this,n=t.d3,i=t.config;function r(){t.svg.select("."+a.eventRect).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars()}e.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("class",a.eventRect).on("mouseout",function(){t.config&&(t.hasArcType()||r())}).on("mousemove",function(){var e,o,l,s=t.filterTargetsToShow(t.data.targets);t.dragging||t.hasArcType(s)||(e=n.mouse(this),o=t.findClosestFromTargets(s,e),!t.mouseover||o&&o.id===t.mouseover.id||(i.data_onmouseout.call(t.api,t.mouseover),t.mouseover=void 0),o?(l=(t.isScatterType(o)||!i.tooltip_grouped?[o]:t.filterByX(s,o.x)).map(function(e){return t.addName(e)}),t.showTooltip(l,this),i.point_focus_expand_enabled&&t.expandCircles(o.index,o.id,!0),t.expandBars(o.index,o.id,!0),t.showXGridFocus(l),(t.isBarType(o.id)||t.dist(o,e)<i.point_sensitivity)&&(t.svg.select("."+a.eventRect).style("cursor","pointer"),t.mouseover||(i.data_onmouseover.call(t.api,o),t.mouseover=o))):r())}).on("click",function(){var e,r,o=t.filterTargetsToShow(t.data.targets);t.hasArcType(o)||(e=n.mouse(this),(r=t.findClosestFromTargets(o,e))&&(t.isBarType(r.id)||t.dist(r,e)<i.point_sensitivity)&&t.main.selectAll("."+a.shapes+t.getTargetSelectorSuffix(r.id)).selectAll("."+a.shape+"-"+r.index).each(function(){(i.data_selection_grouped||t.isWithinShape(this,r))&&(t.toggleShape(this,r,r.index),t.config.data_onclick.call(t.api,r,this))}))}).call(i.data_selection_draggable&&t.drag?n.behavior.drag().origin(Object).on("drag",function(){t.drag(n.mouse(this))}).on("dragstart",function(){t.dragstart(n.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})},C.dispatchEvent=function(e,t,n){var i="."+a.eventRect+(this.isMultipleX()?"":"-"+t),r=this.main.select(i).node(),o=r.getBoundingClientRect(),l=o.left+(n?n[0]:0),s=o.top+(n?n[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(e,!0,!0,window,0,l,s,l,s,!1,!1,!1,!1,0,null),r.dispatchEvent(c)},C.initLegend=function(){var e=this;if(e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend")),!e.config.legend_show)return e.legend.style("visibility","hidden"),void(e.hiddenLegendIds=e.mapToIds(e.data.targets));e.updateLegendWithDefaults()},C.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},C.updateSizeForLegend=function(e,t){var n=this,a=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+a.legend_inset_y+5.5:n.currentHeight-e-n.getCurrentPaddingBottom()-a.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+a.legend_inset_x+.5:n.currentWidth-t-n.getCurrentPaddingRight()-a.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-e,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-t:n.isLegendInset?i.left:0}},C.transformLegend=function(e){(e?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},C.updateLegendStep=function(e){this.legendStep=e},C.updateLegendItemWidth=function(e){this.legendItemWidth=e},C.updateLegendItemHeight=function(e){this.legendItemHeight=e},C.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},C.getLegendHeight=function(){var e=this,t=0;return e.config.legend_show&&(t=e.isLegendRight?e.currentHeight:Math.max(20,e.legendItemHeight)*(e.legendStep+1)),t},C.opacityForLegend=function(e){return e.classed(a.legendItemHidden)?null:1},C.opacityForUnfocusedLegend=function(e){return e.classed(a.legendItemHidden)?null:.3},C.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+a.legendItem).filter(function(t){return e.indexOf(t)>=0}).classed(a.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},C.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+a.legendItem).classed(a.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(t.select(this))})},C.showLegend=function(e){var t=this,n=t.config;n.legend_show||(n.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},C.hideLegend=function(e){var t=this,n=t.config;n.legend_show&&g(e)&&(n.legend_show=!1,t.legend.style("visibility","hidden")),t.addHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},C.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},C.updateLegend=function(e,t,n){var i,r,o,l,s,c,u,d,h,p,f,g,v,y,E,x,S=this,w=S.config,N=4,C=10,_=0,T=0,O=10,D=w.legend_item_tile_width+5,A=0,L={},I={},P={},k=[0],j={},M=0;function R(t,n,i){var r,o,l=0===i,s=i===e.length-1,c=function(e,t){return S.legendItemTextBox[t]||(S.legendItemTextBox[t]=S.getTextRect(e.textContent,a.legendItem,e)),S.legendItemTextBox[t]}(t,n),u=c.width+D+(!s||S.isLegendRight||S.isLegendInset?C:0)+w.legend_padding,d=c.height+N,m=S.isLegendRight||S.isLegendInset?d:u,h=S.isLegendRight||S.isLegendInset?S.getLegendHeight():S.getLegendWidth();function p(e,t){t||(r=(h-A-m)/2)<O&&(r=(h-m)/2,A=0,M++),j[e]=M,k[M]=S.isLegendInset?10:r,L[e]=A,A+=m}l&&(A=0,M=0,_=0,T=0),!w.legend_show||S.isLegendToShow(n)?(I[n]=u,P[n]=d,(!_||u>=_)&&(_=u),(!T||d>=T)&&(T=d),o=S.isLegendRight||S.isLegendInset?T:_,w.legend_equally?(Object.keys(I).forEach(function(e){I[e]=_}),Object.keys(P).forEach(function(e){P[e]=T}),(r=(h-o*e.length)/2)<O?(A=0,M=0,e.forEach(function(e){p(e)})):p(n,!0)):p(n)):I[n]=P[n]=j[n]=L[n]=0}e=e.filter(function(e){return!m(w.data_names[e])||null!==w.data_names[e]}),f=b(t=t||{},"withTransition",!0),g=b(t,"withTransitionForTransform",!0),S.isLegendInset&&(M=w.legend_inset_step?w.legend_inset_step:e.length,S.updateLegendStep(M)),S.isLegendRight?(i=function(e){return _*j[e]},l=function(e){return k[j[e]]+L[e]}):S.isLegendInset?(i=function(e){return _*j[e]+10},l=function(e){return k[j[e]]+L[e]}):(i=function(e){return k[j[e]]+L[e]},l=function(e){return T*j[e]}),r=function(e,t){return i(e,t)+4+w.legend_item_tile_width},s=function(e,t){return l(e,t)+9},o=function(e,t){return i(e,t)},c=function(e,t){return l(e,t)-5},u=function(e,t){return i(e,t)-2},d=function(e,t){return i(e,t)-2+w.legend_item_tile_width},h=function(e,t){return l(e,t)+4},(p=S.legend.selectAll("."+a.legendItem).data(e).enter().append("g").attr("class",function(e){return S.generateClass(a.legendItem,e)}).style("visibility",function(e){return S.isLegendToShow(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){w.legend_item_onclick?w.legend_item_onclick.call(S,e):S.d3.event.altKey?(S.api.hide(),S.api.show(e)):(S.api.toggle(e),S.isTargetToShow(e)?S.api.focus(e):S.api.revert())}).on("mouseover",function(e){w.legend_item_onmouseover?w.legend_item_onmouseover.call(S,e):(S.d3.select(this).classed(a.legendItemFocused,!0),!S.transiting&&S.isTargetToShow(e)&&S.api.focus(e))}).on("mouseout",function(e){w.legend_item_onmouseout?w.legend_item_onmouseout.call(S,e):(S.d3.select(this).classed(a.legendItemFocused,!1),S.api.revert())})).append("text").text(function(e){return m(w.data_names[e])?w.data_names[e]:e}).each(function(e,t){R(this,e,t)}).style("pointer-events","none").attr("x",S.isLegendRight||S.isLegendInset?r:-200).attr("y",S.isLegendRight||S.isLegendInset?-200:s),p.append("rect").attr("class",a.legendItemEvent).style("fill-opacity",0).attr("x",S.isLegendRight||S.isLegendInset?o:-200).attr("y",S.isLegendRight||S.isLegendInset?-200:c),p.append("line").attr("class",a.legendItemTile).style("stroke",S.color).style("pointer-events","none").attr("x1",S.isLegendRight||S.isLegendInset?u:-200).attr("y1",S.isLegendRight||S.isLegendInset?-200:h).attr("x2",S.isLegendRight||S.isLegendInset?d:-200).attr("y2",S.isLegendRight||S.isLegendInset?-200:h).attr("stroke-width",w.legend_item_tile_height),x=S.legend.select("."+a.legendBackground+" rect"),S.isLegendInset&&_>0&&0===x.size()&&(x=S.legend.insert("g","."+a.legendItem).attr("class",a.legendBackground).append("rect")),v=S.legend.selectAll("text").data(e).text(function(e){return m(w.data_names[e])?w.data_names[e]:e}).each(function(e,t){R(this,e,t)}),(f?v.transition():v).attr("x",r).attr("y",s),y=S.legend.selectAll("rect."+a.legendItemEvent).data(e),(f?y.transition():y).attr("width",function(e){return I[e]}).attr("height",function(e){return P[e]}).attr("x",o).attr("y",c),E=S.legend.selectAll("line."+a.legendItemTile).data(e),(f?E.transition():E).style("stroke",S.levelColor?function(e){return S.levelColor(S.cache[e].values[0].value)}:S.color).attr("x1",u).attr("y1",h).attr("x2",d).attr("y2",h),x&&(f?x.transition():x).attr("height",S.getLegendHeight()-12).attr("width",_*(M+1)+10),S.legend.selectAll("."+a.legendItem).classed(a.legendItemHidden,function(e){return!S.isTargetToShow(e)}),S.updateLegendItemWidth(_),S.updateLegendItemHeight(T),S.updateLegendStep(M),S.updateSizes(),S.updateScales(),S.updateSvgSize(),S.transformAll(g,n),S.legendHasRendered=!0},C.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",a.regions)},C.updateRegion=function(e){var t=this,n=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible"),t.mainRegion=t.main.select("."+a.regions).selectAll("."+a.region).data(n.regions),t.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),t.mainRegion.attr("class",t.classRegion.bind(t)),t.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},C.redrawRegion=function(e){var t=this,n=t.mainRegion.selectAll("rect").each(function(){var e=t.d3.select(this.parentNode).datum();t.d3.select(this).datum(e)}),a=t.regionX.bind(t),i=t.regionY.bind(t),r=t.regionWidth.bind(t),o=t.regionHeight.bind(t);return[(e?n.transition():n).attr("x",a).attr("y",i).attr("width",r).attr("height",o).style("fill-opacity",function(e){return l(e.opacity)?e.opacity:.1})]},C.regionX=function(e){var t=this,n=t.config,a="y"===e.axis?t.y:t.y2;return"y"===e.axis||"y2"===e.axis?n.axis_rotated&&"start"in e?a(e.start):0:n.axis_rotated?0:"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0},C.regionY=function(e){var t=this,n=t.config,a="y"===e.axis?t.y:t.y2;return"y"===e.axis||"y2"===e.axis?n.axis_rotated?0:"end"in e?a(e.end):0:n.axis_rotated&&"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0},C.regionWidth=function(e){var t,n=this,a=n.config,i=n.regionX(e),r="y"===e.axis?n.y:n.y2;return(t="y"===e.axis||"y2"===e.axis?a.axis_rotated&&"end"in e?r(e.end):n.width:a.axis_rotated?n.width:"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.width)<i?0:t-i},C.regionHeight=function(e){var t,n=this,a=n.config,i=this.regionY(e),r="y"===e.axis?n.y:n.y2;return(t="y"===e.axis||"y2"===e.axis?a.axis_rotated?n.height:"start"in e?r(e.start):n.height:a.axis_rotated&&"end"in e?n.x(n.isTimeSeries()?n.parseDate(e.end):e.end):n.height)<i?0:t-i},C.isRegionOnX=function(e){return!e.axis||"x"===e.axis},C.getScale=function(e,t,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([e,t])},C.getX=function(e,t,n,a){var i,r=this.getScale(e,t,this.isTimeSeries()),o=n?r.domain(n):r;for(i in this.isCategorized()?(a=a||function(){return 0},r=function(e,t){var n=o(e)+a(e);return t?n:Math.ceil(n)}):r=function(e,t){var n=o(e);return t?n:Math.ceil(n)},o)r[i]=o[i];return r.orgDomain=function(){return o.domain()},this.isCategorized()&&(r.domain=function(e){return arguments.length?(o.domain(e),r):[(e=this.orgDomain())[0],e[1]+1]}),r},C.getY=function(e,t,n){var a=this.getScale(e,t,this.isTimeSeriesY());return n&&a.domain(n),a},C.getYScale=function(e){return"y2"===this.axis.getId(e)?this.y2:this.y},C.getSubYScale=function(e){return"y2"===this.axis.getId(e)?this.subY2:this.subY},C.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},C.selectPoint=function(e,t,n){var i=this,r=i.config,o=(r.axis_rotated?i.circleY:i.circleX).bind(i),l=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,t,e.node()),i.main.select("."+a.selectedCircles+i.getTargetSelectorSuffix(t.id)).selectAll("."+a.selectedCircle+"-"+n).data([t]).enter().append("circle").attr("class",function(){return i.generateClass(a.selectedCircle,n)}).attr("cx",o).attr("cy",l).attr("stroke",function(){return i.color(t)}).attr("r",function(e){return 1.4*i.pointSelectR(e)}).transition().duration(100).attr("r",s)},C.unselectPoint=function(e,t,n){this.config.data_onunselected.call(this.api,t,e.node()),this.main.select("."+a.selectedCircles+this.getTargetSelectorSuffix(t.id)).selectAll("."+a.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},C.togglePoint=function(e,t,n,a){e?this.selectPoint(t,n,a):this.unselectPoint(t,n,a)},C.selectPath=function(e,t){var n=this;n.config.data_onselected.call(n,t,e.node()),n.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(t)).brighter(.75)})},C.unselectPath=function(e,t){var n=this;n.config.data_onunselected.call(n,t,e.node()),n.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return n.color(t)})},C.togglePath=function(e,t,n,a){e?this.selectPath(t,n,a):this.unselectPath(t,n,a)},C.getToggle=function(e,t){var n;return"circle"===e.nodeName?n=this.isStepType(t)?function(){}:this.togglePoint:"path"===e.nodeName&&(n=this.togglePath),n},C.toggleShape=function(e,t,n){var i=this,r=i.d3,o=i.config,l=r.select(e),s=l.classed(a.SELECTED),c=i.getToggle(e,t).bind(i);o.data_selection_enabled&&o.data_selection_isselectable(t)&&(o.data_selection_multiple||i.main.selectAll("."+a.shapes+(o.data_selection_grouped?i.getTargetSelectorSuffix(t.id):"")).selectAll("."+a.shape).each(function(e,t){var n=r.select(this);n.classed(a.SELECTED)&&c(!1,n.classed(a.SELECTED,!1),e,t)}),l.classed(a.SELECTED,!s),c(!s,l,t,n))},C.initBar=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartBars)},C.updateTargetsForBar=function(e){var t=this,n=t.config,i=t.classChartBar.bind(t),r=t.classBars.bind(t),o=t.classFocus.bind(t);t.main.select("."+a.chartBars).selectAll("."+a.chartBar).data(e).attr("class",function(e){return i(e)+o(e)}).enter().append("g").attr("class",i).style("pointer-events","none").append("g").attr("class",r).style("cursor",function(e){return n.data_selection_isselectable(e)?"pointer":null})},C.updateBar=function(e){var t=this,n=t.barData.bind(t),i=t.classBar.bind(t),r=t.initialOpacity.bind(t),o=function(e){return t.color(e.id)};t.mainBar=t.main.selectAll("."+a.bars).selectAll("."+a.bar).data(n),t.mainBar.enter().append("path").attr("class",i).style("stroke",o).style("fill",o),t.mainBar.style("opacity",r),t.mainBar.exit().transition().duration(e).remove()},C.redrawBar=function(e,t){return[(t?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",e).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},C.getBarW=function(e,t){var n=this.config,a="number"===typeof n.bar_width?n.bar_width:t?e.tickInterval()*n.bar_width_ratio/t:0;return n.bar_width_max&&a>n.bar_width_max?n.bar_width_max:a},C.getBars=function(e,t){return(t?this.main.selectAll("."+a.bars+this.getTargetSelectorSuffix(t)):this.main).selectAll("."+a.bar+(l(e)?"-"+e:""))},C.expandBars=function(e,t,n){n&&this.unexpandBars(),this.getBars(e,t).classed(a.EXPANDED,!0)},C.unexpandBars=function(e){this.getBars(e).classed(a.EXPANDED,!1)},C.generateDrawBar=function(e,t){var n=this.config,a=this.generateGetBarPoints(e,t);return function(e,t){var i=a(e,t),r=n.axis_rotated?1:0,o=n.axis_rotated?0:1;return"M "+i[0][r]+","+i[0][o]+" L"+i[1][r]+","+i[1][o]+" L"+i[2][r]+","+i[2][o]+" L"+i[3][r]+","+i[3][o]+" z"}},C.generateGetBarPoints=function(e,t){var n=this,a=t?n.subXAxis:n.xAxis,i=e.__max__+1,r=n.getBarW(a,i),o=n.getShapeX(r,i,e,!!t),l=n.getShapeY(!!t),s=n.getShapeOffset(n.isBarType,e,!!t),c=r*(n.config.bar_space/2),u=t?n.getSubYScale:n.getYScale;return function(e,t){var a=u.call(n,e.id)(0),i=s(e,t)||a,d=o(e),m=l(e);return n.config.axis_rotated&&(0<e.value&&m<a||e.value<0&&a<m)&&(m=a),[[d+c,i],[d+c,m-(a-i)],[d+r-c,m-(a-i)],[d+r-c,i]]}},C.isWithinBar=function(e){var t=this.d3.mouse(e),n=e.getBoundingClientRect(),a=e.pathSegList.getItem(0),i=e.pathSegList.getItem(1),r=Math.min(a.x,i.x),o=Math.min(a.y,i.y),l=r+n.width+2,s=o+n.height+2,c=o-2;return r-2<t[0]&&t[0]<l&&c<t[1]&&t[1]<s},C.getShapeIndices=function(e){var t,n,a=this.config,i={},r=0;return this.filterTargetsToShow(this.data.targets.filter(e,this)).forEach(function(e){for(t=0;t<a.data_groups.length;t++)if(!(a.data_groups[t].indexOf(e.id)<0))for(n=0;n<a.data_groups[t].length;n++)if(a.data_groups[t][n]in i){i[e.id]=i[a.data_groups[t][n]];break}d(i[e.id])&&(i[e.id]=r++)}),i.__max__=r-1,i},C.getShapeX=function(e,t,n,a){var i=a?this.subX:this.x;return function(a){var r=a.id in n?n[a.id]:0;return a.x||0===a.x?i(a.x)-e*(t/2-r):0}},C.getShapeY=function(e){var t=this;return function(n){return(e?t.getSubYScale(n.id):t.getYScale(n.id))(n.value)}},C.getShapeOffset=function(e,t,n){var a=this,i=a.orderTargets(a.filterTargetsToShow(a.data.targets.filter(e,a))),r=i.map(function(e){return e.id});return function(e,o){var l=n?a.getSubYScale(e.id):a.getYScale(e.id),s=l(0),c=s;return i.forEach(function(n){var i=a.isStepType(e)?a.convertValuesToStep(n.values):n.values;n.id!==e.id&&t[n.id]===t[e.id]&&r.indexOf(n.id)<r.indexOf(e.id)&&("undefined"!==typeof i[o]&&+i[o].x===+e.x||(o=-1,i.forEach(function(t,n){t.x===e.x&&(o=n)})),o in i&&i[o].value*e.value>=0&&(c+=l(i[o].value)-s))}),c}},C.isWithinShape=function(e,t){var n,i=this,r=i.d3.select(e);return i.isTargetToShow(t.id)?"circle"===e.nodeName?n=i.isStepType(t)?i.isWithinStep(e,i.getYScale(t.id)(t.value)):i.isWithinCircle(e,1.5*i.pointSelectR(t)):"path"===e.nodeName&&(n=!r.classed(a.bar)||i.isWithinBar(e)):n=!1,n},C.getInterpolate=function(e){var t=this,n=t.isInterpolationType(t.config.spline_interpolation_type)?t.config.spline_interpolation_type:"cardinal";return t.isSplineType(e)?n:t.isStepType(e)?t.config.line_step_type:"linear"},C.initLine=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartLines)},C.updateTargetsForLine=function(e){var t,n=this,i=n.config,r=n.classChartLine.bind(n),o=n.classLines.bind(n),l=n.classAreas.bind(n),s=n.classCircles.bind(n),c=n.classFocus.bind(n);(t=n.main.select("."+a.chartLines).selectAll("."+a.chartLine).data(e).attr("class",function(e){return r(e)+c(e)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",o),t.append("g").attr("class",l),t.append("g").attr("class",function(e){return n.generateClass(a.selectedCircles,e.id)}),t.append("g").attr("class",s).style("cursor",function(e){return i.data_selection_isselectable(e)?"pointer":null}),e.forEach(function(e){n.main.selectAll("."+a.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+a.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},C.updateLine=function(e){var t=this;t.mainLine=t.main.selectAll("."+a.lines).selectAll("."+a.line).data(t.lineData.bind(t)),t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(e){return t.isStepType(e)?"crispEdges":""}).attr("transform",null),t.mainLine.exit().transition().duration(e).style("opacity",0).remove()},C.redrawLine=function(e,t){return[(t?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},C.generateDrawLine=function(e,t){var n=this,a=n.config,i=n.d3.svg.line(),r=n.generateGetLinePoints(e,t),o=t?n.getSubYScale:n.getYScale,l=function(e){return(t?n.subxx:n.xx).call(n,e)},s=function(e,t){return a.data_groups.length>0?r(e,t)[0][1]:o.call(n,e.id)(e.value)};return i=a.axis_rotated?i.x(s).y(l):i.x(l).y(s),a.line_connectNull||(i=i.defined(function(e){return null!=e.value})),function(e){var r,l=a.line_connectNull?n.filterRemoveNull(e.values):e.values,s=t?n.subX:n.x,c=o.call(n,e.id),u=0,d=0;return n.isLineType(e)?a.data_regions[e.id]?r=n.lineWithRegions(l,s,c,a.data_regions[e.id]):(n.isStepType(e)&&(l=n.convertValuesToStep(l)),r=i.interpolate(n.getInterpolate(e))(l)):(l[0]&&(u=s(l[0].x),d=c(l[0].value)),r=a.axis_rotated?"M "+d+" "+u:"M "+u+" "+d),r||"M 0 0"}},C.generateGetLinePoints=function(e,t){var n=this,a=n.config,i=e.__max__+1,r=n.getShapeX(0,i,e,!!t),o=n.getShapeY(!!t),l=n.getShapeOffset(n.isLineType,e,!!t),s=t?n.getSubYScale:n.getYScale;return function(e,t){var i=s.call(n,e.id)(0),c=l(e,t)||i,u=r(e),d=o(e);return a.axis_rotated&&(0<e.value&&d<i||e.value<0&&i<d)&&(d=i),[[u,d-(i-c)],[u,d-(i-c)],[u,d-(i-c)],[u,d-(i-c)]]}},C.lineWithRegions=function(e,t,n,a){var i,r,o,l,s,c,u,h,p,f,g,v=this,b=v.config,y="M",E=v.isCategorized()?.5:0,x=[];function S(e,t){var n;for(n=0;n<t.length;n++)if(t[n].start<e&&e<=t[n].end)return!0;return!1}if(m(a))for(i=0;i<a.length;i++)x[i]={},d(a[i].start)?x[i].start=e[0].x:x[i].start=v.isTimeSeries()?v.parseDate(a[i].start):a[i].start,d(a[i].end)?x[i].end=e[e.length-1].x:x[i].end=v.isTimeSeries()?v.parseDate(a[i].end):a[i].end;function w(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}for(f=b.axis_rotated?function(e){return n(e.value)}:function(e){return t(e.x)},g=b.axis_rotated?function(e){return t(e.x)}:function(e){return n(e.value)},o=v.isTimeSeries()?function(e,a,i,r){var o=e.x.getTime(),l=a.x-e.x,c=new Date(o+l*i),u=new Date(o+l*(i+r));return w(b.axis_rotated?[[n(s(i)),t(c)],[n(s(i+r)),t(u)]]:[[t(c),n(s(i))],[t(u),n(s(i+r))]])}:function(e,a,i,r){return w(b.axis_rotated?[[n(s(i),!0),t(l(i))],[n(s(i+r),!0),t(l(i+r))]]:[[t(l(i),!0),n(s(i))],[t(l(i+r),!0),n(s(i+r))]])},i=0;i<e.length;i++){if(d(x)||!S(e[i].x,x))y+=" "+f(e[i])+" "+g(e[i]);else for(l=v.getScale(e[i-1].x+E,e[i].x+E,v.isTimeSeries()),s=v.getScale(e[i-1].value,e[i].value),c=t(e[i].x)-t(e[i-1].x),u=n(e[i].value)-n(e[i-1].value),p=2*(h=2/Math.sqrt(Math.pow(c,2)+Math.pow(u,2))),r=h;r<=1;r+=p)y+=o(e[i-1],e[i],r,h);e[i].x}return y},C.updateArea=function(e){var t=this,n=t.d3;t.mainArea=t.main.selectAll("."+a.areas).selectAll("."+a.area).data(t.lineData.bind(t)),t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0}),t.mainArea.style("opacity",t.orgAreaOpacity),t.mainArea.exit().transition().duration(e).style("opacity",0).remove()},C.redrawArea=function(e,t){return[(t?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},C.generateDrawArea=function(e,t){var n=this,a=n.config,i=n.d3.svg.area(),r=n.generateGetAreaPoints(e,t),o=t?n.getSubYScale:n.getYScale,l=function(e){return(t?n.subxx:n.xx).call(n,e)},s=function(e,t){return a.data_groups.length>0?r(e,t)[0][1]:o.call(n,e.id)(n.getAreaBaseValue(e.id))},c=function(e,t){return a.data_groups.length>0?r(e,t)[1][1]:o.call(n,e.id)(e.value)};return i=a.axis_rotated?i.x0(s).x1(c).y(l):i.x(l).y0(a.area_above?0:s).y1(c),a.line_connectNull||(i=i.defined(function(e){return null!==e.value})),function(e){var t,r=a.line_connectNull?n.filterRemoveNull(e.values):e.values,o=0,l=0;return n.isAreaType(e)?(n.isStepType(e)&&(r=n.convertValuesToStep(r)),t=i.interpolate(n.getInterpolate(e))(r)):(r[0]&&(o=n.x(r[0].x),l=n.getYScale(e.id)(r[0].value)),t=a.axis_rotated?"M "+l+" "+o:"M "+o+" "+l),t||"M 0 0"}},C.getAreaBaseValue=function(){return 0},C.generateGetAreaPoints=function(e,t){var n=this,a=n.config,i=e.__max__+1,r=n.getShapeX(0,i,e,!!t),o=n.getShapeY(!!t),l=n.getShapeOffset(n.isAreaType,e,!!t),s=t?n.getSubYScale:n.getYScale;return function(e,t){var i=s.call(n,e.id)(0),c=l(e,t)||i,u=r(e),d=o(e);return a.axis_rotated&&(0<e.value&&d<i||e.value<0&&i<d)&&(d=i),[[u,c],[u,d-(i-c)],[u,d-(i-c)],[u,c]]}},C.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+a.circles).selectAll("."+a.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color),e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},C.redrawCircle=function(e,t,n){var i=this.main.selectAll("."+a.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",t),(n?i.transition(Math.random().toString()):i).attr("cx",e).attr("cy",t)]},C.circleX=function(e){return e.x||0===e.x?this.x(e.x):null},C.updateCircleY=function(){var e,t,n=this;n.config.data_groups.length>0?(e=n.getShapeIndices(n.isLineType),t=n.generateGetLinePoints(e),n.circleY=function(e,n){return t(e,n)[0][1]}):n.circleY=function(e){return n.getYScale(e.id)(e.value)}},C.getCircles=function(e,t){return(t?this.main.selectAll("."+a.circles+this.getTargetSelectorSuffix(t)):this.main).selectAll("."+a.circle+(l(e)?"-"+e:""))},C.expandCircles=function(e,t,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(e,t).classed(a.EXPANDED,!0).attr("r",i)},C.unexpandCircles=function(e){var t=this,n=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(a.EXPANDED)}).classed(a.EXPANDED,!1).attr("r",n)},C.pointR=function(e){var t=this.config;return this.isStepType(e)?0:s(t.point_r)?t.point_r(e):t.point_r},C.pointExpandedR=function(e){var t=this.config;return t.point_focus_expand_enabled?s(t.point_focus_expand_r)?t.point_focus_expand_r(e):t.point_focus_expand_r?t.point_focus_expand_r:1.75*this.pointR(e):this.pointR(e)},C.pointSelectR=function(e){var t=this.config;return s(t.point_select_r)?t.point_select_r(e):t.point_select_r?t.point_select_r:4*this.pointR(e)},C.isWithinCircle=function(e,t){var n=this.d3,a=n.mouse(e),i=n.select(e),r=+i.attr("cx"),o=+i.attr("cy");return Math.sqrt(Math.pow(r-a[0],2)+Math.pow(o-a[1],2))<t},C.isWithinStep=function(e,t){return Math.abs(t-this.d3.mouse(e)[1])<30},C.getCurrentWidth=function(){var e=this.config;return e.size_width?e.size_width:this.getParentWidth()},C.getCurrentHeight=function(){var e=this.config,t=e.size_height?e.size_height:this.getParentHeight();return t>0?t:320/(this.hasType("gauge")&&!e.gauge_fullCircle?2:1)},C.getCurrentPaddingTop=function(){var e=this.config,t=l(e.padding_top)?e.padding_top:0;return this.title&&this.title.node()&&(t+=this.getTitlePadding()),t},C.getCurrentPaddingBottom=function(){var e=this.config;return l(e.padding_bottom)?e.padding_bottom:0},C.getCurrentPaddingLeft=function(e){var t=this.config;return l(t.padding_left)?t.padding_left:t.axis_rotated?!t.axis_x_show||t.axis_x_inner?1:Math.max(h(this.getAxisWidthByAxisId("x",e)),40):!t.axis_y_show||t.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:h(this.getAxisWidthByAxisId("y",e))},C.getCurrentPaddingRight=function(){var e=this,t=e.config,n=e.isLegendRight?e.getLegendWidth()+20:0;return l(t.padding_right)?t.padding_right+1:t.axis_rotated?10+n:!t.axis_y2_show||t.axis_y2_inner?2+n+(e.axis.getY2AxisLabelPosition().isOuter?20:0):h(e.getAxisWidthByAxisId("y2"))+n},C.getParentRectValue=function(e){for(var t,n=this.selectChart.node();n&&"BODY"!==n.tagName;){try{t=n.getBoundingClientRect()[e]}catch(a){"width"===e&&(t=n.offsetWidth)}if(t)break;n=n.parentNode}return t},C.getParentWidth=function(){return this.getParentRectValue("width")},C.getParentHeight=function(){var e=this.selectChart.style("height");return e.indexOf("px")>0?+e.replace("px",""):0},C.getSvgLeft=function(e){var t=this,n=t.config,i=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,r=n.axis_rotated?a.axisX:a.axisY,o=t.main.select("."+r).node(),l=o&&i?o.getBoundingClientRect():{right:0},s=t.selectChart.node().getBoundingClientRect(),c=t.hasArcType(),u=l.right-s.left-(c?0:t.getCurrentPaddingLeft(e));return u>0?u:0},C.getAxisWidthByAxisId=function(e,t){var n=this.axis.getLabelPositionById(e);return this.axis.getMaxTickWidth(e,t)+(n.isInner?20:40)},C.getHorizontalAxisHeight=function(e){var t=this,n=t.config,a=30;return"x"!==e||n.axis_x_show?"x"===e&&n.axis_x_height?n.axis_x_height:"y"!==e||n.axis_y_show?"y2"!==e||n.axis_y2_show?("x"===e&&!n.axis_rotated&&n.axis_x_tick_rotate&&(a=30+t.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),"y"===e&&n.axis_rotated&&n.axis_y_tick_rotate&&(a=30+t.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180)),a+(t.axis.getLabelPositionById(e).isInner?0:10)+("y2"===e?-10:0)):t.rotated_padding_top:!n.legend_show||t.isLegendRight||t.isLegendInset?1:10:8},C.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},C.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+a.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},C.initSubchart=function(){var e=this,t=e.config,n=e.context=e.svg.append("g").attr("transform",e.getTranslate("context")),i=t.subchart_show?"visible":"hidden";n.style("visibility",i),n.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",a.chart),n.select("."+a.chart).append("g").attr("class",a.chartBars),n.select("."+a.chart).append("g").attr("class",a.chartLines),n.append("g").attr("clip-path",e.clipPath).attr("class",a.brush).call(e.brush),e.axes.subx=n.append("g").attr("class",a.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis).style("visibility",t.subchart_axis_x_show?i:"hidden")},C.updateTargetsForSubchart=function(e){var t,n=this,i=n.context,r=n.config,o=n.classChartBar.bind(n),l=n.classBars.bind(n),s=n.classChartLine.bind(n),c=n.classLines.bind(n),u=n.classAreas.bind(n);r.subchart_show&&(i.select("."+a.chartBars).selectAll("."+a.chartBar).data(e).attr("class",o).enter().append("g").style("opacity",0).attr("class",o).append("g").attr("class",l),(t=i.select("."+a.chartLines).selectAll("."+a.chartLine).data(e).attr("class",s).enter().append("g").style("opacity",0).attr("class",s)).append("g").attr("class",c),t.append("g").attr("class",u),i.selectAll("."+a.brush+" rect").attr(r.axis_rotated?"width":"height",r.axis_rotated?n.width2:n.height2))},C.updateBarForSubchart=function(e){var t=this;t.contextBar=t.context.selectAll("."+a.bars).selectAll("."+a.bar).data(t.barData.bind(t)),t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color),t.contextBar.style("opacity",t.initialOpacity.bind(t)),t.contextBar.exit().transition().duration(e).style("opacity",0).remove()},C.redrawBarForSubchart=function(e,t,n){(t?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",e).style("opacity",1)},C.updateLineForSubchart=function(e){var t=this;t.contextLine=t.context.selectAll("."+a.lines).selectAll("."+a.line).data(t.lineData.bind(t)),t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.contextLine.style("opacity",t.initialOpacity.bind(t)),t.contextLine.exit().transition().duration(e).style("opacity",0).remove()},C.redrawLineForSubchart=function(e,t,n){(t?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",e).style("opacity",1)},C.updateAreaForSubchart=function(e){var t=this,n=t.d3;t.contextArea=t.context.selectAll("."+a.areas).selectAll("."+a.area).data(t.lineData.bind(t)),t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0}),t.contextArea.style("opacity",0),t.contextArea.exit().transition().duration(e).style("opacity",0).remove()},C.redrawAreaForSubchart=function(e,t,n){(t?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},C.redrawSubchart=function(e,t,n,a,i,r,o){var l,s,c,u=this,d=u.d3,m=u.config;u.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(d.event&&"zoom"===d.event.type&&u.brush.extent(u.x.orgDomain()).update(),e&&(u.brush.empty()||u.brush.extent(u.x.orgDomain()).update(),l=u.generateDrawArea(i,!0),s=u.generateDrawBar(r,!0),c=u.generateDrawLine(o,!0),u.updateBarForSubchart(n),u.updateLineForSubchart(n),u.updateAreaForSubchart(n),u.redrawBarForSubchart(s,n,n),u.redrawLineForSubchart(c,n,n),u.redrawAreaForSubchart(l,n,n)))},C.redrawForBrush=function(){var e=this,t=e.x;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.config.subchart_onbrush.call(e.api,t.orgDomain())},C.transformContext=function(e,t){var n;t&&t.axisSubX?n=t.axisSubX:(n=this.context.select("."+a.axisX),e&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},C.getDefaultExtent=function(){var e=this,t=e.config,n=s(t.axis_x_extent)?t.axis_x_extent(e.getXDomain(e.data.targets)):t.axis_x_extent;return e.isTimeSeries()&&(n=[e.parseDate(n[0]),e.parseDate(n[1])]),n},C.initText=function(){this.main.select("."+a.chart).append("g").attr("class",a.chartTexts),this.mainText=this.d3.selectAll([])},C.updateTargetsForText=function(e){var t=this,n=t.classChartText.bind(t),i=t.classTexts.bind(t),r=t.classFocus.bind(t);t.main.select("."+a.chartTexts).selectAll("."+a.chartText).data(e).attr("class",function(e){return n(e)+r(e)}).enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none").append("g").attr("class",i)},C.updateText=function(e){var t=this,n=t.config,i=t.barOrLineData.bind(t),r=t.classText.bind(t);t.mainText=t.main.selectAll("."+a.texts).selectAll("."+a.text).data(i),t.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(e){return n.axis_rotated?e.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(e){return t.color(e)}).style("fill-opacity",0),t.mainText.text(function(e,n,a){return t.dataLabelFormat(e.id)(e.value,e.id,n,a)}),t.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()},C.redrawText=function(e,t,n,a){return[(a?this.mainText.transition():this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},C.getTextRect=function(e,t,n){var a,i=this.d3.select("body").append("div").classed("c3",!0),r=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=this.d3.select(n).style("font");return r.selectAll(".dummy").data([e]).enter().append("text").classed(t||"",!0).style("font",o).text(e).each(function(){a=this.getBoundingClientRect()}),i.remove(),a},C.generateXYForText=function(e,t,n,a){var i=this,r=i.generateGetAreaPoints(e,!1),o=i.generateGetBarPoints(t,!1),l=i.generateGetLinePoints(n,!1),s=a?i.getXForText:i.getYForText;return function(e,t){var n=i.isAreaType(e)?r:i.isBarType(e)?o:l;return s.call(i,n(e,t),e,this)}},C.getXForText=function(e,t,n){var a,i,r=this,o=n.getBoundingClientRect();return r.config.axis_rotated?(i=r.isBarType(t)?4:6,a=e[2][1]+i*(t.value<0?-1:1)):a=r.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0],null===t.value&&(a>r.width?a=r.width-o.width:a<0&&(a=4)),a},C.getYForText=function(e,t,n){var a,i=this,r=n.getBoundingClientRect();return i.config.axis_rotated?a=(e[0][0]+e[2][0]+.6*r.height)/2:(a=e[2][1],t.value<0||0===t.value&&!i.hasPositiveValue?(a+=r.height,i.isBarType(t)&&i.isSafari()?a-=3:!i.isBarType(t)&&i.isChrome()&&(a+=3)):a+=i.isBarType(t)?-3:-6),null!==t.value||i.config.axis_rotated||(a<r.height?a=r.height:a>this.height&&(a=this.height-4)),a},C.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},C.redrawTitle=function(){var e=this;e.title.attr("x",e.xForTitle.bind(e)).attr("y",e.yForTitle.bind(e))},C.xForTitle=function(){var e=this,t=e.config,n=t.title_position||"left";return n.indexOf("right")>=0?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-t.title_padding.right:n.indexOf("center")>=0?(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:t.title_padding.left},C.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},C.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},C.initTooltip=function(){var e,t=this,n=t.config;if(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",a.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(t.isTimeSeries()&&u(n.tooltip_init_x)){for(n.tooltip_init_x=t.parseDate(n.tooltip_init_x),e=0;e<t.data.targets[0].values.length&&t.data.targets[0].values[e].x-n.tooltip_init_x!==0;e++);n.tooltip_init_x=e}t.tooltip.html(n.tooltip_contents.call(t,t.data.targets.map(function(e){return t.addName(e.values[n.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType()),t.color)),t.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},C.getTooltipSortFunction=function(){var e=this,t=e.config;if(0!==t.data_groups.length&&void 0===t.tooltip_order){var n=e.orderTargets(e.data.targets).map(function(e){return e.id});return(e.isOrderAsc()||e.isOrderDesc())&&(n=n.reverse()),function(e,t){return n.indexOf(e.id)-n.indexOf(t.id)}}var a=t.tooltip_order;void 0===a&&(a=t.data_order);var i=function(e){return e?e.value:null};if(u(a)&&"asc"===a.toLowerCase())return function(e,t){return i(e)-i(t)};if(u(a)&&"desc"===a.toLowerCase())return function(e,t){return i(t)-i(e)};if(s(a)){var r=a;return void 0===t.tooltip_order&&(r=function(e,t){return a(e?{id:e.id,values:[e]}:null,t?{id:t.id,values:[t]}:null)}),r}return c(a)?function(e,t){return a.indexOf(e.id)-a.indexOf(t.id)}:void 0},C.getTooltipContent=function(e,t,n,a){var i,r,o,l,s,c,u=this,d=u.config,m=d.tooltip_format_title||t,h=d.tooltip_format_name||function(e){return e},p=d.tooltip_format_value||n,f=this.getTooltipSortFunction();for(f&&e.sort(f),r=0;r<e.length;r++)if(e[r]&&(e[r].value||0===e[r].value)&&(i||(o=E(m?m(e[r].x):e[r].x),i="<table class='"+u.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":"")),void 0!==(l=E(p(e[r].value,e[r].ratio,e[r].id,e[r].index,e))))){if(null===e[r].name)continue;s=E(h(e[r].name,e[r].ratio,e[r].id,e[r].index)),c=u.levelColor?u.levelColor(e[r].value):a(e[r].id),i+="<tr class='"+u.CLASS.tooltipName+"-"+u.getTargetSelectorSuffix(e[r].id)+"'>",i+="<td class='name'><span style='background-color:"+c+"'></span>"+s+"</td>",i+="<td class='value'>"+l+"</td>",i+="</tr>"}return i+"</table>"},C.tooltipPosition=function(e,t,n,a){var i,r,o,l,s,c=this,u=c.config,d=c.d3,m=c.hasArcType(),h=d.mouse(a);return m?(r=(c.width-(c.isLegendRight?c.getLegendWidth():0))/2+h[0],l=(c.hasType("gauge")?c.height:c.height/2)+h[1]+20):(i=c.getSvgLeft(!0),u.axis_rotated?(o=(r=i+h[0]+100)+t,s=c.currentWidth-c.getCurrentPaddingRight(),l=c.x(e[0].x)+20):(o=(r=i+c.getCurrentPaddingLeft(!0)+c.x(e[0].x)+20)+t,s=i+c.currentWidth-c.getCurrentPaddingRight(),l=h[1]+15),o>s&&(r-=o-s+20),l+n>c.currentHeight&&(l-=n+30)),l<0&&(l=0),{top:l,left:r}},C.showTooltip=function(e,t){var n,a,i,r=this,o=r.config,s=r.hasArcType(),c=e.filter(function(e){return e&&l(e.value)}),u=o.tooltip_position||C.tooltipPosition;0!==c.length&&o.tooltip_show&&(r.tooltip.html(o.tooltip_contents.call(r,e,r.axis.getXAxisTickFormat(),r.getYFormat(s),r.color)).style("display","block"),n=r.tooltip.property("offsetWidth"),a=r.tooltip.property("offsetHeight"),i=u.call(this,c,n,a,t),r.tooltip.style("top",i.top+"px").style("left",i.left+"px"))},C.hideTooltip=function(){this.tooltip.style("display","none")},C.setTargetType=function(e,t){var n=this,a=n.config;n.mapToTargetIds(e).forEach(function(e){n.withoutFadeIn[e]=t===a.data_types[e],a.data_types[e]=t}),e||(a.data_type=t)},C.hasType=function(e,t){var n=this.config.data_types,a=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){var i=n[t.id];(i&&i.indexOf(e)>=0||!i&&"line"===e)&&(a=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(t){n[t]===e&&(a=!0)}):a=this.config.data_type===e,a},C.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},C.isLineType=function(e){var t=this.config,n=u(e)?e:e.id;return!t.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[n])>=0},C.isStepType=function(e){var t=u(e)?e:e.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0},C.isSplineType=function(e){var t=u(e)?e:e.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0},C.isAreaType=function(e){var t=u(e)?e:e.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0},C.isBarType=function(e){var t=u(e)?e:e.id;return"bar"===this.config.data_types[t]},C.isScatterType=function(e){var t=u(e)?e:e.id;return"scatter"===this.config.data_types[t]},C.isPieType=function(e){var t=u(e)?e:e.id;return"pie"===this.config.data_types[t]},C.isGaugeType=function(e){var t=u(e)?e:e.id;return"gauge"===this.config.data_types[t]},C.isDonutType=function(e){var t=u(e)?e:e.id;return"donut"===this.config.data_types[t]},C.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},C.lineData=function(e){return this.isLineType(e)?[e]:[]},C.arcData=function(e){return this.isArcType(e.data)?[e]:[]},C.barData=function(e){return this.isBarType(e)?e.values:[]},C.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},C.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},C.isInterpolationType=function(e){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(e)>=0},C.isSafari=function(){var e=window.navigator.userAgent;return e.indexOf("Safari")>=0&&e.indexOf("Chrome")<0},C.isChrome=function(){return window.navigator.userAgent.indexOf("Chrome")>=0},C.initZoom=function(){var e,t=this,n=t.d3,a=t.config;t.zoom=n.behavior.zoom().on("zoomstart",function(){e=n.event.sourceEvent,t.zoom.altDomain=n.event.sourceEvent.altKey?t.x.orgDomain():null,a.zoom_onzoomstart.call(t.api,n.event.sourceEvent)}).on("zoom",function(){t.redrawForZoom.call(t)}).on("zoomend",function(){var i=n.event.sourceEvent;i&&e.clientX===i.clientX&&e.clientY===i.clientY||(t.redrawEventRect(),t.updateZoom(),a.zoom_onzoomend.call(t.api,t.x.orgDomain()))}),t.zoom.scale=function(e){return a.axis_rotated?this.y(e):this.x(e)},t.zoom.orgScaleExtent=function(){var e=a.zoom_extent?a.zoom_extent:[1,10];return[e[0],Math.max(t.getMaxDataCount()/e[1],e[1])]},t.zoom.updateScaleExtent=function(){var e=f(t.x.orgDomain())/f(t.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*e,n[1]*e]),this}},C.getZoomDomain=function(){var e=this.config,t=this.d3;return[t.min([this.orgXDomain[0],e.zoom_x_min]),t.max([this.orgXDomain[1],e.zoom_x_max])]},C.updateZoom=function(){var e=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+a.zoomRect).call(e).on("dblclick.zoom",null),this.main.selectAll("."+a.eventRect).call(e).on("dblclick.zoom",null)},C.redrawForZoom=function(){var e=this,t=e.d3,n=e.config,a=e.zoom,i=e.x;if(n.zoom_enabled&&0!==e.filterTargetsToShow(e.data.targets).length){if("mousemove"===t.event.sourceEvent.type&&a.altDomain)return i.domain(a.altDomain),void a.scale(i).updateScaleExtent();e.isCategorized()&&i.orgDomain()[0]===e.orgXDomain[0]&&i.domain([e.orgXDomain[0]-1e-10,i.orgDomain()[1]]),e.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===t.event.sourceEvent.type&&(e.cancelClick=!0),n.zoom_onzoom.call(e.api,i.orgDomain())}},_})},1489:function(e,t,n){var a,i;!function(){var r={version:"3.5.17"},o=[].slice,l=function(e){return o.call(e)},s=this.document;function c(e){return e&&(e.ownerDocument||e.document||e).documentElement}function u(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(s)try{l(s.documentElement.childNodes)[0].nodeType}catch(e){l=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),s)try{s.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var d=this.Element.prototype,m=d.setAttribute,h=d.setAttributeNS,p=this.CSSStyleDeclaration.prototype,f=p.setProperty;d.setAttribute=function(e,t){m.call(this,e,t+"")},d.setAttributeNS=function(e,t,n){h.call(this,e,t,n+"")},p.setProperty=function(e,t,n){f.call(this,e,t+"",n)}}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function v(e){return null===e?NaN:+e}function b(e){return!isNaN(e)}function y(e){return{left:function(t,n,a,i){for(arguments.length<3&&(a=0),arguments.length<4&&(i=t.length);a<i;){var r=a+i>>>1;e(t[r],n)<0?a=r+1:i=r}return a},right:function(t,n,a,i){for(arguments.length<3&&(a=0),arguments.length<4&&(i=t.length);a<i;){var r=a+i>>>1;e(t[r],n)>0?i=r:a=r+1}return a}}}r.ascending=g,r.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},r.min=function(e,t){var n,a,i=-1,r=e.length;if(1===arguments.length){for(;++i<r;)if(null!=(a=e[i])&&a>=a){n=a;break}for(;++i<r;)null!=(a=e[i])&&n>a&&(n=a)}else{for(;++i<r;)if(null!=(a=t.call(e,e[i],i))&&a>=a){n=a;break}for(;++i<r;)null!=(a=t.call(e,e[i],i))&&n>a&&(n=a)}return n},r.max=function(e,t){var n,a,i=-1,r=e.length;if(1===arguments.length){for(;++i<r;)if(null!=(a=e[i])&&a>=a){n=a;break}for(;++i<r;)null!=(a=e[i])&&a>n&&(n=a)}else{for(;++i<r;)if(null!=(a=t.call(e,e[i],i))&&a>=a){n=a;break}for(;++i<r;)null!=(a=t.call(e,e[i],i))&&a>n&&(n=a)}return n},r.extent=function(e,t){var n,a,i,r=-1,o=e.length;if(1===arguments.length){for(;++r<o;)if(null!=(a=e[r])&&a>=a){n=i=a;break}for(;++r<o;)null!=(a=e[r])&&(n>a&&(n=a),i<a&&(i=a))}else{for(;++r<o;)if(null!=(a=t.call(e,e[r],r))&&a>=a){n=i=a;break}for(;++r<o;)null!=(a=t.call(e,e[r],r))&&(n>a&&(n=a),i<a&&(i=a))}return[n,i]},r.sum=function(e,t){var n,a=0,i=e.length,r=-1;if(1===arguments.length)for(;++r<i;)b(n=+e[r])&&(a+=n);else for(;++r<i;)b(n=+t.call(e,e[r],r))&&(a+=n);return a},r.mean=function(e,t){var n,a=0,i=e.length,r=-1,o=i;if(1===arguments.length)for(;++r<i;)b(n=v(e[r]))?a+=n:--o;else for(;++r<i;)b(n=v(t.call(e,e[r],r)))?a+=n:--o;if(o)return a/o},r.quantile=function(e,t){var n=(e.length-1)*t+1,a=Math.floor(n),i=+e[a-1],r=n-a;return r?i+r*(e[a]-i):i},r.median=function(e,t){var n,a=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)b(n=v(e[o]))&&a.push(n);else for(;++o<i;)b(n=v(t.call(e,e[o],o)))&&a.push(n);if(a.length)return r.quantile(a.sort(g),.5)},r.variance=function(e,t){var n,a,i=e.length,r=0,o=0,l=-1,s=0;if(1===arguments.length)for(;++l<i;)b(n=v(e[l]))&&(o+=(a=n-r)*(n-(r+=a/++s)));else for(;++l<i;)b(n=v(t.call(e,e[l],l)))&&(o+=(a=n-r)*(n-(r+=a/++s)));if(s>1)return o/(s-1)},r.deviation=function(){var e=r.variance.apply(this,arguments);return e?Math.sqrt(e):e};var E=y(g);function x(e){return e.length}r.bisectLeft=E.left,r.bisect=r.bisectRight=E.right,r.bisector=function(e){return y(1===e.length?function(t,n){return g(e(t),n)}:e)},r.shuffle=function(e,t,n){(r=arguments.length)<3&&(n=e.length,r<2&&(t=0));for(var a,i,r=n-t;r;)i=Math.random()*r--|0,a=e[r+t],e[r+t]=e[i+t],e[i+t]=a;return e},r.permute=function(e,t){for(var n=t.length,a=new Array(n);n--;)a[n]=e[t[n]];return a},r.pairs=function(e){for(var t=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[a,a=e[++t]];return i},r.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=r.min(e,x),a=new Array(n);++t<n;)for(var i,o=-1,l=a[t]=new Array(i);++o<i;)l[o]=e[o][t];return a},r.zip=function(){return r.transpose(arguments)},r.keys=function(e){var t=[];for(var n in e)t.push(n);return t},r.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},r.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},r.merge=function(e){for(var t,n,a,i=e.length,r=-1,o=0;++r<i;)o+=e[r].length;for(n=new Array(o);--i>=0;)for(t=(a=e[i]).length;--t>=0;)n[--o]=a[t];return n};var S=Math.abs;function w(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function N(){this._=Object.create(null)}r.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var a,i=[],r=function(e){var t=1;for(;e*t%1;)t*=10;return t}(S(n)),o=-1;if(e*=r,t*=r,(n*=r)<0)for(;(a=e+n*++o)>t;)i.push(a/r);else for(;(a=e+n*++o)<t;)i.push(a/r);return i},r.map=function(e,t){var n=new N;if(e instanceof N)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var a,i=-1,r=e.length;if(1===arguments.length)for(;++i<r;)n.set(i,e[i]);else for(;++i<r;)n.set(t.call(e,a=e[i],i),a)}else for(var o in e)n.set(o,e[o]);return n};var C="__proto__",_="\0";function T(e){return(e+="")===C||e[0]===_?_+e:e}function O(e){return(e+="")[0]===_?e.slice(1):e}function D(e){return T(e)in this._}function A(e){return(e=T(e))in this._&&delete this._[e]}function L(){var e=[];for(var t in this._)e.push(O(t));return e}function I(){var e=0;for(var t in this._)++e;return e}function P(){for(var e in this._)return!1;return!0}function k(){this._=Object.create(null)}function j(e){return e}function M(e,t,n){return function(){var a=n.apply(t,arguments);return a===t?e:a}}function R(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,a=F.length;n<a;++n){var i=F[n]+t;if(i in e)return i}}w(N,{has:D,get:function(e){return this._[T(e)]},set:function(e,t){return this._[T(e)]=t},remove:A,keys:L,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:O(t),value:this._[t]});return e},size:I,empty:P,forEach:function(e){for(var t in this._)e.call(this,O(t),this._[t])}}),r.nest=function(){var e,t,n={},a=[],i=[];function o(i,r,l){if(l>=a.length)return t?t.call(n,r):e?r.sort(e):r;for(var s,c,u,d,m=-1,h=r.length,p=a[l++],f=new N;++m<h;)(d=f.get(s=p(c=r[m])))?d.push(c):f.set(s,[c]);return i?(c=i(),u=function(e,t){c.set(e,o(i,t,l))}):(c={},u=function(e,t){c[e]=o(i,t,l)}),f.forEach(u),c}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return function e(t,n){if(n>=a.length)return t;var r=[],o=i[n++];return t.forEach(function(t,a){r.push({key:t,values:e(a,n)})}),o?r.sort(function(e,t){return o(e.key,t.key)}):r}(o(r.map,e,0),0)},n.key=function(e){return a.push(e),n},n.sortKeys=function(e){return i[a.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},r.set=function(e){var t=new k;if(e)for(var n=0,a=e.length;n<a;++n)t.add(e[n]);return t},w(k,{has:D,add:function(e){return this._[T(e+="")]=!0,e},remove:A,values:L,size:I,empty:P,forEach:function(e){for(var t in this._)e.call(this,O(t))}}),r.behavior={},r.rebind=function(e,t){for(var n,a=1,i=arguments.length;++a<i;)e[n=arguments[a]]=M(e,t,t[n]);return e};var F=["webkit","ms","moz","Moz","o","O"];function B(){}function V(){}function G(e){var t=[],n=new N;function a(){for(var n,a=t,i=-1,r=a.length;++i<r;)(n=a[i].on)&&n.apply(this,arguments);return e}return a.on=function(a,i){var r,o=n.get(a);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,r=t.indexOf(o)).concat(t.slice(r+1)),n.remove(a)),i&&t.push(n.set(a,{on:i})),e)},a}function H(){r.event.preventDefault()}function z(){for(var e,t=r.event;e=t.sourceEvent;)t=e;return t}function q(e){for(var t=new V,n=0,a=arguments.length;++n<a;)t[arguments[n]]=G(t);return t.of=function(n,a){return function(i){try{var o=i.sourceEvent=r.event;i.target=e,r.event=i,t[i.type].apply(n,a)}finally{r.event=o}}},t}r.dispatch=function(){for(var e=new V,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=G(e);return e},V.prototype.on=function(e,t){var n=e.indexOf("."),a="";if(n>=0&&(a=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(a):this[e].on(a,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(a,null);return this}},r.event=null,r.requote=function(e){return e.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,U={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function X(e){return U(e,Z),e}var Y=function(e,t){return t.querySelector(e)},Q=function(e,t){return t.querySelectorAll(e)},J=function(e,t){var n=e.matches||e[R(e,"matchesSelector")];return(J=function(e,t){return n.call(e,t)})(e,t)};"function"===typeof Sizzle&&(Y=function(e,t){return Sizzle(e,t)[0]||null},Q=Sizzle,J=Sizzle.matchesSelector),r.selection=function(){return r.select(s.documentElement)};var Z=r.selection.prototype=[];function K(e){return"function"===typeof e?e:function(){return Y(e,this)}}function $(e){return"function"===typeof e?e:function(){return Q(e,this)}}Z.select=function(e){var t,n,a,i,r=[];e=K(e);for(var o=-1,l=this.length;++o<l;){r.push(t=[]),t.parentNode=(a=this[o]).parentNode;for(var s=-1,c=a.length;++s<c;)(i=a[s])?(t.push(n=e.call(i,i.__data__,s,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return X(r)},Z.selectAll=function(e){var t,n,a=[];e=$(e);for(var i=-1,r=this.length;++i<r;)for(var o=this[i],s=-1,c=o.length;++s<c;)(n=o[s])&&(a.push(t=l(e.call(n,n.__data__,s,i))),t.parentNode=n);return X(a)};var ee="http://www.w3.org/1999/xhtml",te={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ne(e,t){return e=r.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"===typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function ae(e){return e.trim().replace(/\s+/g," ")}function ie(e){return new RegExp("(?:^|\\s+)"+r.requote(e)+"(?:\\s+|$)","g")}function re(e){return(e+"").trim().split(/^|\s+/)}function oe(e,t){var n=(e=re(e).map(le)).length;return"function"===typeof t?function(){for(var a=-1,i=t.apply(this,arguments);++a<n;)e[a](this,i)}:function(){for(var a=-1;++a<n;)e[a](this,t)}}function le(e){var t=ie(e);return function(n,a){if(i=n.classList)return a?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";a?(t.lastIndex=0,t.test(i)||n.setAttribute("class",ae(i+" "+e))):n.setAttribute("class",ae(i.replace(t," ")))}}function se(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"===typeof t?function(){var a=t.apply(this,arguments);null==a?this.style.removeProperty(e):this.style.setProperty(e,a,n)}:function(){this.style.setProperty(e,t,n)}}function ce(e,t){return null==t?function(){delete this[e]}:"function"===typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ue(e){return"function"===typeof e?e:(e=r.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ee&&t.documentElement.namespaceURI===ee?t.createElement(e):t.createElementNS(n,e)}}function de(){var e=this.parentNode;e&&e.removeChild(this)}function me(e){return{__data__:e}}function he(e){return function(){return J(this,e)}}function pe(e,t){for(var n=0,a=e.length;n<a;n++)for(var i,r=e[n],o=0,l=r.length;o<l;o++)(i=r[o])&&t(i,o,n);return e}function fe(e){return U(e,ge),e}r.ns={prefix:te,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),te.hasOwnProperty(n)?{space:te[n],local:e}:e}},Z.attr=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node();return(e=r.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},Z.classed=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node(),a=(e=re(e)).length,i=-1;if(t=n.classList){for(;++i<a;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<a;)if(!ie(e[i]).test(t))return!1;return!0}for(t in e)this.each(oe(t,e[t]));return this}return this.each(oe(e,t))},Z.style=function(e,t,n){var a=arguments.length;if(a<3){if("string"!==typeof e){for(n in a<2&&(t=""),e)this.each(se(n,e[n],t));return this}if(a<2){var i=this.node();return u(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(se(e,t,n))},Z.property=function(e,t){if(arguments.length<2){if("string"===typeof e)return this.node()[e];for(t in e)this.each(ce(t,e[t]));return this}return this.each(ce(e,t))},Z.text=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Z.html=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Z.append=function(e){return e=ue(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Z.insert=function(e,t){return e=ue(e),t=K(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Z.remove=function(){return this.each(de)},Z.data=function(e,t){var n,a,i=-1,r=this.length;if(!arguments.length){for(e=new Array(r=(n=this[0]).length);++i<r;)(a=n[i])&&(e[i]=a.__data__);return e}function o(e,n){var a,i,r,o=e.length,u=n.length,d=Math.min(o,u),m=new Array(u),h=new Array(u),p=new Array(o);if(t){var f,g=new N,v=new Array(o);for(a=-1;++a<o;)(i=e[a])&&(g.has(f=t.call(i,i.__data__,a))?p[a]=i:g.set(f,i),v[a]=f);for(a=-1;++a<u;)(i=g.get(f=t.call(n,r=n[a],a)))?!0!==i&&(m[a]=i,i.__data__=r):h[a]=me(r),g.set(f,!0);for(a=-1;++a<o;)a in v&&!0!==g.get(v[a])&&(p[a]=e[a])}else{for(a=-1;++a<d;)i=e[a],r=n[a],i?(i.__data__=r,m[a]=i):h[a]=me(r);for(;a<u;++a)h[a]=me(n[a]);for(;a<o;++a)p[a]=e[a]}h.update=m,h.parentNode=m.parentNode=p.parentNode=e.parentNode,l.push(h),s.push(m),c.push(p)}var l=fe([]),s=X([]),c=X([]);if("function"===typeof e)for(;++i<r;)o(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<r;)o(n=this[i],e);return s.enter=function(){return l},s.exit=function(){return c},s},Z.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Z.filter=function(e){var t,n,a,i=[];"function"!==typeof e&&(e=he(e));for(var r=0,o=this.length;r<o;r++){i.push(t=[]),t.parentNode=(n=this[r]).parentNode;for(var l=0,s=n.length;l<s;l++)(a=n[l])&&e.call(a,a.__data__,l,r)&&t.push(a)}return X(i)},Z.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,a=this[e],i=a.length-1,r=a[i];--i>=0;)(n=a[i])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n);return this},Z.sort=function(e){e=function(e){arguments.length||(e=g);return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Z.each=function(e){return pe(this,function(t,n,a){e.call(t,t.__data__,n,a)})},Z.call=function(e){var t=l(arguments);return e.apply(t[0]=this,t),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],a=0,i=n.length;a<i;a++){var r=n[a];if(r)return r}return null},Z.size=function(){var e=0;return pe(this,function(){++e}),e};var ge=[];function ve(e,t,n){var a="__on"+e,i=e.indexOf("."),o=ye;i>0&&(e=e.slice(0,i));var s=be.get(e);function c(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}return s&&(e=s,o=Ee),i?t?function(){var i=o(t,l(arguments));c.call(this),this.addEventListener(e,this[a]=i,i.$=n),i._=t}:c:t?B:function(){var t,n=new RegExp("^__on([^.]+)"+r.requote(e)+"$");for(var a in this)if(t=a.match(n)){var i=this[a];this.removeEventListener(t[1],i,i.$),delete this[a]}}}r.selection.enter=fe,r.selection.enter.prototype=ge,ge.append=Z.append,ge.empty=Z.empty,ge.node=Z.node,ge.call=Z.call,ge.size=Z.size,ge.select=function(e){for(var t,n,a,i,r,o=[],l=-1,s=this.length;++l<s;){a=(i=this[l]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,u=i.length;++c<u;)(r=i[c])?(t.push(a[c]=n=e.call(i.parentNode,r.__data__,c,l)),n.__data__=r.__data__):t.push(null)}return X(o)},ge.insert=function(e,t){return arguments.length<2&&(t=function(e){var t,n;return function(a,i,r){var o,l=e[r].update,s=l.length;for(r!=n&&(n=r,t=0),i>=t&&(t=i+1);!(o=l[t])&&++t<s;);return o}}(this)),Z.insert.call(this,e,t)},r.select=function(e){var t;return"string"===typeof e?(t=[Y(e,s)]).parentNode=s.documentElement:(t=[e]).parentNode=c(e),X([t])},r.selectAll=function(e){var t;return"string"===typeof e?(t=l(Q(e,s))).parentNode=s.documentElement:(t=l(e)).parentNode=null,X([t])},Z.on=function(e,t,n){var a=arguments.length;if(a<3){if("string"!==typeof e){for(n in a<2&&(t=!1),e)this.each(ve(n,e[n],t));return this}if(a<2)return(a=this.node()["__on"+e])&&a._;n=!1}return this.each(ve(e,t,n))};var be=r.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ye(e,t){return function(n){var a=r.event;r.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{r.event=a}}}function Ee(e,t){var n=ye(e,t);return function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||n.call(this,e)}}s&&be.forEach(function(e){"on"+e in s&&be.remove(e)});var xe,Se=0;function we(e){var t=".dragsuppress-"+ ++Se,n="click"+t,a=r.select(u(e)).on("touchmove"+t,H).on("dragstart"+t,H).on("selectstart"+t,H);if(null==xe&&(xe=!("onselectstart"in e)&&R(e.style,"userSelect")),xe){var i=c(e).style,o=i[xe];i[xe]="none"}return function(e){if(a.on(t,null),xe&&(i[xe]=o),e){var r=function(){a.on(n,null)};a.on(n,function(){H(),r()},!0),setTimeout(r,0)}}}r.mouse=function(e){return Ce(e,z())};var Ne=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ce(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();if(Ne<0){var i=u(e);if(i.scrollX||i.scrollY){var o=(n=r.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ne=!(o.f||o.e),n.remove()}}return Ne?(a.x=t.pageX,a.y=t.pageY):(a.x=t.clientX,a.y=t.clientY),[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y]}var l=e.getBoundingClientRect();return[t.clientX-l.left-e.clientLeft,t.clientY-l.top-e.clientTop]}function _e(){return r.event.changedTouches[0].identifier}r.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=z().changedTouches),t)for(var a,i=0,r=t.length;i<r;++i)if((a=t[i]).identifier===n)return Ce(e,a)},r.behavior.drag=function(){var e=q(i,"drag","dragstart","dragend"),t=null,n=o(B,r.mouse,u,"mousemove","mouseup"),a=o(_e,r.touch,j,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",a)}function o(n,a,i,o,l){return function(){var s,c=r.event.target.correspondingElement||r.event.target,u=this.parentNode,d=e.of(this,arguments),m=0,h=n(),p=".drag"+(null==h?"":"-"+h),f=r.select(i(c)).on(o+p,function(){var e,t,n=a(u,h);if(!n)return;e=n[0]-v[0],t=n[1]-v[1],m|=e|t,v=n,d({type:"drag",x:n[0]+s[0],y:n[1]+s[1],dx:e,dy:t})}).on(l+p,function(){if(!a(u,h))return;f.on(o+p,null).on(l+p,null),g(m),d({type:"dragend"})}),g=we(c),v=a(u,h);s=t?[(s=t.apply(this,arguments)).x-v[0],s.y-v[1]]:[0,0],d({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},r.rebind(i,e,"on")},r.touches=function(e,t){return arguments.length<2&&(t=z().touches),t?l(t).map(function(t){var n=Ce(e,t);return n.identifier=t.identifier,n}):[]};var Te=1e-6,Oe=Te*Te,De=Math.PI,Ae=2*De,Le=Ae-Te,Ie=De/2,Pe=De/180,ke=180/De;function je(e){return e>0?1:e<0?-1:0}function Me(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Re(e){return e>1?0:e<-1?De:Math.acos(e)}function Fe(e){return e>1?Ie:e<-1?-Ie:Math.asin(e)}function Be(e){return((e=Math.exp(e))+1/e)/2}function Ve(e){return(e=Math.sin(e/2))*e}var Ge=Math.SQRT2;r.interpolateZoom=function(e,t){var n,a,i=e[0],r=e[1],o=e[2],l=t[0],s=t[1],c=t[2],u=l-i,d=s-r,m=u*u+d*d;if(m<Oe)a=Math.log(c/o)/Ge,n=function(e){return[i+e*u,r+e*d,o*Math.exp(Ge*e*a)]};else{var h=Math.sqrt(m),p=(c*c-o*o+4*m)/(2*o*2*h),f=(c*c-o*o-4*m)/(2*c*2*h),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(f*f+1)-f);a=(v-g)/Ge,n=function(e){var t=e*a,n=Be(g),l=o/(2*h)*(n*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(Ge*t+g)-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+l*u,r+l*d,o*n/Be(Ge*t+g)]}}return n.duration=1e3*a,n},r.behavior.zoom=function(){var e,t,n,a,i,o,l,c,d,m={x:0,y:0,k:1},h=[960,500],p=qe,f=250,g=0,v="mousedown.zoom",b="mousemove.zoom",y="mouseup.zoom",E="touchstart.zoom",x=q(S,"zoomstart","zoom","zoomend");function S(e){e.on(v,L).on(ze+".zoom",P).on("dblclick.zoom",k).on(E,I)}function w(e){return[(e[0]-m.x)/m.k,(e[1]-m.y)/m.k]}function N(e){m.k=Math.max(p[0],Math.min(p[1],e))}function C(e,t){t=function(e){return[e[0]*m.k+m.x,e[1]*m.k+m.y]}(t),m.x+=e[0]-t[0],m.y+=e[1]-t[1]}function _(e,n,a,i){e.__chart__={x:m.x,y:m.y,k:m.k},N(Math.pow(2,i)),C(t=n,a),e=r.select(e),f>0&&(e=e.transition().duration(f)),e.call(S.event)}function T(){l&&l.domain(o.range().map(function(e){return(e-m.x)/m.k}).map(o.invert)),d&&d.domain(c.range().map(function(e){return(e-m.y)/m.k}).map(c.invert))}function O(e){g++||e({type:"zoomstart"})}function D(e){T(),e({type:"zoom",scale:m.k,translate:[m.x,m.y]})}function A(e){--g||(e({type:"zoomend"}),t=null)}function L(){var e=this,t=x.of(e,arguments),n=0,a=r.select(u(e)).on(b,function(){n=1,C(r.mouse(e),i),D(t)}).on(y,function(){a.on(b,null).on(y,null),o(n),A(t)}),i=w(r.mouse(e)),o=we(e);hl.call(e),O(t)}function I(){var e,t=this,n=x.of(t,arguments),a={},o=0,l=".zoom-"+r.event.changedTouches[0].identifier,s="touchmove"+l,c="touchend"+l,u=[],d=r.select(t),h=we(t);function p(){var n=r.touches(t);return e=m.k,n.forEach(function(e){e.identifier in a&&(a[e.identifier]=w(e))}),n}function f(){var e=r.event.target;r.select(e).on(s,g).on(c,b),u.push(e);for(var n=r.event.changedTouches,l=0,d=n.length;l<d;++l)a[n[l].identifier]=null;var h=p(),f=Date.now();if(1===h.length){if(f-i<500){var v=h[0];_(t,v,a[v.identifier],Math.floor(Math.log(m.k)/Math.LN2)+1),H()}i=f}else if(h.length>1){v=h[0];var y=h[1],E=v[0]-y[0],x=v[1]-y[1];o=E*E+x*x}}function g(){var l,s,c,u,d=r.touches(t);hl.call(t);for(var m=0,h=d.length;m<h;++m,u=null)if(c=d[m],u=a[c.identifier]){if(s)break;l=c,s=u}if(u){var p=(p=c[0]-l[0])*p+(p=c[1]-l[1])*p,f=o&&Math.sqrt(p/o);l=[(l[0]+c[0])/2,(l[1]+c[1])/2],s=[(s[0]+u[0])/2,(s[1]+u[1])/2],N(f*e)}i=null,C(l,s),D(n)}function b(){if(r.event.touches.length){for(var e=r.event.changedTouches,t=0,i=e.length;t<i;++t)delete a[e[t].identifier];for(var o in a)return void p()}r.selectAll(u).on(l,null),d.on(v,L).on(E,I),h(),A(n)}f(),O(n),d.on(v,null).on(E,f)}function P(){var i=x.of(this,arguments);a?clearTimeout(a):(hl.call(this),e=w(t=n||r.mouse(this)),O(i)),a=setTimeout(function(){a=null,A(i)},50),H(),N(Math.pow(2,.002*He())*m.k),C(t,e),D(i)}function k(){var e=r.mouse(this),t=Math.log(m.k)/Math.LN2;_(this,e,w(e),r.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return ze||(ze="onwheel"in s?(He=function(){return-r.event.deltaY*(r.event.deltaMode?120:1)},"wheel"):"onmousewheel"in s?(He=function(){return r.event.wheelDelta},"mousewheel"):(He=function(){return-r.event.detail},"MozMousePixelScroll")),S.event=function(e){e.each(function(){var e=x.of(this,arguments),n=m;gl?r.select(this).transition().each("start.zoom",function(){m=this.__chart__||{x:0,y:0,k:1},O(e)}).tween("zoom:zoom",function(){var a=h[0],i=h[1],o=t?t[0]:a/2,l=t?t[1]:i/2,s=r.interpolateZoom([(o-m.x)/m.k,(l-m.y)/m.k,a/m.k],[(o-n.x)/n.k,(l-n.y)/n.k,a/n.k]);return function(t){var n=s(t),i=a/n[2];this.__chart__=m={x:o-n[0]*i,y:l-n[1]*i,k:i},D(e)}}).each("interrupt.zoom",function(){A(e)}).each("end.zoom",function(){A(e)}):(this.__chart__=m,O(e),D(e),A(e))})},S.translate=function(e){return arguments.length?(m={x:+e[0],y:+e[1],k:m.k},T(),S):[m.x,m.y]},S.scale=function(e){return arguments.length?(m={x:m.x,y:m.y,k:null},N(+e),T(),S):m.k},S.scaleExtent=function(e){return arguments.length?(p=null==e?qe:[+e[0],+e[1]],S):p},S.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],S):n},S.size=function(e){return arguments.length?(h=e&&[+e[0],+e[1]],S):h},S.duration=function(e){return arguments.length?(f=+e,S):f},S.x=function(e){return arguments.length?(l=e,o=e.copy(),m={x:0,y:0,k:1},S):l},S.y=function(e){return arguments.length?(d=e,c=e.copy(),m={x:0,y:0,k:1},S):d},r.rebind(S,x,"on")};var He,ze,qe=[0,1/0];function We(){}function Ue(e,t,n){return this instanceof Ue?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Ue?new Ue(e.h,e.s,e.l):pt(""+e,ft,Ue):new Ue(e,t,n)}r.color=We,We.prototype.toString=function(){return this.rgb()+""},r.hsl=Ue;var Xe=Ue.prototype=new We;function Ye(e,t,n){var a,i;function r(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?a+(i-a)*e/60:e<180?i:e<240?a+(i-a)*(240-e)/60:a}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,a=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new ct(r(e+120),r(e),r(e-120))}function Qe(e,t,n){return this instanceof Qe?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Qe?new Qe(e.h,e.c,e.l):rt(e instanceof Ke?e.l:(e=gt((e=r.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Qe(e,t,n)}Xe.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ue(this.h,this.s,this.l/e)},Xe.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Ue(this.h,this.s,e*this.l)},Xe.rgb=function(){return Ye(this.h,this.s,this.l)},r.hcl=Qe;var Je=Qe.prototype=new We;function Ze(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Ke(n,Math.cos(e*=Pe)*t,Math.sin(e)*t)}function Ke(e,t,n){return this instanceof Ke?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Ke?new Ke(e.l,e.a,e.b):e instanceof Qe?Ze(e.h,e.c,e.l):gt((e=ct(e)).r,e.g,e.b):new Ke(e,t,n)}Je.brighter=function(e){return new Qe(this.h,this.c,Math.min(100,this.l+$e*(arguments.length?e:1)))},Je.darker=function(e){return new Qe(this.h,this.c,Math.max(0,this.l-$e*(arguments.length?e:1)))},Je.rgb=function(){return Ze(this.h,this.c,this.l).rgb()},r.lab=Ke;var $e=18,et=.95047,tt=1,nt=1.08883,at=Ke.prototype=new We;function it(e,t,n){var a=(e+16)/116,i=a+t/500,r=a-n/200;return new ct(st(3.2404542*(i=ot(i)*et)-1.5371385*(a=ot(a)*tt)-.4985314*(r=ot(r)*nt)),st(-.969266*i+1.8760108*a+.041556*r),st(.0556434*i-.2040259*a+1.0572252*r))}function rt(e,t,n){return e>0?new Qe(Math.atan2(n,t)*ke,Math.sqrt(t*t+n*n),e):new Qe(NaN,NaN,e)}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function lt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function st(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ct(e,t,n){return this instanceof ct?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ct?new ct(e.r,e.g,e.b):pt(""+e,ct,Ye):new ct(e,t,n)}function ut(e){return new ct(e>>16,e>>8&255,255&e)}function dt(e){return ut(e)+""}at.brighter=function(e){return new Ke(Math.min(100,this.l+$e*(arguments.length?e:1)),this.a,this.b)},at.darker=function(e){return new Ke(Math.max(0,this.l-$e*(arguments.length?e:1)),this.a,this.b)},at.rgb=function(){return it(this.l,this.a,this.b)},r.rgb=ct;var mt=ct.prototype=new We;function ht(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function pt(e,t,n){var a,i,r,o=0,l=0,s=0;if(a=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=a[2].split(","),a[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(bt(i[0]),bt(i[1]),bt(i[2]))}return(r=yt.get(e))?t(r.r,r.g,r.b):(null==e||"#"!==e.charAt(0)||isNaN(r=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&r)>>4,o|=o>>4,l=240&r,l|=l>>4,s=15&r,s|=s<<4):7===e.length&&(o=(16711680&r)>>16,l=(65280&r)>>8,s=255&r)),t(o,l,s))}function ft(e,t,n){var a,i,r=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),l=o-r,s=(o+r)/2;return l?(i=s<.5?l/(o+r):l/(2-o-r),a=e==o?(t-n)/l+(t<n?6:0):t==o?(n-e)/l+2:(e-t)/l+4,a*=60):(a=NaN,i=s>0&&s<1?0:a),new Ue(a,i,s)}function gt(e,t,n){var a=lt((.4124564*(e=vt(e))+.3575761*(t=vt(t))+.1804375*(n=vt(n)))/et),i=lt((.2126729*e+.7151522*t+.072175*n)/tt);return Ke(116*i-16,500*(a-i),200*(i-lt((.0193339*e+.119192*t+.9503041*n)/nt)))}function vt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}mt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,a=this.b,i=30;return t||n||a?(t&&t<i&&(t=i),n&&n<i&&(n=i),a&&a<i&&(a=i),new ct(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,a/e))):new ct(i,i,i)},mt.darker=function(e){return new ct((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},mt.hsl=function(){return ft(this.r,this.g,this.b)},mt.toString=function(){return"#"+ht(this.r)+ht(this.g)+ht(this.b)};var yt=r.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Et(e){return"function"===typeof e?e:function(){return e}}function xt(e){return function(t,n,a){return 2===arguments.length&&"function"===typeof n&&(a=n,n=null),St(t,n,e,a)}}function St(e,t,n,a){var i={},o=r.dispatch("beforesend","progress","load","error"),s={},c=new XMLHttpRequest,u=null;function d(){var e,t=c.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(c)||t>=200&&t<300||304===t){try{e=n.call(i,c)}catch(e){return void o.error.call(i,e)}o.load.call(i,e)}else o.error.call(i,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(e)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=d:c.onreadystatechange=function(){c.readyState>3&&d()},c.onprogress=function(e){var t=r.event;r.event=e;try{o.progress.call(i,c)}finally{r.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(u=e,i):u},i.response=function(e){return n=e,i},["get","post"].forEach(function(e){i[e]=function(){return i.send.apply(i,[e].concat(l(arguments)))}}),i.send=function(n,a,r){if(2===arguments.length&&"function"===typeof a&&(r=a,a=null),c.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),c.setRequestHeader)for(var l in s)c.setRequestHeader(l,s[l]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=u&&(c.responseType=u),null!=r&&i.on("error",r).on("load",function(e){r(null,e)}),o.beforesend.call(i,c),c.send(null==a?null:a),i},i.abort=function(){return c.abort(),i},r.rebind(i,o,"on"),null==a?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(a))}yt.forEach(function(e,t){yt.set(e,ut(t))}),r.functor=Et,r.xhr=xt(j),r.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);function i(e,n,a){arguments.length<3&&(a=n,n=null);var i=St(e,t,null==n?r:o(n),a);return i.row=function(e){return arguments.length?i.response(null==(n=e)?r:o(e)):n},i}function r(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function l(t){return t.map(s).join(e)}function s(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,function(e,a){if(n)return n(e,a-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})},i.parseRows=function(e,t){var n,i,r={},o={},l=[],s=e.length,c=0,u=0;function d(){if(c>=s)return o;if(i)return i=!1,r;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<s;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(l=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===l&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<s;){var l,u=1;if(10===(l=e.charCodeAt(c++)))i=!0;else if(13===l)i=!0,10===e.charCodeAt(c)&&(++c,++u);else if(l!==a)continue;return e.slice(t,c-u)}return e.slice(t)}for(;(n=d())!==o;){for(var m=[];n!==r&&n!==o;)m.push(n),n=d();t&&null==(m=t(m,u++))||l.push(m)}return l},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new k,a=[];return t.forEach(function(e){for(var t in e)n.has(t)||a.push(n.add(t))}),[a.map(s).join(e)].concat(t.map(function(t){return a.map(function(e){return s(t[e])}).join(e)})).join("\n")},i.formatRows=function(e){return e.map(l).join("\n")},i},r.csv=r.dsv(",","text/csv"),r.tsv=r.dsv("\t","text/tab-separated-values");var wt,Nt,Ct,_t,Tt=this[R(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Ot(e,t,n){var a=arguments.length;a<2&&(t=0),a<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return Nt?Nt.n=i:wt=i,Nt=i,Ct||(_t=clearTimeout(_t),Ct=1,Tt(Dt)),i}function Dt(){var e=At(),t=Lt()-e;t>24?(isFinite(t)&&(clearTimeout(_t),_t=setTimeout(Dt,t)),Ct=0):(Ct=1,Tt(Dt))}function At(){for(var e=Date.now(),t=wt;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Lt(){for(var e,t=wt,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:wt=t.n;return Nt=e,n}function It(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}r.timer=function(){Ot.apply(this,arguments)},r.timer.flush=function(){At(),Lt()},r.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Pt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(e,t){var n=Math.pow(10,3*S(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}});r.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=r.round(e,It(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Pt[8+n/3]};var kt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,jt=r.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=r.round(e,It(e,t))).toFixed(Math.max(0,Math.min(20,It(e*(1+1e-15),t))))}});function Mt(e){return e+""}var Rt=r.time={},Ft=Date;function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Vt.setUTCDate.apply(this._,arguments)},setDay:function(){Vt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Vt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Vt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Vt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Vt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Vt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Vt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Vt.setTime.apply(this._,arguments)}};var Vt=Date.prototype;function Gt(e,t,n){function a(t){var n=e(t),a=r(n,1);return t-n<a-t?n:a}function i(n){return t(n=e(new Ft(n-1)),1),n}function r(e,n){return t(e=new Ft(+e),n),e}function o(e,a,r){var o=i(e),l=[];if(r>1)for(;o<a;)n(o)%r||l.push(new Date(+o)),t(o,1);else for(;o<a;)l.push(new Date(+o)),t(o,1);return l}e.floor=e,e.round=a,e.ceil=i,e.offset=r,e.range=o;var l=e.utc=Ht(e);return l.floor=l,l.round=Ht(a),l.ceil=Ht(i),l.offset=Ht(r),l.range=function(e,t,n){try{Ft=Bt;var a=new Bt;return a._=e,o(a,t,n)}finally{Ft=Date}},e}function Ht(e){return function(t,n){try{Ft=Bt;var a=new Bt;return a._=t,e(a,n)._}finally{Ft=Date}}}Rt.year=Gt(function(e){return(e=Rt.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),Rt.years=Rt.year.range,Rt.years.utc=Rt.year.utc.range,Rt.day=Gt(function(e){var t=new Ft(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),Rt.days=Rt.day.range,Rt.days.utc=Rt.day.utc.range,Rt.dayOfYear=function(e){var t=Rt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Rt[e]=Gt(function(e){return(e=Rt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=Rt.year(e).getDay();return Math.floor((Rt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Rt[e+"s"]=n.range,Rt[e+"s"].utc=n.utc.range,Rt[e+"OfYear"]=function(e){var n=Rt.year(e).getDay();return Math.floor((Rt.dayOfYear(e)+(n+t)%7)/7)}}),Rt.week=Rt.sunday,Rt.weeks=Rt.sunday.range,Rt.weeks.utc=Rt.sunday.utc.range,Rt.weekOfYear=Rt.sundayOfYear;var zt={"-":"",_:" ",0:"0"},qt=/^\s*\d+/,Wt=/^%/;function Ut(e,t,n){var a=e<0?"-":"",i=(a?-e:e)+"",r=i.length;return a+(r<n?new Array(n-r+1).join(t)+i:i)}function Xt(e){return new RegExp("^(?:"+e.map(r.requote).join("|")+")","i")}function Yt(e){for(var t=new N,n=-1,a=e.length;++n<a;)t.set(e[n].toLowerCase(),n);return t}function Qt(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function Jt(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n));return a?(e.U=+a[0],n+a[0].length):-1}function Zt(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n));return a?(e.W=+a[0],n+a[0].length):-1}function Kt(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function $t(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+2));return a?(e.y=function(e){return e+(e>68?1900:2e3)}(+a[0]),n+a[0].length):-1}function en(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function tn(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function nn(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function an(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+3));return a?(e.j=+a[0],n+a[0].length):-1}function rn(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function on(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function ln(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function sn(e,t,n){qt.lastIndex=0;var a=qt.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function cn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",a=S(t)/60|0,i=S(t)%60;return n+Ut(a,"0",2)+Ut(i,"0",2)}function un(e,t,n){Wt.lastIndex=0;var a=Wt.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function dn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,a=e[n];!a[1](t);)a=e[++n];return a[0](t)}}r.locale=function(e){return{numberFormat:function(e){var t=e.decimal,n=e.thousands,a=e.grouping,i=e.currency,o=a&&n?function(e,t){for(var i=e.length,r=[],o=0,l=a[0],s=0;i>0&&l>0&&(s+l+1>t&&(l=Math.max(1,t-s)),r.push(e.substring(i-=l,i+l)),!((s+=l+1)>t));)l=a[o=(o+1)%a.length];return r.reverse().join(n)}:j;return function(e){var n=kt.exec(e),a=n[1]||" ",l=n[2]||">",s=n[3]||"-",c=n[4]||"",u=n[5],d=+n[6],m=n[7],h=n[8],p=n[9],f=1,g="",v="",b=!1,y=!0;switch(h&&(h=+h.substring(1)),(u||"0"===a&&"="===l)&&(u=a="0",l="="),p){case"n":m=!0,p="g";break;case"%":f=100,v="%",p="f";break;case"p":f=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(g="0"+p.toLowerCase());case"c":y=!1;case"d":b=!0,h=0;break;case"s":f=-1,p="r"}"$"===c&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=jt.get(p)||Mt;var E=u&&m;return function(e){var n=v;if(b&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===s?"":s;if(f<0){var c=r.formatPrefix(e,h);e=c.scale(e),n=c.symbol+v}else e*=f;var x,S,w=(e=p(e,h)).lastIndexOf(".");if(w<0){var N=y?e.lastIndexOf("e"):-1;N<0?(x=e,S=""):(x=e.substring(0,N),S=e.substring(N))}else x=e.substring(0,w),S=t+e.substring(w+1);!u&&m&&(x=o(x,1/0));var C=g.length+x.length+S.length+(E?0:i.length),_=C<d?new Array(C=d-C+1).join(a):"";return E&&(x=o(_+x,_.length?d-S.length:1/0)),i+=g,e=x+S,("<"===l?i+e+_:">"===l?_+i+e:"^"===l?_.substring(0,C>>=1)+i+e+_.substring(C):i+(E?e:_+e))+n}}}(e),timeFormat:function(e){var t=e.dateTime,n=e.date,a=e.time,i=e.periods,o=e.days,l=e.shortDays,s=e.months,c=e.shortMonths;function u(e){var t=e.length;function n(n){for(var a,i,r,o=[],l=-1,s=0;++l<t;)37===e.charCodeAt(l)&&(o.push(e.slice(s,l)),null!=(i=zt[a=e.charAt(++l)])&&(a=e.charAt(++l)),(r=x[a])&&(a=r(n,null==i?"e"===a?" ":"0":i)),o.push(a),s=l+1);return o.push(e.slice(s,l)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(d(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var a=null!=n.Z&&Ft!==Bt,i=new(a?Bt:Ft);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),a?i._:i},n.toString=function(){return e},n}function d(e,t,n,a){for(var i,r,o,l=0,s=t.length,c=n.length;l<s;){if(a>=c)return-1;if(37===(i=t.charCodeAt(l++))){if(o=t.charAt(l++),!(r=S[o in zt?t.charAt(l++):o])||(a=r(e,n,a))<0)return-1}else if(i!=n.charCodeAt(a++))return-1}return a}u.utc=function(e){var t=u(e);function n(e){try{var n=new(Ft=Bt);return n._=e,t(n)}finally{Ft=Date}}return n.parse=function(e){try{Ft=Bt;var n=t.parse(e);return n&&n._}finally{Ft=Date}},n.toString=t.toString,n},u.multi=u.utc.multi=dn;var m=r.map(),h=Xt(o),p=Yt(o),f=Xt(l),g=Yt(l),v=Xt(s),b=Yt(s),y=Xt(c),E=Yt(c);i.forEach(function(e,t){m.set(e.toLowerCase(),t)});var x={a:function(e){return l[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:u(t),d:function(e,t){return Ut(e.getDate(),t,2)},e:function(e,t){return Ut(e.getDate(),t,2)},H:function(e,t){return Ut(e.getHours(),t,2)},I:function(e,t){return Ut(e.getHours()%12||12,t,2)},j:function(e,t){return Ut(1+Rt.dayOfYear(e),t,3)},L:function(e,t){return Ut(e.getMilliseconds(),t,3)},m:function(e,t){return Ut(e.getMonth()+1,t,2)},M:function(e,t){return Ut(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return Ut(e.getSeconds(),t,2)},U:function(e,t){return Ut(Rt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ut(Rt.mondayOfYear(e),t,2)},x:u(n),X:u(a),y:function(e,t){return Ut(e.getFullYear()%100,t,2)},Y:function(e,t){return Ut(e.getFullYear()%1e4,t,4)},Z:cn,"%":function(){return"%"}},S={a:function(e,t,n){f.lastIndex=0;var a=f.exec(t.slice(n));return a?(e.w=g.get(a[0].toLowerCase()),n+a[0].length):-1},A:function(e,t,n){h.lastIndex=0;var a=h.exec(t.slice(n));return a?(e.w=p.get(a[0].toLowerCase()),n+a[0].length):-1},b:function(e,t,n){y.lastIndex=0;var a=y.exec(t.slice(n));return a?(e.m=E.get(a[0].toLowerCase()),n+a[0].length):-1},B:function(e,t,n){v.lastIndex=0;var a=v.exec(t.slice(n));return a?(e.m=b.get(a[0].toLowerCase()),n+a[0].length):-1},c:function(e,t,n){return d(e,x.c.toString(),t,n)},d:nn,e:nn,H:rn,I:rn,j:an,L:sn,m:tn,M:on,p:function(e,t,n){var a=m.get(t.slice(n,n+=2).toLowerCase());return null==a?-1:(e.p=a,n)},S:ln,U:Jt,w:Qt,W:Zt,x:function(e,t,n){return d(e,x.x.toString(),t,n)},X:function(e,t,n){return d(e,x.X.toString(),t,n)},y:$t,Y:Kt,Z:en,"%":un};return u}(e)}};var mn=r.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hn(){}r.format=mn.numberFormat,r.geo={},hn.prototype={s:0,t:0,add:function(e){fn(e,this.t,pn),fn(pn.s,this.s,this),this.s?this.t+=pn.t:this.s=pn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pn=new hn;function fn(e,t,n){var a=n.s=e+t,i=a-e,r=a-i;n.t=e-r+(t-i)}function gn(e,t){e&&bn.hasOwnProperty(e.type)&&bn[e.type](e,t)}r.geo.stream=function(e,t){e&&vn.hasOwnProperty(e.type)?vn[e.type](e,t):gn(e,t)};var vn={Feature:function(e,t){gn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,a=-1,i=n.length;++a<i;)gn(n[a].geometry,t)}},bn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)e=n[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){yn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)yn(n[a],t,0)},Polygon:function(e,t){En(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,a=-1,i=n.length;++a<i;)En(n[a],t)},GeometryCollection:function(e,t){for(var n=e.geometries,a=-1,i=n.length;++a<i;)gn(n[a],t)}};function yn(e,t,n){var a,i=-1,r=e.length-n;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function En(e,t){var n=-1,a=e.length;for(t.polygonStart();++n<a;)yn(e[n],t,1);t.polygonEnd()}r.geo.area=function(e){return xn=0,r.geo.stream(e,kn),xn};var xn,Sn,wn,Nn,Cn,_n,Tn,On,Dn,An,Ln,In,Pn=new hn,kn={sphere:function(){xn+=4*De},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Pn.reset(),kn.lineStart=jn},polygonEnd:function(){var e=2*Pn;xn+=e<0?4*De+e:e,kn.lineStart=kn.lineEnd=kn.point=B}};function jn(){var e,t,n,a,i;function r(e,t){t=t*Pe/2+De/4;var r=(e*=Pe)-n,o=r>=0?1:-1,l=o*r,s=Math.cos(t),c=Math.sin(t),u=i*c,d=a*s+u*Math.cos(l),m=u*o*Math.sin(l);Pn.add(Math.atan2(m,d)),n=e,a=s,i=c}kn.point=function(o,l){kn.point=r,n=(e=o)*Pe,a=Math.cos(l=(t=l)*Pe/2+De/4),i=Math.sin(l)},kn.lineEnd=function(){r(e,t)}}function Mn(e){var t=e[0],n=e[1],a=Math.cos(n);return[a*Math.cos(t),a*Math.sin(t),Math.sin(n)]}function Rn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Bn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Vn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Gn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Hn(e){return[Math.atan2(e[1],e[0]),Fe(e[2])]}function zn(e,t){return S(e[0]-t[0])<Te&&S(e[1]-t[1])<Te}r.geo.bounds=function(){var e,t,n,a,i,o,l,s,c,u,d,m={point:h,lineStart:f,lineEnd:g,polygonStart:function(){m.point=v,m.lineStart=b,m.lineEnd=y,c=0,kn.polygonStart()},polygonEnd:function(){kn.polygonEnd(),m.point=h,m.lineStart=f,m.lineEnd=g,Pn<0?(e=-(n=180),t=-(a=90)):c>Te?a=90:c<-Te&&(t=-90),d[0]=e,d[1]=n}};function h(i,r){u.push(d=[e=i,n=i]),r<t&&(t=r),r>a&&(a=r)}function p(r,o){var l=Mn([r*Pe,o*Pe]);if(s){var c=Fn(s,l),u=Fn([c[1],-c[0],0],c);Gn(u),u=Hn(u);var d=r-i,m=d>0?1:-1,p=u[0]*ke*m,f=S(d)>180;if(f^(m*i<p&&p<m*r))(g=u[1]*ke)>a&&(a=g);else if(f^(m*i<(p=(p+360)%360-180)&&p<m*r)){var g;(g=-u[1]*ke)<t&&(t=g)}else o<t&&(t=o),o>a&&(a=o);f?r<i?E(e,r)>E(e,n)&&(n=r):E(r,n)>E(e,n)&&(e=r):n>=e?(r<e&&(e=r),r>n&&(n=r)):r>i?E(e,r)>E(e,n)&&(n=r):E(r,n)>E(e,n)&&(e=r)}else h(r,o);s=l,i=r}function f(){m.point=p}function g(){d[0]=e,d[1]=n,m.point=h,s=null}function v(e,t){if(s){var n=e-i;c+=S(n)>180?n+(n>0?360:-360):n}else o=e,l=t;kn.point(e,t),p(e,t)}function b(){kn.lineStart()}function y(){v(o,l),kn.lineEnd(),S(c)>Te&&(e=-(n=180)),d[0]=e,d[1]=n,s=null}function E(e,t){return(t-=e)<0?t+360:t}function x(e,t){return e[0]-t[0]}function w(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){if(a=n=-(e=t=1/0),u=[],r.geo.stream(i,m),c=u.length){u.sort(x);for(var o=1,l=[f=u[0]];o<c;++o)w((h=u[o])[0],f)||w(h[1],f)?(E(f[0],h[1])>E(f[0],f[1])&&(f[1]=h[1]),E(h[0],f[1])>E(f[0],f[1])&&(f[0]=h[0])):l.push(f=h);for(var s,c,h,p=-1/0,f=(o=0,l[c=l.length-1]);o<=c;f=h,++o)h=l[o],(s=E(f[1],h[0]))>p&&(p=s,e=h[0],n=f[1])}return u=d=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,a]]}}(),r.geo.centroid=function(e){Sn=wn=Nn=Cn=_n=Tn=On=Dn=An=Ln=In=0,r.geo.stream(e,qn);var t=An,n=Ln,a=In,i=t*t+n*n+a*a;return i<Oe&&(t=Tn,n=On,a=Dn,wn<Te&&(t=Nn,n=Cn,a=_n),(i=t*t+n*n+a*a)<Oe)?[NaN,NaN]:[Math.atan2(n,t)*ke,Fe(a/Math.sqrt(i))*ke]};var qn={sphere:B,point:Wn,lineStart:Xn,lineEnd:Yn,polygonStart:function(){qn.lineStart=Qn},polygonEnd:function(){qn.lineStart=Xn}};function Wn(e,t){e*=Pe;var n=Math.cos(t*=Pe);Un(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Un(e,t,n){Nn+=(e-Nn)/++Sn,Cn+=(t-Cn)/Sn,_n+=(n-_n)/Sn}function Xn(){var e,t,n;function a(a,i){a*=Pe;var r=Math.cos(i*=Pe),o=r*Math.cos(a),l=r*Math.sin(a),s=Math.sin(i),c=Math.atan2(Math.sqrt((c=t*s-n*l)*c+(c=n*o-e*s)*c+(c=e*l-t*o)*c),e*o+t*l+n*s);wn+=c,Tn+=c*(e+(e=o)),On+=c*(t+(t=l)),Dn+=c*(n+(n=s)),Un(e,t,n)}qn.point=function(i,r){i*=Pe;var o=Math.cos(r*=Pe);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(r),qn.point=a,Un(e,t,n)}}function Yn(){qn.point=Wn}function Qn(){var e,t,n,a,i;function r(e,t){e*=Pe;var r=Math.cos(t*=Pe),o=r*Math.cos(e),l=r*Math.sin(e),s=Math.sin(t),c=a*s-i*l,u=i*o-n*s,d=n*l-a*o,m=Math.sqrt(c*c+u*u+d*d),h=n*o+a*l+i*s,p=m&&-Re(h)/m,f=Math.atan2(m,h);An+=p*c,Ln+=p*u,In+=p*d,wn+=f,Tn+=f*(n+(n=o)),On+=f*(a+(a=l)),Dn+=f*(i+(i=s)),Un(n,a,i)}qn.point=function(o,l){e=o,t=l,qn.point=r,o*=Pe;var s=Math.cos(l*=Pe);n=s*Math.cos(o),a=s*Math.sin(o),i=Math.sin(l),Un(n,a,i)},qn.lineEnd=function(){r(e,t),qn.lineEnd=Yn,qn.point=Wn}}function Jn(e,t){function n(n,a){return n=e(n,a),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,a){return(n=t.invert(n,a))&&e.invert(n[0],n[1])}),n}function Zn(){return!0}function Kn(e,t,n,a,i){var r=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],a=e[t];if(zn(n,a)){i.lineStart();for(var l=0;l<t;++l)i.point((n=e[l])[0],n[1]);i.lineEnd()}else{var s=new ea(n,e,null,!0),c=new ea(n,null,s,!1);s.o=c,r.push(s),o.push(c),c=new ea(a,null,s=new ea(a,e,null,!1),!0),s.o=c,r.push(s),o.push(c)}}}),o.sort(t),$n(r),$n(o),r.length){for(var l=0,s=n,c=o.length;l<c;++l)o[l].e=s=!s;for(var u,d,m=r[0];;){for(var h=m,p=!0;h.v;)if((h=h.n)===m)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(l=0,c=u.length;l<c;++l)i.point((d=u[l])[0],d[1]);else a(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=(u=h.p.z).length-1;l>=0;--l)i.point((d=u[l])[0],d[1]);else a(h.x,h.p.x,-1,i);h=h.p}u=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function $n(e){if(t=e.length){for(var t,n,a=0,i=e[0];++a<t;)i.n=n=e[a],n.p=i,i=n;i.n=n=e[0],n.p=i}}function ea(e,t,n,a){this.x=e,this.z=t,this.o=n,this.e=a,this.v=!1,this.n=this.p=null}function ta(e,t,n,a){return function(i,o){var l,s=t(o),c=i.invert(a[0],a[1]),u={point:d,lineStart:h,lineEnd:p,polygonStart:function(){u.point=E,u.lineStart=x,u.lineEnd=S,l=[],f=[]},polygonEnd:function(){u.point=d,u.lineStart=h,u.lineEnd=p,l=r.merge(l);var e=function(e,t){var n=e[0],a=e[1],i=[Math.sin(n),-Math.cos(n),0],r=0,o=0;Pn.reset();for(var l=0,s=t.length;l<s;++l){var c=t[l],u=c.length;if(u)for(var d=c[0],m=d[0],h=d[1]/2+De/4,p=Math.sin(h),f=Math.cos(h),g=1;;){g===u&&(g=0);var v=(e=c[g])[0],b=e[1]/2+De/4,y=Math.sin(b),E=Math.cos(b),x=v-m,S=x>=0?1:-1,w=S*x,N=w>De,C=p*y;if(Pn.add(Math.atan2(C*S*Math.sin(w),f*E+C*Math.cos(w))),r+=N?x+S*Ae:x,N^m>=n^v>=n){var _=Fn(Mn(d),Mn(e));Gn(_);var T=Fn(i,_);Gn(T);var O=(N^x>=0?-1:1)*Fe(T[2]);(a>O||a===O&&(_[0]||_[1]))&&(o+=N^x>=0?1:-1)}if(!g++)break;m=v,p=y,f=E,d=e}}return(r<-Te||r<Te&&Pn<-Te)^1&o}(c,f);l.length?(y||(o.polygonStart(),y=!0),Kn(l,ia,e,n,o)):e&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),l=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(t,n){var a=i(t,n);e(t=a[0],n=a[1])&&o.point(t,n)}function m(e,t){var n=i(e,t);s.point(n[0],n[1])}function h(){u.point=m,s.lineStart()}function p(){u.point=d,s.lineEnd()}var f,g,v=aa(),b=t(v),y=!1;function E(e,t){g.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function x(){b.lineStart(),g=[]}function S(){E(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=v.buffer(),a=n.length;if(g.pop(),f.push(g),g=null,a)if(1&t){var i,r=-1;if((a=(e=n[0]).length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart();++r<a;)o.point((i=e[r])[0],i[1]);o.lineEnd()}}else a>1&&2&t&&n.push(n.pop().concat(n.shift())),l.push(n.filter(na))}return u}}function na(e){return e.length>1}function aa(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:B,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function ia(e,t){return((e=e.x)[0]<0?e[1]-Ie-Te:Ie-e[1])-((t=t.x)[0]<0?t[1]-Ie-Te:Ie-t[1])}var ra=ta(Zn,function(e){var t,n=NaN,a=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(r,o){var l=r>0?De:-De,s=S(r-n);S(s-De)<Te?(e.point(n,a=(a+o)/2>0?Ie:-Ie),e.point(i,a),e.lineEnd(),e.lineStart(),e.point(l,a),e.point(r,a),t=0):i!==l&&s>=De&&(S(n-i)<Te&&(n-=i*Te),S(r-l)<Te&&(r-=l*Te),a=function(e,t,n,a){var i,r,o=Math.sin(e-n);return S(o)>Te?Math.atan((Math.sin(t)*(r=Math.cos(a))*Math.sin(n)-Math.sin(a)*(i=Math.cos(t))*Math.sin(e))/(i*r*o)):(t+a)/2}(n,a,r,o),e.point(i,a),e.lineEnd(),e.lineStart(),e.point(l,a),t=0),e.point(n=r,a=o),i=l},lineEnd:function(){e.lineEnd(),n=a=NaN},clean:function(){return 2-t}}},function(e,t,n,a){var i;if(null==e)i=n*Ie,a.point(-De,i),a.point(0,i),a.point(De,i),a.point(De,0),a.point(De,-i),a.point(0,-i),a.point(-De,-i),a.point(-De,0),a.point(-De,i);else if(S(e[0]-t[0])>Te){var r=e[0]<t[0]?De:-De;i=n*r/2,a.point(-r,i),a.point(0,i),a.point(r,i)}else a.point(t[0],t[1])},[-De,-De/2]);function oa(e,t,n,a){return function(i){var r,o=i.a,l=i.b,s=o.x,c=o.y,u=0,d=1,m=l.x-s,h=l.y-c;if(r=e-s,m||!(r>0)){if(r/=m,m<0){if(r<u)return;r<d&&(d=r)}else if(m>0){if(r>d)return;r>u&&(u=r)}if(r=n-s,m||!(r<0)){if(r/=m,m<0){if(r>d)return;r>u&&(u=r)}else if(m>0){if(r<u)return;r<d&&(d=r)}if(r=t-c,h||!(r>0)){if(r/=h,h<0){if(r<u)return;r<d&&(d=r)}else if(h>0){if(r>d)return;r>u&&(u=r)}if(r=a-c,h||!(r<0)){if(r/=h,h<0){if(r>d)return;r>u&&(u=r)}else if(h>0){if(r<u)return;r<d&&(d=r)}return u>0&&(i.a={x:s+u*m,y:c+u*h}),d<1&&(i.b={x:s+d*m,y:c+d*h}),i}}}}}}var la=1e9;function sa(e,t,n,a){return function(s){var c,u,d,m,h,p,f,g,v,b,y,E=s,x=aa(),S=oa(e,t,n,a),w={point:_,lineStart:function(){w.point=T,u&&u.push(d=[]);b=!0,v=!1,f=g=NaN},lineEnd:function(){c&&(T(m,h),p&&v&&x.rejoin(),c.push(x.buffer()));w.point=_,v&&s.lineEnd()},polygonStart:function(){s=x,c=[],u=[],y=!0},polygonEnd:function(){s=E,c=r.merge(c);var t=function(e){for(var t=0,n=u.length,a=e[1],i=0;i<n;++i)for(var r,o=1,l=u[i],s=l.length,c=l[0];o<s;++o)r=l[o],c[1]<=a?r[1]>a&&Me(c,r,e)>0&&++t:r[1]<=a&&Me(c,r,e)<0&&--t,c=r;return 0!==t}([e,a]),n=y&&t,i=c.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),N(null,null,1,s),s.lineEnd()),i&&Kn(c,o,t,N,s),s.polygonEnd()),c=u=d=null}};function N(r,o,s,c){var u=0,d=0;if(null==r||(u=i(r,s))!==(d=i(o,s))||l(r,o)<0^s>0)do{c.point(0===u||3===u?e:n,u>1?a:t)}while((u=(u+s+4)%4)!==d);else c.point(o[0],o[1])}function C(i,r){return e<=i&&i<=n&&t<=r&&r<=a}function _(e,t){C(e,t)&&s.point(e,t)}function T(e,t){var n=C(e=Math.max(-la,Math.min(la,e)),t=Math.max(-la,Math.min(la,t)));if(u&&d.push([e,t]),b)m=e,h=t,p=n,b=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&v)s.point(e,t);else{var a={a:{x:f,y:g},b:{x:e,y:t}};S(a)?(v||(s.lineStart(),s.point(a.a.x,a.a.y)),s.point(a.b.x,a.b.y),n||s.lineEnd(),y=!1):n&&(s.lineStart(),s.point(e,t),y=!1)}f=e,g=t,v=n}return w};function i(a,i){return S(a[0]-e)<Te?i>0?0:3:S(a[0]-n)<Te?i>0?2:1:S(a[1]-t)<Te?i>0?1:0:i>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var n=i(e,1),a=i(t,1);return n!==a?n-a:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function ca(e){var t=0,n=De/3,a=La(e),i=a(t,n);return i.parallels=function(e){return arguments.length?a(t=e[0]*De/180,n=e[1]*De/180):[t/De*180,n/De*180]},i}function ua(e,t){var n=Math.sin(e),a=(n+Math.sin(t))/2,i=1+n*(2*a-n),r=Math.sqrt(i)/a;function o(e,t){var n=Math.sqrt(i-2*a*Math.sin(t))/a;return[n*Math.sin(e*=a),r-n*Math.cos(e)]}return o.invert=function(e,t){var n=r-t;return[Math.atan2(e,n)/a,Fe((i-(e*e+n*n)*a*a)/(2*a))]},o}r.geo.clipExtent=function(){var e,t,n,a,i,r,o={stream:function(e){return i&&(i.valid=!1),(i=r(e)).valid=!0,i},extent:function(l){return arguments.length?(r=sa(e=+l[0][0],t=+l[0][1],n=+l[1][0],a=+l[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,a]]}};return o.extent([[0,0],[960,500]])},(r.geo.conicEqualArea=function(){return ca(ua)}).raw=ua,r.geo.albers=function(){return r.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},r.geo.albersUsa=function(){var e,t,n,a,i=r.geo.albers(),o=r.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=r.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};function c(i){var r=i[0],o=i[1];return e=null,t(r,o),e||(n(r,o),e)||a(r,o),e}return c.invert=function(e){var t=i.scale(),n=i.translate(),a=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&a>=-.425&&a<-.214?o:r>=.166&&r<.234&&a>=-.214&&a<-.115?l:i).invert(e)},c.stream=function(e){var t=i.stream(e),n=o.stream(e),a=l.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),a.point(e,i)},sphere:function(){t.sphere(),n.sphere(),a.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),a.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),a.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),a.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),a.polygonEnd()}}},c.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),l.precision(e),c):i.precision()},c.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),l.scale(e),c.translate(i.translate())):i.scale()},c.translate=function(e){if(!arguments.length)return i.translate();var r=i.scale(),u=+e[0],d=+e[1];return t=i.translate(e).clipExtent([[u-.455*r,d-.238*r],[u+.455*r,d+.238*r]]).stream(s).point,n=o.translate([u-.307*r,d+.201*r]).clipExtent([[u-.425*r+Te,d+.12*r+Te],[u-.214*r-Te,d+.234*r-Te]]).stream(s).point,a=l.translate([u-.205*r,d+.212*r]).clipExtent([[u-.214*r+Te,d+.166*r+Te],[u-.115*r-Te,d+.234*r-Te]]).stream(s).point,c},c.scale(1070)};var da,ma,ha,pa,fa,ga,va={point:B,lineStart:B,lineEnd:B,polygonStart:function(){ma=0,va.lineStart=ba},polygonEnd:function(){va.lineStart=va.lineEnd=va.point=B,da+=S(ma/2)}};function ba(){var e,t,n,a;function i(e,t){ma+=a*e-n*t,n=e,a=t}va.point=function(r,o){va.point=i,e=n=r,t=a=o},va.lineEnd=function(){i(e,t)}}var ya={point:function(e,t){e<ha&&(ha=e);e>fa&&(fa=e);t<pa&&(pa=t);t>ga&&(ga=t)},lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B};function Ea(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var xa,Sa={point:wa,lineStart:Na,lineEnd:Ca,polygonStart:function(){Sa.lineStart=_a},polygonEnd:function(){Sa.point=wa,Sa.lineStart=Na,Sa.lineEnd=Ca}};function wa(e,t){Nn+=e,Cn+=t,++_n}function Na(){var e,t;function n(n,a){var i=n-e,r=a-t,o=Math.sqrt(i*i+r*r);Tn+=o*(e+n)/2,On+=o*(t+a)/2,Dn+=o,wa(e=n,t=a)}Sa.point=function(a,i){Sa.point=n,wa(e=a,t=i)}}function Ca(){Sa.point=wa}function _a(){var e,t,n,a;function i(e,t){var i=e-n,r=t-a,o=Math.sqrt(i*i+r*r);Tn+=o*(n+e)/2,On+=o*(a+t)/2,Dn+=o,An+=(o=a*e-n*t)*(n+e),Ln+=o*(a+t),In+=3*o,wa(n=e,a=t)}Sa.point=function(r,o){Sa.point=i,wa(e=n=r,t=a=o)},Sa.lineEnd=function(){i(e,t)}}function Ta(e){var t=.5,n=Math.cos(30*Pe),a=16;function i(t){return(a?function(t){var n,i,o,l,s,c,u,d,m,h,p,f,g={point:v,lineStart:b,lineEnd:E,polygonStart:function(){t.polygonStart(),g.lineStart=x},polygonEnd:function(){t.polygonEnd(),g.lineStart=b}};function v(n,a){n=e(n,a),t.point(n[0],n[1])}function b(){d=NaN,g.point=y,t.lineStart()}function y(n,i){var o=Mn([n,i]),l=e(n,i);r(d,m,u,h,p,f,d=l[0],m=l[1],u=n,h=o[0],p=o[1],f=o[2],a,t),t.point(d,m)}function E(){g.point=v,t.lineEnd()}function x(){b(),g.point=S,g.lineEnd=w}function S(e,t){y(n=e,t),i=d,o=m,l=h,s=p,c=f,g.point=y}function w(){r(d,m,u,h,p,f,i,o,n,l,s,c,a,t),g.lineEnd=E,E()}return g}:function(t){return Da(t,function(n,a){n=e(n,a),t.point(n[0],n[1])})})(t)}function r(a,i,o,l,s,c,u,d,m,h,p,f,g,v){var b=u-a,y=d-i,E=b*b+y*y;if(E>4*t&&g--){var x=l+h,w=s+p,N=c+f,C=Math.sqrt(x*x+w*w+N*N),_=Math.asin(N/=C),T=S(S(N)-1)<Te||S(o-m)<Te?(o+m)/2:Math.atan2(w,x),O=e(T,_),D=O[0],A=O[1],L=D-a,I=A-i,P=y*L-b*I;(P*P/E>t||S((b*L+y*I)/E-.5)>.3||l*h+s*p+c*f<n)&&(r(a,i,o,l,s,c,D,A,T,x/=C,w/=C,N,g,v),v.point(D,A),r(D,A,T,x,w,N,u,d,m,h,p,f,g,v))}}return i.precision=function(e){return arguments.length?(a=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Oa(e){this.stream=e}function Da(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Aa(e){return La(function(){return e})()}function La(e){var t,n,a,i,o,l,s=Ta(function(e,n){return[(e=t(e,n))[0]*c+i,o-e[1]*c]}),c=150,u=480,d=250,m=0,h=0,p=0,f=0,g=0,v=ra,b=j,y=null,E=null;function x(e){return[(e=a(e[0]*Pe,e[1]*Pe))[0]*c+i,o-e[1]*c]}function w(e){return(e=a.invert((e[0]-i)/c,(o-e[1])/c))&&[e[0]*ke,e[1]*ke]}function N(){a=Jn(n=ja(p,f,g),t);var e=t(m,h);return i=u-e[0]*c,o=d+e[1]*c,C()}function C(){return l&&(l.valid=!1,l=null),x}return x.stream=function(e){return l&&(l.valid=!1),(l=Ia(v(n,s(b(e))))).valid=!0,l},x.clipAngle=function(e){return arguments.length?(v=null==e?(y=e,ra):function(e){var t=Math.cos(e),n=t>0,a=S(t)>Te;return ta(i,function(e){var t,l,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(d,m){var h,p=[d,m],f=i(d,m),g=n?f?0:o(d,m):f?o(d+(d<0?De:-De),m):0;if(!t&&(c=s=f)&&e.lineStart(),f!==s&&(h=r(t,p),(zn(t,h)||zn(p,h))&&(p[0]+=Te,p[1]+=Te,f=i(p[0],p[1]))),f!==s)u=0,f?(e.lineStart(),h=r(p,t),e.point(h[0],h[1])):(h=r(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(a&&t&&n^f){var v;g&l||!(v=r(p,t,!0))||(u=0,n?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!f||t&&zn(t,p)||e.point(p[0],p[1]),t=p,s=f,l=g},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return u|(c&&s)<<1}}},Ba(e,6*Pe),n?[0,-e]:[-De,e-De]);function i(e,n){return Math.cos(e)*Math.cos(n)>t}function r(e,n,a){var i=[1,0,0],r=Fn(Mn(e),Mn(n)),o=Rn(r,r),l=r[0],s=o-l*l;if(!s)return!a&&e;var c=t*o/s,u=-t*l/s,d=Fn(i,r),m=Vn(i,c);Bn(m,Vn(r,u));var h=d,p=Rn(m,h),f=Rn(h,h),g=p*p-f*(Rn(m,m)-1);if(!(g<0)){var v=Math.sqrt(g),b=Vn(h,(-p-v)/f);if(Bn(b,m),b=Hn(b),!a)return b;var y,E=e[0],x=n[0],w=e[1],N=n[1];x<E&&(y=E,E=x,x=y);var C=x-E,_=S(C-De)<Te;if(!_&&N<w&&(y=w,w=N,N=y),_||C<Te?_?w+N>0^b[1]<(S(b[0]-E)<Te?w:N):w<=b[1]&&b[1]<=N:C>De^(E<=b[0]&&b[0]<=x)){var T=Vn(h,(-p+v)/f);return Bn(T,m),[b,Hn(T)]}}}function o(t,a){var i=n?e:De-e,r=0;return t<-i?r|=1:t>i&&(r|=2),a<-i?r|=4:a>i&&(r|=8),r}}((y=+e)*Pe),C()):y},x.clipExtent=function(e){return arguments.length?(E=e,b=e?sa(e[0][0],e[0][1],e[1][0],e[1][1]):j,C()):E},x.scale=function(e){return arguments.length?(c=+e,N()):c},x.translate=function(e){return arguments.length?(u=+e[0],d=+e[1],N()):[u,d]},x.center=function(e){return arguments.length?(m=e[0]%360*Pe,h=e[1]%360*Pe,N()):[m*ke,h*ke]},x.rotate=function(e){return arguments.length?(p=e[0]%360*Pe,f=e[1]%360*Pe,g=e.length>2?e[2]%360*Pe:0,N()):[p*ke,f*ke,g*ke]},r.rebind(x,s,"precision"),function(){return t=e.apply(this,arguments),x.invert=t.invert&&w,N()}}function Ia(e){return Da(e,function(t,n){e.point(t*Pe,n*Pe)})}function Pa(e,t){return[e,t]}function ka(e,t){return[e>De?e-Ae:e<-De?e+Ae:e,t]}function ja(e,t,n){return e?t||n?Jn(Ra(e),Fa(t,n)):Ra(e):t||n?Fa(t,n):ka}function Ma(e){return function(t,n){return[(t+=e)>De?t-Ae:t<-De?t+Ae:t,n]}}function Ra(e){var t=Ma(e);return t.invert=Ma(-e),t}function Fa(e,t){var n=Math.cos(e),a=Math.sin(e),i=Math.cos(t),r=Math.sin(t);function o(e,t){var o=Math.cos(t),l=Math.cos(e)*o,s=Math.sin(e)*o,c=Math.sin(t),u=c*n+l*a;return[Math.atan2(s*i-u*r,l*n-c*a),Fe(u*i+s*r)]}return o.invert=function(e,t){var o=Math.cos(t),l=Math.cos(e)*o,s=Math.sin(e)*o,c=Math.sin(t),u=c*i-s*r;return[Math.atan2(s*i+c*r,l*n+u*a),Fe(u*n-l*a)]},o}function Ba(e,t){var n=Math.cos(e),a=Math.sin(e);return function(i,r,o,l){var s=o*t;null!=i?(i=Va(n,i),r=Va(n,r),(o>0?i<r:i>r)&&(i+=o*Ae)):(i=e+o*Ae,r=e-.5*s);for(var c,u=i;o>0?u>r:u<r;u-=s)l.point((c=Hn([n,-a*Math.cos(u),-a*Math.sin(u)]))[0],c[1])}}function Va(e,t){var n=Mn(t);n[0]-=e,Gn(n);var a=Re(-n[1]);return((-n[2]<0?-a:a)+2*Math.PI-Te)%(2*Math.PI)}function Ga(e,t,n){var a=r.range(e,t-Te,n).concat(t);return function(e){return a.map(function(t){return[e,t]})}}function Ha(e,t,n){var a=r.range(e,t-Te,n).concat(t);return function(e){return a.map(function(t){return[t,e]})}}function za(e){return e.source}function qa(e){return e.target}r.geo.path=function(){var e,t,n,a,i,o=4.5;function l(e){return e&&("function"===typeof o&&a.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(a)),r.geo.stream(e,i)),a.result()}function s(){return i=null,l}return l.area=function(e){return da=0,r.geo.stream(e,n(va)),da},l.centroid=function(e){return Nn=Cn=_n=Tn=On=Dn=An=Ln=In=0,r.geo.stream(e,n(Sa)),In?[An/In,Ln/In]:Dn?[Tn/Dn,On/Dn]:_n?[Nn/_n,Cn/_n]:[NaN,NaN]},l.bounds=function(e){return fa=ga=-(ha=pa=1/0),r.geo.stream(e,n(ya)),[[ha,pa],[fa,ga]]},l.projection=function(t){return arguments.length?(n=(e=t)?t.stream||function(e){var t=Ta(function(t,n){return e([t*ke,n*ke])});return function(e){return Ia(t(e))}}(t):j,s()):e},l.context=function(e){return arguments.length?(a=null==(t=e)?new function(){var e=Ea(4.5),t=[],n={point:a,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=l},polygonEnd:function(){n.lineEnd=o,n.point=a},pointRadius:function(t){return e=Ea(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function a(n,a){t.push("M",n,",",a,e)}function i(e,a){t.push("M",e,",",a),n.point=r}function r(e,n){t.push("L",e,",",n)}function o(){n.point=a}function l(){t.push("Z")}return n}:new function(e){var t=4.5,n={point:a,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=l},polygonEnd:function(){n.lineEnd=o,n.point=a},pointRadius:function(e){return t=e,n},result:B};function a(n,a){e.moveTo(n+t,a),e.arc(n,a,t,0,Ae)}function i(t,a){e.moveTo(t,a),n.point=r}function r(t,n){e.lineTo(t,n)}function o(){n.point=a}function l(){e.closePath()}return n}(e),"function"!==typeof o&&a.pointRadius(o),s()):t},l.pointRadius=function(e){return arguments.length?(o="function"===typeof e?e:(a.pointRadius(+e),+e),l):o},l.projection(r.geo.albersUsa()).context(null)},r.geo.transform=function(e){return{stream:function(t){var n=new Oa(t);for(var a in e)n[a]=e[a];return n}}},Oa.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},r.geo.projection=Aa,r.geo.projectionMutator=La,(r.geo.equirectangular=function(){return Aa(Pa)}).raw=Pa.invert=Pa,r.geo.rotation=function(e){function t(t){return(t=e(t[0]*Pe,t[1]*Pe))[0]*=ke,t[1]*=ke,t}return e=ja(e[0]%360*Pe,e[1]*Pe,e.length>2?e[2]*Pe:0),t.invert=function(t){return(t=e.invert(t[0]*Pe,t[1]*Pe))[0]*=ke,t[1]*=ke,t},t},ka.invert=Pa,r.geo.circle=function(){var e,t,n=[0,0],a=6;function i(){var e="function"===typeof n?n.apply(this,arguments):n,a=ja(-e[0]*Pe,-e[1]*Pe,0).invert,i=[];return t(null,null,1,{point:function(e,t){i.push(e=a(e,t)),e[0]*=ke,e[1]*=ke}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(e){return arguments.length?(n=e,i):n},i.angle=function(n){return arguments.length?(t=Ba((e=+n)*Pe,a*Pe),i):e},i.precision=function(n){return arguments.length?(t=Ba(e*Pe,(a=+n)*Pe),i):a},i.angle(90)},r.geo.distance=function(e,t){var n,a=(t[0]-e[0])*Pe,i=e[1]*Pe,r=t[1]*Pe,o=Math.sin(a),l=Math.cos(a),s=Math.sin(i),c=Math.cos(i),u=Math.sin(r),d=Math.cos(r);return Math.atan2(Math.sqrt((n=d*o)*n+(n=c*u-s*d*l)*n),s*u+c*d*l)},r.geo.graticule=function(){var e,t,n,a,i,o,l,s,c,u,d,m,h=10,p=h,f=90,g=360,v=2.5;function b(){return{type:"MultiLineString",coordinates:y()}}function y(){return r.range(Math.ceil(a/f)*f,n,f).map(d).concat(r.range(Math.ceil(s/g)*g,l,g).map(m)).concat(r.range(Math.ceil(t/h)*h,e,h).filter(function(e){return S(e%f)>Te}).map(c)).concat(r.range(Math.ceil(o/p)*p,i,p).filter(function(e){return S(e%g)>Te}).map(u))}return b.lines=function(){return y().map(function(e){return{type:"LineString",coordinates:e}})},b.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(m(l).slice(1),d(n).reverse().slice(1),m(s).reverse().slice(1))]}},b.extent=function(e){return arguments.length?b.majorExtent(e).minorExtent(e):b.minorExtent()},b.majorExtent=function(e){return arguments.length?(a=+e[0][0],n=+e[1][0],s=+e[0][1],l=+e[1][1],a>n&&(e=a,a=n,n=e),s>l&&(e=s,s=l,l=e),b.precision(v)):[[a,s],[n,l]]},b.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),b.precision(v)):[[t,o],[e,i]]},b.step=function(e){return arguments.length?b.majorStep(e).minorStep(e):b.minorStep()},b.majorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],b):[f,g]},b.minorStep=function(e){return arguments.length?(h=+e[0],p=+e[1],b):[h,p]},b.precision=function(r){return arguments.length?(v=+r,c=Ga(o,i,90),u=Ha(t,e,v),d=Ga(s,l,90),m=Ha(a,n,v),b):v},b.majorExtent([[-180,-90+Te],[180,90-Te]]).minorExtent([[-180,-80-Te],[180,80+Te]])},r.geo.greatArc=function(){var e,t,n=za,a=qa;function i(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||a.apply(this,arguments)]}}return i.distance=function(){return r.geo.distance(e||n.apply(this,arguments),t||a.apply(this,arguments))},i.source=function(t){return arguments.length?(n=t,e="function"===typeof t?null:t,i):n},i.target=function(e){return arguments.length?(a=e,t="function"===typeof e?null:e,i):a},i.precision=function(){return arguments.length?i:0},i},r.geo.interpolate=function(e,t){return function(e,t,n,a){var i=Math.cos(t),r=Math.sin(t),o=Math.cos(a),l=Math.sin(a),s=i*Math.cos(e),c=i*Math.sin(e),u=o*Math.cos(n),d=o*Math.sin(n),m=2*Math.asin(Math.sqrt(Ve(a-t)+i*o*Ve(n-e))),h=1/Math.sin(m),p=m?function(e){var t=Math.sin(e*=m)*h,n=Math.sin(m-e)*h,a=n*s+t*u,i=n*c+t*d,o=n*r+t*l;return[Math.atan2(i,a)*ke,Math.atan2(o,Math.sqrt(a*a+i*i))*ke]}:function(){return[e*ke,t*ke]};return p.distance=m,p}(e[0]*Pe,e[1]*Pe,t[0]*Pe,t[1]*Pe)},r.geo.length=function(e){return xa=0,r.geo.stream(e,Wa),xa};var Wa={sphere:B,point:B,lineStart:function(){var e,t,n;function a(a,i){var r=Math.sin(i*=Pe),o=Math.cos(i),l=S((a*=Pe)-e),s=Math.cos(l);xa+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=n*r-t*o*s)*l),t*r+n*o*s),e=a,t=r,n=o}Wa.point=function(i,r){e=i*Pe,t=Math.sin(r*=Pe),n=Math.cos(r),Wa.point=a},Wa.lineEnd=function(){Wa.point=Wa.lineEnd=B}},lineEnd:B,polygonStart:B,polygonEnd:B};function Ua(e,t){function n(t,n){var a=Math.cos(t),i=Math.cos(n),r=e(a*i);return[r*i*Math.sin(t),r*Math.sin(n)]}return n.invert=function(e,n){var a=Math.sqrt(e*e+n*n),i=t(a),r=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*r,a*o),Math.asin(a&&n*r/a)]},n}var Xa=Ua(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(r.geo.azimuthalEqualArea=function(){return Aa(Xa)}).raw=Xa;var Ya=Ua(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},j);function Qa(e,t){var n=Math.cos(e),a=function(e){return Math.tan(De/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(a(t)/a(e)),r=n*Math.pow(a(e),i)/i;if(!i)return Ka;function o(e,t){r>0?t<-Ie+Te&&(t=-Ie+Te):t>Ie-Te&&(t=Ie-Te);var n=r/Math.pow(a(t),i);return[n*Math.sin(i*e),r-n*Math.cos(i*e)]}return o.invert=function(e,t){var n=r-t,a=je(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(r/a,1/i))-Ie]},o}function Ja(e,t){var n=Math.cos(e),a=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/a+e;if(S(a)<Te)return Pa;function r(e,t){var n=i-t;return[n*Math.sin(a*e),i-n*Math.cos(a*e)]}return r.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/a,i-je(a)*Math.sqrt(e*e+n*n)]},r}(r.geo.azimuthalEquidistant=function(){return Aa(Ya)}).raw=Ya,(r.geo.conicConformal=function(){return ca(Qa)}).raw=Qa,(r.geo.conicEquidistant=function(){return ca(Ja)}).raw=Ja;var Za=Ua(function(e){return 1/e},Math.atan);function Ka(e,t){return[e,Math.log(Math.tan(De/4+t/2))]}function $a(e){var t,n=Aa(e),a=n.scale,i=n.translate,r=n.clipExtent;return n.scale=function(){var e=a.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=r.apply(n,arguments);if(o===n){if(t=null==e){var l=De*a(),s=i();r([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else t&&(o=null);return o},n.clipExtent(null)}(r.geo.gnomonic=function(){return Aa(Za)}).raw=Za,Ka.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ie]},(r.geo.mercator=function(){return $a(Ka)}).raw=Ka;var ei=Ua(function(){return 1},Math.asin);(r.geo.orthographic=function(){return Aa(ei)}).raw=ei;var ti=Ua(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});function ni(e,t){return[Math.log(Math.tan(De/4+t/2)),-e]}function ai(e){return e[0]}function ii(e){return e[1]}function ri(e){for(var t=e.length,n=[0,1],a=2,i=2;i<t;i++){for(;a>1&&Me(e[n[a-2]],e[n[a-1]],e[i])<=0;)--a;n[a++]=i}return n.slice(0,a)}function oi(e,t){return e[0]-t[0]||e[1]-t[1]}(r.geo.stereographic=function(){return Aa(ti)}).raw=ti,ni.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ie]},(r.geo.transverseMercator=function(){var e=$a(ni),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ni,r.geom={},r.geom.hull=function(e){var t=ai,n=ii;if(arguments.length)return a(e);function a(e){if(e.length<3)return[];var a,i=Et(t),r=Et(n),o=e.length,l=[],s=[];for(a=0;a<o;a++)l.push([+i.call(this,e[a],a),+r.call(this,e[a],a),a]);for(l.sort(oi),a=0;a<o;a++)s.push([l[a][0],-l[a][1]]);var c=ri(l),u=ri(s),d=u[0]===c[0],m=u[u.length-1]===c[c.length-1],h=[];for(a=c.length-1;a>=0;--a)h.push(e[l[c[a]][2]]);for(a=+d;a<u.length-m;++a)h.push(e[l[u[a]][2]]);return h}return a.x=function(e){return arguments.length?(t=e,a):t},a.y=function(e){return arguments.length?(n=e,a):n},a},r.geom.polygon=function(e){return U(e,li),e};var li=r.geom.polygon.prototype=[];function si(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ci(e,t,n,a){var i=e[0],r=n[0],o=t[0]-i,l=a[0]-r,s=e[1],c=n[1],u=t[1]-s,d=a[1]-c,m=(l*(s-c)-d*(i-r))/(d*o-l*u);return[i+m*o,s+m*u]}function ui(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}li.area=function(){for(var e,t=-1,n=this.length,a=this[n-1],i=0;++t<n;)e=a,a=this[t],i+=e[1]*a[0]-e[0]*a[1];return.5*i},li.centroid=function(e){var t,n,a=-1,i=this.length,r=0,o=0,l=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++a<i;)t=l,l=this[a],n=t[0]*l[1]-l[0]*t[1],r+=(t[0]+l[0])*n,o+=(t[1]+l[1])*n;return[r*e,o*e]},li.clip=function(e){for(var t,n,a,i,r,o,l=ui(e),s=-1,c=this.length-ui(this),u=this[c-1];++s<c;){for(t=e.slice(),e.length=0,i=this[s],r=t[(a=t.length-l)-1],n=-1;++n<a;)si(o=t[n],u,i)?(si(r,u,i)||e.push(ci(r,o,u,i)),e.push(o)):si(r,u,i)&&e.push(ci(r,o,u,i)),r=o;l&&e.push(e[0]),u=i}return e};var di,mi,hi,pi,fi,gi=[],vi=[];function bi(e){var t=gi.pop()||new function(){ji(this),this.edge=this.site=this.circle=null};return t.site=e,t}function yi(e){Ti(e),hi.remove(e),gi.push(e),ji(e)}function Ei(e){var t=e.circle,n=t.x,a=t.cy,i={x:n,y:a},r=e.P,o=e.N,l=[e];yi(e);for(var s=r;s.circle&&S(n-s.circle.x)<Te&&S(a-s.circle.cy)<Te;)r=s.P,l.unshift(s),yi(s),s=r;l.unshift(s),Ti(s);for(var c=o;c.circle&&S(n-c.circle.x)<Te&&S(a-c.circle.cy)<Te;)o=c.N,l.push(c),yi(c),c=o;l.push(c),Ti(c);var u,d=l.length;for(u=1;u<d;++u)c=l[u],s=l[u-1],Ii(c.edge,s.site,c.site,i);s=l[0],(c=l[d-1]).edge=Ai(s.site,c.site,null,i),_i(s),_i(c)}function xi(e){for(var t,n,a,i,r=e.x,o=e.y,l=hi._;l;)if((a=Si(l,o)-r)>Te)l=l.L;else{if(!((i=r-wi(l,o))>Te)){a>-Te?(t=l.P,n=l):i>-Te?(t=l,n=l.N):t=n=l;break}if(!l.R){t=l;break}l=l.R}var s=bi(e);if(hi.insert(t,s),t||n){if(t===n)return Ti(t),n=bi(t.site),hi.insert(s,n),s.edge=n.edge=Ai(t.site,s.site),_i(t),void _i(n);if(n){Ti(t),Ti(n);var c=t.site,u=c.x,d=c.y,m=e.x-u,h=e.y-d,p=n.site,f=p.x-u,g=p.y-d,v=2*(m*g-h*f),b=m*m+h*h,y=f*f+g*g,E={x:(g*b-h*y)/v+u,y:(m*y-f*b)/v+d};Ii(n.edge,c,p,E),s.edge=Ai(c,e,null,E),n.edge=Ai(e,p,null,E),_i(t),_i(n)}else s.edge=Ai(t.site,s.site)}}function Si(e,t){var n=e.site,a=n.x,i=n.y,r=i-t;if(!r)return a;var o=e.P;if(!o)return-1/0;var l=(n=o.site).x,s=n.y,c=s-t;if(!c)return l;var u=l-a,d=1/r-1/c,m=u/c;return d?(-m+Math.sqrt(m*m-2*d*(u*u/(-2*c)-s+c/2+i-r/2)))/d+a:(a+l)/2}function wi(e,t){var n=e.N;if(n)return Si(n,t);var a=e.site;return a.y===t?a.x:1/0}function Ni(e){this.site=e,this.edges=[]}function Ci(e,t){return t.angle-e.angle}function _i(e){var t=e.P,n=e.N;if(t&&n){var a=t.site,i=e.site,r=n.site;if(a!==r){var o=i.x,l=i.y,s=a.x-o,c=a.y-l,u=r.x-o,d=2*(s*(g=r.y-l)-c*u);if(!(d>=-Oe)){var m=s*s+c*c,h=u*u+g*g,p=(g*m-c*h)/d,f=(s*h-u*m)/d,g=f+l,v=vi.pop()||new function(){ji(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=e,v.site=i,v.x=p+o,v.y=g+Math.sqrt(p*p+f*f),v.cy=g,e.circle=v;for(var b=null,y=fi._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}fi.insert(b,v),b||(pi=v)}}}}function Ti(e){var t=e.circle;t&&(t.P||(pi=t.N),fi.remove(t),vi.push(t),ji(t),e.circle=null)}function Oi(e,t){var n=e.b;if(n)return!0;var a,i,r=e.a,o=t[0][0],l=t[1][0],s=t[0][1],c=t[1][1],u=e.l,d=e.r,m=u.x,h=u.y,p=d.x,f=d.y,g=(m+p)/2,v=(h+f)/2;if(f===h){if(g<o||g>=l)return;if(m>p){if(r){if(r.y>=c)return}else r={x:g,y:s};n={x:g,y:c}}else{if(r){if(r.y<s)return}else r={x:g,y:c};n={x:g,y:s}}}else if(i=v-(a=(m-p)/(f-h))*g,a<-1||a>1)if(m>p){if(r){if(r.y>=c)return}else r={x:(s-i)/a,y:s};n={x:(c-i)/a,y:c}}else{if(r){if(r.y<s)return}else r={x:(c-i)/a,y:c};n={x:(s-i)/a,y:s}}else if(h<f){if(r){if(r.x>=l)return}else r={x:o,y:a*o+i};n={x:l,y:a*l+i}}else{if(r){if(r.x<o)return}else r={x:l,y:a*l+i};n={x:o,y:a*o+i}}return e.a=r,e.b=n,!0}function Di(e,t){this.l=e,this.r=t,this.a=this.b=null}function Ai(e,t,n,a){var i=new Di(e,t);return di.push(i),n&&Ii(i,e,t,n),a&&Ii(i,t,e,a),mi[e.i].edges.push(new Pi(i,e,t)),mi[t.i].edges.push(new Pi(i,t,e)),i}function Li(e,t,n){var a=new Di(e,null);return a.a=t,a.b=n,di.push(a),a}function Ii(e,t,n,a){e.a||e.b?e.l===n?e.b=a:e.a=a:(e.a=a,e.l=t,e.r=n)}function Pi(e,t,n){var a=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-a.x,a.y-i.y):Math.atan2(a.x-i.x,i.y-a.y)}function ki(){this._=null}function ji(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Mi(e,t){var n=t,a=t.R,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.R=a.L,n.R&&(n.R.U=n),a.L=n}function Ri(e,t){var n=t,a=t.L,i=n.U;i?i.L===n?i.L=a:i.R=a:e._=a,a.U=i,n.U=a,n.L=a.R,n.L&&(n.L.U=n),a.R=n}function Fi(e){for(;e.L;)e=e.L;return e}function Bi(e,t){var n,a,i,r=e.sort(Vi).pop();for(di=[],mi=new Array(e.length),hi=new ki,fi=new ki;;)if(i=pi,r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x))r.x===n&&r.y===a||(mi[r.i]=new Ni(r),xi(r),n=r.x,a=r.y),r=e.pop();else{if(!i)break;Ei(i.arc)}t&&(function(e){for(var t,n=di,a=oa(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Oi(t=n[i],e)||!a(t)||S(t.a.x-t.b.x)<Te&&S(t.a.y-t.b.y)<Te)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,a,i,r,o,l,s,c,u,d=e[0][0],m=e[1][0],h=e[0][1],p=e[1][1],f=mi,g=f.length;g--;)if((r=f[g])&&r.prepare())for(s=(l=r.edges).length,o=0;o<s;)a=(u=l[o].end()).x,i=u.y,t=(c=l[++o%s].start()).x,n=c.y,(S(a-t)>Te||S(i-n)>Te)&&(l.splice(o,0,new Pi(Li(r.site,u,S(a-d)<Te&&p-i>Te?{x:d,y:S(t-d)<Te?n:p}:S(i-p)<Te&&m-a>Te?{x:S(n-p)<Te?t:m,y:p}:S(a-m)<Te&&i-h>Te?{x:m,y:S(t-m)<Te?n:h}:S(i-h)<Te&&a-d>Te?{x:S(n-h)<Te?t:d,y:h}:null),r.site,null)),++s)}(t));var o={cells:mi,edges:di};return hi=fi=di=mi=null,o}function Vi(e,t){return t.y-e.y||t.x-e.x}Ni.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ci),t.length},Pi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ki.prototype={insert:function(e,t){var n,a,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Fi(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(a=n.U).L?(i=a.R)&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.R&&(Mi(this,n),n=(e=n).U),n.C=!1,a.C=!0,Ri(this,a)):(i=a.L)&&i.C?(n.C=i.C=!1,a.C=!0,e=a):(e===n.L&&(Ri(this,n),n=(e=n).U),n.C=!1,a.C=!0,Mi(this,a)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,a,i=e.U,r=e.L,o=e.R;if(n=r?o?Fi(o):r:o,i?i.L===e?i.L=n:i.R=n:this._=n,r&&o?(a=n.C,n.C=e.C,n.L=r,r.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(a=e.C,e=n),e&&(e.U=i),!a)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Mi(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ri(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Mi(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Ri(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Mi(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Ri(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},r.geom.voronoi=function(e){var t=ai,n=ii,a=t,i=n,r=Gi;if(e)return o(e);function o(e){var t=new Array(e.length),n=r[0][0],a=r[0][1],i=r[1][0],o=r[1][1];return Bi(l(e),r).cells.forEach(function(r,l){var s=r.edges,c=r.site;(t[l]=s.length?s.map(function(e){var t=e.start();return[t.x,t.y]}):c.x>=n&&c.x<=i&&c.y>=a&&c.y<=o?[[n,o],[i,o],[i,a],[n,a]]:[]).point=e[l]}),t}function l(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Te)*Te,y:Math.round(i(e,t)/Te)*Te,i:t}})}return o.links=function(e){return Bi(l(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(e){var t=[];return Bi(l(e)).cells.forEach(function(n,a){for(var i,r=n.site,o=n.edges.sort(Ci),l=-1,s=o.length,c=o[s-1].edge,u=c.l===r?c.r:c.l;++l<s;)c,i=u,u=(c=o[l].edge).l===r?c.r:c.l,a<i.i&&a<u.i&&Hi(r,i,u)<0&&t.push([e[a],e[i.i],e[u.i]])}),t},o.x=function(e){return arguments.length?(a=Et(t=e),o):t},o.y=function(e){return arguments.length?(i=Et(n=e),o):n},o.clipExtent=function(e){return arguments.length?(r=null==e?Gi:e,o):r===Gi?null:r},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):r===Gi?null:r&&r[1]},o};var Gi=[[-1e6,-1e6],[1e6,1e6]];function Hi(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function zi(e){return e.x}function qi(e){return e.y}function Wi(e,t){e=r.rgb(e),t=r.rgb(t);var n=e.r,a=e.g,i=e.b,o=t.r-n,l=t.g-a,s=t.b-i;return function(e){return"#"+ht(Math.round(n+o*e))+ht(Math.round(a+l*e))+ht(Math.round(i+s*e))}}function Ui(e,t){var n,a={},i={};for(n in e)n in t?a[n]=Zi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in a)i[n]=a[n](e);return i}}function Xi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yi(e,t){var n,a,i,r=Qi.lastIndex=Ji.lastIndex=0,o=-1,l=[],s=[];for(e+="",t+="";(n=Qi.exec(e))&&(a=Ji.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,s.push({i:o,x:Xi(n,a)})),r=Ji.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?s[0]?(t=s[0].x,function(e){return t(e)+""}):function(){return t}:(t=s.length,function(e){for(var n,a=0;a<t;++a)l[(n=s[a]).i]=n.x(e);return l.join("")})}r.geom.delaunay=function(e){return r.geom.voronoi().triangles(e)},r.geom.quadtree=function(e,t,n,a,i){var r,o=ai,l=ii;if(r=arguments.length)return o=zi,l=qi,3===r&&(i=n,a=t,n=t=0),s(e);function s(e){var s,c,u,d,m,h,p,f,g,v=Et(o),b=Et(l);if(null!=t)h=t,p=n,f=a,g=i;else if(f=g=-(h=p=1/0),c=[],u=[],m=e.length,r)for(d=0;d<m;++d)(s=e[d]).x<h&&(h=s.x),s.y<p&&(p=s.y),s.x>f&&(f=s.x),s.y>g&&(g=s.y),c.push(s.x),u.push(s.y);else for(d=0;d<m;++d){var y=+v(s=e[d],d),E=+b(s,d);y<h&&(h=y),E<p&&(p=E),y>f&&(f=y),E>g&&(g=E),c.push(y),u.push(E)}var x=f-h,w=g-p;function N(e,t,n,a,i,r,o,l){if(!isNaN(n)&&!isNaN(a))if(e.leaf){var s=e.x,c=e.y;if(null!=s)if(S(s-n)+S(c-a)<.01)C(e,t,n,a,i,r,o,l);else{var u=e.point;e.x=e.y=e.point=null,C(e,u,s,c,i,r,o,l),C(e,t,n,a,i,r,o,l)}else e.x=n,e.y=a,e.point=t}else C(e,t,n,a,i,r,o,l)}function C(e,t,n,a,i,r,o,l){var s=.5*(i+o),c=.5*(r+l),u=n>=s,d=a>=c,m=d<<1|u;e.leaf=!1,e=e.nodes[m]||(e.nodes[m]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){N(_,e,+v(e,++d),+b(e,d),h,p,f,g)}}),u?i=s:o=s,d?r=c:l=c,N(e,t,n,a,i,r,o,l)}x>w?g=p+x:f=h+w;var _={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){N(_,e,+v(e,++d),+b(e,d),h,p,f,g)}};if(_.visit=function(e){!function e(t,n,a,i,r,o){if(!t(n,a,i,r,o)){var l=.5*(a+r),s=.5*(i+o),c=n.nodes;c[0]&&e(t,c[0],a,i,l,s),c[1]&&e(t,c[1],l,i,r,s),c[2]&&e(t,c[2],a,s,l,o),c[3]&&e(t,c[3],l,s,r,o)}}(e,_,h,p,f,g)},_.find=function(e){return function(e,t,n,a,i,r,o){var l,s=1/0;return function e(c,u,d,m,h){if(!(u>r||d>o||m<a||h<i)){if(p=c.point){var p,f=t-c.x,g=n-c.y,v=f*f+g*g;if(v<s){var b=Math.sqrt(s=v);a=t-b,i=n-b,r=t+b,o=n+b,l=p}}for(var y=c.nodes,E=.5*(u+m),x=.5*(d+h),S=(n>=x)<<1|t>=E,w=S+4;S<w;++S)if(c=y[3&S])switch(3&S){case 0:e(c,u,d,E,x);break;case 1:e(c,E,d,m,x);break;case 2:e(c,u,x,E,h);break;case 3:e(c,E,x,m,h)}}}(e,a,i,r,o),l}(_,e[0],e[1],h,p,f,g)},d=-1,null==t){for(;++d<m;)N(_,e[d],c[d],u[d],h,p,f,g);--d}else e.forEach(_.add);return c=u=e=s=null,_}return s.x=function(e){return arguments.length?(o=e,s):o},s.y=function(e){return arguments.length?(l=e,s):l},s.extent=function(e){return arguments.length?(null==e?t=n=a=i=null:(t=+e[0][0],n=+e[0][1],a=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[a,i]]},s.size=function(e){return arguments.length?(null==e?t=n=a=i=null:(t=n=0,a=+e[0],i=+e[1]),s):null==t?null:[a-t,i-n]},s},r.interpolateRgb=Wi,r.interpolateObject=Ui,r.interpolateNumber=Xi,r.interpolateString=Yi;var Qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp(Qi.source,"g");function Zi(e,t){for(var n,a=r.interpolators.length;--a>=0&&!(n=r.interpolators[a](e,t)););return n}function Ki(e,t){var n,a=[],i=[],r=e.length,o=t.length,l=Math.min(e.length,t.length);for(n=0;n<l;++n)a.push(Zi(e[n],t[n]));for(;n<r;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<l;++n)i[n]=a[n](e);return i}}r.interpolate=Zi,r.interpolators=[function(e,t){var n=typeof t;return("string"===n?yt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Wi:Yi:t instanceof We?Wi:Array.isArray(t)?Ki:"object"===n&&isNaN(t)?Ui:Xi)(e,t)}],r.interpolateArray=Ki;var $i=function(){return j},er=r.map({linear:$i,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return ir},cubic:function(){return rr},sin:function(){return lr},exp:function(){return sr},circle:function(){return cr},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Ae*Math.asin(1/e):(e=1,n=t/4);return function(a){return 1+e*Math.pow(2,-10*a)*Math.sin((a-n)*Ae/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ur}}),tr=r.map({in:j,out:nr,"in-out":ar,"out-in":function(e){return ar(nr(e))}});function nr(e){return function(t){return 1-e(1-t)}}function ar(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function ir(e){return e*e}function rr(e){return e*e*e}function or(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function lr(e){return 1-Math.cos(e*Ie)}function sr(e){return Math.pow(2,10*(e-1))}function cr(e){return 1-Math.sqrt(1-e*e)}function ur(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function dr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function mr(e){var t=[e.a,e.b],n=[e.c,e.d],a=pr(t),i=hr(t,n),r=pr(function(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,a*=-1,i*=-1),this.rotate=(a?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*ke,this.translate=[e.e,e.f],this.scale=[a,r],this.skew=r?Math.atan2(i,r)*ke:0}function hr(e,t){return e[0]*t[0]+e[1]*t[1]}function pr(e){var t=Math.sqrt(hr(e,e));return t&&(e[0]/=t,e[1]/=t),t}r.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,a=t>=0?e.slice(t+1):"in";return n=er.get(n)||$i,function(e){return function(t){return t<=0?0:t>=1?1:e(t)}}((a=tr.get(a)||j)(n.apply(null,o.call(arguments,1))))},r.interpolateHcl=function(e,t){e=r.hcl(e),t=r.hcl(t);var n=e.h,a=e.c,i=e.l,o=t.h-n,l=t.c-a,s=t.l-i;isNaN(l)&&(l=0,a=isNaN(a)?t.c:a);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Ze(n+o*e,a+l*e,i+s*e)+""}},r.interpolateHsl=function(e,t){e=r.hsl(e),t=r.hsl(t);var n=e.h,a=e.s,i=e.l,o=t.h-n,l=t.s-a,s=t.l-i;isNaN(l)&&(l=0,a=isNaN(a)?t.s:a);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Ye(n+o*e,a+l*e,i+s*e)+""}},r.interpolateLab=function(e,t){e=r.lab(e),t=r.lab(t);var n=e.l,a=e.a,i=e.b,o=t.l-n,l=t.a-a,s=t.b-i;return function(e){return it(n+o*e,a+l*e,i+s*e)+""}},r.interpolateRound=dr,r.transform=function(e){var t=s.createElementNS(r.ns.prefix.svg,"g");return(r.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new mr(n?n.matrix:fr)})(e)},mr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fr={a:1,b:0,c:0,d:1,e:0,f:0};function gr(e){return e.length?e.pop()+",":""}function vr(e,t){var n=[],a=[];return e=r.transform(e),t=r.transform(t),function(e,t,n,a){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");a.push({i:i-4,x:Xi(e[0],t[0])},{i:i-2,x:Xi(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,a),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(gr(n)+"rotate(",null,")")-2,x:Xi(e,t)})):t&&n.push(gr(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,a),function(e,t,n,a){e!==t?a.push({i:n.push(gr(n)+"skewX(",null,")")-2,x:Xi(e,t)}):t&&n.push(gr(n)+"skewX("+t+")")}(e.skew,t.skew,n,a),function(e,t,n,a){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(gr(n)+"scale(",null,",",null,")");a.push({i:i-4,x:Xi(e[0],t[0])},{i:i-2,x:Xi(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(gr(n)+"scale("+t+")")}(e.scale,t.scale,n,a),e=t=null,function(e){for(var t,i=-1,r=a.length;++i<r;)n[(t=a[i]).i]=t.x(e);return n.join("")}}function br(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function yr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Er(e){for(var t=e.source,n=e.target,a=function(e,t){if(e===t)return e;var n=xr(e),a=xr(t),i=n.pop(),r=a.pop(),o=null;for(;i===r;)o=i,i=n.pop(),r=a.pop();return o}(t,n),i=[t];t!==a;)t=t.parent,i.push(t);for(var r=i.length;n!==a;)i.splice(r,0,n),n=n.parent;return i}function xr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Sr(e){e.fixed|=2}function wr(e){e.fixed&=-7}function Nr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Cr(e){e.fixed&=-5}r.interpolateTransform=vr,r.layout={},r.layout.bundle=function(){return function(e){for(var t=[],n=-1,a=e.length;++n<a;)t.push(Er(e[n]));return t}},r.layout.chord=function(){var e,t,n,a,i,o,l,s={},c=0;function u(){var s,u,m,h,p,f={},g=[],v=r.range(a),b=[];for(e=[],t=[],s=0,h=-1;++h<a;){for(u=0,p=-1;++p<a;)u+=n[h][p];g.push(u),b.push(r.range(a)),s+=u}for(i&&v.sort(function(e,t){return i(g[e],g[t])}),o&&b.forEach(function(e,t){e.sort(function(e,a){return o(n[t][e],n[t][a])})}),s=(Ae-c*a)/s,u=0,h=-1;++h<a;){for(m=u,p=-1;++p<a;){var y=v[h],E=b[y][p],x=n[y][E],S=u,w=u+=x*s;f[y+"-"+E]={index:y,subindex:E,startAngle:S,endAngle:w,value:x}}t[y]={index:y,startAngle:m,endAngle:u,value:g[y]},u+=c}for(h=-1;++h<a;)for(p=h-1;++p<a;){var N=f[h+"-"+p],C=f[p+"-"+h];(N.value||C.value)&&e.push(N.value<C.value?{source:C,target:N}:{source:N,target:C})}l&&d()}function d(){e.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}return s.matrix=function(i){return arguments.length?(a=(n=i)&&n.length,e=t=null,s):n},s.padding=function(n){return arguments.length?(c=n,e=t=null,s):c},s.sortGroups=function(n){return arguments.length?(i=n,e=t=null,s):i},s.sortSubgroups=function(t){return arguments.length?(o=t,e=null,s):o},s.sortChords=function(t){return arguments.length?(l=t,e&&d(),s):l},s.chords=function(){return e||u(),e},s.groups=function(){return t||u(),t},s},r.layout.force=function(){var e,t,n,a,i,o,l={},s=r.dispatch("start","tick","end"),c=[1,1],u=.9,d=_r,m=Tr,h=-30,p=Or,f=.1,g=.64,v=[],b=[];function y(e){return function(t,n,a,i){if(t.point!==e){var r=t.cx-e.x,o=t.cy-e.y,l=i-n,s=r*r+o*o;if(l*l/g<s){if(s<p){var c=t.charge/s;e.px-=r*c,e.py-=o*c}return!0}if(t.point&&s&&s<p){c=t.pointCharge/s;e.px-=r*c,e.py-=o*c}}return!t.charge}}function E(e){e.px=r.event.x,e.py=r.event.y,l.resume()}return l.tick=function(){if((n*=.99)<.005)return e=null,s.end({type:"end",alpha:n=0}),!0;var t,l,d,m,p,g,E,x,S,w=v.length,N=b.length;for(l=0;l<N;++l)m=(d=b[l]).source,(g=(x=(p=d.target).x-m.x)*x+(S=p.y-m.y)*S)&&(x*=g=n*i[l]*((g=Math.sqrt(g))-a[l])/g,S*=g,p.x-=x*(E=m.weight+p.weight?m.weight/(m.weight+p.weight):.5),p.y-=S*E,m.x+=x*(E=1-E),m.y+=S*E);if((E=n*f)&&(x=c[0]/2,S=c[1]/2,l=-1,E))for(;++l<w;)(d=v[l]).x+=(x-d.x)*E,d.y+=(S-d.y)*E;if(h)for(!function e(t,n,a){var i=0,r=0;t.charge=0;if(!t.leaf)for(var o,l=t.nodes,s=l.length,c=-1;++c<s;)null!=(o=l[c])&&(e(o,n,a),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=n*a[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge;t.cy=r/t.charge}(t=r.geom.quadtree(v),n,o),l=-1;++l<w;)(d=v[l]).fixed||t.visit(y(d));for(l=-1;++l<w;)(d=v[l]).fixed?(d.x=d.px,d.y=d.py):(d.x-=(d.px-(d.px=d.x))*u,d.y-=(d.py-(d.py=d.y))*u);s.tick({type:"tick",alpha:n})},l.nodes=function(e){return arguments.length?(v=e,l):v},l.links=function(e){return arguments.length?(b=e,l):b},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(d="function"===typeof e?e:+e,l):d},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(m="function"===typeof e?e:+e,l):m},l.friction=function(e){return arguments.length?(u=+e,l):u},l.charge=function(e){return arguments.length?(h="function"===typeof e?e:+e,l):h},l.chargeDistance=function(e){return arguments.length?(p=e*e,l):Math.sqrt(p)},l.gravity=function(e){return arguments.length?(f=+e,l):f},l.theta=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:n=0})):t>0&&(s.start({type:"start",alpha:n=t}),e=Ot(l.tick)),l):n},l.start=function(){var e,t,n,r=v.length,s=b.length,u=c[0],p=c[1];for(e=0;e<r;++e)(n=v[e]).index=e,n.weight=0;for(e=0;e<s;++e)"number"==typeof(n=b[e]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<r;++e)n=v[e],isNaN(n.x)&&(n.x=f("x",u)),isNaN(n.y)&&(n.y=f("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(a=[],"function"===typeof d)for(e=0;e<s;++e)a[e]=+d.call(this,b[e],e);else for(e=0;e<s;++e)a[e]=d;if(i=[],"function"===typeof m)for(e=0;e<s;++e)i[e]=+m.call(this,b[e],e);else for(e=0;e<s;++e)i[e]=m;if(o=[],"function"===typeof h)for(e=0;e<r;++e)o[e]=+h.call(this,v[e],e);else for(e=0;e<r;++e)o[e]=h;function f(n,a){if(!t){for(t=new Array(r),c=0;c<r;++c)t[c]=[];for(c=0;c<s;++c){var i=b[c];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var o,l=t[e],c=-1,u=l.length;++c<u;)if(!isNaN(o=l[c][n]))return o;return Math.random()*a}return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(t||(t=r.behavior.drag().origin(j).on("dragstart.force",Sr).on("drag.force",E).on("dragend.force",wr)),!arguments.length)return t;this.on("mouseover.force",Nr).on("mouseout.force",Cr).call(t)},r.rebind(l,s,"on")};var _r=20,Tr=1,Or=1/0;function Dr(e,t){return r.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=jr,e}function Ar(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(a=i.length))for(var a,i;--a>=0;)n.push(i[a])}function Lr(e,t){for(var n=[e],a=[];null!=(e=n.pop());)if(a.push(e),(r=e.children)&&(i=r.length))for(var i,r,o=-1;++o<i;)n.push(r[o]);for(;null!=(e=a.pop());)t(e)}function Ir(e){return e.children}function Pr(e){return e.value}function kr(e,t){return t.value-e.value}function jr(e){return r.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}r.layout.hierarchy=function(){var e=kr,t=Ir,n=Pr;function a(i){var r,o=[i],l=[];for(i.depth=0;null!=(r=o.pop());)if(l.push(r),(c=t.call(a,r,r.depth))&&(s=c.length)){for(var s,c,u;--s>=0;)o.push(u=c[s]),u.parent=r,u.depth=r.depth+1;n&&(r.value=0),r.children=c}else n&&(r.value=+n.call(a,r,r.depth)||0),delete r.children;return Lr(i,function(t){var a,i;e&&(a=t.children)&&a.sort(e),n&&(i=t.parent)&&(i.value+=t.value)}),l}return a.sort=function(t){return arguments.length?(e=t,a):e},a.children=function(e){return arguments.length?(t=e,a):t},a.value=function(e){return arguments.length?(n=e,a):n},a.revalue=function(e){return n&&(Ar(e,function(e){e.children&&(e.value=0)}),Lr(e,function(e){var t;e.children||(e.value=+n.call(a,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)})),e},a},r.layout.partition=function(){var e=r.layout.hierarchy(),t=[1,1];function n(n,a){var i=e.call(this,n,a);return function e(t,n,a,i){var r=t.children;if(t.x=n,t.y=t.depth*i,t.dx=a,t.dy=i,r&&(o=r.length)){var o,l,s,c=-1;for(a=t.value?a/t.value:0;++c<o;)e(l=r[c],n,s=l.value*a,i),n+=s}}(i[0],0,t[0],t[1]/function e(t){var n=t.children,a=0;if(n&&(i=n.length))for(var i,r=-1;++r<i;)a=Math.max(a,e(n[r]));return 1+a}(i[0])),i}return n.size=function(e){return arguments.length?(t=e,n):t},Dr(n,e)},r.layout.pie=function(){var e=Number,t=Mr,n=0,a=Ae,i=0;function o(l){var s,c=l.length,u=l.map(function(t,n){return+e.call(o,t,n)}),d=+("function"===typeof n?n.apply(this,arguments):n),m=("function"===typeof a?a.apply(this,arguments):a)-d,h=Math.min(Math.abs(m)/c,+("function"===typeof i?i.apply(this,arguments):i)),p=h*(m<0?-1:1),f=r.sum(u),g=f?(m-c*p)/f:0,v=r.range(c),b=[];return null!=t&&v.sort(t===Mr?function(e,t){return u[t]-u[e]}:function(e,n){return t(l[e],l[n])}),v.forEach(function(e){b[e]={data:l[e],value:s=u[e],startAngle:d,endAngle:d+=s*g+p,padAngle:h}}),b}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(a=e,o):a},o.padAngle=function(e){return arguments.length?(i=e,o):i},o};var Mr={};function Rr(e){return e.x}function Fr(e){return e.y}function Br(e,t,n){e.y0=t,e.y=n}r.layout.stack=function(){var e=j,t=Hr,n=zr,a=Br,i=Rr,o=Fr;function l(s,c){if(!(h=s.length))return s;var u=s.map(function(t,n){return e.call(l,t,n)}),d=u.map(function(e){return e.map(function(e,t){return[i.call(l,e,t),o.call(l,e,t)]})}),m=t.call(l,d,c);u=r.permute(u,m),d=r.permute(d,m);var h,p,f,g,v=n.call(l,d,c),b=u[0].length;for(f=0;f<b;++f)for(a.call(l,u[0][f],g=v[f],d[0][f][1]),p=1;p<h;++p)a.call(l,u[p][f],g+=d[p-1][f][1],d[p][f][1]);return s}return l.values=function(t){return arguments.length?(e=t,l):e},l.order=function(e){return arguments.length?(t="function"===typeof e?e:Vr.get(e)||Hr,l):t},l.offset=function(e){return arguments.length?(n="function"===typeof e?e:Gr.get(e)||zr,l):n},l.x=function(e){return arguments.length?(i=e,l):i},l.y=function(e){return arguments.length?(o=e,l):o},l.out=function(e){return arguments.length?(a=e,l):a},l};var Vr=r.map({"inside-out":function(e){var t,n,a=e.length,i=e.map(qr),o=e.map(Wr),l=r.range(a).sort(function(e,t){return i[e]-i[t]}),s=0,c=0,u=[],d=[];for(t=0;t<a;++t)n=l[t],s<c?(s+=o[n],u.push(n)):(c+=o[n],d.push(n));return d.reverse().concat(u)},reverse:function(e){return r.range(e.length).reverse()},default:Hr}),Gr=r.map({silhouette:function(e){var t,n,a,i=e.length,r=e[0].length,o=[],l=0,s=[];for(n=0;n<r;++n){for(t=0,a=0;t<i;t++)a+=e[t][n][1];a>l&&(l=a),o.push(a)}for(n=0;n<r;++n)s[n]=(l-o[n])/2;return s},wiggle:function(e){var t,n,a,i,r,o,l,s,c,u=e.length,d=e[0],m=d.length,h=[];for(h[0]=s=c=0,n=1;n<m;++n){for(t=0,i=0;t<u;++t)i+=e[t][n][1];for(t=0,r=0,l=d[n][0]-d[n-1][0];t<u;++t){for(a=0,o=(e[t][n][1]-e[t][n-1][1])/(2*l);a<t;++a)o+=(e[a][n][1]-e[a][n-1][1])/l;r+=o*e[t][n][1]}h[n]=s-=i?r/i*l:0,s<c&&(c=s)}for(n=0;n<m;++n)h[n]-=c;return h},expand:function(e){var t,n,a,i=e.length,r=e[0].length,o=1/i,l=[];for(n=0;n<r;++n){for(t=0,a=0;t<i;t++)a+=e[t][n][1];if(a)for(t=0;t<i;t++)e[t][n][1]/=a;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<r;++n)l[n]=0;return l},zero:zr});function Hr(e){return r.range(e.length)}function zr(e){for(var t=-1,n=e[0].length,a=[];++t<n;)a[t]=0;return a}function qr(e){for(var t,n=1,a=0,i=e[0][1],r=e.length;n<r;++n)(t=e[n][1])>i&&(a=n,i=t);return a}function Wr(e){return e.reduce(Ur,0)}function Ur(e,t){return e+t[1]}function Xr(e,t){return Yr(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Yr(e,t){for(var n=-1,a=+e[0],i=(e[1]-a)/t,r=[];++n<=t;)r[n]=i*n+a;return r}function Qr(e){return[r.min(e),r.max(e)]}function Jr(e,t){return e.value-t.value}function Zr(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Kr(e,t){e._pack_next=t,t._pack_prev=e}function $r(e,t){var n=t.x-e.x,a=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+a*a}function eo(e){if((t=e.children)&&(s=t.length)){var t,n,a,i,r,o,l,s,c=1/0,u=-1/0,d=1/0,m=-1/0;if(t.forEach(to),(n=t[0]).x=-n.r,n.y=0,y(n),s>1&&((a=t[1]).x=a.r,a.y=0,y(a),s>2))for(ao(n,a,i=t[2]),y(i),Zr(n,i),n._pack_prev=i,Zr(i,a),a=n._pack_next,r=3;r<s;r++){ao(n,a,i=t[r]);var h=0,p=1,f=1;for(o=a._pack_next;o!==a;o=o._pack_next,p++)if($r(o,i)){h=1;break}if(1==h)for(l=n._pack_prev;l!==o._pack_prev&&!$r(l,i);l=l._pack_prev,f++);h?(p<f||p==f&&a.r<n.r?Kr(n,a=o):Kr(n=l,a),r--):(Zr(n,i),a=i,y(i))}var g=(c+u)/2,v=(d+m)/2,b=0;for(r=0;r<s;r++)(i=t[r]).x-=g,i.y-=v,b=Math.max(b,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=b,t.forEach(no)}function y(e){c=Math.min(e.x-e.r,c),u=Math.max(e.x+e.r,u),d=Math.min(e.y-e.r,d),m=Math.max(e.y+e.r,m)}}function to(e){e._pack_next=e._pack_prev=e}function no(e){delete e._pack_next,delete e._pack_prev}function ao(e,t,n){var a=e.r+n.r,i=t.x-e.x,r=t.y-e.y;if(a&&(i||r)){var o=t.r+n.r,l=i*i+r*r,s=.5+((a*=a)-(o*=o))/(2*l),c=Math.sqrt(Math.max(0,2*o*(a+l)-(a-=l)*a-o*o))/(2*l);n.x=e.x+s*i+c*r,n.y=e.y+s*r-c*i}else n.x=e.x+a,n.y=e.y}function io(e,t){return e.parent==t.parent?1:2}function ro(e){var t=e.children;return t.length?t[0]:e.t}function oo(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function lo(e,t,n){var a=n/(t.i-e.i);t.c-=a,t.s+=n,e.c+=a,t.z+=n,t.m+=n}function so(e,t,n){return e.a.parent===t.parent?e.a:n}function co(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function uo(e,t){var n=e.x+t[3],a=e.y+t[0],i=e.dx-t[1]-t[3],r=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),r<0&&(a+=r/2,r=0),{x:n,y:a,dx:i,dy:r}}function mo(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function ho(e){return e.rangeExtent?e.rangeExtent():mo(e.range())}function po(e,t,n,a){var i=n(e[0],e[1]),r=a(t[0],t[1]);return function(e){return r(i(e))}}function fo(e,t){var n,a=0,i=e.length-1,r=e[a],o=e[i];return o<r&&(n=a,a=i,i=n,n=r,r=o,o=n),e[a]=t.floor(r),e[i]=t.ceil(o),e}function go(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:vo}r.layout.histogram=function(){var e=!0,t=Number,n=Qr,a=Xr;function i(i,o){for(var l,s,c=[],u=i.map(t,this),d=n.call(this,u,o),m=a.call(this,d,u,o),h=(o=-1,u.length),p=m.length-1,f=e?1:1/h;++o<p;)(l=c[o]=[]).dx=m[o+1]-(l.x=m[o]),l.y=0;if(p>0)for(o=-1;++o<h;)(s=u[o])>=d[0]&&s<=d[1]&&((l=c[r.bisect(m,s,1,p)-1]).y+=f,l.push(i[o]));return c}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=Et(e),i):n},i.bins=function(e){return arguments.length?(a="number"===typeof e?function(t){return Yr(t,e)}:Et(e),i):a},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},r.layout.pack=function(){var e,t=r.layout.hierarchy().sort(Jr),n=0,a=[1,1];function i(i,r){var o=t.call(this,i,r),l=o[0],s=a[0],c=a[1],u=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};if(l.x=l.y=0,Lr(l,function(e){e.r=+u(e.value)}),Lr(l,eo),n){var d=n*(e?1:Math.max(2*l.r/s,2*l.r/c))/2;Lr(l,function(e){e.r+=d}),Lr(l,eo),Lr(l,function(e){e.r-=d})}return function e(t,n,a,i){var r=t.children;t.x=n+=i*t.x;t.y=a+=i*t.y;t.r*=i;if(r)for(var o=-1,l=r.length;++o<l;)e(r[o],n,a,i)}(l,s/2,c/2,e?1:1/Math.max(2*l.r/s,2*l.r/c)),o}return i.size=function(e){return arguments.length?(a=e,i):a},i.radius=function(t){return arguments.length?(e=null==t||"function"===typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},Dr(i,t)},r.layout.tree=function(){var e=r.layout.hierarchy().sort(null).value(null),t=io,n=[1,1],a=null;function i(i,r){var c=e.call(this,i,r),u=c[0],d=function(e){var t,n={A:null,children:[e]},a=[n];for(;null!=(t=a.pop());)for(var i,r=t.children,o=0,l=r.length;o<l;++o)a.push((r[o]=i={_:r[o],parent:t,children:(i=r[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(u);if(Lr(d,o),d.parent.m=-d.z,Ar(d,l),a)Ar(u,s);else{var m=u,h=u,p=u;Ar(u,function(e){e.x<m.x&&(m=e),e.x>h.x&&(h=e),e.depth>p.depth&&(p=e)});var f=t(m,h)/2-m.x,g=n[0]/(h.x+t(h,m)/2+f),v=n[1]/(p.depth||1);Ar(u,function(e){e.x=(e.x+f)*g,e.y=e.depth*v})}return c}function o(e){var n=e.children,a=e.parent.children,i=e.i?a[e.i-1]:null;if(n.length){!function(e){var t,n=0,a=0,i=e.children,r=i.length;for(;--r>=0;)(t=i[r]).z+=n,t.m+=n,n+=t.s+(a+=t.c)}(e);var r=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-r):e.z=r}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,a){if(n){for(var i,r=e,o=e,l=n,s=r.parent.children[0],c=r.m,u=o.m,d=l.m,m=s.m;l=oo(l),r=ro(r),l&&r;)s=ro(s),(o=oo(o)).a=e,(i=l.z+d-r.z-c+t(l._,r._))>0&&(lo(so(l,e,a),e,i),c+=i,u+=i),d+=l.m,c+=r.m,m+=s.m,u+=o.m;l&&!oo(o)&&(o.t=l,o.m+=d-u),r&&!ro(s)&&(s.t=r,s.m+=c-m,a=e)}return a}(e,i,e.parent.A||a[0])}function l(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(a=null==(n=e)?s:null,i):a?null:n},i.nodeSize=function(e){return arguments.length?(a=null==(n=e)?null:s,i):a?n:null},Dr(i,e)},r.layout.cluster=function(){var e=r.layout.hierarchy().sort(null).value(null),t=io,n=[1,1],a=!1;function i(i,o){var l,s=e.call(this,i,o),c=s[0],u=0;Lr(c,function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}(n),e.y=function(e){return 1+r.max(e,function(e){return e.y})}(n)):(e.x=l?u+=t(e,l):0,e.y=0,l=e)});var d=function e(t){var n=t.children;return n&&n.length?e(n[0]):t}(c),m=function e(t){var n,a=t.children;return a&&(n=a.length)?e(a[n-1]):t}(c),h=d.x-t(d,m)/2,p=m.x+t(m,d)/2;return Lr(c,a?function(e){e.x=(e.x-c.x)*n[0],e.y=(c.y-e.y)*n[1]}:function(e){e.x=(e.x-h)/(p-h)*n[0],e.y=(1-(c.y?e.y/c.y:1))*n[1]}),s}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(a=null==(n=e),i):a?null:n},i.nodeSize=function(e){return arguments.length?(a=null!=(n=e),i):a?n:null},Dr(i,e)},r.layout.treemap=function(){var e,t=r.layout.hierarchy(),n=Math.round,a=[1,1],i=null,o=co,l=!1,s="squarify",c=.5*(1+Math.sqrt(5));function u(e,t){for(var n,a,i=-1,r=e.length;++i<r;)a=(n=e[i]).value*(t<0?0:t),n.area=isNaN(a)||a<=0?0:a}function d(e){var t=e.children;if(t&&t.length){var n,a,i,r=o(e),l=[],c=t.slice(),m=1/0,f="slice"===s?r.dx:"dice"===s?r.dy:"slice-dice"===s?1&e.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(u(c,r.dx*r.dy/e.value),l.area=0;(i=c.length)>0;)l.push(n=c[i-1]),l.area+=n.area,"squarify"!==s||(a=h(l,f))<=m?(c.pop(),m=a):(l.area-=l.pop().area,p(l,f,r,!1),f=Math.min(r.dx,r.dy),l.length=l.area=0,m=1/0);l.length&&(p(l,f,r,!0),l.length=l.area=0),t.forEach(d)}}function m(e){var t=e.children;if(t&&t.length){var n,a=o(e),i=t.slice(),r=[];for(u(i,a.dx*a.dy/e.value),r.area=0;n=i.pop();)r.push(n),r.area+=n.area,null!=n.z&&(p(r,n.z?a.dx:a.dy,a,!i.length),r.length=r.area=0);t.forEach(m)}}function h(e,t){for(var n,a=e.area,i=0,r=1/0,o=-1,l=e.length;++o<l;)(n=e[o].area)&&(n<r&&(r=n),n>i&&(i=n));return t*=t,(a*=a)?Math.max(t*i*c/a,a/(t*r*c)):1/0}function p(e,t,a,i){var r,o=-1,l=e.length,s=a.x,c=a.y,u=t?n(e.area/t):0;if(t==a.dx){for((i||u>a.dy)&&(u=a.dy);++o<l;)(r=e[o]).x=s,r.y=c,r.dy=u,s+=r.dx=Math.min(a.x+a.dx-s,u?n(r.area/u):0);r.z=!0,r.dx+=a.x+a.dx-s,a.y+=u,a.dy-=u}else{for((i||u>a.dx)&&(u=a.dx);++o<l;)(r=e[o]).x=s,r.y=c,r.dx=u,c+=r.dy=Math.min(a.y+a.dy-c,u?n(r.area/u):0);r.z=!1,r.dy+=a.y+a.dy-c,a.x+=u,a.dx-=u}}function f(n){var i=e||t(n),r=i[0];return r.x=r.y=0,r.value?(r.dx=a[0],r.dy=a[1]):r.dx=r.dy=0,e&&t.revalue(r),u([r],r.dx*r.dy/r.value),(e?m:d)(r),l&&(e=i),i}return f.size=function(e){return arguments.length?(a=e,f):a},f.padding=function(e){if(!arguments.length)return i;function t(t){return uo(t,e)}var n;return o=null==(i=e)?co:"function"===(n=typeof e)?function(t){var n=e.call(f,t,t.depth);return null==n?co(t):uo(t,"number"===typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,f},f.round=function(e){return arguments.length?(n=e?Math.round:Number,f):n!=Number},f.sticky=function(t){return arguments.length?(l=t,e=null,f):l},f.ratio=function(e){return arguments.length?(c=e,f):c},f.mode=function(e){return arguments.length?(s=e+"",f):s},Dr(f,t)},r.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,a,i;do{i=(n=2*Math.random()-1)*n+(a=2*Math.random()-1)*a}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=r.random.normal.apply(r,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=r.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},r.scale={};var vo={floor:j,ceil:j};function bo(e,t,n,a){var i=[],o=[],l=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<=s;)i.push(n(e[l-1],e[l])),o.push(a(t[l-1],t[l]));return function(t){var n=r.bisect(e,t,1,s)-1;return o[n](i[n](t))}}function yo(e,t){return r.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Eo(e,t){return fo(e,go(xo(e,t)[2])),fo(e,go(xo(e,t)[2])),e}function xo(e,t){null==t&&(t=10);var n=mo(e),a=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(a/t)/Math.LN10)),r=t/a*i;return r<=.15?i*=10:r<=.35?i*=5:r<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function So(e,t){return r.range.apply(r,xo(e,t))}function wo(e,t,n){var a=xo(e,t);if(n){var i=kt.exec(n);if(i.shift(),"s"===i[8]){var o=r.formatPrefix(Math.max(S(a[0]),S(a[1])));return i[7]||(i[7]="."+Co(o.scale(a[2]))),i[8]="f",n=r.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+function(e,t){var n=Co(t[2]);return e in No?Math.abs(n-Co(Math.max(S(t[0]),S(t[1]))))+ +("e"!==e):n-2*("%"===e)}(i[8],a)),n=i.join("")}else n=",."+Co(a[2])+"f";return r.format(n)}r.scale.linear=function(){return function e(t,n,a,i){var r,o;function l(){var e=Math.min(t.length,n.length)>2?bo:po,l=i?yr:br;return r=e(t,n,l,a),o=e(n,t,l,Zi),s}function s(e){return r(e)}s.invert=function(e){return o(e)};s.domain=function(e){return arguments.length?(t=e.map(Number),l()):t};s.range=function(e){return arguments.length?(n=e,l()):n};s.rangeRound=function(e){return s.range(e).interpolate(dr)};s.clamp=function(e){return arguments.length?(i=e,l()):i};s.interpolate=function(e){return arguments.length?(a=e,l()):a};s.ticks=function(e){return So(t,e)};s.tickFormat=function(e,n){return wo(t,e,n)};s.nice=function(e){return Eo(t,e),l()};s.copy=function(){return e(t,n,a,i)};return l()}([0,1],[0,1],Zi,!1)};var No={s:1,g:1,p:1,r:1,e:1};function Co(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}r.scale.log=function(){return function e(t,n,a,i){function o(e){return(a?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(n)}function l(e){return a?Math.pow(n,e):-Math.pow(n,-e)}function s(e){return t(o(e))}s.invert=function(e){return l(t.invert(e))};s.domain=function(e){return arguments.length?(a=e[0]>=0,t.domain((i=e.map(Number)).map(o)),s):i};s.base=function(e){return arguments.length?(n=+e,t.domain(i.map(o)),s):n};s.nice=function(){var e=fo(i.map(o),a?Math:To);return t.domain(e),i=e.map(l),s};s.ticks=function(){var e=mo(i),t=[],r=e[0],s=e[1],c=Math.floor(o(r)),u=Math.ceil(o(s)),d=n%1?2:n;if(isFinite(u-c)){if(a){for(;c<u;c++)for(var m=1;m<d;m++)t.push(l(c)*m);t.push(l(c))}else for(t.push(l(c));c++<u;)for(var m=d-1;m>0;m--)t.push(l(c)*m);for(c=0;t[c]<r;c++);for(u=t.length;t[u-1]>s;u--);t=t.slice(c,u)}return t};s.tickFormat=function(e,t){if(!arguments.length)return _o;arguments.length<2?t=_o:"function"!==typeof t&&(t=r.format(t));var a=Math.max(1,n*e/s.ticks().length);return function(e){var i=e/l(Math.round(o(e)));return i*n<n-.5&&(i*=n),i<=a?t(e):""}};s.copy=function(){return e(t.copy(),n,a,i)};return yo(s,t)}(r.scale.linear().domain([0,1]),10,!0,[1,10])};var _o=r.format(".0e"),To={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Oo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}r.scale.pow=function(){return function e(t,n,a){var i=Oo(n),r=Oo(1/n);function o(e){return t(i(e))}o.invert=function(e){return r(t.invert(e))};o.domain=function(e){return arguments.length?(t.domain((a=e.map(Number)).map(i)),o):a};o.ticks=function(e){return So(a,e)};o.tickFormat=function(e,t){return wo(a,e,t)};o.nice=function(e){return o.domain(Eo(a,e))};o.exponent=function(e){return arguments.length?(i=Oo(n=e),r=Oo(1/n),t.domain(a.map(i)),o):n};o.copy=function(){return e(t.copy(),n,a)};return yo(o,t)}(r.scale.linear(),1,[0,1])},r.scale.sqrt=function(){return r.scale.pow().exponent(.5)},r.scale.ordinal=function(){return function e(t,n){var a,i,o;function l(e){return i[((a.get(e)||("range"===n.t?a.set(e,t.push(e)):NaN))-1)%i.length]}function s(e,n){return r.range(t.length).map(function(t){return e+n*t})}l.domain=function(e){if(!arguments.length)return t;t=[],a=new N;for(var i,r=-1,o=e.length;++r<o;)a.has(i=e[r])||a.set(i,t.push(i));return l[n.t].apply(l,n.a)};l.range=function(e){return arguments.length?(i=e,o=0,n={t:"range",a:arguments},l):i};l.rangePoints=function(e,a){arguments.length<2&&(a=0);var r=e[0],c=e[1],u=t.length<2?(r=(r+c)/2,0):(c-r)/(t.length-1+a);return i=s(r+u*a/2,u),o=0,n={t:"rangePoints",a:arguments},l};l.rangeRoundPoints=function(e,a){arguments.length<2&&(a=0);var r=e[0],c=e[1],u=t.length<2?(r=c=Math.round((r+c)/2),0):(c-r)/(t.length-1+a)|0;return i=s(r+Math.round(u*a/2+(c-r-(t.length-1+a)*u)/2),u),o=0,n={t:"rangeRoundPoints",a:arguments},l};l.rangeBands=function(e,a,r){arguments.length<2&&(a=0),arguments.length<3&&(r=a);var c=e[1]<e[0],u=e[c-0],d=e[1-c],m=(d-u)/(t.length-a+2*r);return i=s(u+m*r,m),c&&i.reverse(),o=m*(1-a),n={t:"rangeBands",a:arguments},l};l.rangeRoundBands=function(e,a,r){arguments.length<2&&(a=0),arguments.length<3&&(r=a);var c=e[1]<e[0],u=e[c-0],d=e[1-c],m=Math.floor((d-u)/(t.length-a+2*r));return i=s(u+Math.round((d-u-(t.length-a)*m)/2),m),c&&i.reverse(),o=Math.round(m*(1-a)),n={t:"rangeRoundBands",a:arguments},l};l.rangeBand=function(){return o};l.rangeExtent=function(){return mo(n.a[0])};l.copy=function(){return e(t,n)};return l.domain(t)}([],{t:"range",a:[[]]})},r.scale.category10=function(){return r.scale.ordinal().range(Do)},r.scale.category20=function(){return r.scale.ordinal().range(Ao)},r.scale.category20b=function(){return r.scale.ordinal().range(Lo)},r.scale.category20c=function(){return r.scale.ordinal().range(Io)};var Do=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dt),Ao=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dt),Lo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dt),Io=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dt);function Po(){return 0}r.scale.quantile=function(){return function e(t,n){var a;function i(){var e=0,i=n.length;for(a=[];++e<i;)a[e-1]=r.quantile(t,e/i);return o}function o(e){if(!isNaN(e=+e))return n[r.bisect(a,e)]}o.domain=function(e){return arguments.length?(t=e.map(v).filter(b).sort(g),i()):t};o.range=function(e){return arguments.length?(n=e,i()):n};o.quantiles=function(){return a};o.invertExtent=function(e){return(e=n.indexOf(e))<0?[NaN,NaN]:[e>0?a[e-1]:t[0],e<a.length?a[e]:t[t.length-1]]};o.copy=function(){return e(t,n)};return i()}([],[])},r.scale.quantize=function(){return function e(t,n,a){var i,r;function o(e){return a[Math.max(0,Math.min(r,Math.floor(i*(e-t))))]}function l(){return i=a.length/(n-t),r=a.length-1,o}o.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],l()):[t,n]};o.range=function(e){return arguments.length?(a=e,l()):a};o.invertExtent=function(e){return[e=(e=a.indexOf(e))<0?NaN:e/i+t,e+1/i]};o.copy=function(){return e(t,n,a)};return l()}(0,1,[0,1])},r.scale.threshold=function(){return function e(t,n){function a(e){if(e<=e)return n[r.bisect(t,e)]}a.domain=function(e){return arguments.length?(t=e,a):t};a.range=function(e){return arguments.length?(n=e,a):n};a.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]};a.copy=function(){return e(t,n)};return a}([.5],[0,1])},r.scale.identity=function(){return function e(t){function n(e){return+e}n.invert=n;n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t};n.ticks=function(e){return So(t,e)};n.tickFormat=function(e,n){return wo(t,e,n)};n.copy=function(){return e(t)};return n}([0,1])},r.svg={},r.svg.arc=function(){var e=jo,t=Mo,n=Po,a=ko,i=Ro,r=Fo,o=Bo;function l(){var l=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+t.apply(this,arguments)),u=i.apply(this,arguments)-Ie,d=r.apply(this,arguments)-Ie,m=Math.abs(d-u),h=u>d?0:1;if(c<l&&(p=c,c=l,l=p),m>=Le)return s(c,h)+(l?s(l,1-h):"")+"Z";var p,f,g,v,b,y,E,x,S,w,N,C,_=0,T=0,O=[];if((v=(+o.apply(this,arguments)||0)/2)&&(g=a===ko?Math.sqrt(l*l+c*c):+a.apply(this,arguments),h||(T*=-1),c&&(T=Fe(g/c*Math.sin(v))),l&&(_=Fe(g/l*Math.sin(v)))),c){b=c*Math.cos(u+T),y=c*Math.sin(u+T),E=c*Math.cos(d-T),x=c*Math.sin(d-T);var D=Math.abs(d-u-2*T)<=De?0:1;if(T&&Vo(b,y,E,x)===h^D){var A=(u+d)/2;b=c*Math.cos(A),y=c*Math.sin(A),E=x=null}}else b=y=0;if(l){S=l*Math.cos(d-_),w=l*Math.sin(d-_),N=l*Math.cos(u+_),C=l*Math.sin(u+_);var L=Math.abs(u-d+2*_)<=De?0:1;if(_&&Vo(S,w,N,C)===1-h^L){var I=(u+d)/2;S=l*Math.cos(I),w=l*Math.sin(I),N=C=null}}else S=w=0;if(m>Te&&(p=Math.min(Math.abs(c-l)/2,+n.apply(this,arguments)))>.001){f=l<c^h?0:1;var P=p,k=p;if(m<De){var j=null==N?[S,w]:null==E?[b,y]:ci([b,y],[N,C],[E,x],[S,w]),M=b-j[0],R=y-j[1],F=E-j[0],B=x-j[1],V=1/Math.sin(Math.acos((M*F+R*B)/(Math.sqrt(M*M+R*R)*Math.sqrt(F*F+B*B)))/2),G=Math.sqrt(j[0]*j[0]+j[1]*j[1]);k=Math.min(p,(l-G)/(V-1)),P=Math.min(p,(c-G)/(V+1))}if(null!=E){var H=Go(null==N?[S,w]:[N,C],[b,y],c,P,h),z=Go([E,x],[S,w],c,P,h);p===P?O.push("M",H[0],"A",P,",",P," 0 0,",f," ",H[1],"A",c,",",c," 0 ",1-h^Vo(H[1][0],H[1][1],z[1][0],z[1][1]),",",h," ",z[1],"A",P,",",P," 0 0,",f," ",z[0]):O.push("M",H[0],"A",P,",",P," 0 1,",f," ",z[0])}else O.push("M",b,",",y);if(null!=N){var q=Go([b,y],[N,C],l,-k,h),W=Go([S,w],null==E?[b,y]:[E,x],l,-k,h);p===k?O.push("L",W[0],"A",k,",",k," 0 0,",f," ",W[1],"A",l,",",l," 0 ",h^Vo(W[1][0],W[1][1],q[1][0],q[1][1]),",",1-h," ",q[1],"A",k,",",k," 0 0,",f," ",q[0]):O.push("L",W[0],"A",k,",",k," 0 0,",f," ",q[0])}else O.push("L",S,",",w)}else O.push("M",b,",",y),null!=E&&O.push("A",c,",",c," 0 ",D,",",h," ",E,",",x),O.push("L",S,",",w),null!=N&&O.push("A",l,",",l," 0 ",L,",",1-h," ",N,",",C);return O.push("Z"),O.join("")}function s(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return l.innerRadius=function(t){return arguments.length?(e=Et(t),l):e},l.outerRadius=function(e){return arguments.length?(t=Et(e),l):t},l.cornerRadius=function(e){return arguments.length?(n=Et(e),l):n},l.padRadius=function(e){return arguments.length?(a=e==ko?ko:Et(e),l):a},l.startAngle=function(e){return arguments.length?(i=Et(e),l):i},l.endAngle=function(e){return arguments.length?(r=Et(e),l):r},l.padAngle=function(e){return arguments.length?(o=Et(e),l):o},l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,a=(+i.apply(this,arguments)+ +r.apply(this,arguments))/2-Ie;return[Math.cos(a)*n,Math.sin(a)*n]},l};var ko="auto";function jo(e){return e.innerRadius}function Mo(e){return e.outerRadius}function Ro(e){return e.startAngle}function Fo(e){return e.endAngle}function Bo(e){return e&&e.padAngle}function Vo(e,t,n,a){return(e-n)*t-(t-a)*e>0?0:1}function Go(e,t,n,a,i){var r=e[0]-t[0],o=e[1]-t[1],l=(i?a:-a)/Math.sqrt(r*r+o*o),s=l*o,c=-l*r,u=e[0]+s,d=e[1]+c,m=t[0]+s,h=t[1]+c,p=(u+m)/2,f=(d+h)/2,g=m-u,v=h-d,b=g*g+v*v,y=n-a,E=u*h-m*d,x=(v<0?-1:1)*Math.sqrt(Math.max(0,y*y*b-E*E)),S=(E*v-g*x)/b,w=(-E*g-v*x)/b,N=(E*v+g*x)/b,C=(-E*g+v*x)/b,_=S-p,T=w-f,O=N-p,D=C-f;return _*_+T*T>O*O+D*D&&(S=N,w=C),[[S-s,w-c],[S*n/y,w*n/y]]}function Ho(e){var t=ai,n=ii,a=Zn,i=qo,r=i.key,o=.7;function l(r){var l,s=[],c=[],u=-1,d=r.length,m=Et(t),h=Et(n);function p(){s.push("M",i(e(c),o))}for(;++u<d;)a.call(this,l=r[u],u)?c.push([+m.call(this,l,u),+h.call(this,l,u)]):c.length&&(p(),c=[]);return c.length&&p(),s.length?s.join(""):null}return l.x=function(e){return arguments.length?(t=e,l):t},l.y=function(e){return arguments.length?(n=e,l):n},l.defined=function(e){return arguments.length?(a=e,l):a},l.interpolate=function(e){return arguments.length?(r="function"===typeof e?i=e:(i=zo.get(e)||qo).key,l):r},l.tension=function(e){return arguments.length?(o=e,l):o},l}r.svg.line=function(){return Ho(j)};var zo=r.map({linear:qo,"linear-closed":Wo,step:function(e){var t=0,n=e.length,a=e[0],i=[a[0],",",a[1]];for(;++t<n;)i.push("H",(a[0]+(a=e[t])[0])/2,"V",a[1]);n>1&&i.push("H",a[0]);return i.join("")},"step-before":Uo,"step-after":Xo,basis:Jo,"basis-open":function(e){if(e.length<4)return qo(e);var t,n=[],a=-1,i=e.length,r=[0],o=[0];for(;++a<3;)t=e[a],r.push(t[0]),o.push(t[1]);n.push(Zo(el,r)+","+Zo(el,o)),--a;for(;++a<i;)t=e[a],r.shift(),r.push(t[0]),o.shift(),o.push(t[1]),tl(n,r,o);return n.join("")},"basis-closed":function(e){var t,n,a=-1,i=e.length,r=i+4,o=[],l=[];for(;++a<4;)n=e[a%i],o.push(n[0]),l.push(n[1]);t=[Zo(el,o),",",Zo(el,l)],--a;for(;++a<r;)n=e[a%i],o.shift(),o.push(n[0]),l.shift(),l.push(n[1]),tl(t,o,l);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var a,i,r=e[0][0],o=e[0][1],l=e[n][0]-r,s=e[n][1]-o,c=-1;++c<=n;)a=e[c],i=c/n,a[0]=t*a[0]+(1-t)*(r+i*l),a[1]=t*a[1]+(1-t)*(o+i*s);return Jo(e)},cardinal:function(e,t){return e.length<3?qo(e):e[0]+Yo(e,Qo(e,t))},"cardinal-open":function(e,t){return e.length<4?qo(e):e[1]+Yo(e.slice(1,-1),Qo(e,t))},"cardinal-closed":function(e,t){return e.length<3?Wo(e):e[0]+Yo((e.push(e[0]),e),Qo([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?qo(e):e[0]+Yo(e,function(e){var t,n,a,i,r=[],o=function(e){var t=0,n=e.length-1,a=[],i=e[0],r=e[1],o=a[0]=nl(i,r);for(;++t<n;)a[t]=(o+(o=nl(i=r,r=e[t+1])))/2;return a[t]=o,a}(e),l=-1,s=e.length-1;for(;++l<s;)t=nl(e[l],e[l+1]),S(t)<Te?o[l]=o[l+1]=0:(n=o[l]/t,a=o[l+1]/t,(i=n*n+a*a)>9&&(i=3*t/Math.sqrt(i),o[l]=i*n,o[l+1]=i*a));l=-1;for(;++l<=s;)i=(e[Math.min(s,l+1)][0]-e[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l])),r.push([i||0,o[l]*i||0]);return r}(e))}});function qo(e){return e.length>1?e.join("L"):e+"Z"}function Wo(e){return e.join("L")+"Z"}function Uo(e){for(var t=0,n=e.length,a=e[0],i=[a[0],",",a[1]];++t<n;)i.push("V",(a=e[t])[1],"H",a[0]);return i.join("")}function Xo(e){for(var t=0,n=e.length,a=e[0],i=[a[0],",",a[1]];++t<n;)i.push("H",(a=e[t])[0],"V",a[1]);return i.join("")}function Yo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return qo(e);var n=e.length!=t.length,a="",i=e[0],r=e[1],o=t[0],l=o,s=1;if(n&&(a+="Q"+(r[0]-2*o[0]/3)+","+(r[1]-2*o[1]/3)+","+r[0]+","+r[1],i=e[1],s=2),t.length>1){l=t[1],r=e[s],s++,a+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(r[0]-l[0])+","+(r[1]-l[1])+","+r[0]+","+r[1];for(var c=2;c<t.length;c++,s++)r=e[s],l=t[c],a+="S"+(r[0]-l[0])+","+(r[1]-l[1])+","+r[0]+","+r[1]}if(n){var u=e[s];a+="Q"+(r[0]+2*l[0]/3)+","+(r[1]+2*l[1]/3)+","+u[0]+","+u[1]}return a}function Qo(e,t){for(var n,a=[],i=(1-t)/2,r=e[0],o=e[1],l=1,s=e.length;++l<s;)n=r,r=o,o=e[l],a.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return a}function Jo(e){if(e.length<3)return qo(e);var t=1,n=e.length,a=e[0],i=a[0],r=a[1],o=[i,i,i,(a=e[1])[0]],l=[r,r,r,a[1]],s=[i,",",r,"L",Zo(el,o),",",Zo(el,l)];for(e.push(e[n-1]);++t<=n;)a=e[t],o.shift(),o.push(a[0]),l.shift(),l.push(a[1]),tl(s,o,l);return e.pop(),s.push("L",a),s.join("")}function Zo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}zo.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Ko=[0,2/3,1/3,0],$o=[0,1/3,2/3,0],el=[0,1/6,2/3,1/6];function tl(e,t,n){e.push("C",Zo(Ko,t),",",Zo(Ko,n),",",Zo($o,t),",",Zo($o,n),",",Zo(el,t),",",Zo(el,n))}function nl(e,t){return(t[1]-e[1])/(t[0]-e[0])}function al(e){for(var t,n,a,i=-1,r=e.length;++i<r;)n=(t=e[i])[0],a=t[1]-Ie,t[0]=n*Math.cos(a),t[1]=n*Math.sin(a);return e}function il(e){var t=ai,n=ai,a=0,i=ii,r=Zn,o=qo,l=o.key,s=o,c="L",u=.7;function d(l){var d,m,h,p=[],f=[],g=[],v=-1,b=l.length,y=Et(t),E=Et(a),x=t===n?function(){return m}:Et(n),S=a===i?function(){return h}:Et(i);function w(){p.push("M",o(e(g),u),c,s(e(f.reverse()),u),"Z")}for(;++v<b;)r.call(this,d=l[v],v)?(f.push([m=+y.call(this,d,v),h=+E.call(this,d,v)]),g.push([+x.call(this,d,v),+S.call(this,d,v)])):f.length&&(w(),f=[],g=[]);return f.length&&w(),p.length?p.join(""):null}return d.x=function(e){return arguments.length?(t=n=e,d):n},d.x0=function(e){return arguments.length?(t=e,d):t},d.x1=function(e){return arguments.length?(n=e,d):n},d.y=function(e){return arguments.length?(a=i=e,d):i},d.y0=function(e){return arguments.length?(a=e,d):a},d.y1=function(e){return arguments.length?(i=e,d):i},d.defined=function(e){return arguments.length?(r=e,d):r},d.interpolate=function(e){return arguments.length?(l="function"===typeof e?o=e:(o=zo.get(e)||qo).key,s=o.reverse||o,c=o.closed?"M":"L",d):l},d.tension=function(e){return arguments.length?(u=e,d):u},d}function rl(e){return e.radius}function ol(e){return[e.x,e.y]}function ll(){return 64}function sl(){return"circle"}function cl(e){var t=Math.sqrt(e/De);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}r.svg.line.radial=function(){var e=Ho(al);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Uo.reverse=Xo,Xo.reverse=Uo,r.svg.area=function(){return il(j)},r.svg.area.radial=function(){var e=il(al);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},r.svg.chord=function(){var e=za,t=qa,n=rl,a=Ro,i=Fo;function r(n,a){var i=o(this,e,n,a),r=o(this,t,n,a);return"M"+i.p0+l(i.r,i.p1,i.a1-i.a0)+(function(e,t){return e.a0==t.a0&&e.a1==t.a1}(i,r)?s(i.r,i.p1,i.r,i.p0):s(i.r,i.p1,r.r,r.p0)+l(r.r,r.p1,r.a1-r.a0)+s(r.r,r.p1,i.r,i.p0))+"Z"}function o(e,t,r,o){var l=t.call(e,r,o),s=n.call(e,l,o),c=a.call(e,l,o)-Ie,u=i.call(e,l,o)-Ie;return{r:s,a0:c,a1:u,p0:[s*Math.cos(c),s*Math.sin(c)],p1:[s*Math.cos(u),s*Math.sin(u)]}}function l(e,t,n){return"A"+e+","+e+" 0 "+ +(n>De)+",1 "+t}function s(e,t,n,a){return"Q 0,0 "+a}return r.radius=function(e){return arguments.length?(n=Et(e),r):n},r.source=function(t){return arguments.length?(e=Et(t),r):e},r.target=function(e){return arguments.length?(t=Et(e),r):t},r.startAngle=function(e){return arguments.length?(a=Et(e),r):a},r.endAngle=function(e){return arguments.length?(i=Et(e),r):i},r},r.svg.diagonal=function(){var e=za,t=qa,n=ol;function a(a,i){var r=e.call(this,a,i),o=t.call(this,a,i),l=(r.y+o.y)/2,s=[r,{x:r.x,y:l},{x:o.x,y:l},o];return"M"+(s=s.map(n))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return a.source=function(t){return arguments.length?(e=Et(t),a):e},a.target=function(e){return arguments.length?(t=Et(e),a):t},a.projection=function(e){return arguments.length?(n=e,a):n},a},r.svg.diagonal.radial=function(){var e=r.svg.diagonal(),t=ol,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],a=t[1]-Ie;return[n*Math.cos(a),n*Math.sin(a)]}}(t=e)):t},e},r.svg.symbol=function(){var e=sl,t=ll;function n(n,a){return(ul.get(e.call(this,n,a))||cl)(t.call(this,n,a))}return n.type=function(t){return arguments.length?(e=Et(t),n):e},n.size=function(e){return arguments.length?(t=Et(e),n):t},n};var ul=r.map({circle:cl,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ml)),n=t*ml;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/dl),n=t*dl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/dl),n=t*dl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});r.svg.symbolTypes=ul.keys();var dl=Math.sqrt(3),ml=Math.tan(30*Pe);Z.transition=function(e){for(var t,n,a=gl||++yl,i=Sl(e),r=[],o=vl||{time:Date.now(),ease:or,delay:0,duration:250},l=-1,s=this.length;++l<s;){r.push(t=[]);for(var c=this[l],u=-1,d=c.length;++u<d;)(n=c[u])&&wl(n,u,i,a,o),t.push(n)}return fl(r,i,a)},Z.interrupt=function(e){return this.each(null==e?hl:pl(Sl(e)))};var hl=pl(Sl());function pl(e){return function(){var t,n,a;(t=this[e])&&(a=t[n=t.active])&&(a.timer.c=null,a.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,a.event&&a.event.interrupt.call(this,this.__data__,a.index))}}function fl(e,t,n){return U(e,bl),e.namespace=t,e.id=n,e}var gl,vl,bl=[],yl=0;function El(e,t,n,a){var i=e.id,r=e.namespace;return pe(e,"function"===typeof n?function(e,o,l){e[r][i].tween.set(t,a(n.call(e,e.__data__,o,l)))}:(n=a(n),function(e){e[r][i].tween.set(t,n)}))}function xl(e){return null==e&&(e=""),function(){this.textContent=e}}function Sl(e){return null==e?"__transition__":"__transition_"+e+"__"}function wl(e,t,n,a,i){var r,o,l,s,c,u=e[n]||(e[n]={active:0,count:0}),d=u[a];function m(n){var i=u.active,m=u[i];for(var p in m&&(m.timer.c=null,m.timer.t=NaN,--u.count,delete u[i],m.event&&m.event.interrupt.call(e,e.__data__,m.index)),u)if(+p<a){var f=u[p];f.timer.c=null,f.timer.t=NaN,--u.count,delete u[p]}o.c=h,Ot(function(){return o.c&&h(n||1)&&(o.c=null,o.t=NaN),1},0,r),u.active=a,d.event&&d.event.start.call(e,e.__data__,t),c=[],d.tween.forEach(function(n,a){(a=a.call(e,e.__data__,t))&&c.push(a)}),s=d.ease,l=d.duration}function h(i){for(var r=i/l,o=s(r),m=c.length;m>0;)c[--m].call(e,o);if(r>=1)return d.event&&d.event.end.call(e,e.__data__,t),--u.count?delete u[a]:delete e[n],1}d||(r=i.time,o=Ot(function(e){var t=d.delay;if(o.t=t+r,t<=e)return m(e-t);o.c=m},0,r),d=u[a]={tween:new N,time:r,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++u.count)}bl.call=Z.call,bl.empty=Z.empty,bl.node=Z.node,bl.size=Z.size,r.transition=function(e,t){return e&&e.transition?gl?e.transition(t):e:r.selection().transition(e)},r.transition.prototype=bl,bl.select=function(e){var t,n,a,i=this.id,r=this.namespace,o=[];e=K(e);for(var l=-1,s=this.length;++l<s;){o.push(t=[]);for(var c=this[l],u=-1,d=c.length;++u<d;)(a=c[u])&&(n=e.call(a,a.__data__,u,l))?("__data__"in a&&(n.__data__=a.__data__),wl(n,u,r,i,a[r][i]),t.push(n)):t.push(null)}return fl(o,r,i)},bl.selectAll=function(e){var t,n,a,i,r,o=this.id,l=this.namespace,s=[];e=$(e);for(var c=-1,u=this.length;++c<u;)for(var d=this[c],m=-1,h=d.length;++m<h;)if(a=d[m]){r=a[l][o],n=e.call(a,a.__data__,m,c),s.push(t=[]);for(var p=-1,f=n.length;++p<f;)(i=n[p])&&wl(i,p,l,o,r),t.push(i)}return fl(s,l,o)},bl.filter=function(e){var t,n,a=[];"function"!==typeof e&&(e=he(e));for(var i=0,r=this.length;i<r;i++){a.push(t=[]);for(var o,l=0,s=(o=this[i]).length;l<s;l++)(n=o[l])&&e.call(n,n.__data__,l,i)&&t.push(n)}return fl(a,this.namespace,this.id)},bl.tween=function(e,t){var n=this.id,a=this.namespace;return arguments.length<2?this.node()[a][n].tween.get(e):pe(this,null==t?function(t){t[a][n].tween.remove(e)}:function(i){i[a][n].tween.set(e,t)})},bl.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?vr:Zi,a=r.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return El(this,"attr."+e,t,a.local?function(e){return null==e?o:(e+="",function(){var t,i=this.getAttributeNS(a.space,a.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(a.space,a.local,t(e))})})}:function(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(a);return i!==e&&(t=n(i,e),function(e){this.setAttribute(a,t(e))})})})},bl.attrTween=function(e,t){var n=r.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,a){var i=t.call(this,e,a,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,a){var i=t.call(this,e,a,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},bl.style=function(e,t,n){var a=arguments.length;if(a<3){if("string"!==typeof e){for(n in a<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}return El(this,"style."+e,t,function(t){return null==t?i:(t+="",function(){var a,i=u(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(a=Zi(i,t),function(t){this.style.setProperty(e,a(t),n)})})})},bl.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(a,i){var r=t.call(this,a,i,u(this).getComputedStyle(this,null).getPropertyValue(e));return r&&function(t){this.style.setProperty(e,r(t),n)}})},bl.text=function(e){return El(this,"text",e,xl)},bl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},bl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!==typeof e&&(e=r.ease.apply(r,arguments)),pe(this,function(a){a[n][t].ease=e}))},bl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:pe(this,"function"===typeof e?function(a,i,r){a[n][t].delay=+e.call(a,a.__data__,i,r)}:(e=+e,function(a){a[n][t].delay=e}))},bl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:pe(this,"function"===typeof e?function(a,i,r){a[n][t].duration=Math.max(1,e.call(a,a.__data__,i,r))}:(e=Math.max(1,e),function(a){a[n][t].duration=e}))},bl.each=function(e,t){var n=this.id,a=this.namespace;if(arguments.length<2){var i=vl,o=gl;try{gl=n,pe(this,function(t,i,r){vl=t[a][n],e.call(t,t.__data__,i,r)})}finally{vl=i,gl=o}}else pe(this,function(i){var o=i[a][n];(o.event||(o.event=r.dispatch("start","end","interrupt"))).on(e,t)});return this},bl.transition=function(){for(var e,t,n,a=this.id,i=++yl,r=this.namespace,o=[],l=0,s=this.length;l<s;l++){o.push(e=[]);for(var c,u=0,d=(c=this[l]).length;u<d;u++)(t=c[u])&&wl(t,u,r,i,{time:(n=t[r][a]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return fl(o,r,i)},r.svg.axis=function(){var e,t=r.scale.linear(),n=Nl,a=6,i=6,o=3,s=[10],c=null;function u(l){l.each(function(){var l,u=r.select(this),d=this.__chart__||t,m=this.__chart__=t.copy(),h=null==c?m.ticks?m.ticks.apply(m,s):m.domain():c,p=null==e?m.tickFormat?m.tickFormat.apply(m,s):j:e,f=u.selectAll(".tick").data(h,m),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Te),v=r.transition(f.exit()).style("opacity",Te).remove(),b=r.transition(f.order()).style("opacity",1),y=Math.max(a,0)+o,E=ho(m),x=u.selectAll(".domain").data([0]),S=(x.enter().append("path").attr("class","domain"),r.transition(x));g.append("line"),g.append("text");var w,N,C,_,T=g.select("line"),O=b.select("line"),D=f.select("text").text(p),A=g.select("text"),L=b.select("text"),I="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(l=_l,w="x",C="y",N="x2",_="y2",D.attr("dy",I<0?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+E[0]+","+I*i+"V0H"+E[1]+"V"+I*i)):(l=Tl,w="y",C="x",N="y2",_="x2",D.attr("dy",".32em").style("text-anchor",I<0?"end":"start"),S.attr("d","M"+I*i+","+E[0]+"H0V"+E[1]+"H"+I*i)),T.attr(_,I*a),A.attr(C,I*y),O.attr(N,0).attr(_,I*a),L.attr(w,0).attr(C,I*y),m.rangeBand){var P=m,k=P.rangeBand()/2;d=m=function(e){return P(e)+k}}else d.rangeBand?d=m:v.call(l,m,d);g.call(l,d,m),b.call(l,m,m)})}return u.scale=function(e){return arguments.length?(t=e,u):t},u.orient=function(e){return arguments.length?(n=e in Cl?e+"":Nl,u):n},u.ticks=function(){return arguments.length?(s=l(arguments),u):s},u.tickValues=function(e){return arguments.length?(c=e,u):c},u.tickFormat=function(t){return arguments.length?(e=t,u):e},u.tickSize=function(e){var t=arguments.length;return t?(a=+e,i=+arguments[t-1],u):a},u.innerTickSize=function(e){return arguments.length?(a=+e,u):a},u.outerTickSize=function(e){return arguments.length?(i=+e,u):i},u.tickPadding=function(e){return arguments.length?(o=+e,u):o},u.tickSubdivide=function(){return arguments.length&&u},u};var Nl="bottom",Cl={top:1,right:1,bottom:1,left:1};function _l(e,t,n){e.attr("transform",function(e){var a=t(e);return"translate("+(isFinite(a)?a:n(e))+",0)"})}function Tl(e,t,n){e.attr("transform",function(e){var a=t(e);return"translate(0,"+(isFinite(a)?a:n(e))+")"})}r.svg.brush=function(){var e,t,n=q(m,"brushstart","brush","brushend"),a=null,i=null,o=[0,0],l=[0,0],s=!0,c=!0,d=Dl[0];function m(e){e.each(function(){var e=r.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(d,j);n.exit().remove(),n.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Ol[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",m.empty()?"none":null);var o,l=r.transition(e),s=r.transition(t);a&&(o=ho(a),s.attr("x",o[0]).attr("width",o[1]-o[0]),p(l)),i&&(o=ho(i),s.attr("y",o[0]).attr("height",o[1]-o[0]),f(l)),h(l)})}function h(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+o[+/e$/.test(e)]+","+l[+/^s/.test(e)]+")"})}function p(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function f(e){e.select(".extent").attr("y",l[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function g(){var d,g,v=this,b=r.select(r.event.target),y=n.of(v,arguments),E=r.select(v),x=b.datum(),S=!/^(n|s)$/.test(x)&&a,w=!/^(e|w)$/.test(x)&&i,N=b.classed("extent"),C=we(v),_=r.mouse(v),T=r.select(u(v)).on("keydown.brush",function(){32==r.event.keyCode&&(N||(d=null,_[0]-=o[1],_[1]-=l[1],N=2),H())}).on("keyup.brush",function(){32==r.event.keyCode&&2==N&&(_[0]+=o[1],_[1]+=l[1],N=0,H())});if(r.event.changedTouches?T.on("touchmove.brush",A).on("touchend.brush",I):T.on("mousemove.brush",A).on("mouseup.brush",I),E.interrupt().selectAll("*").interrupt(),N)_[0]=o[0]-_[0],_[1]=l[0]-_[1];else if(x){var O=+/w$/.test(x),D=+/^n/.test(x);g=[o[1-O]-_[0],l[1-D]-_[1]],_[0]=o[O],_[1]=l[D]}else r.event.altKey&&(d=_.slice());function A(){var e=r.mouse(v),t=!1;g&&(e[0]+=g[0],e[1]+=g[1]),N||(r.event.altKey?(d||(d=[(o[0]+o[1])/2,(l[0]+l[1])/2]),_[0]=o[+(e[0]<d[0])],_[1]=l[+(e[1]<d[1])]):d=null),S&&L(e,a,0)&&(p(E),t=!0),w&&L(e,i,1)&&(f(E),t=!0),t&&(h(E),y({type:"brush",mode:N?"move":"resize"}))}function L(n,a,i){var r,u,m=ho(a),h=m[0],p=m[1],f=_[i],g=i?l:o,v=g[1]-g[0];if(N&&(h-=f,p-=v+f),r=(i?c:s)?Math.max(h,Math.min(p,n[i])):n[i],N?u=(r+=f)+v:(d&&(f=Math.max(h,Math.min(p,2*d[i]-r))),f<r?(u=r,r=f):u=f),g[0]!=r||g[1]!=u)return i?t=null:e=null,g[0]=r,g[1]=u,!0}function I(){A(),E.style("pointer-events","all").selectAll(".resize").style("display",m.empty()?"none":null),r.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),y({type:"brushend"})}E.style("pointer-events","none").selectAll(".resize").style("display",null),r.select("body").style("cursor",b.style("cursor")),y({type:"brushstart"}),A()}return m.event=function(a){a.each(function(){var a=n.of(this,arguments),i={x:o,y:l,i:e,j:t},s=this.__chart__||i;this.__chart__=i,gl?r.select(this).transition().each("start.brush",function(){e=s.i,t=s.j,o=s.x,l=s.y,a({type:"brushstart"})}).tween("brush:brush",function(){var n=Ki(o,i.x),r=Ki(l,i.y);return e=t=null,function(e){o=i.x=n(e),l=i.y=r(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=i.i,t=i.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},m.x=function(e){return arguments.length?(d=Dl[!(a=e)<<1|!i],m):a},m.y=function(e){return arguments.length?(d=Dl[!a<<1|!(i=e)],m):i},m.clamp=function(e){return arguments.length?(a&&i?(s=!!e[0],c=!!e[1]):a?s=!!e:i&&(c=!!e),m):a&&i?[s,c]:a?s:i?c:null},m.extent=function(n){var r,s,c,u,d;return arguments.length?(a&&(r=n[0],s=n[1],i&&(r=r[0],s=s[0]),e=[r,s],a.invert&&(r=a(r),s=a(s)),s<r&&(d=r,r=s,s=d),r==o[0]&&s==o[1]||(o=[r,s])),i&&(c=n[0],u=n[1],a&&(c=c[1],u=u[1]),t=[c,u],i.invert&&(c=i(c),u=i(u)),u<c&&(d=c,c=u,u=d),c==l[0]&&u==l[1]||(l=[c,u])),m):(a&&(e?(r=e[0],s=e[1]):(r=o[0],s=o[1],a.invert&&(r=a.invert(r),s=a.invert(s)),s<r&&(d=r,r=s,s=d))),i&&(t?(c=t[0],u=t[1]):(c=l[0],u=l[1],i.invert&&(c=i.invert(c),u=i.invert(u)),u<c&&(d=c,c=u,u=d))),a&&i?[[r,c],[s,u]]:a?[r,s]:i&&[c,u])},m.clear=function(){return m.empty()||(o=[0,0],l=[0,0],e=t=null),m},m.empty=function(){return!!a&&o[0]==o[1]||!!i&&l[0]==l[1]},r.rebind(m,n,"on")};var Ol={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Al=Rt.format=mn.timeFormat,Ll=Al.utc,Il=Ll("%Y-%m-%dT%H:%M:%S.%LZ");function Pl(e){return e.toISOString()}function kl(e,t,n){function a(t){return e(t)}function i(e,n){var a=(e[1]-e[0])/n,i=r.bisect(Ml,a);return i==Ml.length?[t.year,xo(e.map(function(e){return e/31536e6}),n)[2]]:i?t[a/Ml[i-1]<Ml[i]/a?i-1:i]:[Bl,xo(e,n)[2]]}return a.invert=function(t){return jl(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain(t),a):e.domain().map(jl)},a.nice=function(e,t){var n=a.domain(),r=mo(n),o=null==e?i(r,10):"number"===typeof e&&i(r,e);function l(n){return!isNaN(n)&&!e.range(n,jl(+n+1),t).length}return o&&(e=o[0],t=o[1]),a.domain(fo(n,t>1?{floor:function(t){for(;l(t=e.floor(t));)t=jl(t-1);return t},ceil:function(t){for(;l(t=e.ceil(t));)t=jl(+t+1);return t}}:e))},a.ticks=function(e,t){var n=mo(a.domain()),r=null==e?i(n,10):"number"===typeof e?i(n,e):!e.range&&[{range:e},t];return r&&(e=r[0],t=r[1]),e.range(n[0],jl(+n[1]+1),t<1?1:t)},a.tickFormat=function(){return n},a.copy=function(){return kl(e.copy(),t,n)},yo(a,e)}function jl(e){return new Date(e)}Al.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Pl:Il,Pl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Pl.toString=Il.toString,Rt.second=Gt(function(e){return new Ft(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),Rt.seconds=Rt.second.range,Rt.seconds.utc=Rt.second.utc.range,Rt.minute=Gt(function(e){return new Ft(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),Rt.minutes=Rt.minute.range,Rt.minutes.utc=Rt.minute.utc.range,Rt.hour=Gt(function(e){var t=e.getTimezoneOffset()/60;return new Ft(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),Rt.hours=Rt.hour.range,Rt.hours.utc=Rt.hour.utc.range,Rt.month=Gt(function(e){return(e=Rt.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),Rt.months=Rt.month.range,Rt.months.utc=Rt.month.utc.range;var Ml=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Rl=[[Rt.second,1],[Rt.second,5],[Rt.second,15],[Rt.second,30],[Rt.minute,1],[Rt.minute,5],[Rt.minute,15],[Rt.minute,30],[Rt.hour,1],[Rt.hour,3],[Rt.hour,6],[Rt.hour,12],[Rt.day,1],[Rt.day,2],[Rt.week,1],[Rt.month,1],[Rt.month,3],[Rt.year,1]],Fl=Al.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Zn]]),Bl={range:function(e,t,n){return r.range(Math.ceil(e/n)*n,+t,n).map(jl)},floor:j,ceil:j};Rl.year=Rt.year,Rt.scale=function(){return kl(r.scale.linear(),Rl,Fl)};var Vl=Rl.map(function(e){return[e[0].utc,e[1]]}),Gl=Ll.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Zn]]);function Hl(e){return JSON.parse(e.responseText)}function zl(e){var t=s.createRange();return t.selectNode(s.body),t.createContextualFragment(e.responseText)}Vl.year=Rt.year.utc,Rt.scale.utc=function(){return kl(r.scale.linear(),Vl,Gl)},r.text=xt(function(e){return e.responseText}),r.json=function(e,t){return St(e,"application/json",Hl,t)},r.html=function(e,t){return St(e,"text/html",zl,t)},r.xml=xt(function(e){return e.responseXML}),this.d3=r,void 0===(i="function"===typeof(a=r)?a.call(t,n,t,e):a)||(e.exports=i)}()},1490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var a,i=n(2),r=(n.n(i),n(20)),o=n(656),l=n(708),s=n(53),c=n(680),u=n(658),d=n(10),m=n(663),h=n.n(m),p=n(650),f=n(116),g=n(1058),v=n(1394),b=n(1051),y=n(654),E=n(23),x=n(882),S=n(675),w=n(11),N=n(665),C=n(775),_=n(772),T=n(696),O=n(660),D=n(1395),A=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),L=this&&this.__assign||function(){return(L=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},I=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},P=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},k=n(1102),j=n(1258),M=function(t){function n(e){var n=t.call(this,e)||this;return n.state={point:Object(),oldModel:Object(),assets:[],_spaceList:[],floors:[],cableEquipments:[],components:[],sourceSinkcomponents:[],isEdit:!1,_pointFunctions:[],selectedPointFunctions:[],_pointTypes:[],deviceList:[],newLocation:Object(),equipment:Object(),lightingInformation:Object(),lampTypes:[],isQrCameraMode:!1,isHistorian:!1,pointsListDD:[],relatedPointsListDD:[],terminalPointsListForAsset1:[],terminalPointsListForAsset2:[],selectedDevice:Object(),deviceSensedList:[],isSensedValueBoolean:!1,isChecked:!1},a=n,n.handlePointForm=n.handlePointForm.bind(n),n.handlePointFunctions=n.handlePointFunctions.bind(n),n.getData=n.getData.bind(n),n._getAssets=n._getAssets.bind(n),n._getSpacesList=n._getSpacesList.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n._fetchPointFunctions=n._fetchPointFunctions.bind(n),n.handleInstallDateChange=n.handleInstallDateChange.bind(n),n.handleCommissioningDateChange=n.handleCommissioningDateChange.bind(n),n.handleDeviceSelect=n.handleDeviceSelect.bind(n),n.savePoint=n.savePoint.bind(n),n.mergePoint=n.mergePoint.bind(n),n.getNewDeviceLabel=n.getNewDeviceLabel.bind(n),n.handleSpaceSelect=n.handleSpaceSelect.bind(n),n.getNewSpaceLabel=n.getNewSpaceLabel.bind(n),n.handleAssetSelect=n.handleAssetSelect.bind(n),n.onEquipmentChange=n.onEquipmentChange.bind(n),n._saveEquipment=n._saveEquipment.bind(n),n.getNewAssetLabel=n.getNewAssetLabel.bind(n),n.onChangeFunction=n.onChangeFunction.bind(n),n.addNewPointFunction=n.addNewPointFunction.bind(n),n.handlePointTypeSelect=n.handlePointTypeSelect.bind(n),n.onChangePointType=n.onChangePointType.bind(n),n.addNewPointType=n.addNewPointType.bind(n),n._fetchPointTypes=n._fetchPointTypes.bind(n),n.updateSpace=n.updateSpace.bind(n),n.handlefileAttached=n.handlefileAttached.bind(n),n.handleScan=n.handleScan.bind(n),n.restoreSelectedVersion=n.restoreSelectedVersion.bind(n),n.fetchSourceSinkPointsList=n.fetchSourceSinkPointsList.bind(n),n.handleSinkSourceAssetSelect=n.handleSinkSourceAssetSelect.bind(n),n.handleSinkSourceComponentSelect=n.handleSinkSourceComponentSelect.bind(n),n.handleRelatedPoints=n.handleRelatedPoints.bind(n),n.onChangePointConnectedHandler=n.onChangePointConnectedHandler.bind(n),n.onChangeSoftwareAssetTypeHandler=n.onChangeSoftwareAssetTypeHandler.bind(n),n.onSpaceConnectedHandler=n.onSpaceConnectedHandler.bind(n),n.getMonconSensedAttributes=n.getMonconSensedAttributes.bind(n),n.getValuesFromMonconSensedAttribute=n.getValuesFromMonconSensedAttribute.bind(n),n.handleRulesChange=n.handleRulesChange.bind(n),n}return A(n,t),n.prototype.componentDidMount=function(){return I(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return this.props.buildingName?(Object(f.a)(!0),[4,this.getData()]):[3,3];case 1:return t.sent(),[4,this._getAssets()];case 2:t.sent(),Object(f.a)(!1),t.label=3;case 3:return this.props.PointName||((e=this.state.point).point=Object(E.t)(12),e.pointState="Planned",this.setState({point:e})),[2]}})})},n.prototype.getData=function(){return I(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s,m,h,p,f=this;return P(this,function(g){switch(g.label){case 0:return e=this.props,t=e.buildingName,n=e.PointName,a=Object(),[4,Object(c.l)()];case 1:return i=g.sent(),[4,Object(c.n)()];case 2:return r=g.sent(),[4,Object(N.f)(this.props.buildingName)];case 3:return o=g.sent(),[4,Object(y.j)(this.props.buildingName)];case 4:return l=g.sent(),[4,Object(u.v)(this.props.buildingName,!0)];case 5:return s=g.sent(),n?[4,Object(c.k)(t,n).then(function(e){return I(f,void 0,void 0,function(){var t,n;return P(this,function(a){switch(a.label){case 0:return t=e[0],n=Object(),t&&t.point&&Object(d.g)(t.point)?[4,this.mergePoint(t)]:[3,2];case 1:n=a.sent(),a.label=2;case 2:return[2,n]}})})})]:[3,7];case 6:return a=g.sent(),[3,8];case 7:a.assetConnectedAs="None",a.isConnectedTo="Device",g.label=8;case 8:return""!=a.pointId&&a.pointId?[3,10]:(m=Object(E.r)(7).toString(),[4,Object(c.a)(m,this.props.buildingName).then(function(e){e&&e[0]?a.pointId="":a.pointId=m})]);case 9:g.sent(),g.label=10;case 10:return h=Object(),a.monconDevice?(p=s.find(function(e){return Object(d.g)(e.moncondevice)==a.monconDevice}))?[4,Object(u.q)(p)]:[3,12]:[3,12];case 11:h=g.sent(),g.label=12;case 12:return this.setState({floors:o,_pointFunctions:i,_pointTypes:r,cableEquipments:l,deviceList:s,point:a,selectedDevice:h,oldModel:L({},a),isEdit:a.point==this.props.PointName},function(){return I(f,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return n?("Component"==a.isConnectedTo&&this._getComponents(!1),"Component"==a.sinkSourceAssetType&&this._getComponents(!0),[4,this.fetchSourceSinkPointsList(!0)]):[3,4];case 1:return e.sent(),[4,this.fetchSourceSinkPointsList(!1)];case 2:return e.sent(),"Sensed"!=a.pointType?[3,4]:[4,this.getMonconSensedAttributes(h.monitoringControlDeviceType,a.sensedValue)];case 3:e.sent(),e.label=4;case 4:return[2]}})})}),[2]}})})},n.prototype.fetchSourceSinkPointsList=function(e){return I(this,void 0,void 0,function(){var t,n,a,i,r,o,l;return P(this,function(s){switch(s.label){case 0:return t=this.props.buildingName,n=this.state.point,e?(a=[],i=[],n.isConnectedTo?(r="","Component"==n.isConnectedTo&&n.component?r=n.component:"Equipment"==n.isConnectedTo&&n.asset?r=n.asset:"Device"==n.isConnectedTo&&n.monconDevice&&(r=n.monconDevice),[4,Object(c.h)(t,"Terminal",n.isConnectedTo,r)]):[3,3]):[3,4];case 1:return i=s.sent(),[4,Object(c.h)(t,"",n.isConnectedTo,r)];case 2:a=s.sent(),s.label=3;case 3:return this.setState({relatedPointsListDD:a,terminalPointsListForAsset1:i,point:n}),[3,10];case 4:return o=[],n.sinkSourceAssetType?"Component"==n.sinkSourceAssetType&&n.sinkSourceComponent?[4,Object(c.h)(t,"",n.sinkSourceAssetType,n.sinkSourceComponent)]:[3,6]:[3,8];case 5:return o=s.sent(),[3,8];case 6:return n.sinkSourceAsset?[4,Object(c.h)(t,"",n.sinkSourceAssetType,n.sinkSourceAsset)]:[3,8];case 7:o=s.sent(),s.label=8;case 8:return l=[],[4,Object(c.h)(t,"Terminal",n.isConnectedTo,n.sinkSourceAsset)];case 9:l=s.sent(),this.setState({pointsListDD:o,terminalPointsListForAsset2:l}),s.label=10;case 10:return[2]}})})},n.prototype.fetchRelatedPointForSinkAssets=function(){return I(this,void 0,void 0,function(){var e,t,n,a;return P(this,function(i){switch(i.label){case 0:return e=this.props.buildingName,t=this.state.point,n=[],t.isConnectedTo?(a="","Component"==t.sinkSourceAssetType&&t.sinkSourceComponent?a=t.sinkSourceComponent:"Equipment"==t.sinkSourceAssetType&&t.sinkSourceAsset?a=t.sinkSourceAsset:"Device"==t.sinkSourceAssetType&&t.sinkSourceAsset&&(a=t.sinkSourceAsset),a?[4,Object(c.h)(e,"",t.sinkSourceAssetType,a)]:[3,2]):[3,2];case 1:n=i.sent(),i.label=2;case 2:return this.setState({relatedPointsListDD:n}),[2]}})})},n.prototype.fetchDevicesList=function(){return I(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,Object(u.v)(this.props.buildingName,!0)];case 1:return e=t.sent(),this.setState({deviceList:e}),[2]}})})},n.prototype._getAssets=function(){return I(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,Object(l.g)(this.props.buildingName,r.b.POINT)];case 1:return e=t.sent(),this.setState({assets:e}),[2]}})})},n.prototype._getComponents=function(e,t){return I(this,void 0,void 0,function(){var n,a,i=this;return P(this,function(r){return n=this.state.point,e?(a=n.sinkSourceAsset?n.sinkSourceAsset:t||"")&&Object(y.n)(this.props.buildingName,a).then(function(e){if(e.length>0){var t=[];e.map(function(e){var n={ontology:e.name,rdfsLabel:e.rdfsLabel};t.push(n)}),i.setState({sourceSinkcomponents:t})}else i.setState({sourceSinkcomponents:[]})}).catch(function(e){return e}):n.asset&&Object(y.n)(this.props.buildingName,n.asset).then(function(e){if(e.length>0){var t=[];e.map(function(e){var n={ontology:e.name,rdfsLabel:e.rdfsLabel};t.push(n)}),i.setState({components:t})}else i.setState({components:[]})}).catch(function(e){return e}),[2]})})},n.prototype._getSpacesList=function(e){return I(this,void 0,void 0,function(){var t,n;return P(this,function(a){switch(a.label){case 0:return t=this.props.buildingName,[4,Object(o.d)(e,t,!0)];case 1:return n=a.sent(),this.setState({_spaceList:n}),[2]}})})},n.prototype._fetchPointFunctions=function(){return I(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,Object(c.l)()];case 1:return e=t.sent(),this.setState({_pointFunctions:e}),[2]}})})},n.prototype.getNewDeviceLabel=function(e){return I(this,void 0,void 0,function(){var t,n=this;return P(this,function(i){return(t=this.state.point).monconDevice=e,this.setState({point:t},function(){return I(n,void 0,void 0,function(){return P(this,function(e){return a.fetchDevicesList(),[2]})})}),[2]})})},n.prototype._fetchPointTypes=function(){return I(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return[4,Object(c.n)()];case 1:return e=t.sent(),this.setState({_pointTypes:e}),[2]}})})},n.prototype.getMonconSensedAttributes=function(e,t){return I(this,void 0,void 0,function(){var n,a,i;return P(this,function(r){switch(r.label){case 0:return[4,Object(u.h)(e)];case 1:return n=r.sent(),a=!1,t&&(i=n.find(function(e){return e.ontology==t}))&&(a=i.isBoolean),this.setState({deviceSensedList:n,isSensedValueBoolean:a}),[2]}})})},n.prototype.getValuesFromMonconSensedAttribute=function(e){return I(this,void 0,void 0,function(){var t,n,a,i,r;return P(this,function(o){return t=this.state,n=t.deviceSensedList,a=t.point,i=n.find(function(t){return t.sensedValue==e}),a&&i&&(a.sensedValue=e,a.unit=i.unit?i.unit:"",a.minimumExtremeValue=i.extremeMinimumRange?i.extremeMinimumRange.toString():"0",a.maximumExtremeValue=i.extremeMaximumRange?i.extremeMaximumRange.toString():"0",a.minimumNormalValue=i.minimumRange?i.minimumRange.toString():"0",a.maximumNormalValue=i.maximumRange?i.maximumRange.toString():"0",a.supervisoryMaximumRange=i.supervisoryMaximumRange?i.supervisoryMaximumRange.toString():"0",a.supervisoryMinimumRange=i.supervisoryMinimumRange?i.supervisoryMinimumRange.toString():"0",a.showError=!!i.showError,a.errorTimeDelay=i.errorTimeDelay?i.errorTimeDelay.toString():"60",a.generateAlarms=!!i.generateAlarms,r=i.isBoolean,this.setState({point:a,isSensedValueBoolean:r})),[2]})})},n.prototype.getNewSpaceLabel=function(e){var t=this.state._spaceList&&this.state._spaceList.find(function(t){return Object(d.g)(t.rdfsLabel)==e}),n=this.state.point;n.space=Object(d.g)(t&&t.ontology),this.setState({point:n})},n.prototype.mergePoint=function(e){return I(this,void 0,void 0,function(){var t;return P(this,function(n){switch(n.label){case 0:return e?(t=Object(),[4,Object(c.e)(e)]):[3,10];case 1:return(t=n.sent()).floor?[4,this.handleFloorChange(t.floor)]:[3,3];case 2:n.sent(),n.label=3;case 3:return t.space?[4,this.handleSpaceSelect(t.space)]:[3,5];case 4:n.sent(),n.label=5;case 5:return t.asset?[4,this.handleAssetSelect(t.asset)]:[3,7];case 6:n.sent(),n.label=7;case 7:return t.sinkSourceAsset?[4,this._getComponents(!0,t.sinkSourceAsset)]:[3,9];case 8:n.sent(),n.label=9;case 9:return[2,t];case 10:return[2]}})})},n.prototype.savePoint=function(e){return I(this,void 0,void 0,function(){var t,n,a,i,o,l,u,d,m,h;return P(this,function(p){switch(p.label){case 0:return t=this.state,n=t.point,a=t.isEdit,i=t.oldModel,a=n.point==this.props.PointName,o=this.props.buildingName,n.point=n.point?n.point:Object(E.t)(7),e?(l=e||n,u=n):(l=n,u=a?i:null),n?(Object(f.a)(!0),d=JSON.parse(w.a.getItem("user")),[4,Object(c.d)(l,o,a).then(function(){Object(_.b)(l.point,l,u,d.contact)})]):[3,2];case 1:p.sent(),m=new s.b,(h=Object(r.c)())&&(h.file||h.length>0)&&m.UploadFile(s.a.DOCUMENT(),n.s3FileName,h),Object(f.a)(!1),p.label=2;case 2:return window.location.hash="/"+this.props.instance+"/"+this.props.buildingName+"/Points",[2]}})})},n.prototype.handleFloorChange=function(e){return I(this,void 0,void 0,function(){var t,n,a,i=this;return P(this,function(r){return t=this.state,n=t.point,a=t.floors,n.floor=e,n.floorLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n,_spaceList:[]},function(){return I(i,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,this._getSpacesList(e)];case 1:return t.sent(),[4,this._getAssets()];case 2:return t.sent(),[2]}})})}),[2]})})},n.prototype.handleInstallDateChange=function(e){var t=this.state.point;t.installDate=e.toString(),this.setState({point:t})},n.prototype.handleCommissioningDateChange=function(e){var t=this.state.point;t.commissioningDate=null==e?"":e.toString(),this.setState({point:t})},n.prototype.onSpaceConnectedHandler=function(){var e=this.state.point,t=this.state.pointsListDD,n=this.state.deviceList;e.sinkSourceAsset="",e.sinkSourceAssetType="",e.sinkSourcePoint="",e.sinkSourceComponent="",t=[],this.handleSinkSourceAssetTypeSelect("None"),this.setState({point:e,pointsListDD:t,deviceList:n})},n.prototype.handleSourceOrSink=function(e){var t=this.state.point;t.assetConnectedAs=e,this.setState({point:t}),this.onSpaceConnectedHandler()},n.prototype.onChangePointConnectedHandler=function(){var e=this.state.point,t=this.state.relatedPointsListDD,n=this.state.components;e.monconDevice="",e.relatedPoints=[],e.assetLabel="",e.asset="",e.component="",e.componentLabel="",t=[],n=[],this.setState({point:e,relatedPointsListDD:t,components:n})},n.prototype.handleConnectedTo=function(e){var t=this.state.point;t.isConnectedTo=e,this.setState({point:t}),this.onChangePointConnectedHandler()},n.prototype.handlePointForm=function(e){var t=this.state.point,n=e.target.name;if(t[""+n]=e.target.value,this.setState({point:t}),"pointType"==n){var a=this.state,i=a._pointFunctions,r=a.selectedPointFunctions;r="Sensed"==e.target.value?i.filter(function(e){return"Actuator"==Object(d.g)(e.point)||"Sensor"==Object(d.g)(e.point)}):i,this.setState({selectedPointFunctions:r})}},n.prototype.handleRulesChange=function(e){var t=this.state.point;t.rules=e,this.setState({point:t})},n.prototype.handleDeviceForm=function(e){var t=this.state.selectedDevice,n=e.target.name;if(!t||!t.wirelessConfig){var a=Object();t.wirelessConfig=a}t.wirelessConfig[""+n]=e.target.value,this.setState({selectedDevice:t})},n.prototype.onChangeSoftwareAssetTypeHandler=function(){var e=this.state.point,t=this.state.pointsListDD,n=this.state.sourceSinkcomponents;e.sinkSourceAsset="",e.sinkSourcePoint="",e.sinkSourceComponent="",e.sourcePointDescription="",e.sinkPointDescription="",e.webhook="",e.softwarePointDescription="",e.link1="",e.link2="",e.notes="",delete e.commissioningDate,t=[],n=[],this.setState({point:e,pointsListDD:t,sourceSinkcomponents:n})},n.prototype.handleSinkSourceAssetTypeSelect=function(e,t){var n=this,a=this.state.point;a.sinkSourceAssetType=e,this.setState({point:a},function(){t&&n.fetchRelatedPointForSinkAssets()}),this.onChangeSoftwareAssetTypeHandler()},n.prototype.handleSinkSourceAssetSelect=function(e){var t=this,n=this.state.point,a=e.target.value;""==a&&(n.sinkSourcePoint=""),n.sinkSourceAsset=a,this.setState({point:n},function(){"Component"==n.sinkSourceAssetType?t._getComponents(!0):t.fetchSourceSinkPointsList(!1)})},n.prototype.handleSinkSourceComponentSelect=function(e){var t=this,n=this.state.point,a=e.target.value;n.sinkSourceComponent=a,this.setState({point:n},function(){t.fetchSourceSinkPointsList(!1)})},n.prototype.handleRelatedPoints=function(e){var t=this.state.point;t.relatedPoints=e,this.setState({point:t})},n.prototype.handleTerminalPoint=function(e,t){var n=this.state.point;n[e]=t,this.setState({point:n})},n.prototype.handleScan=function(e){var t=this.state.point;e&&(t.tag=e.toString(),this.setState({point:t,isQrCameraMode:!1}))},n.prototype.handlePointTypeSelect=function(e){var t=this.state.point,n=e.target.value;"addNewPointType"==n?(t.pointType="",a.setState({point:t}),document.getElementById("addNewPointTypeDailogeButton").click()):(t.pointType=n,this.setState({point:t}))},n.prototype.handleAssetSelect=function(e){return I(this,void 0,void 0,function(){var t,n,a,i,r,l,s=this;return P(this,function(c){switch(c.label){case 0:return t=this.props.buildingName,n=this.state.point,a=this.state.assets,i=this.state.components,r=this.state.relatedPointsListDD,"addNewAsset"==e&&(n.asset="",this.setState({point:n}),document.getElementById("AddAssetDailogeButton").click()),""!=e?[3,1]:(n.asset="",n.relatedPoints=[],i=[],r=[],this.setState({point:n,relatedPointsListDD:r,components:i}),[3,5]);case 1:return n.asset=e,n.assetLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",[4,Object(o.c)(t,e)];case 2:return(l=c.sent())&&l.floor&&l.space?(n.space=l.space,n.floor=l.floor,[4,this.handleFloorChange(n.floor)]):[3,4];case 3:c.sent(),c.label=4;case 4:this.setState({point:n},function(){"Component"==n.isConnectedTo&&s._getComponents(!1),s.fetchSourceSinkPointsList(!0)}),c.label=5;case 5:return[2]}})})},n.prototype.handleComponentSelect=function(e){var t=this,n=this.state.point,a=this.state.components;n.component=e,n.componentLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n},function(){t.fetchSourceSinkPointsList(!0)})},n.prototype.handleSpaceSelect=function(e){var t=this,n=this.state.point,a=this.state._spaceList;"addNewSpace"==e?document.getElementById("btnShowSpaceFormDialog").click():(n.space=e,n.spaceLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n,assets:[]},function(){t._getAssets()}))},n.prototype.handleWireSelect=function(e){var t=this.state,n=t.point,a=t.equipment;"addNewWire"==e?(a.equipmentType="MiscAndProcess",a.subclassType="Cable",n.cableEquipment="",this.setState({point:n,equipment:a}),document.getElementById("AddAssetDailogeButton").click()):(n.cableEquipment=e,this.setState({point:n}))},n.prototype.handleDeviceSelect=function(e){return I(this,void 0,void 0,function(){var t,n,a,i,r,l,s,c=this;return P(this,function(m){switch(m.label){case 0:return t=this.props.buildingName,n=this.state.point,"addNewDevice"!=(a=e.target.value)?[3,1]:(n.monconDevice="",this.setState({point:n}),document.getElementById("AddDeviceDailogeButton").click(),[3,7]);case 1:return n.monconDevice=a,i=this.state.deviceList,r=i.find(function(e){return Object(d.g)(e.moncondevice)==n.monconDevice}),l=Object(),r?[4,Object(u.q)(r)]:[3,3];case 2:l=m.sent(),m.label=3;case 3:return[4,Object(o.c)(t,a)];case 4:return(s=m.sent())&&s.floor&&s.space?(n.space=s.space,n.floor=s.floor,[4,this.handleFloorChange(n.floor)]):[3,6];case 5:m.sent(),m.label=6;case 6:this.setState({point:n,selectedDevice:l},function(){c.fetchSourceSinkPointsList(!0),"Sensed"==n.pointType&&c.getMonconSensedAttributes(l.monitoringControlDeviceType)}),m.label=7;case 7:return[2]}})})},n.prototype.handlePointFunctions=function(e){var t=this,n=e.target.value,a=this.state.point;"addPointFunction"==n?(a.pointDevice="",this.setState({point:a}),document.getElementById("addNewFunctionDailogeButton").click()):(a.pointDevice=n,this.setState({point:a},function(){t.handleSensorActuatorSourceSink()}))},n.prototype.onChangeFunction=function(e){var t=this.state.point;t.pointDevice=e,this.setState({point:t},function(){})},n.prototype.onChangePointType=function(e){var t=this,n=this.state.point;n.pointType=e,this.setState({point:n},function(){t.handleSensorActuatorSourceSink()})},n.prototype.handleSensorActuatorSourceSink=function(){var e=this.state.point;e.pointType&&-1!=e.pointType.indexOf("Sens")&&("Sensor"==e.pointDevice?e.sinkSourceAssetType="self":"Actuator"==e.pointDevice&&(e.isConnectedTo="self")),this.setState({point:e})},n.prototype.addNewPointType=function(){return I(this,void 0,void 0,function(){var e,t,n=this;return P(this,function(a){switch(a.label){case 0:return e=this.state.point,t={ontology:e.pointType.replace(new RegExp(" ","g"),""),rdfsLabel:e.pointType},[4,Object(c.g)(this.props.buildingName,t).then(function(){})];case 1:return a.sent(),e.pointType=t.ontology,this.setState({point:e},function(){return I(n,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return[4,this._fetchPointTypes()];case 1:return e.sent(),[2]}})})}),[2]}})})},n.prototype.addNewPointFunction=function(){return I(this,void 0,void 0,function(){var e,t,n=this;return P(this,function(a){switch(a.label){case 0:return e=this.state.point,t={ontology:e.pointDevice.replace(new RegExp(" ","g"),""),rdfsLabel:e.pointDevice},[4,Object(c.f)(this.props.buildingName,t).then(function(){})];case 1:return a.sent(),e.pointDevice=t.ontology,this.setState({point:e},function(){return I(n,void 0,void 0,function(){return P(this,function(e){switch(e.label){case 0:return[4,this._fetchPointFunctions()];case 1:return e.sent(),[2]}})})}),[2]}})})},n.prototype.handleFileAttachment=function(t){var n=this.state.point;if(t&&(t.file||t.length>0)&&n.point&&n.point.length>0){var a=this.props.buildingName+"-_-"+n.point,i="";"video/mp4"==t.type?(i=a+".mp4",Object(r.f)(t)):"image/jpeg"==t.type||"image/png"==t.type?(i=a+".jpg",Object(r.f)(t.file)):(i=a+".jpg",Object(r.f)(new e(t.replace(/^data:image\/\w+;base64,/,""),"base64"))),n.s3FileName=i,this.setState({point:n},function(){})}},n.prototype.onEquipmentChange=function(e){var t=this.state.lightingInformation;t.fixtureName=e.equipmentName,t.fixtureType=e.subclassType;var n=b.a[e.subclassType]?b.a[e.subclassType]:[];this.setState({equipment:e,lightingInformation:t,lampTypes:n})},n.prototype._saveEquipment=function(){return I(this,void 0,void 0,function(){var e,t=this;return P(this,function(n){switch(n.label){case 0:return(e=this.state.equipment).equipmentName=e.equipmentName?e.equipmentName:Object(E.t)(7),!1&&!this.state.isEdit?[3,2]:(Object(f.a)(!0),[4,Object(y.x)(this.props.buildingName,e,this.state.isEdit).then(function(){var t=new s.b,n=Object(r.d)();if(n&&n.length)for(var a=0;a<n.length;a++){var i=n[a];t.UploadFile(s.a.DOCUMENT(),e.profileFileName[a],i)}})]);case 1:n.sent(),Object(f.a)(!1),"MiscAndProcess"!=e.equipmentType||"PlugLoad"!=e.subclassType&&e.subclassType,n.label=2;case 2:return this.setState({isEdit:!1,equipment:Object()},function(){return I(t,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return[4,this._getAssets()];case 1:return t.sent(),this.getNewAssetLabel(e.equipmentName),[2]}})})}),[2]}})})},n.prototype.getNewAssetLabel=function(e){return I(this,void 0,void 0,function(){var t,n;return P(this,function(a){return t=this.state.assets&&this.state.assets.find(function(t){return Object(d.g)(t.ontology)==e}),(n=this.state.point).asset=Object(d.g)(t&&t.ontology),this.setState({point:n}),[2]})})},n.prototype.updateSpace=function(e){return I(this,void 0,void 0,function(){var t;return P(this,function(n){switch(n.label){case 0:return(t=this.state.point).floor?[4,this._getSpacesList(t.floor)]:[3,2];case 1:n.sent(),t.space=e.name,this.setState({point:t}),n.label=2;case 2:return[2]}})})},n.prototype.handlefileAttached=function(e){var t=this.state.point;e.length>0&&(t.tag=e&&e[0].name,this.setState({point:t}))},n.prototype.restoreSelectedVersion=function(e){return I(this,void 0,void 0,function(){var t;return P(this,function(n){switch(n.label){case 0:return e&&e.model?(t=JSON.parse(e.model),[4,this.savePoint(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},n.prototype.saveMoncon=function(){return I(this,void 0,void 0,function(){var e,t,n;return P(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,t=this.state.selectedDevice,n=JSON.parse(w.a.getItem("user")),t?(t.createdby||(t.createdby=n.name),Object(f.a)(!0),[4,Object(u.l)(t,e,this.props.isEdit)]):[3,2];case 1:a.sent(),Object(f.a)(!1),a.label=2;case 2:return[2]}})})},n.prototype.onChangeHandler=function(e){var t=this.state.point;t.generateAlarms=e,this.setState({point:t})},n.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,r=t.isEdit,o=t.isView,l=this.state,s=l.point,c=l.assets,u=l.components,m=l.deviceList,f=l._spaceList,b=l.equipment,y=l.isQrCameraMode,E=l.floors,w=l.isHistorian,N=l.pointsListDD,_=l.sourceSinkcomponents,A=l.relatedPointsListDD,L=l.terminalPointsListForAsset1,I=l.terminalPointsListForAsset2,P=l.selectedDevice,M=l.deviceSensedList,R=l.isSensedValueBoolean,F=l.selectedPointFunctions,B=l.cableEquipments,V=P&&P.wirelessConfig?P.wirelessConfig.thermostatMacAddress:"",G=P&&P.wirelessConfig?P.wirelessConfig.ipAddress:"",H=P&&P.wirelessConfig?P.wirelessConfig.subnetmask?P.wirelessConfig.subnetmask:"255.255.255.0":"",z=s.pointLabel,q=s.pointType,W=s.monconDevice,U=s.asset,X=s.component,Y=s.floor,Q=s.space,J=s.isConnectedTo,Z=s.assetConnectedAs,K=s.sinkSourceAssetType,$=s.sinkSourceAsset,ee=s.sinkSourceComponent,te=s.sinkSourcePoint,ne=!!(z&&q&&(Y&&Q||"Virtual"==q)),ae=!1,ie=!1,re=!1;J&&("Device"==J?ae=!!W:"Equipment"==J?ae=!!U:"Component"==J?ae=!!X:"Space"==J&&(ae=!!Q)),K&&("Device"==K?re=!!$:"Equipment"==K?re=!!$:"Component"===K&&(re=!(!$||!s.sinkSourceComponent))),Z&&K&&("None"==K&&(ie=!0),"Equipment"==K||"Device"==K?ie=!(!$||!te):"Component"==K&&(ie=!!($&&te&&ee)));var oe=!(!ne||!(ae&&ie||"Virtual"==q));"Manual"==q&&ae&&(oe=ne),"Wired"==q&&ae&&ne&&re&&(oe=!!s.cableEquipment),"Terminal"==q&&ae&&ne&&(oe=!!s.sinkSourceAsset,oe=ne),"Sensed"==q&&("Sensor"==s.pointDevice&&K&&ne&&(W||s.asset||s.sinkSourceComponent)?oe=ne:"Actuator"==s.pointDevice&&K&&$&&ne&&(oe=ne));var le=b&&b.rdfsLabel&&b.floor&&b.location&&b.equipmentState&&b.manufacturer&&!0,se=!!(M&&M.length>0),ce="";return q&&-1!=q.indexOf("Sens")&&("Sensor"==s.pointDevice?ce="Source":"Actuator"==s.pointDevice&&(ce="Sink")),i.createElement(i.Fragment,null,w&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",style:{marginLeft:3,marginTop:5},onClick:function(){e.setState({isHistorian:!1})}}," Go Back To "))),w&&i.createElement(C.default,{buildingName:n,instance:a,ObjectId:s.point,restoreSelectedVersion:this.restoreSelectedVersion}),!w&&i.createElement("div",{className:"card",id:"pointsForm"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(){e.setState({isHistorian:!0})}}," ",i.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," Historian Archive"))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:"pointLabel"},"Point Name:")),i.createElement("div",{className:"col-md-10"},i.createElement("input",{type:"text",id:"pointLabel",name:"pointLabel",className:"form-control "+(s.pointLabel?"":"addFieldValidate"),value:s.pointLabel,disabled:o,onChange:function(t){return e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4 col-sm-3"},i.createElement("label",{htmlFor:"pointId"},"Point ID")),i.createElement("div",{className:"col-md-8 col-sm-3"},i.createElement("div",{className:""},i.createElement("input",{type:"text",disabled:!0,id:"pointId",className:"form-control",onChange:function(t){e.handlePointForm(t)},value:s.pointId}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"pointType"},"Point Type:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.pointType?"":"addFieldValidate"),id:"pointType",name:"pointType",disabled:o,onChange:function(t){return e.handlePointForm(t)},value:s.pointType?s.pointType:""},i.createElement("option",{value:""},"Select Point Type"),i.createElement("option",{value:"Sensed"},"Sensed/Actuated"),i.createElement("option",{value:"Manual"},"Manual"),i.createElement("option",{value:"Virtual"},"Virtual"),i.createElement("option",{value:"Wired"},"Wire"),i.createElement("option",{value:"Terminal"},"Terminal")))),"Terminal"==s.pointType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4 col-sm-3"},i.createElement("label",{htmlFor:"terminationType"},"Termination Type")),i.createElement("div",{className:"col-md-8 col-sm-3"},i.createElement("div",{className:""},i.createElement("input",{type:"text",id:"terminationType",name:"terminationType",className:"form-control",onChange:function(t){e.handlePointForm(t)},value:s.terminationType})))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("label",{htmlFor:"pointState"},"Point State:")," "),i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("select",{className:"form-control "+(s.pointState?"":"addFieldValidate"),id:"pointState",name:"pointState",disabled:o,onChange:function(t){return e.handlePointForm(t)},value:s.pointState?s.pointState:""},i.createElement("option",{value:"Planned"},"Planned"),i.createElement("option",{value:"Ordered"},"Ordered"),i.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),i.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),i.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),i.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),i.createElement("option",{value:"Assembly"},"Assembly"),i.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),i.createElement("option",{value:"Kitting"},"Kitting"),i.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),i.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),i.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),i.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),i.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),i.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),i.createElement("option",{value:"Existing"},"Existing In Use"),i.createElement("option",{value:"Retired"},"Retired"),i.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),i.createElement("option",{value:"Sold"},"Sold"),i.createElement("option",{value:"DisposedOf"},"Disposed Of"),i.createElement("option",{value:"ErrorDeleted"},"Error Deleted")))),"Virtual"!=s.pointType&&"Terminal"!=s.pointType&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"pointFunction"},"Point Function:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control",name:"pointDevice",disabled:o,id:"pointFunction",value:s.pointDevice,onChange:function(t){return e.handlePointFunctions(t)}},i.createElement("option",{value:"",key:-2},"Select Point Function"),F.map(function(e,t){return i.createElement("option",{key:t,value:Object(d.g)(e.point)},Object(d.g)(e.label))})))))),i.createElement("div",{className:"row padding-10"},"Terminal"!=s.pointType&&i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"pointId"},"Unit:")),i.createElement("div",{className:"col-md-8"},i.createElement("div",{className:""},i.createElement("input",{type:"text",className:"form-control",name:"unit",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.unit})))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"pointPIDName"},"Point P&ID Name:")),i.createElement("div",{className:"col-md-8"},i.createElement("div",{className:""},i.createElement("input",{type:"text",className:"form-control",name:"pointPIDName",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.pointPIDName})))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"pointNumber"},"Point Number:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",id:"pointNumber",name:"pointNumber",disabled:o,className:"form-control col-md-6",value:s.pointNumber,onChange:function(t){return e.handlePointForm(t)}})))),"Virtual"==s.pointType&&i.createElement("div",{className:"card"},i.createElement(D.a,{buildingName:n,instance:a,onRulesChange:this.handleRulesChange,rules:s.rules,isView:o}),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-6 padding-10 right"},i.createElement("label",{htmlFor:"floor"},"Interval (in seconds):")),i.createElement("div",{className:"col-md-6 padding-5"},i.createElement("input",{type:"number",id:"interval",disabled:o,name:"interval",className:"form-control",value:s.interval,placeholder:"300",style:{width:"100px"},onChange:function(t){e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-6 padding-10 right"},i.createElement("label",{htmlFor:"floor"},"Min Normal Range:")),i.createElement("div",{className:"col-md-6 padding-5"},i.createElement("input",{type:"number",id:"minimumNormalValue",disabled:o,name:"minimumNormalValue",className:"form-control",value:s.minimumNormalValue,placeholder:"20",style:{width:"100px"},onChange:function(t){e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-6 padding-10 right"},i.createElement("label",{htmlFor:"floor"},"Max Normal Range:")),i.createElement("div",{className:"col-md-6 padding-5"},i.createElement("input",{type:"number",id:"maximumNormalValue",disabled:o,name:"maximumNormalValue",className:"form-control",value:s.maximumNormalValue,placeholder:"100",style:{width:"100px"},onChange:function(t){e.handlePointForm(t)}}))))),"Virtual"!=s.pointType&&i.createElement(i.Fragment,null,i.createElement("div",{className:"card"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("div",{className:"col-md-3",style:{paddingRight:0}},i.createElement("label",{htmlFor:"Sensed"},ce," Point Connected To ","Wired"==s.pointType?"First Asset":"",":")),i.createElement("div",{className:"col-md-9 col-xs-12"},i.createElement("div",{className:"form-control "+(s.isConnectedTo?"":"addFieldValidate")},"Manual"==s.pointType&&i.createElement("div",{className:"col-md-3 col-xs-3 center"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Space"==s.isConnectedTo,onChange:function(){e.handleConnectedTo("Space")},name:"isSpace",id:"isSpace"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSpace"},"\xa0Space")),i.createElement("div",{className:("Manual"==s.pointType?"col-md-3 col-xs-3":"col-md-4 col-xs-4")+" center"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Sink"==ce?"Device"==s.sinkSourceAssetType:"Device"==s.isConnectedTo,onChange:function(){"Sink"==ce?e.handleSinkSourceAssetTypeSelect("Device",!0):e.handleConnectedTo("Device")},name:"isDevice",id:"isDevice"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isDevice"},"\xa0Device")),i.createElement("div",{className:("Manual"==s.pointType?"col-md-3 col-xs-3":"col-md-4 col-xs-4")+" center"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Sink"==ce?"Equipment"==s.sinkSourceAssetType:"Equipment"==s.isConnectedTo,onChange:function(){"Sink"==ce?e.handleSinkSourceAssetTypeSelect("Equipment",!0):e.handleConnectedTo("Equipment")},name:"isEquipment",id:"isEquipment"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isEquipment"},"\xa0Equipment")),i.createElement("div",{className:("Manual"==s.pointType?"col-md-3 col-xs-3":"col-md-4 col-xs-4")+" center"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Sink"==ce?"Component"==s.sinkSourceAssetType:"Component"==s.isConnectedTo,onChange:function(){"Sink"==ce?e.handleSinkSourceAssetTypeSelect("Component",!0):e.handleConnectedTo("Component")},name:"isComponent",id:"isComponent"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isComponent"},"\xa0Component")))))),("Sink"==ce?"Equipment"==s.sinkSourceAssetType||"Component"==s.sinkSourceAssetType:"Component"==s.isConnectedTo||"Equipment"==s.isConnectedTo)&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"asset"},ce," Equipment:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(("Sink"==ce?s.sinkSourceAsset:s.asset)?"":"addFieldValidate"),disabled:o,id:"asset",name:"asset",value:"Sink"==ce?s.sinkSourceAsset:s.asset,onChange:function(t){"Sink"==ce?e.handleSinkSourceAssetSelect(t):e.handleAssetSelect(t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Asset"),i.createElement("option",{value:"addNewAsset",key:-1},"Add new Asset from Point"),c.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),("Sink"==ce?"Component"==s.sinkSourceAssetType:"Component"==s.isConnectedTo)&&i.createElement("div",{className:"col-md-4 col-xs-12",style:{paddingLeft:0}},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"components"},ce," Device Equipment Component:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(("Sink"==ce?s.sinkSourceComponent:s.component)?"":"addFieldValidate"),disabled:o,id:"components",name:"components",value:"Sink"==ce?s.sinkSourceComponent:s.component,onChange:function(t){"Sink"==ce?e.handleSinkSourceComponentSelect(t):e.handleComponentSelect(t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Component"),"Sink"==ce?_.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")}):u.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Wired"==s.pointType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"asset"},"Terminal Point 1:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control",disabled:o,id:"terminalPoint1",name:"terminalPoint1",value:s.terminalPoint1,onChange:function(t){return e.handleTerminalPoint("terminalPoint1",t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Terminal Point 1"),L.map(function(e,t){return i.createElement("option",{key:t,value:e.value},e.label," ")}))))),("Sink"==ce?"Device"==s.sinkSourceAssetType:"Device"==s.isConnectedTo)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"pointDevice"},ce," Device:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(("Sink"==ce?s.sinkSourceAsset:s.monconDevice)?"":"addFieldValidate"),name:"monconDevice",disabled:o,value:"Sink"==ce?s.sinkSourceAsset:s.monconDevice,onChange:function(t){"Sink"==ce?e.handleSinkSourceAssetSelect(t):e.handleDeviceSelect(t)}},i.createElement("option",{value:""},"Select Device"),i.createElement("option",{value:"addNewDevice"},"Add New Device"),m&&m.map(function(e,t){return i.createElement("option",{value:e&&e.moncondevice&&e.moncondevice.value,key:t},e&&e.rdfsLabel&&e.rdfsLabel.value," ")})))),"Wired"==s.pointType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"asset"},"Terminal Point 1:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control",disabled:o,id:"terminalPoint1",name:"terminalPoint1",value:s.terminalPoint1,onChange:function(t){return e.handleTerminalPoint("terminalPoint1",t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Terminal Point 1"),L.map(function(e,t){return i.createElement("option",{key:t,value:e.value},e.label," ")})))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"asset"},"Related Points:")),i.createElement("div",{className:"col-md-8"},i.createElement(O.a,{closeMenuOnSelect:!1,isMulti:!0,onChange:this.handleRelatedPoints,isDisabled:o,placeholder:"Select Related Points",options:A.length>0?A:[],value:s.relatedPoints}))),"Wired"!=s.pointType&&P&&P.wirelessConfig&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("button",{className:"btn btn-success active custom-outline-btn no-margin",onClick:function(){document.getElementById("btnShowDeviceDetails").click()}}," Device Wireless Details ")))),se&&"Sensed"==s.pointType&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sensedValue"},"Sensed Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sensedValue?"":"addFieldValidate"),name:"sensedValue",id:"sensedValue",disabled:o,value:s.sensedValue,onChange:function(t){return e.getValuesFromMonconSensedAttribute(t.target.value)}},i.createElement("option",{value:""},"Select Sensed Value"),M&&M.map(function(e,t){return i.createElement("option",{value:e.sensedValue,key:t},e.sensedValue," ")})))),!R&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"minimumExtremeValue"},"Abnormal Min. Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",className:"form-control",name:"minimumExtremeValue",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.minimumExtremeValue}))),!R&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"minimumNormalValue"},"Normal Min. Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",className:"form-control",name:"minimumNormalValue",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.minimumNormalValue})))),!R&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"maximumNormalValue"},"Normal Max. Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",className:"form-control",name:"maximumNormalValue",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.maximumNormalValue}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"maximumExtremeValue"},"Abnormal Max. Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",className:"form-control",name:"maximumExtremeValue",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.maximumExtremeValue}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"supervisoryMinimumRange"},"Supervisory Min. Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",className:"form-control",name:"supervisoryMinimumRange",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.supervisoryMinimumRange})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"supervisoryMaximumRange"},"Supervisory Max. Value:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"number",className:"form-control",name:"supervisoryMaximumRange",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.supervisoryMaximumRange}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"showError"},"Supervisory Show Error:")),i.createElement("div",{className:"col-md-8"},i.createElement("div",{className:"switch-container pull-right",style:{top:"5%",right:"10%"}},i.createElement("label",null,i.createElement("input",{checked:s.showError,name:"showError",onChange:function(t){e.handlePointForm(t)},className:"switch1",type:"checkbox"}),i.createElement("div",null,i.createElement("div",null)))))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-7"},i.createElement("label",{htmlFor:"supervisoryMaximumRange"},"Supervisory Error Time Delay:")),i.createElement("div",{className:"col-md-5"},i.createElement("input",{type:"number",className:"form-control",name:"errorTimeDelay",disabled:o,onChange:function(t){e.handlePointForm(t)},value:s.errorTimeDelay})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"generateAlarms"},"Generate Alarms:")),i.createElement("div",{className:"switch-container pull-right",style:{top:"5%",right:"10%"}},i.createElement("label",null,i.createElement("input",{name:"isboolean",checked:s.generateAlarms,onChange:function(t){e.onChangeHandler(t.target.checked)},className:"switch1",type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"floor"},"Floor:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.floor?"":"addFieldValidate"),disabled:o,id:"floor",name:"floor",value:s.floor,onChange:function(t){return e.handleFloorChange(t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Floor"),E.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"space"},"Space:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.space?"":"addFieldValidate"),disabled:o,id:"space",name:"space",value:s.space,onChange:function(t){return e.handleSpaceSelect(t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Space"),i.createElement("option",{value:"addNewSpace",key:-1},"Add New Space"),f&&f.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")}))),i.createElement(x.a,{updateSpace:this.updateSpace,closeDailogBtnID:"btnShowSpaceFormDialog",type:"",floor:"",buildingName:n,instance:a})),i.createElement("div",{className:"col-md-4 col-xs-12"}))),"Sensed"==s.pointType&&!s.pointDevice&&i.createElement("div",{className:"card"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,s.isConnectedTo," Connected As:")),i.createElement("div",{className:"col-md-9 col-xs-12"},i.createElement("div",{className:("Sink"==s.assetConnectedAs||"Source"==s.assetConnectedAs?"":"addFieldValidate")+" form-control "},i.createElement("div",{className:"col-md-6 col-xs-6 center"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Source"==s.assetConnectedAs,onChange:function(){e.handleSourceOrSink("Source")},name:"isSource",id:"isSource"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSource"},"\xa0Source")),i.createElement("div",{className:"col-md-6 col-xs-6 center"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Sink"==s.assetConnectedAs,onChange:function(){e.handleSourceOrSink("Sink")},name:"isSink",id:"isSink"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSink"},"\xa0Sink")))))),"None"!=s.assetConnectedAs&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Sink"==s.assetConnectedAs?"Hardware / Software Asset Type (Source):":"Software Asset Type (Sink):")),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-control "+(s.sinkSourceAssetType?"":"addFieldValidate")},i.createElement("div",{className:"col-md-3 col-xs-3 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"None"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("None")},name:"isSSNone",id:"isSSNone"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSNone"},"\xa0Not Defined")),i.createElement("div",{className:"col-md-3 col-xs-3 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Device"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Device")},name:"isSSDevice",id:"isSSDevice"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSDevice"},"\xa0Device")),i.createElement("div",{className:"col-md-3 col-xs-3 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Equipment"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Equipment")},name:"isSSEquipment",id:"isSSEquipment"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSEquipment"},"\xa0Equipment")),i.createElement("div",{className:"col-md-3 col-xs-3 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Component"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Component")},name:"isSSComponent",id:"isSSComponent"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSComponent"},"\xa0Component")))))),"None"!=s.sinkSourceAssetType&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourceAsset"},"Sink"==s.assetConnectedAs?"Hardware / Software "+(s.sinkSourceAssetType?"Component"==s.sinkSourceAssetType?"Equipment":s.sinkSourceAssetType:"Asset")+" (Source)":"Software "+(s.sinkSourceAssetType?"Component"==s.sinkSourceAssetType?"Equipment":s.sinkSourceAssetType:"Asset")+"  (Sink):")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sinkSourceAsset?"":"addFieldValidate"),id:"sinkSourceAsset",name:"sinkSourceAsset",value:s.sinkSourceAsset?s.sinkSourceAsset:"",disabled:o&&!s.sinkSourceAssetType,onChange:this.handleSinkSourceAssetSelect},i.createElement("option",{value:"",key:-2},"Select ","Sink"==s.assetConnectedAs?"Source":"Sink"," ",s.sinkSourceAssetType?"Component"==s.sinkSourceAssetType?"Equipment":s.sinkSourceAssetType:"Asset"),"Device"==s.sinkSourceAssetType&&m&&m.length>0&&m[0]&&m.map(function(e,t){return i.createElement(i.Fragment,null,i.createElement("option",{value:e&&e.moncondevice&&Object(d.g)(e.moncondevice)},e&&e.rdfsLabel&&Object(d.g)(e.rdfsLabel)))}),("Equipment"==s.sinkSourceAssetType||"Component"==s.sinkSourceAssetType)&&c&&c.length>0&&c[0]&&c.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Component"==s.sinkSourceAssetType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourceComponent"},"Sink"==s.assetConnectedAs?"Hardware / Software "+s.sinkSourceAssetType+" (Source)":"Software "+s.sinkSourceAssetType+" (Sink):")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sinkSourceComponent?"":"addFieldValidate"),id:"sinkSourceComponent",name:"sinkSourceComponent",value:s.sinkSourceComponent?s.sinkSourceComponent:"",disabled:o&&!s.sinkSourceAssetType,onChange:this.handleSinkSourceComponentSelect},i.createElement("option",{value:"",key:-2},"Select ","Sink"==s.assetConnectedAs?"Source":"Sink"," ",s.sinkSourceAssetType?" "+s.sinkSourceAssetType:" Asset Point"),_&&_.length>0&&_[0]&&_.map(function(e){return i.createElement(i.Fragment,null,i.createElement("option",{value:e&&e.ontology&&Object(d.g)(e.ontology)},e&&e.rdfsLabel&&Object(d.g)(e.rdfsLabel)))})))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourcePoint"},"Sink"==s.assetConnectedAs?"Hardware / Software Point (Source)":"Software Point (Sink):")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sinkSourcePoint?"":"addFieldValidate"),id:"sinkSourcePoint",name:"sinkSourcePoint",value:s.sinkSourcePoint?s.sinkSourcePoint:"",disabled:o&&!s.sinkSourceAsset,onChange:this.handlePointForm},i.createElement("option",{value:"",key:-2},"Select ","Sink"==s.assetConnectedAs?"Source":"Sink"," ",s.sinkSourceAssetType?" "+s.sinkSourceAssetType:" Asset"," Point"),N&&N.length>0&&N[0]&&N.map(function(e){return i.createElement(i.Fragment,null,i.createElement("option",{value:e.value},e.label))}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sourcePointDescription"},"Source Point Description:")),i.createElement("div",{className:"col-md-8"},i.createElement("textarea",{id:"sourcePointDescription",name:"sourcePointDescription",className:"form-control col-md-6",value:s.sourcePointDescription,disabled:o,onChange:function(t){return e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkPointDescription"},"Sink Point Description:")),i.createElement("div",{className:"col-md-8"},i.createElement("textarea",{id:"sinkPointDescription",name:"sinkPointDescription",className:"form-control col-md-6",value:s.sinkPointDescription,disabled:o,onChange:function(t){return e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"webhook"},"Graphics link:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"text",id:"webhook",name:"webhook",disabled:o,className:"form-control col-md-6",value:s.webhook,onChange:function(t){return e.handlePointForm(t)}}))))))),"Wired"==s.pointType&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"card"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("div",{className:"col-md-3"},i.createElement("label",null,"Point Connected To Second Asset:")),i.createElement("div",{className:"col-md-9 col-xs-12"},i.createElement("div",{className:"form-control "+(s.sinkSourceAssetType?"":"addFieldValidate")},i.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Device"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Device")},name:"isSSDevice",id:"isSSDevice"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSDevice"},"\xa0Device")),i.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Equipment"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Equipment")},name:"isSSEquipment",id:"isSSEquipment"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSEquipment"},"\xa0Equipment")),i.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},i.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:o,checked:"Component"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Component")},name:"isSSComponent",id:"isSSComponent"}),i.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSComponent"},"\xa0Component")))))),("Component"==s.sinkSourceAssetType||"Equipment"==s.sinkSourceAssetType)&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourceAsset"},"Equipment:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sinkSourceAsset?"":"addFieldValidate"),disabled:o,id:"sinkSourceAsset",name:"sinkSourceAsset",value:s.sinkSourceAsset,onChange:function(t){return e.handleSinkSourceAssetSelect(t)}},i.createElement("option",{value:"",key:-2},"Select Asset"),c.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Component"==s.sinkSourceAssetType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourceComponent"},"Device Equipment Component:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sinkSourceComponent?"":"addFieldValidate"),disabled:o,id:"sinkSourceComponent",name:"sinkSourceComponent",value:s.sinkSourceComponent,onChange:function(t){return e.handleSinkSourceComponentSelect(t)}},i.createElement("option",{value:"",key:-2},"Select Component"),u.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Wired"==s.pointType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"asset"},"Terminal Point 2:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control",disabled:o,id:"terminalPoint2",name:"terminalPoint2",value:s.terminalPoint2,onChange:function(t){return e.handleTerminalPoint("terminalPoint2",t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Terminal Point 2"),I.map(function(e,t){return i.createElement("option",{key:t,value:e.value},e.label," ")}))))),"Device"==s.sinkSourceAssetType&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourceAsset"},"Device:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.sinkSourceAsset?"":"addFieldValidate"),name:"sinkSourceAsset",disabled:o,value:s.sinkSourceAsset,onChange:function(t){return e.handleSinkSourceAssetSelect(t)}},i.createElement("option",{value:""},"Select Device"),m&&m.map(function(e,t){return i.createElement("option",{value:e&&e.moncondevice&&e.moncondevice.value,key:t},e&&e.rdfsLabel&&e.rdfsLabel.value," ")})))),"Wired"==s.pointType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"asset"},"Terminal Point 2:")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control",disabled:o,id:"terminalPoint2",name:"terminalPoint2",value:s.terminalPoint2,onChange:function(t){return e.handleTerminalPoint("terminalPoint2",t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Terminal Point 2"),I.map(function(e,t){return i.createElement("option",{key:t,value:e.value},e.label," ")}))))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"sinkSourceAsset"},"Wire Type: ")),i.createElement("div",{className:"col-md-8"},i.createElement("select",{className:"form-control "+(s.cableEquipment?"":"addFieldValidate"),disabled:o,id:"cableEquipment",name:"cableEquipment",value:s.cableEquipment,onChange:function(t){return e.handleWireSelect(t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Wire Type"),i.createElement("option",{value:"addNewWire",key:-1},"Add New Wire Type"),i.createElement("hr",null),B.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology},e.rdfsLabel," ")})))))),i.createElement("br",null),i.createElement("br",null),"None"==s.assetConnectedAs&&"Terminal"!=s.pointType&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"webhook"},"Graphics link:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"text",id:"webhook",name:"webhook",disabled:o,className:"form-control col-md-6",value:s.webhook,onChange:function(t){return e.handlePointForm(t)}})))),"Terminal"!=s.pointType&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"softwarePointDescription"},"Software Point Description:")),i.createElement("div",{className:"col-md-8"},i.createElement("textarea",{id:"softwarePointDescription",name:"softwarePointDescription",disabled:o,className:"form-control col-md-6",value:s.softwarePointDescription,onChange:function(t){return e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"link1"},"Link 1:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"text",id:"link1",name:"link1",disabled:o,className:"form-control col-md-6",value:s.link1,onChange:function(t){return e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"link2"},"Link 2:")),i.createElement("div",{className:"col-md-8"},i.createElement("input",{type:"text",id:"link2",name:"link2",disabled:o,className:"form-control col-md-6",value:s.link2,onChange:function(t){return e.handlePointForm(t)}}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"notes"},"Notes:")),i.createElement("div",{className:"col-md-8"},i.createElement("textarea",{id:"notes",name:"notes",disabled:o,className:"form-control col-md-6",value:s.notes,onChange:function(t){return e.handlePointForm(t)}}))),i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("label",{htmlFor:"link2"},"Commissioning Date:")),i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement(h.a,{disabled:o,id:"commissioningDate",className:"form-control",selected:s.commissioningDate?new Date(s.commissioningDate):void 0,onChange:function(t){return e.handleCommissioningDateChange(t)},dateFormat:"MMMM d, yyyy",customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Commissioning Date","aria-label":"","aria-describedby":"button-addon4",value:s.commissioningDate})}))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12 col-xs-12"},i.createElement(T.a,{buildingName:n,assetOntology:o||r?this.props.PointName:s.point,showUploader:!o,entityType:"Point"}))),"Manual"==s.pointType&&i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-2 col-xs-12 padding-10"},i.createElement("label",{htmlFor:"tag"},"Tag:")),i.createElement("div",{className:"col-md-6 col-xs-12"},i.createElement("input",{type:"text",id:"tag",name:"tag",className:"form-control",value:s.tag,disabled:o,onChange:function(t){return e.handlePointForm(t)}})),i.createElement("div",{className:"col-md-4 col-xs-12",style:{display:"inline-flex"}},i.createElement("button",{type:"button",disabled:o,className:"btn btn-dark btn-sm margin-5",onClick:function(){var t=e.state.isQrCameraMode;e.setState({isQrCameraMode:!t})}},i.createElement("i",{className:"fa fa-"+(y?"close":"camera")})),i.createElement("button",{type:"button",title:"QR Code Genrator",disabled:o||!s.tag||s.tag.length<=0,className:"margin-5 btn btn-dark btn-sm",onClick:function(){document.getElementById("QRCodeGenDailogebtn").click()}},i.createElement("i",{id:"icons",className:"fa fa-qrcode"}))),i.createElement("button",{id:"QRCodeGenDailogebtn",type:"button","data-toggle":"modal","data-target":"#QRCodeGenDailoge",className:"hidden"},"."),i.createElement(p.a,{id:"QRCodeGenDailoge",heading:"QR Code",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1,showSaveButton:!1},i.createElement("div",{className:"center"},i.createElement("div",{className:"dataCard img-thumbnail"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-8 center"},s.tag&&i.createElement("div",null,i.createElement(j,{style:{verticalAlign:"middle",alignContent:"center"},id:"QRCode",value:s.tag,size:370,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0,renderAs:"canvas"}))),i.createElement("div",{className:"col-md-2 col-md-offset-2"},i.createElement("div",{className:"pull-right"},i.createElement(S.a,{filename:s.tag,data:"",ElementID:"QRCode"}))))))))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-8 col-xs-12"}),i.createElement("div",{className:"col-md-4 col-xs-12"},y&&i.createElement(k,{delay:300,onError:function(e){console.log(e)},onScan:this.handleScan,style:{width:"100%"}}))),i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"col-md-12 text-center"},!o&&i.createElement("button",{type:"button",className:"btn btn-primary active",disabled:!oe,onClick:function(){e.savePoint()}},"Save"),"\xa0\xa0",i.createElement("button",{type:"button",className:"btn btn-danger active",onClick:function(){window.history.back()}},"Cancel")),i.createElement("br",null),i.createElement("br",null),i.createElement("button",{id:"AddDeviceDailogeButton","data-toggle":"modal","data-target":"#AddDeviceDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),i.createElement(p.a,{id:"AddDeviceDailoge",closeButtonId:"closeDeviceForm",heading:"Add New Device from Point",saveButtonText:"Done",isEditForm:!0,showSaveButton:!1},i.createElement(g.default,{getNewDeviceLabel:this.getNewDeviceLabel,buildingName:n,instance:a,isView:!1,isEdit:!1})),i.createElement("button",{id:"AddAssetDailogeButton","data-toggle":"modal","data-target":"#AddAssetDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),i.createElement(p.a,{id:"AddAssetDailoge",onSaveButtonClick:this._saveEquipment,disableSaveButton:!le,heading:"Add New Wire",saveButtonText:"Save",isEditForm:!0,showSaveButton:!0},i.createElement(v.a,{onEquipmentChange:this.onEquipmentChange,equipment:b,isFromPoint:!0,buildingName:n,instance:a})),i.createElement("button",{id:"addNewFunctionDailogeButton","data-toggle":"modal","data-target":"#addNewFunctionDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),i.createElement(p.a,{id:"addNewFunctionDailoge",heading:"Add New Function From Point",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewPointFunction()},disableSaveButton:!s.pointDevice},i.createElement("div",{className:"content"},i.createElement("div",{className:"dataCard"},i.createElement("div",null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{style:{padding:"10px"},className:"row"},i.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Add New Function:"),i.createElement("div",{className:"col-md-8 headingText"},i.createElement("input",{value:s.pointDevice,onChange:function(t){e.onChangeFunction(t.target.value)},type:"text",className:"form-control"}))))))))),i.createElement("button",{id:"addNewPointTypeDailogeButton","data-toggle":"modal","data-target":"#addNewPointTypeDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),i.createElement(p.a,{id:"addNewPointTypeDailoge",heading:"Add New Point Type From Point",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewPointType()},disableSaveButton:!s.pointType},i.createElement("div",{className:"content"},i.createElement("div",{className:"dataCard"},i.createElement("div",null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{style:{padding:"10px"},className:"row"},i.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Add New Point Type:"),i.createElement("div",{className:"col-md-8 headingText"},i.createElement("input",{value:s.pointType,onChange:function(t){e.onChangePointType(t.target.value)},type:"text",className:"form-control"}))))))))),i.createElement("button",{id:"btnShowDeviceDetails","data-toggle":"modal","data-target":"#dialogShowDeviceDetails",type:"button",className:"btn btn-primary btn-fill hidden"},"."),i.createElement(p.a,{id:"dialogShowDeviceDetails",heading:"Device Wireless Details",saveButtonText:"Update",showCancelButton:!0,showSaveButton:!o,onSaveButtonClick:function(){e.saveMoncon()},disableSaveButton:!(H&&G&&V)},i.createElement("div",{className:"content card"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{style:{padding:"10px"},className:"row"},i.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"}," MAC Address:"),i.createElement("div",{className:"col-md-8 headingText"},i.createElement("input",{value:V,onChange:function(t){e.handleDeviceForm(t)},type:"text",name:"thermostatMacAddress",id:"thermostatMacAddress",className:"form-control",disabled:o}))))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{style:{padding:"10px"},className:"row"},i.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"IP Address / Communication:"),i.createElement("div",{className:"col-md-8 headingText"},i.createElement("textarea",{value:G,onChange:function(t){e.handleDeviceForm(t)},name:"ipAddress",id:"ipAddress",className:"form-control",disabled:o}))))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{style:{padding:"10px"},className:"row"},i.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"}," Subnet Mask:"),i.createElement("div",{className:"col-md-8 headingText"},i.createElement("input",{value:H,onChange:function(t){e.handleDeviceForm(t)},type:"text",name:"subnetmask",id:"subnetmask",className:"form-control",disabled:o})))))))))))},n}(i.Component);t.default=M}.call(t,n(6).Buffer)},1659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(2),r=(n.n(i),n(678)),o=n(658),l=n(10),s=n(31),c=n(701),u=n(116),d=n(654),m=n(781),h=n(1390),p=n(668),f=n(669),g=n(11),v=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__assign||function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},x=0,S=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),CeilingSensorBoard_MonconModel:Object(),Old_RelayBoardInfo:Object(),RelayBoardInfo:Object(),I1RelayBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,spaces:[],relayControlStatusDesc:"",scheduleSelected:!1,relayisOn:!1,relayisOnNo:0,relayCensorStatus:Object(),relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,I1RelayStatus:!1,relayControlStatus:"Manual",relayControlType:"",isOptimizeControl:!1,isOptimizeControlStatus:"",RelayBoardControl:Object(),relayOptimizeSettings:"",I4RelayBoardInfo:Object(),relayNoOptimize:0,devices:[],callInterval:!0,openRelayControlDialog:!1,showLogs:!1,RelayStatusMessage:["","","",""]},n,n.fetchDevices=n.fetchDevices.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n._fetchRelayCensorStatus=n._fetchRelayCensorStatus.bind(n),n._fetchV4RelayBoardInfo=n._fetchV4RelayBoardInfo.bind(n),n._fetchI1RelayBoardInfo=n._fetchI1RelayBoardInfo.bind(n),n._fetchI4RelayBoardInfo=n._fetchI4RelayBoardInfo.bind(n),n.fetchRelayControlSettings=n.fetchRelayControlSettings.bind(n),n.saveRelayStatusChanges=n.saveRelayStatusChanges.bind(n),n.setOptimizeSettings=n.setOptimizeSettings.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.handleRelayOnOff=n.handleRelayOnOff.bind(n),n.handleRelayControlStatus=n.handleRelayControlStatus.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n.applyRule=n.applyRule.bind(n),n.onCloseRelayControlDialog=n.onCloseRelayControlDialog.bind(n),n.sendControlTypeAPI=n.sendControlTypeAPI.bind(n),n}return v(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return e.sent(),[4,this.fetchDevices()];case 2:return e.sent(),[4,this.resetChanges(!0)];case 3:e.sent(),e.label=4;case 4:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a),a=setInterval(function(){var t=e.state,n=t.callInterval,a=t.modelChanged;x++,!a&&n&&x>=1&&(e.resetChanges(!1),Object(u.a)(!1),x=0)},1e3)},t.prototype.componentWillUnmount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){return clearInterval(a),[2]})})},t.prototype.fetchDevices=function(){return y(this,void 0,void 0,function(){var e,t;return E(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(r.u)(e)]:[3,2];case 1:t=n.sent(),this.setState({devices:t}),n.label=2;case 2:return[2]}})})},t.prototype._fetchData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,s,c,m,h,p,f,g,v=this;return E(this,function(b){switch(b.label){case 0:return e=this.state,t=e.scheduleSelected,n=e.relayControlType,a=this.props,i=a.RelayDeviceName,r=a.buildingName,i?(Object(u.a)(!0),[4,Object(d.h)(this.props.buildingName)]):[3,3];case 1:return s=b.sent(),c=s&&s.length>0&&s.map(function(e){return{value:Object(l.g)(e.ontology),label:Object(l.g)(e.rdfsLabel)}}),m=Object(),[4,Object(o.t)(i,r)];case 2:m=b.sent(),t=m.isSchedule,n=m.monitoringControlDeviceType,localStorage.getItem(m.deviceID)&&localStorage.getItem(m.deviceID).length>0&&(h=localStorage.getItem(m.deviceID))&&"undefined"!=h&&(n&&-1!=n.indexOf("OneRelay")?(p=JSON.parse(localStorage.getItem(m.deviceID)),this.setState({I1RelayBoardInfo:p,modelChanged:!1,currentChange:""})):-1!=n.toLowerCase().indexOf("i4")?(f=JSON.parse(localStorage.getItem(m.deviceID)),this.setState({I4RelayBoardInfo:f,modelChanged:!1,currentChange:""})):(g=JSON.parse(localStorage.getItem(m.deviceID)),this.setState({RelayBoardInfo:g,modelChanged:!1,currentChange:""}))),this.setState({Moncon:m,EquipmentList:c,scheduleSelected:t,relayControlType:n},function(){return y(v,void 0,void 0,function(){return E(this,function(e){return this._fetchRelayCensorStatus(!0),-1!=n.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(!0):-1!=n.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(!0):this._fetchV4RelayBoardInfo(!0),this._fetchCeilingSensorBoardInfo(!0),this.fetchRelayControlSettings(),[2]})})}),Object(u.a)(!1),b.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a,i,l,c,d;return E(this,function(m){switch(m.label){case 0:e&&Object(u.a)(!0),t=this.state.Moncon,n=this.props.buildingName,a="",i=0,m.label=1;case 1:return i<t.sensors.length?(l=t.sensors[i],a=l.value,c=Object(),[4,Object(o.t)(a,n)]):[3,5];case 2:return"CeilingSensor"!=(c=m.sent()).monitoringControlDeviceType?[3,4]:[4,Object(r.n)(c).then(function(e){var t=e[0];return!t||t&&t.error?(Object(s.a)("Error occurred while fetching ceiling sensor board info."),Object()):t}).catch(function(e){return Object()})];case 3:return d=m.sent(),this.setState({CeilingSensorBoardInfo:d,CeilingSensorBoard_MonconModel:c,modelChanged:!1,currentChange:""}),[2];case 4:return i++,[3,1];case 5:return e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchI1RelayBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a;return E(this,function(i){switch(i.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state.I1RelayStatus,[4,Object(r.f)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(s.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(a=i.sent())&&a.i1relay_state&&a.i1relay_state[0]&&(n="1"==a.i1relay_state[0]),a&&a.i1relay_state&&0==a.i1relay_state[0]&&(n=!1),this.setState({I1RelayBoardInfo:a,modelChanged:!1,currentChange:"",I1RelayStatus:n}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchV4RelayBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a,i,o,l,c,d,m;return E(this,function(h){switch(h.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,i=n.relay2Status,o=n.relay3Status,l=n.relay4Status,c=Object(),[4,Object(r.g)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(s.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(c=h.sent())&&c.v4relay_state&&(d=this.ConvertDecimalToBinary(parseInt(c.v4relay_state)),m=d.split(","),a="1"==m[0],i="1"==m[1],o="1"==m[2],l="1"==m[3]),this.setState({RelayBoardInfo:c,Old_RelayBoardInfo:b({},c),modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:i,relay3Status:o,relay4Status:l}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchI4RelayBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a,i,o,l,c;return E(this,function(d){switch(d.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,i=n.relay2Status,o=n.relay3Status,l=n.relay4Status,c=Object(),[4,Object(r.q)(t).then(function(e){return!e||e&&e.error?(Object(s.a)("Error occurred while fetching relay board info."),Object()):(e&&localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return c=d.sent(),a=120==c.voltage_volts_Ch1,i=120==c.voltage_volts_Ch2,o=120==c.voltage_volts_Ch3,l=120==c.voltage_volts_Ch4,this.setState({modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:i,relay3Status:o,relay4Status:l,I4RelayBoardInfo:c}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchRelayCensorStatus=function(e){return y(this,void 0,void 0,function(){var t,n,a,i=this;return E(this,function(o){switch(o.label){case 0:return e&&Object(u.a)(!0),t=this.props,n=t.buildingName,a=t.RelayDeviceName,[4,Object(r.w)(n,a).then(function(e){var t=e[0];if(!t)return i.setState({relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,relayOptimizeSettings:"Normal,Normal,Normal,Normal,"}),Object();var n=Object();n.relayStatus=[],n.controlStatus=Object(l.g)(t.controlStatus),n.deviceType=Object(l.g)(t.deviceType);var a=Object(l.g)(t.statusNotes).split(",");n.statusNotes=Object(l.g)(t.statusNotes).split(",");var r=i.state,o=r.relay1Status,s=r.relay2Status,c=r.relay3Status,u=r.relay4Status,d=r.relayControlStatus,m=r.I1RelayStatus,h=r.relayOptimizeSettings,p=Object(l.g)(t.relayStatus).split(",");-1!=n.deviceType.indexOf("OneRelay")?(p&&(n.relayStatus=p),d=Object(l.g)(t.controlStatus),i.setState({I1RelayStatus:m,relayControlStatus:d})):(p&&(n.relayStatus=p),d=Object(l.g)(t.controlStatus),i.setState({relay1Status:o,relay2Status:s,relay3Status:c,relay4Status:u,relayControlStatus:d}));var f="Optimize"==n.controlStatus||"Normal"==n.controlStatus;(h=Object(l.g)(t.relayOptimizeSettings))&&",,,,"!=h&&""!=h||(h=-1==n.deviceType.indexOf("OneRelay")?"Normal,Normal,Normal,Normal,":"Normal"),i.setState({isOptimizeControl:f,isOptimizeControlStatus:f?n.controlStatus:"",relayOptimizeSettings:h,RelayStatusMessage:a,relayCensorStatus:n})}).catch(function(e){return Object()})];case 1:return o.sent(),e&&Object(u.a)(!1),[2]}})})},t.prototype.fetchRelayControlSettings=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,o;return E(this,function(s){switch(s.label){case 0:return e=this.props.RelayDeviceName,t=this.state,n=t.relayControlType,a=t.RelayBoardControl,[4,Object(r.x)(e)];case 1:return(i=s.sent())[0]?(o=i[0],n&&-1==n.indexOf("OneRelay")?a.relays="1,2,3,4":a.relays="OneRelay",a.controlChoice=Object(l.g)(o.controlChoice),a.relayNames=Object(l.g)(o.relayNames),a.lightingTypes=Object(l.g)(o.lightingTypes),a.sensors=Object(l.g)(o.sensors),a.activeRelayStatus=Object(l.g)(o.activeRelayStatus)):n&&-1==n.indexOf("OneRelay")?(a.relays="1,2,3,4",a.controlChoice="0,0,0,0",a.relayNames="Relay 1,Relay 2,Relay 3,Relay 4",a.lightingTypes="0,0,0,0",a.sensors="0,0,0,0",a.activeRelayStatus="active,active,active,active"):(a.relays="OneRelay",a.controlChoice="0",a.relayNames="Relay",a.sensors="0",a.lightingTypes="0",a.activeRelayStatus="active"),this.setState({RelayBoardControl:a}),[2]}})})},t.prototype.ConvertDecimalToBinary=function(e){for(var t=[],n=e;n>0;)n%2==0?t.push("0"):t.push("1"),n=Math.floor(n/2);var a=this.state.relayControlType;if(a&&-1==a.indexOf("OneRelay"))for(var i=4-t.length,r=0;r<i;r++)t.push("0");return t.join(",")},t.prototype.handleRelayOnOff=function(e,t,n){var a=this.state,i=a.relay1Status,r=a.relay2Status,o=a.relay3Status,l=a.relay4Status;1==t&&(i=e),2==t&&(r=e),3==t&&(o=e),4==t&&(l=e);for(var s=0;s<=3;s++)t-1===s&&(this.state.RelayStatusMessage[s]="Manually");this.setState({modelChanged:n,relayisOnNo:t,relayisOn:e,relay1Status:i,relay2Status:r,relay3Status:o,relay4Status:l})},t.prototype.handleI1RelayOnOff=function(e){this.setState({I1RelayStatus:e,modelChanged:!0})},t.prototype.handleChange=function(e,t){var n=this.state.RelayBoardInfo;n[e]=t,this.setState({RelayBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.handleRelayOptimizeSettings=function(e,t,n){return void 0===n&&(n=!0),y(this,void 0,void 0,function(){var a,i,r,o,l,s;return E(this,function(c){return a=this.state,i=a.relayOptimizeSettings,r=a.isOptimizeControl,o=a.modelChanged,l=a.relayNoOptimize,(s=i.split(","))[t]=e,r=!0,o=n,i=s.join(","),l=t+1,this.setState({isOptimizeControlStatus:e,relayOptimizeSettings:i,isOptimizeControl:r,modelChanged:o,relayNoOptimize:l}),[2]})})},t.prototype.handleRelayControlStatus=function(e){return y(this,void 0,void 0,function(){var t,n,a;return E(this,function(i){return this.state.relayCensorStatus.statusNotes=this.state.RelayStatusMessage,"Remote"==e&&"Local"!=this.state.relayControlStatus?[2]:("Remote"==e&&"Local"==this.state.relayControlStatus&&(e="Manual"),this.setState({relayControlStatus:e,isOptimizeControl:!1}),"Local"!=e&&"Schedule"!=e&&"Manual"!=e||(t=this.state,n=t.isOptimizeControl,a=t.modelChanged,n=!0,a=!0,this.setState({isOptimizeControlStatus:e,isOptimizeControl:n,modelChanged:a})),[2])})})},t.prototype.cancelSend=function(){var e=this.state,t=e.relay1Status,n=e.relay2Status,a=e.relay3Status,i=e.relay4Status,r=e.I1RelayStatus,o=e.relayCensorStatus,l=e.relayControlType,s=e.relayOptimizeSettings,c=e.isOptimizeControl,u=e.relayNoOptimize;if(l&&-1!=l.indexOf("OneRelay"))r=!r,this.setState({I1RelayStatus:r,modelChanged:!1,isOptimizeControl:!1});else{if(o&&o.relayStatus&&o.relayStatus.length>0&&(t="1"==o.relayStatus[0],n="1"==o.relayStatus[1],a="1"==o.relayStatus[2],i="1"==o.relayStatus[3],this.setState({relay1Status:t,relay2Status:n,relay3Status:a,relay4Status:i})),c){var d=s.split(",");d[u]="Normal"==d[u]?"Optimize":"Normal",s=d.join(",")}this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",relayOptimizeSettings:s,relayNoOptimize:0})}},t.prototype.onCloseRelayControlDialog=function(e){return y(this,void 0,void 0,function(){return E(this,function(t){return this.setState({openRelayControlDialog:e}),[2]})})},t.prototype.setOptimizeSettings=function(e,t){return y(this,void 0,void 0,function(){var n,a,i,o=this;return E(this,function(c){switch(c.label){case 0:return n=this.props,a=n.buildingName,i=n.RelayDeviceName,[4,Object(r.b)(a,i).then(function(n){return y(o,void 0,void 0,function(){var o,c,u,d,m,h,p,f,g,v,b,x,S,w,N,C,_,T=this;return E(this,function(O){switch(O.label){case 0:return o=Object(),n[0]?(o.device=Object(l.g)(n[0].device),o.A1=Object(l.g)(n[0].A1)?Object(l.g)(n[0].A1):"0",o.A2=Object(l.g)(n[0].A2)?Object(l.g)(n[0].A2):"0",o.B1=Object(l.g)(n[0].B1)?Object(l.g)(n[0].B1):"1",o.B2=Object(l.g)(n[0].B2)?Object(l.g)(n[0].B2):"1",o.C1=Object(l.g)(n[0].C1)?Object(l.g)(n[0].C1):"0",o.C2=Object(l.g)(n[0].C2)?Object(l.g)(n[0].C2):"0",o.D1=Object(l.g)(n[0].D1)?Object(l.g)(n[0].D1):"1",o.D2=Object(l.g)(n[0].D2)?Object(l.g)(n[0].D2):"1",o.E1=Object(l.g)(n[0].E1)?Object(l.g)(n[0].E1):"1",o.E2=Object(l.g)(n[0].E2)?Object(l.g)(n[0].E2):"1",o.F1=Object(l.g)(n[0].F1)?Object(l.g)(n[0].F1):"0",o.F2=Object(l.g)(n[0].F2)?Object(l.g)(n[0].F2):"0",o.G1=Object(l.g)(n[0].G1)?Object(l.g)(n[0].G1):"1",o.G2=Object(l.g)(n[0].G2)?Object(l.g)(n[0].G2):"1"):(o.device=i,o.A1="0",o.A2="0",o.B1="1",o.B2="1",o.C1="0",o.C2="0",o.D1="1",o.D2="1",o.E1="1",o.E2="1",o.F1="0",o.F2="0",o.G1="1",o.G2="1"),c=Object(),u=Object(),d=this.state,m=d.Moncon,h=d.relayNoOptimize,p=d.relayControlType,f=d.relayOptimizeSettings,g=d.RelayBoardControl,v=d.devices,b=d.relayControlStatus,x=e?e.split(","):f.split(","),c.isOptimize="Optimize"==x[(t||h)-1],c.isOptimize?(c.varA=parseInt(o.A2),c.varB=parseInt(o.B2),c.varC=parseInt(o.C2),c.varD=parseInt(o.D2),c.varE=parseInt(o.E2),c.varF=parseInt(o.F2),c.varG=parseInt(o.G2)):(c.varA=parseInt(o.A1),c.varB=parseInt(o.B1),c.varC=parseInt(o.C1),c.varD=parseInt(o.D1),c.varE=parseInt(o.E1),c.varF=parseInt(o.F1),c.varG=parseInt(o.G1)),c.deviceID=m.deviceName,c.relaynum=""+h,c.rlb_add=m.boardAddress,m.wirelessConfig.ipAddress&&(c.controllerPI=m.wirelessConfig.ipAddress,u.controllerPI=m.wirelessConfig.ipAddress),m.wirelessConfig.controllerIPAddress&&(c.controllerPI=m.wirelessConfig.controllerIPAddress,u.controllerPI=m.wirelessConfig.controllerIPAddress),-1!=p.toLowerCase().indexOf("v1")?c.rlb_ver="v1":-1!=p.toLowerCase().indexOf("v4")?c.rlb_ver="v4":-1!=p.toLowerCase().indexOf("i1")?c.rlb_ver="i1":-1!=p.toLowerCase().indexOf("i4")&&(c.rlb_ver="i4"),S=[],w=[],N=[],C=[],S=g.controlChoice&&g.controlChoice.split(","),w=g.lightingTypes&&g.lightingTypes.split(","),N=g.sensors&&g.sensors.split(","),C=g.relayNames&&g.relayNames.split(","),u.sched=!1,u.controltype="Manual"!=b?S[h-1]:"10",u.lighting_type=w[h-1],u.relaynum=""+h,u.rlb_ver=c.rlb_ver,u.rlb_add=m.boardAddress,u.deviceID=m.deviceName,N&&N[h-1]?(_=v.find(function(e){return Object(l.g)(e.moncondevice)==N[h-1]}),u.csb_add=_?Object(l.g)(_.boardAddress):"9999"):u.csb_add="9999",u.lighting_type&&"0"!=u.lighting_type&&u.controltype&&"0"!=u.controltype?[4,Object(r.L)(u,c,a)]:(Object(s.a)("Save the control settings for "+C[h-1]+" before posting settings"),[2]);case 1:return O.sent(),"A"!=w[h-1]?[3,11]:"0"!=N[h-1]?[3,11]:c.isOptimize?[4,this.handleRelayOnOff(!1,h,!1)]:[3,11];case 2:return O.sent(),[4,this.saveRelayStatusChanges(b,!1)];case 3:return O.sent(),p&&-1!=p.indexOf("OneRelay")?p&&-1!=p.indexOf("V1")?[3,6]:[3,4]:[3,7];case 4:return[4,Object(r.H)(m,!1,a).then(function(e){return y(T,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 5:O.sent(),O.label=6;case 6:return[3,11];case 7:return p&&-1!=p.indexOf("V4")?[4,Object(r.N)(m,!1,!1,h,a).then(function(e){return y(T,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})]:[3,9];case 8:return O.sent(),[3,11];case 9:return[4,Object(r.I)(m,!1,!1,h,a).then(function(e){return y(T,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 10:O.sent(),O.label=11;case 11:return[2]}})})})];case 1:return c.sent(),[2]}})})},t.prototype.sendControlTypeAPI=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,o,l,s;return E(this,function(c){switch(c.label){case 0:Object(u.a)(!0),e=this.state,t=e.relayControlType,n=e.relayOptimizeSettings,a=e.RelayBoardControl,i=t&&-1==t.indexOf("OneRelay")?4:1,r=n.split(","),o=a.activeRelayStatus&&a.activeRelayStatus.split(","),l=0,c.label=1;case 1:return l<i?"active"!=o[l]?[3,4]:[4,this.handleRelayOptimizeSettings(r[l],l,!1)]:[3,5];case 2:return c.sent(),n=r.join(","),s=l+1,[4,this.setOptimizeSettings(n,s)];case 3:c.sent(),c.label=4;case 4:return l++,[3,1];case 5:return Object(u.a)(!1),[2]}})})},t.prototype.resetChanges=function(e){return y(this,void 0,void 0,function(){var t=this;return E(this,function(n){return this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",callInterval:!1},function(){return y(t,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:return t=this.state.relayControlType,[4,this._fetchRelayCensorStatus(e)];case 1:return n.sent(),-1!=t.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(e):-1!=t.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(e):this._fetchV4RelayBoardInfo(e),[4,this._fetchCeilingSensorBoardInfo(e)];case 2:return n.sent(),this.setState({callInterval:!0}),[2]}})})}),[2]})})},t.prototype.handleScheduleSelection=function(e){return y(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,Object(r.X)(this.props.RelayDeviceName,e)];case 1:return t.sent(),e?Object(s.b)("Successfully Selected Schedule"):Object(s.b)("Successfully unSelected Schedule"),[2]}})})},t.prototype.saveRelayStatusChanges=function(e,t){return y(this,void 0,void 0,function(){var n,a,i,o,l,c,d,m,h,p,f,g,v;return E(this,function(b){switch(b.label){case 0:return t&&Object(u.a)(!0),n=this.props,a=n.buildingName,i=n.RelayDeviceName,o=this.state,l=o.relay1Status,c=o.relay2Status,d=o.relay3Status,m=o.relay4Status,h=o.relayCensorStatus,p=o.relayControlType,f=o.I1RelayStatus,g=o.relayOptimizeSettings,v=[],p&&-1!=p.indexOf("OneRelay")?v.push(f?"1":"0"):(v.push(l?"1":"0"),v.push(c?"1":"0"),v.push(d?"1":"0"),v.push(m?"1":"0")),h.relayStatus=v,h.controlStatus=e,h.deviceType=p,h.device=i,h.relayOptimizeSettings=g.split(","),[4,Object(r.T)(a,h).then(function(e){}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 1:return b.sent(),t&&Object(u.a)(!1),[2]}})})},t.prototype.applyChanges=function(){return y(this,void 0,void 0,function(){var e=this;return E(this,function(t){return Object(u.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return y(e,void 0,void 0,function(){var e,t,n,i,o,l,c,d,m,h,p,f,g,v,b,S,w,N=this;return E(this,function(C){switch(C.label){case 0:return x=0,a&&clearInterval(a),Object(u.a)(!0),e=this.state,t=e.Moncon,n=e.relayControlStatus,i=e.relayControlType,o=e.isOptimizeControlStatus,l=e.relayOptimizeSettings,c=e.RelayBoardControl,d=e.relayCensorStatus,m=e.isOptimizeControl,h=e.I1RelayStatus,p=e.relayisOn,f=e.relayisOnNo,d.statusNotes=this.state.RelayStatusMessage,[4,this.saveRelayStatusChanges(n,!1)];case 1:if(C.sent(),"Schedule"==o)return this.handleScheduleSelection(!0),this.setIntervalStart(),Object(u.a)(!1),[2];if(this.handleScheduleSelection(!1),"Local"!=o&&"Manual"!=o)return[3,7];g=i&&-1==i.indexOf("OneRelay")?4:1,v=l.split(","),b=c.activeRelayStatus&&c.activeRelayStatus.split(","),S=0,C.label=2;case 2:return S<g?"active"!=b[S]?[3,5]:[4,this.handleRelayOptimizeSettings(v[S],S,!1)]:[3,6];case 3:return C.sent(),l=v.join(","),w=S+1,[4,this.setOptimizeSettings(l,w)];case 4:C.sent(),C.label=5;case 5:return S++,[3,2];case 6:return"Local"==n&&"Local"==o?(this.setIntervalStart(),Object(u.a)(!1),[2]):[3,18];case 7:return"Schedule"!=n&&"Schedule"!=o&&this.handleScheduleSelection(!1),m?[3,16]:i&&-1!=i.indexOf("OneRelay")?i&&-1!=i.indexOf("V1")?[3,10]:[3,8]:[3,11];case 8:return[4,Object(r.H)(t,h,this.props.buildingName).then(function(e){return y(N,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 9:C.sent(),C.label=10;case 10:return[3,15];case 11:return i&&-1!=i.indexOf("V4")?[4,Object(r.N)(t,!1,p,f,this.props.buildingName).then(function(e){return y(N,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})]:[3,13];case 12:return C.sent(),[3,15];case 13:return[4,Object(r.I)(t,!1,p,f,this.props.buildingName).then(function(e){return y(N,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 14:C.sent(),C.label=15;case 15:return[3,18];case 16:return[4,this.setOptimizeSettings()];case 17:C.sent(),C.label=18;case 18:return this.setState({isOptimizeControl:!1}),this.setIntervalStart(),Object(u.a)(!1),[2]}})})}),[2]})})},t.prototype.applyRule=function(e,t,n){return e?t?e<n?0:e:e>n?0:e:0},t.prototype.render=function(){var e,t,n,a,r=this,o=this.state,l=o.CeilingSensorBoardInfo,s=o.CeilingSensorBoard_MonconModel,u=o.Moncon,d=o.modelChanged,v=o.currentChange,b=o.detailsExpanded,y=o.RelayBoardInfo,E=o.relayControlStatus,x=o.relayisOn,S=o.relayisOnNo,w=o.relay1Status,N=o.relay2Status,C=o.relay3Status,_=o.relay4Status,T=o.relayControlType,O=o.I1RelayBoardInfo,D=o.I1RelayStatus,A=o.isOptimizeControl,L=o.isOptimizeControlStatus,I=o.RelayBoardControl,P=o.relayOptimizeSettings,k=o.I4RelayBoardInfo,j=o.openRelayControlDialog,M=o.RelayStatusMessage,R=o.relayCensorStatus,F=o.showLogs,B=this.props,V=B.instance,G=B.buildingName,H=B.RelayDeviceName,z=B.type,q=B.hideTabs,W="Local"!=E;e=I.relayNames&&I.relayNames.split(","),t=I.lightingTypes&&I.lightingTypes.split(","),n=P&&P.split(","),a=I.activeRelayStatus&&I.activeRelayStatus.split(",");var U="not refreshed";if(T&&(-1!=T.toLowerCase().indexOf("i1")?O&&O.timestamp&&(U=new Date(O.timestamp).toLocaleString()):-1!=T.toLowerCase().indexOf("i4")?k&&k.timestamp&&(U=new Date(k.timestamp).toLocaleString()):-1!=T.toLowerCase().indexOf("v4")&&y&&y.timestamp&&(U=new Date(y.timestamp).toLocaleString())),F)return i.createElement(p.a,{instance:V,buildingName:G,fromEntityList:!0,module:f.a.Assets,ontology:u.monitoringControl,entityName:"Device",onLogClose:function(){return r.setState({showLogs:!1})}});var X=JSON.parse(g.a.getItem("user"));return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},!q&&i.createElement(c.a,{InsightName:H,ControlName:"RelayControl",buildingName:G,instance:V,type:z}),X&&"1"==X.role&&i.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){r.setState({showLogs:!0})}}," ",i.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),i.createElement("div",{className:"card",id:"InsightsList"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-7"},i.createElement("div",{className:"header"},i.createElement("h3",{className:"title"},i.createElement("strong",null,u.rdfsLabel)," "),i.createElement("h4",{className:"title"},i.createElement("strong",null,this.props.type.toUpperCase(),":",u&&u.relatedEquipment&&u.relatedEquipment.map(function(e,t){return i.createElement("span",{key:t},t+1==u.relatedEquipment.length?"":",")}))))),i.createElement("div",{className:"col-md-2 p-0"},i.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Send Control Settings To Board",onClick:function(e){r.sendControlTypeAPI()}}," ",i.createElement("i",{className:"fa fa-cog"})," Send Control Settings To Board")),i.createElement("div",{className:"col-md-2 pl-0"},i.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Control Settings",onClick:function(e){r.setState({openRelayControlDialog:!0},function(){document.getElementById("btnDialogRelayControl").click()})}}," ",i.createElement("i",{className:"fa fa-sliders"})," Control Settings")))),i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},T&&-1!=T.indexOf("OneRelay")&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-8 InsightRow"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-6 col-xs-12"},i.createElement("h4",{className:"padding-5 margin-5"},"Power Watts: ",i.createElement("b",null,O&&O.active_power_Watts&&parseFloat(O.active_power_Watts)?parseFloat(O.active_power_Watts):0," ")),i.createElement("h4",{className:"padding-5 margin-5"},"Amperes: ",i.createElement("b",null,O&&O.current_Amperes?O.current_Amperes:0)),i.createElement("h4",{className:"padding-5 margin-5"},"Frequency Hz: ",i.createElement("b",null,O&&O.frequency_Hz?this.applyRule(O.frequency_Hz,!0,55):0))),i.createElement("div",{className:"col-md-6 col-xs-12"},i.createElement("h4",{className:"padding-5 margin-5"},"Total Energy Watt Hours: ",i.createElement("b",null,O&&O.import_active_energy_Wh&&parseFloat(O.import_active_energy_Wh)?parseFloat(O.import_active_energy_Wh).toFixed(2):0," ")),i.createElement("h4",{className:"padding-5 margin-5"},"Power Factor: ",i.createElement("b",null,O&&O.power_factor?O.power_factor:0)),i.createElement("h4",{className:"padding-5 margin-5"},"Voltage volts: ",i.createElement("b",null,O&&O.voltage_volts?O.voltage_volts:0))))),i.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},i.createElement("h4",{className:"padding-5 margin-5"},"Control Type: ",i.createElement("b",null,I&&I.controlChoice?I.controlChoice:"Not selected"," ")),i.createElement("h4",{className:"padding-5 margin-5"},"Illuminance: ",i.createElement("b",null,l&&l.illuminance_lux?l.illuminance_lux:0," Lumens")),i.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",i.createElement("b",null,l&&l.motion_sensed&&l.motion_sensed>0?"True":"False")))),T&&-1==T.indexOf("OneRelay")&&i.createElement("div",{className:"col-md-12 InsightRow"},i.createElement("table",{className:"table table-striped"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null),i.createElement("th",null,i.createElement("b",null,"Amperes")),i.createElement("th",null,i.createElement("b",null,"Power Watt")),-1!=T.toLowerCase().indexOf("i4")&&i.createElement(i.Fragment,null,i.createElement("th",null,i.createElement("b",null,"Frequency")),i.createElement("th",null,i.createElement("b",null,"Energy")),i.createElement("th",null,i.createElement("b",null,"Power Factor")),i.createElement("th",null,i.createElement("b",null,"Voltage"))),i.createElement("th",null,"Manual"==E?"Status":""),t&&t.length>0&&(1==t.length?"0"!=t[0]:"0"!=t[0]&&"0"!=t[1]&&"0"!=t[2]&&"0"!=t[3])&&i.createElement("th",null,"Optimize Settings"))),i.createElement("tbody",null,a&&"inactive"!=a[0]&&i.createElement("tr",null,i.createElement("td",null,i.createElement("b",null,e&&e[0])),-1!=T.toLowerCase().indexOf("v4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,y&&y.mAmps_relay1?this.applyRule(parseFloat(y.mAmps_relay1)/1e3,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,y&&y.power_Wt_relay1?this.applyRule(parseFloat(y.power_Wt_relay1)/1e3,!0,3):0," W"))),-1!=T.toLowerCase().indexOf("i4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,k&&k.current_Amperes_Ch1?this.applyRule(k.current_Amperes_Ch1,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,k&&k.active_power_Watts_Ch1?this.applyRule(parseFloat(k.active_power_Watts_Ch1)/1e3,!0,3):0," W")),i.createElement("td",null,i.createElement("b",null,k&&k.frequency_Hz_Ch1?k.frequency_Hz_Ch1:0," Hz")),i.createElement("td",null,i.createElement("b",null,k&&k.import_active_energy_Wh_Ch1?k.import_active_energy_Wh_Ch1:0," Wh")),i.createElement("td",null,i.createElement("b",null,k&&k.power_factor_Ch1?k.power_factor_Ch1:0)),i.createElement("td",null,i.createElement("b",null,k&&k.voltage_volts_Ch1?this.applyRule(k.voltage_volts_Ch1,!0,80):0," volts"))),i.createElement("td",null,i.createElement(i.Fragment,null,i.createElement("div",null,"Relay Status: ",R.statusNotes&&R.statusNotes.length>0&&" "!=R.statusNotes[0]&&"(Triggered "+R.statusNotes[0]+")"),i.createElement("button",{type:"button",className:w?"btn":"btn btn-fill",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!1,1,!0)}},"Off"),i.createElement("button",{type:"button",className:w?"btn btn-fill":"btn",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!0,1,!0)}},"On"))),i.createElement("td",null,t&&"0"!=t[0]&&"C"!=t[0]&&i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Normal",0)}},"Normal"),i.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),a&&"inactive"!=a[1]&&i.createElement("tr",null,i.createElement("td",null,i.createElement("b",null,e&&e[1])),-1!=T.toLowerCase().indexOf("v4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,y&&y.mAmps_relay2?this.applyRule(parseFloat(y.mAmps_relay2)/1e3,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,y&&y.power_Wt_relay2?this.applyRule(parseFloat(y.power_Wt_relay2)/1e3,!0,3):0," W"))),-1!=T.toLowerCase().indexOf("i4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,k&&k.current_Amperes_Ch2?this.applyRule(k.current_Amperes_Ch2,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,k&&k.active_power_Watts_Ch2?this.applyRule(parseFloat(k.active_power_Watts_Ch2)/1e3,!0,3):0," W")),i.createElement("td",null,i.createElement("b",null,k&&k.frequency_Hz_Ch2?k.frequency_Hz_Ch2:0," Hz")),i.createElement("td",null,i.createElement("b",null,k&&k.import_active_energy_Wh_Ch2?k.import_active_energy_Wh_Ch2:0," Wh")),i.createElement("td",null,i.createElement("b",null,k&&k.power_factor_Ch2?k.power_factor_Ch2:0)),i.createElement("td",null,i.createElement("b",null,k&&k.voltage_volts_Ch2?this.applyRule(k.voltage_volts_Ch2,!0,80):0," volts"))),i.createElement("td",null,i.createElement(i.Fragment,null,i.createElement("div",null,"Relay Status: ",R.statusNotes&&R.statusNotes.length>0&&" "!=R.statusNotes[1]&&"(Triggered "+R.statusNotes[1]+")"),i.createElement("button",{type:"button",className:N?"btn":"btn btn-fill",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!1,2,!0)}},"Off"),i.createElement("button",{type:"button",className:N?"btn btn-fill":"btn",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!0,2,!0)}},"On"))),i.createElement("td",null,t&&"0"!=t[1]&&"C"!=t[1]&&i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:n&&"Normal"==n[1]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Normal",1)}},"Normal"),i.createElement("button",{type:"button",className:n&&"Optimize"==n[1]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Optimize",1)}},"Optimize")))),a&&"inactive"!=a[2]&&i.createElement("tr",null,i.createElement("td",null,i.createElement("b",null,e&&e[2])),-1!=T.toLowerCase().indexOf("v4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,y&&y.mAmps_relay3?this.applyRule(parseFloat(y.mAmps_relay3)/1e3,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,y&&y.power_Wt_relay3?this.applyRule(parseFloat(y.power_Wt_relay3)/1e3,!0,3):0," W"))),-1!=T.toLowerCase().indexOf("i4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,k&&k.current_Amperes_Ch3?this.applyRule(k.current_Amperes_Ch3,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,k&&k.active_power_Watts_Ch3?this.applyRule(parseFloat(k.active_power_Watts_Ch3)/1e3,!0,3):0," W")),i.createElement("td",null,i.createElement("b",null,k&&k.frequency_Hz_Ch3?k.frequency_Hz_Ch3:0," Hz")),i.createElement("td",null,i.createElement("b",null,k&&k.import_active_energy_Wh_Ch3?k.import_active_energy_Wh_Ch3:0," Wh")),i.createElement("td",null,i.createElement("b",null,k&&k.power_factor_Ch3?k.power_factor_Ch3:0)),i.createElement("td",null,i.createElement("b",null,k&&k.voltage_volts_Ch3?this.applyRule(k.voltage_volts_Ch3,!0,80):0," volts"))),i.createElement("td",null,i.createElement(i.Fragment,null,i.createElement("div",null,"Relay Status: ",R.statusNotes&&R.statusNotes.length>0&&" "!=R.statusNotes[2]&&"(Triggered "+R.statusNotes[2]+")"),i.createElement("button",{type:"button",className:C?"btn":"btn btn-fill",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!1,3,!0)}},"Off"),i.createElement("button",{type:"button",className:C?"btn btn-fill":"btn",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!0,3,!0)}},"On"))),i.createElement("td",null,t&&"0"!=t[2]&&"C"!=t[2]&&i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:n&&"Normal"==n[2]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Normal",2)}},"Normal"),i.createElement("button",{type:"button",className:n&&"Optimize"==n[2]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Optimize",2)}},"Optimize")))),a&&"inactive"!=a[3]&&i.createElement("tr",null,i.createElement("td",null,i.createElement("b",null,e&&e[3])),-1!=T.toLowerCase().indexOf("v4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,y&&y.mAmps_relay4?this.applyRule(parseFloat(y.mAmps_relay4)/1e3,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,"-"))),-1!=T.toLowerCase().indexOf("i4")&&i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("b",null,k&&k.current_Amperes_Ch4?this.applyRule(k.current_Amperes_Ch4,!0,.05):0," A")),i.createElement("td",null,i.createElement("b",null,k&&k.active_power_Watts_Ch4?this.applyRule(parseFloat(k.active_power_Watts_Ch4)/1e3,!0,3):0," W")),i.createElement("td",null,i.createElement("b",null,k&&k.frequency_Hz_Ch4?k.frequency_Hz_Ch4:0," Hz")),i.createElement("td",null,i.createElement("b",null,k&&k.import_active_energy_Wh_Ch4?k.import_active_energy_Wh_Ch4:0," Wh")),i.createElement("td",null,i.createElement("b",null,k&&k.power_factor_Ch4?k.power_factor_Ch4:0)),i.createElement("td",null,i.createElement("b",null,k&&k.voltage_volts_Ch4?this.applyRule(k.voltage_volts_Ch4,!0,80):0," volts"))),i.createElement("td",null,i.createElement(i.Fragment,null,i.createElement("div",null,"Relay Status: ",R.statusNotes&&R.statusNotes.length>0&&" "!=R.statusNotes[3]&&"(Triggered "+R.statusNotes[3]+")"),i.createElement("button",{type:"button",className:_?"btn":"btn btn-fill",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!1,4,!0)}},"Off"),i.createElement("button",{type:"button",className:_?"btn btn-fill":"btn",disabled:d||"Manual"!=E,onClick:function(){r.handleRelayOnOff(!0,4,!0)}},"On"))),i.createElement("td",null,t&&"0"!=t[3]&&"C"!=t[3]&&i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:n&&"Normal"==n[3]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Normal",3)}},"Normal"),i.createElement("button",{type:"button",className:n&&"Optimize"==n[3]?"btn btn-fill":"btn",disabled:A,onClick:function(){r.handleRelayOptimizeSettings("Optimize",3)}},"Optimize"))))))),i.createElement("div",{className:"col-md-8 col-xs-12 InsightRow"},T&&-1!=T.indexOf("OneRelay")&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-6"},i.createElement(i.Fragment,null,i.createElement("div",{className:"RelayHeading"},"Relay Status: ",R.statusNotes&&R.statusNotes.length>0&&" "!=R.statusNotes[0]&&"(Triggered "+R.statusNotes[0]+")"),i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:D?"btn":"btn btn-fill",disabled:d||"Manual"!=E,onClick:function(){M[0]="Manually",r.handleI1RelayOnOff(!1)}},"Off"),i.createElement("button",{type:"button",className:D?"btn btn-fill":"btn",disabled:d||"Manual"!=E,onClick:function(){M[0]="Manually",r.handleI1RelayOnOff(!0)}},"On")))),t&&"0"!=t[0]&&"C"!=t[0]&&i.createElement("div",{className:"col-md-6"},i.createElement("div",{className:"RelayHeading"},"Optimize Settings"),i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",onClick:function(){r.handleRelayOptimizeSettings("Normal",0)}},"Normal"),i.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",onClick:function(){r.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),T&&-1==T.indexOf("OneRelay")&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-4"},i.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",i.createElement("b",null,y&&y.nominal_src_volts?y.nominal_src_volts:0," "))),i.createElement("div",{className:"col-md-4"},i.createElement("h4",{className:"padding-5 margin-5"},"Illuminance: ",i.createElement("b",null,l&&l.illuminance_lux?l.illuminance_lux:0," Lumens"))),i.createElement("div",{className:"col-md-4"},i.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",i.createElement("b",null,l&&l.motion_sensed&&l.motion_sensed>0?"True":"False"))))),i.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},i.createElement("div",{className:"btn-group"},i.createElement("button",{type:"button",className:"Local"==E?"btn btn-success btn-fill":"btn btn-success",disabled:""!=v&&"state"!=v,onClick:function(){if(T&&-1!=T.indexOf("V4"))for(var e=0;e<=3;e++)M[e]="Locally";else M[0]="Locally";r.handleRelayControlStatus("Local")}},"Local"),i.createElement("button",{type:"button",className:W?"btn btn-success btn-fill":"btn btn-success",disabled:""!=v&&"state"!=v,onClick:function(){r.handleRelayControlStatus("Remote")}},"Remote"),i.createElement("button",{type:"button",className:"Manual"==E?"btn btn-success btn-fill":"btn btn-success",disabled:!W,onClick:function(){r.handleRelayControlStatus("Manual")}},"Manual"),i.createElement("button",{type:"button",className:"Schedule"==E?"btn btn-success btn-fill":"btn btn-success",disabled:!W,onClick:function(){r.handleRelayControlStatus("Schedule")}},"Schedule")))),T&&i.createElement(m.a,{instance:V,buildingName:G,monconType:T,moncon:u.monitoringControl,deviceId:u.deviceID,monconRDFsLabel:u.rdfsLabel}),s&&s.monitoringControl&&i.createElement(m.a,{instance:V,buildingName:G,monconType:"CeilingSensor",moncon:s.monitoringControl,deviceId:s.deviceID,monconRDFsLabel:s.rdfsLabel}),i.createElement("div",{className:"accordion row padding-10",id:"accordionExample"+H,style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},i.createElement("div",{className:"",id:"headingOne"},i.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne"+H,style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne"+H,onClick:function(){r.setState({detailsExpanded:!b})}},i.createElement("i",{className:b?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),i.createElement("div",{id:"collapseOne"+H,className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"+H},i.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},i.createElement("h5",{className:"title"},i.createElement("strong",null,"IP Address:")," ",u.wirelessConfig&&u.wirelessConfig.ipAddress),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Controller IP Address:")," ",u.wirelessConfig&&u.wirelessConfig.controllerIPAddress),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Manufacturer:")," ",u.manufacturer),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Model:")," ",u.model),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Board Address:")," ",u.boardAddress),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Device ID:")," ",u.deviceID?u.deviceID:""),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Control Type sent to PI:")," ","Manual"==E?"10":I&&I.controlChoice?I.controlChoice:"Not selected"),i.createElement("h5",{className:"title"},i.createElement("strong",null,"Last Data Synced At:")," ",U)))),i.createElement("div",{className:d?"InsightApplyChanges":"hidden"},A?i.createElement("h4",null,"Do you want to apply these changes (Optimize Settings: ",L,") ?"):i.createElement("h4",null,"Do you want to apply these changes (Relay ",T&&-1!=T.indexOf("OneRelay")?" : "+(D?"on":"off"):S+" : "+(x?"on":"off"),")?"),i.createElement("div",null,i.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return r.cancelSend()}},"Cancel"),"\xa0",i.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return r.resetChanges(!0)}},"Reset"),"\xa0",i.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return r.applyChanges()}},"Apply Changes"))))))),j&&i.createElement(i.Fragment,null,i.createElement("button",{type:"button",id:"btnDialogRelayControl",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#dialogRelayControl"}," . "),i.createElement(h.a,{id:"dialogRelayControl",relayDeviceName:H,buildingName:G,onCloseRelayControlDialog:this.onCloseRelayControlDialog,refreshRelayControlDB:this.fetchRelayControlSettings}))))},t}(i.Component);t.default=S},1660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i,r=n(2),o=(n.n(r),n(678)),l=n(658),s=n(23),c=n(31),u=n(116),d=n(654),m=n(10),h=n(781),p=n(668),f=n(669),g=n(11),v=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__assign||function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},x=0,S=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),Old_CeilingSensorBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[],showLogs:!1},a=a=n,n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n}return v(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.setIntervalStart(),[2]}})})},t.prototype.componentWillUnmount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){return clearInterval(i),[2]})})},t.prototype.setIntervalStart=function(){var e=this;i&&clearInterval(i),i=setInterval(function(){var t=e.state.modelChanged;x++,!t&&x>=3&&(e.resetChanges(!1),Object(u.a)(!1),x=0)},1e3)},t.prototype._fetchData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,i,r,o,s=this;return E(this,function(c){switch(c.label){case 0:return this.state,e=this.props,t=e.CeilingSensorBoardName,n=e.buildingName,t?(Object(u.a)(!0),[4,Object(d.h)(this.props.buildingName)]):[3,3];case 1:return a=c.sent(),i=a&&a.length>0&&a.map(function(e){return{value:Object(m.g)(e.ontology),label:Object(m.g)(e.rdfsLabel)}}),r=Object(),[4,Object(l.t)(t,n)];case 2:r=c.sent(),localStorage.getItem(r.deviceID)&&localStorage.getItem(r.deviceID).length>0&&(o=JSON.parse(localStorage.getItem(r.deviceID)),this.setState({CeilingSensorBoardInfo:o,Old_CeilingSensorBoardInfo:b({},o),modelChanged:!1,currentChange:""})),this.setState({Moncon:r,EquipmentList:i},function(){return y(s,void 0,void 0,function(){return E(this,function(e){return this._fetchCeilingSensorBoardInfo(!0),[2]})})}),Object(u.a)(!1),c.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n;return E(this,function(a){switch(a.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,[4,Object(o.n)(t).then(function(e){var n=e[0];return!n||n&&n.error?(Object(c.a)("Error occurred while fetching ceiling sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return n=a.sent(),this.setState({CeilingSensorBoardInfo:n,Old_CeilingSensorBoardInfo:b({},n),modelChanged:!1,currentChange:""}),e&&Object(u.a)(!1),[2]}})})},t.prototype.handleChange=function(e,t){var n=this.state.CeilingSensorBoardInfo;n[e]=t,this.setState({CeilingSensorBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.cancelSend=function(){this.setState({modelChanged:!1,currentChange:""})},t.prototype.resetChanges=function(e){return y(this,void 0,void 0,function(){var t=this;return E(this,function(n){return this.setState({modelChanged:!1,currentChange:""},function(){return y(t,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,this._fetchCeilingSensorBoardInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return y(this,void 0,void 0,function(){var n=this;return E(this,function(i){return Object(u.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return y(n,void 0,void 0,function(){var n=this;return E(this,function(i){return setTimeout(function(){n.resetChanges(!0)},5e3),Object(o.G)(e,t,this.state.Old_CeilingSensorBoardInfo).then(function(e){e.success?Object(c.b)("Changes applied successfully. "):e.error&&Object(c.a)(e.reason)}).catch(function(e){Object(c.a)("Some error orccured. ")}),setTimeout(function(){a._fetchCeilingSensorBoardInfo()},5e3),Object(u.a)(!1),[2]})})}),[2]})})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,a=t.buildingName,i=t.CeilingSensorBoardName,o=this.state,l=o.CeilingSensorBoardInfo,c=o.Moncon,u=o.modelChanged,d=o.detailsExpanded,m=o.showLogs,v=JSON.parse(g.a.getItem("user")),b="not refreshed";return l&&l.timestamp&&(b=new Date(l.timestamp).toLocaleString()),m?r.createElement(p.a,{instance:n,buildingName:a,fromEntityList:!0,module:f.a.Assets,ontology:c.monitoringControl,entityName:"Device",onLogClose:function(){return e.setState({showLogs:!1})}}):r.createElement("div",{className:"content"},r.createElement("div",{className:"container-fluid"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"card",id:"InsightsList"},r.createElement("div",{className:"container-fluid"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},v&&"1"==v.role&&r.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",r.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),r.createElement("div",{className:"header"},r.createElement("h3",{className:"title"},r.createElement("strong",null,c.rdfsLabel)," "),r.createElement("h4",{className:"title"},r.createElement("strong",null,this.props.type.toUpperCase(),":",c&&c.relatedEquipment&&c.relatedEquipment.map(function(t,n){return r.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==c.relatedEquipment.length?"":",")}))))))),r.createElement("div",{className:"content"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp"},r.createElement("h4",{className:"padding-5 margin-5"},"Temp: ",r.createElement("b",null,Object(s.a)(l&&l.temp_celsius?l.temp_celsius:0).toFixed(2),"\xb0F")),r.createElement("h4",{className:"padding-5 margin-5"},"CO2: ",r.createElement("b",null,l&&l.equiCO2_ppm?l.equiCO2_ppm+" ppm":"-")),r.createElement("h4",{className:"padding-5 margin-5"},"Altitude: ",r.createElement("b",null,l&&l.altitude_m?l.altitude_m+" m":"-")),r.createElement("h4",{className:"padding-5 margin-5"},"Pressure: ",r.createElement("b",null,l&&l.pressure_hPa?l.pressure_hPa+" hPa":"-")),r.createElement("h4",{className:"padding-5 margin-5"},"illuminance: ",r.createElement("b",null,l&&l.illuminance_lux?l.illuminance_lux:0," Lumens")),r.createElement("h4",{className:"padding-5 margin-5"},"Gas Resistance: ",r.createElement("b",null,l&&l.gasResistance_kOhm?l.gasResistance_kOhm+" kOhm":"-"))),r.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},r.createElement("h4",{className:"padding-5 margin-5"},"Humidity: ",r.createElement("b",null,l&&l.relhumidity_pct?l.relhumidity_pct+" %":"-")),r.createElement("h4",{className:"padding-5 margin-5"},"TVOC: ",r.createElement("b",null,l&&l.tvoc_ppm?l.tvoc_ppm+" ppm":"-")),r.createElement("h4",{className:"padding-5 margin-5"},"No. of BT Devices: ",r.createElement("b",null,l&&l.num_BTdev?l.num_BTdev:"-")),r.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",r.createElement("b",null,l&&l.motion_sensed&&l.motion_sensed>0?"True":"False")),r.createElement("h4",{className:"padding-5 margin-5"},"WIFI Temp: ",r.createElement("b",null,Object(s.a)(l&&l.wifiTemp1_celsius?l.wifiTemp1_celsius:0).toFixed(2),"\xb0F")))),r.createElement("br",null),c.monitoringControl&&c.monitoringControlDeviceType&&r.createElement(h.a,{instance:n,buildingName:a,monconType:c.monitoringControlDeviceType,moncon:c.monitoringControl,deviceId:c.deviceID,monconRDFsLabel:c.rdfsLabel}),r.createElement("div",{className:"accordion row padding-10",id:"accordionExample"+i,style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},r.createElement("div",{className:"",id:"headingOne"},r.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne"+i,style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne"+i,onClick:function(){e.setState({detailsExpanded:!d})}},r.createElement("i",{className:d?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),r.createElement("div",{id:"collapseOne"+i,className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"+i},r.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},r.createElement("h5",{className:"title"},r.createElement("strong",null,"IP Address:")," ",c.wirelessConfig&&c.wirelessConfig.ipAddress),r.createElement("h5",{className:"title"},r.createElement("strong",null,"Controller IP Address:")," ",c.wirelessConfig.controllerIPAddress),r.createElement("h5",{className:"title"},r.createElement("strong",null,"Manufacturer:")," ",c.manufacturer),r.createElement("h5",{className:"title"},r.createElement("strong",null,"Model:")," ",c.model),r.createElement("h5",{className:"title"},r.createElement("strong",null,"Board Address:")," ",c.boardAddress),r.createElement("h5",{className:"title"},r.createElement("strong",null,"Device ID:")," ",c.deviceID?c.deviceID:""),r.createElement("h5",{className:"title"},r.createElement("strong",null,"Last Data Synced At:")," ",b)))),r.createElement("div",{className:u?"InsightApplyChanges":"hidden"},r.createElement("h4",null,"Do you want to apply these changes?"),r.createElement("div",null,r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",r.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",r.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(c,l)}},"Apply Changes")))))))))},t}(r.Component);t.default=S},1661:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(710)),r=n(658),o=n(31),l=n(701),s=n(116),c=n(654),u=n(10),d=n(781),m=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CbW406BoardInfo:Object(),Old_Cbw406BoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[],intervalId:Object(),intervalCounter:0},n,n._fetchData=n._fetchData.bind(n),n._fetchCBW406BoardInfo=n._fetchCBW406BoardInfo.bind(n),n}return m(t,e),t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this,t=this.state.intervalId;t&&clearInterval(t),t=setInterval(function(){return p(e,void 0,void 0,function(){var e;return f(this,function(t){return e=this.state.intervalCounter,++e>=1&&(this._fetchCBW406BoardInfo(!1),e=0),this.setState({intervalCounter:e}),[2]})})},1e3)},t.prototype.componentWillUnmount=function(){return p(this,void 0,void 0,function(){return f(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._fetchData=function(){return p(this,void 0,void 0,function(){var e,t,n,a,i,o,l,d=this;return f(this,function(m){switch(m.label){case 0:return this.state,e=this.props,t=e.deviceName,n=e.buildingName,t?(Object(s.a)(!0),[4,Object(c.h)(this.props.buildingName)]):[3,3];case 1:return a=m.sent(),i=a&&a.length>0&&a.map(function(e){return{value:Object(u.g)(e.ontology),label:Object(u.g)(e.rdfsLabel)}}),o=Object(),[4,Object(r.t)(t,n)];case 2:o=m.sent(),localStorage.getItem(o.deviceID)&&localStorage.getItem(o.deviceID).length>0&&(l=JSON.parse(localStorage.getItem(o.deviceID)),this.setState({CbW406BoardInfo:l,Old_Cbw406BoardInfo:h({},l),modelChanged:!1,currentChange:""})),this.setState({Moncon:o,EquipmentList:i},function(){return p(d,void 0,void 0,function(){return f(this,function(e){return this._fetchCBW406BoardInfo(!0),[2]})})}),Object(s.a)(!1),m.label=3;case 3:return[2]}})})},t.prototype._fetchCBW406BoardInfo=function(e){return p(this,void 0,void 0,function(){var t,n;return f(this,function(a){switch(a.label){case 0:return e&&Object(s.a)(!0),t=this.state.Moncon,[4,Object(i.f)(t.topic,new Date,new Date,!0).then(function(e){var n=e[0];return!n||n&&n.error?(Object(o.a)("Error occurred while fetching CBW406 sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return n=a.sent(),this.setState({CbW406BoardInfo:n,Old_Cbw406BoardInfo:h({},n),modelChanged:!1,currentChange:""}),e&&Object(s.a)(!1),[2]}})})},t.prototype.resetChanges=function(e){return p(this,void 0,void 0,function(){var t=this;return f(this,function(n){return this.setState({modelChanged:!1,currentChange:""},function(){return p(t,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this._fetchCBW406BoardInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.props,n=t.deviceName,i=t.instance,r=t.buildingName,o=t.type,s=t.hideTabs,c=this.state,u=c.CbW406BoardInfo,m=c.Moncon,h=c.detailsExpanded,p="not refreshed";return u&&u.timestamp&&(p=new Date(u.timestamp).toLocaleString()),a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!s&&a.createElement(l.a,{InsightName:n,ControlName:"CBW406",buildingName:r,instance:i,type:o,hideADP:!0,hideSchedule:!0,hideAlarms:!0}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"header"},a.createElement("h3",{className:"title"},a.createElement("strong",null,m.rdfsLabel)," "),a.createElement("h4",{className:"title"},a.createElement("strong",null,this.props.type.toUpperCase(),":",m&&m.relatedEquipment&&m.relatedEquipment.map(function(t,n){return a.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==m.relatedEquipment.length?"":",")}))),a.createElement("h4",{className:"title mt-2"},a.createElement("strong",null,"Voltage In: ",u.vin)),a.createElement("div",{className:"row mt-5"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp"},a.createElement("b",{className:"devcieCard-h"},"Refrigerator 1"),a.createElement("div",{className:"devicesCard"},a.createElement("h4",{className:"padding-5 margin-5"},"T3 Front: ",a.createElement("b",null,u&&u.t3Ref1Front?u.t3Ref1Front.toFixed(2):0)),a.createElement("h4",{className:"padding-5 margin-5"},"T6 Compresssor In: ",a.createElement("b",null,u&&u.t6Ref1CompressorIn?u.t6Ref1CompressorIn.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T4 Back: ",a.createElement("b",null,u&&u.t4Ref1Back?u.t4Ref1Back.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T7 Compresssor Out: ",a.createElement("b",null,u&&u.t7Ref1CompressorOut?u.t7Ref1CompressorOut.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T5 Evap Fan: ",a.createElement("b",null,u&&u.t5Ref1EvapFan?u.t5Ref1EvapFan.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T8 Wax Probe: ",a.createElement("b",null,u&&u.t8Ref1WaxProbe?u.t8Ref1WaxProbe.toFixed(2):"-")))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("b",{className:"devcieCard-h"},"Refrigerator 2"),a.createElement("div",{className:"devicesCard"},a.createElement("h4",{className:"padding-5 margin-5"},"T3 Front: ",a.createElement("b",null,u&&u.t3Ref2Front?u.t3Ref2Front.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T6 Compresssor In: ",a.createElement("b",null,u&&u.t6Ref2CompressorIn?u.t6Ref2CompressorIn.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T4 Back: ",a.createElement("b",null,u&&u.t4Ref2Back?u.t4Ref2Back.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T7 Compresssor Out: ",a.createElement("b",null,u&&u.t7Ref2CompressorOut?u.t7Ref2CompressorOut.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T5 Evap Fan: ",a.createElement("b",null,u&&u.t5Ref2EvapFan?u.t5Ref2EvapFan.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T8 Wax Probe: ",a.createElement("b",null,u&&u.t8Ref2WaxProbe?u.t8Ref2WaxProbe.toFixed(2):"-"))))))))),a.createElement("div",{className:"content"},m.monitoringControl&&m.monitoringControlDeviceType&&a.createElement(d.a,{instance:i,buildingName:r,monconType:m.monitoringControlDeviceType,moncon:m.monitoringControl,deviceId:m.deviceID,monconRDFsLabel:m.rdfsLabel}),a.createElement("div",{className:"accordion row padding-10",id:"accordionExample"+n,style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},a.createElement("div",{className:"",id:"headingOne"},a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne"+n,style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne"+n,onClick:function(){e.setState({detailsExpanded:!h})}},a.createElement("i",{className:h?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),a.createElement("div",{id:"collapseOne"+n,className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"+n},a.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},a.createElement("h5",{className:"title"},a.createElement("strong",null,"IP Address:")," ",m&&m.wirelessConfig&&m.wirelessConfig.ipAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Controller IP Address:")," ",m.wirelessConfig&&m.wirelessConfig.controllerIPAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Manufacturer:")," ",m.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Model:")," ",m.model),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Device ID:")," ",m&&m.deviceID?m.deviceID:""),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Last Data Synced At:")," ",p))))))))))},t}(a.Component);t.default=g},2079:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(1054)),r=n(23),o=n(1065),l=n(678),s=n(663),c=n.n(s),u=n(1298),d=n.n(u),m=n(1215),h=(n.n(m),n(116)),p=n(710),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),g=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphTab:"graph1",graphTitle:"",graphData:Object(),graphDataForSecondSide:Object(),axis:Object(),axisForSecondSide:Object(),grid:Object(),from:new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-1)),to:new Date(Date.now()),yAxislabel:"",yAxislabelForSecondSide:"",totalGraphs:1},n}return f(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,Promise,function(){var e,t,n,a=this;return v(this,function(i){return e=Object(),t=e={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"},culling:{max:5}},y:{label:""}},n={x:{show:!0},y:{show:!0}},this.setState({axis:t,grid:n,axisForSecondSide:e},function(){a.loadGraph()}),[2]})})},t.prototype.loadGraph=function(){return g(this,void 0,void 0,function(){var e,t,n;return v(this,function(a){switch(a.label){case 0:return e=this.props.graphType,t=this.state.graphTab,n=1,Object(h.a)(!0),"PTAC"!=e?[3,2]:(n=3,[4,this.getPTACGraph(t)]);case 1:return a.sent(),[3,4];case 2:return-1==e.indexOf("Refrigerator")?[3,4]:(n=4,[4,this.getRefrigeratorGraphs(t)]);case 3:a.sent(),a.label=4;case 4:return this.setState({totalGraphs:n}),Object(h.a)(!1),[2]}})})},t.prototype.onChangeGraphTab=function(e){var t=this;this.setState({graphTab:"",graphData:{x:"x",columns:[]}},function(){t.setState({graphTab:e},function(){t.loadGraph()})})},t.prototype.getPTACGraph=function(e){return g(this,void 0,void 0,function(){var t,n,a,s,c,u,d,m,h,p,f,g,b,y,E,x,S,w,N,C,_,T,O;return v(this,function(v){switch(v.label){case 0:return t=this.props,n=t.buildingName,a=t.solution,s=t.equipment,c=t.devices,u=this.state,d=u.from,m=u.to,h=this.state.axis,p="",f="",g={x:"x",columns:[]},"graph1"!=e?[3,2]:(b=[],C=[],p="\xb0F",f="Set Point Temperature Over Time",[4,Object(o.d)(n,a,s,d,m)]);case 1:if((S=v.sent())&&S.length>0)for(T=0;T<S.length;T++)(O=S[T]).mode==i.c.Cool?b.push(""+O.coolTemp):O.mode==i.c.Heat?b.push(""+O.heatTemp):O.mode==i.c.Off&&b.push("0"),C.push(new Date(O.timestamp));return b.unshift("Set Point Temperature"),C.unshift("x"),g.columns=[b,C],[3,8];case 2:return"graph2"!=e?[3,5]:(p="\xb0F",f="Room Temperature Over Time",c&&c.length>0&&(E=c.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ceiling")}))&&E.topic?[4,Object(l.c)(E.topic,d,m,!1)]:[3,4]);case 3:if(x=v.sent(),b=[],C=[],x&&x.length>0)for(T=0;T<x.length;T++)_=x[T],y=_.temp_celsius?Object(r.a)(_.temp_celsius):0,b.push(""+y),C.push(new Date(_.timestamp));b.unshift("Room Temperature"),C.unshift("x"),g.columns=[b,C],v.label=4;case 4:return[3,8];case 5:return"graph3"!=e?[3,8]:(p="Room Occupancy",f="Motion Sensor & PTAC Occupancy Over Time",c&&c.length>0&&(E=c.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ceiling")}))&&E.topic?[4,Object(l.c)(E.topic,d,m,!1)]:[3,8]);case 6:return x=v.sent(),[4,Object(o.d)(n,a,s,d,m)];case 7:if(S=v.sent(),w=[],N=[],C=[],x&&x.length>0)for(T=0;T<x.length;T++)_=x[T],w.push(_&&_.motion_sensed?"1":"0"),C.push(new Date(_.timestamp));if(S&&S.length>0)for(T=0;T<S.length;T++)O=S[T],N.push(O.isRoomOccupied?"UNOCCUPIED"==O.isRoomOccupied?"0":"OCCUPIED"==O.isRoomOccupied?"1":"0.5":"0"),C.push(new Date(O.timestamp));w.unshift("Ceiling Sensor"),N.unshift("PTAC Occupancy Sensor"),C.unshift("x"),g.columns=[w,N,C],v.label=8;case 8:return h&&h.y&&h.y.label&&(h.y.label=p),this.setState({graphData:g,yAxislabel:p,graphTitle:f,axis:h}),[2]}})})},t.prototype.getRefrigeratorGraphs=function(e){return g(this,void 0,void 0,function(){var t,n,a,i,r,o,s,c,u,d,m,h,f,g,b,y,E,x,S,w,N,C,_,T,O,D,A,L,I,P,k,j,M,R,F,B,V,G,H,z;return v(this,function(v){switch(v.label){case 0:return t=this.props,n=t.devices,a=t.graphType,i=this.state,r=i.from,o=i.to,s=this.state,c=s.axis,u=s.axisForSecondSide,d="",m="",h="",f={x:"x",columns:[]},g={x:"x",columns:[]},b=n.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("406")}),y=n.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("418")}),E=n.filter(function(e){return-1!=e.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")}),x=Object(),S=Object(),w=Object(),E&&E.length>0&&(E[0]&&(x=E[0]),E[1]&&(S=E[1]),E[2]&&(w=E[2])),N=[],C=[],"graph1"!=e?[3,5]:b&&b.topic?[4,Object(p.f)(b.topic,r,o)]:[3,2];case 1:N=v.sent(),v.label=2;case 2:return y&&y.topic?[4,Object(p.g)(y.topic,r,o)]:[3,4];case 3:C=v.sent(),v.label=4;case 4:if(d="Temperature \xb0F",m="Value",h="Temperature Setting To Pi",B=[],V=[],k=[],j=[],D=[],A=[],N&&N.length>0)for(H=0;H<N.length;H++)z=N[H],1!=a.indexOf("ref1")?(B.push(z.t3Ref1Front),V.push(z.t4Ref1Back),k.push(z.t8Ref1WaxProbe)):(B.push(z.t3Ref2Front),V.push(z.t4Ref2Back),k.push(z.t8Ref2WaxProbe)),D.push(new Date(z.timestamp));if(C&&C.length>0)for(H=0;H<C.length;H++)z=C[H],j.push(z.a13Ref1Compressor),A.push(new Date(z.timestamp));return B.unshift("T3 Ref Front"),V.unshift("T4 Ref Back"),k.unshift("T8 Ref Wax Probe"),j.unshift("A13 Compressor"),D.unshift("x"),A.unshift("x"),f.columns=[B,V,k,D],g.columns=[j,A],[3,20];case 5:return"graph2"!=e?[3,10]:b&&b.topic?[4,Object(p.f)(b.topic,r,o)]:[3,7];case 6:N=v.sent(),v.label=7;case 7:return y&&y.topic?[4,Object(p.g)(y.topic,r,o)]:[3,9];case 8:C=v.sent(),v.label=9;case 9:if(d="Temperature \xb0F",m="Values",h="CBW406 & CBW418 Information",B=[],V=[],k=[],j=[],M=[],R=[],_=[],T=[],O=[],D=[],A=[],N&&N.length>0)for(H=0;H<N.length;H++)z=N[H],1!=a.indexOf("ref1")?(B.push(z.t3Ref1Front),V.push(z.t4Ref1Back),k.push(z.t5Ref1EvapFan),j.push(z.t6Ref1CompressorIn),M.push(z.t7Ref1CompressorOut),R.push(z.t8Ref1WaxProbe)):(B.push(z.t3Ref2Front),V.push(z.t4Ref2Back),k.push(z.t5Ref2EvapFan),j.push(z.t6Ref2CompressorIn),M.push(z.t7Ref2CompressorOut),R.push(z.t8Ref2WaxProbe)),D.push(new Date(z.timestamp));if(C&&C.length>0)for(H=0;H<C.length;H++)z=C[H],_.push(z.a13Ref1Compressor),T.push(z.a15Ref1PressureSensor),O.push(parseFloat((120*Math.sqrt(3)*z.a13Ref1Compressor).toFixed(2))),A.push(new Date(z.timestamp));return B.unshift("T3 Ref Front"),V.unshift("T4 Ref Back"),k.unshift("T5 Ref Evap Fan"),j.unshift("T6 Compressor In"),M.unshift("T7 Compressor Out"),R.unshift("T8 Ref Wax Probe"),_.unshift("A13 Compressor (psi)"),T.unshift("A15 Pressure Sensor (psi)"),O.unshift("Amalgamated Watts (watt)"),D.unshift("x"),A.unshift("x"),f.columns=[B,V,k,j,M,R,D],g.columns=[_,T,O,A],[3,20];case 10:return"graph3"!=e?[3,17]:(L=[],I=[],P=[],x&&x.topic?[4,Object(l.f)(x.topic,r,o)]:[3,12]);case 11:L=v.sent(),v.label=12;case 12:return S&&S.topic?[4,Object(l.f)(S.topic,r,o)]:[3,14];case 13:I=v.sent(),v.label=14;case 14:return w&&w.topic?[4,Object(l.f)(w.topic,r,o)]:[3,16];case 15:P=v.sent(),v.label=16;case 16:if(d="On/Off State",m="Totalized Watt-Hour",h="Relay Pi Information",B=[],V=[],k=[],j=[],M=[],R=[],G=[],L&&L.length>0)for(H=0;H<L.length;H++)F=L[H],B.push(F.i1relay_state&&"1"==F.i1relay_state?1:0),V.push(F.import_active_energy_Wh?parseFloat(F.import_active_energy_Wh):0),G.push(new Date(F.timestamp));if(I&&I.length>0)for(H=0;H<I.length;H++)F=I[H],k.push(F.i1relay_state&&"1"==F.i1relay_state?1:0),j.push(F.import_active_energy_Wh?parseFloat(F.import_active_energy_Wh):0),G.push(new Date(F.timestamp));if(P&&P.length>0)for(H=0;H<P.length;H++)F=P[H],M.push(F.i1relay_state&&"1"==F.i1relay_state?1:0),R.push(F.import_active_energy_Wh?parseFloat(F.import_active_energy_Wh):0),G.push(new Date(F.timestamp));return B.unshift("R18 I1 Relay State"),V.unshift("R18 I1 Totalized Watt-Hour"),k.unshift("R19 I1 Relay State"),j.unshift("R19 I1 Totalized Watt-Hour"),M.unshift("R20 I1 Relay State"),R.unshift("R20 I1 Totalized Watt-Hour"),G.unshift("x"),f.columns=[B,k,M,G],g.columns=[V,j,R,G],c.y={min:0,max:1},u.y={min:0,max:1},[3,20];case 17:return"graph4"!=e?[3,20]:(d="Subcooling",m="Temperature \xb0F",h="Evap Fan and Compressor Out Information",B=[],V=[],G=[],b&&b.topic?[4,Object(p.f)(b.topic,r,o)]:[3,19]);case 18:N=v.sent(),v.label=19;case 19:if(N&&N.length>0)for(H=0;H<N.length;H++)z=N[H],1!=a.indexOf("ref1")?(B.push(z.t5Ref1EvapFan),V.push(z.t7Ref1CompressorOut)):(B.push(z.t5Ref2EvapFan),V.push(z.t7Ref2CompressorOut)),G.push(new Date(z.timestamp));B.unshift("T5 Evap Fan"),V.unshift("T7 Compressor Out"),G.unshift("x"),f.columns=[],g.columns=[B,V,G],v.label=20;case 20:return c&&c.y&&c.y.label&&(c.y.label=d),u&&u.y&&u.y.label&&(u.y.label=m),this.setState({graphData:f,graphDataForSecondSide:g,yAxislabel:d,yAxislabelForSecondSide:m,graphTitle:h,axis:c,axisForSecondSide:u}),[2]}})})},t.prototype.handleTimeChange=function(e,t){t?this.setState({from:e,graphData:{x:"x",columns:[]}}):this.setState({to:e,graphData:{x:"x",columns:[]}})},t.prototype.render=function(){for(var e=this,t=(this.props,this.state),n=t.graphTab,i=t.totalGraphs,r=t.graphData,o=t.axis,l=t.grid,s=t.from,u=t.to,m=t.graphTitle,h=t.axisForSecondSide,p=t.graphDataForSecondSide,f=[],g=1;g<=i;g++)f.push("graph"+g);return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"btn-group"},f&&f.map(function(t,i){return a.createElement("button",{className:"btn "+(n==t?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.onChangeGraphTab(t)}},a.createElement("span",{className:"vertical-align"},"Graph ",i+1))}))),a.createElement("div",{className:"row mt-5"},a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"col-md-2 padding-5"},a.createElement("label",null,"From: \xa0")),a.createElement("div",{className:"col-md-10 no-padding"},a.createElement(c.a,{id:"startTime",className:"form-control",selected:s,onChange:function(t){return e.handleTimeChange(t,!0)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),a.createElement("div",{className:"col-md-3 col-sm-3"},a.createElement("div",{className:"col-md-2 padding-5"},a.createElement("label",null,"To: \xa0")),a.createElement("div",{className:"col-md-10 no-padding"},a.createElement(c.a,{id:"startTime",className:"form-control",selected:u,onChange:function(t){return e.handleTimeChange(t,!1)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),a.createElement("div",{className:"col-md-6 col-sm-6"},a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.loadGraph()}},a.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Load Graph"))),a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("h4",{className:"mb-2 center"},m),a.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},n&&r&&r.columns&&r.columns.length>0&&o&&l&&a.createElement(d.a,{data:r,size:1e3,axis:o,unloadBeforeLoad:!0,grid:l}),n&&p&&p.columns&&p.columns.length>0&&h&&l&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null),a.createElement(d.a,{data:p,size:1e3,axis:h,unloadBeforeLoad:!0,grid:l})))))))},t}(a.Component);t.a=b},3510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=n.n(a),r=n(650),o=n(1260),l=n(3511),s=n(116),c=n(23),u=n(710),d=n(1057),m=n(1462),h=n(1058),p=n(1490),f=n(3512),g=n(3515),v=n(3516),b=n(1103),y=n(3517),E=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),x=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},S=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},w=function(e){function t(t){var n=e.call(this,t)||this;return n.state={solution:Object(),generatorDevice:Object(),currentEquipment:"",currentEquipmentIndex:0,currentTab:"ControllerGUI",showControllers:[],selectedAssetType:"",selectedAssetLabel:"",selectedComponnet:Object(),selectedDevice:Object(),selectedEquipment:Object(),selectedPoint:Object(),devicesList:[],analogControllerDevice:Object(),allRelatedFloors:[],currentFloorTabIndex:0,currentFloorOntology:"",floorOntologies:[],selectedDeviceMappingModel:Object(),deviceMappingModels:[]},n.getSolutionInDetail=n.getSolutionInDetail.bind(n),n.getUnique=n.getUnique.bind(n),n}return E(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return e=this.props.solution,Object(c.D)(!1),[4,this.getSolutionInDetail(e)];case 1:return t.sent(),[4,this.fetchDeviceMapping(e)];case 2:return t.sent(),[2]}})})},t.prototype.getSolutionInDetail=function(e){return x(this,void 0,void 0,function(){var t,n,a,i,r,o,l,c,d=this;return S(this,function(m){switch(m.label){case 0:return Object(s.a)(!0),t=this.props.buildingName,n=Object(),[4,Object(u.p)(t,e)];case 1:if(a=m.sent(),(n=a&&a.length>0&&a[0]?a[0]:Object())&&n.equipmentTemplatesOntology){if(i=n.equipmentTemplatesOntology.split(","),r=[],o=[],n){if(n.equipmentByTemplate&&n.equipmentByTemplate.length>0&&n.equipmentByTemplate[0])for(l=0;l<n.equipmentByTemplate.length;l++)c=n.equipmentByTemplate[l],r.push({label:c.equipment.rdfsLabel,value:i[l]});n.devices&&n.devices.map(function(e){return o.push(!1)})}this.setState({solution:n,currentEquipmentIndex:0,currentEquipment:e,showControllers:o},function(){var e="";n.controllerGUI?e="ControllerGUI":n.oneLineGUI?e="SymbolicGUI":n.floorPlanGUI&&(e="SymbolicGUI"),d.setState({currentTab:e})}),this.fetchEquipmentTemplateFromSolution(0)}return Object(s.a)(!1),[2]}})})},t.prototype.fetchEquipmentTemplateFromSolution=function(e){var t=this;Object(s.a)(!0);var n=this.state.solution;if(n&&n.equipmentByTemplate&&n.equipmentByTemplate.length>0){var a=[],i=Object(),r=Object(),o=n.equipmentByTemplate[e];n&&(n.equipmentByTemplate&&n.equipmentByTemplate.length>0&&(i=n.equipmentByTemplate[e||0].equipment),n.devices&&(a=n.devices)),"Generator"==o.equipment.subclassType&&(i=o.equipment),"Refrigerator"==o.equipment.subclassType&&(r=a.find(function(e){return"cbw418"==e.monitoringControlDeviceType.toLocaleLowerCase()}));var l=[];i&&i.floor&&l.push(i.floor),a&&a.length>0&&a.map(function(e){return x(t,void 0,void 0,function(){return S(this,function(t){return l.push(e.floor),[2]})})}),this.setState({selectedEquipment:i,devicesList:a,analogControllerDevice:r,floorOntologies:l,currentFloorOntology:l[0].ontology})}Object(s.a)(!1)},t.prototype.fetchDeviceMapping=function(e){return x(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return Object(s.a)(!0),[4,Object(u.s)("",e)];case 1:return t=n.sent(),this.setState({deviceMappingModels:t}),Object(s.a)(!1),[2]}})})},t.prototype.setCollapseIcon=function(e){var t=e.currentTarget.children[0].className;e.currentTarget.children[0].className="fa fa-plus"==t?"fa fa-minus":"fa fa-plus"},t.prototype.getDeviceControllerData=function(e,t,n){var a=this.state.showControllers;a[t]=!n,this.setState({showControllers:a})},t.prototype.openDeviceMapping=function(e){return x(this,void 0,void 0,function(){var t,n,a;return S(this,function(i){switch(i.label){case 0:return t=this.props.solution,n=Object(),Object(s.a)(!0),[4,Object(u.s)("",t,e.deviceName)];case 1:return a=i.sent(),n=a&&a.length>0?a[0]:{ontology:Object(c.t)(12),solution:t,device:e.deviceName,devicePointNumber:"1",mappingHardware:"Compressor",deviceMonconType:e.monitoringControlDeviceType,boardAddress:e.boardAddress,controllerIPAddress:e.wirelessConfig&&e.wirelessConfig.controllerIPAddress?e.wirelessConfig.controllerIPAddress:"",ipAddress:e.wirelessConfig&&e.wirelessConfig.ipAddress?e.wirelessConfig.ipAddress:""},Object(s.a)(!1),this.setState({selectedDevice:e,selectedAssetLabel:e.rdfsLabel,selectedDeviceMappingModel:n}),document.getElementById("btnOpenDeviceMapping").click(),[2]}})})},t.prototype.changeDeviceMapping=function(e){var t=this.state.selectedDeviceMappingModel,n=e.target.name,a=e.target.value;t[""+n]=a,this.setState({selectedDeviceMappingModel:t})},t.prototype.showAssetProfile=function(e,t){var n=this,a=this.state,i=a.selectedAssetLabel,r=a.selectedComponnet,o=a.selectedDevice,l=a.selectedEquipment,s=a.selectedPoint;this.setState({selectedAssetType:""}),"Device"==t?(i=(o=e).rdfsLabel,this.setState({selectedAssetLabel:i,selectedDevice:o},function(){n.setState({selectedAssetType:t})})):"Point"==t?(i=(s=e).pointLabel,this.setState({selectedAssetLabel:i,selectedPoint:s},function(){n.setState({selectedAssetType:t})})):"Equipment"==t?(i=(l=e).rdfsLabel,this.setState({selectedAssetLabel:i,selectedEquipment:l},function(){n.setState({selectedAssetType:t})})):"Component"==t&&(i=(r=e).rdfsLabel,this.setState({selectedAssetLabel:i,selectedComponnet:r},function(){n.setState({selectedAssetType:t})})),document.getElementById("btnShowAssetProfile").click()},t.prototype.saveDeviceMapping=function(){return x(this,void 0,void 0,function(){var e,t;return S(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,t=this.state.selectedDeviceMappingModel,[4,Object(u.m)(e,t)];case 1:return n.sent(),[2]}})})},t.prototype.getUnique=function(){return x(this,void 0,void 0,function(){var e,t,n,a,i,r;return S(this,function(o){switch(o.label){case 0:for(e=this.state.floorOntologies,t=[],n=Object(),a=[],i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);if(!(t&&t.length>0))return[3,5];i=0,o.label=1;case 1:return i<t.length?[4,Object(c.u)(t[i])]:[3,4];case 2:r=o.sent(),n={ontology:t[i],name:r},a.push(n),o.label=3;case 3:return i++,[3,1];case 4:this.setState({allRelatedFloors:a,currentFloorOntology:a[0].ontology}),o.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,s=this.state,u=s.solution,E=s.currentTab,w=s.showControllers,N=s.selectedAssetType,C=s.selectedAssetLabel,_=s.selectedComponnet,T=s.selectedDevice,O=s.selectedEquipment,D=s.selectedPoint,A=s.devicesList,L=s.analogControllerDevice,I=s.allRelatedFloors,P=s.currentFloorTabIndex,k=s.currentFloorOntology,j=s.selectedDeviceMappingModel,M=O&&O.subclassType&&O.subclassType?O.subclassType:"";return i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"card",style:{padding:"1vw"}},i.a.createElement("div",{className:"row m-0"},i.a.createElement("div",{className:"col-md-12 p-0"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12 padding-5 margin-5"},i.a.createElement("div",{className:"btn-group"},u.controllerGUI?i.a.createElement("button",{className:"btn "+("ControllerGUI"==E?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"ControllerGUI"})}},i.a.createElement("span",{className:"vertical-align"},"Controller View")):"",u.oneLineGUI?i.a.createElement("button",{className:"btn "+("SymbolicGUI"==E?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"SymbolicGUI"})}},i.a.createElement("span",{className:"vertical-align"},"One-Line View")):"",u.floorPlanGUI?i.a.createElement("button",{className:"btn "+("FloorPlanGUI"==E?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){return x(e,void 0,void 0,function(){var e,t;return S(this,function(n){switch(n.label){case 0:return e=this.setState,t=[{currentTab:"FloorPlanGUI"}],[4,this.getUnique];case 1:return e.apply(this,t.concat([n.sent()])),[2]}})})}},i.a.createElement("span",{className:"vertical-align"},"Floor Plan View")):"",i.a.createElement("button",{className:"btn "+("SolutionDiagram"==E?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"SolutionDiagram"})}},i.a.createElement("span",{className:"vertical-align"},"Diagram"))))),"FloorPlanGUI"==E&&i.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},i.a.createElement("div",{className:"row m-0"},i.a.createElement("div",{className:"col-md-12 padding-5 margin-5"},i.a.createElement("button",{type:"button",title:"Show full view",className:"btn btn-dark btn-fill pull-right",style:{marginRight:10},onClick:function(){window.open("http://"+Object(c.m)()+"/#"+a+"/"+n+"/"+e.props.solution+"/BimSpace/FullScreen","_blank")}},"Show full view"," "),i.a.createElement("div",{className:"btn-group"},I.map(function(t,n){return i.a.createElement("button",{className:"btn "+(P==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){return e.setState({currentFloorTabIndex:n,currentFloorOntology:""},function(){e.setState({currentFloorOntology:t.ontology})})}},i.a.createElement("span",{className:"vertical-align"},t.name))})))),k&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement(b.a,{instance:a,buildingName:n,floorOntology:k,isView:!0,isMapper:!1})))),"ControllerGUI"==E&&i.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},u&&u.equipmentByTemplate&&u.equipmentByTemplate.map(function(t,r){return"Refrigerator"==t.equipment.subclassType?i.a.createElement("div",{className:"row m-0 padding-10"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.a.createElement("h4",{className:"panel-title"},i.a.createElement("div",null,i.a.createElement("span",{style:{marginLeft:"15px"}},t.equipment.rdfsLabel),i.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse-ref"+(r+1),href:"#collapse-ref"+(r+1),onClick:function(t){e.setCollapseIcon(t)}},i.a.createElement("i",{className:"fa fa-minus"}))))),i.a.createElement("div",{id:"collapse-ref"+(r+1),className:"panel-collapse collapse in"},i.a.createElement("div",{className:"panel-body"},i.a.createElement("div",{style:{height:"auto"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},A&&A.length>0&&i.a.createElement(l.a,{instance:a,buildingName:n,devices:A,solutionOntology:u.ontology,equipmentOntology:t.equipment.equipmentName,compressorBox:"ref"+(r+1)}))),r+1==1&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},L&&i.a.createElement(v.a,{buildingName:n,deviceName:L.deviceName,device:L}))))))))):"PTAC"==t.equipment.subclassType?i.a.createElement("div",{className:"row m-0 padding-10"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.a.createElement("h4",{className:"panel-title"},i.a.createElement("div",null,i.a.createElement("span",{style:{marginLeft:"15px"}},t.equipment.rdfsLabel),i.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse-ref"+(r+1),href:"#collapse-ref"+(r+1),onClick:function(t){e.setCollapseIcon(t)}},i.a.createElement("i",{className:"fa fa-minus"}))))),i.a.createElement("div",{id:"collapse-ref"+(r+1),className:"panel-collapse collapse in"},i.a.createElement("div",{className:"panel-body"},i.a.createElement("div",{style:{height:"auto"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},A&&A.length>0&&i.a.createElement(y.a,{instance:a,buildingName:n,solutionOntology:u.ontology,devices:A,equipmentOntology:t.equipment.equipmentName,equipmentRdfsLabel:t.equipment.rdfsLabel}))))))))):void 0})),"SymbolicGUI"==E&&i.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},"Generator"==M&&i.a.createElement(f.a,{building:n,instance:a,devices:u.devices,ontology:O&&O.equipmentName?O.equipmentName:"",solutionOntology:u.ontology})))),"SolutionDiagram"==E&&i.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"5px",minHeight:"700px"}},i.a.createElement(o.a,{buildingName:n,instance:a,SolutionName:"",solution:u,isFullScreenHeight:!1,isRefreshButtonShow:!1})),i.a.createElement("br",null),i.a.createElement("div",{className:"row m-0"},i.a.createElement("div",{className:"col-md-12 p-0"},i.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},i.a.createElement("h4",{className:"panel-title"},i.a.createElement("div",null,i.a.createElement("span",{style:{marginLeft:"15px"}},"Devices"),i.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse1",href:"#collapse1",onClick:function(t){e.setCollapseIcon(t)}},i.a.createElement("i",{className:"fa fa-minus"}))))),i.a.createElement("div",{id:"collapse1",className:"panel-collapse collapse in"},i.a.createElement("div",{className:"panel-body"},i.a.createElement("div",{style:{height:"auto"}},i.a.createElement("div",{className:"padding-10",style:{border:"2px solid gainsboro"}},i.a.createElement("div",{className:"row no-padding"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-2 headingText"},"Device"),i.a.createElement("div",{className:"col-md-1 headingText"},"Type"),i.a.createElement("div",{className:"col-md-2 headingText"},"Moncon Type"),i.a.createElement("div",{className:"col-md-1 headingText"},"ID"),i.a.createElement("div",{className:"col-md-1 headingText"},"IP Addr."),i.a.createElement("div",{className:"col-md-2 headingText center"},"Controller IP Addr.")))),i.a.createElement("div",{style:{border:"1px solid lightgray"}},A&&A.length>0&&A.map(function(t,r){if(t){var o,l=u&&u.equipmentByTemplate&&u.equipmentByTemplate.length>0&&-1!=u.equipmentByTemplate.findIndex(function(e){return"Refrigerator"==e.equipment.subclassType})&&t.monitoringControlDeviceType&&(-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("signal"));o=t.monitoringControlDeviceType&&(-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("signal")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("thermo")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("intesis")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("418")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("406")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ats")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("generator")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("watt"));var s="";return!t.monitoringControlDeviceType||-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")&&-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")?!t.monitoringControlDeviceType||-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("intesis")&&-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("watt")?t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")?s="CeilingSensor":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("thermo")?s="InsightControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("signal")?s="SignalRelayControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("418")?s="CompressorControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("406")?s="CBW406":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ats")?s="ATS":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("generator")&&(s="Generator"):s="IntesisControl":s="RelayControl",i.a.createElement("div",{key:r,style:{margin:"2px",border:"1px dotted lightgray",borderRadius:5}},i.a.createElement("div",{className:"padding-10",key:r},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-2"},i.a.createElement("a",{title:t.rdfsLabel,style:{color:"slategrey"},onClick:function(){e.showAssetProfile(t,"Device")}},t.rdfsLabel)),i.a.createElement("div",{className:"col-md-1"},t.deviceType),i.a.createElement("div",{className:"col-md-2"},t.monitoringControlDeviceType),i.a.createElement("div",{className:"col-md-1"},t.deviceID),i.a.createElement("div",{className:"col-md-1"}," ",t.wirelessConfig&&t.wirelessConfig.ipAddress),i.a.createElement("div",{className:"col-md-2 center"},t.wirelessConfig&&t.wirelessConfig.controllerIPAddress),i.a.createElement("div",{className:"col-md-3"},o&&i.a.createElement("a",{className:"btn-xs btn-success btn active",style:{marginLeft:"5px"},title:"Show Controller",onClick:function(n){e.getDeviceControllerData(t.deviceName,r,w[r])},"data-toggle":"collapse",id:"btn-deviceCollapse"+r,href:"#deviceCollapse"+r}," ",i.a.createElement("i",{className:"fa fa-cogs","aria-hidden":"true"})," ",w[r]?"Hide":"Show"," Controller"),l&&i.a.createElement("a",{className:"btn-xs btn-success btn active",style:{marginLeft:"5px"},title:"Device Mapping",onClick:function(n){e.openDeviceMapping(t)}}," ",i.a.createElement("i",{className:"fa fa-wrench","aria-hidden":"true"})," Device Mapping")))),i.a.createElement("div",{id:"deviceCollapse"+r,className:"panel-collapse collapse"},i.a.createElement("div",{className:"row"},w[r]&&t.monitoringControlDeviceType&&i.a.createElement("div",{className:"col-md-12"},i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(g.a,{ControlName:s,InsightName:t.deviceName,buildingName:n,instance:a,monconType:t.monitoringControlDeviceType,type:"Equipment"}))))))}}))))))))),i.a.createElement("button",{type:"button",id:"btnShowAssetProfile",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#assetProfileDialog",style:{display:"none"}},"."),i.a.createElement(r.a,{id:"assetProfileDialog",showSaveButton:!1,showCancelButton:!0,isEditForm:!0,heading:C+" Selected"},i.a.createElement("div",{className:"row padding-10"},N&&i.a.createElement("div",{className:"col=md-12"},"Device"==N&&T.deviceName&&i.a.createElement(h.default,{hideBackButton:!0,deviceName:T.deviceName,isEdit:!1,isView:!0,instance:a,buildingName:n,deviceType:"Device"==T.deviceType||"Electronic"==T.deviceType?"Electronic":-1!=T.deviceType.indexOf("Network")?"Network":-1!=T.deviceType.indexOf("Computi")?"Computing":""}),"Point"==N&&D.point&&i.a.createElement(p.default,{isEdit:!1,isView:!0,instance:a,buildingName:n,PointName:D.point}),"Equipment"==N&&O.equipmentName&&i.a.createElement(m.default,{instance:a,buildingName:n,equipmentName:O.equipmentName,showEquipmentInfoOnly:!0}),"Component"==N&&_.name&&i.a.createElement(d.a,{instance:a,buildingName:n,isEdit:!1,component:_,isView:!0})))),i.a.createElement("button",{type:"button",id:"btnOpenDeviceMapping",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#openDeviceMapping",style:{display:"none"}},"."),i.a.createElement(r.a,{id:"openDeviceMapping",showSaveButton:!0,showCancelButton:!0,heading:C+" mapping",onSaveButtonClick:function(){e.saveDeviceMapping()}},i.a.createElement("div",{className:"card dataCard no-margin"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"row padding-10"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("label",{htmlFor:"devicePoint"},"Device Point:"),i.a.createElement("select",{id:"devicePoint",className:"form-control",name:"devicePointNumber",value:j.devicePointNumber,onChange:function(t){return e.changeDeviceMapping(t)}},i.a.createElement("option",{value:"1"},"Relay 1"),j&&j.deviceMonconType&&(j.deviceMonconType.toLocaleLowerCase().indexOf("v4")>-1||j.deviceMonconType.toLocaleLowerCase().indexOf("signal")>-1)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:"2"},"Relay 2"),i.a.createElement("option",{value:"3"},"Relay 3"),i.a.createElement("option",{value:"4"},"Relay 4")),j&&j.deviceMonconType&&j.deviceMonconType.toLocaleLowerCase().indexOf("signal")>-1&&i.a.createElement(i.a.Fragment,null,i.a.createElement("option",{value:"5"},"Relay 5"),i.a.createElement("option",{value:"6"},"Relay 6"),i.a.createElement("option",{value:"7"},"Relay 7"),i.a.createElement("option",{value:"8"},"Relay 8")))),i.a.createElement("div",{className:"col-md-6"},i.a.createElement("label",{htmlFor:"devicePoint"},"Map to:"),i.a.createElement("select",{id:"devicePoint",className:"form-control",name:"mappingHardware",value:j.mappingHardware,onChange:function(t){return e.changeDeviceMapping(t)}},i.a.createElement("option",{value:"Compressor"},"Compressor"),i.a.createElement("option",{value:"EvapFans"},"Evaporator Fans"),i.a.createElement("option",{value:"DefrostHeater"},"Defrost heater"))))))))))},t}(i.a.Component);t.default=w},3511:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(31)),r=n(116),o=n(1054),l=n(23),s=n(710),c=n(678),u=n(1166),d=n(1164),m=n(2079),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isDefrost:!1,currentTabs:"InnerControllerGUI",cbwModel:Object(),compressorADPDB:Object(),spaceTemp:0,compressorController:Object(),modelChanged:!1,intervalId:Object(),modelChangedState:"",device418:Object(),device406:Object(),deviceMappingModels:[]},n.fetchCompressorControllerDetails=n.fetchCompressorControllerDetails.bind(n),n.fetchDeviceData=n.fetchDeviceData.bind(n),n.fetchCompressorMQTTData=n.fetchCompressorMQTTData.bind(n),n.fetchADPValues=n.fetchADPValues.bind(n),n.getSpaceTemp=n.getSpaceTemp.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n.changeControl=n.changeControl.bind(n),n.changeEvaporatorFan=n.changeEvaporatorFan.bind(n),n.changeCompressorState=n.changeCompressorState.bind(n),n.changeTemperature=n.changeTemperature.bind(n),n.saveChanges=n.saveChanges.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return Object(r.a)(!0),[4,this.fetchDeviceData()];case 1:return e=t.sent(),[4,this.fetchADPValues()];case 2:return t.sent(),[4,this.fetchCompressorControllerDetails()];case 3:return t.sent(),[4,this.fetchCompressorMQTTData(e)];case 4:return t.sent(),[4,this.fetchDeviceMapping()];case 5:return t.sent(),this.setIntervalStart(),Object(r.a)(!1),[2]}})})},t.prototype.componentWillUnmount=function(){var e=this.state.intervalId;e&&clearInterval(e),this.setState({intervalId:Object()})},t.prototype.resetData=function(){return p(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return Object(r.a)(!0),[4,this.fetchADPValues()];case 1:return e.sent(),[4,this.cancelClick()];case 2:return e.sent(),Object(r.a)(!1),[2]}})})},t.prototype.cancelClick=function(){return p(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=this.state.device406,Object(r.a)(!0),[4,this.fetchCompressorControllerDetails()];case 1:return t.sent(),[4,this.fetchCompressorMQTTData(e)];case 2:return t.sent(),Object(r.a)(!1),[2]}})})},t.prototype.fetchCompressorControllerDetails=function(){return p(this,void 0,void 0,function(){var e,t,n,a,i,r,c,u;return f(this,function(d){switch(d.label){case 0:return e=this.props,t=e.buildingName,n=e.solutionOntology,a=e.equipmentOntology,[4,Object(s.r)(t,"",n,a)];case 1:return i=d.sent(),[4,Object(s.o)(i)];case 2:return(r=d.sent())&&r.length>0?this.setState({compressorController:r[0]}):(c=this.state.compressorADPDB,u={ontology:Object(l.t)(12),solutionOntology:n,compressorTemperature:c&&c.LowTemp?c.LowTemp:0,defrostControl:o.a.Local,equipment:a,inhibitControl:o.a.Local,isDefrost:!1,isEvaporatorFanAuto:!0},this.setState({compressorController:u})),[2]}})})},t.prototype.fetchDeviceData=function(){return p(this,void 0,void 0,function(){var e,t,n;return f(this,function(a){return e=this.props.devices,t=Object(),n=Object(),e&&e.length>0&&(n=e.find(function(e){return"cbw418"==e.monitoringControlDeviceType.toLocaleLowerCase()}),t=e.find(function(e){return"cbw406"==e.monitoringControlDeviceType.toLocaleLowerCase()})),this.setState({device418:n,device406:t}),[2,t]})})},t.prototype.fetchCompressorMQTTData=function(e){return p(this,void 0,void 0,function(){var t,n=this;return f(this,function(a){switch(a.label){case 0:return[4,Object(s.f)(e.topic,new Date,new Date,!0).then(function(t){return!t||t&&t.error?(Object(i.a)("Error occurred while fetching CBW board info."),Object()):(t[t.length-1]&&localStorage.setItem(e.deviceID,JSON.stringify(t[t.length-1])),t[t.length-1])}).catch(function(e){return Object()})];case 1:return t=a.sent(),this.setState({cbwModel:t,modelChanged:!1,modelChangedState:""},function(){n.getSpaceTemp()}),[2]}})})},t.prototype.fetchADPValues=function(){return p(this,void 0,void 0,function(){var e,t,n,a,i,r=this;return f(this,function(o){switch(o.label){case 0:return e=this.props,t=e.buildingName,n=e.solutionOntology,a=e.equipmentOntology,[4,Object(c.o)(t,"",a,n)];case 1:return i=o.sent(),this.setState({compressorADPDB:i},function(){r.getSpaceTemp()}),[2]}})})},t.prototype.fetchDeviceMapping=function(){return p(this,void 0,void 0,function(){var e,t;return f(this,function(n){switch(n.label){case 0:return e=this.props.solutionOntology,Object(r.a)(!0),[4,Object(s.s)("",e)];case 1:return t=n.sent(),this.setState({deviceMappingModels:t}),Object(r.a)(!1),[2]}})})},t.prototype.getSpaceTemp=function(){var e=this.props.compressorBox,t=this.state,n=t.compressorADPDB,a=t.cbwModel;if(n&&n.equipment&&a&&a.device_Name){var i=n.FrontTempWeight/100,r=n.BackTempWeight/100,o=n.SolidTempWeight/100,l=0;-1!=e.indexOf("1")?l=a.t3Ref1Front*i+a.t4Ref1Back*r+a.t8Ref1WaxProbe*o:-1!=e.indexOf("2")&&(l=a.t3Ref2Front*i+a.t4Ref2Back*r+a.t8Ref2WaxProbe*o),this.setState({spaceTemp:l})}},t.prototype.setIntervalStart=function(){var e=this,t=0;this.state.intervalId&&clearInterval(this.state.intervalId);var n=setInterval(function(){t++;var n=e.state,a=n.modelChanged,i=n.device406;!a&&t>=5&&(t=0,"InnerControllerGUI"==e.state.currentTabs&&(e.fetchCompressorControllerDetails(),e.fetchCompressorMQTTData(i)))},1e3);this.setState({intervalId:n})},t.prototype.changeTemperature=function(e,t){var n=this.state,a=n.compressorController,i=n.compressorADPDB;a&&i&&(t||(t=e?i.LowTemp:i.HighTemp),e?(a.compressorTemperature=t-.1,a.compressorTemperature<i.LowTemp&&(a.compressorTemperature=i.LowTemp)):(a.compressorTemperature=t+.1,a.compressorTemperature>i.HighTemp&&(a.compressorTemperature=i.HighTemp)),this.setState({compressorController:a,modelChanged:!0,modelChangedState:"setpointtemperature"}))},t.prototype.changeEvaporatorFan=function(e){var t=this.state.compressorController;t.isEvaporatorFanAuto=e,this.setState({compressorController:t,modelChanged:!0,modelChangedState:"evapfan"})},t.prototype.changeControl=function(e,t){return p(this,void 0,void 0,function(){var n,a,i;return f(this,function(l){switch(l.label){case 0:return n=this.props.equipmentOntology,a=this.state.compressorController,e?a.defrostControl=t:a.inhibitControl=t,(i=Object()).equipmentOntology=n,i.isScheduleOn=t==o.a.Schedule,Object(r.a)(!0),[4,Object(c.W)(i)];case 1:return l.sent(),Object(r.a)(!1),this.setState({compressorController:a,modelChanged:!0,modelChangedState:"controlstate"}),[2]}})})},t.prototype.changeCompressorState=function(e){var t=this.state.compressorController;t.isDefrost=e,this.setState({compressorController:t,modelChanged:!0,modelChangedState:"controlstatedefroststate"})},t.prototype.saveChanges=function(){return p(this,void 0,void 0,function(){var e,t,n,a,l,u,d,m,h,p,g,v,b,y,E,x,S,w,N,C,_,T,O,D,A,L;return f(this,function(f){switch(f.label){case 0:return e=this.props,t=e.buildingName,n=e.solutionOntology,a=e.equipmentOntology,l=e.devices,u=this.state,d=u.modelChanged,m=u.compressorController,h=u.compressorADPDB,p=u.device406,g=u.modelChangedState,v=u.deviceMappingModels,Object(r.a)(!0,"Saving Refrigerator State"),[4,Object(s.r)(t,"",n,"")];case 1:return b=f.sent(),[4,Object(s.o)(b)];case 2:for(y=f.sent(),E=!1,x=0;x<y.length;x++)(S=y[x]).equipment&&(S.equipment==a&&(S=m),S.inhibitControl!=o.a.Schedule&&S.defrostControl!=o.a.Schedule||E||(E=!0));return[4,Object(c.X)(p.deviceName,E)];case 3:return f.sent(),d?(Object(r.a)(!0,"Saving Refrigerator State"),[4,Object(s.l)(m,t)]):[3,7];case 4:return f.sent(),m.inhibitControl==o.a.Local?[3,6]:(Object(r.a)(!0,"Sending Signal to PI"),w=Object(),N="1",C="i1",_=!0,"setpointtemperature"==g||"controlstate"==g?v.find(function(e){return"Compressor"==e.mappingHardware})?(T=v.find(function(e){return"Compressor"==e.mappingHardware}),l.find(function(e){return e.deviceName==T.device})?(w=l.find(function(e){return e.deviceName==T.device}),N=T.devicePointNumber,A=T.deviceMonconType.toLocaleLowerCase(),C=A.indexOf("i1")>-1?"i1":A.indexOf("v4")>-1?"v4":A.indexOf("signal")>-1?"wsh":""):(Object(i.a)("No Device is not mapped to Compressor."),_=!1)):(Object(i.a)("No Device is not mapped to Compressor."),_=!1):"evapfan"==g?v.find(function(e){return"EvapFans"==e.mappingHardware})?(O=v.find(function(e){return"EvapFans"==e.mappingHardware}),l.find(function(e){return e.deviceName==O.device})?(w=l.find(function(e){return e.deviceName==O.device}),N=O.devicePointNumber,A=O.deviceMonconType.toLocaleLowerCase(),C=A.indexOf("i1")>-1?"i1":A.indexOf("v4")>-1?"v4":A.indexOf("signal")>-1?"wsh":""):(Object(i.a)("No Device is not mapped to Evaporator Fans."),_=!1)):(Object(i.a)(" No Device is not mapped to Evaporator Fans."),_=!1):"controlstatedefroststate"==g&&(v.find(function(e){return"DefrostHeater"==e.mappingHardware})?(D=v.find(function(e){return"DefrostHeater"==e.mappingHardware}),l.find(function(e){return e.deviceName==D.device})?(w=l.find(function(e){return e.deviceName==D.device}),N=D.devicePointNumber,A=D.deviceMonconType.toLocaleLowerCase(),C=A.indexOf("i1")>-1?"i1":A.indexOf("v4")>-1?"v4":A.indexOf("signal")>-1?"wsh":""):(Object(i.a)("No Device is not mapped to Defrost Heater."),_=!1)):(Object(i.a)(" No Device is not mapped to Defrost Heater."),_=!1)),_?(L={TS1:m.compressorTemperature.toFixed(2),back:""+h.BackTempWeight,controller_pi:p.wirelessConfig.controllerIPAddress,dbdmin:""+h.DeadBandMinutes,dbdtemp:""+h.DeadBandTemp,defrost:m.defrostControl==o.a.Manual?m.isDefrost?"defrost":"inhibit":"",deviceID:p.deviceName,evapfan:m.isEvaporatorFanAuto?"Auto":"On",front:""+h.FrontTempWeight,solid:""+h.SolidTempWeight,relaynum:N,rlb_ver:C,rlb_add:w.boardAddress},[4,Object(s.i)(L,t)]):[3,6]);case 5:f.sent(),f.label=6;case 6:this.setState({modelChanged:!1}),f.label=7;case 7:return Object(r.a)(!1),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.currentTabs,i=t.device406,r=t.spaceTemp,l=t.compressorController,s=t.compressorADPDB,c=t.modelChanged,h=t.modelChangedState,p=this.props,f=p.instance,g=p.buildingName,v=p.compressorBox,b=p.solutionOntology,y=p.equipmentOntology,E=p.devices,x=!1,S=!1,w=!1;l&&s&&(S=l.compressorTemperature<=s.LowTemp,x=l.compressorTemperature>=s.HighTemp),w=!(!l||l.inhibitControl!=o.a.Local);var N=l&&l.compressorTemperature?l.compressorTemperature.toFixed(2):0,C=l&&l.isDefrost?"Defrost":"Inhibit";return a.createElement(a.Fragment,null,a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("InnerControllerGUI"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"InnerControllerGUI"}),e.resetData()}},a.createElement("span",{className:"vertical-align"},"Controller")),a.createElement("button",{className:"btn "+("BoxSchedule"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"BoxSchedule"})}},a.createElement("span",{className:"vertical-align"},"Box Schedule")),a.createElement("button",{className:"btn "+("DefrostSchedule"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"DefrostSchedule"})}},a.createElement("span",{className:"vertical-align"},"Defrost Schedule")),a.createElement("button",{className:"btn "+("Graphs"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Graphs"})}},a.createElement("span",{className:"vertical-align"},"Graphs")),a.createElement("button",{className:"btn "+("InnerControllerADP"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"InnerControllerADP"})}},a.createElement("span",{className:"vertical-align"},"ADP"))))),"InnerControllerGUI"==n&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},a.createElement("strong",null,"COMPRESSOR STATUS:")," ()"))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp pull-right"},a.createElement("div",null,"Space Temp"),a.createElement("div",{className:"counter"},r.toFixed(2),"\xb0F")),a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter"},a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},N,"\xb0F")),a.createElement("div",{className:"col-md-6 col-xs-12 InsightControls"},a.createElement("div",{className:"btn-group-vertical"},a.createElement("button",{type:"button",className:"btn tempButton heatTo",onClick:function(){return e.changeTemperature(!1,l.compressorTemperature)},disabled:x||w||c&&"setpointtemperature"!=h},a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-up"})),a.createElement("div",null,"Warmer")),a.createElement("button",{type:"button",className:"btn tempButton coolTo",onClick:function(){return e.changeTemperature(!0,l.compressorTemperature)},disabled:S||w||c&&"setpointtemperature"!=h},a.createElement("div",null,"Cooler"),a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-down"})))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",{className:"InsightHeading"},a.createElement("i",{className:"fa fa-first-order"}),"Evaporator Fan"),a.createElement("div",{className:"btn-group"},a.createElement("button",{disabled:w||c&&"evapfan"!=h,type:"button",className:l&&l.isEvaporatorFanAuto?"btn btn-fill":"btn",onClick:function(){e.changeEvaporatorFan(!0)}},"Auto"),a.createElement("button",{disabled:w||c&&"evapfan"!=h,type:"button",className:l&&l.isEvaporatorFanAuto?"btn":"btn btn-fill",onClick:function(){e.changeEvaporatorFan(!1)}},"On"))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},a.createElement("br",null),a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.inhibitControl==o.a.Local?"btn-fill":""),onClick:function(){e.changeControl(!1,o.a.Local)}},"Local"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(!l||"Remote"!=l.inhibitControl&&l.inhibitControl!=o.a.Schedule&&l.inhibitControl!=o.a.Manual&&l.inhibitControl!=o.a.Optimize?"":"btn-fill")},"Remote"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),onClick:function(){e.changeControl(!1,o.a.Manual)},className:"btn btn-success "+(l&&l.inhibitControl==o.a.Manual?"btn-fill":"")},"Manual"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.inhibitControl==o.a.Schedule?"btn-fill":""),onClick:function(){e.changeControl(!1,o.a.Schedule)}},"Schedule"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.inhibitControl==o.a.Optimize?"btn-fill":""),onClick:function(){e.changeControl(!1,o.a.Optimize)}},"Optimize")))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},a.createElement("h5",{className:"title"},a.createElement("strong",null,"DEFROST")),a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.defrostControl==o.a.Local?"btn-fill":""),onClick:function(){e.changeControl(!0,o.a.Local)}},"Local"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(!l||"Remote"!=l.defrostControl&&l.defrostControl!=o.a.Schedule&&l.defrostControl!=o.a.Manual&&l.defrostControl!=o.a.Optimize?"":"btn-fill")},"Remote"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.defrostControl==o.a.Manual?"btn-fill":""),onClick:function(){e.changeControl(!0,o.a.Manual)}},"Manual"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.defrostControl==o.a.Schedule?"btn-fill":""),onClick:function(){e.changeControl(!0,o.a.Schedule)}},"Schedule"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:"btn btn-success "+(l&&l.defrostControl==o.a.Optimize?"btn-fill":""),onClick:function(){e.changeControl(!0,o.a.Optimize)}},"Optimize")),l&&l.defrostControl==o.a.Manual?a.createElement("div",{style:{marginTop:10}},a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:l&&l.isDefrost?"btn":"btn btn-fill",style:{marginRight:"15px"},onClick:function(){e.changeCompressorState(!1)}},"Inhibited"),a.createElement("button",{type:"button",disabled:c&&-1==h.indexOf("controlstate"),className:l&&l.isDefrost?"btn btn-fill":"btn",style:{marginRight:"15px"},onClick:function(){e.changeCompressorState(!0)}},"Defrost")):"")),a.createElement("div",{className:c?"InsightApplyChanges":"hidden"},a.createElement("h4",null,"Do you want to apply these changes?"),a.createElement("div",null,a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.cancelClick()}},"Cancel"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:this.saveChanges},"Apply Changes"))))))),"BoxSchedule"==n&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(d.default,{isSolution:!0,instance:f,buildingName:g,InsightName:i.deviceName,ControlName:"CompressorControl",type:"Equipment",isDefrost:!1,hideTabs:!0,equipmentOntology:y,solutionOntology:b,solutionEquipmentType:"Refrigerator",compressorTemperatureOrDefrostState:N.toString()})),"DefrostSchedule"==n&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(d.default,{isSolution:!0,instance:f,buildingName:g,InsightName:i.deviceName,ControlName:"CompressorControl",type:"Equipment",isDefrost:!0,hideTabs:!0,equipmentOntology:y,compressorTemperatureOrDefrostState:C})),"InnerControllerADP"==n&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(u.default,{instance:f,buildingName:g,InsightName:y,ControlName:"CompressorControl",type:"Equipment",hideTabs:!0,solutionOntology:b})),"Graphs"==n&&a.createElement("div",null,a.createElement(m.a,{instance:f,buildingName:g,devices:E,equipment:y,graphType:"Refrigerator"+v,solution:b})))},t}(a.Component);t.a=g},3512:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(650),o=n(116),l=n(3513),s=n(1054),c=n(10),u=n(1401),d=n(23),m=n(3514),h=n(710),p=n(678),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),g=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={devices:n.props.devices,atsDevice:Object(),relayDevice:Object(),atsMQTTData:Object(),utilityDevice:Object(),alarmsStatus:l.a.Stop,alarms:[],utilityMQTTData:Object(),intervalId:Object(),SignalRelay:Object(),modelChanged:!1,actionApplied:"",generatorControl:Object()},n}return f(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=this.props.devices,this.fetchATSDevice(e),this.fetchWattnodeDevice(e),Object(o.a)(!0),[4,this.fetchRelayDevice(e)];case 1:return t.sent(),[4,this.fetchGeneratorInfo()];case 2:return t.sent(),[4,this.fetchGeneratorAlarms()];case 3:return t.sent(),Object(o.a)(!1),this.setIntervalStart(),[2]}})})},t.prototype.componentWillUnmount=function(){var e=this.state.intervalId;e&&clearInterval(e)},t.prototype.setIntervalStart=function(){var e=this,t=this.state.intervalId;t&&clearInterval(t);var n=0;t=setInterval(function(){return g(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return++n>=1?(e=this.props.devices,[4,this.fetchRelayDevice(e)]):[3,2];case 1:t.sent(),n=0,t.label=2;case 2:return[2]}})})},1e3),this.setState({intervalId:t})},t.prototype.handleRelayControlType=function(e){var t=this.state.SignalRelay;if(t.controlType=e,e==s.a.Local)for(var n=0;n<8;n++)t.statusNotes[n]="Locally";this.setState({modelChanged:!0,SignalRelay:t,actionApplied:"ControlType"})},t.prototype.handleOptimzeSettingsStatus=function(e){var t=this.state.generatorControl;t.optimizeMode=e;this.setState({modelChanged:!0,generatorControl:t,actionApplied:"OptimizeSettings"})},t.prototype.fetchGeneratorInfo=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i,r,o;return v(this,function(c){switch(c.label){case 0:return e=this.props,t=e.building,n=e.ontology,a=e.solutionOntology,[4,Object(m.a)(t,"",a,n)];case 1:return i=c.sent(),[4,Object(m.c)(i)];case 2:return r=c.sent(),o=Object(),o=r&&r.length>0&&r[0]?r[0]:{Volt1:"0",Volt2:"230",Volt3:"0",optimizeMode:l.b.Normal,atsStatus:l.a.Stop,initiateEngineStatus:l.a.Stop,controlType:s.a.Local,engineStatus:l.a.Stop,runEngineStatus:l.a.Stop,equipment:n,ontology:Object(d.t)(12),solutionOntology:a,building:t},this.setState({generatorControl:o}),[2]}})})},t.prototype.fetchATSDevice=function(e){return g(this,void 0,void 0,function(){var t,n=this;return v(this,function(a){return t=Object(),e&&e.length>0&&(t=e.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ats")})),this.setState({atsDevice:t},function(){return g(n,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this.fetchATSMQTTData()];case 1:return e.sent(),[2]}})})}),[2]})})},t.prototype.fetchRelayDevice=function(e){return g(this,void 0,void 0,function(){var t,n,a,i,r,o,l,u;return v(this,function(d){switch(d.label){case 0:return t=Object(),n=Object(),a=[],i=[],e&&e.length>0?(t=e.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relay")}))&&t.deviceName?(r=this.props.building,[4,Object(p.y)(r,t.deviceName)]):[3,2]:[3,2];case 1:if((o=d.sent())&&o.length>0&&o[0]&&(l=o[0]))return n.device=Object(c.g)(l.device),n.controlType=Object(c.g)(l.controlType),n.relayStatus=Object(c.g)(l.relayStatus).split(","),n.statusNotes=Object(c.g)(l.statusNotes).split(","),this.setState({SignalRelay:n,relayDevice:t}),[2];d.label=2;case 2:for(u=0;u<8;u++)a.push(""),i.push("Local");return n={controlType:s.a.Local,device:t.deviceName,relayStatus:a,statusNotes:i},this.setState({SignalRelay:n,relayDevice:t}),[2]}})})},t.prototype.fetchWattnodeDevice=function(e){return g(this,void 0,void 0,function(){var t,n=this;return v(this,function(a){return t=Object(),e&&e.length>0&&(t=e.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("watt")})),this.setState({utilityDevice:t},function(){return g(n,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this.fetchUtilityMQTTData()];case 1:return e.sent(),[2]}})})}),[2]})})},t.prototype.fetchATSMQTTData=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i,r;return v(this,function(o){switch(o.label){case 0:return e=this.state,t=e.atsDevice,n=e.generatorControl,t.topic?(a=t.topic.split(","),[4,Object(h.e)(a[0],new Date,new Date,!0)]):[3,2];case 1:(i=o.sent())&&i.length>0&&(r=i[0],n.atsStatus="1"==r.Main_onNormal&&"0"==r.Main_onEmergency?l.a.Stop:l.a.Start,this.setState({atsMQTTData:r,generatorControl:n})),o.label=2;case 2:return[2]}})})},t.prototype.fetchUtilityMQTTData=function(){return g(this,void 0,void 0,function(){var e,t,n,a;return v(this,function(i){switch(i.label){case 0:return(e=this.state.utilityDevice).topic?(t=e.topic.split(","),[4,Object(h.h)(t[0],new Date,new Date,!0)]):[3,2];case 1:(n=i.sent())&&n.length>0&&(a=n[0],this.setState({utilityMQTTData:a})),i.label=2;case 2:return[2]}})})},t.prototype.fetchGeneratorAlarms=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i;return v(this,function(r){switch(r.label){case 0:return e=this.props,t=e.building,n=e.devices,a=n.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relay")}),i=[],a&&a.deviceName?[4,Object(u.e)(t,!1,!1,Object(),"","","","",a.deviceName)]:[3,2];case 1:i=r.sent(),r.label=2;case 2:return this.setState({alarms:i,alarmsStatus:i.length>0?l.a.Start:l.a.Stop}),[2]}})})},t.prototype.handleEngineStart=function(e){return void 0===e&&(e="6"),g(this,void 0,void 0,function(){var t;return v(this,function(n){switch(n.label){case 0:return(t=this.state.generatorControl).runEngineStatus==l.a.Pending?[3,9]:t.runEngineStatus!=l.a.Stop?[3,5]:(t.runEngineStatus=l.a.Pending,[4,this.saveGeneratorInfo(t)]);case 1:return n.sent(),[4,this.handleRelayOnOff(e,!0)];case 2:return n.sent()?(t.runEngineStatus=l.a.Start,t.engineStatus=l.a.Start,[4,this.saveGeneratorInfo(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[3,9];case 5:return t.runEngineStatus!=l.a.Start?[3,9]:(t.runEngineStatus=l.a.Pending,[4,this.saveGeneratorInfo(t)]);case 6:return n.sent(),[4,this.handleRelayOnOff(e,!1)];case 7:return n.sent()?(t.runEngineStatus=l.a.Stop,t.engineStatus=l.a.Pending,[4,this.saveGeneratorInfo(t)]):[3,9];case 8:n.sent(),n.label=9;case 9:return[2]}})})},t.prototype.handleCancelInitiateEngine=function(e,t){return void 0===e&&(e="5"),void 0===t&&(t="2"),g(this,void 0,void 0,function(){var t;return v(this,function(n){switch(n.label){case 0:return(t=this.state.generatorControl).initiateEngineStatus==l.a.Stop?[3,3]:(t.initiateEngineStatus=l.a.Stop,t.engineStatus=l.a.Stop,t.Volt1="0",[4,this.handleRelayOnOff(e,!1)]);case 1:return n.sent(),[4,this.saveGeneratorInfo(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.handleInitiateEngine=function(e,t,n){return void 0===e&&(e="5"),void 0===t&&(t="2"),void 0===n&&(n="6"),g(this,void 0,void 0,function(){var t;return v(this,function(a){switch(a.label){case 0:return(t=this.state.generatorControl).initiateEngineStatus==l.a.Pending?[3,11]:t.initiateEngineStatus!=l.a.Stop?[3,5]:(t.initiateEngineStatus=l.a.Pending,t.engineStatus=l.a.Pending,[4,this.saveGeneratorInfo(t)]);case 1:return a.sent(),[4,this.handleRelayOnOff(e,!0)];case 2:return a.sent()?(t.initiateEngineStatus=l.a.Start,t.Volt1="208",[4,this.saveGeneratorInfo(t)]):[3,4];case 3:a.sent(),a.label=4;case 4:return[3,11];case 5:return t.initiateEngineStatus!=l.a.Start?[3,11]:t.runEngineStatus!=l.a.Start?[3,9]:(t.runEngineStatus=l.a.Pending,[4,this.saveGeneratorInfo(t)]);case 6:return a.sent(),[4,this.handleRelayOnOff(n,!1)];case 7:return a.sent()?(t.runEngineStatus=l.a.Stop,t.engineStatus=l.a.Pending,[4,this.saveGeneratorInfo(t)]):[3,9];case 8:a.sent(),a.label=9;case 9:return[4,this.handleCancelInitiateEngine()];case 10:a.sent(),a.label=11;case 11:return[2]}})})},t.prototype.handleManualAtsControl=function(e,t){return void 0===e&&(e="1"),void 0===t&&(t="2"),g(this,void 0,void 0,function(){var n,a=this;return v(this,function(i){switch(i.label){case 0:return(n=this.state.generatorControl).atsStatus==l.a.Pending?[3,4]:n.atsStatus!=l.a.Stop?[3,2]:(n.atsStatus=l.a.Pending,[4,this.saveGeneratorInfo(n)]);case 1:return i.sent(),this.setState({generatorControl:n},function(){return g(a,void 0,void 0,function(){return v(this,function(a){switch(a.label){case 0:return[4,this.handleRelayOnOff(e,!0)];case 1:return a.sent()?[4,this.handleRelayOnOff(t,!0)]:[3,4];case 2:return a.sent()?(n.atsStatus=l.a.Start,n.engineStatus=l.a.Start,n.Volt2="208",[4,this.saveGeneratorInfo(n)]):[3,4];case 3:a.sent(),a.label=4;case 4:return[2]}})})}),[3,4];case 2:return n.atsStatus!=l.a.Start?[3,4]:(n.atsStatus=l.a.Stop,[4,this.saveGeneratorInfo(n)]);case 3:i.sent(),i.label=4;case 4:return[2]}})})},t.prototype.handleAtsControlToUtility=function(e,t){return void 0===e&&(e="1"),void 0===t&&(t="2"),g(this,void 0,void 0,function(){var n;return v(this,function(a){switch(a.label){case 0:return(n=this.state.generatorControl).atsStatus==l.a.Pending?[3,5]:n.atsStatus!=l.a.Start?[3,5]:(n.atsStatus=l.a.Pending,n.engineStatus=l.a.Pending,[4,this.saveGeneratorInfo(n)]);case 1:return a.sent(),[4,this.handleRelayOnOff(e,!1)];case 2:return a.sent()?[4,this.handleRelayOnOff(t,!1)]:[3,5];case 3:return a.sent()?(n.atsStatus=l.a.Stop,n.engineStatus=l.a.Stop,n.Volt2="0",[4,this.saveGeneratorInfo(n)]):[3,5];case 4:a.sent(),a.label=5;case 5:return[2]}})})},t.prototype.generateAlarm=function(e,t,n,a){return g(this,void 0,void 0,function(){var n,i,r,o,l,s,c,u;return v(this,function(d){return n=this.props,i=n.ontology,r=n.instance,o=n.building,l=this.state,s=l.relayDevice,c=l.alarms,s&&((u=Object()).device=s.deviceName,u.deviceName=s.rdfsLabel,u.floor=s.floor,u.space=s.location,u.title=t,u.description="Device: "+s.rdfsLabel+" with Controller IP: "+s.wirelessConfig.controllerIPAddress+". Request failed: Relay "+e+" is not responding.",u.timeofalarm=(new Date).toString(),u.status="alerting",u.equipment=i,u.instance=r,u.buildingName=o,u.archived=!1,u.acknowledge=!1,u.deviceOntology=s.deviceName,u.sensedValue=a,u.sensedValueKey="relay_state_"+e,u.ruleId=2,u.ruleName=t,u.ruleUrl="",c.push(u),this.setState({alarms:c})),[2]})})},t.prototype.handleRelayOnOff=function(e,t){return g(this,void 0,void 0,function(){var n,a,i,r,s,c,u;return v(this,function(d){switch(d.label){case 0:return n=this.props.building,a=this.state,i=a.relayDevice,r=a.SignalRelay,i?(Object(o.a)(!0,"Sending Signal"),[4,Object(p.P)(i,e,t,n)]):[3,6];case 1:return(s=d.sent())?s.error?(c="Relay "+e+" "+(t?"On":"Off")+"Error",Object(o.a)(!0,"Generating Alarm"),[4,this.generateAlarm(e,c,s.error,t?1:0)]):[3,3]:[3,5];case 2:return d.sent(),this.setState({alarmsStatus:l.a.Start}),[3,5];case 3:return s.response&&"True"==s.response?(u=parseInt(e)-1,r.relayStatus[u]=t?"1":"0",r.statusNotes[u]="Manual",[4,this.saveSignalRelayInfo(r)]):[3,5];case 4:return d.sent(),[2,!0];case 5:Object(o.a)(!1),d.label=6;case 6:return[2,!1]}})})},t.prototype.saveSignalRelayInfo=function(e){return g(this,void 0,void 0,function(){var t;return v(this,function(n){switch(n.label){case 0:return t=this.props.building,Object(o.a)(!0,"Saving Relay Status"),[4,Object(p.V)(t,e)];case 1:return n.sent(),this.setState({SignalRelay:e}),Object(o.a)(!1),[2]}})})},t.prototype.saveGeneratorInfo=function(e){return g(this,void 0,void 0,function(){var t;return v(this,function(n){switch(n.label){case 0:return t=this.state.SignalRelay,Object(o.a)(!0,"Saving Generator Status"),e.controlType=t.controlType,[4,Object(m.b)(this.props.building,e)];case 1:return n.sent(),this.setState({generatorControl:e}),Object(o.a)(!1),[2]}})})},t.prototype.openAlarms=function(){var e=this.props,t=e.instance,n=e.building,a=this.state.alarms;localStorage.setItem("alarmList",JSON.stringify("")),a&&a.length>0?(localStorage.setItem("alarmList",JSON.stringify(a)),window.open("http://"+Object(d.m)()+"/#"+t+"/"+n+"/Health/Alarms/OperationalAlarms/AlarmList","_blank")):alert("No Alarms for Generator")},t.prototype.applyChanges=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i;return v(this,function(r){switch(r.label){case 0:return e=this.state,t=e.modelChanged,n=e.actionApplied,a=e.SignalRelay,i=e.generatorControl,t?"Cancel"!=n?[3,2]:[4,this.handleCancelInitiateEngine()]:[3,15];case 1:return r.sent(),[3,14];case 2:return"Initiate Engine"!=n?[3,4]:[4,this.handleInitiateEngine()];case 3:return r.sent(),[3,14];case 4:return"Run Engine"!=n&&"Starting Engine"!=n&&"Stop Engine"!=n?[3,6]:[4,this.handleEngineStart()];case 5:return r.sent(),[3,14];case 6:return"Start Manual ATS Transfer"!=n?[3,8]:[4,this.handleManualAtsControl()];case 7:return r.sent(),[3,14];case 8:return"Stop Manual ATS Transfer"!=n?[3,10]:[4,this.handleAtsControlToUtility()];case 9:return r.sent(),[3,14];case 10:return"ControlType"!=n?[3,13]:[4,this.saveSignalRelayInfo(a)];case 11:return r.sent(),[4,this.saveGeneratorInfo(i)];case 12:return r.sent(),[3,14];case 13:r.label=14;case 14:this.setState({modelChanged:!1,actionApplied:""}),r.label=15;case 15:return[2]}})})},t.prototype.cancelClick=function(){return g(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=this.state.devices,Object(o.a)(!0),[4,this.fetchRelayDevice(e)];case 1:return t.sent(),[4,this.fetchGeneratorInfo()];case 2:return t.sent(),this.setState({modelChanged:!1,actionApplied:""}),Object(o.a)(!1),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.atsMQTTData,a=t.alarmsStatus,o=t.alarms,c=t.utilityMQTTData,u=t.modelChanged,m=t.actionApplied,h=t.SignalRelay,p=t.generatorControl,f=p.Volt1,g=p.Volt3,v=p.atsStatus,b=p.engineStatus,y=p.initiateEngineStatus,E=p.optimizeMode,x=p.runEngineStatus,S="#d2202a",w="#337840";b==l.a.Start?w=S:b==l.a.Pending&&(w="#FF9500");var N="#337840";y==l.a.Start?N=S:y==l.a.Pending&&(N="#FF9500");var C="#337840";x==l.a.Start?C=S:x==l.a.Pending&&(C="#FF9500");var _="#337840";v==l.a.Start?_=S:v==l.a.Pending&&(_="#FF9500");var T="#007bff";a==l.a.Start?T=S:a==l.a.Pending&&(T="#FF9500");var O=0;c.PowerSum&&parseFloat(c.PowerSum)&&(O=parseFloat(c.PowerSum)/1e3);var D=h&&h.controlType==s.a.Manual,A=E==l.b.Optimze,L="";return"Cancel"==m&&(L="Do you want to apply these changes? (Turn off the Initiate Engine Stop)"),"ControlType"==m?L="Do you want to apply these changes? (Turn the Generator mode : "+h.controlType+")":"Initiate Engine"==m?L="Do you want to apply these changes? (Initiate Engine of Generator)":"Run Engine"==m||"Starting Engine"==m||"Stop Engine"==m?L="Do you want to apply these changes? ("+m+" of Generator)":"Start Manual ATS Transfer"==m?L="Are you sure you want to transfer load to the Generator?":"Stop Manual ATS Transfer"==m?L="Are you sure you wish to transfer to the utility power?":"OptimizeSettings"==m&&(L="Do you want to apply these changes? (Generator settings : "+E+")"),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"content",style:{padding:"15px 0 10px 15px !important"}},i.a.createElement("div",{style:{width:"100%",overflowX:"scroll"}},i.a.createElement("div",{className:"content",style:{width:"1200px",padding:"15px 0 10px 15px !important"}},i.a.createElement("div",{style:{width:"60px",float:"left",marginTop:"75px"}},i.a.createElement("h5",{className:"title",style:{fontWeight:"bold",display:"inline-block"}}," Utility ")),i.a.createElement("div",{style:{width:"130px",marginTop:"-8px",float:"left",marginLeft:"35px"}},i.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",c.VoltAvgLL," V "),i.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",O," kW"),i.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",n&&n.Normal_Frequency?n.Normal_Frequency:"0"," Hz ")),i.a.createElement("div",{style:{width:"315px",float:"left",textAlign:"right",marginTop:"-8px",marginLeft:"20px"}},i.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",f," V"),i.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",g," A"),i.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",n&&n.Emergency_Frequency?n.Emergency_Frequency:"0"," Hz ")),i.a.createElement("div",{style:{width:"950px",float:"left"}},i.a.createElement("div",{style:{width:"30px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px"}}),i.a.createElement("div",{style:{width:"50px",float:"left",height:"40px",backgroundColor:n&&"1"==n.Normal_SourceAvble?"red":"green",borderRadius:"5px"}}),i.a.createElement("div",{style:{width:"80px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px"}}),i.a.createElement("div",{style:{width:"28px",float:"left",height:"30px",backgroundColor:"black",marginTop:"5px",borderRadius:"22px",marginLeft:"-2px"}}),i.a.createElement("div",{style:{width:"120px",float:"left",height:"15px",backgroundColor:"black",marginTop:"55px",borderRadius:"2px",marginLeft:"-28px",visibility:v==l.a.Start||v==l.a.Pending?"hidden":"visible",transform:"rotate(42deg)"}}),i.a.createElement("div",{style:{width:"30px",float:"left",height:"30px",backgroundColor:"black",marginTop:"88px",borderRadius:"22px",marginLeft:"-30px"}}),i.a.createElement("div",{style:{width:"15px",float:"left",height:"200px",backgroundColor:"black",marginTop:"110px",borderRadius:"4px",marginLeft:"-23px"}}),i.a.createElement("div",{style:{width:"120px",float:"left",height:"15px",backgroundColor:"black",marginTop:"50px",borderRadius:"2px",marginLeft:"-25px",visibility:v==l.a.Stop||v==l.a.Pending?"hidden":"visible",transform:"rotate(-42deg)"}}),i.a.createElement("div",{style:{width:"30px",float:"left",height:"30px",backgroundColor:"black",marginTop:"5px",borderRadius:"22px",marginLeft:"-34px"}}),i.a.createElement("div",{style:{width:"100px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px",marginLeft:"-8px"}}),i.a.createElement("div",{style:{width:"50px",float:"left",height:"40px",backgroundColor:n&&"1"==n.Emergency_SourceAvble?"red":"green",borderRadius:"5px"}}),i.a.createElement("div",{style:{width:"100px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px"}}),i.a.createElement("div",{style:{width:"55px",float:"left",height:"54px",backgroundColor:n&&"0"==n.Emergency_Frequency?"green":"red",marginTop:"-8px",borderRadius:"32px",marginLeft:"-2px"}}),i.a.createElement("div",{style:{width:"100px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px",marginLeft:"-2px"}}),i.a.createElement("div",{style:{width:"80px",float:"left",height:"40px",backgroundColor:""+w,borderRadius:"5px"}})),i.a.createElement("div",{style:{width:"1200px"}},i.a.createElement("div",{style:{width:"50px",float:"left",height:"40px",backgroundColor:"red",marginTop:"1px",borderRadius:"5px",marginLeft:"300px"}})),i.a.createElement("div",{style:{width:"1200px"}},i.a.createElement("div",{style:{width:"80px",float:"left",height:"40px",borderRadius:"5px",marginTop:"41px",marginLeft:"-46px",fontSize:"18px",fontWeight:"bold"}},"Load")),i.a.createElement("div",{style:{width:"175px",float:"left",textAlign:"right",marginLeft:"175px",marginTop:"-260px"}},i.a.createElement("h5",{className:"title",style:{fontWeight:"bold"}}," Generator ")),i.a.createElement("div",{style:{width:"250px",float:"left",textAlign:"center",marginLeft:"355px",marginTop:"-261px"}},i.a.createElement("h5",{className:"title",style:{fontWeight:"bold"}}," Engine "),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("button",{className:"btn "+(y==l.a.Pending?"btn-primary":"btn-secondary")+" btn-fill",disabled:u||y!=l.a.Pending,onClick:function(){e.setState({modelChanged:!0,actionApplied:"Cancel"})}},"Cancel"),i.a.createElement("button",{className:"btn btn-fill pull-right",style:{backgroundColor:N},disabled:u||!D,onClick:function(){e.setState({modelChanged:!0,actionApplied:"Initiate Engine"})}},"Initiate Engine ",""+(y==l.a.Stop?l.a.Start:y==l.a.Pending?"Starting":"Stop"))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-primary btn-fill",style:{visibility:"hidden"}},"Cancel"),i.a.createElement("button",{className:"btn btn-fill pull-right",style:{backgroundColor:C},disabled:u||!(D&&y==l.a.Start),onClick:function(){e.setState({modelChanged:!0,actionApplied:(x==l.a.Stop?"Run":x==l.a.Pending?"Starting":"Stop")+" Engine"})}},x==l.a.Stop?"Run":x==l.a.Pending?"Starting":"Stop"," Engine"))),i.a.createElement("div",{style:{width:"250px",float:"right",textAlign:"center",marginTop:"-29%"}},i.a.createElement("div",{style:{width:"0",height:"0",borderStyle:"solid",borderWidth:"0 50px 75px 50px",borderColor:"transparent transparent "+T+" transparent",margin:"0 auto",cursor:"pointer"},onClick:function(){e.openAlarms()}}),i.a.createElement("div",{style:{width:"150px",float:"left",textAlign:"right"}},i.a.createElement("h5",{className:"title",style:{fontWeight:"bold"}}," Alarm "))),i.a.createElement("div",{style:{width:"1200px"}},i.a.createElement("button",{className:"btn btn-fill",disabled:u||!(D&&x==l.a.Start),style:{float:"left",marginTop:"-195px",marginLeft:"-50px",backgroundColor:_},onClick:function(){v==l.a.Stop?e.setState({modelChanged:!0,actionApplied:"Start Manual ATS Transfer"}):v==l.a.Start&&e.setState({modelChanged:!0,actionApplied:"Stop Manual ATS Transfer"})}},"Manual ATS Transfer")),i.a.createElement("div",{className:"btn-group",style:{width:"270px",float:"right",marginTop:"83px",marginRight:"-78px"}},i.a.createElement("button",{type:"button",className:"btn btn-success "+(D?"":"btn-fill"),disabled:u,onClick:function(){e.handleRelayControlType(s.a.Local)}},"Local"),i.a.createElement("button",{type:"button",className:"btn btn-success "+(D?"btn-fill":""),disabled:u,onClick:function(){e.handleRelayControlType(s.a.Manual)}},"Remote")),i.a.createElement("div",{className:"btn-group",style:{width:"870px"}},i.a.createElement("h6",null,"\xa0\xa0\xa0\xa0 Optimize Settings"),i.a.createElement("button",{type:"button",className:"btn "+(A?"":"btn-fill"),disabled:u,onClick:function(){e.handleOptimzeSettingsStatus(l.b.Normal)}},"Normal"),i.a.createElement("button",{type:"button",className:"btn "+(A?"btn-fill":""),disabled:u,onClick:function(){e.handleOptimzeSettingsStatus(l.b.Optimze)}},"Optimize")))),i.a.createElement("div",{className:u?"InsightApplyChanges":"hidden"},L&&i.a.createElement("h4",null,L),i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.cancelClick()}},"Cancel"),"\xa0",i.a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){e.applyChanges()}},"Apply Changes")))))),i.a.createElement("button",{type:"button",id:"btnShowAlarms",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#ShowAlarms",style:{display:"none"}},"."),i.a.createElement(r.a,{id:"ShowAlarms",showSaveButton:!1,showCancelButton:!0,isEditForm:!0,heading:"Alarms List"},i.a.createElement("div",{className:"row padding-10"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"padding-10",style:{border:"2px solid gainsboro"}},i.a.createElement("div",{className:"row no-padding"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-2 headingText"},"Title"),i.a.createElement("div",{className:"col-md-2 headingText"},"Description"),i.a.createElement("div",{className:"col-md-1 headingText"},"Relay"),i.a.createElement("div",{className:"col-md-2 headingText"},"Timestamp"),i.a.createElement("div",{className:"col-md-1 headingText"},"Device name"),i.a.createElement("div",{className:"col-md-2 headingText"},"Floor"),i.a.createElement("div",{className:"col-md-2 headingText"},"Space")))),i.a.createElement("div",{style:{paddingBottom:"1%",border:"1px solid lightgray"}},o&&o.length>0&&o.map(function(e,t){return i.a.createElement("div",{key:t,style:{margin:"2px"}},i.a.createElement("div",{className:"",style:{marginBottom:"1px"},key:t},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"col-md-2"},e.title),i.a.createElement("div",{className:"col-md-2"},e.description),i.a.createElement("div",{className:"col-md-1"},"Relay no. ",e.status),i.a.createElement("div",{className:"col-md-2"},e.timeofalarm),i.a.createElement("div",{className:"col-md-1"},e.deviceName),i.a.createElement("div",{className:"col-md-2"},Object(d.o)(e.floor)),i.a.createElement("div",{className:"col-md-2"},Object(d.o)(e.space))))))}))))))},t}(i.a.Component);t.a=b},3513:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a={Start:"Start",Pending:"Pending",Stop:"Stop"},i={Normal:"Normal",Optimze:"Optimze"}},3514:function(e,t,n){"use strict";t.b=function(e,t){return l(this,void 0,void 0,function(){var n=this;return s(this,function(r){switch(r.label){case 0:return[4,Object(o.f)({buildingName:e,model:t},o.a.ESOLUTION.SaveGeneratorInfo,i.b.ESolution).then(function(e){return l(n,void 0,void 0,function(){return s(this,function(t){return e.message?Object(a.b)(e.message):e.error&&Object(a.a)(e.error),[2]})})}).catch(function(e){Object(a.a)("Error occured while updating Generator info.")})];case 1:return[2,r.sent()]}})})},t.a=function(e,t,n,a){return l(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(o.e)({buildingName:e,ontology:t,solution:n,equipment:a},o.a.ESOLUTION.FetchGeneratorInfo,i.b.ESolution,!0)];case 1:return[2,r.sent()]}})})},t.c=function(e){return l(this,void 0,void 0,function(){var t,n,a,i;return s(this,function(o){for(t=[],n=0;n<e.length;n++)a=e[n],i={ontology:Object(r.g)(a.ontology),solutionOntology:Object(r.g)(a.solutionOntology),controlType:Object(r.g)(a.controlType),equipment:Object(r.g)(a.equipment),Volt1:Object(r.g)(a.Volt1),Volt2:Object(r.g)(a.Volt2),Volt3:Object(r.g)(a.Volt3),atsStatus:Object(r.g)(a.atsStatus),engineStatus:Object(r.g)(a.engineStatus),initiateEngineStatus:Object(r.g)(a.initiateEngineStatus),runEngineStatus:Object(r.g)(a.runEngineStatus),optimizeMode:Object(r.g)(a.optimizeMode),building:Object(r.g)(a.building)},t.push(i);return[2,t]})})};var a=n(31),i=n(20),r=n(10),o=n(12),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}},3515:function(e,t,n){"use strict";var a=n(2),i=n.n(a),r=n(1166),o=n(1485),l=n(1936),s=n(1661),c=n(1935),u=n(1660),d=n(1937),m=n(1486),h=n(1659),p=n(1164),f=n(1932),g=n(1464),v=n(1934),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentTab:"Current"},n}return b(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.InsightName,a=t.buildingName,b=t.instance,y=t.ControlName,E=t.type,x=t.monconType,S=this.state.currentTab,w=x&&-1!=x.toLowerCase().indexOf("wattnode"),N=x&&-1!=x.toLowerCase().indexOf("ats"),C=x&&-1!=x.toLowerCase().indexOf("signal"),_=x&&-1!=x.toLowerCase().indexOf("406"),T=x&&-1!=x.toLowerCase().indexOf("418"),O=x&&-1!=x.toLowerCase().indexOf("generator"),D=w||_||T||N||C||O,A=w||_||T||N||C||O,L=w||_||T||N||C||O,I=C;return i.a.createElement(i.a.Fragment,null,x&&-1==x.toLocaleLowerCase().indexOf("ceiling")&&i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12 "},i.a.createElement("ul",{className:"nav nav-tabs"},i.a.createElement("li",{className:"Current"==S?"active":""},i.a.createElement("a",{onClick:function(){e.setState({currentTab:"Current"})}},"Current Values")),!D&&i.a.createElement("li",{className:"Schedule"==S?"active":""},i.a.createElement("a",{onClick:function(){e.setState({currentTab:"Schedule"})}},"Schedule")),!L&&i.a.createElement("li",{className:"Alarms"==S?"active":""},i.a.createElement("a",{onClick:function(){e.setState({currentTab:"Alarms"})}},"Alarms")),!I&&i.a.createElement("li",{className:"Graphs"==S?"active":""},i.a.createElement("a",{onClick:function(){e.setState({currentTab:"Graphs"})}},"Graphs")),!A&&i.a.createElement("li",{className:"ADP"==S?"active":""},i.a.createElement("a",{onClick:function(){e.setState({currentTab:"ADP"})}},"ADP"))))),"Current"==S&&i.a.createElement(i.a.Fragment,null,x&&-1!=x.toLocaleLowerCase().indexOf("relay")&&x&&-1==x.toLocaleLowerCase().indexOf("signal")&&i.a.createElement(h.default,{buildingName:a,instance:b,RelayDeviceName:n,hideTabs:!0,type:E}),x&&-1!=x.toLocaleLowerCase().indexOf("ceiling")&&i.a.createElement(u.default,{buildingName:a,instance:b,CeilingSensorBoardName:n,type:E}),x&&(-1!=x.toLocaleLowerCase().indexOf("thermo")||-1!=x.toLocaleLowerCase().indexOf("inte"))&&i.a.createElement(g.default,{buildingName:a,instance:b,InsightName:n,type:E,hideTabs:!0}),x&&-1!=x.toLocaleLowerCase().indexOf("signal")&&i.a.createElement(f.a,{buildingName:a,instance:b,RelayDeviceName:n,type:E,hideTabs:!0}),x&&-1!=x.toLocaleLowerCase().indexOf("watt")&&i.a.createElement(v.a,{buildingName:a,instance:b,InsightName:n,type:E,hideTabs:!0}),x&&-1!=x.toLocaleLowerCase().indexOf("418")&&i.a.createElement(c.a,{buildingName:a,instance:b,InsightName:n,controlName:y,type:E,hideTabs:!0}),x&&-1!=x.toLocaleLowerCase().indexOf("406")&&i.a.createElement(s.default,{buildingName:a,instance:b,deviceName:n,type:E,hideTabs:!0}),x&&-1!=x.toLocaleLowerCase().indexOf("ats")&&i.a.createElement(l.a,{buildingName:a,instance:b,InsightName:n,type:E,hideTabs:!0,controlName:y}),x&&-1!=x.toLocaleLowerCase().indexOf("generator")&&i.a.createElement(d.a,{buildingName:a,instance:b,InsightName:n,type:E,hideTabs:!0,controlName:y})),"Schedule"==S&&i.a.createElement(p.default,{instance:b,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}),"Alarms"==S&&i.a.createElement(o.default,{instance:b,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}),"Graphs"==S&&i.a.createElement(m.default,{instance:b,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}),"ADP"==S&&i.a.createElement(r.default,{instance:b,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}))},t}(i.a.Component);t.a=y},3516:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(31)),r=n(658),o=n(710),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={device:n.props.device?n.props.device:Object(),cbwModel:Object(),intervalID:Object()},n.fetchDeviceData=n.fetchDeviceData.bind(n),n.fetchCompressorMQTTData=n.fetchCompressorMQTTData.bind(n),n.calculator=n.calculator.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n}return l(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.fetchDeviceData()];case 1:return e=t.sent(),[4,this.fetchCompressorMQTTData(e)];case 2:return t.sent(),this.setIntervalStart(),this.setState({device:e}),[2]}})})},t.prototype.componentWillUnmount=function(){var e=this.state.intervalID;e&&clearInterval(e)},t.prototype.resetData=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.state.device,[4,this.fetchCompressorMQTTData(e)];case 1:return t.sent(),[2]}})})},t.prototype.fetchDeviceData=function(){return s(this,void 0,void 0,function(){var e,t,n,a;return c(this,function(i){switch(i.label){case 0:return e=this.props,t=e.deviceName,n=e.device,a=e.buildingName,n&&n.deviceName||!t?[3,2]:[4,Object(r.t)(t,a)];case 1:return[2,i.sent()];case 2:return[2,n]}})})},t.prototype.setIntervalStart=function(){var e=this,t=0,n=setInterval(function(){++t>=5&&(t=0,e.fetchCompressorMQTTData(e.state.device))},1e3);this.setState({intervalID:n})},t.prototype.fetchCompressorMQTTData=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,Object(o.g)(e.topic,new Date,new Date,!0).then(function(t){return!t||t&&t.error?(Object(i.a)("Error occurred while fetching CBW board info."),Object()):(t[t.length-1]&&localStorage.setItem(e.deviceID,JSON.stringify(t[t.length-1])),t[t.length-1])}).catch(function(e){return Object()})];case 1:return t=n.sent(),this.setState({cbwModel:t}),[2]}})})},t.prototype.calculator=function(e,t){return"Compressor and FreezerDefrost"==e?20*t/5:"PressureSensor"==e?14.5*t*50/5:void 0},t.prototype.render=function(){var e=this.state.cbwModel;return a.createElement("div",null,e&&a.createElement("div",{className:""},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},a.createElement("strong",null,"REFRIGERATOR STATUS:"))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-xs-12 "},a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Compressor")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,this.calculator("Compressor and FreezerDefrost",e.a13Ref1Compressor)," amps ")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Freezer Defrost")," ")),a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,this.calculator("Compressor and FreezerDefrost",e.a14Ref1FreezerDefrost)," amps ")," "))),a.createElement("div",{className:"col-md-12 col-xs-12 "},a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Pressure Sensor")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,this.calculator("PressureSensor",e.a15Ref1PressureSensor).toFixed(2)," psig ")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Door Contact ")," ")),a.createElement("div",{className:"col-md-3 col-xs-6"},e.a16Ref1DoorContact&&e.a16Ref1DoorContact>2?a.createElement("p",{style:{fontSize:20,color:"#337840"}}," ",a.createElement("strong",null,"  The door is closed ")," "):a.createElement("p",{style:{fontSize:20,color:"red"}}," ",a.createElement("strong",null,"  The door is open ")," "))),a.createElement("div",{className:"col-md-12 col-xs-12 "},a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:15}}," ",a.createElement("strong",null,"Last data synced at: "))),a.createElement("div",{className:"col-md-10 col-xs-6"},a.createElement("p",{style:{fontSize:15}},"  ",new Date(e.timestamp).toLocaleString())))))))),a.createElement("p",null," "))},t}(a.Component);t.a=u},3517:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(31)),r=n(116),o=n(1054),l=n(783),s=n(23),c=n(1065),u=n(678),d=n(1166),m=n(3518),h=n(1164),p=n(2079),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),g=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ptacADP:Object(),ScheduleIsOnModel:Object(),currentTabs:"CurrentValues",modelChanged:!1,ptacController:Object(),ceilingSensorDevice:Object(),relayDevice:Object(),ceilingSensorMQTT:Object(),i1RelayMQTT:Object(),openRelayControlDialog:!1,callInterval:!0,intervalId:Object()},n.changeTemperature=n.changeTemperature.bind(n),n.fetchDevices=n.fetchDevices.bind(n),n.fetchDevicesMQTTData=n.fetchDevicesMQTTData.bind(n),n.fetchPTACInfo=n.fetchPTACInfo.bind(n),n.changeTemperature=n.changeTemperature.bind(n),n.changeMode=n.changeMode.bind(n),n.changeControlType=n.changeControlType.bind(n),n.changeFanSettings=n.changeFanSettings.bind(n),n.applyRule=n.applyRule.bind(n),n.saveChanges=n.saveChanges.bind(n),n.onCloseRelayControlDialog=n.onCloseRelayControlDialog.bind(n),n.setOptimizeStatus=n.setOptimizeStatus.bind(n),n}return f(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return this.fetchDevices(),[4,this.fetchPTACInfo()];case 1:return e.sent(),[4,this.fetchPTACADP()];case 2:return e.sent(),this.fetchDevicesMQTTData(),this.setIntervalStart(),[2]}})})},t.prototype.componentWillUnmount=function(){var e=this.state.intervalId;e&&(clearInterval(e),this.setState({callInterval:!1}))},t.prototype.fetchPTACADP=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i,r;return v(this,function(o){switch(o.label){case 0:return e=this.props,t=e.equipmentOntology,n=e.buildingName,a=e.solutionOntology,i=Object(),[4,Object(c.c)(n,"",t,a)];case 1:return r=o.sent(),i=r&&r.equipment?r:{ontology:Object(s.t)(12),building:n,equipment:t,DeadBandMinutes:1,DeadBandTemp:1,MotinoDetectionE1:1,MotinoDetectionE2:1,solutionOntology:a,ADPSettings:l.a,NoOfMotionTriggers:100,OccupancyDeadband:1},this.setState({ptacADP:i}),[2]}})})},t.prototype.fetchDevices=function(){var e=this,t=this.props.devices;if(t&&t.length>0){var n=Object(),a=Object();n=t.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ceiling")}),a=t.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("i1")}),this.setState({ceilingSensorDevice:n,relayDevice:a},function(){e.fetchDevicesMQTTData()})}},t.prototype.setIntervalStart=function(){var e=this,t=this.state.intervalId;t&&clearInterval(t);var n=0;t=setInterval(function(){return g(e,void 0,void 0,function(){var e,t,a,i;return v(this,function(r){return e=this.state,t=e.callInterval,a=e.modelChanged,i=e.currentTabs,n++,!a&&t&&n>=5&&"CurrentValues"==i&&(this.fetchPTACInfo(),this.fetchDevicesMQTTData(),n=0),[2]})})},1e3),this.setState({intervalId:t})},t.prototype.onCloseRelayControlDialog=function(e){this.setState({openRelayControlDialog:e})},t.prototype.fetchDevicesMQTTData=function(){return g(this,void 0,void 0,function(){var e,t,n,a,r;return v(this,function(o){switch(o.label){case 0:return e=this.state,t=e.ceilingSensorDevice,n=e.relayDevice,[4,Object(u.n)(t).then(function(e){var n=e[0];return!n||n&&n.error?(Object(i.a)("Error occurred while fetching ceiling sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return a=o.sent(),[4,Object(u.f)(n.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(n.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 2:return r=o.sent(),this.setState({ceilingSensorMQTT:a,i1RelayMQTT:r}),[2]}})})},t.prototype.fetchPTACInfo=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i,r,l;return v(this,function(u){switch(u.label){case 0:return e=this.props,t=e.buildingName,n=e.equipmentOntology,a=e.solutionOntology,[4,Object(c.a)(t,null,null,n)];case 1:return i=u.sent(),r=Object(),i&&i.length>0?[4,Object(c.f)(i)]:[3,3];case 2:return l=u.sent(),r=l[0],[3,4];case 3:r={controlType:o.a.Local,coolTemp:0,equipment:n,fanStatus:"",heatTemp:0,isAutoOff:!0,isOptimizedActive:!1,isRelayOn:!1,isRoomOccupied:"UNOCCUPIED",isShutdownActive:!1,mode:o.c.Off,ontology:Object(s.t)(12),optimizeStatus:"0",solutionOntology:a},u.label=4;case 4:return this.setState({ptacController:r}),[2]}})})},t.prototype.changeTemperature=function(e,t,n){var a=this.state.ptacController;t==o.c.Cool?(a.coolTemp=e?a.coolTemp-.1:a.coolTemp+.1,a.coolTemp=parseFloat(a.coolTemp.toFixed(2))):t==o.c.Heat&&(a.heatTemp=e?a.heatTemp-.1:a.heatTemp+.1,a.heatTemp=parseFloat(a.heatTemp.toFixed(2))),this.setState({ptacController:a,modelChanged:!0})},t.prototype.changeMode=function(e){var t=this.state,n=t.ptacController,a=t.ptacADP;if(n.mode=e,n.mode==o.c.Off)n.isAutoOff=!1,n.isRelayOn=!1;else if(n.isAutoOff=!0,n.isRelayOn=!0,e==o.c.Cool)n.coolTemp>=0&&n.coolTemp<=1&&a&&a.ADPSettings&&a.ADPSettings.length>0&&(i=a.ADPSettings.find(function(e){return"COOLING"==e.season&&"UNOCCUPIED"==e.occType}))&&i.defaultTargetTemp&&(n.coolTemp=parseFloat(i.defaultTargetTemp));else if(e==o.c.Heat){var i;if(n.heatTemp>=0&&n.heatTemp<=1&&a&&a.ADPSettings&&a.ADPSettings.length>0)(i=a.ADPSettings.find(function(e){return"HEATING"==e.season&&"UNOCCUPIED"==e.occType}))&&i.defaultTargetTemp&&(n.heatTemp=parseFloat(i.defaultTargetTemp))}this.setState({ptacController:n,modelChanged:!0})},t.prototype.setOptimizeStatus=function(e){var t=this.state.ptacController;t.optimizeStatus=e,t.isOptimizedActive=!0,t.isShutdownActive=!1,this.setState({ptacController:t,modelChanged:!0})},t.prototype.changeControlType=function(e){return g(this,void 0,void 0,function(){var t,n,a;return v(this,function(i){switch(i.label){case 0:return t=this.props.equipmentOntology,(n=this.state.ptacController).controlType=e,(a=Object()).equipmentOntology=t,a.isScheduleOn=e==o.a.Schedule,Object(r.a)(!0),[4,Object(u.W)(a)];case 1:return i.sent(),n.isShutdownActive=e==o.a.Shutdown,n.isOptimizedActive=e==o.a.Optimize,this.setState({ptacController:n,modelChanged:!0,ScheduleIsOnModel:a}),Object(r.a)(!1),[2]}})})},t.prototype.changeFanSettings=function(e){var t=this.state.ptacController;t.fanStatus=e,this.setState({ptacController:t,modelChanged:!0})},t.prototype.applyRule=function(e,t,n){return e?t?e<n?0:e:e>n?0:e:0},t.prototype.saveChanges=function(e,t){return g(this,void 0,void 0,function(){var n,a,l,s,d,m,h=this;return v(this,function(p){switch(p.label){case 0:return n=this.props.buildingName,a=this.state,l=a.modelChanged,s=a.ptacController,d=a.relayDevice,l||t?(e&&Object(r.a)(!0),s.controlType!=o.a.Manual?[3,2]:[4,Object(u.H)(d,s.isAutoOff,n)]):[3,4];case 1:(m=p.sent()).error?Object(i.a)(m.error):m&&(s.isRelayOn=s.isAutoOff,Object(i.b)("Changes applied successfully. ")),p.label=2;case 2:return[4,Object(c.b)(this.props.buildingName,s,!e)];case 3:p.sent(),this.setState({modelChanged:!1},function(){h.fetchPTACInfo(),e&&Object(r.a)(!1)}),p.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,i=t.buildingName,r=t.solutionOntology,l=t.equipmentOntology,c=t.equipmentRdfsLabel,u=t.devices,f=this.state,b=f.currentTabs,y=f.ptacController,E=f.modelChanged,x=f.ceilingSensorMQTT,S=f.i1RelayMQTT,w=f.relayDevice,N=f.openRelayControlDialog,C=!y||y.controlType!=o.a.Manual;return a.createElement(a.Fragment,null,a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("CurrentValues"==b?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"CurrentValues"})}},a.createElement("span",{className:"vertical-align"},"Controller")),a.createElement("button",{className:"btn "+("Schedule"==b?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Schedule"})}},a.createElement("span",{className:"vertical-align"},"Schedule")),a.createElement("button",{className:"btn "+("Alarms"==b?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Alarms"})}},a.createElement("span",{className:"vertical-align"},"Alarms")),a.createElement("button",{className:"btn "+("Graphs"==b?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Graphs"})}},a.createElement("span",{className:"vertical-align"},"Graphs")),a.createElement("button",{className:"btn "+("InnerControllerADP"==b?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"InnerControllerADP"})}},a.createElement("span",{className:"vertical-align"},"ADP"))))),"CurrentValues"==b&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},a.createElement("strong",null,"Equipment Status:")," (",S&&S.active_power_Watts?parseFloat(S.active_power_Watts)<.2?"idle":"running":"idle",")"))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",{className:"row"},y&&(y.mode==o.c.Heat||y.mode==o.c.Auto)&&a.createElement(a.Fragment,null,a.createElement("div",{className:(y.mode==o.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},y&&y.heatTemp?y.heatTemp:0,"\xb0F")),a.createElement("div",{className:(y.mode==o.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},a.createElement("div",{className:"btn-group-vertical"},a.createElement("button",{type:"button",className:"btn tempButton heatTo",onClick:function(){return e.changeTemperature(!1,o.c.Heat,y&&y.heatTemp?y.heatTemp:0)},disabled:C},a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-up"})),a.createElement("div",null,"Warmer")),a.createElement("button",{type:"button",className:"btn tempButton coolTo",onClick:function(){return e.changeTemperature(!0,o.c.Heat,y&&y.heatTemp?y.heatTemp:0)},disabled:C},a.createElement("div",null,"Cooler"),a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-down"})))))),y&&(y.mode==o.c.Cool||y.mode==o.c.Auto)&&a.createElement(a.Fragment,null,a.createElement("div",{className:(y.mode==o.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},y&&y.coolTemp?y.coolTemp:0,"\xb0F")),a.createElement("div",{className:(y.mode==o.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},a.createElement("div",{className:"btn-group-vertical"},a.createElement("button",{type:"button",className:"btn tempButton heatTo",onClick:function(){return e.changeTemperature(!1,o.c.Cool,y&&y.coolTemp?y.coolTemp:0)},disabled:C},a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-up"})),a.createElement("div",null,"Warmer")),a.createElement("button",{type:"button",className:"btn tempButton coolTo",onClick:function(){return e.changeTemperature(!0,o.c.Cool,y&&y.coolTemp?y.coolTemp:0)},disabled:C},a.createElement("div",null,"Cooler"),a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-down"}))))))),a.createElement("div",{className:"row"},a.createElement("br",null),a.createElement("div",{className:"RelayHeading center"},a.createElement("b",null,"Relay Status: ",y.isRelayOn?"On":"Off")))),a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",null,"Room Temp"),a.createElement("div",{className:"counter"},Object(s.a)(x&&x.temp_celsius?x.temp_celsius:0).toFixed(2)," \xb0F")),y&&y.controlType!=o.a.Manual&&a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",null,"Room Occupancy"),a.createElement("div",{className:"counter"},y.isRoomOccupied))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",disabled:C,className:y&&y.mode===o.c.Off?"btn btn-fill":"btn",onClick:function(){return e.changeMode(o.c.Off)}},"Off"),a.createElement("button",{type:"button",className:y&&y.mode===o.c.Heat?"btn btn-fill":"btn",disabled:C,onClick:function(){return e.changeMode(o.c.Heat)}},"Heat"),a.createElement("button",{type:"button",className:y&&y.mode===o.c.Cool?"btn btn-fill":"btn",disabled:C,onClick:function(){return e.changeMode(o.c.Cool)}},"Cool"))),a.createElement("div",{className:"col-md-6 col-xs-12 pull-right"},a.createElement("div",{className:"row PTACInfo"},a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("div",null,"Power Watts"),a.createElement("div",{className:"font22"},S&&S.active_power_Watts&&parseFloat(S.active_power_Watts)?parseFloat(S.active_power_Watts):0," kW")),a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("div",null,"Voltage"),a.createElement("div",{className:"font22"},S&&S.voltage_volts?S.voltage_volts:0," V")),a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("div",null,"Frequency"),a.createElement("div",{className:"font22"},S&&S.frequency_Hz?this.applyRule(S.frequency_Hz,!0,55):0," Hz")),a.createElement("div",{className:"col-md-3 col-xs-6 p-0"},a.createElement("div",null,"Energy Watt/Hour"),a.createElement("div",{className:"font22"},S&&S.import_active_energy_Wh&&parseFloat(S.import_active_energy_Wh)?parseFloat(S.import_active_energy_Wh).toFixed(2):0," kWh"))))),a.createElement("div",{className:"row mt-22"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",null,a.createElement("button",{className:"btn btn-success center custom-outline-btn",title:"Control Settings",onClick:function(t){e.setState({openRelayControlDialog:!0},function(){document.getElementById("btnDialogRelayControl").click()})}}," ",a.createElement("i",{className:"fa fa-sliders"})," Control Settings",a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Controls Settings")))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:"btn btn-success "+(y&&y.controlType==o.a.Local?"btn-fill":""),onClick:function(){return g(e,void 0,void 0,function(){return v(this,function(e){return this.changeControlType(o.a.Local),[2]})})}},"Local"),a.createElement("button",{type:"button",className:"btn cursor-no-drop "+(!y||y.controlType!=o.a.Manual&&y.controlType!=o.a.Schedule&&y.controlType!=o.a.Optimize&&y.controlType!=o.a.Shutdown?"":"btn-success btn-fill")},"Remote"),a.createElement("button",{type:"button",onClick:function(){return g(e,void 0,void 0,function(){return v(this,function(e){return this.changeControlType(o.a.Manual),[2]})})},className:"btn btn-success "+(y&&y.controlType==o.a.Manual?"btn-fill":"")},"Manual"),a.createElement("button",{type:"button",className:"btn btn-success "+(y&&y.controlType==o.a.Schedule?"btn-fill":""),onClick:function(){return g(e,void 0,void 0,function(){return v(this,function(e){return this.changeControlType(o.a.Schedule),[2]})})}},"Schedule"),a.createElement("button",{type:"button",className:"btn btn-success "+(y&&y.controlType==o.a.Optimize?"btn-fill":""),onClick:function(){return g(e,void 0,void 0,function(){return v(this,function(e){return this.changeControlType(o.a.Optimize),[2]})})}},"Optimize"),a.createElement("button",{disabled:"Off"==y.mode,type:"button",className:"btn btn-success "+(y&&y.controlType==o.a.Shutdown?"btn-fill":""),onClick:function(){return g(e,void 0,void 0,function(){return v(this,function(e){return this.changeControlType(o.a.Shutdown),[2]})})}},"Shutdown")))),"Optimize"==y.controlType&&a.createElement("div",{className:"row p-4"},a.createElement("div",{className:"col-md-9"}),a.createElement("div",{className:"btn-group pull-right col-md-3 pl-0 mr-2"},a.createElement("button",{id:"optiStatus1",className:"btn "+("0"==y.optimizeStatus?"btn-fill":""),onClick:function(){e.setOptimizeStatus("0")},type:"button"},"0"),a.createElement("button",{id:"optiStatus1",disabled:"Cool"!=y.mode,className:"btn "+("1"==y.optimizeStatus?"btn-fill":""),onClick:function(){e.setOptimizeStatus("1")},type:"button"},"1"),a.createElement("button",{onClick:function(){e.setOptimizeStatus("2")},id:"optiStatus2",disabled:"Cool"!=y.mode,className:"btn "+("2"==y.optimizeStatus?"btn-fill":""),type:"button"},"2"),a.createElement("button",{onClick:function(){e.setOptimizeStatus("3")},id:"optiStatus3",disabled:"Heat"!=y.mode,className:"btn "+("3"==y.optimizeStatus?"btn-fill":""),type:"button"},"3"),a.createElement("button",{onClick:function(){e.setOptimizeStatus("4")},id:"optiStatus4",disabled:"Heat"!=y.mode,className:"btn "+("4"==y.optimizeStatus?"btn-fill":""),type:"button"},"4"))),a.createElement("div",{className:E?"InsightApplyChanges":"hidden",style:{margin:"55px -15px"}},a.createElement("h4",null,"Do you want to apply these changes?"),a.createElement("div",null,a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({modelChanged:!1})}},"Cancel"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){}},"Reset"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.saveChanges(!0,!1)}},"Apply Changes"))))))),N&&w&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",id:"btnDialogRelayControl",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#dialogRelayControl"}," . "),a.createElement(m.a,{id:"dialogRelayControl",ptacEqipmenteName:l,buildingName:i,onCloseControlDialog:this.onCloseRelayControlDialog,ptacEqipmentType:"PTAC",ptacEqipmenteLabel:c,ptacSolution:r})),"Schedule"==b&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(h.default,{isSolution:!0,equipmentOntology:l,instance:n,buildingName:i,InsightName:w.deviceName,solutionOntology:r,solutionEquipmentType:"PTAC",ControlName:"PTACControl",type:"Equipment",hideTabs:!0})),"Alarms"==b&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}}),"InnerControllerADP"==b&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(d.default,{instance:n,buildingName:i,InsightName:l,ControlName:"PTACControl",type:"Equipment",hideTabs:!0,solutionOntology:r})),"Graphs"==b&&a.createElement("div",null,a.createElement(p.a,{instance:n,buildingName:i,devices:u,equipment:l,graphType:"PTAC",solution:r})))},t}(a.Component);t.a=b},3518:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(650)),r=n(678),o=n(10),l=n(116),s=n(1065),c=n(1054),u=n(23),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={SensorList:[],devices:[],ptacControllerSettings:Object(),ptacController:Object()},n.onSaveHandle=n.onSaveHandle.bind(n),n.fetchDevices=n.fetchDevices.bind(n),n.handleTypeChange=n.handleTypeChange.bind(n),n.handleSensorChange=n.handleSensorChange.bind(n),n.fetchPTACControlSettingsData=n.fetchPTACControlSettingsData.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return Object(l.a)(!0),[4,this.fetchDevices()];case 1:return e.sent(),[4,this.fetchPTACInfo()];case 2:return e.sent(),[4,this.fetchPTACControlSettingsData()];case 3:return e.sent(),Object(l.a)(!1),[2]}})})},t.prototype.fetchPTACControlSettingsData=function(){return m(this,void 0,void 0,function(){var e,t,n,a,i,r,o;return h(this,function(l){switch(l.label){case 0:return e=this.props,t=e.ptacEqipmenteName,n=e.ptacSolution,a=e.ptacEqipmentType,t?[4,Object(s.e)("","",t)]:[3,3];case 1:return i=l.sent(),[4,Object(s.g)(i)];case 2:(r=l.sent())&&r.length>0&&r[0]?this.setState({ptacControllerSettings:r[0]}):(o={ontology:Object(u.t)(12),controlType:"",equipment:t,equipmentType:a,ptactType:"",sensorDevice:"",solutionOntology:n},this.setState({ptacControllerSettings:o})),l.label=3;case 3:return[2]}})})},t.prototype.fetchPTACInfo=function(){return m(this,void 0,void 0,function(){var e,t,n,a,i,r,o;return h(this,function(l){switch(l.label){case 0:return e=this.props,t=e.buildingName,n=e.ptacEqipmenteName,a=e.ptacSolution,[4,Object(s.a)(t,null,null,n)];case 1:return(i=l.sent())&&i.length>0?[4,Object(s.f)(i)]:[3,3];case 2:return r=l.sent(),o=r[0],this.setState({ptacController:o}),[3,4];case 3:o={ontology:Object(u.t)(12),controlType:c.a.Local,coolTemp:0,equipment:n,fanStatus:c.b.Auto,heatTemp:0,isRelayOn:!1,isAutoOff:!1,solutionOntology:a,mode:c.c.Off,optimizeStatus:"",isOptimizedActive:!1,isShutdownActive:!1,isRoomOccupied:"UNOCCUPIED"},this.setState({ptacController:o}),l.label=4;case 4:return[2]}})})},t.prototype.handleTypeChange=function(e){var t=this.state.ptacControllerSettings;t.ptactType=e,this.setState({ptacControllerSettings:t})},t.prototype.handleSensorChange=function(e){var t=this.state.ptacControllerSettings;t.sensorDevice=e,this.setState({ptacControllerSettings:t})},t.prototype.fetchDevices=function(){return m(this,void 0,void 0,function(){var e,t,n;return h(this,function(a){switch(a.label){case 0:return(e=this.props.buildingName)?(t=[],[4,Object(r.u)(e)]):[3,2];case 1:(n=a.sent())&&n.length>0&&(t=n.filter(function(e){return-1!=Object(o.g)(e.moncontype).toLowerCase().indexOf("ceiling")}).map(function(e){return{value:Object(o.g)(e.moncondevice),label:Object(o.g)(e.rdfsLabel)}})),this.setState({devices:n,SensorList:t}),a.label=2;case 2:return[2]}})})},t.prototype.onSaveHandle=function(){return m(this,void 0,void 0,function(){var e,t,n,a,i,r;return h(this,function(o){switch(o.label){case 0:return e=this.props,t=e.buildingName,n=e.refreshControlDB,a=e.onCloseControlDialog,i=this.state,r=i.ptacControllerSettings,i.ptacController.controlType==c.a.Manual?r.controlType="10":r.sensorDevice?r.controlType="6":r.controlType="1",Object(l.a)(!0),[4,Object(s.i)(t,r)];case 1:return o.sent(),n?[4,n()]:[3,3];case 2:o.sent(),o.label=3;case 3:return a&&a(!1),Object(l.a)(!1),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.id,r=t.onCloseControlDialog,o=t.ptacEqipmenteLabel,l=this.state,s=l.ptacControllerSettings,c=l.SensorList,u=!s||!s.ptactType;return a.createElement(i.a,{id:n,saveButtonText:"Save",heading:o+" Control Settings",showSaveButton:!0,disableSaveButton:u,showCancelButton:!0,onSaveButtonClick:function(){e.onSaveHandle()},onCancelButtonClickActive:!0,onCancelButtonClick:function(){return m(e,void 0,void 0,function(){return h(this,function(e){return r&&r(!1),[2]})})}},a.createElement("div",{className:"card dataCard no-margin"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"ptacType"},"PTAC Type:"),a.createElement("select",{id:"ptacType",className:"form-control",value:s&&s.ptactType,onChange:function(t){return e.handleTypeChange(t.target.value)}},a.createElement("option",{value:"0"},"Select Type"),a.createElement("option",{value:"A"},"Type A"),a.createElement("option",{value:"B"},"Type B"),a.createElement("option",{value:"C"},"Type C"))),a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"sensor"},"Occupancy Sensor:"),a.createElement("select",{id:"sensor",className:"form-control",value:s&&s.sensorDevice,onChange:function(t){return e.handleSensorChange(t.target.value)}},a.createElement("option",{value:""},"Select Occupancy Sensor"),c&&c.map(function(e){return a.createElement("option",{value:e.value},e.label)})))))))},t}(a.Component);t.a=p},775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(116)),r=n(653),o=n(650),l=n(772),s=n(657),c=n(10),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(e){r(e)}}function l(e){try{s(a.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}s((a=a.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={archive:[],versionToRestore:Object(),historianArchiveDifferences:[],sourceTimestamp:Object(),targetTimestamp:Object(),user:"",peopleList:Object()},n.getHistorianArchive=n.getHistorianArchive.bind(n),n.restoreHistorian=n.restoreHistorian.bind(n),n.getPeopleList=n.getPeopleList.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this.props.buildingName&&this.props.instance&&this.props.ObjectId?(Object(i.a)(!0),[4,this.getHistorianArchive()]):[3,3];case 1:return e.sent(),[4,this.getPeopleList()];case 2:e.sent(),Object(i.a)(!1),e.label=3;case 3:return[2]}})})},t.prototype.getPeopleList=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return[4,Object(s.s)(this.props.buildingName)];case 1:return e=t.sent(),this.setState({peopleList:e}),[2]}})})},t.prototype.getHistorianArchive=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return[4,Object(l.a)(this.props.ObjectId)];case 1:return e=t.sent(),this.setState({archive:e}),[2]}})})},t.prototype.difference=function(e,t){return d(this,void 0,void 0,function(){var n,a,i,r,o,l;return m(this,function(s){switch(s.label){case 0:return n=this.state.peopleList,e&&e.model&&t&&t.model?(a=JSON.parse(e.model),i=JSON.parse(t.model),[4,this.getDifference(a,i)]):[3,2];case 1:r=s.sent(),o=n.find(function(t){return Object(c.g)(t.contact)==e.createdBy}),l=o&&o.name?Object(c.g)(o.name):"",console.log("historianArchiveDifferences",r),this.setState({historianArchiveDifferences:r,sourceTimestamp:e.timestamp,targetTimestamp:t.timestamp,user:l},function(){document.getElementById("btnShowDifference").click()}),s.label=2;case 2:return[2]}})})},t.prototype.getDifference=function(e,t,n){return d(this,void 0,Promise,function(){var a,i=this;return m(this,function(r){return a=[],Object.keys(e).forEach(function(r){return d(i,void 0,void 0,function(){var i,o,l,s;return m(this,function(c){switch(c.label){case 0:return i=e&&e[r]?e[r]:"",o=t&&t[r]?t[r]:"","object"!=typeof i?[3,3]:JSON.stringify(i)==JSON.stringify(o)?[3,2]:(l=isNaN(r)?r:n||"",[4,this.getDifference(i,o,l)]);case 1:s=c.sent(),a.push.apply(a,s),c.label=2;case 2:return[3,4];case 3:i!=o&&"value"!=r&&a.push({key:n?n+("label"!=r?" - "+r:""):r,source:i||"",target:o||""}),c.label=4;case 4:return[2]}})})}),[2,a]})})},t.prototype.restoreHistorian=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return(e=this.state.versionToRestore)&&e.model&&this.props.restoreSelectedVersion(e),[4,this.getHistorianArchive()];case 1:return t.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props.instance,n=this.state,i=n.archive,l=n.versionToRestore,s=n.historianArchiveDifferences,c=n.sourceTimestamp,u=n.targetTimestamp,h=n.user;return a.createElement("div",{className:"card",id:"HistorianArchiveList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("h3",null,"Historian Archive"))),a.createElement("br",null),a.createElement("div",{className:"row no-margin"},a.createElement("div",{className:"hidden-xs col-md-10 col-md-offset-1 col-md-offset-right-1 no-padding cell_border",style:{marginBottom:"0px"}},a.createElement("div",{className:"col-md-12 bgcol trim-data headingText",style:{padding:"10px"}},"Timestamp"))),a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"hidden"}),i&&i.length>0&&i.map(function(t,n){return a.createElement("div",{className:"col-md-10 cell_border no-padding col-md-offset-1 col-md-offset-right-1 clickable"},a.createElement("div",{className:"row no-margin hover"},a.createElement("div",{className:"col-md-4 padding-10"},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Timestamp"),"  ",t.timestamp.ToEasternDateTime()),a.createElement("div",{className:"col-md-8"},0!=n&&a.createElement("button",{className:"btn btn-sm btn-success btn-fill pull-right margin-5 mr-0",title:"Restore this version",onClick:function(n){e.setState({versionToRestore:t},function(){document.getElementById("btnConfirmRestore").click()})}},"Restore this version  "),n!=i.length-1&&a.createElement("button",{className:"btn btn-sm btn-primary btn-fill pull-right margin-5 mr-0",title:"Difference with previous version",onClick:function(a){return d(e,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return n==i.length-1?[3,2]:[4,this.difference(t,i[n+1])];case 1:e.sent(),e.label=2;case 2:return[2]}})})}},"Difference with previous version   "),0!=n&&a.createElement("button",{className:" btn btn-sm btn-primary btn-fill pull-right margin-5 mr-0",title:"Difference with latest version",onClick:function(a){return d(e,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return 0==n?[3,2]:[4,this.difference(t,i[0])];case 1:e.sent(),e.label=2;case 2:return[2]}})})}},"Difference with latest version   "))))})),a.createElement("button",{id:"btnConfirmRestore",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmRestoreDialog"},"."),a.createElement(r.a,{instance:t,id:"ConfirmRestoreDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:'Are you sure to Restore "'+(l&&l.timestamp?l.timestamp.ToEasternDateTime():"")+'" Version?',heading:"Confirm...",onConfirmButtonClick:function(){e.restoreHistorian()},onCancelButton:function(){e.setState({versionToRestore:Object()})}}),a.createElement("button",{type:"button",id:"btnShowDifference",className:"hidden","data-toggle":"modal","data-target":"#ShowDifference"}," "),a.createElement(o.a,{id:"ShowDifference",heading:"Difference",saveButtonText:"Done",onSaveButtonClick:function(){e.setState({historianArchiveDifferences:[],sourceTimestamp:Object(),targetTimestamp:Object(),user:""})},isEditForm:!0},a.createElement("div",{className:"scroll-y",style:{maxHeight:500}},a.createElement("div",{className:"container-fluid",style:{paddingLeft:"0px"}},a.createElement("div",{className:"content",style:{paddingTop:"0px"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12",style:{margin:"0px 10px"}},a.createElement("p",{className:"padding-5 small pull-left cell_border hover",style:{borderRadius:"5px",background:"rgb(220 220 220 / 21%)",color:"black"}},a.createElement("b",{style:{color:"gray"}},"Updated By: \xa0")," ",h,", (",new Date(c&&c).ToEasternDateTime(),")")),s&&s.length>0&&c&&u&&a.createElement("div",{className:"col-md-12",style:{margin:"10px"}},a.createElement("div",{className:"col-md-6 cell_border no-padding center",style:{background:"#dcdcdc94",borderRadius:"50px"}},a.createElement("h4",{className:"margin-10"}," After "),a.createElement("h4",{className:"margin-10"},c&&c.ToEasternDateTime())),a.createElement("div",{className:"col-md-6 cell_border no-padding center",style:{background:"gainsboro",borderRadius:"50px"}},a.createElement("h4",{className:"margin-10"}," Before "),a.createElement("h4",{className:"margin-10"},u&&u.ToEasternDateTime()))),s&&s.length>0&&s.map(function(e){return console.log(e),a.createElement("div",{className:"col-md-12",style:{margin:"10px"}},a.createElement("div",{className:"col-md-12 no-padding cell_border border-radius"},a.createElement("div",{className:"col-md-12 padding-10 center cell_border",style:{background:"ghostwhite"}},a.createElement("h5",{className:"no-margin",style:{textTransform:"uppercase",padding:"2px"}},a.createElement("b",null,"Attribute:")," ",a.createElement("span",{className:"text-primary"},e.key))),a.createElement("div",{className:"col-md-6 padding-10 center cell_border",style:{background:"#dcdcdc94"}},e.source?e.source:"-"),a.createElement("div",{className:"col-md-6 padding-10 center cell_border",style:{background:"gainsboro"}},e.target?e.target:"-")))})))))))),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null))))},t}(a.Component);t.default=h},783:function(e,t,n){"use strict";var a,i,r,o,l,s,c;n.d(t,"c",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return u}),n.d(t,"a",function(){return m}),function(e){e[e.OFF=0]="OFF",e[e.HEAT=1]="HEAT",e[e.COOL=2]="COOL",e[e.AUTO=3]="AUTO"}(a||(a={})),function(e){e[e.Idle=0]="Idle",e[e.HEATING=1]="HEATING",e[e.COOLING=2]="COOLING",e[e.LOCKOUT=3]="LOCKOUT",e[e.ERROR=4]="ERROR"}(i||(i={})),function(e){e[e.AUTO=0]="AUTO",e[e.ON=1]="ON"}(r||(r={})),function(e){e[e.Fahrenheit=0]="Fahrenheit",e[e.Celsius=1]="Celsius"}(o||(o={})),function(e){e[e.Fahrenheit=0]="Fahrenheit",e[e.Celsius=1]="Celsius"}(l||(l={})),function(e){e[e.occupied1=0]="occupied1",e[e.occupied2=1]="occupied2",e[e.occupied3=2]="occupied3",e[e.unoccupied=3]="unoccupied",e[e.inactive=255]="inactive"}(s||(s={})),function(e){e[e.Home=0]="Home",e[e.Away=1]="Away"}(c||(c={}));var u,d;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(u||(u={})),function(e){e[e.AllModes=0]="AllModes",e[e.HeatCoolOnly=1]="HeatCoolOnly",e[e.HeatOnly=2]="HeatOnly",e[e.CoolOnly=3]="CoolOnly"}(d||(d={}));var m=[{ontology:"",season:"COOLING",occType:"UNOCCUPIED",defaultTargetTemp:"85.0",fanSetting:"MEET_TURNOVER_REQTS",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"10.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"8.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"OCCUPIED",defaultTargetTemp:"70.0",fanSetting:"AUTO_HI",warmLittleTemp:"2.0",warmLittleHowBad:"3.0",warmLotTemp:"8.0",warmLotHowBad:"8.0",warmHardLimitTemp:"80.0",coolLittleTemp:"2.0",coolLittleHowBad:"3.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"SEMI",defaultTargetTemp:"75.0",fanSetting:"MEET_TURNOVER_REQTS",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"10.0",warmLotHowBad:"10.0",warmHardLimitTemp:"90.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"8.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"SHUTDOWN",defaultTargetTemp:"90.0",fanSetting:"AUTO_LO",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"110.0",coolLittleTemp:"10.0",coolLittleHowBad:"5.0",coolLotTemp:"20.0",coolLotHowBad:"10.0",coolHardLimitTemp:"45.0"},{ontology:"",season:"HEATING",occType:"UNOCCUPIED",defaultTargetTemp:"55.0",fanSetting:"AUTO_HI",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"10.0",coolHardLimitTemp:"40.0"},{ontology:"",season:"HEATING",occType:"OCCUPIED",defaultTargetTemp:"68.0",fanSetting:"AUTO_HI",warmLittleTemp:"2.0",warmLittleHowBad:"3.0",warmLotTemp:"5.0",warmLotHowBad:"8.0",warmHardLimitTemp:"90.0",coolLittleTemp:"2.0",coolLittleHowBad:"3.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"55.0"},{ontology:"",season:"HEATING",occType:"SEMI",defaultTargetTemp:"65.0",fanSetting:"AUTO_HI",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"8.0",warmLotHowBad:"8.0",warmHardLimitTemp:"90.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"50.0"},{ontology:"",season:"HEATING",occType:"SHUTDOWN",defaultTargetTemp:"50.0",fanSetting:"AUTO_HI",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"40.0"}]}});