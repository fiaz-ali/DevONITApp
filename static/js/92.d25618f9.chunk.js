webpackJsonp([92],{648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=(n.n(a),n(17)),r=n(8),s=n(59),i=n(112),o=n(114),l=n(39),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(c,r){function s(e){try{o(a.next(e))}catch(e){r(e)}}function i(e){try{o(a.throw(e))}catch(e){r(e)}}function o(e){e.done?c(e.value):new n(function(t){t(e.value)}).then(s,i)}o((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,c,r,s={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(r){return function(i){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(c=2&r[0]?a.return:r[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,r[1])).done)return c;switch(a=0,c&&(r=[2&r[0],c.value]),r[0]){case 0:case 1:c=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,a=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(c=(c=s.trys).length>0&&c[c.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!c||r[1]>c[0]&&r[1]<c[3])){s.label=r[1];break}if(6===r[0]&&s.label<c[1]){s.label=c[1],c=r;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(r);break}c[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],a=0}finally{n=c=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_spaceTenants:[],_tenantList:[],spaceTenantObj:Object(),spaceTenantToDelete:Object()},n.s3=new l.b,n.onDeleteSpaceTenant=n.onDeleteSpaceTenant.bind(n),n.deleteSpaceTenant=n.deleteSpaceTenant.bind(n),n.fetchSpaceTenants=n.fetchSpaceTenants.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this.fetchSpaceTenants()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.fetchSpaceTenants=function(){return m(this,void 0,void 0,function(){var e=this;return d(this,function(t){return Object(i.a)(!0),Object(o.p)(this.props.buildingName).then(function(t){t&&t.length?t[0].space&&e.setState({_spaceTenants:t}):e.setState({_spaceTenants:[]})}).catch(function(e){return e}),Object(i.a)(!1),[2]})})},t.prototype.onDeleteSpaceTenant=function(e){this.setState({spaceTenantToDelete:e})},t.prototype.deleteSpaceTenant=function(){return m(this,void 0,void 0,function(){var e,t=this;return d(this,function(n){switch(n.label){case 0:return e=this.state.spaceTenantToDelete,Object(i.a)(!0),e&&e.tenant?[4,Object(o.i)(e.tenant.value,e.space.value).then(function(e){return m(t,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this.fetchSpaceTenants()];case 1:return[2,e.sent()]}})})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,i=t.buildingName,o=this.state._spaceTenants;return a.createElement(c.AppContext.Consumer,null,function(t){return a.createElement("div",{className:"content",id:"chats"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 "},a.createElement("div",{className:"dropdown"},a.createElement("button",{type:"button",className:"btn btn-dark btn-fill",onClick:function(){window.location.hash="/"+n+"/"+i+"/Space/AssignSpaceCustomer"}},"Back")),a.createElement("br",null))),a.createElement("div",{className:"card",id:"CustomerList"},a.createElement("div",{className:"content"},a.createElement(c.AppContext.Consumer,null,function(t){return a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row hidden-xs"},a.createElement("div",{className:"col-sm-9"},a.createElement("div",{className:"col-sm-4 headingText"},"Space"),a.createElement("div",{className:"col-sm-4 headingText"},"Customer "),a.createElement("div",{className:"col-sm-4 headingText"},"Role")),a.createElement("div",{className:"col-sm-3 headingText"})),a.createElement(s.a,{instance:n,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Customer Space Relation?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteSpaceTenant()}}),o.map(function(t,c){var s=Object(r.g)(t.role),o="";return o="owns"==s?"Owner":"occupies"==s?"Renter":"Both",a.createElement("div",{key:c,className:"row"},a.createElement("div",{className:"col-sm-9"},a.createElement("div",{className:"col-sm-4 trim-data",title:Object(r.g)(t.rdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Space"),a.createElement("a",{href:"#"+n+"/"+i+"/Space/SpaceCustomerInfo/"+Object(r.g)(t.space)+"/"+Object(r.g)(t.tenant)},"  ",Object(r.g)(t.rdfsLabel))),a.createElement("div",{className:"col-sm-4 trim-data",title:Object(r.g)(t.tenantname)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Customer"),Object(r.g)(t.tenantname)),a.createElement("div",{className:"col-sm-4 trim-data",title:o},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Role"),o)),a.createElement("div",{className:"col-sm-3 col-xs-12"},a.createElement("button",{className:"btn-xs btn-danger btn-fill","data-toggle":"modal","data-target":"#ConfirmDeleteDialog",onClick:function(n){e.onDeleteSpaceTenant(t)}},a.createElement("i",{className:"fa fa-trash"})," Delete"),a.createElement("button",{className:"btn-xs btn-success btn-fill",onClick:function(){window.location.hash="#"+n+"/"+i+"/Space/EditSpaceCustomer/"+Object(r.g)(t.space)+"/"+Object(r.g)(t.tenant)}},a.createElement("i",{className:"fa fa-edit"})," Edit")))}))})),a.createElement("br",null))))))})},t}(a.Component);t.default=p}});