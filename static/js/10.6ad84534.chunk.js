webpackJsonp([10],{2507:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=(a.n(n),a(122)),s=a(1151),i=a(12),o=a(675),r=a(2508),u=a(20),m=a(2509),c=a(2510),d=a(2511),h=a(2512),p=a(2513),g=a(2514),f=a(2515),v=a(2516),x=a(2517),V=a(2518),w=a(1454),y=(a.n(w),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),L=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},b=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},H=function(e){function t(t){var a=e.call(this,t)||this,n=new Date(new Date(Date.now()).setMinutes(new Date(Date.now()).getMinutes()-30)),l=new Date(Date.now());return a.state={from:n,to:l,dashboardURL:"",insights:[],templatesList:[],selectedTemplate:"",loadingDevices:!0,liveGraphRange:30,filteredInsights:[],showInsights:[],selectedTemplateGraphs:{},showAlarmPoints:!1,insightsLoaded:0},a}return y(t,e),t.prototype.componentDidMount=function(){return L(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return[4,this._fetchInsights()];case 1:return e.sent(),[2]}})})},t.prototype.moreInsights=function(){var e=this.state,t=e.showInsights,a=e.filteredInsights.slice(t.length-1,t.length+4),n=b(t,a);this.setState({showInsights:n},function(){window.dispatchEvent(new Event("reLoadGraph"))})},t.prototype.loadNextInsight=function(){var e=this.state,t=e.showInsights,a=e.insightsLoaded;a<t.length&&this.setState({insightsLoaded:a+1})},t.prototype._fetchInsights=function(){return L(this,void 0,void 0,function(){var e,t,a,n=this;return E(this,function(l){switch(l.label){case 0:return e=this.props.buildingName,t=[],e?[4,Object(o.x)(e)]:[3,3];case 1:return a=(a=l.sent()).filter(function(e){var t,a,n,l,s,o,r;return-1!=(null===(t=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===t?void 0:t.toLowerCase().indexOf("thermostat"))||-1!=(null===(a=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===a?void 0:a.toLowerCase().indexOf("ceiling"))||-1!=(null===(n=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===n?void 0:n.toLowerCase().indexOf("intesis"))||-1!=(null===(l=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===l?void 0:l.toLowerCase().indexOf("ats"))||-1!=(null===(s=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===s?void 0:s.toLowerCase().indexOf("generator"))||"CBW406"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype)||"CBW418"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype)||-1!=(null===(o=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===o?void 0:o.toLowerCase().indexOf("relayv4"))||-1!=(null===(r=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===r?void 0:r.toLowerCase().indexOf("relayi1"))||"WattNode"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype)}),[4,Object(s.b)(e).then(function(e){if(e&&e.length>0)e.map(function(e){t.push({ontology:Object(i.g)(e.ontology),label:Object(i.g)(e.label),deviceGraphs:Object(i.g)(e.deviceGraphs)})}),n.setState({templatesList:t,insights:a,selectedTemplate:(t.length-1).toString(),filteredInsights:[],showInsights:[]},function(){var e=JSON.parse(t[t.length-1].deviceGraphs),l=Object.keys(e),s=null===a||void 0===a?void 0:a.filter(function(e){return l.indexOf(Object(i.g)(e.moncondevice))>-1}),o=s.slice(0,10);n.setState({filteredInsights:s,showInsights:o,loadingDevices:!1,selectedTemplateGraphs:e})});else{var l=null===a||void 0===a?void 0:a.filter(function(e){return e.moncondevice}),s=l.slice(0,10);n.setState({insights:a,filteredInsights:l,showInsights:s,loadingDevices:!1})}})];case 2:l.sent(),l.label=3;case 3:return[2]}})})},t.prototype.changeAlarmStatus=function(){this.setState({showAlarmPoints:!this.state.showAlarmPoints}),window.dispatchEvent(new Event("ShowAlarms"))},t.prototype.liveGraphRangeChange=function(e){var t=this,a=new Date,n=new Date;n.setMinutes(n.getMinutes()-+e),this.setState({from:n,to:a,liveGraphRange:+e,loadingDevices:!0,insightsLoaded:0},function(){t.setState({loadingDevices:!1})})},t.prototype.selectTemplate=function(e){var t=this,a=this.state,n=a.templatesList,l=a.insights;if(0!=e.length)if("default"==e){var s=l,o=s.slice(0,10);this.setState({loadingDevices:!0,showAlarmPoints:!1,insightsLoaded:0},function(){t.setState({selectedTemplate:e,filteredInsights:s,showInsights:o,loadingDevices:!1})})}else this.setState({loadingDevices:!0,showAlarmPoints:!1,selectedTemplate:e,filteredInsights:[],showInsights:[],insightsLoaded:0},function(){var a=JSON.parse(n[+e].deviceGraphs),s=Object.keys(a),o=l.filter(function(e){return s.indexOf(Object(i.g)(e.moncondevice))>-1}),r=o.slice(0,10);t.setState({showInsights:r,filteredInsights:o,loadingDevices:!1,selectedTemplateGraphs:a})})},t.prototype.render=function(){var e,t=this,a=this.state,s=a.from,o=a.to,w=a.showInsights,y=a.filteredInsights,L=a.templatesList,E=a.selectedTemplate,b=a.loadingDevices,H=a.liveGraphRange,A=a.selectedTemplateGraphs,N=a.showAlarmPoints,D=a.insightsLoaded,P=this.props,S=P.buildingName,_=P.instance;return n.createElement("div",{className:"dashboard"},n.createElement("div",{className:"dashboard-header sticky"},!b&&n.createElement("div",{className:"col-md-4 float-left"},n.createElement("div",{className:"col-md-8 no-padding"},n.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){t.selectTemplate(e.target.value)},value:E,placeholder:"Select Template"},0==L.length&&n.createElement("option",{value:""},"Select Template"),n.createElement("option",{value:"default"},"All Graphs"),(null===L||void 0===L?void 0:L.length)>0&&L.map(function(e,t){return n.createElement("option",{value:t,key:t},e.label)}))),n.createElement(l.b,{target:"_blank",to:"/"+_+"/"+S+"/Dashboard/Templates",className:"btn btn-fill btn-secondary btn-secondary-dark margin-left-20 btn-fix-height"},"Create Template")),n.createElement("h3",{className:"dashboard-title"},Object(u.v)(S)),!b&&n.createElement("div",{className:"col-md-4 float-right margin-top-10"},D===w.length&&n.createElement(n.Fragment,null,n.createElement("div",{className:"col-md-3 padding-5"},n.createElement("label",{style:{color:"#fff",cursor:"none"}},"Show Alarm: \xa0")),n.createElement("div",{className:"padding-5"},n.createElement("label",null,n.createElement("input",{name:"showError",onChange:function(e){t.changeAlarmStatus()},className:"switchDashboard",type:"checkbox",checked:N}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-5 padding-5 margin-left-20"},n.createElement("label",{style:{color:"#fff",cursor:"none"}},"Graph Range: \xa0")),n.createElement("div",{className:"col-md-6 no-padding"},n.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){t.liveGraphRangeChange(e.target.value)},value:H},n.createElement("option",{value:5},"5 Minutes"),n.createElement("option",{value:15},"15 Minutes"),n.createElement("option",{value:30},"30 Minutes"),n.createElement("option",{value:60},"1 Hour"),n.createElement("option",{value:180},"3 Hours"),n.createElement("option",{value:360},"6 Hours"),n.createElement("option",{value:720},"12 Hours"),n.createElement("option",{value:1440},"24 Hours"))))),b||""!=E||0!=L.length?b?n.createElement("div",{className:"graph-box-loader full-screen"},n.createElement("div",{className:"center-object loader"})):n.createElement(m.a,{dataLength:w.length,className:"graph-boxes",next:function(){return t.moreInsights()},hasMore:w.length<y.length,loader:n.createElement("div",{className:"graph-box-loader full-screen"},n.createElement("div",{className:"center-object loader"}))},null===(e=null===w||void 0===w?void 0:w.slice(0,D+1))||void 0===e?void 0:e.map(function(e,a){var l,u,m,w,y,L,E,b=-1!=(null===(l=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===l?void 0:l.toLowerCase().indexOf("thermostat")),D=-1!=(null===(u=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===u?void 0:u.toLowerCase().indexOf("ceiling")),P=-1!=(null===(m=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===m?void 0:m.toLowerCase().indexOf("intesis")),k=-1!=(null===(w=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===w?void 0:w.toLowerCase().indexOf("ats")),O=-1!=(null===(y=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===y?void 0:y.toLowerCase().indexOf("generator")),F="CBW406"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),j="CBW418"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),C=-1!=(null===(L=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===L?void 0:L.toLowerCase().indexOf("relayv4")),R=-1!=(null===(E=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===E?void 0:E.toLowerCase().indexOf("relayi1")),G="WattNode"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype);return n.createElement(n.Fragment,null,b&&n.createElement(r.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),showAlarmPoints:N,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),D&&n.createElement(d.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,graphsList:A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Temp & Humidity","Pressure","Illuminance","Air Particles","Gas Resistance","Other Parameters"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),showAlarmPoints:N,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),P&&n.createElement(h.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),index:a,loadNextInsight:function(){return t.loadNextInsight()}}),k&&n.createElement(p.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),index:a,loadNextInsight:function(){return t.loadNextInsight()}}),O&&n.createElement(g.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,graphsList:A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Voltages","Currents","Powers","Power Factor","Other Parameters","Binary Parameters"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),index:a,showAlarmPoints:N,loadNextInsight:function(){return t.loadNextInsight()}}),F&&n.createElement(f.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,graphsList:A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),showAlarmPoints:N,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),j&&n.createElement(v.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,graphsList:A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),index:a,showAlarmPoints:N,loadNextInsight:function(){return t.loadNextInsight()}}),C&&n.createElement(x.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),index:a,showAlarmPoints:N,loadNextInsight:function(){return t.loadNextInsight()}}),R&&n.createElement(c.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,graphsList:A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Totalized Energy","Frequency and Voltage","Current and Power","State and Power Factor"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),showAlarmPoints:N,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),G&&n.createElement(V.a,{InsightName:Object(i.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:S,instance:_,from:s,to:o,liveGraphRange:H,updateAfterMilliSeconds:15e3,graphsList:A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?A[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Power","Phase Voltage","Voltage","Frequency","Energy Sum Resettable","Positive Energy Sum Non-resettable"],space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:Object(i.g)(e.equipmentsRdfsLabel),showAlarmPoints:N,index:a,loadNextInsight:function(){return t.loadNextInsight()}}))}),0==(null===w||void 0===w?void 0:w.length)&&n.createElement("div",{className:"full-screen"},n.createElement("h1",{className:"no-graph-heading"}," No Graphs "))):n.createElement("div",{className:"full-screen"},n.createElement("h1",{className:"no-graph-heading"}," No Template Created ")))},t}(n.Component);t.default=H},2508:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(12),o=a(668),r=a(675),u=a(771),m=a(20),c=a(683),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],graphDataAlarmPoint:{},selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm:!1},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.C)(this.props.equipment.split(","))];case 1:return(null===(e=a.sent())||void 0===e?void 0:e.length)>0&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,r,u,g,f,v,x=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint,l=this.props,s=l.buildingName,o=l.InsightName,r=l.showAlarmPoints,Object(h.a)(!0),r&&!e?[3,3]:(u=[],g=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(i.g)(a.point)&&Object(i.g)(a.pointLabel)&&Object(m.M)(Object(i.g)(a.point),Object(i.g)(a.pointLabel))}u=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),u.filter(function(e){return Object(i.g)(e.monconDevice)==x.props.InsightName}).forEach(function(e){g.push({sensedValue:Object(i.g)(e.sensedValue),maximumExtremeValue:Object(i.g)(e.maximumExtremeValue),maximumNormalValue:Object(i.g)(e.maximumNormalValue),minimumExtremeValue:Object(i.g)(e.minimumExtremeValue),minimumNormalValue:Object(i.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,s,!1,0,50,null,null,o,null)];case 2:return f=V.sent(),v=new Date(a.columns[0][1]),f=f.filter(function(e){return new Date(e.timeofalarm)>v}),this.setState({alarmSensedPoints:g,deviceAlarms:f},function(){if((null===g||void 0===g?void 0:g.length)>0&&a.columns.length>1){var e=n.sensedValue.length>1?n.sensedValue:g[g.length-1].sensedValue;x.selectAlarmPoint(e)}}),[3,4];case 3:this.selectAlarmPoint(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{},axes:{}};if(i){if("cooltemp"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"grey",Low:"grey","Cool setpoint":"red",High:"grey","High-High":"grey"}}}else if("heattemp"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},colors:{"Low-Low":"red",Low:"grey","Heat setpoint":"#e3e3e3",High:"grey","High-High":"red"}}}else if("spacetemp"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Space Temp":"#e3e3e3",High:"grey","High-High":"red"},axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"}}}else if("fan"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan 0: Auto 1: On":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Fan 0: Auto 1: On":"#e3e3e3",High:"grey","High-High":"red"}}}else if("fanstate"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan State 1: On":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Fan State 1: On":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mode"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Mode 0: Heat 1: Cool 2: Auto":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Mode 0: Heat 1: Cool 2: Auto":"#e3e3e3",High:"grey","High-High":"red"}}}else if("state"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{state:"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey",state:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint:i,graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})})},t.prototype.callLiveUpdate=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,u,m,c=this;return V(this,function(d){return t=this.state,a=t.graphData,n=t.axis1,l=t.grid,s=t.alarmSensedPoints,i=t.selectedAlarmPoint,o=this.props.showAlarmPoints,r=new Date(e.timestamp),u=this.props.liveGraphRange,a.columns.length>1&&(a.columns[0].push(r),a.columns[1].push(null===e||void 0===e?void 0:e.cooltemp),a.columns[2].push(null===e||void 0===e?void 0:e.heattemp),a.columns[3].push(null===e||void 0===e?void 0:e.spacetemp),a.columns[4].push(null===e||void 0===e?void 0:e.fan),a.columns[5].push(null===e||void 0===e?void 0:e.fanstate),a.columns[6].push(null===e||void 0===e?void 0:e.mode),a.columns[7].push(null===e||void 0===e?void 0:e.state),(r.getTime()-a.columns[0][2].getTime())/6e4>u&&a.columns[0].splice(1,1),n.x.tick.values[0]<a.columns[0][1]&&(n.x.tick.values.splice(0,1),l.x.lines.splice(0,1)),n.x.tick.values[2]&&n.x.tick.values[1].getTime()&&n.x.tick.values[2].getTime()-n.x.tick.values[1].getTime()<r.getTime()-n.x.tick.values[n.x.tick.values.length-1]&&(r.setSeconds(0),u>10&&r.setMinutes(r.getMinutes()-r.getMinutes()%5),n.x.tick.values.push(r),l.x.lines.push({value:r,class:"grid4"})),m=null===r||void 0===r?void 0:r.toLocaleString(),o?this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:m},function(){var e=i.sensedValue.length>1?i.sensedValue:s[s.length-1].sensedValue;c.selectAlarmPoint(e)}):this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:m})),[2]})})},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,i,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.from,n=t.to,l=t.InsightName,s=t.buildingName,i=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.graphData,p=m.lastUpdatedAt,l?(f=Object(),[4,Object(o.x)(l,s)]):[3,3];case 1:return f=V.sent(),this.setState({Moncon:f}),[4,Object(r.J)(f.topic,a,n,h.columns.length>1)];case 2:return v=V.sent(),w=["Heat setpoint"],y=["Space Temp"],L=["Fan 0: Auto 1: On"],E=["Fan State 1: On"],b=["Mode 0: Heat 1: Cool 2: Auto"],H=["state"],A=["x"],(x=["Cool setpoint"]).push(null),w.push(null),y.push(null),L.push(null),E.push(null),b.push(null),H.push(null),A.push(new Date(a)),v.length>0&&(null===v||void 0===v||v.forEach(function(e){(null===e||void 0===e?void 0:e.cooltemp)&&(x.push(e.cooltemp),w.push(e.heattemp),y.push(e.spacetemp),L.push(e.fan),E.push(e.fanstate),b.push(e.mode),H.push(e.state),A.push(new Date(e.timestamp)))})),p=v.length>0?null===(e=A[A.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",(h.columns.length>1||0===v.length)&&(x.push(null),w.push(null),y.push(null),L.push(null),E.push(null),b.push(null),H.push(null),A.push(new Date(n))),d.y.label="\xb0C",N=Object(u.a)(5,a,n),D="",N.length>1?(P=((new Date).getTime()-N[0].getTime())/1e3,D=(P/=3600)>24?"%m-%d %H:%M":P<.3?"%H:%M:%S":"%H:%M"):D="%H:%M:%S",c.x.lines=[],N.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),h={x:"x",columns:[A,x,w,y,L,E,b,H],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},colors:{"Cool setpoint":"yellow","Heat setpoint":"green","Space Temp":"blue","Fan 0: Auto 1: On":"pink","Fan State 1: On":"yellow","Mode 0: Heat 1: Cool 2: Auto":"magenta",state:"#06cfa4"},types:{"Cool setpoint":"line","Heat setpoint":"line","Space Temp":"line","Fan 0: Auto 1: On":"step","Fan State 1: On":"step","Mode 0: Heat 1: Cool 2: Auto":"step",state:"step"}},d={x:{type:"timeseries",tick:{fit:!1,count:5,values:N,format:D}},y:{label:{text:"Temperature \xb0F",position:"outer-middle"},tick:{fit:!0,values:[0,20,40,60,80,100],count:6,format:function(e){return parseFloat(e).toFixed(1)}},max:100,min:0},y2:{show:!0,label:{text:"State, Mode, Fan, Fan State",position:"outer-middle"},tick:{fit:!0,values:[0,1,2,3],count:6,format:function(e){return parseFloat(e).toFixed(0)}},max:3,min:0}},this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,graphData:h,loading:!1,lastUpdatedAt:p},function(){i&&S.changeAlarmStatus(!0)}),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){i&&S.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t=this,a=this.state,l=a.Moncon,i=a.loading,o=a.graphData,r=a.axis1,u=a.grid,m=a.equipmentsLabels,c=a.lastUpdatedAt,d=a.alarmSensedPoints,h=a.selectedAlarmPoint,p=a.graphDataAlarmPoint,g=a.indicateAlarm,f=this.props,v=f.instance,x=f.buildingName,V=f.space,w=f.floor,y=f.zone,L=f.showAlarmPoints,E=f.InsightName;return n.createElement("div",{className:"row col-md-12 device-graphs "+(g&&L?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),L&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",d&&d.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:h.sensedValue,onChange:function(e){t.selectAlarmPoint(e.target.value)}},d.map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),g&&n.createElement("a",{href:"#"+v+"/"+x+"/Alarms/OperationalAlarms/Device/"+E,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard graphHeading"},n.createElement("a",{href:"#"+v+"/"+x+"/Insights/Equipment/Graphs/InsightControl/"+(null===l||void 0===l?void 0:l.deviceName),target:"_blank",rel:"noreferrer noopener"},m.length>0&&m[0].rdfsLabel," ",V),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",V," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",w," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",y," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",m.map(function(e,t){return e.rdfsLabel+(t<m.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===l||void 0===l?void 0:l.rdfsLabel," ")),n.createElement("span",{className:"lastUpdated"},"Last: ",c)),i?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:L&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:o,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}}))},t}(n.Component);t.a=y},2509:function(e,t,a){"use strict";var n=a(2),l=a.n(n),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};var i=function(){return(i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};var o={Pixel:"Pixel",Percent:"Percent"},r={unit:o.Percent,value:.8};function u(e){return"number"===typeof e?{unit:o.Percent,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:o.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:o.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),r):(console.warn("scrollThreshold should be string or number"),r)}var m=function(e){function t(t){var a=e.call(this,t)||this;return a.lastScrollTop=0,a.actionTriggered=!1,a.startY=0,a.currentY=0,a.dragging=!1,a.maxPullDownDistance=0,a.getScrollableTarget=function(){return a.props.scrollableTarget instanceof HTMLElement?a.props.scrollableTarget:"string"===typeof a.props.scrollableTarget?document.getElementById(a.props.scrollableTarget):(null===a.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},a.onStart=function(e){a.lastScrollTop||(a.dragging=!0,e instanceof MouseEvent?a.startY=e.pageY:e instanceof TouchEvent&&(a.startY=e.touches[0].pageY),a.currentY=a.startY,a._infScroll&&(a._infScroll.style.willChange="transform",a._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},a.onMove=function(e){a.dragging&&(e instanceof MouseEvent?a.currentY=e.pageY:e instanceof TouchEvent&&(a.currentY=e.touches[0].pageY),a.currentY<a.startY||(a.currentY-a.startY>=Number(a.props.pullDownToRefreshThreshold)&&a.setState({pullToRefreshThresholdBreached:!0}),a.currentY-a.startY>1.5*a.maxPullDownDistance||a._infScroll&&(a._infScroll.style.overflow="visible",a._infScroll.style.transform="translate3d(0px, "+(a.currentY-a.startY)+"px, 0px)")))},a.onEnd=function(){a.startY=0,a.currentY=0,a.dragging=!1,a.state.pullToRefreshThresholdBreached&&(a.props.refreshFunction&&a.props.refreshFunction(),a.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){a._infScroll&&(a._infScroll.style.overflow="auto",a._infScroll.style.transform="none",a._infScroll.style.willChange="unset")})},a.onScrollListener=function(e){"function"===typeof a.props.onScroll&&setTimeout(function(){return a.props.onScroll&&a.props.onScroll(e)},0);var t=a.props.height||a._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;a.actionTriggered||((a.props.inverse?a.isElementAtTop(t,a.props.scrollThreshold):a.isElementAtBottom(t,a.props.scrollThreshold))&&a.props.hasMore&&(a.actionTriggered=!0,a.setState({showLoader:!0}),a.props.next&&a.props.next()),a.lastScrollTop=t.scrollTop)},a.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},a.throttledOnScrollListener=function(e,t,a,n){var l,s=!1,i=0;function o(){l&&clearTimeout(l)}function r(){var r=this,u=Date.now()-i,m=arguments;function c(){i=Date.now(),a.apply(r,m)}s||(n&&!l&&c(),o(),void 0===n&&u>e?c():!0!==t&&(l=setTimeout(n?function(){l=void 0}:c,void 0===n?e-u:e)))}return"boolean"!==typeof t&&(n=a,a=t,t=void 0),r.cancel=function(){o(),s=!0},r}(150,a.onScrollListener).bind(a),a.onStart=a.onStart.bind(a),a.onMove=a.onMove.bind(a),a.onEnd=a.onEnd.bind(a),a}return function(e,t){function a(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?i(i({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var a=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=u(t);return n.unit===o.Pixel?e.scrollTop<=n.value+a-e.scrollHeight+1:e.scrollTop<=n.value/100+a-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var a=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=u(t);return n.unit===o.Pixel?e.scrollTop+a>=e.scrollHeight-n.value:e.scrollTop+a>=n.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),a=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),n=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return l.a.createElement("div",{style:n,className:"infinite-scroll-component__outerdiv"},l.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&l.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},l.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!a&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(n.Component);t.a=m},2510:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(12),o=a(668),r=a(675),u=a(771),m=a(20),c=a(683),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,r,u,g,f,v,x,y,L,E=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,o=t.selectedAlarmPoint4,r=this.props,u=r.buildingName,g=r.InsightName,f=r.showAlarmPoints,Object(h.a)(!0),f&&!e?[3,3]:(v=[],x=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(i.g)(a.point)&&Object(i.g)(a.pointLabel)&&Object(m.M)(Object(i.g)(a.point),Object(i.g)(a.pointLabel))}v=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),v.filter(function(e){return Object(i.g)(e.monconDevice)==E.props.InsightName}).forEach(function(e){x.push({sensedValue:Object(i.g)(e.sensedValue),maximumExtremeValue:Object(i.g)(e.maximumExtremeValue),maximumNormalValue:Object(i.g)(e.maximumNormalValue),minimumExtremeValue:Object(i.g)(e.minimumExtremeValue),minimumNormalValue:Object(i.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,u,!1,0,50,null,null,g,null)];case 2:return y=V.sent(),L=new Date(a.columns[0][1]),y=y.filter(function(e){return new Date(e.timeofalarm)>L}),this.setState({alarmSensedPoints:x,deviceAlarms:y},function(){if((null===x||void 0===x?void 0:x.length)>0&&a.columns.length>1){var e=x.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";E.selectAlarmPoint1(t);var i=x.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}),r=l.sensedValue.length>1?l.sensedValue:(null===i||void 0===i?void 0:i.length)>0?i[i.length-1].sensedValue:"";E.selectAlarmPoint2(r);var u=x.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}),m=s.sensedValue.length>1?s.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";E.selectAlarmPoint3(m);var c=x.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}),d=o.sensedValue.length>1?o.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";E.selectAlarmPoint4(d)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,o=this;return V(this,function(r){return t=this.state,a=t.graphData,n=t.alarmSensedPoints,l=t.deviceAlarms,s=n.find(function(t){return t.sensedValue===e}),i=l.length>0&&l.findIndex(function(e){return"import_active_energy_Wh"==e.sensedValueKey})>-1,this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(s){if("import_active_energy_Wh"==s.sensedValue){for(var t=["Low-Low"],n=["Low"],l=["High"],r=["High-High"],u=0;u<a.columns[1].length-1;u++)t.push(+s.minimumExtremeValue/1e3),n.push(+s.minimumNormalValue/1e3),l.push(+s.maximumNormalValue/1e3),r.push(+s.maximumExtremeValue/1e3);e={x:"x",columns:[a.columns[0],t,n,a.columns[1],l,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Killo Watt Hour":"#e3e3e3",High:"grey","High-High":"red"}}}else e=a;o.setState({selectedAlarmPoint1:s,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=a,o.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})}),[2]})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"frequency_Hz"==e.sensedValueKey||"voltage_volts"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("frequency_Hz"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Freq:"#e3e3e3",High:"grey","High-High":"red"}}}else if("voltage_volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Volts:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"active_power_Watts"==e.sensedValueKey||"current_Amperes"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("active_power_Watts"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Watts:"#e3e3e3",High:"grey","High-High":"red"}}}else if("current_Amperes"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Amps:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"relay_state"==e.sensedValueKey||"power_factor"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("relay_state"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",State:"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_factor"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Factor":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.graphData,l=a.graphData2,s=a.graphData3,i=a.graphData4,o=a.axis1,r=a.grid,u=a.alarmSensedPoints,m=a.selectedAlarmPoint1,c=a.selectedAlarmPoint2,d=a.selectedAlarmPoint3,h=a.selectedAlarmPoint4,p=this.props.showAlarmPoints,g=new Date(e.timestamp),f=this.props.liveGraphRange;if(n.columns.length>1){n.columns[0].splice(1,1),n.columns[0].push(g),n.columns[1].splice(1,1),n.columns[1].push(+(null===e||void 0===e?void 0:e.import_active_energy_Wh)/1e3),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.frequency_Hz),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.voltage_volts),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.active_power_Watts),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.current_Amperes),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.i1relay_state),i.columns[2].splice(1,1),i.columns[2].push(null===e||void 0===e?void 0:e.power_factor),o.x.tick.values[0]<n.columns[0][1]&&(o.x.tick.values.splice(0,1),r.x.lines.splice(0,1)),(g.getTime()-n.columns[0][2].getTime())/6e4>f&&n.columns[0].splice(1,1),o.x.tick.values[0]<n.columns[0][1]&&(o.x.tick.values.splice(0,1),r.x.lines.splice(0,1)),o.x.tick.values[2]&&o.x.tick.values[1].getTime()&&o.x.tick.values[2].getTime()-o.x.tick.values[1].getTime()<g.getTime()-o.x.tick.values[o.x.tick.values.length-1]&&(g.setSeconds(0),f>10&&g.setMinutes(g.getMinutes()-g.getMinutes()%5),o.x.tick.values.push(g),r.x.lines.push({value:g,class:"grid4"}));var v=null===g||void 0===g?void 0:g.toLocaleString();p?this.setState({grid:r,axis1:o,graphData:n,graphData2:l,graphData3:s,graphData4:i,lastUpdatedAt:v},function(){var e=u.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}),a=m.sensedValue.length>1?m.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint1(a);var n=u.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}),l=c.sensedValue.length>1?c.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";t.selectAlarmPoint2(l);var s=u.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}),i=d.sensedValue.length>1?d.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";t.selectAlarmPoint3(i);var o=u.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}),r=h.sensedValue.length>1?h.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";t.selectAlarmPoint4(r)}):this.setState({grid:r,axis1:o,graphData:n,graphData2:l,graphData3:s,graphData4:i,lastUpdatedAt:v})}},t.prototype.liveGraph=function(){var e,t,a,n,l,s,i,o,u;return x(this,void 0,void 0,function(){var m,c,d,h,p,g,f,v,x,w,y,L,E,b;return V(this,function(V){switch(V.label){case 0:return m=this.state,c=m.Moncon,d=m.graphData,h=m.graphData2,p=m.graphData3,g=m.graphData4,f=m.axis1,v=m.grid,x=m.lastUpdatedAt,w=this.props.liveGraphRange,y=new Date,(L=new Date).setMinutes(L.getMinutes()-w),[4,Object(r.g)(c.topic,L,y,!0)];case 1:return E=V.sent(),(b=new Date(null===(e=E[0])||void 0===e?void 0:e.timestamp))>d.columns[0][d.columns[0].length-1]&&(null===(t=E[0])||void 0===t?void 0:t.timestamp)&&(d.columns[0].splice(1,1),d.columns[0].push(b),d.columns[1].splice(1,1),d.columns[1].push(+(null===(a=E[0])||void 0===a?void 0:a.import_active_energy_Wh)/1e3),h.columns[1].splice(1,1),h.columns[1].push(null===(n=E[0])||void 0===n?void 0:n.frequency_Hz),h.columns[2].splice(1,1),h.columns[2].push(null===(l=E[0])||void 0===l?void 0:l.voltage_volts),p.columns[1].splice(1,1),p.columns[1].push(null===(s=E[0])||void 0===s?void 0:s.active_power_Watts),p.columns[2].splice(1,1),p.columns[2].push(null===(i=E[0])||void 0===i?void 0:i.current_Amperes),g.columns[1].splice(1,1),g.columns[1].push(null===(o=E[0])||void 0===o?void 0:o.i1relay_state),g.columns[2].splice(1,1),g.columns[2].push(null===(u=E[0])||void 0===u?void 0:u.power_factor),f.x.tick.values[0]<d.columns[0][1]&&(f.x.tick.values.splice(0,1),v.x.lines.splice(0,1)),(b.getTime()-d.columns[0][2].getTime())/6e4>w&&d.columns[0].splice(1,1),f.x.tick.values[0]<d.columns[0][1]&&(f.x.tick.values.splice(0,1),v.x.lines.splice(0,1)),f.x.tick.values[2]&&f.x.tick.values[1].getTime()&&f.x.tick.values[2].getTime()-f.x.tick.values[1].getTime()<b.getTime()-f.x.tick.values[f.x.tick.values.length-1]&&(b.setSeconds(0),w>10&&b.setMinutes(b.getMinutes()-b.getMinutes()%5),f.x.tick.values.push(b),v.x.lines.push({value:b,class:"grid4"})),x=null===b||void 0===b?void 0:b.toLocaleString(),this.setState({grid:v,axis1:f,graphData:d,graphData2:h,graphData3:p,graphData4:g,lastUpdatedAt:x})),[2]}})})},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,i,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,i=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.axis4,v=m.graphData,x=m.graphData2,w=m.graphData3,y=m.graphData4,L=m.lastUpdatedAt,a?(E=Object(),[4,Object(o.x)(a,n)]):[3,3];case 1:return E=V.sent(),this.setState({Moncon:E}),[4,Object(r.g)(E.topic,l,s,v.columns.length>1)];case 2:return b=V.sent(),A=["Watts"],N=["Amps"],D=["Freq"],P=["Killo Watt Hour"],S=["Power Factor"],_=["Volts"],k=["x"],(H=["State"]).push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(new Date(l)),b.length>0&&b.forEach(function(e){e&&(H.push(e.i1relay_state),A.push(e.active_power_Watts),N.push(e.current_Amperes),D.push(e.frequency_Hz),P.push(+e.import_active_energy_Wh/1e3),S.push(e.power_factor),_.push(e.voltage_volts),k.push(new Date(e.timestamp)))}),L=b.length>0?null===(e=k[k.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(new Date(s)),v={x:"x",columns:[k,P]},x={x:"x",columns:[k,D,_]},w={x:"x",columns:[k,A,N]},y={x:"x",columns:[k,H,S]},d.y.label="kWh",h.y.label="Hz/Volts",p.y.label="Watts/Amps",f.y.label="",O=Object(u.a)(5,l,s),F="",O.length>1?(j=((new Date).getTime()-O[0].getTime())/1e3,F=(j/=3600)>24?"%m-%d %H:%M":j<.3?"%H:%M:%S":"%H:%M"):F="%H:%M:%S",c.x.lines=[],O.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},f.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,10,20,30,40,50],h.y.tick.values=[0,50,100,150,200],p.y.tick.values=[0,20,40,60,80,100],f.y.tick.values=[-1,0,1,2],d.y.max=50,d.y.min=0,h.y.max=200,h.y.min=0,p.y.max=100,p.y.min=0,f.y.max=2,f.y.min=-1,d.x.tick.format=F,h.x.tick.format=F,p.x.tick.format=F,f.x.tick.format=F,d.x.tick.values=O,h.x.tick.values=O,p.x.tick.values=O,f.x.tick.values=O,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,axis4:f,graphData:v,graphData2:x,graphData3:w,graphData4:y,loading:!1,lastUpdatedAt:L},function(){i&&C.changeAlarmStatus(!0)}),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){i&&C.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a,l,i=this,o=this.state,r=o.Moncon,u=o.loading,m=o.graphData,c=o.graphData2,d=o.graphData3,h=o.graphData4,p=o.graphDataAlarmPoint1,g=o.graphDataAlarmPoint2,f=o.graphDataAlarmPoint3,v=o.graphDataAlarmPoint4,x=o.axis1,V=o.axis2,w=o.axis3,y=o.axis4,L=o.grid,E=o.lastUpdatedAt,b=o.equipmentsLabels,H=o.indicateAlarm1,A=o.indicateAlarm2,N=o.indicateAlarm3,D=o.indicateAlarm4,P=o.alarmSensedPoints,S=o.selectedAlarmPoint1,_=o.selectedAlarmPoint2,k=o.selectedAlarmPoint3,O=o.selectedAlarmPoint4,F=this.props,j=F.graphsList,C=F.instance,R=F.buildingName,G=F.space,T=F.floor,M=F.zone,I=F.showAlarmPoints,U=F.InsightName;return n.createElement(n.Fragment,null,j.indexOf("Totalized Energy")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",P&&P.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(e){i.selectAlarmPoint1(e.target.value)}},P.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},b.length>0&&b[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Totalized Energy"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===b||void 0===b?void 0:b.map(function(e,t){return e.rdfsLabel+(t<b.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:m,size:{height:300},axis:x,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),j.indexOf("Frequency and Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",P&&P.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:_.sensedValue,onChange:function(e){i.selectAlarmPoint2(e.target.value)}},P.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),A&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},b.length>0&&b[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Frequency and Voltage"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===b||void 0===b?void 0:b.map(function(e,t){return e.rdfsLabel+(t<b.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(t=g.columns)||void 0===t?void 0:t.length)>1?g:c,size:{height:300},axis:V,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Current and Power")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(N&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",n.createElement("select",{className:"alarm-points-list",id:"spaces",value:k.sensedValue,onChange:function(e){i.selectAlarmPoint3(e.target.value)}},P.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})),N&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},b.length>0&&b[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Current and Power"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===b||void 0===b?void 0:b.map(function(e,t){return e.rdfsLabel+(t<b.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(a=f.columns)||void 0===a?void 0:a.length)>1?f:d,size:{height:300},axis:w,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("State and Power Factor")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(D&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",P&&P.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:O.sensedValue,onChange:function(e){i.selectAlarmPoint4(e.target.value)}},P.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),D&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},b.length>0&&b[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","State and Power Factor"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===b||void 0===b?void 0:b.map(function(e,t){return e.rdfsLabel+(t<b.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(l=v.columns)||void 0===l?void 0:l.length)>1?v:h,size:{height:300},axis:y,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2511:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(675),r=a(910),u=a(771),m=a(20),c=a(12),d=a(683),h=a(744),p=a(695),g=a(117),f=a(120),v=a(713),x=(a.n(v),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),V=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},w=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},y=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},L=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return x(t,e),t.prototype.componentDidMount=function(){return V(this,void 0,void 0,function(){var e,t=this;return w(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return V(this,void 0,void 0,function(){var e,t=this;return w(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(f.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return V(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,u,f,v,x,V,L,E,b,H=this;return w(this,function(w){switch(w.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,o=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,u=this.props,f=u.buildingName,v=u.InsightName,x=u.showAlarmPoints,Object(g.a)(!0),x&&!e?[3,3]:(V=[],L=[],[4,Object(d.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(c.g)(a.point)&&Object(c.g)(a.pointLabel)&&Object(m.M)(Object(c.g)(a.point),Object(c.g)(a.pointLabel))}V=y(e)}).catch(function(e){return e})]);case 1:return w.sent(),V.filter(function(e){return Object(c.g)(e.monconDevice)==H.props.InsightName}).forEach(function(e){L.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),[4,Object(h.d)(p.a.OperationalAlarm,f,!1,0,50,null,null,v,null)];case 2:return E=w.sent(),a.columns.length>1&&(b=new Date(a.columns[0][1]),E=E.filter(function(e){return new Date(e.timeofalarm)>b})),this.setState({alarmSensedPoints:L,deviceAlarms:E},function(){if((null===L||void 0===L?void 0:L.length)>0&&a.columns.length>1){var e=L.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";H.selectAlarmPoint1(t);var u=L.filter(function(e){return"pressure_hPa"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";H.selectAlarmPoint2(m);var c=L.filter(function(e){return"illuminance_lux"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";H.selectAlarmPoint3(d);var h=L.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),p=i.sensedValue.length>1?i.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";H.selectAlarmPoint4(p);var g=L.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),f=o.sensedValue.length>1?o.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";H.selectAlarmPoint5(f);var v=L.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";H.selectAlarmPoint6(x)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),w.label=4;case 4:return Object(g.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"relhumidity_pct"==e.sensedValueKey||"temp_celsius"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("temp_celsius"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[0].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Temp:"#e3e3e3",High:"grey","High-High":"red"}}}else if("relhumidity_pct"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[0].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Humidity:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"pressure_hPa"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("pressure_hPa"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Pressure:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"illuminance_lux"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("illuminance_lux"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Illuminance:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"gasResistance_kOhm"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("gasResistance_kOhm"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gas Res":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"equiCO2_ppm"==e.sensedValueKey||"tvoc_ppm"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("equiCO2_ppm"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",CO2:"#e3e3e3",High:"grey","High-High":"red"}}}else if("tvoc_ppm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",TVOC:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:i,graphDataAlarmPoint5:e,indicateAlarm5:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:o,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"motion_sensed"==e.sensedValueKey||"num_BTdev"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("motion_sensed"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Motion:"#e3e3e3",High:"grey","High-High":"red"}}}else if("tvoc_ppm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Blth Dev.":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:i,graphDataAlarmPoint6:e,indicateAlarm6:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:o,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.fetChAlarmPoints=function(){return V(this,void 0,void 0,function(){var e,t,a=this;return w(this,function(n){switch(n.label){case 0:return e=[],t=this.state.alarmSensedPoints,[4,Object(d.k)(this.props.buildingName).then(function(t){if(t&&t.length>0)for(var a=0;a<t.length;a++){var n=t[a];Object(c.g)(n.point)&&Object(c.g)(n.pointLabel)&&Object(m.M)(Object(c.g)(n.point),Object(c.g)(n.pointLabel))}e=y(t)}).catch(function(e){return e})];case 1:return n.sent(),e.filter(function(e){return e.sensedValue&&Object(c.g)(e.monconDevice)==a.props.InsightName}).forEach(function(e){t.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),this.setState({alarmSensedPoints:t},function(){return a.changeAlarmStatus()}),[2]}})})},t.prototype._fetchData=function(){var e;return V(this,void 0,void 0,function(){var t,a,n,l,s,m,c,d,h,p,g,v,x,V,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K=this;return w(this,function(w){switch(w.label){case 0:return t=this.props,a=t.from,n=t.to,l=t.InsightName,s=t.buildingName,m=t.showAlarmPoints,c=this.state,d=c.grid,h=c.axis1,p=c.axis2,g=c.axis3,v=c.axis4,x=c.axis5,V=c.axis6,y=c.graphData,L=c.graphData2,E=c.graphData3,b=c.graphData4,H=c.graphData5,A=c.graphData6,N=c.lastUpdatedAt,l?(D=Object(),[4,Object(i.x)(l,s)]):[3,3];case 1:return D=w.sent(),this.setState({Moncon:D}),[4,Object(o.d)(D.topic,a,n,y.columns.length>1)];case 2:return P=w.sent(),_=["Humidity"],k=["Alt."],O=["CO2"],F=["TVOC"],j=["Gas Res"],C=["Illuminance"],R=["Motion"],G=["Blth Dev."],T=["Pressure"],M=["x"],(S=["Temp"]).push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(new Date(a)),P.length>0&&P.forEach(function(e){e&&(S.push(Object(r.a)(e.temp_celsius,D&&D.firmwareVersion?D.firmwareVersion:"",D.csbCallibration)),_.push(e.relhumidity_pct),k.push(e.altitude_m),O.push(e.equiCO2_ppm),F.push(e.tvoc_ppm),T.push(e.pressure_hPa),j.push(e.gasResistance_kOhm),C.push(e.illuminance_lux),R.push(e.motion_sensed),G.push(e.num_BTdev),M.push(new Date(e.timestamp)))}),N=P.length>0?null===(e=M[M.length-1])||void 0===e?void 0:e.toLocaleString():"No data",0===P.length&&(S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(new Date(n))),h.y.label="\xb0F / %",p.y.label="hPa",g.y.label="Lux",v.y.label="kOhm",x.y.label="PPM",V.y.label="",M.length>1&&(I=Object(u.a)(5,a,n),U="",I.length>1?(q=((new Date).getTime()-I[0].getTime())/1e3,U=(q/=3600)>24?"%m-%d %H:%M":q<.3?"%H:%M:%S":"%H:%M"):U="%H:%M:%S",d.x.lines=[],I.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(0)},g.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},V.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.values=[0,20,40,60,80,100],p.y.tick.values=[0,400,800,1200],g.y.tick.values=[0,40,80,120,160,200,240],v.y.tick.values=[0,600,1200,1800,2400,3e3],x.y.tick.values=[0,4e3,8e3,12e3,16e3],V.y.tick.values=[0,10,20,30,40,50],h.y.max=100,h.y.min=0,p.y.max=1100,p.y.min=0,g.y.max=200,g.y.min=0,v.y.max=3e3,v.y.min=0,x.y.max=16e3,x.y.min=0,V.y.max=50,V.y.min=0,h.x.tick.format=U,p.x.tick.format=U,g.x.tick.format=U,v.x.tick.format=U,x.x.tick.format=U,V.x.tick.format=U,h.x.tick.values=I,p.x.tick.values=I,g.x.tick.values=I,v.x.tick.values=I,x.x.tick.values=I,V.x.tick.values=I,y={x:"x",columns:[M,S,_]},L={x:"x",columns:[M,T]},E={x:"x",columns:[M,C]},b={x:"x",columns:[M,j]},H={x:"x",columns:[M,O,F]},A={x:"x",columns:[M,R,G]},this.props.loadNextInsight(),Object(f.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:d,axis1:h,axis2:p,axis3:g,axis4:v,axis5:x,axis6:V,graphData:y,graphData2:L,graphData3:E,graphData4:b,graphData5:H,graphData6:A,lastUpdatedAt:N,loading:!1},function(){m&&K.changeAlarmStatus(!0)})),[3,4];case 3:Object(f.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){m&&K.changeAlarmStatus(!0)}),w.label=4;case 4:return[2]}})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.Moncon,l=a.graphData,s=a.graphData2,i=a.graphData3,o=a.graphData4,u=a.graphData5,m=a.graphData6,c=a.axis1,d=a.grid,h=a.alarmSensedPoints,p=a.selectedAlarmPoint1,g=a.selectedAlarmPoint2,f=a.selectedAlarmPoint3,v=a.selectedAlarmPoint4,x=a.selectedAlarmPoint5,V=a.selectedAlarmPoint6,w=this.props.showAlarmPoints,y=new Date(e.timestamp),L=this.props.liveGraphRange;if(l.columns.length>1){l.columns[0].push(y),l.columns[1].push(Object(r.a)(null===e||void 0===e?void 0:e.temp_celsius,n&&n.firmwareVersion?n.firmwareVersion:"",n.csbCallibration)),l.columns[2].push(null===e||void 0===e?void 0:e.relhumidity_pct),s.columns[1].push(null===e||void 0===e?void 0:e.pressure_hPa),i.columns[1].push(null===e||void 0===e?void 0:e.illuminance_lux),o.columns[1].push(null===e||void 0===e?void 0:e.gasResistance_kOhm),u.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.equiCO2_ppm)),u.columns[2].push(parseFloat(null===e||void 0===e?void 0:e.tvoc_ppm)),m.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.motion_sensed)),m.columns[2].push(parseFloat(null===e||void 0===e?void 0:e.num_BTdev)),(y.getTime()-l.columns[0][2].getTime())/6e4>L&&l.columns[0].splice(1,1),c.x.tick.values[0]<l.columns[0][1]&&(c.x.tick.values.splice(0,1),d.x.lines.splice(0,1)),c.x.tick.values[2]&&c.x.tick.values[1].getTime()&&c.x.tick.values[2].getTime()-c.x.tick.values[1].getTime()<y.getTime()-c.x.tick.values[c.x.tick.values.length-1]&&(y.setSeconds(0),L>10&&y.setMinutes(y.getMinutes()-y.getMinutes()%5),c.x.tick.values.push(y),d.x.lines.push({value:y,class:"grid4"}));var E=null===y||void 0===y?void 0:y.toLocaleString();w?this.setState({grid:d,axis1:c,graphData:l,graphData2:s,graphData3:i,graphData4:o,graphData5:u,graphData6:m,lastUpdatedAt:E},function(){var e=h.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),a=p.sensedValue.length>1?p.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint1(a);var n=h.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=g.sensedValue.length>1?g.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";t.selectAlarmPoint2(l);var s=h.filter(function(e){return"illuminance_lux"==e.sensedValue}),i=f.sensedValue.length>1?f.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";t.selectAlarmPoint3(i);var o=h.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),r=v.sensedValue.length>1?v.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";t.selectAlarmPoint4(r);var u=h.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),m=x.sensedValue.length>1?x.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";t.selectAlarmPoint5(m);var c=h.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),d=V.sensedValue.length>1?V.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";t.selectAlarmPoint6(d)}):this.setState({grid:d,axis1:c,graphData:l,graphData2:s,graphData3:i,graphData4:o,graphData5:u,graphData6:m,lastUpdatedAt:E})}},t.prototype.render=function(){var e,t,a,l,i,o,r=this,u=this.state,m=u.Moncon,c=u.loading,d=u.graphData,h=u.graphData2,p=u.graphData3,g=u.graphData4,f=u.graphData5,v=u.graphData6,x=u.axis1,V=u.axis2,w=u.axis3,y=u.axis4,L=u.axis5,E=u.axis6,b=u.grid,H=u.lastUpdatedAt,A=u.equipmentsLabels,N=u.graphDataAlarmPoint1,D=u.graphDataAlarmPoint2,P=u.graphDataAlarmPoint3,S=u.graphDataAlarmPoint4,_=u.graphDataAlarmPoint5,k=u.graphDataAlarmPoint6,O=u.indicateAlarm1,F=u.indicateAlarm2,j=u.indicateAlarm3,C=u.indicateAlarm4,R=u.indicateAlarm5,G=u.indicateAlarm6,T=u.alarmSensedPoints,M=u.selectedAlarmPoint1,I=u.selectedAlarmPoint2,U=u.selectedAlarmPoint3,q=u.selectedAlarmPoint4,K=u.selectedAlarmPoint5,B=u.selectedAlarmPoint6,W=this.props,z=W.instance,Z=W.buildingName,Y=W.graphsList,J=W.space,$=W.floor,Q=W.zone,X=W.showAlarmPoints,ee=W.InsightName;return n.createElement(n.Fragment,null,Y.indexOf("Temp & Humidity")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(O&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:M.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},T.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),O&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Temp & Humidity"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(e=N.columns)||void 0===e?void 0:e.length)>1?N:d,size:{height:300},axis:x,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),Y.indexOf("Pressure")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(F&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:I.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},T.filter(function(e){return"pressure_hPa"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),F&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," "," Pressure"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(t=D.columns)||void 0===t?void 0:t.length)>1?D:h,size:{height:300},axis:V,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Illuminance")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(j&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:U.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},T.filter(function(e){return"illuminance_lux"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),j&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Illuminance"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(a=P.columns)||void 0===a?void 0:a.length)>1?P:p,size:{height:300},axis:w,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Gas Resistance")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(C&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:q.sensedValue,onChange:function(e){r.selectAlarmPoint4(e.target.value)}},T.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),C&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Gas Resistance"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(l=S.columns)||void 0===l?void 0:l.length)>1?S:g,size:{height:300},axis:y,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Air Particles")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(R&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:K.sensedValue,onChange:function(e){r.selectAlarmPoint5(e.target.value)}},T.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),R&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Air Particles"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(i=_.columns)||void 0===i?void 0:i.length)>1?_:f,size:{height:300},axis:L,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Other Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(G&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:B.sensedValue,onChange:function(e){r.selectAlarmPoint6(e.target.value)}},T.filter(function(e){return"num_BTdev"==e.sensedValue||"motion_sensed"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),G&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Other Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(o=k.columns)||void 0===o?void 0:o.length)>1?k:v,size:{height:300},axis:E,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=L},2512:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(675),r=a(771),u=a(20),m=a(120),c=a(713),d=(a.n(c),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),h=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},g=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return d(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(m.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(){},t.prototype.callLiveUpdate=function(e){var t=this.state,a=t.graphData,n=t.axis1,l=t.grid,s=new Date(e.timestamp),i=this.props.liveGraphRange;if(a.columns.length>1){a.columns[0].splice(1,1),a.columns[0].push(s),a.columns[1].splice(1,1),a.columns[1].push(null===e||void 0===e?void 0:e.setpoint),a.columns[2].splice(1,1),a.columns[2].push(null===e||void 0===e?void 0:e.roomtemp),a.columns[3].splice(1,1),a.columns[3].push(null===e||void 0===e?void 0:e.fanspeed),a.columns[4].splice(1,1),a.columns[4].push(null===e||void 0===e?void 0:e.horizontalvans),a.columns[5].splice(1,1),a.columns[5].push(null===e||void 0===e?void 0:e.usermode),a.columns[6].splice(1,1),a.columns[6].push(null===e||void 0===e?void 0:e.verticalvans),a.columns[7].splice(1,1),a.columns[7].push(null===e||void 0===e?void 0:e.wifiSignal),(s.getTime()-a.columns[0][2].getTime())/6e4>i&&a.columns[0].splice(1,1),n.x.tick.values[0]<a.columns[0][1]&&(n.x.tick.values.splice(0,1),l.x.lines.splice(0,1)),n.x.tick.values[2]&&n.x.tick.values[1].getTime()&&n.x.tick.values[2].getTime()-n.x.tick.values[1].getTime()<s.getTime()-n.x.tick.values[n.x.tick.values.length-1]&&(s.setSeconds(0),i>10&&s.setMinutes(s.getMinutes()-s.getMinutes()%5),n.x.tick.values.push(s),l.x.lines.push({value:s,class:"grid4"}));var o=null===s||void 0===s?void 0:s.toLocaleString();this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:o})}},t.prototype._fetchData=function(){var e;return h(this,void 0,void 0,function(){var t,a,n,l,s,u,c,d,h,g,f,v,x,V,w,y,L,E,b,H,A,N,D;return p(this,function(p){switch(p.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=this.state,c=u.grid,d=u.axis1,h=u.graphData,g=u.lastUpdatedAt,a?(f=Object(),[4,Object(i.x)(a,n)]):[3,3];case 1:return f=p.sent(),this.setState({Moncon:f}),[4,Object(o.e)(f.topic,l,s,h.columns.length>1)];case 2:return v=p.sent(),x=["setpoint"],w=["mode"],y=["fanspeed"],L=["horizontalvans"],E=["verticalvans"],b=["wifiSignal"],H=["x"],(V=["roomtemp"]).push(null),x.push(null),y.push(null),L.push(null),w.push(null),E.push(null),b.push(null),H.push(new Date(l)),v.length>0&&v.forEach(function(e){e&&(1!=isNaN(e.roomtemp)&&V.push(e.roomtemp),1!=isNaN(e.setpoint)&&x.push(e.setpoint),e.fanspeed?y.push(e.fanspeed):y.push("undefined"),e.horizontalvans?L.push(e.horizontalvans):L.push("undefined"),e.usermode?w.push(e.usermode):w.push("undefined"),e.verticalvans?E.push(e.verticalvans):E.push("undefined"),e.wifiSignal?b.push(e.wifiSignal):b.push("undefined"),H.push(new Date(e.timestamp)))}),g=v.length>0?null===(e=H[H.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",V.push(null),x.push(null),y.push(null),L.push(null),w.push(null),E.push(null),b.push(null),H.push(new Date(s)),h={x:"x",columns:[H,x,V,y,L,w,E,b]},d.y.label="\xb0F",A=Object(r.a)(5,l,s),N="",A.length>1?(D=((new Date).getTime()-A[0].getTime())/1e3,N=(D/=3600)>24?"%m-%d %H:%M":D<.3?"%H:%M:%S":"%H:%M"):N="%H:%M:%S",c.x.lines=[],A.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,20,40,60,80,100],d.y.max=100,d.y.min=0,d.x.tick.format=N,d.x.tick.values=A,this.props.loadNextInsight(),Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,graphData:h,loading:!1,lastUpdatedAt:g},function(){}),[3,4];case 3:Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){}),p.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,a=e.loading,l=e.graphData,i=e.axis1,o=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,m=this.props,c=m.instance,d=m.buildingName,h=m.space,p=m.floor,g=m.zone;return n.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},n.createElement("br",null),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{onClick:function(){window.location.hash=c+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},u.length>0&&u[0]," ",h),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",h," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",p," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",g," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",u.length>0&&u[0]," ",h," "))," ","Refrigerator 1",n.createElement("span",{className:"lastUpdated"},"Last: ",r)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:l,size:{height:300},axis:i,grid:o,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(n.Component);t.a=g},2513:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(690),r=a(771),u=a(20),m=a(120),c=a(713),d=(a.n(c),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),h=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},g=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return d(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(m.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(){},t.prototype.callLiveUpdate=function(e){var t=this.state,a=t.graphData,n=t.axis1,l=t.grid,s=new Date(e.timestamp),i=this.props.liveGraphRange;if(a.columns.length>1){a.columns[0].splice(1,1),a.columns[0].push(s),a.columns[1].splice(1,1),a.columns[1].push(null===e||void 0===e?void 0:e.Normal_Frequency),a.columns[2].splice(1,1),a.columns[2].push(null===e||void 0===e?void 0:e.Emergency_Frequency),(s.getTime()-a.columns[0][2].getTime())/6e4>i&&a.columns[0].splice(1,1),n.x.tick.values[0]<a.columns[0][1]&&(n.x.tick.values.splice(0,1),l.x.lines.splice(0,1)),n.x.tick.values[2]&&n.x.tick.values[1].getTime()&&n.x.tick.values[2].getTime()-n.x.tick.values[1].getTime()<s.getTime()-n.x.tick.values[n.x.tick.values.length-1]&&(s.setSeconds(0),i>10&&s.setMinutes(s.getMinutes()-s.getMinutes()%5),n.x.tick.values.push(s),l.x.lines.push({value:s,class:"grid4"}));var o=null===s||void 0===s?void 0:s.toLocaleString();this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:o})}},t.prototype._fetchData=function(){var e;return h(this,void 0,void 0,function(){var t,a,n,l,s,u,c,d,h,g,f,v,x,V,w,y,L,E;return p(this,function(p){switch(p.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=this.state,c=u.grid,d=u.axis1,h=u.graphData,g=u.lastUpdatedAt,a?(f=Object(),[4,Object(i.x)(a,n)]):[3,3];case 1:return f=p.sent(),this.setState({Moncon:f}),[4,Object(o.i)(f.topic,l,s,h.columns.length>1)];case 2:return v=p.sent(),V=["Emergency Freq"],w=["x"],(x=["Normal Freq"]).push(null),V.push(null),w.push(new Date(l)),v.length>0&&v.forEach(function(e){e&&(x.push(e.Normal_Frequency),V.push(e.Emergency_Frequency),w.push(new Date(e.timestamp)))}),g=v.length>0?null===(e=w[w.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",x.push(null),V.push(null),w.push(new Date(s)),h={x:"x",xFormat:"%Y-%m-%dT%H:%M:%S.%LZ",columns:[w,x,V]},d.y.label="Hz",y=Object(r.a)(5,l,s),L="",y.length>1?(E=((new Date).getTime()-y[0].getTime())/1e3,L=(E/=3600)>24?"%m-%d %H:%M":E<.3?"%H:%M:%S":"%H:%M"):L="%H:%M:%S",c.x.lines=[],y.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,20,40,60,80],d.y.max=80,d.y.min=0,d.x.tick.format=L,d.x.tick.values=y,this.props.loadNextInsight(),Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,graphData:h,loading:!1,lastUpdatedAt:g},function(){}),[3,4];case 3:this.props.loadNextInsight(),Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){}),p.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,a=e.loading,l=e.graphData,i=e.axis1,o=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,m=this.props,c=m.instance,d=m.buildingName,h=m.space,p=m.floor,g=m.zone;return n.createElement(n.Fragment,null,n.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},n.createElement("br",null),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard"},n.createElement("a",{onClick:function(){window.location.hash=c+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},h),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",h," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",p," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",g," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),n.createElement("span",{className:"lastUpdated"},"Last: ",r)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:l,size:{height:300},axis:i,grid:o,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})))},t}(n.Component);t.a=g},2514:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(690),r=a(771),u=a(20),m=a(683),c=a(12),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,g,f,v,x,y,L,E,b,H=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,o=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,g=this.props,f=g.buildingName,v=g.InsightName,x=g.showAlarmPoints,Object(h.a)(!0),x&&!e?[3,3]:(y=[],L=[],[4,Object(m.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(c.g)(a.point)&&Object(c.g)(a.pointLabel)&&Object(u.M)(Object(c.g)(a.point),Object(c.g)(a.pointLabel))}y=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),y.filter(function(e){return Object(c.g)(e.monconDevice)==H.props.InsightName}).forEach(function(e){L.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,f,!1,0,50,null,null,v,null)];case 2:return E=V.sent(),b=new Date(a.columns[0][1]),E=E.filter(function(e){return new Date(e.timeofalarm)>b}),this.setState({alarmSensedPoints:L,deviceAlarms:E},function(){if((null===L||void 0===L?void 0:L.length)>0&&a.columns.length>1){var e=L.filter(function(e){return"GenVAB_Volts"==e.sensedValue||"GenVBC_Volts"==e.sensedValue||"GenVCA_Volts"==e.sensedValue||"GenVAN_Volts"==e.sensedValue||"GenVBN_Volts"==e.sensedValue||"GenVCN_Volts"==e.sensedValue||" BusVoltage_Volts"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";H.selectAlarmPoint1(t);var u=L.filter(function(e){return"GenIA_Amps"==e.sensedValue||"GenIB_Amps"==e.sensedValue||"GenIC_Amps"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";H.selectAlarmPoint2(m);var c=L.filter(function(e){return"GenKVA_A_KiloVA"==e.sensedValue||"GenKVA__B_KiloVA"==e.sensedValue||"GenKVA_C_KiloVA"==e.sensedValue||"GenKVA_Total_KiloVA"==e.sensedValue||"Gen_A_kW"==e.sensedValue||"Gen_B_kW"==e.sensedValue||"Gen_C_kW"==e.sensedValue||"Gen_Total_kW"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";H.selectAlarmPoint3(d);var h=L.filter(function(e){return"GenPFLagging"==e.sensedValue}),p=i.sensedValue.length>1?i.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";H.selectAlarmPoint4(p);var g=L.filter(function(e){return"ActiveSpeedSource"==e.sensedValue||"EngineSpeed_rpm"==e.sensedValue||"EngineLoad_pct"==e.sensedValue||"CoolantTemp_F"==e.sensedValue||"OilPressure_psi"==e.sensedValue||"BatteryVoltage_DeciVolt"==e.sensedValue||"FuelLevel"==e.sensedValue||"ECUCoolantLevel"==e.sensedValue||"CoolDownTimeRemaining_mins"==e.sensedValue}),f=o.sensedValue.length>1?o.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";H.selectAlarmPoint5(f);var v=L.filter(function(e){return"UnexpectedShutdown"==e.sensedValue||"GlobalAlarm"==e.sensedValue||"AutoRestartFailure"==e.sensedValue||"FuelLeakDetect"==e.sensedValue||"BatteryChargerFailure"==e.sensedValue||"TransferFail"==e.sensedValue||"LowCoolantLevel"==e.sensedValue||"ECUShutdown"==e.sensedValue||"EmergencyShutdown"==e.sensedValue||"Overcrank"==e.sensedValue||"LossofECUComms"==e.sensedValue||"GlobalSenderFail"==e.sensedValue||"LowFuelLevel"==e.sensedValue||"LowOilPressure"==e.sensedValue||"HighCoolantTemp"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";H.selectAlarmPoint6(x)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenVAB_Volts"==e.sensedValueKey||"GenVBC_Volts"==e.sensedValueKey||"GenVCA_Volts"==e.sensedValueKey||"GenVAN_Volts"==e.sensedValueKey||"GenVBN_Volts"==e.sensedValueKey||"GenVCN_Volts"==e.sensedValueKey||" BusVoltage_Volts"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenVAB_Volts"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VAB:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVBC_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VBC:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVCA_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VCA:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVAN_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VA:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVBN_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VB:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVCN_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VC:"#e3e3e3",High:"grey","High-High":"red"}}}else if("BusVoltage_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Bus Voltage":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenIA_Amps"==e.sensedValueKey||"GenIB_Amps"==e.sensedValueKey||"GenIC_Amps"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenIA_Amps"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IA":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenIB_Amps"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IB":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenIC_Amps"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IC":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenKVA_A_KiloVA"==e.sensedValueKey||"GenKVA__B_KiloVA"==e.sensedValueKey||"GenKVA_C_KiloVA"==e.sensedValueKey||"GenKVA_Total_KiloVA"==e.sensedValueKey||"Gen_A_kW"==e.sensedValueKey||"Gen_B_kW"==e.sensedValueKey||"Gen_C_kW"==e.sensedValueKey||"Gen_Total_kW"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenKVA_A_KiloVA"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA__B_KiloVA"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA_C_KiloVA"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA_Total_KiloVA"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA Tota":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_A_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_B_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_C_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_Total_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW Total":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenPFLagging"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenPFLagging"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen Power Factor":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"ActiveSpeedSource"==e.sensedValueKey||"EngineSpeed_rpm"==e.sensedValueKey||"EngineLoad_pct"==e.sensedValueKey||"CoolantTemp_F"==e.sensedValueKey||"OilPressure_psi"==e.sensedValueKey||"BatteryVoltage_DeciVolt"==e.sensedValueKey||"FuelLevel"==e.sensedValueKey||"ECUCoolantLevel"==e.sensedValueKey||"CoolDownTimeRemaining_mins"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("ActiveSpeedSource"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Act speed":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EngineSpeed_rpm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Engine Speed":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EngineLoad_pct"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Engine Load":"#e3e3e3",High:"grey","High-High":"red"}}}else if("CoolantTemp_F"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Coolant Temp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("OilPressure_psi"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Oil Press":"#e3e3e3",High:"grey","High-High":"red"}}}else if("BatteryVoltage_DeciVolt"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Battery Volt":"#e3e3e3",High:"grey","High-High":"red"}}}else if("FuelLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Fuel Level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("ECUCoolantLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","ECU Coolant level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("CoolDownTimeRemaining_mins"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[9].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[9],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Cool Down Time Rem.":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:i,graphDataAlarmPoint5:e,indicateAlarm5:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:o,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"UnexpectedShutdown"==e.sensedValueKey||"GlobalAlarm"==e.sensedValueKey||"AutoRestartFailure"==e.sensedValueKey||"FuelLeakDetect"==e.sensedValueKey||"BatteryChargerFailure"==e.sensedValueKey||"TransferFail"==e.sensedValueKey||"LowCoolantLevel"==e.sensedValueKey||"ECUShutdown"==e.sensedValueKey||"EmergencyShutdown"==e.sensedValueKey||"Overcrank"==e.sensedValueKey||"LossofECUComms"==e.sensedValueKey||"GlobalSenderFail"==e.sensedValueKey||"LowFuelLevel"==e.sensedValueKey||"LowOilPressure"==e.sensedValueKey||"HighCoolantTemp"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("UnexpectedShutdown"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Unexp. Shutdown":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GlobalAlarm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Global Alarm":"#e3e3e3",High:"grey","High-High":"red"}}}else if("AutoRestartFailure"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Auto Restart Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("FuelLeakDetect"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Fuel Leak Det.":"#e3e3e3",High:"grey","High-High":"red"}}}else if("BatteryChargerFailure"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Battery Chg. Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("TransferFail"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Transfer Fai":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowCoolantLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Coolant level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("ECUShutdown"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","ECU Shutdown":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EmergencyShutdown"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[9].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[9],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Emerg. Shut":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Overcrank"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[10].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[10],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Overcrank:"#e3e3e3",High:"grey","High-High":"red"}}}else if("LossofECUComms"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[11].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[11],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Loss of ECU Comms":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GlobalSenderFail"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[12].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[12],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Global Sender Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowFuelLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[13].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[13],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Fuel Level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowOilPressure"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[14].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[14],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Oil Press":"#e3e3e3",High:"grey","High-High":"red"}}}else if("HighCoolantTemp"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[15].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[15],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","High Coolant":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:i,graphDataAlarmPoint6:e,indicateAlarm6:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:o,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.graphData,l=a.graphData2,s=a.graphData3,i=a.graphData4,o=a.graphData5,r=a.graphData6,u=a.axis1,m=a.grid,c=a.alarmSensedPoints,d=a.selectedAlarmPoint1,h=a.selectedAlarmPoint2,p=a.selectedAlarmPoint3,g=a.selectedAlarmPoint4,f=a.selectedAlarmPoint5,v=a.selectedAlarmPoint6,x=this.props.showAlarmPoints,V=new Date(e.timestamp),w=this.props.liveGraphRange;if(n.columns.length>1){n.columns[0].splice(1,1),n.columns[0].push(V),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.GenVAB_Volts),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.GenVBC_Volts),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.GenVCA_Volts),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.GenVAN_Volts),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.GenVBN_Volts),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.GenVCN_Volts),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.BusVoltage_Volts),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.GenIA_Amps),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.GenIB_Amps),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.GenIC_Amps),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.GenKVA_A_KiloVA),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.GenKVA__B_KiloVA),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.GenKVA_C_KiloVA),s.columns[4].splice(1,1),s.columns[4].push(null===e||void 0===e?void 0:e.GenKVA_Total_KiloVA),s.columns[5].splice(1,1),s.columns[5].push(null===e||void 0===e?void 0:e.Gen_A_kW),s.columns[6].splice(1,1),s.columns[6].push(null===e||void 0===e?void 0:e.Gen_B_kW),s.columns[7].splice(1,1),s.columns[7].push(null===e||void 0===e?void 0:e.Gen_C_kW),s.columns[8].splice(1,1),s.columns[8].push(null===e||void 0===e?void 0:e.Gen_Total_kW),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.GenPFLagging),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.ActiveSpeedSource),o.columns[2].splice(1,1),o.columns[2].push(null===e||void 0===e?void 0:e.EngineSpeed_rpm),o.columns[3].splice(1,1),o.columns[3].push(null===e||void 0===e?void 0:e.EngineLoad_pct),o.columns[4].splice(1,1),o.columns[4].push(null===e||void 0===e?void 0:e.CoolantTemp_F),o.columns[5].splice(1,1),o.columns[5].push(null===e||void 0===e?void 0:e.OilPressure_psi),o.columns[6].splice(1,1),o.columns[6].push(null===e||void 0===e?void 0:e.BatteryVoltage_DeciVolt),o.columns[7].splice(1,1),o.columns[7].push(null===e||void 0===e?void 0:e.FuelLevel),o.columns[8].splice(1,1),o.columns[8].push(null===e||void 0===e?void 0:e.ECUCoolantLevel),o.columns[9].splice(1,1),o.columns[9].push(null===e||void 0===e?void 0:e.CoolDownTimeRemaining_mins),r.columns[1].splice(1,1),r.columns[1].push(null===e||void 0===e?void 0:e.UnexpectedShutdown),r.columns[2].splice(1,1),r.columns[2].push(null===e||void 0===e?void 0:e.GlobalAlarm),r.columns[3].splice(1,1),r.columns[3].push(null===e||void 0===e?void 0:e.AutoRestartFailure),r.columns[4].splice(1,1),r.columns[4].push(null===e||void 0===e?void 0:e.FuelLeakDetect),r.columns[5].splice(1,1),r.columns[5].push(null===e||void 0===e?void 0:e.BatteryChargerFailure),r.columns[6].splice(1,1),r.columns[6].push(null===e||void 0===e?void 0:e.TransferFail),r.columns[7].splice(1,1),r.columns[7].push(null===e||void 0===e?void 0:e.LowCoolantLevel),r.columns[8].splice(1,1),r.columns[8].push(null===e||void 0===e?void 0:e.ECUShutdown),r.columns[9].splice(1,1),r.columns[9].push(null===e||void 0===e?void 0:e.EmergencyShutdown),r.columns[10].splice(1,1),r.columns[10].push(null===e||void 0===e?void 0:e.Overcrank),r.columns[11].splice(1,1),r.columns[11].push(null===e||void 0===e?void 0:e.LossofECUComms),r.columns[12].splice(1,1),r.columns[12].push(null===e||void 0===e?void 0:e.GlobalSenderFail),r.columns[13].splice(1,1),r.columns[13].push(null===e||void 0===e?void 0:e.LowFuelLevel),r.columns[14].splice(1,1),r.columns[14].push(null===e||void 0===e?void 0:e.LowOilPressure),r.columns[15].splice(1,1),r.columns[15].push(null===e||void 0===e?void 0:e.HighCoolantTemp),(V.getTime()-n.columns[0][2].getTime())/6e4>w&&n.columns[0].splice(1,1),u.x.tick.values[0]<n.columns[0][1]&&(u.x.tick.values.splice(0,1),m.x.lines.splice(0,1)),u.x.tick.values[2]&&u.x.tick.values[1].getTime()&&u.x.tick.values[2].getTime()-u.x.tick.values[1].getTime()<V.getTime()-u.x.tick.values[u.x.tick.values.length-1]&&(V.setSeconds(0),w>10&&V.setMinutes(V.getMinutes()-V.getMinutes()%5),u.x.tick.values.push(V),m.x.lines.push({value:V,class:"grid4"}));var y=null===V||void 0===V?void 0:V.toLocaleString();x?this.setState({grid:m,axis1:u,graphData:n,graphData2:l,graphData3:s,graphData4:i,graphData5:o,graphData6:r,lastUpdatedAt:y},function(){var e=c.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),a=d.sensedValue.length>1?d.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint1(a);var n=c.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=h.sensedValue.length>1?h.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";t.selectAlarmPoint2(l);var s=c.filter(function(e){return"illuminance_lux"==e.sensedValue}),i=p.sensedValue.length>1?p.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";t.selectAlarmPoint3(i);var o=c.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),r=g.sensedValue.length>1?g.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";t.selectAlarmPoint4(r);var u=c.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),m=f.sensedValue.length>1?f.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";t.selectAlarmPoint5(m);var x=c.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),V=v.sensedValue.length>1?v.sensedValue:(null===x||void 0===x?void 0:x.length)>0?x[x.length-1].sensedValue:"";t.selectAlarmPoint6(V)}):this.setState({grid:m,axis1:u,graphData:n,graphData2:l,graphData3:s,graphData4:i,graphData5:o,graphData6:r,lastUpdatedAt:y})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K,B,W,z,Z,Y,J,$,Q,X,ee,te,ae,ne,le,se,ie,oe,re,ue,me,ce,de,he,pe,ge,fe,ve,xe,Ve,we,ye,Le=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.axis4,v=m.axis5,x=m.axis6,w=m.graphData,y=m.graphData2,L=m.graphData3,E=m.graphData4,b=m.graphData5,H=m.graphData6,A=m.lastUpdatedAt,a?(N=Object(),[4,Object(i.x)(a,n)]):[3,3];case 1:return N=V.sent(),this.setState({Moncon:N}),[4,Object(o.l)(N.topic,l,s,w.columns.length>1)];case 2:return D=V.sent(),S=["VBC"],_=["VCA"],k=["VA"],O=["VB"],F=["VC"],j=["Bus Voltage"],C=["Gen IA"],R=["Gen IB"],G=["Gen IC"],T=["Gen kVA A"],M=["Gen kVA B"],I=["Gen kVA C"],U=["Gen kVA Total"],q=["Gen kW A"],K=["Gen kW B"],B=["Gen kW C"],W=["Gen kW Total"],z=["Gen Power Factor"],Z=["Act speed"],Y=["Engine Speed"],J=["Engine Load"],$=["Coolant Temp"],Q=["Oil Press"],X=["Battery Volt"],ee=["Fuel Level"],te=["ECU Coolant level"],ae=["Cool Down Time Rem."],ne=["Unexp. Shutdown"],le=["Global Alarm"],se=["Auto Restart Fail"],ie=["Fuel Leak Det."],oe=["Battery Chg. Fail"],re=["Transfer Fail"],ue=["Low Coolant level"],me=["ECU Shutdown"],ce=["Emerg. Shut"],de=["Overcrank"],he=["Loss of ECU Comms"],pe=["Global Sender Fail"],ge=["Low Fuel Level"],fe=["Low Oil Press"],ve=["High Coolant"],xe=["x"],(P=["VAB"]).push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(null),z.push(null),Z.push(null),Y.push(null),J.push(null),$.push(null),Q.push(null),X.push(null),ee.push(null),te.push(null),ae.push(null),ne.push(null),le.push(null),se.push(null),ie.push(null),oe.push(null),re.push(null),ue.push(null),me.push(null),ce.push(null),de.push(null),he.push(null),pe.push(null),ge.push(null),fe.push(null),ve.push(null),xe.push(new Date(l)),D.length>0&&D.forEach(function(e){e&&(P.push(e.GenVAB_Volts),S.push(e.GenVBC_Volts),_.push(e.GenVCA_Volts),k.push(e.GenVAN_Volts),O.push(e.GenVBN_Volts),F.push(e.GenVCN_Volts),j.push(e.BusVoltage_Volts),C.push(e.GenIA_Amps),R.push(e.GenIB_Amps),G.push(e.GenIC_Amps),T.push(e.GenKVA_A_KiloVA),M.push(e.GenKVA__B_KiloVA),I.push(e.GenKVA_C_KiloVA),U.push(e.GenKVA_Total_KiloVA),q.push(e.Gen_A_kW),K.push(e.Gen_B_kW),B.push(e.Gen_C_kW),W.push(e.Gen_Total_kW),z.push(e.GenPFLagging),Z.push(e.ActiveSpeedSource),Y.push(e.EngineSpeed_rpm),J.push(e.EngineLoad_pct),$.push(e.CoolantTemp_F),Q.push(e.OilPressure_psi),X.push(e.BatteryVoltage_DeciVolt),ee.push(e.FuelLevel),te.push(e.ECUCoolantLevel),ae.push(e.CoolDownTimeRemaining_mins),ne.push(e.UnexpectedShutdown),le.push(e.GlobalAlarm),se.push(e.AutoRestartFailure),ie.push(e.FuelLeakDetect),oe.push(e.BatteryChargerFailure),re.push(e.TransferFail),ue.push(e.LowCoolantLevel),me.push(e.ECUShutdown),ce.push(e.EmergencyShutdown),de.push(e.Overcrank),he.push(e.LossofECUComms),pe.push(e.GlobalSenderFail),ge.push(e.LowFuelLevel),fe.push(e.LowOilPressure),ve.push(e.HighCoolantTemp),xe.push(new Date(e.timestamp)))}),A=D.length>0?null===(e=xe[xe.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(null),z.push(null),Z.push(null),Y.push(null),J.push(null),$.push(null),Q.push(null),X.push(null),ee.push(null),te.push(null),ae.push(null),ne.push(null),le.push(null),se.push(null),ie.push(null),oe.push(null),re.push(null),ue.push(null),me.push(null),ce.push(null),de.push(null),he.push(null),pe.push(null),ge.push(null),fe.push(null),ve.push(null),xe.push(new Date(s)),w={x:"x",columns:[xe,P,S,_,k,O,F,j]},y={x:"x",columns:[xe,C,R,G]},L={x:"x",columns:[xe,T,M,I,U,q,K,B,W]},E={x:"x",columns:[xe,z]},b={x:"x",columns:[xe,Z,Y,J,$,Q,X,ee,te,ae]},H={x:"x",columns:[xe,ne,le,se,ie,oe,re,ue,me,ce,de,he,pe,ge,fe,ve]},d.y.label="Volts",h.y.label="Amps",p.y.label="Watts",f.y.label="",v.y.label="",x.y.label="",xe.length>1&&(Ve=Object(r.a)(5,l,s),we="",Ve.length>1?(ye=((new Date).getTime()-Ve[0].getTime())/1e3,we=(ye/=3600)>24?"%m-%d %H:%M":ye<.3?"%H:%M:%S":"%H:%M"):we="%H:%M:%S",c.x.lines=[],Ve.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},f.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},d.y.tick.values=[0,50,100,150,200,250],h.y.tick.values=[0,10,20,30,40,50],p.y.tick.values=[0,20,40,60,80,100],f.y.tick.values=[-1,0,1],v.y.tick.values=[0,40,80,120,160,160],x.y.tick.values=[-1,0,1],d.y.max=250,d.y.min=0,h.y.max=50,h.y.min=0,p.y.max=100,p.y.min=0,f.y.max=1,f.y.min=-1,v.y.max=160,v.y.min=0,x.y.max=1,x.y.min=-1,d.x.tick.format=we,h.x.tick.format=we,p.x.tick.format=we,f.x.tick.format=we,v.x.tick.format=we,x.x.tick.format=we,d.x.tick.values=Ve,h.x.tick.values=Ve,p.x.tick.values=Ve,f.x.tick.values=Ve,v.x.tick.values=Ve,x.x.tick.values=Ve,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,axis4:f,axis5:v,axis6:x,graphData:w,graphData2:y,graphData3:L,graphData4:E,graphData5:b,graphData6:H,lastUpdatedAt:A,loading:!1},function(){u&&Le.changeAlarmStatus(!0)})),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){u&&Le.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,a=t.Moncon,l=t.loading,i=t.graphData,o=t.graphData2,r=t.graphData3,u=t.graphData4,m=t.graphData5,c=t.graphData6,d=t.axis1,h=t.axis2,p=t.axis3,g=t.axis4,f=t.axis5,v=t.axis6,x=t.grid,V=t.lastUpdatedAt,w=t.equipmentsLabels,y=t.indicateAlarm1,L=t.indicateAlarm2,E=t.indicateAlarm3,b=t.indicateAlarm4,H=t.indicateAlarm5,A=t.indicateAlarm6,N=t.alarmSensedPoints,D=t.selectedAlarmPoint1,P=t.selectedAlarmPoint2,S=t.selectedAlarmPoint3,_=t.selectedAlarmPoint4,k=t.selectedAlarmPoint5,O=t.selectedAlarmPoint6,F=this.props,j=F.graphsList,C=F.instance,R=F.buildingName,G=F.space,T=F.floor,M=F.zone,I=F.showAlarmPoints,U=F.InsightName;return n.createElement(n.Fragment,null,j.indexOf("Voltages")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(y&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:D.sensedValue,onChange:function(t){e.selectAlarmPoint1(t.target.value)}},N.filter(function(e){return"GenVAB_Volts"==e.sensedValue||"GenVBC_Volts"==e.sensedValue||"GenVCA_Volts"==e.sensedValue||"GenVAN_Volts"==e.sensedValue||"GenVBN_Volts"==e.sensedValue||"GenVCN_Volts"==e.sensedValue||"BusVoltage_Volts"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),y&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Voltages"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:i,size:{height:300},axis:d,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),j.indexOf("Currents")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(L&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(t){e.selectAlarmPoint2(t.target.value)}},N.filter(function(e){return"GenIA_Amps"==e.sensedValue||"GenIB_Amps"==e.sensedValue||"GenIC_Amps"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),L&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Currents"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:o,size:{height:300},axis:h,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Powers")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(E&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(t){e.selectAlarmPoint3(t.target.value)}},N.filter(function(e){return"GenKVA_A_KiloVA"==e.sensedValue||"GenKVA__B_KiloVA"==e.sensedValue||"GenKVA_C_KiloVA"==e.sensedValue||"GenKVA_Total_KiloVA"==e.sensedValue||"Gen_A_kW"==e.sensedValue||"Gen_B_kW"==e.sensedValue||"Gen_C_kW"==e.sensedValue||"Gen_Total_kW"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),E&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Powers"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:r,size:{height:300},axis:p,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Power Factor")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(b&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:_.sensedValue,onChange:function(t){e.selectAlarmPoint4(t.target.value)}},N.filter(function(e){return"GenPFLagging"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),b&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Power Factor"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:u,size:{height:300},axis:g,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Other Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:k.sensedValue,onChange:function(t){e.selectAlarmPoint5(t.target.value)}},N.filter(function(e){return"ActiveSpeedSource"==e.sensedValue||"EngineSpeed_rpm"==e.sensedValue||"EngineLoad_pct"==e.sensedValue||"CoolantTemp_F"==e.sensedValue||"OilPressure_psi"==e.sensedValue||"BatteryVoltage_DeciVolt"==e.sensedValue||"FuelLevel"==e.sensedValue||"ECUCoolantLevel"==e.sensedValue||"CoolDownTimeRemaining_mins"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Other Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:m,size:{height:300},axis:f,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Binary Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:O.sensedValue,onChange:function(t){e.selectAlarmPoint6(t.target.value)}},N.filter(function(e){return"UnexpectedShutdown"==e.sensedValue||"GlobalAlarm"==e.sensedValue||"AutoRestartFailure"==e.sensedValue||"FuelLeakDetect"==e.sensedValue||"BatteryChargerFailure"==e.sensedValue||"TransferFail"==e.sensedValue||"LowCoolantLevel"==e.sensedValue||"ECUShutdown"==e.sensedValue||"EmergencyShutdown"==e.sensedValue||"Overcrank"==e.sensedValue||"LossofECUComms"==e.sensedValue||"GlobalSenderFail"==e.sensedValue||"LowFuelLevel"==e.sensedValue||"LowOilPressure"==e.sensedValue||"HighCoolantTemp"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),A&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Binary Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:c,size:{height:300},axis:v,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2515:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(690),r=a(771),u=a(20),m=a(12),c=a(683),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,g,f,v,x,y=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=this.props,i=s.buildingName,o=s.InsightName,r=s.showAlarmPoints,Object(h.a)(!0),r&&!e?[3,3]:(g=[],f=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(m.g)(a.point)&&Object(m.g)(a.pointLabel)&&Object(u.M)(Object(m.g)(a.point),Object(m.g)(a.pointLabel))}g=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),g.filter(function(e){return Object(m.g)(e.monconDevice)==y.props.InsightName}).forEach(function(e){f.push({sensedValue:Object(m.g)(e.sensedValue),maximumExtremeValue:Object(m.g)(e.maximumExtremeValue),maximumNormalValue:Object(m.g)(e.maximumNormalValue),minimumExtremeValue:Object(m.g)(e.minimumExtremeValue),minimumNormalValue:Object(m.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,i,!1,0,50,null,null,o,null)];case 2:return v=V.sent(),x=new Date(a.columns[0][1]),v=v.filter(function(e){return new Date(e.timeofalarm)>x}),this.setState({alarmSensedPoints:f,deviceAlarms:v},function(){if((null===f||void 0===f?void 0:f.length)>0&&a.columns.length>1){var e=f.filter(function(e){return"vin"==e.sensedValue||"register1"==e.sensedValue||"t3frontRefrigerator1"==e.sensedValue||"t4backRefrigerator1"==e.sensedValue||"t5evapfanRefrigerator1"==e.sensedValue||"t6comprinRefrigerator1"==e.sensedValue||"t7comproutRefrigerator1"==e.sensedValue||"t8probeRefrigerator1"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";y.selectAlarmPoint1(t);var s=f.filter(function(e){return"vin"==e.sensedValue||"register1"==e.sensedValue||"t3frontRefrigerator2"==e.sensedValue||"t4backRefrigerator2"==e.sensedValue||"t5evapfanRefrigerator2"==e.sensedValue||"t6comprinRefrigerator2"==e.sensedValue||"t7comproutRefrigerator2"==e.sensedValue||"t8probeRefrigerator2"==e.sensedValue}),i=l.sensedValue.length>1?l.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";y.selectAlarmPoint2(i)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"vin"==e.sensedValueKey||"register1"==e.sensedValueKey||"t3frontRefrigerator1"==e.sensedValueKey||"t4backRefrigerator1"==e.sensedValueKey||"t5evapfanRefrigerator1"==e.sensedValueKey||"t6comprinRefrigerator1"==e.sensedValueKey||"t7comproutRefrigerator1"==e.sensedValueKey||"t8probeRefrigerator1"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("vin"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Vin:"#e3e3e3",High:"grey","High-High":"red"}}}else if("register1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Register:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t3frontRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Front:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t4backRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Back:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t5evapfanRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Evaporator Fan":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t6comprinRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor In":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t7comproutRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor Out":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t8probeRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Solid:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"vin"==e.sensedValueKey||"register1"==e.sensedValueKey||"t3frontRefrigerator2"==e.sensedValueKey||"t4backRefrigerator2"==e.sensedValueKey||"t5evapfanRefrigerator2"==e.sensedValueKey||"t6comprinRefrigerator2"==e.sensedValueKey||"t7comproutRefrigerator2"==e.sensedValueKey||"t8probeRefrigerator2"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("vin"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Vin:"#e3e3e3",High:"grey","High-High":"red"}}}else if("register1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Register:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t3frontRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Front:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t4backRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Back:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t5evapfanRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Evaporator Fan":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t6comprinRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor In":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Compressor Out"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t8probeRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Solid:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.graphData,l=a.graphData2,s=a.axis1,i=a.grid,o=a.alarmSensedPoints,r=a.selectedAlarmPoint1,u=a.selectedAlarmPoint2,m=this.props.showAlarmPoints,c=new Date(e.timestamp),d=this.props.liveGraphRange;if(n.columns.length>1){n.columns[0].splice(1,1),n.columns[0].push(c),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.vin),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.register1),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.t3frontRefrigerator1),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.t4backRefrigerator1),n.columns[5].splice(1,1),n.columns[5].push(null===e||void 0===e?void 0:e.t5evapfanRefrigerator1),n.columns[6].splice(1,1),n.columns[6].push(null===e||void 0===e?void 0:e.t6comprinRefrigerator1),n.columns[7].splice(1,1),n.columns[7].push(null===e||void 0===e?void 0:e.t7comproutRefrigerator1),n.columns[8].splice(1,1),n.columns[8].push(null===e||void 0===e?void 0:e.t8probeRefrigerator1),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.vin),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.register1),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.t3frontRefrigerator2),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.t4backRefrigerator2),l.columns[5].splice(1,1),l.columns[5].push(null===e||void 0===e?void 0:e.t5evapfanRefrigerator2),l.columns[6].splice(1,1),l.columns[6].push(null===e||void 0===e?void 0:e.t6comprinRefrigerator2),l.columns[7].splice(1,1),l.columns[7].push(null===e||void 0===e?void 0:e.t7comproutRefrigerator2),l.columns[8].splice(1,1),l.columns[8].push(null===e||void 0===e?void 0:e.t8probeRefrigerator2),(c.getTime()-n.columns[0][2].getTime())/6e4>d&&n.columns[0].splice(1,1),s.x.tick.values[0]<n.columns[0][1]&&(s.x.tick.values.splice(0,1),i.x.lines.splice(0,1)),s.x.tick.values[2]&&s.x.tick.values[1].getTime()&&s.x.tick.values[2].getTime()-s.x.tick.values[1].getTime()<c.getTime()-s.x.tick.values[s.x.tick.values.length-1]&&(c.setSeconds(0),d>10&&c.setMinutes(c.getMinutes()-c.getMinutes()%5),s.x.tick.values.push(c),i.x.lines.push({value:c,class:"grid4"}));var h=null===c||void 0===c?void 0:c.toLocaleString();m?this.setState({grid:i,axis1:s,graphData:n,graphData2:l,lastUpdatedAt:h},function(){var e=o.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),a=r.sensedValue.length>1?r.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint1(a);var n=o.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=u.sensedValue.length>1?u.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";t.selectAlarmPoint2(l)}):this.setState({grid:i,axis1:s,graphData:n,graphData2:l,lastUpdatedAt:h})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.graphData,f=m.graphData2,v=m.lastUpdatedAt,a?(x=Object(),[4,Object(i.x)(a,n)]):[3,3];case 1:return x=V.sent(),this.setState({Moncon:x}),[4,Object(o.j)(x.topic,l,s,p.columns.length>1)];case 2:return w=V.sent(),L=["Register"],E=["Front"],b=["Back"],H=["Evaporator Fan"],A=["Compressor In"],N=["Compressor Out"],D=["Solid"],P=["Front"],S=["Back"],_=["Evaporator Fan"],k=["Compressor In"],O=["Compressor Out"],F=["Solid"],j=["x"],(y=["Vin"]).push(null),L.push(null),E.push(null),b.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(new Date(l)),w.length>0&&w.forEach(function(e){e&&(y.push(""+e.vin),L.push(""+e.register1),E.push(""+e.t3frontRefrigerator1),b.push(""+e.t4backRefrigerator1),H.push(""+e.t5evapfanRefrigerator1),A.push(""+e.t6comprinRefrigerator1),N.push(""+e.t7comproutRefrigerator1),D.push(""+e.t8probeRefrigerator1),P.push(""+e.t3frontRefrigerator2),S.push(""+e.t4backRefrigerator2),_.push(""+e.t5evapfanRefrigerator2),k.push(""+e.t6comprinRefrigerator2),O.push(""+e.t7comproutRefrigerator2),F.push(""+e.t8probeRefrigerator2),j.push(new Date(e.timestamp)))}),v=w.length>0?null===(e=j[j.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",y.push(null),L.push(null),E.push(null),b.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(new Date(s)),p={x:"x",columns:[j,y,L,E,b,H,A,N,D]},f={x:"x",columns:[j,y,L,P,S,_,k,O,F]},d.y.label="Amps",h.y.label="Amps",j.length>1&&(C=Object(r.a)(5,l,s),R="",C.length>1?(G=((new Date).getTime()-C[0].getTime())/1e3,R=(G/=3600)>24?"%m-%d %H:%M":G<.3?"%H:%M:%S":"%H:%M"):R="%H:%M:%S",c.x.lines=[],C.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,20,40,60,80,100],h.y.tick.values=[0,20,40,60,80,100],d.y.max=100,d.y.min=0,h.y.max=100,h.y.min=0,d.x.tick.format=R,h.x.tick.format=R,d.x.tick.values=C,h.x.tick.values=C,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,graphData:p,graphData2:f,lastUpdatedAt:v,loading:!1},function(){u&&T.changeAlarmStatus(!0)})),[3,4];case 3:this.setState({loading:!1},function(){u&&T.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a=this,l=this.state,i=l.Moncon,o=l.loading,r=l.graphData,u=l.graphData2,m=l.axis1,c=l.axis2,d=l.grid,h=l.lastUpdatedAt,p=l.equipmentsLabels,g=l.graphDataAlarmPoint1,f=l.graphDataAlarmPoint2,v=l.indicateAlarm1,x=l.indicateAlarm2,V=l.alarmSensedPoints,w=l.selectedAlarmPoint1,y=l.selectedAlarmPoint2,L=this.props,E=L.graphsList,b=L.instance,H=L.buildingName,A=L.space,N=L.floor,D=L.zone,P=L.showAlarmPoints,S=L.InsightName;return n.createElement(n.Fragment,null,E.indexOf("Refrigerator 1")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(v&&P?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),P&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",V&&V.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:w.sensedValue,onChange:function(e){a.selectAlarmPoint1(e.target.value)}},V.filter(function(e){return"t3frontRefrigerator1"==e.sensedValue||"t4backRefrigerator1"==e.sensedValue||"t5evapfanRefrigerator1"==e.sensedValue||"t6comprinRefrigerator1"==e.sensedValue||"t7comproutRefrigerator1"==e.sensedValue||"t8probeRefrigerator1"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),v&&n.createElement("a",{href:"#"+b+"/"+H+"/Alarms/OperationalAlarms/Device/"+S,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{href:"#"+b+"/"+H+"/Insights/Equipment/Graphs/CBW406/"+(null===i||void 0===i?void 0:i.deviceName),target:"_blank",rel:"noreferrer noopener"},p.length>0&&p[0].rdfsLabel," ",A),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",A," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",N," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",D," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===p||void 0===p?void 0:p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===i||void 0===i?void 0:i.rdfsLabel," ")),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 1"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",A," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",N," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",D," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===i||void 0===i?void 0:i.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",h)),o?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:P&&(null===(e=g.columns)||void 0===e?void 0:e.length)>1?g:r,size:{height:300},axis:m,grid:d,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),E.indexOf("Refrigerator 2")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(x&&P?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),P&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",V&&V.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:y.sensedValue,onChange:function(e){a.selectAlarmPoint2(e.target.value)}},V.filter(function(e){return"vin"==e.sensedValue||"register1"==e.sensedValue||"t3frontRefrigerator2"==e.sensedValue||"t4backRefrigerator2"==e.sensedValue||"t5evapfanRefrigerator2"==e.sensedValue||"t6comprinRefrigerator2"==e.sensedValue||"t7comproutRefrigerator2"==e.sensedValue||"t8probeRefrigerator2"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),x&&n.createElement("a",{href:"#"+b+"/"+H+"/Alarms/OperationalAlarms/Device/"+S,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+b+"/"+H+"/Insights/Equipment/Graphs/CBW406/"+(null===i||void 0===i?void 0:i.deviceName),target:"_blank",rel:"noreferrer noopener"},p.length>0&&p[0].rdfsLabel," ",A),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 2"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",A," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",N," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",D," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===i||void 0===i?void 0:i.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",h)),o?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:P&&(null===(t=f.columns)||void 0===t?void 0:t.length)>1?f:u,size:{height:300},axis:c,grid:d,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2516:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(690),r=a(771),u=a(20),m=a(12),c=a(683),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){var t;return x(this,void 0,void 0,function(){var a,n,l,s,i,o,r,g,f,v,x,y,L,E=this;return V(this,function(V){switch(V.label){case 0:return a=this.state,n=a.graphData,l=a.selectedAlarmPoint1,s=a.selectedAlarmPoint2,i=a.selectedAlarmPoint3,o=this.props,r=o.buildingName,g=o.InsightName,f=o.showAlarmPoints,Object(h.a)(!0),f&&!e?[3,3]:(v=[],x=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(m.g)(a.point)&&Object(m.g)(a.pointLabel)&&Object(u.M)(Object(m.g)(a.point),Object(m.g)(a.pointLabel))}v=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),v.filter(function(e){return Object(m.g)(e.monconDevice)==E.props.InsightName}).forEach(function(e){x.push({sensedValue:Object(m.g)(e.sensedValue),maximumExtremeValue:Object(m.g)(e.maximumExtremeValue),maximumNormalValue:Object(m.g)(e.maximumNormalValue),minimumExtremeValue:Object(m.g)(e.minimumExtremeValue),minimumNormalValue:Object(m.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,r,!1,0,50,null,null,g,null)];case 2:return y=V.sent(),L=(null===(t=n.columns[0])||void 0===t?void 0:t.length)>1?new Date(n.columns[0][1]):null,y=y.filter(function(e){return new Date(e.timeofalarm)>L}),this.setState({alarmSensedPoints:x,deviceAlarms:y},function(){if((null===x||void 0===x?void 0:x.length)>0&&n.columns.length>1){var e=x.filter(function(e){return"a13comprcurrRefrigerator1"==e.sensedValue||"a14efmcurrRefrigerator1"==e.sensedValue||"a15prRefrigerator1"==e.sensedValue||"a16doorRefrigerator1"==e.sensedValue}),t=l.sensedValue.length>1?l.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";E.selectAlarmPoint1(t);var a=x.filter(function(e){return"a13comprcurrRefrigerator2"==e.sensedValue||"a14efmcurrRefrigerator2"==e.sensedValue||"a15prRefrigerator2"==e.sensedValue||"a16doorRefrigerator2"==e.sensedValue}),o=s.sensedValue.length>1?s.sensedValue:(null===a||void 0===a?void 0:a.length)>0?a[a.length-1].sensedValue:"";E.selectAlarmPoint2(o);var r=x.filter(function(e){return"poweranalogInput5"==e.sensedValue||"poweranalogInput6"==e.sensedValue||"poweranalogInput7"==e.sensedValue||"poweranalogInput8"==e.sensedValue}),u=i.sensedValue.length>1?i.sensedValue:(null===r||void 0===r?void 0:r.length)>0?r[r.length-1].sensedValue:"";E.selectAlarmPoint3(u)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"a13comprcurrRefrigerator1"==e.sensedValueKey||"a14efmcurrRefrigerator1"==e.sensedValueKey||"a15prRefrigerator1"==e.sensedValueKey||"a16doorRefrigerator1"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("a13comprcurrRefrigerator1"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Compressor:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a14efmcurrRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Freezer Defrost":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a15prRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Pressure Sensor":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a16doorRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Door Contact":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"a13comprcurrRefrigerator2"==e.sensedValueKey||"a14efmcurrRefrigerator2"==e.sensedValueKey||"a15prRefrigerator2"==e.sensedValueKey||"a16doorRefrigerator2"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("a13comprcurrRefrigerator2"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 5":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a14efmcurrRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 6":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a15prRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 7":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a16doorRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"poweranalogInput5"==e.sensedValueKey||"poweranalogInput6"==e.sensedValueKey||"poweranalogInput7"==e.sensedValueKey||"poweranalogInput8"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("poweranalogInput5"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 5":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput6"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 6":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput7"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 7":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput8"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.graphData,l=a.graphData2,s=a.axis1,i=a.grid,o=a.alarmSensedPoints,r=a.selectedAlarmPoint1,u=a.selectedAlarmPoint2,m=a.selectedAlarmPoint3,c=this.props.showAlarmPoints,d=new Date(e.timestamp),h=this.props.liveGraphRange;if(n.columns.length>1){n.columns[0].splice(1,1),n.columns[0].push(d),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.a13comprcurrRefrigerator1),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.a14efmcurrRefrigerator1),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.a15prRefrigerator1),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.a16doorRefrigerator1),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.a13comprcurrRefrigerator2),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.a14efmcurrRefrigerator2),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.a15prRefrigerator2),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.a16doorRefrigerator2),(d.getTime()-n.columns[0][2].getTime())/6e4>h&&n.columns[0].splice(1,1),s.x.tick.values[0]<n.columns[0][1]&&(s.x.tick.values.splice(0,1),i.x.lines.splice(0,1)),s.x.tick.values[2]&&s.x.tick.values[1].getTime()&&s.x.tick.values[2].getTime()-s.x.tick.values[1].getTime()<d.getTime()-s.x.tick.values[s.x.tick.values.length-1]&&(d.setSeconds(0),h>10&&d.setMinutes(d.getMinutes()-d.getMinutes()%5),s.x.tick.values.push(d),i.x.lines.push({value:d,class:"grid4"}));var p=null===d||void 0===d?void 0:d.toLocaleString();c?this.setState({grid:i,axis1:s,graphData:n,graphData2:l,lastUpdatedAt:p},function(){var e=o.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),a=r.sensedValue.length>1?r.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint1(a);var n=o.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=u.sensedValue.length>1?u.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";t.selectAlarmPoint2(l);var s=o.filter(function(e){return"illuminance_lux"==e.sensedValue}),i=m.sensedValue.length>1?m.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";t.selectAlarmPoint3(i)}):this.setState({grid:i,axis1:s,graphData:n,graphData2:l,lastUpdatedAt:p})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.graphData,v=m.graphData2,x=m.graphData3,w=m.lastUpdatedAt,a?(y=Object(),[4,Object(i.x)(a,n)]):[3,3];case 1:return y=V.sent(),this.setState({Moncon:y}),[4,Object(o.k)(y.topic,l,s,f.columns.length>1)];case 2:return L=V.sent(),b=["Freezer Defrost"],H=["Pressure Sensor"],A=["Door Contact"],N=["Analog Input 5"],D=["Analog Input 6"],P=["Analog Input 7"],S=["Analog Input 8"],_=["Register"],k=["Serial Number"],O=["Refresh"],F=["Power Analog Input 5"],j=["Power Analog Input 6"],C=["Power Analog Input 7"],R=["Power Analog Input 8"],G=["Amalgamated Watts"],T=["x"],(E=["Compressor"]).push(null),b.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(new Date(l)),L.length>0&&L.forEach(function(e){e&&(e.a13comprcurrRefrigerator1&&E.push(""+e.a13comprcurrRefrigerator1),e.a14efmcurrRefrigerator1&&b.push(""+e.a14efmcurrRefrigerator1),e.a15prRefrigerator1&&H.push(""+e.a15prRefrigerator1),e.a16doorRefrigerator1&&A.push(""+e.a16doorRefrigerator1),e.a13comprcurrRefrigerator2&&N.push(""+e.a13comprcurrRefrigerator2),e.a14efmcurrRefrigerator2&&D.push(""+e.a14efmcurrRefrigerator2),e.a15prRefrigerator2&&P.push(""+e.a15prRefrigerator2),e.a16doorRefrigerator2&&S.push(""+e.a16doorRefrigerator2),e.register1&&_.push(""+e.register1),e.serialNumber&&k.push(""+e.serialNumber),e.minRecRefresh&&O.push(""+e.minRecRefresh),e.poweranalogInput5&&F.push(""+e.poweranalogInput5),e.poweranalogInput6&&j.push(""+e.poweranalogInput6),e.poweranalogInput7&&C.push(""+e.poweranalogInput7),e.poweranalogInput8&&R.push(""+e.poweranalogInput8),G.push(""+360*e.a13comprcurrRefrigerator1),T.push(new Date(e.timestamp)))}),w=L.length>0?null===(e=T[T.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",E.push(null),b.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(new Date(s)),(E.length>3||b.length>3||H.length>3||A.length>3)&&(f={x:"x",columns:[T,E,b,H,A]}),(N.length>3||D.length>3||P.length>3||S.length>3)&&(v={x:"x",columns:[T,N,D,P,S]}),(F.length>3||j.length>3||C.length>3||R.length>3)&&(x={x:"x",columns:[T,F,j,C,R]},p.y.label="kw"),d.y.label="Amps",h.y.label="Amps",T.length>1&&(M=Object(r.a)(5,l,s),I="",M.length>1?(U=((new Date).getTime()-M[0].getTime())/1e3,I=(U/=3600)>24?"%m-%d %H:%M":U<.3?"%H:%M:%S":"%H:%M"):I="%H:%M:%S",c.x.lines=[],M.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[-10,-5,0,5,10],h.y.tick.values=[-10,-5,0,5,10],p.y.tick.values=[0,20,40,60,80,100],d.y.max=10,d.y.min=-10,h.y.max=10,h.y.min=-10,p.y.max=100,p.y.min=0,d.x.tick.format=I,h.x.tick.format=I,p.x.tick.format=I,d.x.tick.values=M,h.x.tick.values=M,p.x.tick.values=M,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,graphData:f,graphData2:v,graphData3:x,lastUpdatedAt:w,loading:!1},function(){u&&q.changeAlarmStatus(!0)})),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){u&&q.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a,l,i,o,r=this,u=this.state,m=u.Moncon,c=u.loading,d=u.graphData,h=u.graphData2,p=u.graphData3,g=u.axis1,f=u.axis2,v=u.axis3,x=u.grid,V=u.lastUpdatedAt,w=u.equipmentsLabels,y=u.graphDataAlarmPoint1,L=u.graphDataAlarmPoint2,E=u.graphDataAlarmPoint3,b=u.indicateAlarm1,H=u.indicateAlarm2,A=u.indicateAlarm3,N=u.alarmSensedPoints,D=u.selectedAlarmPoint1,P=u.selectedAlarmPoint2,S=u.selectedAlarmPoint3,_=this.props,k=_.graphsList,O=_.instance,F=_.buildingName,j=_.space,C=_.floor,R=_.zone,G=_.showAlarmPoints,T=_.InsightName;return n.createElement(n.Fragment,null,k.indexOf("Refrigerator 1")>-1&&(null===(e=d.columns[1])||void 0===e?void 0:e.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(b&&G?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),G&&N.length>0&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:D.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},N.filter(function(e){return"a13comprcurrRefrigerator1"==e.sensedValue||"a14efmcurrRefrigerator1"==e.sensedValue||"a15prRefrigerator1"==e.sensedValue||"a16doorRefrigerator1"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),b&&n.createElement("a",{href:"#"+O+"/"+F+"/Alarms/OperationalAlarms/Device/"+T,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+O+"/"+F+"/Insights/Equipment/Graphs/CompressorControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",j),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 1"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",j," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",C," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",R," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:G&&(null===(t=y.columns)||void 0===t?void 0:t.length)>1?y:d,size:{height:300},axis:g,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),k.indexOf("Refrigerator 2")>-1&&(null===(a=h.columns[1])||void 0===a?void 0:a.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&G?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),G&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},N.filter(function(e){return"a13comprcurrRefrigerator2"==e.sensedValue||"a14efmcurrRefrigerator2"==e.sensedValue||"a15prRefrigerator2"==e.sensedValue||"a16doorRefrigerator2"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+O+"/"+F+"/Alarms/OperationalAlarms/Device/"+T,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{href:"#"+O+"/"+F+"/Insights/Equipment/Graphs/CompressorControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",j),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 2"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",j," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",C," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",R," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:G&&(null===(l=L.columns)||void 0===l?void 0:l.length)>1?L:h,size:{height:300},axis:f,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),k.indexOf("Refrigerator 1")>-1&&k.indexOf("Power Analog Inputs")>-1&&(null===(i=p.columns[1])||void 0===i?void 0:i.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&G?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),G&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},N.filter(function(e){return"poweranalogInput5"==e.sensedValue||"poweranalogInput6"==e.sensedValue||"poweranalogInput7"==e.sensedValue||"poweranalogInput8"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),A&&n.createElement("a",{href:"#"+O+"/"+F+"/Alarms/OperationalAlarms/Device/"+T,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+O+"/"+F+"/Insights/Equipment/Graphs/CompressorControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",j),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",j," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",C," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",R," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:G&&(null===(o=E.columns)||void 0===o?void 0:o.length)>1?E:p,size:{height:300},axis:v,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2517:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(675),r=a(12),u=a(771),m=a(20),c=a(683),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],graphDataAlarmPoint:{},selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm:!1},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){var t;return x(this,void 0,void 0,function(){var a,n,l,s,i,o,u,g,f,v,x,y=this;return V(this,function(V){switch(V.label){case 0:return a=this.state,n=a.graphData,l=a.selectedAlarmPoint,s=this.props,i=s.buildingName,o=s.InsightName,u=s.showAlarmPoints,Object(h.a)(!0),u&&!e?[3,3]:(g=[],f=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(r.g)(a.point)&&Object(r.g)(a.pointLabel)&&Object(m.M)(Object(r.g)(a.point),Object(r.g)(a.pointLabel))}g=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),g.filter(function(e){return Object(r.g)(e.monconDevice)==y.props.InsightName}).forEach(function(e){f.push({sensedValue:Object(r.g)(e.sensedValue),maximumExtremeValue:Object(r.g)(e.maximumExtremeValue),maximumNormalValue:Object(r.g)(e.maximumNormalValue),minimumExtremeValue:Object(r.g)(e.minimumExtremeValue),minimumNormalValue:Object(r.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,i,!1,0,50,null,null,o,null)];case 2:return v=V.sent(),x=(null===(t=n.columns[0])||void 0===t?void 0:t.length)>1?new Date(n.columns[0][1]):null,v=v.filter(function(e){return new Date(e.timeofalarm)>x}),this.setState({alarmSensedPoints:f,deviceAlarms:v},function(){if((null===f||void 0===f?void 0:f.length)>0&&n.columns.length>1){var e=l.sensedValue.length>1?l.sensedValue:f[f.length-1].sensedValue;y.selectAlarmPoint(e)}}),[3,4];case 3:this.selectAlarmPoint(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("mAmps_relay1"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"grey",Low:"grey","Relay 1 Amp":"red",High:"grey","High-High":"grey"}}}else if("mAmps_relay2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 2 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mAmps_relay3"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mAmps_relay4"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 4 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 1 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 2 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay3"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("nominal_src_volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[12].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[12],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint:i,graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.graphData,l=a.grid,s=a.alarmSensedPoints,i=a.axis1,r=a.selectedAlarmPoint,u=this.props.showAlarmPoints,m=new Date(e.timestamp),c=this.props.liveGraphRange;if(n.columns.length>1){n.columns[0].splice(1,1),n.columns[0].push(m),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.mAmps_relay1),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.mAmps_relay2),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.mAmps_relay3),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.mAmps_relay4),n.columns[5].splice(1,1),n.columns[5].push(null===e||void 0===e?void 0:e.power_Wt_relay1),n.columns[6].splice(1,1),n.columns[6].push(null===e||void 0===e?void 0:e.power_Wt_relay2),n.columns[7].splice(1,1),n.columns[7].push(null===e||void 0===e?void 0:e.power_Wt_relay3);var d=Object(o.a)(parseInt(null===e||void 0===e?void 0:e.v4relay_state));3==d.length?d="0"+d:2==d.length?d="00"+d:1==d.length&&(d="000"+d);var h=d[3],p=d[2],g=d[1],f=d[0];n.columns[8].splice(1,1),n.columns[8].push(h||"0"),n.columns[9].splice(1,1),n.columns[9].push(p||"0"),n.columns[10].splice(1,1),n.columns[10].push(g||"0"),n.columns[11].splice(1,1),n.columns[11].push(f||"0"),n.columns[12].splice(1,1),n.columns[12].push(null===e||void 0===e?void 0:e.nominal_src_volts),(m.getTime()-n.columns[0][2].getTime())/6e4>c&&n.columns[0].splice(1,1),i.x.tick.values[0]<n.columns[0][1]&&(i.x.tick.values.splice(0,1),l.x.lines.splice(0,1)),i.x.tick.values[2]&&i.x.tick.values[1].getTime()&&i.x.tick.values[2].getTime()-i.x.tick.values[1].getTime()<m.getTime()-i.x.tick.values[i.x.tick.values.length-1]&&(m.setSeconds(0),c>10&&m.setMinutes(m.getMinutes()-m.getMinutes()%5),i.x.tick.values.push(m),l.x.lines.push({value:m,class:"grid4"}));var v=null===m||void 0===m?void 0:m.toLocaleString();u?this.setState({grid:l,axis1:i,graphData:n,lastUpdatedAt:v},function(){var e=s.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),a=r.sensedValue.length>1?r.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint(a)}):this.setState({grid:l,axis1:i,graphData:n,lastUpdatedAt:v})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K,B,W,z=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,m=t.showAlarmPoints,c=this.state,d=c.grid,h=c.axis1,p=c.graphData,f=c.lastUpdatedAt,a?(v=Object(),[4,Object(i.x)(a,n)]):[3,4];case 1:return v=V.sent(),this.setState({Moncon:v}),[4,Object(o.h)(v.topic,l,s,p.columns.length>1)];case 2:return x=V.sent(),[4,Object(o.A)(v.deviceName)];case 3:if(w=V.sent(),y=[],w[0]?(L=w[0],E=Object(r.g)(L.relayNames),y=E.split(",")):(y.push("Relay 1"),y.push("Relay 2"),y.push("Relay 3"),y.push("Relay 4")),b=[y[0]+" Amp"],H=[y[1]+" Amp"],A=[y[2]+" Amp"],N=[y[3]+" Amp"],D=["Nom. Source Volts"],P=[y[0]+" Watts"],S=[y[1]+" Watts"],_=[y[2]+" Watts"],k=[y[0]+" State"],O=[y[1]+" State"],F=[y[2]+" State"],j=[y[3]+" State"],C=["x"],b.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(new Date(l)),x.length>0)for(R=0;R<x.length;R++)(null===(G=x[R])||void 0===G?void 0:G.mAmps_relay1)&&(b.push(G.mAmps_relay1),H.push(G.mAmps_relay2),A.push(G.mAmps_relay3),N.push(G.mAmps_relay4),D.push(G.nominal_src_volts),P.push(G.power_Wt_relay1),S.push(G.power_Wt_relay2),_.push(G.power_Wt_relay3),T=Object(o.a)(parseInt(G.v4relay_state)),C.push(new Date(G.timestamp)),3==T.length?T="0"+T:2==T.length?T="00"+T:1==T.length&&(T="000"+T),M=T[3],I=T[2],U=T[1],q=T[0],k.push(M||"0"),O.push(I||"0"),F.push(U||"0"),j.push(q||"0"));return f=x.length>0?null===(e=C[C.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",b.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(new Date(s)),p={x:"x",columns:[C,b,H,A,N,P,S,_,k,O,F,j,D]},h.y.label="Amp, W, On/Off, Volts",K=Object(u.a)(5,l,s),B="",K.length>1?(W=((new Date).getTime()-K[0].getTime())/1e3,B=(W/=3600)>24?"%m-%d %H:%M":W<.3?"%H:%M:%S":"%H:%M"):B="%H:%M:%S",d.x.lines=[],K.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),h.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.values=[0,50,100,150,200,250,300],h.y.max=300,h.y.min=0,h.x.tick.format=B,h.x.tick.values=K,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:d,axis1:h,graphData:p,loading:!1,lastUpdatedAt:f},function(){m&&z.changeAlarmStatus(!0)}),[3,5];case 4:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){m&&z.changeAlarmStatus(!0)}),V.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e,t=this,a=this.state,l=a.Moncon,i=a.loading,o=a.graphData,r=a.axis1,u=a.grid,m=a.lastUpdatedAt,c=a.equipmentsLabels,d=a.alarmSensedPoints,h=a.selectedAlarmPoint,p=a.graphDataAlarmPoint,g=a.indicateAlarm,f=this.props,v=f.instance,x=f.buildingName,V=f.space,w=f.floor,y=f.zone,L=f.showAlarmPoints,E=f.InsightName;return n.createElement("div",{className:"row col-md-12 device-graphs "+(g&&L?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),L&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",d&&d.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:h.sensedValue,onChange:function(e){t.selectAlarmPoint(e.target.value)}},d.map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),g&&n.createElement("a",{href:"#"+v+"/"+x+"/Alarms/OperationalAlarms/Device/"+E,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+v+"/"+x+"/Insights/Equipment/Graphs/RelayControl/"+(null===l||void 0===l?void 0:l.deviceName),target:"_blank",rel:"noreferrer noopener"},c.length>0&&c[0].rdfsLabel," ",V),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",V," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",w," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",y," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===c||void 0===c?void 0:c.map(function(e,t){return e.rdfsLabel+(t<c.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===l||void 0===l?void 0:l.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",m)),i?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:L&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:o,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(n.Component);t.a=y},2518:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(726)),s=a.n(l),i=a(668),o=a(690),r=a(771),u=a(20),m=a(683),c=a(12),d=a(744),h=a(117),p=a(695),g=a(120),f=a(713),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.C)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,g,f,v,x,y,L,E,b,H=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,o=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,g=this.props,f=g.buildingName,v=g.InsightName,x=g.showAlarmPoints,Object(h.a)(!0),x&&!e?[3,3]:(y=[],L=[],[4,Object(m.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(c.g)(a.point)&&Object(c.g)(a.pointLabel)&&Object(u.M)(Object(c.g)(a.point),Object(c.g)(a.pointLabel))}y=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),y.filter(function(e){return Object(c.g)(e.monconDevice)==H.props.InsightName}).forEach(function(e){L.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,f,!1,0,50,null,null,v,null)];case 2:return E=V.sent(),b=new Date(a.columns[0][1]),E=E.filter(function(e){return new Date(e.timeofalarm)>b}),this.setState({alarmSensedPoints:L,deviceAlarms:E},function(){if((null===L||void 0===L?void 0:L.length)>0&&a.columns.length>1){var e=L.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";H.selectAlarmPoint1(t);var u=L.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";H.selectAlarmPoint2(m);var c=L.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";H.selectAlarmPoint3(d);var h=L.filter(function(e){return"Freq"==e.sensedValue}),p=i.sensedValue.length>1?i.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";H.selectAlarmPoint4(p);var g=L.filter(function(e){return"EnergySumNR"==e.sensedValue}),f=o.sensedValue.length>1?o.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";H.selectAlarmPoint5(f);var v=L.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";H.selectAlarmPoint6(x)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"PowerA"==e.sensedValueKey||"PowerB"==e.sensedValueKey||"PowerB"==e.sensedValueKey||"PowerC"==e.sensedValueKey||"PowerSum"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("PowerA"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerB"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerSum"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",PowerSum:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"VoltAB"==e.sensedValueKey||"VoltAC"==e.sensedValueKey||"VoltAB"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("VoltAB"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts AB":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltBC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts BC":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltAC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts AC":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"VoltA"==e.sensedValueKey||"VoltB"==e.sensedValueKey||"VoltC"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("VoltA"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltB"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts C":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"Freq"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("Freq"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Freq:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"EnergySumNR"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("EnergySumNR"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EnergySumNR:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:i,graphDataAlarmPoint5:e,indicateAlarm5:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:o,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"EnergyPosSumNR"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("EnergyPosSumNR"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EnergyPosSumNR:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:i,graphDataAlarmPoint6:e,indicateAlarm6:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:o,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t=this,a=this.state,n=a.graphData,l=a.graphData2,s=a.graphData3,i=a.graphData4,o=a.graphData5,r=a.graphData6,u=a.axis1,m=a.grid,c=a.alarmSensedPoints,d=a.selectedAlarmPoint1,h=a.selectedAlarmPoint2,p=a.selectedAlarmPoint3,g=a.selectedAlarmPoint4,f=a.selectedAlarmPoint5,v=a.selectedAlarmPoint6,x=this.props.showAlarmPoints,V=new Date(e.timestamp),w=this.props.liveGraphRange;if(n.columns.length>1){n.columns[0].splice(1,1),n.columns[0].push(V),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.PowerA),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.PowerB),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.PowerC),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.PowerSum),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.VoltAB),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.VoltAC),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.VoltBC),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.VoltA),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.VoltB),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.VoltC),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.Freq),o.columns[1].splice(1,1),o.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.EnergySumNR)),r.columns[1].splice(1,1),r.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.EnergyPosSumNR)),(V.getTime()-n.columns[0][2].getTime())/6e4>w&&n.columns[0].splice(1,1),u.x.tick.values[0]<n.columns[0][1]&&(u.x.tick.values.splice(0,1),m.x.lines.splice(0,1)),u.x.tick.values[2]&&u.x.tick.values[1].getTime()&&u.x.tick.values[2].getTime()-u.x.tick.values[1].getTime()<V.getTime()-u.x.tick.values[u.x.tick.values.length-1]&&(V.setSeconds(0),w>10&&V.setMinutes(V.getMinutes()-V.getMinutes()%5),u.x.tick.values.push(V),m.x.lines.push({value:V,class:"grid4"}));var y=null===V||void 0===V?void 0:V.toLocaleString();x?this.setState({grid:m,axis1:u,graphData:n,graphData2:l,graphData3:s,graphData4:i,graphData5:o,graphData6:r,lastUpdatedAt:y},function(){var e=c.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}),a=d.sensedValue.length>1?d.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";t.selectAlarmPoint1(a);var n=c.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}),l=h.sensedValue.length>1?h.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";t.selectAlarmPoint2(l);var s=c.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}),i=p.sensedValue.length>1?p.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";t.selectAlarmPoint3(i);var o=c.filter(function(e){return"Freq"==e.sensedValue}),r=g.sensedValue.length>1?g.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";t.selectAlarmPoint4(r);var u=c.filter(function(e){return"EnergySumNR"==e.sensedValue}),m=f.sensedValue.length>1?f.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";t.selectAlarmPoint5(m);var x=c.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}),V=v.sensedValue.length>1?v.sensedValue:(null===x||void 0===x?void 0:x.length)>0?x[x.length-1].sensedValue:"";t.selectAlarmPoint6(V)}):this.setState({grid:m,axis1:u,graphData:n,graphData2:l,graphData3:s,graphData4:i,graphData5:o,graphData6:r,lastUpdatedAt:y})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,E,b,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K,B,W,z,Z,Y,J=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.axis4,v=m.axis5,x=m.axis6,w=m.graphData,y=m.graphData2,L=m.graphData3,E=m.graphData4,b=m.graphData5,H=m.graphData6,A=m.lastUpdatedAt,a?(N=Object(),[4,Object(i.x)(a,n)]):[3,3];case 1:return N=V.sent(),this.setState({Moncon:N}),D=N.topic.split(","),[4,Object(o.m)(D[0],l,s,w.columns.length>1)];case 2:return P=V.sent(),_=["EnergyPOSSUM"],k=["EnergySumNR"],O=["EnergyPosSumNR"],F=["PowerSum"],j=["Power A"],C=["Power B"],R=["Power C"],G=["Volts A"],T=["Volts B"],M=["Volts C"],I=["VoltsAvgLL"],U=["Volts AB"],q=["Volts AC"],K=["Volts BC"],B=["Freq"],W=["x"],(S=["EnerygySum"]).push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(new Date(l)),P.length>0&&P.forEach(function(e){e&&(S.push(e.EnergySum),_.push(e.EnergyPosSum),k.push(e.EnergySumNR),O.push(e.EnergyPosSumNR),F.push(e.PowerSum),j.push(e.PowerA),C.push(e.PowerB),R.push(e.PowerC),G.push(e.VoltA),T.push(e.VoltB),M.push(e.VoltC),I.push(e.VoltAvgLL),U.push(e.VoltAB),q.push(e.VoltAC),K.push(e.VoltBC),B.push(e.Freq),W.push(new Date(e.timestamp)))}),A=P.length>0?null===(e=W[W.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(new Date(s)),w={x:"x",columns:[W,j,C,R,F]},y={x:"x",columns:[W,U,K,q]},L={x:"x",columns:[W,G,T,M]},E={x:"x",columns:[W,B]},b={x:"x",columns:[W,k]},H={x:"x",columns:[W,O]},d.y.label="Watts",h.y.label="Volts",p.y.label="Volts",f.y.label="Hz",v.y.label="MWh",x.y.label="MWh",z=Object(r.a)(5,l,s),Z="",z.length>1?(Y=((new Date).getTime()-z[0].getTime())/1e3,Z=(Y/=3600)>24?"%m-%d %H:%M":Y<.3?"%H:%M:%S":"%H:%M"):Z="%H:%M:%S",c.x.lines=[],z.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(0)},p.y.tick.format=function(e){return parseFloat(e).toFixed(0)},f.y.tick.format=function(e){return parseFloat(e).toFixed(1)},v.y.tick.format=function(e){return parseFloat(e).toFixed(1)},x.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,1e4,2e4,3e4,4e4],h.y.tick.values=[0,50,100,150,200,250],p.y.tick.values=[0,50,100,150],f.y.tick.values=[0,20,40,60,80],v.y.tick.values=[0,2e4,4e4,6e4,8e4,1e5],x.y.tick.values=[0,2e4,4e4,6e4,8e4,1e5],d.y.max=4e4,d.y.min=0,h.y.max=250,h.y.min=0,p.y.max=150,p.y.min=0,f.y.max=80,f.y.min=0,v.y.max=1e5,v.y.min=0,x.y.max=1e5,x.y.min=0,d.x.tick.format=Z,h.x.tick.format=Z,p.x.tick.format=Z,f.x.tick.format=Z,v.x.tick.format=Z,x.x.tick.format=Z,d.x.tick.values=z,h.x.tick.values=z,p.x.tick.values=z,f.x.tick.values=z,v.x.tick.values=z,x.x.tick.vawlues=z,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,axis4:f,axis5:v,axis6:x,graphData:w,graphData2:y,graphData3:L,graphData4:E,graphData5:b,graphData6:H,lastUpdatedAt:A,loading:!1},function(){u&&J.changeAlarmStatus(!0)}),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){u&&J.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a,l,i,o,r=this,u=this.state,m=u.Moncon,c=u.loading,d=u.graphData,h=u.graphData2,p=u.graphData3,g=u.graphData4,f=u.graphData5,v=u.graphData6,x=u.axis1,V=u.axis2,w=u.axis3,y=u.axis4,L=u.axis5,E=u.axis6,b=u.grid,H=u.lastUpdatedAt,A=u.equipmentsLabels,N=u.graphDataAlarmPoint1,D=u.graphDataAlarmPoint2,P=u.graphDataAlarmPoint3,S=u.graphDataAlarmPoint4,_=u.graphDataAlarmPoint5,k=u.graphDataAlarmPoint6,O=u.indicateAlarm1,F=u.indicateAlarm2,j=u.indicateAlarm3,C=u.indicateAlarm4,R=u.indicateAlarm5,G=u.indicateAlarm6,T=u.alarmSensedPoints,M=u.selectedAlarmPoint1,I=u.selectedAlarmPoint2,U=u.selectedAlarmPoint3,q=u.selectedAlarmPoint4,K=u.selectedAlarmPoint5,B=u.selectedAlarmPoint6,W=this.props,z=W.graphsList,Z=W.instance,Y=W.buildingName,J=W.space,$=W.floor,Q=W.zone,X=W.showAlarmPoints,ee=W.InsightName;return n.createElement(n.Fragment,null,z.indexOf("Power")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(O&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:M.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},T.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),O&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Power"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(e=N.columns)||void 0===e?void 0:e.length)>1?N:d,size:{height:300},axis:x,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),z.indexOf("Phase Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(F&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:I.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},T.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),F&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Phase Voltage"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(t=D.columns)||void 0===t?void 0:t.length)>1?D:h,size:{height:300},axis:V,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(j&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:U.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},T.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),j&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," "))," ","Voltage",n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(a=P.columns)||void 0===a?void 0:a.length)>1?P:p,size:{height:300},axis:w,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Frequency")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(C&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:q.sensedValue,onChange:function(e){r.selectAlarmPoint4(e.target.value)}},T.filter(function(e){return"Freq"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),C&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Frequency"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(l=S.columns)||void 0===l?void 0:l.length)>1?S:g,size:{height:300},axis:y,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Energy Sum Resettable")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(R&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:K.sensedValue,onChange:function(e){r.selectAlarmPoint5(e.target.value)}},T.filter(function(e){return"EnergySumNR"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),R&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Energy Sum Resettable"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(i=_.columns)||void 0===i?void 0:i.length)>1?_:f,size:{height:300},axis:L,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Positive Energy Sum Non-resettable")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(G&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:B.sensedValue,onChange:function(e){r.selectAlarmPoint6(e.target.value)}},T.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),G&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",J),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Positive Energy Sum Non-resettable"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",J," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",$," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(o=k.columns)||void 0===o?void 0:o.length)>1?k:v,size:{height:300},axis:E,grid:b,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},771:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e,t,a){for(var n=new Date(t.setSeconds(0)),l=new Date(a.setSeconds(0)),s=[],i=l.getTime()-n.getTime(),o=i/1e3/3600,r=0;r<e+1;r++){var u=void 0;if(0===r)o>48?(n.setSeconds(0),n.setMinutes(0),n.setHours(n.getHours()+(24-n.getHours()%24))):o>24?(n.setSeconds(0),n.setMinutes(0),n.setHours(n.getHours()+(10-n.getHours()%10))):o>1?(n.setSeconds(0),n.setMinutes(n.getMinutes()+(10-n.getMinutes()%10))):o>.1?(n.setSeconds(0),n.setMinutes(n.getMinutes()+(10-n.getMinutes()%10))):o>.1&&(n.setSeconds(0),n.setMinutes(n.getMinutes()+(5-n.getMinutes()%5))),u=n;else if(o>72){var m=Math.ceil(o);m+=360-m%360,(u=new Date(s[s.length-1].getTime()+6e5*m)).setSeconds(0)}else if(o>24){m=Math.ceil(o);m+=60-m%60,(u=new Date(s[s.length-1].getTime()+6e5*m)).setSeconds(0)}else o>1?(u=new Date(s[s.length-1].getTime()+Math.ceil(o)%60*6e5)).setSeconds(0):o>.2?(u=new Date(s[s.length-1].getTime()+6e5)).setSeconds(0):u=new Date(s[s.length-1].getTime()+Math.ceil(i/e));u!=s[s.length-1]&&u<=l&&s.push(u)}return s}}});