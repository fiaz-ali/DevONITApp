webpackJsonp([60,91],{1031:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=(n.n(i),n(998)),a=n(87),r=n(605),s=n(17),c=n(18),l=n(598),u=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=this&&this.__assign||function(){return(p=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},h=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,s)}c((i=i.apply(t,e||[])).next())})},f=this&&this.__generator||function(t,e){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},d=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i},m=function(t){function e(e){var n=t.call(this,e)||this;return n.state={_allPoints:[],_plannedPoints:[],pointObj:Object(),isEdit:!1,isView:!1,isDeviceForm:!1,ImportFileData:[],point:Object()},n.handlePointChange=n.handlePointChange.bind(n),n._fetchPoints=n._fetchPoints.bind(n),n.openEditForm=n.openEditForm.bind(n),n.closePointFormDailoge=n.closePointFormDailoge.bind(n),n.save=n.save.bind(n),n.handlePointForm=n.handlePointForm.bind(n),n.setPointState=n.setPointState.bind(n),n}return u(e,t),e.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return this.props.buildingName?(this.props.asset?(t={point:"",tag:"",pointId:"",notes:"",isSensed:!1,unit:"",pointDevice:"",pointType:"Sensor",pointLabel:"",isExisting:!0,asset:this.props.asset,space:"",s3FileName:"",commissioningDate:"",installDate:"",link1:"",link2:"",monconDevice:"",sinkPoint:"",sinkPointDescription:"",softwarePointDescription:"",sourcePoint:"",sourcePointDescription:"",webhook:"",component:"",floor:"",assetLabel:"",componentLabel:"",floorLabel:"",spaceLabel:"",pointState:""},this.setState({pointObj:t})):(t={point:"",tag:"",pointId:"",notes:"",isSensed:!1,unit:"",pointDevice:"",pointType:"Sensor",pointLabel:"",isExisting:!0,asset:"",space:"",s3FileName:"",commissioningDate:"",installDate:"",link1:"",link2:"",monconDevice:"",sinkPoint:"",sinkPointDescription:"",softwarePointDescription:"",sourcePoint:"",sourcePointDescription:"",webhook:"",component:"",floor:"",assetLabel:"",componentLabel:"",floorLabel:"",spaceLabel:"",pointState:""},this.setState({pointObj:t})),[4,this._fetchPoints()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.closePointFormDailoge=function(t,e){var n=this.state.pointObj;n.pointDevice=e?e.monitoringControl:n.pointDevice,this.setState({isDeviceForm:t,pointObj:n})},e.prototype.save=function(){},e.prototype._fetchPoints=function(){return h(this,void 0,void 0,function(){var t,e,n,i,o,l,u,p;return f(this,function(h){switch(h.label){case 0:return t=this.props,e=t.asset,n=t.buildingName,i=t.equipmentName,o=t.spaceName,l=[],u=[],Object(a.a)(!0),e&&e.length>0?[4,Object(r.h)(n,null,e).then(function(t){if(t&&t.length>0)for(var e=0;e<t.length;e++){var n=t[e];Object(s.g)(n.point)&&Object(s.g)(n.pointLabel)&&Object(c.u)(Object(s.g)(n.point),Object(s.g)(n.pointLabel))}l=d(t),u=d(t)}).catch(function(t){return t})]:[3,2];case 1:return h.sent(),[3,4];case 2:return[4,Object(r.h)(n).then(function(t){l=d(t),u=d(t)}).catch(function(t){return t})];case 3:h.sent(),h.label=4;case 4:return Object(a.a)(!1),p=l&&l.filter(function(t){return Object(s.g)(t.asset)==i}),(i||o)&&(l=p.length>0?p:l&&l.filter(function(t){return Object(s.g)(t.space)==o}),this.setState({_allPoints:d(l),_plannedPoints:d(l)})),i||o||this.setState({_allPoints:d(l),_plannedPoints:d(u)}),[2]}})})},e.prototype.handlePointChange=function(t){this.setState({pointObj:t})},e.prototype.openEditForm=function(t){var e=this.props,n=e.buildingName,i=e.instance;t?this.setState({isEdit:!1,isView:!0},function(){window.location.hash=i+"/"+n+"/PointForm"}):this.setState({isEdit:!0,isView:!1},function(){window.location.hash=i+"/"+n+"/PointForm"})},e.prototype.handlePointForm=function(t){return h(this,void 0,void 0,function(){var e,n,i,o,a,c;return f(this,function(l){switch(l.label){case 0:return e=[],n=this.state.point,i=t.target.name,t.target.value&&""!=t.target.value?(n[""+i]=t.target.value,[4,Object(r.h)(this.props.buildingName)]):[3,2];case 1:if(o=l.sent())for(a=0;a<o.length;a++)o&&o[a]&&o.length>0&&o[a]&&o[a].pointState&&Object(s.g)(o[a].pointState)&&Object(s.g)(o[a].pointState)==n.pointState&&(e||(e=[]),c=o[a],e.push(p({},c)));return e||e.length>0?this.setState({point:n,_plannedPoints:e}):this.setState({point:n,_plannedPoints:[]}),[3,3];case 2:this.setState({point:Object(),_plannedPoints:this.state._allPoints}),l.label=3;case 3:return[2]}})})},e.prototype.setPointState=function(){return h(this,void 0,void 0,function(){var t,e,n,i,o;return f(this,function(a){for(t=this.state._allPoints,e=[],n=this.state.point,i=0;i<t.length;i++)t&&t[i]&&t.length>0&&t[i]&&t[i].pointState&&Object(s.g)(t[i].pointState)&&Object(s.g)(t[i].pointState)==n.pointState&&(e||(e=[]),o=t[i],e.push(o));return e&&e.length,this.setState({_plannedPoints:e}),[2]})})},e.prototype.render=function(){var t=this,e=this.props,n=e.buildingName,a=e.instance,r=this.state,s=r._plannedPoints,c=r.point;return i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-4 col-xs-12"},i.createElement("div",{className:"col-md-4 col-xs-12 px-0"},i.createElement("h6",{style:{marginTop:"10px"}},"Point State:")),i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){return t.handlePointForm(e)},value:c.pointState?c.pointState:""},i.createElement("option",{value:""},"Select Point State"),i.createElement("option",{value:"Planned"},"Planned"),i.createElement("option",{value:"Ordered"},"Ordered"),i.createElement("option",{value:"InInventory"},"In Inventory"),i.createElement("option",{value:"ReleasedForInstall"},"Released for Install"),i.createElement("option",{value:"Installed"},"Installed"),i.createElement("option",{value:"Testing"},"Testing"),i.createElement("option",{value:"Existing"},"Existing"),i.createElement("option",{value:"Retired"},"Retired"),i.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),i.createElement("option",{value:"Sold"},"Sold")))),i.createElement("div",{className:"col-md-8 col-xs-12"},i.createElement("div",{className:"dropdown pull-right"},i.createElement(l.a,{filename:"PointsList",data:s,ElementID:"PointsList"})),i.createElement("button",{type:"button",className:"btn btn-dark pull-right",style:{marginLeft:"5px"},onClick:function(){window.location.hash=a+"/"+n+"/AddMultiplePoints"}},i.createElement("i",{className:"fa fa-plus"}),"Add Multiple Points"),i.createElement("div",{className:"pull-right"},i.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){window.location.hash=a+"/"+n+"/PointForm"}},i.createElement("i",{className:"fa fa-plus"})," Create New Point ")),"\xa0")),i.createElement("div",{className:"row no-padding",id:"PointsList"},i.createElement("div",{className:"padding-10 small"},i.createElement(o.a,{instance:a,buildingName:n,points:s,handlePointChange:this.handlePointChange,_fetchPoints:this._fetchPoints,openEditDialog:this.openEditForm,isPlanned:c.pointState}))))},e}(i.Component);e.default=m},1495:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=(n.n(i),n(656)),a=n(605),r=n(1031),s=n(87),c=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(r,s)}c((i=i.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=function(t){function e(e){var n=t.call(this,e)||this;return n.state={_allPoints:[],_plannedPoints:[],pointObj:{point:"",tag:"",pointId:"",notes:"",isSensed:!1,unit:"",pointDevice:"",pointType:"Sensor",pointLabel:"",isExisting:!0,asset:"",space:"",s3FileName:"",commissioningDate:"",installDate:"",link1:"",link2:"",monconDevice:"",sinkPoint:"",sinkPointDescription:"",softwarePointDescription:"",sourcePoint:"",sourcePointDescription:"",webhook:"",component:"",floor:"",assetLabel:"",componentLabel:"",floorLabel:"",spaceLabel:"",pointNumber:"",pointState:""},isEdit:!1},n.handlePointChange=n.handlePointChange.bind(n),n._fetchPoints=n._fetchPoints.bind(n),n.openEditForm=n.openEditForm.bind(n),n.savePoint=n.savePoint.bind(n),n}return c(e,t),e.prototype.componentDidMount=function(){return l(this,void 0,void 0,function(){return u(this,function(t){return this.props.buildingName,[2]})})},e.prototype._fetchPoints=function(){return l(this,void 0,void 0,function(){var t=this;return u(this,function(e){switch(e.label){case 0:return Object(s.a)(!0),[4,Object(a.h)(this.props.buildingName).then(function(e){t.setState({_allPoints:e})}).catch(function(t){return t})];case 1:return e.sent(),Object(s.a)(!1),[2]}})})},e.prototype.handlePointChange=function(t){this.setState({pointObj:t})},e.prototype.openEditForm=function(){this.setState({isEdit:!0},function(){document.getElementById("btnPointForm").click()})},e.prototype.savePoint=function(){return l(this,void 0,void 0,function(){var t,e,n,i;return u(this,function(o){switch(o.label){case 0:return t=this.state,e=t.pointObj,n=t.isEdit,i=this.props.buildingName,e?(Object(s.a)(!0),[4,Object(a.d)(e,i,n)]):[3,3];case 1:return o.sent(),[4,this._fetchPoints()];case 2:o.sent(),Object(s.a)(!1),o.label=3;case 3:return[2]}})})},e.prototype.render=function(){var t=this.props,e=t.buildingName,n=t.instance,a=t.entityName,s=t.infoEntity;return i.createElement("div",{className:""},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{workFlowSpaceList:this.props.workFlowSpaceList,inspectionOntology:"",instance:this.props.instance,buildingName:e,tabName:s,showComponentButton:"Equip"==s,itemName:a,showAuditTypes:!0,showBIMButtons:!0}))),i.createElement("div",{className:"row"},i.createElement(r.default,{buildingName:e,instance:n,asset:a}))))},e}(i.Component);e.default=p}});