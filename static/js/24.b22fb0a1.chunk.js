webpackJsonp([24],{1034:function(e,t,a){"use strict";var n=a(3),c=(a.n(n),a(934)),l=a(49),r=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),i=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isSelected:!1},a.handleCheckBox=a.handleCheckBox.bind(a),a}return r(t,e),t.prototype.componentDidMount=function(){},t.prototype.handleCheckBox=function(e){this.setState({isSelected:e}),this.props.pricePackage.autoRenewal=e},t.prototype.render=function(){var e=this,t=this.props,a=t.pricePackage,r=t.showContinuebtn,i=t.showAutoRenewChk,o=(this.state,new l.b),s=c.a.find(function(e){return e.value==a.module});return n.createElement("div",{className:"content"},n.createElement("div",{className:""},n.createElement("div",{className:"card dataCard",style:{padding:"10px",textAlign:"center",margin:"0px"}},n.createElement("img",{src:o.GetSignedURL(l.a.DOCUMENT(),a.imageName),className:"card-img-top img-fluid",style:{width:"100%",height:"160px"},alt:"..."}),n.createElement("div",{className:"card-body"},n.createElement("h4",{className:"card-title"},a.title)),n.createElement("ul",{className:"list-group list-group-flush"},n.createElement("li",{className:"list-group-item"},"Module ",n.createElement("span",{className:"text-muted text-warning"},n.createElement("b",null,s&&s.text))),n.createElement("li",{className:"list-group-item"},"Period ",a&&a.period," days"),n.createElement("li",{className:"list-group-item"},"Access ",a&&a.access)),n.createElement("div",{className:""},i&&n.createElement("div",{className:"card"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12",style:{display:"inline-flex"}},n.createElement("div",{className:"col-md-4 padding-10"},n.createElement("input",{type:"checkbox",className:"form-check-input pull-right",id:"check1",name:"check",checked:this.state.isSelected,onChange:function(t){r&&e.handleCheckBox(t.target.checked)}})),n.createElement("div",{className:"col-md-8 padding-10"},n.createElement("label",{className:"",htmlFor:"check1",style:{float:"left"}},"Auto renewal"))))),r&&n.createElement("button",{className:"btn btn-success",onClick:function(){e.props.onContinueClicked(a)}},"Continue")))))},t}(n.Component);t.a=i},1035:function(e,t,a){"use strict";t.c=function(e,t){return r(this,void 0,void 0,function(){return i(this,function(a){switch(a.label){case 0:return[4,Object(n.f)({model:e,isEdit:t},n.a.PRICING.SavePricePackage,c.b.PRICING).then(function(){Object(l.b)("Updated Successfully")})];case 1:return[2,a.sent()]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(n.e)({module:e},n.a.PRICING.GetPricePackages,c.b.PRICING)];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,Object(n.f)({pricePackage:e},n.a.PRICING.DeletePricePackage,c.b.PRICING).then(function(){Object(l.b)("Price Package Deleted Successfully.")}).catch(function(e){Object(l.a)("Error occured while deleting Package.")})];case 1:return[2,t.sent()]}})})};var n=a(18),c=a(22),l=a(30),r=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(c,l){function r(e){try{o(n.next(e))}catch(e){l(e)}}function i(e){try{o(n.throw(e))}catch(e){l(e)}}function o(e){e.done?c(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(r,i)}o((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var a,n,c,l,r={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(c=2&l[0]?n.return:l[0]?n.throw||((c=n.return)&&c.call(n),0):n.next)&&!(c=c.call(n,l[1])).done)return c;switch(n=0,c&&(l=[2&l[0],c.value]),l[0]){case 0:case 1:c=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(c=(c=r.trys).length>0&&c[c.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!c||l[1]>c[0]&&l[1]<c[3])){r.label=l[1];break}if(6===l[0]&&r.label<c[1]){r.label=c[1],c=l;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(l);break}c[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],n=0}finally{a=c=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}},1827:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),c=(a.n(n),a(934)),l=a(1034),r=a(600),i=a(697),o=a(22),s=a(99),d=a(1035),u=a(49),m=a(29),p=a(21),f=a(605),h=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(c,l){function r(e){try{o(n.next(e))}catch(e){l(e)}}function i(e){try{o(n.throw(e))}catch(e){l(e)}}function o(e){e.done?c(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(r,i)}o((n=n.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var a,n,c,l,r={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(c=2&l[0]?n.return:l[0]?n.throw||((c=n.return)&&c.call(n),0):n.next)&&!(c=c.call(n,l[1])).done)return c;switch(n=0,c&&(l=[2&l[0],c.value]),l[0]){case 0:case 1:c=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(c=(c=r.trys).length>0&&c[c.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!c||l[1]>c[0]&&l[1]<c[3])){r.label=l[1];break}if(6===l[0]&&r.label<c[1]){r.label=c[1],c=l;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(l);break}c[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],n=0}finally{a=c=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},b=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),c=0;for(t=0;t<a;t++)for(var l=arguments[t],r=0,i=l.length;r<i;r++,c++)n[c]=l[r];return n},E=function(e){function t(t){var a=e.call(this,t)||this;return a.state={packages:[],filteredPackages:[],currentPackage:Object(),files:[],isEdit:!1,pakageDeleteIndex:""},a.handlefileAttached=a.handlefileAttached.bind(a),a.onchangeHandler=a.onchangeHandler.bind(a),a.addPackage=a.addPackage.bind(a),a.deletePackage=a.deletePackage.bind(a),a.filterPackages=a.filterPackages.bind(a),a.fetchPricePackages=a.fetchPricePackages.bind(a),a}return h(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return[4,this.fetchPricePackages()];case 1:return e.sent(),[2]}})})},t.prototype.fetchPricePackages=function(){return g(this,void 0,void 0,function(){var e,t=this;return v(this,function(a){switch(a.label){case 0:return Object(s.a)(!0),e=[],[4,Object(d.b)().then(function(a){return g(t,void 0,void 0,function(){var t,n;return v(this,function(c){for(t=0;t<a.length;t++)(n=Object()).access=Object(p.g)(a[t].access),n.imageName=Object(p.g)(a[t].imageName),n.module=Object(p.g)(a[t].module),n.ontology=Object(p.g)(a[t].ontology),n.period=Object(p.g)(a[t].period),n.price=Object(p.g)(a[t].price),n.title=Object(p.g)(a[t].title),n.stripePlanId=Object(p.g)(a[t].stripePlanId),n.autoRenewal="true"==Object(p.g)(a[t].autoRenewal),e.push(n);return this.setState({packages:e,filteredPackages:e}),[2]})})}).catch(function(e){return e})];case 1:return a.sent(),Object(s.a)(!1),[2]}})})},t.prototype.handlefileAttached=function(e){var t=this.state.currentPackage;if(e.length>0){t||(t={ontology:"",module:"",title:"",price:"",period:"",access:"",imageName:"",stripePlanId:"",autoRenewal:!1});for(var a=0;a<e.length;a++){var n=e[a].name.split(".").pop(),c=(this.props.buildingName?this.props.buildingName:"")+"_"+Object(m.n)(20)+"."+n.toLowerCase();t.imageName=c}Object(o.g)(e),this.setState({files:e,currentPackage:t},function(){})}},t.prototype.onchangeHandler=function(e){var t=this.state.currentPackage;t[e.target.name]=e.target.value,this.setState({currentPackage:t})},t.prototype.addPackage=function(){return g(this,void 0,void 0,function(){var e,t,a,n,c,l,r,i=this;return v(this,function(m){switch(m.label){case 0:return e=this.state,t=e.isEdit,a=e.currentPackage,console.log(this.state.files),a?(Object(s.a)(!0),[4,Object(d.c)(a,t).then(function(e){i.fetchPricePackages()}).catch(function(e){console.log("error: ",e)})]):[3,2];case 1:if(m.sent(),n=new u.b,(c=Object(o.d)())&&c.length)for(l=0;l<c.length;l++)(r=c[l])||(r=c[l].file),r&&n.UploadFile(u.a.DOCUMENT(),a.imageName,r);Object(s.a)(!1),m.label=2;case 2:return[2]}})})},t.prototype.deletePackage=function(e){return g(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,Object(d.a)(e)];case 1:return t.sent(),[4,this.fetchPricePackages()];case 2:return t.sent(),[2]}})})},t.prototype.filterPackages=function(e){var t=this.state.packages,a=[];a=b(""!=e?t.filter(function(t){return t.module==e}):t),this.setState({filteredPackages:a})},t.prototype.render=function(){var e=this,t=(this.props,this.state),a=t.currentPackage,o=t.filteredPackages,s=t.pakageDeleteIndex,d=new u.b;return n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"content"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12 "},n.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){e.setState({isEdit:!1,currentPackage:{access:"",imageName:"",module:"",ontology:"",period:"",price:"",title:"",stripePlanId:"",autoRenewal:!1},files:[]}),document.getElementById("pricebtn").click()}},n.createElement("i",{className:"fa fa-plus"}),n.createElement("span",null,"Add New Package"))," \xa0")),n.createElement("br",null),n.createElement("div",{className:"card"},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"row",style:{padding:"10px"}},n.createElement("div",{className:"col-md-4 dataCard no-padding col-xs-12"},n.createElement("div",{className:"card",style:{marginBottom:"1px"}},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-3 col-xs-3 padding-10"},"Module:"),n.createElement("div",{className:"col-md-9 no-padding col-xs-9"},n.createElement("select",{className:"form-control",onChange:function(t){e.filterPackages(t.target.value)}},n.createElement("option",{value:""},"Select Module"),c.a.map(function(e){return n.createElement("option",{value:e.value},e.text)})))))))),n.createElement("div",{className:"row padding-10"},o&&o.length>0&&o.map(function(t,a){return n.createElement("div",{className:"col-md-3",key:a,style:{padding:"10px"}},n.createElement("div",{className:"col-md-12 padding-10",onClick:function(){e.setState({currentPackage:t}),document.getElementById("pricebtn").click()}},n.createElement(l.a,{pricePackage:t,showContinuebtn:!1,showAutoRenewChk:!1,onContinueClicked:function(e){}})),n.createElement("div",{className:"col-md-12 padding-10",style:{top:"-45px"}},n.createElement("div",{className:"col-md-6"},n.createElement("button",{className:"btn btn-xs btn-success btn-fill pull-right",title:"Edit Package",onClick:function(a){e.setState({currentPackage:t,isEdit:!0}),document.getElementById("pricebtn").click()}},n.createElement("i",{className:"fa fa-edit"}),"Edit")),n.createElement("div",{className:"col-md-6"},n.createElement("button",{className:"btn btn-xs btn-danger btn-fill",title:"Delete Package",onClick:function(){var a=e.state.pakageDeleteIndex;a=t.ontology,e.setState({pakageDeleteIndex:a},function(){document.getElementById("btnConfirmDelete").click()})}},n.createElement("i",{className:"fa fa-trash"}),"Delete"))))})),n.createElement("button",{id:"btnConfirmDelete",style:{display:"none"},"data-toggle":"modal","data-target":"#packageDelete"},"."),n.createElement(f.a,{instance:this.props.instance,id:"packageDelete",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Plan?",heading:"Confirm...",onConfirmButtonClick:function(){e.deletePackage(s)}}),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("button",{id:"pricebtn",className:"btn btn-default",style:{display:"none"},"data-toggle":"modal","data-target":"#price1"}),n.createElement(r.a,{id:"price1",heading:a.title,saveButtonText:"Save",isEditForm:!0,onSaveButtonClick:function(){e.addPackage()},disableSaveButton:!1,showSaveButton:!0},n.createElement("div",{className:"content"},n.createElement("div",{className:""},n.createElement("div",{className:"padding-10 dataCard"},n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 padding-10"},n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"col-md-3 padding-10"},"Module:"),n.createElement("div",{className:"col-md-9"},n.createElement("select",{className:"form-control",name:"module",value:a.module,onChange:function(t){e.onchangeHandler(t)}},n.createElement("option",{value:""},"Select Module"),c.a.map(function(e){return n.createElement("option",{value:e.value},e.text)})))),n.createElement("div",{className:"col-md-4"},a.stripePlanId),n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"col-md-3 padding-10"},"Title: "),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"text",name:"title",value:a.title,className:"form-control",onChange:function(t){e.onchangeHandler(t)}})," "))),n.createElement("div",{className:"col-md-12 padding-10"},n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"col-md-3 padding-10"},"Price($): "),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"number",value:a.price,name:"price",className:"form-control",onChange:function(t){e.onchangeHandler(t)}})," "))),n.createElement("div",{className:"col-md-12 padding-10"},n.createElement("div",{className:"col-md-4"},n.createElement("div",{className:"col-md-3 padding-10"},"Period: "),n.createElement("div",{className:"col-md-9"},n.createElement("input",{type:"number",value:a.period,name:"period",placeholder:"i.e No of days",className:"form-control",onChange:function(t){e.onchangeHandler(t)}})," ")),n.createElement("div",{className:"col-md-8"},n.createElement("div",{className:"col-md-3 padding-10"},"Access: "),n.createElement("div",{className:"col-md-9 padding-10"},n.createElement("input",{type:"Radio",value:"Single User",id:"r1",name:"access",className:"form-check-input",checked:"Single User"==a.access,onChange:function(t){e.onchangeHandler(t)}}),n.createElement("label",{className:"form-check-label",htmlFor:"r1"},"Single User")," \xa0 \xa0",n.createElement("input",{type:"Radio",value:"Whole Building",id:"r2",name:"access",className:"form-check-input",checked:"Whole Building"==a.access,onChange:function(t){e.onchangeHandler(t)}}),n.createElement("label",{className:"form-check-label",htmlFor:"r2"},"Whole Building")))),n.createElement("div",{className:"col-md-12 padding-10"},n.createElement("div",{className:"col-md-12 padding-10"},n.createElement("div",{className:"col-md-3 padding-10"},"Image URL: "),n.createElement("div",{className:"col-md-9"},n.createElement(i.a,{handleAttachedFile:this.handlefileAttached,files:this.state.files,isEdit:!1,single:!1})))),a.imageName&&n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("div",{className:"col-md-3"},"\xa0"),n.createElement("div",{className:"col-md-9"},n.createElement("div",{className:"col-md-4"},-1!=a.imageName.toLowerCase().indexOf(".mp4")&&n.createElement("video",{height:"150",width:"200",controls:!0},n.createElement("source",{src:d.GetSignedURL(u.a.DOCUMENT(),a.imageName),type:"video/mp4"})),(-1!=a.imageName.toLowerCase().indexOf(".jpg")||-1!=a.imageName.toLowerCase().indexOf(".jpeg")||-1!=a.imageName.toLowerCase().indexOf(".png"))&&n.createElement("img",{height:"150",width:"245",src:d.GetSignedURL(u.a.DOCUMENT(),a.imageName)}))))))))))))))},t}(n.Component);t.default=E}});