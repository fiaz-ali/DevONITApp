webpackJsonp([38],{1055:function(e,t,n){"use strict";t.g=function(e,t,n,c){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},i.a.LIFE.SaveProject,o.b.LIFE).then(function(){Object(a.b)("Project saved Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Project.")})];case 1:return[2,r.sent()]}})})},t.r=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetProjectList,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteProject,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({model:e},i.a.LIFE.SaveProjectSolution,o.b.LIFE).then(function(){Object(a.b)("Solution saved Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({spreadSheetId:e,fileType:t},i.a.LIFE.ExportSheet,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetSolutionList,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.u=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({inspectionOntology:e},i.a.LIFE.GetSolutionListForInspection,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.s=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({solutionId:e},i.a.LIFE.GetSolution,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteSolution,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({manageFile:e,fileData:t},i.a.LIFE.ManageFile,o.b.LIFE).then(function(){Object(a.b)("Upload Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({communityFile:e,fileData:t},i.a.LIFE.SaveCommunityFile,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetManageFile,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetCommunityFile,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ManageFile:e},i.a.LIFE.DeleteManageFile,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({communityFile:e},i.a.LIFE.DeleteCommunityFile,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetProject,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.SaveEmailAndDrive,o.b.LIFE)];case 1:return[2,a.sent()]}})})},t.j=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({email:e,instance:t},i.a.LIFE.ShareCommunityFolder,o.b.LIFE).then(function(e){e.result?Object(a.b)("Successfully Share."):Object(a.a)("The user Email is not valid.")}).catch(function(e){Object(a.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.ShareMMTemplateFolder,o.b.LIFE).then(function(e){e.result?Object(a.b)("Successfully Share."):Object(a.a)("The user Email is not valid.")}).catch(function(e){Object(a.a)("Something Went Wrong!")})];case 1:return[2,r.sent()]}})})},t.i=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({templatePurpose:e},i.a.LIFE.SaveTemplatePurpose,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetTemplatePurpose,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),i=e.getDate().toString().padStart(2,0),a=e.getHours().toString().padStart(2,0),o=e.getMinutes().toString().padStart(2,0),r=e.getSeconds().toString().padStart(2,0);return t+n+i+a+o+r};var i=n(14),a=n(8),o=n(6),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}},1374:function(e,t,n){"use strict";(function(e){var i=n(1),a=(n.n(i),n(12)),o=n(20),r=n(24),s=n(10),c=n(111),l=n(6),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},m=function(t){function n(e){var n=t.call(this,e)||this;return n.state={items:[],caLabel:[],labelsDropDownList:[],files:[]},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCALabelChange=n.handleCALabelChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return u(n,t),n.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){var e;return h(this,function(t){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e})),[2]})})},n.prototype.componentWillReceiveProps=function(e){return p(this,void 0,void 0,function(){return h(this,function(t){return e.items&&this.setState({items:e.items}),[2]})})},n.prototype.addItem=function(){var e=this,t=this.state,n=t.items;t.caLabel.map(function(t){var i={caName:"",age:"",assessmentLabel:t.value,notes:"",photo:[],repairCost:"",size:"",type:e.props.type,entryTimeStamp:"",typeOf:t.value};n?n.push(i):n=[]}),this.setState({items:n,caLabel:[]}),this.props.handleAdder(n,this.props.type)},n.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t,this.props.type)},n.prototype.handleCALabelChange=function(e){this.setState({caLabel:e})},n.prototype.handleItemChange=function(e,t){var n=this.state.items,i=t.target.name;(n&&n[e])[""+i]=t.target.value,this.setState({items:n}),this.props.handleAdder(n,this.props.type)},n.prototype.handleFileAttachment=function(t,n){var i=this,a=this.state.items,o=a[n];if(t&&(t.file||t.length>0)&&o){var c,l=this.props.buildingName+"-_-"+Object(s.l)(10),u="";"video/mp4"==t.type?(u=l+".mp4",c=t):"image/jpeg"==t.type||"image/png"==t.type?(u=l+".jpg",c=t.file):(u=l+".jpg",c=new e(t.replace(/^data:image\/\w+;base64,/,""),"base64")),a[n].photo[0]=u,this.setState({items:a},function(){i.props.handleAdder(a,i.props.type),(new r.b).UploadFile(r.a.DOCUMENT,u,c)})}},n.prototype.handlefileAttached=function(e,t){if(e.length>0){for(var n=this.state.items,i=n[t],a=0;a<e.length;a++){var o=e[a].name.split(".").pop(),c=this.props.buildingName+"_"+Object(s.l)(15)+"."+o.toLowerCase();n[0].photo[a]=c}Object(l.g)(e),this.setState({files:e,items:n},function(){}),this.props.handleAdder(n,this.props.type);var u=new r.b,p=Object(l.d)();if(p&&p.length)for(var h=0;h<p.length;h++){var m=p[h];u.UploadFile(r.a.DOCUMENT,i.photo[h],m)}}},n.prototype.render=function(){var e=this,t=this.state,n=t.items,s=t.caLabel,l=t.labelsDropDownList,u=this.props,p=u.caOf,h=u.hideAddButton,m=void 0!==h&&h,f=u.isFromReport;return i.createElement(i.Fragment,null,n&&n.map(function(t,n){return i.createElement("div",{key:n,className:"row"},i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:t.assessmentLabel},t.assessmentLabel)),"Space"==p&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-1"},i.createElement("input",{type:"text",id:t.age,className:"form-control",value:t.age,placeholder:"Age",name:"age",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-1"},i.createElement("input",{type:"text",id:t.size,className:"form-control",value:t.size,placeholder:"Size",name:"size",onChange:function(t){return e.handleItemChange(n,t)}}))),i.createElement("div",{className:"Space"==p?"col-md-4":"col-md-6"},i.createElement("input",{type:"text",id:t.notes,className:"form-control",value:t.notes,placeholder:"Notes",name:"notes",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("input",{type:"text",id:t.repairCost,className:"form-control",value:t.repairCost,placeholder:"Approximate Repair Cost",name:"repairCost",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-1"},!f&&i.createElement("button",{type:"button",className:"btn btn-dark",style:{fontWeight:"bold"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.type,title:"Upload Image"},t.photo&&t.photo.length>3?i.createElement("img",{src:r.c+"/"+r.a.DOCUMENT+"/"+t.photo,style:{height:20}}):i.createElement("i",{className:"fa fa-image"})),i.createElement(a.a,{disableSaveButton:!s,id:"uploadImage"+e.props.type,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.type},i.createElement(c.a,{handleAttachedFile:function(t){e.handlefileAttached(t,n)},files:e.state.files}),t.photo&&t.photo.length>3?i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),t.photo.map(function(e,t){i.createElement("img",{src:r.c+"/"+r.a.DOCUMENT+"/"+e[t],style:{height:150}})})):i.createElement(i.Fragment,null),!f&&i.createElement("button",{type:"button",className:"btn btn-success btn-fill",onClick:function(){e.addItem()}},i.createElement("i",{className:"fa fa-camera"}),"Done "))),i.createElement("div",{className:"col-md-1"},!f&&n>=0&&i.createElement("button",{type:"button",className:"btn btn-danger",title:"Remove Item",onClick:function(){return e.removeItem(n)}},i.createElement("i",{className:"fa fa-remove"})))))}),!m&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-11 col-xs-11"},i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog"+this.props.type,style:{fontWeight:"bold"}},i.createElement("i",{className:"fa fa-plus"}),"Add ",this.props.type)),i.createElement(a.a,{disableSaveButton:!s,id:"AddLabelDialog"+this.props.type,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.type},l&&l.length>0&&i.createElement("div",{className:"form-group"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCALabelChange,placeholder:this.props.type+" Assessment Labels",options:l,value:s}))))))))},n}(i.Component);t.a=m}).call(t,n(30).Buffer)},954:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CA_TYPES",function(){return d});var i=n(1),a=(n.n(i),n(204)),o=n(1374),r=n(5),s=n(227),c=n(11),l=n(109),u=n(50),p=n(1055),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d={CONDITION:"Condition",COMPLIANCE:"Compliance",SAFETY:"Safety",CANOTE:"CA_Note"},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={caObj:{caAssessments:[]},equipLabels:[],conditionsLabels:[],complianceLabels:[],safetyLabels:[],isCompleted:!1,inspectionOntologies:[],inspectionOntology:"",SolutionList:[]},n.setupDropdownLists=n.setupDropdownLists.bind(n),n.handleCAForm=n.handleCAForm.bind(n),n.handleEquipmentAgeChange=n.handleEquipmentAgeChange.bind(n),n._saveCA=n._saveCA.bind(n),n.fetchCA=n.fetchCA.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return h(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.inspectionOntology!=e.inspectionOntology&&this.setState({inspectionOntology:e.inspectionOntology})},t.prototype.componentWillMount=function(){return m(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return[4,this.fetchInspection_IsComplete()];case 1:return e=t.sent(),this.setState({isCompleted:e}),[2]}})})},t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e,t,n,i;return f(this,function(a){switch(a.label){case 0:return e=this.props,t=e.infoEntity,n=e.entityName,i=e.inspectionOntology,t&&n?(Object(c.a)(!0),[4,this.fetchCA()]):[3,3];case 1:return a.sent(),[4,this.setupDropdownLists()];case 2:a.sent(),Object(c.a)(!1),a.label=3;case 3:return i&&this._getSolutionList(),[2]}})})},t.prototype._getSolutionList=function(){return m(this,void 0,void 0,function(){var e,t=this;return f(this,function(n){switch(n.label){case 0:return e=this.props.inspectionOntology,[4,Object(p.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return m(this,void 0,void 0,function(){var e,t,n,i,a;return f(this,function(o){switch(o.label){case 0:return e=this.props.entityName,[4,Object(u.h)(e,"CA")];case 1:return t=o.sent(),n=this.state,i=n.isCompleted,a=n.inspectionOntologies,t?(i="true"==Object(r.g)(t.IsCompleted),a=Object(r.g)(t.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:a}),[2,i]):[2,!1]}})})},t.prototype.fetchCA=function(){return m(this,void 0,void 0,function(){var e,t,n,i,a,o=this;return f(this,function(c){switch(c.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,i=e.infoEntity,a=e.inspectionOntology,[4,Object(s.b)(t,n,i,a).then(function(e){if(e){var t=o.state.caObj,n=e.filter(function(e){return Object(r.g)(e.inspection)==a});n&&n.map(function(e){var n={caName:Object(r.g)(e.caName),entryTimeStamp:Object(r.g)(e.entryTimeStamp),notes:Object(r.g)(e.notes),age:Object(r.g)(e.age),assessmentLabel:Object(r.g)(e.assessmentLabel),photo:Object(r.g)(e.photo).split(","),repairCost:Object(r.g)(e.repairCost),size:Object(r.g)(e.size),type:Object(r.g)(e.type),typeOf:Object(r.g)(e.typeOf)};t.caAssessments.push(n)}),o.setState({caObj:t})}})];case 1:return c.sent(),[2]}})})},t.prototype.setupDropdownLists=function(){return m(this,void 0,void 0,function(){var e,t,n,i,a;return f(this,function(o){return e=this.state,t=e.equipLabels,n=e.conditionsLabels,i=e.complianceLabels,a=e.safetyLabels,t=["Cleanliness","Debris","Insulation/Sealing","Rust/Chipped Paint","Loose Connections","Pad/Support/Dunnage","Ventilation","General Notes"],0==n.length&&n.push.apply(n,["Access","Ceiling","Egress","Fenestration","Flooring","Foundation","Frame","Roof","Walls","Curb","Landscaping","Pad","ParkingLot","ParkingSpace","Paving","StructuralElement"]),0==i.length&&i.push.apply(i,["ADA","HIPAA","PCI"]),0==a.length&&a.push.apply(a,["AED","AlarmSystem","FireExtinguisher","Sprinkler"]),this.setState({equipLabels:t,conditionsLabels:n,complianceLabels:i,safetyLabels:a}),[2]})})},t.prototype.handleCAForm=function(e,t){var n=this.state.caObj,i=n.caAssessments.filter(function(e){return e.type!=t});i.push.apply(i,e),n.caAssessments=i,this.setState({caObj:n})},t.prototype.handleEquipmentAgeChange=function(e){var t=this.state.caObj;this.setState({caObj:t})},t.prototype._saveCA=function(e){return m(this,void 0,void 0,function(){var t,n,i,a,o,r,l,p,h,m,d;return f(this,function(f){switch(f.label){case 0:return Object(c.a)(!0),t=this.state,n=t.caObj,i=t.inspectionOntologies,a=t.SolutionList,o=this.props,r=o.buildingName,l=o.infoEntity,p=o.entityName,h=o.instance,m=o.inspectionOntology,d=!0,[4,Object(s.c)(r,l,p,n,m,d,a,e)];case 1:return f.sent(),e?this.props.inspectionOntology?(i.push(this.props.inspectionOntology),[4,Object(u.c)(p,i,"CA")]):[3,3]:[3,4];case 2:f.sent(),f.label=3;case 3:switch(l){case"Equip":window.location.hash=h+"/"+r+"/Assets";break;case"Space":window.location.hash=h+"/"+r+"/Space";break;default:return[2,!1]}f.label=4;case 4:return Object(c.a)(!1),[2]}})})},t.prototype.unComplete=function(){return m(this,void 0,void 0,function(){var e,t,n;return f(this,function(i){switch(i.label){case 0:if(e=this.props.entityName,!((t=this.state.inspectionOntologies)&&t.length>0))return[3,2];if(!this.props.inspectionOntology)return[3,2];for(n=0;n<t.length;n++)t[n]==this.props.inspectionOntology&&t.splice(n,1);return[4,Object(u.k)(e,t,"CA")];case 1:i.sent(),i.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,r=t.instance,s=t.entityName,c=t.infoEntity,u=t.inspectionOntology,p=this.state,h=p.caObj,m=p.equipLabels,f=p.conditionsLabels,b=p.complianceLabels,g=p.safetyLabels,v=p.isCompleted,y=p.inspectionOntologies,E=h.caAssessments.filter(function(e){return e.type==d.CANOTE}),O=h.caAssessments.filter(function(e){return e.type==d.CONDITION}),C=h.caAssessments.filter(function(e){return e.type==d.COMPLIANCE}),w=h.caAssessments.filter(function(e){return e.type==d.SAFETY}),L=y.find(function(e){return e==u}),S=!!(L&&L.length>0);return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(a.a,{workFlowSpaceList:this.props.workFlowSpaceList,inspectionOntology:this.props.inspectionOntology,instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:s,showAuditTypes:!0,showBIMButtons:!0}))),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 form-group"},i.createElement("div",{className:"pull-right"},i.createElement(l.a,{ElementID:"ca",data:this.state.caObj,filename:"ca"})))),i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid padding-10",id:"ca"},"Space"!=c&&i.createElement("div",{className:"col-md-12"},i.createElement("h4",{style:{marginTop:10}},"Condition Assessment")),"Equip"==c&&m.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{instance:r,buildingName:n,caOf:c,items:E,handleAdder:this.handleCAForm,type:d.CANOTE,labels:m}))),"Space"==c&&i.createElement(i.Fragment,null,f.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,d.CONDITION," Assessments"),i.createElement(o.a,{instance:r,buildingName:n,caOf:c,items:O,handleAdder:this.handleCAForm,type:d.CONDITION,labels:f})),i.createElement("br",null),i.createElement("br",null)),b.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,d.COMPLIANCE," Assessments"),i.createElement(o.a,{instance:r,buildingName:n,caOf:c,items:C,handleAdder:this.handleCAForm,type:d.COMPLIANCE,labels:b})),i.createElement("br",null),i.createElement("br",null)),g.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,d.SAFETY," Assessments"),i.createElement(o.a,{instance:r,buildingName:n,caOf:c,items:w,handleAdder:this.handleCAForm,type:d.SAFETY,labels:g})),i.createElement("br",null),i.createElement("br",null))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!1)}},i.createElement("i",{className:"fa fa-save"})," Save"),(v||!v)&&i.createElement(i.Fragment,null," ",!S&&i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!0)}},i.createElement("i",{className:"fa fa-save"})," Save & Complete")),v&&S&&i.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},i.createElement("b",null,"Remove Inspection Completion. ")))))))))},t}(i.Component);t.default=b}});