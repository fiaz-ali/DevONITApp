webpackJsonp([56],{2573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=(n.n(i),n(726)),a=n.n(r),s=n(675),o=n(908),c=n(713),l=(n.n(c),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),u=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,o)}c((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,r,a,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={graphData:[{x:"x",columns:[]}],grid:{x:{lines:[{}]},y:{show:!0}},axis:[{x:{type:"timeseries",tick:{fit:!0,count:6,format:"%m-%d %H:%M:%S"}},y:{label:"F",tick:{format:function(e){return parseFloat(e).toFixed(2)}}}}]},n.fetchGraphData=n.fetchGraphData.bind(n),n.getTimeSeriesPoints=n.getTimeSeriesPoints.bind(n),n}return l(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){return p(this,function(e){return this.fetchGraphData(),[2]})})},t.prototype.getTimeSeriesPoints=function(e,t){if(e.length<2)return e.slice(0);var n=new Date(e[1].setSeconds(0)),i=new Date(e[e.length-1]);n.getMinutes()%5!=0&&n.setMinutes(n.getMinutes()+(5-n.getMinutes()%5)),i.getMinutes()%5!=0&&i.setMinutes(i.getMinutes()-i.getMinutes()%5);var r=[n],a=i.getTime()-n.getTime();if(Math.ceil(a/t-1)>1e4){for(var s=0;s<t-1;s++){(o=new Date(r[r.length-1].getTime()+Math.ceil(a/t))).setSeconds(0),r.push(o)}return i.setSeconds(0),r.push(i),r}r=[];for(s=1;s<e.length-1;s+=2){var o=new Date(e[s]);r.push(o)}return r.push(i),r},t.prototype.fetchGraphData=function(){return u(this,void 0,void 0,function(){var e,t,n,i,r,a,c,l,u,h,f,m,d,g,v,y,b,w;return p(this,function(p){switch(p.label){case 0:return e=this.props,t=e.ControlName,n=e.from,i=e.to,r=e.isLive,a=e.topic,c=e.firmware,l=this.state,u=l.graphData,h=l.axis,f=l.grid,m=this.props.modalVariables.split(","),d=this.props.legends.split(","),g=this.props.units.split(","),t&&-1!=t.toLowerCase().indexOf("ceiling")?[4,Object(s.d)(a.split("(").join("/"),n,i,"true"===r)]:[3,2];case 1:v=p.sent(),p.label=2;case 2:return v.length>1&&(u[0].columns.push(["x"]),v.forEach(function(e){u[0].columns[0].push(new Date(e.timestamp))}),m.forEach(function(e,t){u[0].columns.push([d[t]]),v.forEach(function(n){u[0].columns[t+1].push("temp_celsius"!=e?n[""+e]:Object(o.a)(n[""+e],c||"",0))})}),h[0].y.label=g[0],y=this.getTimeSeriesPoints(u[0].columns[0],5),b="",w=(y[y.length-1].getTime()-y[0].getTime())/1e3,b=(w/=3600)>24?"%m-%d %H:%M":"%H:%M:%S",f.x.lines=[],y.forEach(function(e){f.x.lines.push({value:e,class:"grid4"})}),h[0].x.tick.values=y,h[0].x.tick.format=b),this.setState({graphData:u,grid:f,axis:h}),[2]}})})},t.prototype.render=function(){var e,t=this.state,n=t.graphData,r=t.grid,s=t.axis,o=this.props.titles;return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"card InsightsListGraph",id:"InsightsList"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 padding-10 "},i.createElement("div",{className:"content"},i.createElement("div",{className:""},i.createElement("div",{className:"graph-column"},i.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},i.createElement("h4",{className:"no-padding no-margin-color-textalign"},i.createElement("strong",null,o.split(",")[0])),n&&(null===(e=n[0].columns)||void 0===e?void 0:e.length)>0&&i.createElement(a.a,{data:n[0],size:{height:600},axis:s[0],grid:r,legend:{position:"right"}}))))))))))))))},t}(i.Component);t.default=h}});