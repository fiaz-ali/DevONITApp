webpackJsonp([47],{1775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),r=(n.n(a),n(951)),l=n(655),o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,l){function o(e){try{i(a.next(e))}catch(e){l(e)}}function c(e){try{i(a.throw(e))}catch(e){l(e)}}function i(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}i((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={workflows:[],selectedWF:Object(),actions:[]},n._getPhaseDetails=n._getPhaseDetails.bind(n),n.handleWorkflowChange=n.handleWorkflowChange.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._getPhaseDetails()];case 1:return e.sent(),[2]}})})},t.prototype._getPhaseDetails=function(){return c(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,Object(l.j)(this.props.buildingName).then(function(t){t.length>0&&t[0].ontology?e.setState({workflows:t}):e.setState({workflows:[]})})];case 1:return t.sent(),[2]}})})},t.prototype.handleWorkflowChange=function(e){return c(this,void 0,void 0,function(){var t,n,a,l,o,c,s;return i(this,function(i){switch(i.label){case 0:for(t=this.state,n=t.workflows,a=t.selectedWF,l=n.find(function(t){return t.ontology==e}),a=l,o=[],c=0;c<l.stageTemplates.length;c++)(o=l.stageTemplates[c].subTasks.map(function(e){return e.ontology})).push.apply(o,o);return[4,Object(r.a)(this.props.buildingName,o)];case 1:return s=i.sent(),this.setState({selectedWF:a,actions:s&&s.length?s:[]}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,l=t.buildingName,o=this.state,c=o.workflows,i=o.selectedWF,s=o.actions;return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid small"},a.createElement("div",{className:"card no-margin",style:{minHeight:"100vh"}},a.createElement("div",{className:"row no-margin padding-10"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"row p-5"},a.createElement("div",{className:"col-md-12 headingText center"},a.createElement("h3",{className:"no-margin"},"Do What (Object Form Template)"))),a.createElement("div",{className:"row no-margin my-2"},a.createElement("div",{className:"col-md-12 no-padding"},a.createElement("div",{className:"col-md-4 px-2 py-4 headingText"},"ONIT Work Flow Template : "),a.createElement("div",{className:"col-md-6 px-2 py-2"},a.createElement("select",{className:"form-control",onChange:function(t){e.handleWorkflowChange(t.target.value)}},a.createElement("option",{value:""},"Select Work Flow"),c&&c.length>0&&c.map(function(e){return a.createElement("option",{value:e&&e.ontology},e&&e.description)}))))))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{style:{margin:6}},a.createElement("span",{className:"circle",style:{backgroundColor:"#A9CEF4",width:30,height:30,padding:"2px 8px",margin:10}}),"Visible"),a.createElement("div",{style:{margin:6}},a.createElement("span",{className:"circle",style:{backgroundColor:"black",width:30,height:30,padding:"2px 8px",margin:10}}),"Not Visible "),a.createElement("div",{style:{margin:6}}," ",a.createElement("span",{className:"circle",style:{backgroundColor:"red",width:30,height:30,padding:"2px 8px",margin:10}}),"Current Stage "),a.createElement("div",{style:{margin:6}}," ",a.createElement("span",{className:"circle",style:{backgroundColor:"gray",width:30,height:30,padding:"2px 8px",margin:10}}),"Disable ")))))),a.createElement("div",{className:"row no-margin padding-10"},i&&i.stageTemplates&&i.stageTemplates.length&&i.stageTemplates.map(function(t,n){return a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12 py-3 grid-header ",style:{cursor:"pointer"}},"Stage ",n+1,": ",t.description," "),a.createElement("div",{className:"row col-md-12 p-2"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"col-md-12 no-padding b-row-background"},a.createElement("div",{className:"col-md-3 py-3 grid-header"},"Directive "),a.createElement("div",{className:"col-md-3 py-3 grid-header"},"Directive Type"),a.createElement("div",{className:"col-md-3 py-3 grid-header"},"Point"),a.createElement("div",{className:"col-md-3 py-3 grid-header"},"Unit"))),a.createElement("div",{className:"col-md-4"},a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,t&&t.subTasks&&t.subTasks.map(function(e,t){return a.createElement("th",{scope:"col"},t+1)})))))),t.subTasks&&t.subTasks.length&&t.subTasks.map(function(n,r){return a.createElement("div",{className:"row col-md-12 p-2"},a.createElement("div",{className:"col-md-8"},a.createElement("label",{style:{background:"#174a54",color:"white",padding:10}}," Task ",r+1,": ",n.description),a.createElement("div",{className:"row mx-1 p-2"},s.length&&s.filter(function(e){return e.taskOntology==n.ontology}).map(function(e){return a.createElement("div",{className:"col-md-12 no-padding"},a.createElement("div",{className:"col-md-3 p-3"},a.createElement("label",{className:""},e.directive)),a.createElement("div",{className:"col-md-3 p-3"},a.createElement("label",{className:""}," ",e.directiveType)),a.createElement("div",{className:"col-md-3 p-3"},a.createElement("label",{className:""}," ",e.pointOntology)),a.createElement("div",{className:"col-md-3 p-3"},a.createElement("label",{className:""}," ",e.unit)))}))),a.createElement("div",{className:"col-md-4"},a.createElement("label",null," Tasks Visibility"),t.subTasks&&t.subTasks.length&&a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,t&&t.subTasks&&t.subTasks.map(function(t,l){var o=s&&s.filter(function(e){return e.taskOntology==t.ontology}),c=s&&s.filter(function(e){return e.taskOntology==n.ontology}),i=!1;return c.length>0&&c.map(function(e){i=e.visibleObjectFormActions&&e.visibleObjectFormActions.includes(o[0]&&o[0].ontology)}),a.createElement("td",{style:{textAlign:"center"}},l==r?a.createElement("span",{className:"circle",style:{backgroundColor:"red",width:30,height:30,padding:"2px 8px",margin:10}}):i&&l<r?a.createElement("span",{className:"circle",style:{backgroundColor:"#A9CEF4",width:30,height:30,padding:"2px 8px",margin:10},onClick:function(){var a=s&&s.filter(function(e){return e.taskOntology==t.ontology});s.map(function(e){e.taskOntology==n.ontology&&a.map(function(t){e.visibleObjectFormActions.splice(e.visibleObjectFormActions.findIndex(function(e){return e==t.ontology}),1)})}),e.setState({actions:s})}}):!i&&l<r?a.createElement("span",{className:"circle",style:{backgroundColor:"#000",width:30,height:30,padding:"2px 8px",margin:10},onClick:function(){var a=(s&&s.filter(function(e){return e.taskOntology==t.ontology})).map(function(e){return e.ontology});s&&s.filter(function(e){return e.taskOntology==n.ontology}).map(function(e){var t;e.visibleObjectFormActions||(e.visibleObjectFormActions=[]),(t=e.visibleObjectFormActions).push.apply(t,a)}),e.setState({actions:s})}}):l>r&&a.createElement("span",{className:"circle",style:{backgroundColor:"gray",width:30,height:30,padding:"2px 8px",margin:10}}))}))))))}))}))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 inline-block"},a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){Object(r.b)(e.props.buildingName,s)}},a.createElement("i",{className:"fa fa-save"})," Save"),a.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=n+"/"+l+"/Tickets"}},a.createElement("i",{className:"fa fa-angle-double-left"}),"  Back to ONIT Tickets")))))},t}(a.Component);t.default=s},951:function(e,t,n){"use strict";t.a=function(e,t,n){return o(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(l.e)({buildingName:e,tasks:t,ontologies:n},l.a.OBJECTFORM.GetObjectFormActions,r.b.TASK,!0)];case 1:return[2,a.sent()]}})})},t.b=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(l.f)({buildingName:e,ObjectActionTemplates:t},l.a.OBJECTFORM.SaveObjectFormActions,r.b.TASK).then(function(){Object(a.b)(" Assigned Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving.")})];case 1:return[2,n.sent()]}})})};var a=n(44),r=n(26),l=n(18),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,l){function o(e){try{i(a.next(e))}catch(e){l(e)}}function c(e){try{i(a.throw(e))}catch(e){l(e)}}function i(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}i((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}}});