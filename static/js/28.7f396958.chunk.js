webpackJsonp([28],{1292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=(a.n(n),a(724)),o=a(655),i=a(658),s=a(1463),l=a(1417),c=a(1418),m=a(1464),u=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),p=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,s)}l((n=n.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(e){function t(t){var a=e.call(this,t)||this;return a.graphTypes={"Ambient Temp":"http://18.188.22.84:5601/app/kibana#/visualize/edit/ac22fe30-2a9c-11e9-ac7b-91aa8480a091?embed=true&_g=(refreshInterval:(pause:!f,value:5000),time:(from:now-4h,mode:quick,to:now))&_a=(filters:!(),linked:!f,query:(language:lucene,query:''),uiState:(),vis:(aggs:!(),params:(expression:'.es(index%3D+test*,metric%3Davg:properties.cooltemp,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.spacetemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.heattemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.fan,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.fanstate,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.mode,timefield%3Dproperties.@timestamp)',interval:auto),title:thermostat,type:timelion))","Set Point":"","Outside Temp":"",Combined:"http://18.188.117.70:3000/d/Hgyp5OpZz/office-lab?tab=queries&orgId=1&fullscreen&edit&panelId=4&_g=(refreshInterval:(pause:!f,value:3000),time:(from:now-4h,mode:quick,to:now))&refresh=3s"},a.state={selectedMode:"Combined",selectedGraph:"",InsightInfo:Object(),HVAC_List:[],Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1},compressorAnalog:Object()},a.onGraphTypeChange=a.onGraphTypeChange.bind(a),a._fetchData=a._fetchData.bind(a),a}return u(t,e),t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.onGraphTypeChange=function(e){this.setState({selectedMode:e,selectedGraph:this.graphTypes[e]})},t.prototype._fetchData=function(){return p(this,void 0,void 0,function(){var e,t,a,n,r,s,l,c,m=this;return h(this,function(u){switch(u.label){case 0:return e=this.props,t=e.InsightName,a=e.buildingName,n=e.type,r=e.compressorAnalogName,t?(s=Object(),l=Object(),c=Object(),r?[4,Object(o.t)(r,a)]:[3,2]):[3,7];case 1:c=u.sent(),u.label=2;case 2:return"Optimal"!=n?[3,4]:[4,Object(i.f)(t)];case 3:return l=u.sent(),[3,6];case 4:return[4,Object(o.t)(t,a)];case 5:s=u.sent(),u.label=6;case 6:this.setState({compressorAnalog:c,selectedGraph:"Optimal"==n?l.graphURL:s.graphURL,Moncon:s,space:l},function(){return p(m,void 0,void 0,function(){return h(this,function(e){return[2]})})}),u.label=7;case 7:return[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,a=e.buildingName,o=e.InsightName,i=e.ControlName,u=e.type,p=e.hideTabs,h=this.state,d=h.selectedGraph,f=h.Moncon,g=f&&f.monitoringControlDeviceType&&-1!=f.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),v=f&&f.monitoringControlDeviceType&&-1!=f.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),y=f&&f.monitoringControlDeviceType&&-1!=f.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),b=f&&f.monitoringControlDeviceType&&-1!=f.monitoringControlDeviceType.toLowerCase().indexOf("wattnode"),x=f&&f.monitoringControlDeviceType&&"CBW406"==f.monitoringControlDeviceType,D=f&&f.monitoringControlDeviceType&&"CBW418"==f.monitoringControlDeviceType;return d=d&&-1!=d.indexOf("http")?d:"https://"+d,n.createElement("div",{className:"content"},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12"},!p&&!b&&!x&&y&&n.createElement(r.a,{InsightName:o,buildingName:a,instance:t,ControlName:i,type:u}),b&&!p&&n.createElement(l.a,{InsightName:o,ControlName:"InsightControl",buildingName:a,instance:t,type:u}),D&&!p&&n.createElement(c.a,{InsightName:o,buildingName:a,instance:t,ControlName:i,type:u}),x&&!p&&n.createElement(m.a,{InsightName:o,buildingName:a,instance:t,ControlName:i,type:u}),n.createElement("div",{className:"card InsightsListGraph",id:"InsightsList"},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"content"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12 padding-10 "},n.createElement("div",{className:"content"},!g&&!v&&!y&&!D&&!x&&!b&&n.createElement(n.Fragment,null,!d&&n.createElement("p",{id:"txtnograph"},"No Graph Available"),d&&n.createElement("iframe",{src:d,height:"600",width:"100%"})),g||v||y&&n.createElement(n.Fragment,null,n.createElement(s.a,{Moncon:f,buildingName:a,instance:t})),x&&n.createElement(n.Fragment,null,n.createElement(s.a,{Moncon:f,buildingName:a,instance:t,isEsolutionController:this.props.isEsolutionController,graphTab:this.props.graphTab,compressorBoxType:this.props.compressorBoxType})),D&&n.createElement(n.Fragment,null,n.createElement(s.a,{Moncon:f,buildingName:a,instance:t,isEsolutionController:this.props.isEsolutionController,graphTab:this.props.graphTab,compressorBoxType:this.props.compressorBoxType,isCompressorAnalog:!0})),b&&n.createElement(n.Fragment,null,n.createElement(s.a,{Moncon:f,buildingName:a,instance:t,graphTab:this.props.graphTab}))))),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null),n.createElement("br",null))))))))},t}(n.Component);t.default=d},1463:function(e,t,a){"use strict";var n,r=a(2),o=(a.n(r),a(1324)),i=a.n(o),s=a(1325),l=(a.n(s),a(23)),c=a(665),m=a.n(c),u=a(116),p=a(675),h=a(10),d=a(649),f=a(32),g=a(725),v=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),y=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,s)}l((n=n.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var a,n,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},x={height:600},D={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"\xb0F"}},E={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp, W, On/Off, Volts"}},w={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp"}},N={x:{type:"timeseries",tick:{fit:!1,format:"%m-%d %H:%M:%S"}},y:{label:"W"}},C={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"State"}},S={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Volts"}},T={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Hz"}},I={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"MWh"}},G=function(e){function t(t){var a=e.call(this,t)||this,n=new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-1)),r=new Date(Date.now());return a.state={graphData:{x:"x",columns:[]},graphData1:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},fourRelayGraphData:{x:"x",columns:[]},sixwattNodeGraphData:{x:"x",columns:[]},from:n,to:r,timeIntervalLog:{buildingName:a.props.buildingName,minutes:0,seconds:0},isRelayV4Device:!1,isRelayI1Device:!1,isIntesisDevice:!1,btnSeparateGraph:!1,btngraph:!1,showGraph:!1,isCompressor:!1,isCBW406:!1,isCBW418:!1,isWattNode:!1,showLoading:!0},a.handleGraph=a.handleGraph.bind(a),a.handleFromTimeChange=a.handleFromTimeChange.bind(a),a.handleToTimeChange=a.handleToTimeChange.bind(a),a.fetchIntesisGraphData=a.fetchIntesisGraphData.bind(a),a.getRelayV4GraphData=a.getRelayV4GraphData.bind(a),a.fetchGrapgData=a.fetchGrapgData.bind(a),a.handleTimeIntervalChange=a.handleTimeIntervalChange.bind(a),a.saveTimeLog=a.saveTimeLog.bind(a),a.getTimeLog=a.getTimeLog.bind(a),a.showgraphData=a.showgraphData.bind(a),a.getCBW406GraphData=a.getCBW406GraphData.bind(a),a.getCBW418GparhData=a.getCBW418GparhData.bind(a),a.validation=a.validation.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return Object(l.B)(!1),[4,this.getTimeLog()];case 1:return e.sent(),this.validation(),[2]}})})},t.prototype.validation=function(){var e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),r=e&&e.monitoringControlDeviceType&&"WattNode"==e.monitoringControlDeviceType;this.setState({isRelayV4Device:t,isIntesisDevice:a,isRelayI1Device:n,isWattNode:r})},t.prototype.handleGraph=function(){var e=[75,72,70,65,66,68,77,80],t=[73,78,72,68,74,80,65,69],a=[70,82,65,62,76,78,67,60],n=[];n=Object(l.o)(new Date(2020,0,1),new Date,8),e.unshift("heattemp"),t.unshift("cooltemp"),a.unshift("roomtemp"),n.unshift("x");var r={x:"x",columns:[n,e,t,a]};this.setState({graphData:r})},t.prototype.handleFromTimeChange=function(e){this.setState({from:e,graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]}})},t.prototype.handleToTimeChange=function(e){this.setState({to:e,graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]}})},t.prototype.handleTimeIntervalChange=function(e){var t=this.state.timeIntervalLog;t[e.target.name]=e.target.value,this.setState({timeIntervalLog:t})},t.prototype.fetchGrapgData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i;return b(this,function(s){return e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),r=e&&e.monitoringControlDeviceType&&"WattNode"==e.monitoringControlDeviceType,o=e&&e.monitoringControlDeviceType&&"CBW406"==e.monitoringControlDeviceType,i=e&&e.monitoringControlDeviceType&&"CBW418"==e.monitoringControlDeviceType,t&&(this.getRelayV4GraphData(),this.setState({isRelayV4Device:t})),n&&(this.getRelayI1GraphData(),this.setState({isRelayI1Device:n})),a&&(this.fetchIntesisGraphData(),this.setState({isIntesisDevice:a})),o&&(this.getCBW406GraphData(),this.setState({isCBW406:o})),i&&(this.getCBW418GparhData(),this.setState({isCBW418:i})),r&&(this.GetWattNodeBasicGraphData(),this.setState({isWattNode:r})),[2]})})},t.prototype.fetchIntesisGraphData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s,c,m,h,d,f=this;return b(this,function(g){switch(g.label){case 0:return e=this.props.Moncon,t=this.state,a=t.from,n=t.to,Object(u.a)(!0),r=[],o=[],i=[],s=[],c=[],m=[],h=[],d=[],e.deviceID?[4,Object(p.d)(e.deviceID,a,n).then(function(e){e.forEach(function(e){1!=isNaN(e.roomtemp)&&o.push(Object(l.a)(e.roomtemp)),1!=isNaN(e.setpoint)&&r.push(Object(l.a)(e.setpoint)),e.fanspeed?s.push(e.fanspeed):s.push("undefined"),e.horizontalvans?c.push(e.horizontalvans):c.push("undefined"),e.usermode?i.push(e.usermode):i.push("undefined"),e.verticalvans?m.push(e.verticalvans):m.push("undefined"),e.wifiSignal?h.push(e.wifiSignal):h.push("undefined"),d.push(new Date(e.timestamp))}),r.unshift("setpoint"),o.unshift("roomtemp"),s.unshift("fanspeed"),c.unshift("horizontalvans"),i.unshift("mode"),m.unshift("verticalvans"),h.unshift("wifiSignal"),d.unshift("x");var t={x:"x",columns:[d,r,o,s,c,i,m,h]};f.setState({graphData:t})})]:[3,2];case 1:g.sent(),g.label=2;case 2:return Object(u.a)(!1),[2]}})})},t.prototype.getRelayV4GraphData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s,l,c,m,d,f,g,v,y,x,D,E,w,N,C,S,T,I,G,O,_,L,F,B,R,A,M,W;return b(this,function(b){switch(b.label){case 0:return e=this.props.Moncon,t=this.state,a=t.from,n=t.to,r=[],o=[],i=[],s=[],l=[],c=[],m=[],d=[],f=[],g=[],v=[],y=[],x=[],D=this.state.btngraph,e.deviceID?(D||Object(u.a)(!0,"loading graph data..."),[4,Object(p.g)(e.topic,a,n)]):[3,4];case 1:if(!((E=b.sent()).length>0))return[3,3];for(w=0;w<E.length;w++)(N=E[w])&&(r.push(N.mAmps_relay1),o.push(N.mAmps_relay2),i.push(N.mAmps_relay3),s.push(N.mAmps_relay4),l.push(N.nominal_src_volts),c.push(N.power_Wt_relay1),m.push(N.power_Wt_relay2),d.push(N.power_Wt_relay3),C=Object(p.a)(parseInt(N.v4relay_state)),x.push(new Date(N.timestamp)),3==C.length?C="0"+C:2==C.length?C="00"+C:1==C.length&&(C="000"+C),S=C[3],T=C[2],I=C[1],G=C[0],f.push(S||"0"),g.push(T||"0"),v.push(I||"0"),y.push(G||"0"));return[4,Object(p.x)(e.deviceName)];case 2:O=b.sent(),_=[],O[0]?(L=O[0],F=Object(h.g)(L.relayNames),_=F.split(",")):(_.push("Relay 1"),_.push("Relay 2"),_.push("Relay 3"),_.push("Relay 4")),r.unshift(_[0]+" Amp"),o.unshift(_[1]+" Amp"),i.unshift(_[2]+" Amp"),s.unshift(_[3]+" Amp"),l.unshift("Nominal Source Volts"),c.unshift(_[0]+" Watts"),m.unshift(_[1]+" Watts"),d.unshift(_[2]+" Watts"),x.unshift("x"),f.unshift(_[0]+" State"),g.unshift(_[1]+" State"),v.unshift(_[2]+" State"),y.unshift(_[3]+" State"),R={x:"x",columns:[x,r,o,i,s]},A={x:"x",columns:[x,c,m,d]},M={x:"x",columns:[x,f,g,v,y]},W={x:"x",columns:[x,l]},(B={x:"x",columns:[x,r,o,i,s,c,m,d,f,g,v,y,l]}).columns[B.columns.length-1][1]&&this.setState({fourRelayGraphData:B}),R.columns[R.columns.length-1][1]&&this.setState({graphData:R}),A.columns[A.columns.length-1][1]&&this.setState({graphData2:A}),M.columns[M.columns.length-1][1]&&this.setState({graphData3:M}),l[l.length-1]&&this.setState({graphData4:W}),b.label=3;case 3:D||Object(u.a)(!1),b.label=4;case 4:return[2]}})})},t.prototype.GetWattNodeBasicGraphData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s,l,c,m,p,h,d,f,v,y,x,D,E,w,N,C,S,T,I,G,O,_,L;return b(this,function(b){switch(b.label){case 0:return e=this.props.Moncon,t=this.state,a=t.to,n=t.from,r=t.btngraph,o=e.topic.split(","),s=[],l=[],c=[],m=[],p=[],h=[],d=[],f=[],v=[],y=[],x=[],D=[],E=[],w=[],N=[],C=[],(i=[]).push("EnerygySum"),s.push("energyPOSSUM"),l.push("energySumR"),c.push("energyPosSumNR"),m.push("powerSum"),p.push("powerA"),h.push("powerB"),d.push("powerC"),f.push("voltA"),v.push("voltB"),y.push("voltC"),x.push("VoltAvgLL"),D.push("voltAB"),E.push("voltAC"),w.push("voltBC"),N.push("freq"),C.push("x"),e.deviceID?(r||Object(u.a)(!0,"loading graph data..."),[4,Object(g.f)(o[0],n,a)]):[3,2];case 1:(S=b.sent()).length>0&&(S.forEach(function(e){e&&(i.push(e.EnergySum),s.push(e.EnergyPosSum),l.push(e.EnergySumNR),c.push(e.EnergyPosSumNR),m.push(e.PowerSum),p.push(e.PowerA),h.push(e.PowerB),d.push(e.PowerC),f.push(e.VoltA),v.push(e.VoltC),y.push(e.VoltC),x.push(e.VoltAvgLL),D.push(e.VoltAB),E.push(e.VoltAC),w.push(e.VoltBC),N.push(e),C.push(new Date(e.timestamp)))}),I={x:"x",columns:[C,D,w,E]},G={x:"x",columns:[C,f,v,y]},O={x:"x",columns:[C,N]},_={x:"x",columns:[C,l]},L={x:"x",columns:[C,c]},(T={x:"x",columns:[C,p,h,d,m]}).columns[T.columns.length-1][1]&&this.setState({graphData:T}),I.columns[I.columns.length-1][1]&&this.setState({graphData2:I}),G.columns[G.columns.length-1][1]&&this.setState({graphData3:G}),O.columns[O.columns.length-1][1]&&this.setState({graphData4:O}),_.columns[_.columns.length-1][1]&&this.setState({graphData5:_}),L.columns[L.columns.length-1][1]&&this.setState({graphData6:L})),r||Object(u.a)(!1),b.label=2;case 2:return[2]}})})},t.prototype.getRelayI1GraphData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s,l,c,m,u,d,f,g,v,y,x;return b(this,function(b){switch(b.label){case 0:return e=this.props.Moncon,t=this.state,a=t.to,n=t.from,r=[],o=[],i=[],s=[],l=[],c=[],m=[],u=[],[4,Object(p.f)(e.topic,n,a)];case 1:return(d=b.sent()).length>0?(d.forEach(function(e){e&&(r.push(e.i1relay_state),o.push(e.active_power_Watts),o.push(e.active_power_Watts),i.push(e.current_Amperes),s.push(e.frequency_Hz),l.push(e.import_active_energy_Wh),c.push(e.power_factor),m.push(e.voltage_volts),u.push(new Date(e.timestamp)))}),[4,Object(p.x)(e.deviceName)]):[3,3];case 2:f=b.sent(),g=[],f[0]?(v=f[0],y=Object(h.g)(v.relayNames),g=y.split(",")):g.push("Relay"),r.unshift(g[0]+" State"),o.unshift(g[0]+" Watts"),i.unshift(g[0]+"Amps"),s.unshift(g[0]+" frequency_Hz"),l.unshift(g[0]+" Watts/Hour"),c.unshift(g[0]+" Power Factor"),m.unshift(g[0]+" Volts"),u.unshift("x"),x={x:"x",columns:[u,r,o,o,i,s,l,c,m]},this.setState({graphData:x}),b.label=3;case 3:return[2]}})})},t.prototype.getCBW406GraphData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s,l,c,m,p,h,d,f,v,y,x,D,E,w,N,C,S,T,I,G;return b(this,function(b){switch(b.label){case 0:return e=this.props,t=e.Moncon,a=e.compressorBoxType,n=e.graphTab,r=e.isEsolutionController,o=this.state,i=o.from,s=o.to,(l=o.showLoading)&&Object(u.a)(!0),c=[],m=[],p=[],h=[],d=[],f=[],v=[],y=[],x=[],D=[],E=[],w=[],N=[],C=[],S=[],[4,Object(g.d)(t.topic,i,s)];case 1:return(T=b.sent()).length>0&&T.forEach(function(e){e&&(c.push(""+e.vin),m.push(""+e.register1),p.push(""+e.t3Ref1Front.toFixed(2)),h.push(""+e.t4Ref1Back.toFixed(2)),d.push(""+e.t5Ref1EvapFan.toFixed(2)),f.push(""+e.t6Ref1CompressorIn.toFixed(2)),v.push(""+e.t7Ref1CompressorOut.toFixed(2)),y.push(""+e.t8Ref1WaxProbe.toFixed(2)),x.push(""+e.t3Ref2Front.toFixed(2)),D.push(""+e.t4Ref2Back.toFixed(2)),E.push(""+e.t5Ref2EvapFan.toFixed(2)),w.push(""+e.t6Ref2CompressorIn.toFixed(2)),N.push(""+e.t7Ref2CompressorOut.toFixed(2)),C.push(""+e.t8Ref2WaxProbe.toFixed(2)),S.push(new Date(e.timestamp)))}),c.unshift("Vin"),m.unshift("Register"),p.unshift("Front"),h.unshift("Back"),d.unshift("Evaporator Fan"),f.unshift("Compressor In"),v.unshift("Compressor Out"),y.unshift("Solid"),x.unshift("Front"),D.unshift("Back"),E.unshift("Evaporator Fan"),w.unshift("Compressor In"),N.unshift("Compressor Out"),C.unshift("Solid"),S.unshift("x"),r||(I={x:"x",columns:[c,m,p,h,d,f,v,y,S]},G={x:"x",columns:[c,m,x,D,E,w,N,C,S]},this.setState({graphData:I,graphData2:G})),"graph1"==n&&"ref1"==a?I={x:"x",columns:[p,h,y,S]}:"graph1"==n&&"ref2"==a&&(I={x:"x",columns:[x,D,C,S]}),"graph2"==n&&"ref1"==a?I={x:"x",columns:[p,h,d,f,v,y,S]}:"graph2"==n&&"ref2"==a&&(I={x:"x",columns:[x,D,E,w,N,C,S]}),"graph3"==n&&"ref1"==a?I={x:"x",columns:[c,m,p,h,d,f,v,y,S]}:"graph3"==n&&"ref2"==a&&(I={x:"x",columns:[c,m,x,D,E,w,N,C,S]}),"graph4"==n&&"ref1"==a?I={x:"x",columns:[d,v,S]}:"graph4"==n&&"ref2"==a&&(I={x:"x",columns:[E,N,S]}),I.columns[I.columns.length-1][1]&&this.setState({graphData:I}),G.columns[G.columns.length-1][1]&&this.setState({graphData2:G}),l&&Object(u.a)(!1),[2]}})})},t.prototype.getCBW418GparhData=function(){return y(this,void 0,void 0,function(){var e,t,a,n,r,o,i,s,l,c,m,p,h,d,f,v,y,x,D,E,w,N,C,S,T;return b(this,function(b){switch(b.label){case 0:return e=this.props.Moncon,t=this.state,a=t.from,n=t.to,Object(u.a)(!0),r=[],o=[],i=[],s=[],l=[],c=[],m=[],p=[],h=[],d=[],f=[],v=[],y=[],x=[],D=[],E=[],w=[],[4,Object(g.e)(e.topic,a,n)];case 1:return(N=b.sent()).length>0&&N.forEach(function(e){e&&(r.push(""+e.a13Ref1Compressor),o.push(""+e.a14Ref1FreezerDefrost),i.push(""+e.a15Ref1PressureSensor),s.push(""+e.a16Ref1DoorContact),l.push(""+e.analogInput5),c.push(""+e.analogInput6),m.push(""+e.analogInput7),p.push(""+e.analogInput8),h.push(""+e.register1),d.push(""+e.serialNumber),f.push(""+e.minRecRefresh),v.push(""+e.poweranalogInput5),y.push(""+e.poweranalogInput6),x.push(""+e.poweranalogInput7),D.push(""+e.poweranalogInput8),E.push(new Date(e.timestamp)),w.push(""+360*e.a13Ref1Compressor))}),r.unshift("Compressor"),o.unshift("Freezer Defrost"),i.unshift("Pressure Sensor"),s.unshift("Door Contact"),l.unshift("Analog Input 5"),c.unshift("Analog Input 6"),m.unshift("Analog Input 7"),p.unshift("Analog Input 8"),h.unshift("Register"),d.unshift("Serial Number"),f.unshift("Refresh"),v.unshift("Power Analog Input 5"),y.unshift("Power Analog Input 6"),x.unshift("Power Analog Input 7"),D.unshift("Power Analog Input 8"),w.unshift("Amalgamated Watts"),E.unshift("x"),S={x:"x",columns:[E,l,c,m,p]},T={x:"x",columns:[E,v,y,x,D]},(C={x:"x",columns:[E,r,o,i,s]}).columns[C.columns.length-1][1]&&this.setState({graphData:C}),S.columns[S.columns.length-1][1]&&this.setState({graphData2:S}),T.columns[T.columns.length-1][1]&&this.setState({graphData3:T}),Object(u.a)(!1),[2]}})})},t.prototype.saveTimeLog=function(){return y(this,void 0,void 0,function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this.state.timeIntervalLog,[4,Object(p.l)(e)];case 1:return t.sent()&&Object(f.b)("Successfully Save TimeInterval"),[2]}})})},t.prototype.getTimeLog=function(){return y(this,void 0,void 0,function(){var e,t;return b(this,function(a){switch(a.label){case 0:return(e=this.props.buildingName)?[4,Object(p.h)(e)]:[3,2];case 1:(t=a.sent())[0]?this.setState({timeIntervalLog:t[0]}):this.setState({timeIntervalLog:{buildingName:this.props.buildingName,minutes:0,seconds:0}}),a.label=2;case 2:return[2]}})})},t.prototype.showgraphData=function(){var e=this,t=this.state,a=t.btngraph,r=t.to,o=t.from;a=!a,this.setState({btngraph:a},function(){a?(n&&clearInterval(n),n=setInterval(function(){r=new Date,(o=new Date).setMinutes(o.getMinutes()-30),e.setState({to:r,from:o},function(){e.fetchGrapgData()})},5e3)):clearInterval(n)})},t.prototype.render=function(){var e=this,t=this.props,a=t.isEsolutionController,n=t.isCompressorAnalog,o=this.state,s=o.from,l=o.to,c=o.graphData,u=o.isRelayV4Device,p=o.graphData2,h=o.graphData3,f=o.graphData4,g=o.graphData5,v=o.graphData6,y=o.isRelayI1Device,b=o.isIntesisDevice,G=o.btnSeparateGraph,O=o.fourRelayGraphData,_=o.timeIntervalLog,L=o.btngraph,F=o.isCBW406,B=o.isCBW418,R=o.isWattNode,A={x:{show:!0},y:{show:!0}},M=r.createElement(i.a,{data:c,size:x,axis:u?w:D,unloadBeforeLoad:!0,grid:A}),W=r.createElement(i.a,{data:c,size:x,axis:y?w:D,unloadBeforeLoad:!0,grid:A}),j=r.createElement(i.a,{data:O,size:x,axis:E,unloadBeforeLoad:!0,grid:A}),k=r.createElement(i.a,{data:p,size:x,axis:N,unloadBeforeLoad:!0,grid:A}),H=r.createElement(i.a,{data:h,size:x,axis:C,unloadBeforeLoad:!0,grid:A}),P=r.createElement(i.a,{data:f,size:x,axis:S,unloadBeforeLoad:!0,grid:A}),z=r.createElement(i.a,{data:c,size:x,axis:D,unloadBeforeLoad:!0,grid:A}),V=r.createElement(i.a,{data:p,size:x,axis:D,unloadBeforeLoad:!0,grid:A}),q=r.createElement(i.a,{data:c,size:x,axis:w,unloadBeforeLoad:!0,grid:A}),U=r.createElement(i.a,{data:c,size:x,axis:N,unloadBeforeLoad:!0,grid:A}),J=r.createElement(i.a,{data:p,size:x,axis:S,unloadBeforeLoad:!0,grid:A}),Z=r.createElement(i.a,{data:h,size:x,axis:S,unloadBeforeLoad:!0,grid:A}),K=r.createElement(i.a,{data:f,size:x,axis:T,unloadBeforeLoad:!0,grid:A}),Q=r.createElement(i.a,{data:g,size:x,axis:I,unloadBeforeLoad:!0,grid:A}),X=r.createElement(i.a,{data:v,size:x,axis:I,unloadBeforeLoad:!0,grid:A}),Y=r.createElement(i.a,{data:p,size:x,axis:w,unloadBeforeLoad:!0,grid:A}),$=r.createElement(i.a,{data:h,size:x,axis:w,unloadBeforeLoad:!0,grid:A});return r.createElement("div",{className:1==a?"row col-md-6":"row col-md-12",style:{float:n?"right":"left"},id:"divGraphs"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-2 col-md-offset-10"})),r.createElement("br",null),r.createElement("div",{className:"row showhide timeLine col-md-6"},r.createElement("div",{className:"col-md-4 col-sm-6"},!L&&r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-2 padding-5"},r.createElement("label",null,"From: \xa0")),r.createElement("div",{className:"col-md-10 no-padding"},r.createElement(m.a,{id:"startTime",className:"form-control",selected:s,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),r.createElement("div",{className:"col-md-4 col-sm-6"},!L&&r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-1 padding-5"},r.createElement("label",null,"To: \xa0")),r.createElement("div",{className:"col-md-10 no-padding"},r.createElement(m.a,{id:"startTime",className:"form-control",selected:l,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6 col-sm-6"},!L&&r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-2 padding-5"},r.createElement("label",null,"From: \xa0")),r.createElement("div",{className:"col-md-10 no-padding"},r.createElement(m.a,{id:"startTime",className:"form-control",selected:s,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),r.createElement("div",{className:"col-md-6 col-sm-6"},!L&&r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-1 padding-5"},r.createElement("label",null,"To: \xa0")),r.createElement("div",{className:"col-md-10 no-padding"},r.createElement(m.a,{id:"startTime",className:"form-control",selected:l,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),r.createElement("div",{className:"col-md-12 center"},r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.fetchGrapgData()}},r.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Load Graph"),r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({btnSeparateGraph:!G})},style:{margin:"0 5px"}},r.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),G?"Combine":"Separate"," Graphs"),r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:this.showgraphData,style:{margin:"0 5px"}},r.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),L?"Hide":"Show"," Live Graph"))),R&&r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6 col-sm-6"},!L&&r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-2 padding-5"},r.createElement("label",null,"From: \xa0")),r.createElement("div",{className:"col-md-10 no-padding"},r.createElement(m.a,{id:"startTime",className:"form-control",selected:s,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),r.createElement("div",{className:"col-md-6 col-sm-6"},!L&&r.createElement(r.Fragment,null,r.createElement("div",{className:"col-md-1 padding-5"},r.createElement("label",null,"To: \xa0")),r.createElement("div",{className:"col-md-10 no-padding"},r.createElement(m.a,{id:"startTime",className:"form-control",selected:l,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),r.createElement("div",{className:"col-md-12 center"},r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.fetchGrapgData()}},r.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Load Graph"),r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({btnSeparateGraph:!G})},style:{margin:"0 5px"}},r.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),G?"Combine":"Separate"," Graphs"),r.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:this.showgraphData,style:{margin:"0 5px"}},r.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),L?"Hide":"Show"," Live Graph"))),b&&c&&c.columns&&c.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},M),y&&c&&c.columns&&c.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},W),F&&c&&c.columns&&c.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h3",{style:{color:"white",textAlign:"center"}},"Refrigerator 1"),z),F&&c&&c.columns&&c.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h3",{style:{color:"white",textAlign:"center"}},"Refrigerator 2"),V),B&&c&&c.columns&&c.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},q),B&&p&&p.columns&&p.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},Y),B&&h&&h.columns&&h.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},$),R&&c&&c.columns&&c.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h4",{className:"no-padding no-margin-color-textalign"},r.createElement("strong",null,"Power")),U),R&&p&&p.columns&&p.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h4",{className:"no-padding no-margin-color-textalign"},r.createElement("strong",null,"Phase Voltage")),J),R&&h&&h.columns&&h.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h4",{className:"no-padding no-margin-color-textalign"},r.createElement("strong",null,"Voltage")),Z),R&&f&&f.columns&&f.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h4",{className:"no-padding no-margin-color-textalign"},r.createElement("strong",null,"Frequency")),K),R&&g&&g.columns&&g.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h4",{className:"no-padding no-margin-color-textalign"},r.createElement("strong",null,"Energy Sum non-resettable")),Q),R&&v&&v.columns&&v.columns.length>0&&r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},r.createElement("h4",{className:"no-padding no-margin-color-textalign"},r.createElement("strong",null,"positive Energy Sum non-resettable")),X),!G&&u&&O&&O.columns&&O.columns.length>0&&r.createElement("div",{className:"row margin-top-25px  pdfDiv",id:"DeviceStatusGraph"},j),G&&u&&c&&p&&h&&f&&h.columns[1]&&f.columns[1]&&h.columns&&c.columns&&h.columns.length>0&&f.columns&&f.columns.length>0&&c.columns.length>0&&r.createElement(r.Fragment,null," ",r.createElement("div",{id:"DeviceStatusGraph"},r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},M),r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphWatt"},k),r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphState"},H),r.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphVolts"},P))," "),r.createElement("button",{id:"addTimeIntervalLog",className:"hidden","data-toggle":"modal","data-target":"#addTimeIntervalLogDialog",title:"Add"}," ",r.createElement("i",{className:"fa fa-plus"})," "),r.createElement(d.a,{id:"addTimeIntervalLogDialog",saveButtonText:"Save",heading:"Time Interval Log",onSaveButtonClick:function(){e.saveTimeLog()},disableSaveButton:!1},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("div",{className:"col-md-3 padding-5"},r.createElement("label",null,"Time Interval:")))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12 col-md-offset-2"},r.createElement("div",{className:"col-md-1 padding-5"},r.createElement("label",null,"Minute:")," "),r.createElement("div",{className:"col-md-3"},r.createElement("input",{className:"form-control",type:"number",name:"minutes",value:_.minutes,onChange:function(t){e.handleTimeIntervalChange(t)}})),r.createElement("div",{className:"col-md-1 padding-5"},r.createElement("label",null,"Second:")," "),r.createElement("div",{className:"col-md-3"},r.createElement("input",{className:"form-control",type:"number",name:"seconds",value:_.seconds,onChange:function(t){e.handleTimeIntervalChange(t)}}))))))},t}(r.Component);t.a=G},1464:function(e,t,a){"use strict";var n=a(2),r=(a.n(n),a(119)),o=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),i=function(e){function t(t){var a=e.call(this,t)||this;return a.state={},a}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.InsightName,a=e.buildingName,o=e.instance,i=e.ControlName,s=e.type;this.state;return n.createElement(n.Fragment,null,n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-12 "},n.createElement("ul",{className:"nav nav-tabs"},n.createElement("li",{className:window.location.hash.indexOf("/"+s+"/"+i+"/")>-1||window.location.hash.indexOf("/Equipment/"+i+"/")>-1?"active":""},n.createElement(r.b,{to:"/"+o+"/"+a+"/Insights/"+s+"/"+i+"/"+t},"Current Values")),n.createElement("li",{className:window.location.hash.indexOf("Graphs")>-1?"active":""},n.createElement(r.b,{to:"/"+o+"/"+a+"/Insights/"+s+"/Graphs/"+i+"/"+t},"Graphs"))))))},t}(n.Component);t.a=i}});