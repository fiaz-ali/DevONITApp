webpackJsonp([11,20,28,29],{1238:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(677)),o=n(712),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={inspectionVisibility:Object(),otherNotes:"",otherCompleted:!1,otherInspectionOntology:[],otherInspectionOntologies:"",entityName:""},n.handleWorkflowChange=n.handleWorkflowChange.bind(n),n.handleOtherCompletion=n.handleOtherCompletion.bind(n),n.handleNotes=n.handleNotes.bind(n),n}return r(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this;e.inspectionVisibility&&e.entityName&&this.setState({inspectionVisibility:e.inspectionVisibility,entityName:e.entityName},function(){return s(t,void 0,void 0,function(){return c(this,function(e){return[2]})})})},t.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){var e=this;return c(this,function(t){return this.props.inspectionVisibility&&this.props.entityName&&this.setState({inspectionVisibility:this.props.inspectionVisibility,entityName:this.props.entityName},function(){return s(e,void 0,void 0,function(){return c(this,function(e){return[2]})})}),[2]})})},t.prototype.handleWorkflowChange=function(e){this.state.otherCompleted;e.target.checked?document.getElementById("btnOtherNotes_"+this.props.entityName).click():document.getElementById("btnOtherNotesCancel_"+this.props.entityName).click()},t.prototype.handleNotes=function(e){var t=this.state.otherNotes;t=e.target.value,this.setState({otherNotes:t})},t.prototype.handleOtherCompletion=function(e){return s(this,void 0,void 0,function(){var t,n,i,a,r,s=this;return c(this,function(c){switch(c.label){case 0:return t=this.state,n=t.otherInspectionOntology,i=t.inspectionVisibility,a=t.otherNotes,e?this.props.inspectionOntology&&this.props.entityName?(!!n.find(function(e){return e==s.props.inspectionOntology})||n.push(this.props.inspectionOntology),[4,Object(o.j)(this.props.entityName,n,a,e)]):[3,2]:[3,3];case 1:c.sent(),c.label=2;case 2:return i.OtherCompleted=e,this.setState({otherInspectionOntology:n,inspectionVisibility:i,otherCompleted:!0}),[3,5];case 3:if(!this.props.inspectionOntology)return[3,5];if(!(n&&n.length>0))return[3,5];for(r=0;r<n.length;r++)n[r]==this.props.inspectionOntology&&n.splice(r,1);return[4,Object(o.b)(this.props.entityName,n,a,e)];case 4:c.sent(),i.OtherCompleted=e,this.setState({otherInspectionOntology:n,inspectionVisibility:i,otherCompleted:!1}),c.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props.workflow,n=this.state.inspectionVisibility;return i.createElement(i.Fragment,null,i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Inspections"),t.ecm&&n&&i.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0}},"ECM:"),t.ecm&&n.showECM&&i.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},i.createElement("label",{className:"switch-container pull-right"},i.createElement("input",{name:"ecm",className:"switch1",onChange:function(e){},checked:!!n.ECMCompleted,type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),t.rcx&&n&&i.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0}},"RCX:"),t.rcx&&n.showRCX&&i.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},i.createElement("label",{className:"switch-container pull-right"},i.createElement("input",{name:"rcx",className:"switch1",onChange:function(e){},checked:!!n.RCXCompleted,type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),t.ca&&n&&i.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0}},"CA:"),t.ca&&n.showCA&&i.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},i.createElement("label",{className:"switch-container pull-right"},i.createElement("input",{name:"ca",className:"switch1",onChange:function(e){},checked:!!n.CACompleted,type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),t.other&&i.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 padding-5 trim-data",style:{paddingLeft:0},title:t.otherName?t.otherName:""},t.otherName?t.otherName:"Other",":"),t.other&&i.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},i.createElement("label",{className:"switch-container pull-right"},i.createElement("input",{name:"otherCompleted",className:"switch1",onChange:function(t){e.handleWorkflowChange(t)},checked:!!n.OtherCompleted,type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),i.createElement("button",{id:"btnOtherNotes_"+this.props.entityName,style:{display:"none"},"data-toggle":"modal","data-target":"#OtherNotesDialog"+this.props.entityName},"."),i.createElement(a.a,{id:"OtherNotesDialog"+this.props.entityName,onSaveButtonClick:function(){e.props.entityName&&e.handleOtherCompletion(!0)},saveButtonText:"Save",showCancelButton:!0,showSaveButton:!0,cancelButtonText:"Cancel",heading:"Notes"},i.createElement("textarea",{className:"form-control",name:"otherNotes",onChange:function(t){e.handleNotes(t)}})," "),i.createElement("button",{id:"btnOtherNotesCancel_"+this.props.entityName,style:{display:"none"},"data-toggle":"modal","data-target":"#OtherNotesDialogCancel"+this.props.entityName},"."),i.createElement(a.a,{id:"OtherNotesDialogCancel"+this.props.entityName,onSaveButtonClick:function(){e.props.entityName&&e.handleOtherCompletion(!1)},saveButtonText:"Yes",showCancelButton:!0,showSaveButton:!0,cancelButtonText:"Cancel",heading:"Confirm"},i.createElement("label",{htmlFor:""},"Are you sure to cancel this completion")))},t}(i.Component);t.a=l},1239:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return a(t,e),t.prototype.render=function(){this.props,this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content"},i.createElement("div",{className:"row thumbnail no-margin"},i.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 center"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 no-padding"},i.createElement("label",{style:{color:"#B0B0B0"}},"Inspection Complete")),i.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 no-padding"},i.createElement("label",{className:"switch-container pull-right"},i.createElement("input",{name:"ecm",className:"switch1",onChange:function(e){},checked:!0,type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),i.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 center"},i.createElement("div",{className:"col-md-8 col-sm-8 col-xs-8 no-padding"},i.createElement("label",{style:{color:"#B0B0B0"}}," Not Complete")),i.createElement("div",{className:"col-md-2 col-sm-4 col-xs-4 no-padding"},i.createElement("label",{className:"switch-container pull-right"},i.createElement("input",{name:"ecm",className:"switch1",onChange:function(e){},checked:!1,type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))))))},t}(i.Component);t.a=o},1240:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(972)),o=n(685),r=n(20),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,s=e.infoEntity,c=e.entityNames;this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"pull-right"},i.createElement(o.a,{ElementID:"divRCXSummary",data:[],showCSV:!1,filename:"Retro-Commissioning Summary - "+Object(r.x)(n)+" - "+("Equip"==s?"Equipments":"Spaces")}))),i.createElement("div",{className:"row padding-10",id:"divRCXSummary"},i.createElement("div",{className:"col-md-12 padding-10",style:{alignContent:"center"}},i.createElement("h2",{style:{margin:"10px"}},"Retro-Commissioning Summary - "+Object(r.x)(n)+" - "+("Equip"==s?"Equipments":"Spaces"))),c&&c.map(function(e){return i.createElement("div",{className:"row padding-10"},i.createElement(a.default,{instance:t,buildingName:n,infoEntity:s,entityName:e,viewOnly:!0}))})))))},t}(i.Component);t.a=c},1241:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(685)),o=n(20),r=n(973),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,s=e.infoEntity,c=e.entityNames;this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"pull-right"},i.createElement(a.a,{ElementID:"divECMSummary",data:[],showCSV:!1,filename:"Energy Conservation Measures Summary - "+Object(o.x)(n)+" - "+("Equip"==s?"Equipments":"Spaces")}))),i.createElement("div",{className:"row padding-10",id:"divECMSummary"},i.createElement("div",{className:"col-md-12 padding-10",style:{alignContent:"center"}},i.createElement("h2",{style:{margin:"10px"}},"Energy Conservation Measures - "+Object(o.x)(n)+" - "+("Equip"==s?"Equipments":"Spaces"))),c&&c.map(function(e){return i.createElement("div",{className:"row padding-10"},i.createElement(r.default,{instance:t,buildingName:n,infoEntity:s,entityName:e,viewOnly:!0}))})))))},t}(i.Component);t.a=c},1242:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(685)),o=n(20),r=n(974),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return s(t,e),t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,s=e.infoEntity,c=e.entityNames;this.state;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"pull-right"},i.createElement(a.a,{ElementID:"divCASummary",data:[],showCSV:!1,filename:"Condition Assessment Summary - "+Object(o.x)(n)+" - "+("Equip"==s?"Equipments":"Spaces")}))),i.createElement("div",{className:"row padding-10",id:"divCASummary"},i.createElement("div",{className:"col-md-12 padding-10",style:{alignContent:"center"}},i.createElement("h2",{style:{margin:"10px"}},"Condition Assessment - "+Object(o.x)(n)+" - "+("Equip"==s?"Equipments":"Spaces"))),c&&c.map(function(e){return i.createElement("div",{className:"row padding-10"},i.createElement(r.default,{instance:t,buildingName:n,infoEntity:s,entityName:e,viewOnly:!0}))})))))},t}(i.Component);t.a=c},2746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a,o=n(2),r=(n.n(o),n(122)),s=n(677),c=n(683),l=n(20),u=n(12),m=n(690),p=n(13),d=n(749),h=n(1238),f=n(118),b=n(8),g=n(1239),v=n(2747),y=n(806),E=n(730),C=n(685),N=n(695),O=n(696),w=n(1240),S=n(1241),I=n(1242),x=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),j=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},_=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},k=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i},L=window.innerWidth,A=function(e){function t(t){var n=e.call(this,t)||this;return n.state={sortOrder:1,_equipments:[],filteredEquipments:[],columns:[{name:"Equipment",selected:!0},{name:"Floor",selected:!0},{name:"Space",selected:!0},{name:"Equipment Type",selected:!0},{name:"Equipment SubType",selected:!0},{name:"Digital Twin 3D Space",selected:!0},{name:"Virtual BIM",selected:!0},{name:"Inspections",selected:!0}],equipmentToDelete:Object(),workFlowSpaceList:[],workflow:Object(),equipmentSweeps:[],addCurrentSweep:!1,selectedVirtualBIM:"",selectEquipFloor:"",selectEquipSpace:"",selectEquipName:"",showMatterportDialog:!0,refreshMatterportDialog:!1,deleteOntology:"",selectedEquipmentState:"",Search:"",equipmentList1:Object(),showLogs:!1,showECMSummary:!1,showRCXSummary:!1,showCASummary:!1},i=n,n.onDeleteEquipment=n.onDeleteEquipment.bind(n),n.deleteEquipment=n.deleteEquipment.bind(n),n._fetchEquipments=n._fetchEquipments.bind(n),n.handleColumnFilters=n.handleColumnFilters.bind(n),n.sortEquipment=n.sortEquipment.bind(n),n.populateInspectionsList=n.populateInspectionsList.bind(n),n.unpopulateInspectionsList=n.unpopulateInspectionsList.bind(n),n.fetchWorkflow=n.fetchWorkflow.bind(n),n.handleMatterport=n.handleMatterport.bind(n),n.onDialogCancelButton=n.onDialogCancelButton.bind(n),n.handleRefreshMatterport=n.handleRefreshMatterport.bind(n),n.handleSweepChange=n.handleSweepChange.bind(n),n}return x(t,e),t.prototype.componentWillUnmount=function(){return j(this,void 0,void 0,function(){return _(this,function(e){return clearInterval(a),[2]})})},t.prototype.componentDidMount=function(){return j(this,void 0,void 0,function(){var e=this;return _(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchEquipments()]:[3,2];case 1:t.sent(),a=setInterval(function(){var t=Object(E.a)("inspectionOntology"),n=Object(E.a)("spacesWorkFlows");n&&n.length?t!=Object(E.a)("inspectionOntology_Old")&&(Object(E.b)("inspectionOntology_Old",t),e.setState({workFlowSpaceList:n},function(){return j(e,void 0,void 0,function(){return _(this,function(e){switch(e.label){case 0:return[4,this.fetchWorkflow()];case 1:return e.sent(),this.populateInspectionsList(),[2]}})})})):e.setState({workFlowSpaceList:n},function(){e.unpopulateInspectionsList()})},1e3),t.label=2;case 2:return[4,this.getCurrentScreenResolution()];case 3:return t.sent(),[2]}})})},t.prototype.getCurrentScreenResolution=function(){window.addEventListener("resize",function(){L=this.document.body.clientWidth})},t.prototype.fetchWorkflow=function(){return j(this,void 0,void 0,function(){var e,t,n=this;return _(this,function(i){switch(i.label){case 0:return e=this.state.workflow,t=Object(E.a)("inspectionOntology"),this.props.buildingName&&t?[4,Object(d.k)(this.props.buildingName,t).then(function(t){return j(n,void 0,void 0,function(){var n,i,a;return _(this,function(o){return t&&t.length&&Object(u.g)(t[0].ontology)&&(n=t[0],i=Object(u.g)(n.dateOfStart),a=Object(u.g)(n.finishDate),e.ca="true"==Object(u.g)(n.ca),e.ecm="true"==Object(u.g)(n.ecm),e.rcx="true"==Object(u.g)(n.rcx),e.other="true"==Object(u.g)(n.other),e.dateOfStart=i,e.description=Object(u.g)(n.description),e.finishDate=a,e.lead=Object(u.g)(n.lead),e.ontology=Object(u.g)(n.ontology),e.otherName=Object(u.g)(n.otherName)),this.setState({workflow:e}),[2]})})})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.handleColumnFilters=function(e){var t=e.target.checked,n=this.state.columns;n[n.findIndex(function(t){return t.name===e.target.value})].selected=t,this.setState({columns:n})},t.prototype.sortEquipment=function(e,t){var n=this.state._equipments,i=this.state.sortOrder,a=n.sort(function(t,n){if(t&&n){var a="",o="";switch(e){case"Equipment":t.equipRdfsLabel&&n.equipRdfsLabel&&(a=t.equipRdfsLabel.value,o=n.equipRdfsLabel.value);break;case"Floor":t.floorRdfsLabel&&n.floorRdfsLabel&&(a=t.floorRdfsLabel.value,o=n.floorRdfsLabel.value);break;case"Space":t.spaceRdfsLabel&&n.spaceRdfsLabel&&(a=t.spaceRdfsLabel.value,o=n.spaceRdfsLabel.value);break;case"Equipment Type":t.type&&n.type&&(a=t.type.value,o=n.type.value);break;case"Equipment SubType":t.subtype&&n.subtype&&(a=t.subtype.value,o=n.subtype.value)}var r=0;return a.toLocaleLowerCase()<o.toLocaleLowerCase()?r=-1:a.toLocaleLowerCase()>o.toLocaleLowerCase()&&(r=1),r*i}});this.setState({_equipments:a,sortOrder:-1*i})},t.prototype.onDeleteEquipment=function(e){return j(this,void 0,void 0,function(){return _(this,function(t){return this.setState({equipmentToDelete:e}),document.getElementById("btnConfirm").click(),[2]})})},t.prototype.deleteEquipment=function(){return j(this,void 0,void 0,function(){var e;return _(this,function(t){switch(t.label){case 0:return e=this.state.equipmentToDelete,[4,Object(l.k)(e.equip.value,p.b.EQUIP)];case 1:return t.sent(),[4,this._fetchEquipments()];case 2:return t.sent(),[2]}})})},t.prototype._fetchEquipments=function(){return j(this,void 0,void 0,function(){var e=this;return _(this,function(t){switch(t.label){case 0:return Object(f.a)(!0),[4,Object(c.g)(this.props.buildingName).then(function(t){return j(e,void 0,void 0,function(){var e=this;return _(this,function(n){return t||(t=[]),i.setState({_equipments:t,filteredEquipments:t},function(){return j(e,void 0,void 0,function(){var e,n;return _(this,function(i){for(e=0;e<t.length;e++)n=t[e],Object(u.g)(n.equip)&&Object(u.g)(n.equipRdfsLabel)&&Object(l.P)(Object(u.g)(n.equip),Object(u.g)(n.equipRdfsLabel));return[2]})})}),[2]})})}).catch(function(e){return e})];case 1:return t.sent(),Object(f.a)(!1),[2]}})})},t.prototype.populateInspectionsList=function(){return j(this,void 0,void 0,function(){var e,t,n,i,a;return _(this,function(o){switch(o.label){case 0:return e=this.state,t=e._equipments,n=e.workFlowSpaceList,i=Object(E.a)("inspectionOntology"),Object(f.a)(!0),[4,Object(d.c)(n,t,i)];case 1:return a=o.sent(),this.setState({_equipments:k(a)},function(){Object(f.a)(!1)}),[2]}})})},t.prototype.handleMatterport=function(e,t){var n=this,i=this.props.buildingName,a=Object(u.g)(e.equip);Object(c.r)(i,a).then(function(i){if(i&&i.length>0){var o=i[0],r=Object(u.g)(o.sweep);if(r){var s=[],c=Object();c.uuid=r,s.push(c);var l=!(s&&s.length>0)&&(t&&t.includes("camera_position")),m=t;n.setState({equipmentSweeps:s,addCurrentSweep:l,selectedVirtualBIM:m,selectEquipFloor:Object(u.g)(e.floor),selectEquipSpace:Object(u.g)(e.space),showMatterportDialog:!0},function(){document.getElementById("btnVirtualBIMDialog").click()})}else n.setState({selectEquipName:a}),document.getElementById("btnNoStepsFound").click()}else n.setState({selectEquipName:a}),document.getElementById("btnNoStepsFound").click()})},t.prototype.unpopulateInspectionsList=function(){return j(this,void 0,void 0,function(){var e,t;return _(this,function(n){if(e=this.state._equipments){for(t=0;t<e.length;t++)e[t].inspectionVisibility={CACompleted:!1,ECMCompleted:!1,RCXCompleted:!1,showCA:!1,showECM:!1,showRCX:!1,ECMinspectionOntology:!1,RCXinspectionOntology:!1,CAinspectionOntology:!1};this.setState({_equipments:e})}return[2]})})},t.prototype.onDialogCancelButton=function(e){this.setState({showMatterportDialog:e})},t.prototype.handleSweepChange=function(e,t){this.setState({equipmentSweeps:e})},t.prototype.handleRefreshMatterport=function(e){this.setState({refreshMatterportDialog:e})},t.prototype.search_filter=function(e){return j(this,void 0,void 0,function(){var t,n;return _(this,function(i){switch(i.label){case 0:return t=e.target.value,n=(n=this.state._equipments).filter(function(e){return e.equipRdfsLabel.value.toLowerCase().includes(t.toLowerCase().trim())}),[4,this.setState({filteredEquipments:n})];case 1:return i.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t._equipments,i=t.columns,a=t.workflow,c=t.equipmentSweeps,l=t.addCurrentSweep,p=t.selectedVirtualBIM,d=t.selectEquipFloor,f=t.showMatterportDialog,x=t.selectEquipSpace,j=t.selectEquipName,_=t.selectedEquipmentState,k=t.filteredEquipments,A=t.showLogs,F=t.showECMSummary,R=t.showRCXSummary,q=t.showCASummary,D=Object(E.a)("inspectionOntology"),M=this.props,T=M.instance,B=M.buildingName,P=JSON.parse(b.a.getItem("user")),X=Object(m.b)(P,"info-equip","write"),V=!!D,W=i.find(function(e){return"Inspections"==e.name&&1==e.selected})&&D,U=L&&L<1200||void 0==L;if(A)return o.createElement(N.a,{instance:T,buildingName:B,fromEntityList:!0,module:O.a.Assets,entityName:"Equipment",entityList:n.map(function(e){return{label:Object(u.g)(e.equipRdfsLabel),value:Object(u.g)(e.equip)}}),onLogClose:function(){return e.setState({showLogs:!1})}});return o.createElement(r.a.Consumer,null,function(t){return o.createElement("div",{className:"content"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},o.createElement(s.a,{id:"filtercolumnsModal",heading:"Table Column Preferences",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1},i&&i.length>0&&i.map(function(t,n){return!0===t.selected?o.createElement("div",{key:n},o.createElement("input",{checked:!0,type:"checkbox",value:t.name,onChange:e.handleColumnFilters})," ",o.createElement("label",null,t.name)):o.createElement("div",{key:n},o.createElement("input",{type:"checkbox",value:t.name,onChange:e.handleColumnFilters})," ",o.createElement("label",null,t.name))})),o.createElement("div",{className:"row padding-10",style:{marginLeft:0}},o.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 p-0",style:{display:"inline-flex"}},o.createElement("button",{type:"button",className:"btn btn-primary btn-fill","data-toggle":"modal",style:{marginRight:"3px"},"data-target":"#filtercolumnsModal"},o.createElement("i",{className:"fa fa-bookmark"}),o.createElement("span",{className:""},"Quick Filters"))),o.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 p-0",style:{display:"inline-flex"}},o.createElement("label",{htmlFor:"Search Filter",style:{lineHeight:"30px"}},"Filter: \xa0 "),o.createElement("input",{style:{width:"200px",height:"34px",outline:"green"},className:"form-control pull-right margin-left-right-5",onChange:function(t){e.search_filter(t)},id:"myInput",type:"text",placeholder:"Search.."})),P&&P.role&&("1"==P.role||"2"==P.role)&&o.createElement("div",{className:"col-md-7 col-sm-5 col-xs-5 pull-right p-0"},P&&"1"==P.role&&o.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",o.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),o.createElement(C.a,{filename:"EquipmentsList",data:n,ElementID:"EquipmentsList"}),o.createElement("div",{className:"padding-10 visible-xs col-xs-12"}),X&&o.createElement(o.Fragment,null," ",o.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){window.location.hash=T+"/"+B+"/NewEquipment"}},o.createElement("i",{className:"fa fa-plus"}),o.createElement("span",null,"Create New Equipment"))),o.createElement("button",{type:"button",className:"btn btn-success btn-fill pull-right",style:{marginRight:"3px"},onClick:function(){window.location.hash="/"+T+"/"+B+"/ESolutions"}},o.createElement("span",null,"Solutions")))))),o.createElement("br",null),o.createElement("div",{className:"row padding-5 margin-5"},o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding"},o.createElement("div",{className:"col-md-4 col-xs-12 px-0"},o.createElement("h6",{style:{marginTop:"10px"}},"Equipment State:")),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(t){e.setState({selectedEquipmentState:t.target.value,filteredEquipments:t.target.value?n.filter(function(e){return Object(u.g)(e.equipmentState)==t.target.value}):n})},value:_||""},o.createElement("option",{value:""},"Select Equipment State"),o.createElement("option",{value:"Planned"},"Planned"),o.createElement("option",{value:"Ordered"},"Ordered"),o.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),o.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),o.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),o.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),o.createElement("option",{value:"Assembly"},"Assembly"),o.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),o.createElement("option",{value:"Kitting"},"Kitting"),o.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),o.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),o.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),o.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),o.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),o.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),o.createElement("option",{value:"Existing"},"Existing In Use"),o.createElement("option",{value:"Retired"},"Retired"),o.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),o.createElement("option",{value:"Sold"},"Sold"),o.createElement("option",{value:"DisposedOf"},"Disposed Of"),o.createElement("option",{value:"ErrorDeleted"},"Error Deleted")))),V&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding center"},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn btn-dark",style:{width:"130px"},"data-toggle":"modal","data-target":"#ECMSummaryDialog",title:"Energy Conservation Measures",onClick:function(){e.setState({showECMSummary:!0})}},"ECM Summary"),o.createElement(s.a,{id:"ECMSummaryDialog",showCancelButton:!1,showSaveButton:!1,isfullHeight:!1,isFullWidth:!0,onCancelButtonClick:function(){e.setState({showECMSummary:!1})}},F&&o.createElement("div",null,o.createElement(S.a,{buildingName:B,instance:T,infoEntity:"Equip",entityNames:n.filter(function(e){return e.inspectionVisibility&&e.inspectionVisibility.showECM}).map(function(e){return Object(u.g)(e.equip)})}))),o.createElement("button",{className:"btn btn-dark",style:{width:"130px"},"data-toggle":"modal","data-target":"#RCXSummaryDialog",title:"Retro-Commissioning",onClick:function(){e.setState({showRCXSummary:!0})}},"RCX Summary"),o.createElement(s.a,{id:"RCXSummaryDialog",showCancelButton:!1,showSaveButton:!1,isfullHeight:!1,isFullWidth:!0,onCancelButtonClick:function(){e.setState({showRCXSummary:!1})}},R&&o.createElement("div",null,o.createElement(w.a,{buildingName:B,instance:T,infoEntity:"Equip",entityNames:n.filter(function(e){return e.inspectionVisibility&&e.inspectionVisibility.showRCX}).map(function(e){return Object(u.g)(e.equip)})}))),o.createElement("button",{className:"btn btn-dark",style:{width:"130px"},"data-toggle":"modal","data-target":"#CASummaryDialog",title:"Condition Assessment",onClick:function(){e.setState({showCASummary:!0})}},"CA Summary"),o.createElement(s.a,{id:"CASummaryDialog",showCancelButton:!1,showSaveButton:!1,isfullHeight:!1,isFullWidth:!0,onCancelButtonClick:function(){e.setState({showCASummary:!1})}},q&&o.createElement("div",null,o.createElement(I.a,{buildingName:B,instance:T,infoEntity:"Equip",entityNames:n.filter(function(e){return e.inspectionVisibility&&e.inspectionVisibility.showRCX}).map(function(e){return Object(u.g)(e.equip)})}))))),o.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 no-padding"},o.createElement(g.a,null)))),o.createElement("div",{className:"card  padding-10",id:"EquipmentsList",style:{paddingTop:"0px",backgroundColor:"white",boxShadow:"none"}},o.createElement("div",{className:"content",style:{paddingTop:"10px"}},o.createElement("div",{className:"dataCard"},o.createElement("div",{className:"row hidden-xs no-padding"},o.createElement("div",{className:"col-md-12 no-padding"},o.createElement("div",{className:"col-md-12 dataCard"},i.find(function(e){return"Equipment"==e.name&&1==e.selected})&&o.createElement("div",{className:W?"col-md-2":"col-md-2 col-sm-2 col-xs-2 small grid-header-left",onClick:function(){return e.sortEquipment("Equipment")}},o.createElement("i",{className:"fa fas fa-sort"})," Equipment  "),i.find(function(e){return"Floor"==e.name&&1==e.selected})&&o.createElement("div",{className:W?"col-md-2":"col-md-2 col-sm-2 col-xs-2 small grid-header",onClick:function(){return e.sortEquipment("Floor")}}," ",o.createElement("i",{className:"fa fas fa-sort"}),"Floor "),i.find(function(e){return"Space"==e.name&&1==e.selected})&&o.createElement("div",{className:W?"col-md-2":"col-md-2 col-sm-2 col-xs-2 small grid-header",onClick:function(){return e.sortEquipment("Space")}},o.createElement("i",{className:"fa fas fa-sort"}),"Space "),i.find(function(e){return"Equipment Type"==e.name&&1==e.selected})&&o.createElement("div",{className:W?"col-md-2":"col-md-2 col-sm-2 col-xs-2 small grid-header",onClick:function(){return e.sortEquipment("Equipment Type")}},o.createElement("i",{className:"fa fas fa-sort"}),"Equipment Type "),D&&o.createElement("div",{className:"col-md-1 col-sm-12 small grid-header"},"\xa0 \xa0Inspections"),o.createElement("div",{id:"actionremove",style:{paddingLeft:"10px"},className:W?"col-md-1":"col-md-4 col-sm-2 col-xs-2 small grid-header "},"Action ")))),k&&k.length>0&&k.map(function(n,r){var s=Object(u.g)(n.virtualBIM),c=Object(u.g)(n.cadBIM);return o.createElement("div",{key:r,className:"row clickable no-padding"},o.createElement("div",{className:"col-md-12 no-padding"},i.find(function(e){return"Equipment"==e.name&&1==e.selected})&&o.createElement("div",{className:"col-md-2 col-sm-2 padding-5 trim-data small grid-left margin-top"},o.createElement("span",{className:"hidden visible-xs-inline headingText"},"Equipment"),o.createElement("a",{href:"#"+T+"/"+B+"/Equip/Profile/"+n.equip.value,title:Object(u.g)(n.equipRdfsLabel)},Object(u.g)(n.equipRdfsLabel))),i.find(function(e){return"Floor"==e.name&&1==e.selected})&&o.createElement("div",{className:"col-md-2 col-sm-2 padding-5 small grid margin-top",title:Object(u.g)(n.floorRdfsLabel)},o.createElement("span",{className:"hidden visible-xs-inline headingText"},"Floor"),Object(u.g)(n.floorRdfsLabel)),i.find(function(e){return"Space"==e.name&&1==e.selected})&&o.createElement("div",{className:"col-md-2 col-sm-2 padding-5 small grid margin-top trim-data",title:Object(u.g)(n.spaceRdfsLabel)},o.createElement("span",{className:"hidden visible-xs-inline headingText"},"Space"),Object(u.g)(n.spaceRdfsLabel)),i.find(function(e){return"Equipment Type"==e.name&&1==e.selected})&&o.createElement("div",{className:"col-md-2 col-sm-2 padding-5 small grid margin-top",title:Object(u.g)(n.type).replace(new RegExp("MiscAndProcess","g"),"Misc & Process")},o.createElement("span",{className:"hidden visible-xs-inline headingText"},"Equipment Type"),Object(u.g)(n.type).replace(new RegExp("MiscAndProcess","g"),"Misc & Process")),i.find(function(e){return"Inspections"==e.name&&1==e.selected})&&D&&o.createElement("div",{className:"col-md-1 col-sm-12",style:{padding:"0px 2px 0px 0px"}},o.createElement(h.a,{entityName:Object(u.g)(n.equip),inspectionVisibility:n.inspectionVisibility,workflow:a,inspectionOntology:D})),X&&o.createElement("div",{"data-html2canvas-ignore":"true",className:W?"col-md-3":"col-md-4 col-sm-2 col-xs-2 small pull-right ",style:{paddingLeft:"0px",justifyContent:"flex-end",display:"flex"}},o.createElement("div",null,o.createElement("a",{className:"btn-sm btn-success active pull-right",title:"Edit",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(e){t.onChangeEquipmentList([]),t.onChangeEquipment(n.equip.value),setTimeout(function(){window.location.hash=T+"/"+B+"/EditEquipment/"+n.equip.value},500)}},o.createElement("i",{style:{width:16},className:"fa fa-edit"})," "),!U&&o.createElement(v.a,{instance:T,i:r,buildingName:B,columns:i,cadBIM:c,n:n,virtualBIM:s,handleMatterport:e.handleMatterport,isCollapse:U}),U&&o.createElement("a",{className:"pull-right equipspeclbtn","data-toggle":"collapse",href:"#equipDropdown"+r,title:"Click Me..."}," ",o.createElement("i",{style:{width:13,marginTop:4},className:"fa fa-bars"}))),U&&o.createElement("div",{id:"equipDropdown"+r,className:"equipDropdown panel-collapse collapse"},o.createElement(v.a,{instance:T,i:r,buildingName:B,columns:i,cadBIM:c,n:n,virtualBIM:s,handleMatterport:e.handleMatterport,isCollapse:U})))))}))),o.createElement("button",{id:"btnVirtualBIMDialog",className:"hidden","data-toggle":"modal","data-target":"#virtualBIMDialog",title:"Add"},". "),f&&o.createElement(y.a,{id:"virtualBIMDialog",heading:"Digital Twin 3D Space Equipment View",showSaveButton:!1,sweeps:c,bimURL:p,isViewForm:!0,addCurrentSweep:l,buildingName:e.props.buildingName,isRefreshDialog:!1,isSweepChangeable:!1,showFloorMap:!0,floor:d,onDialogCancelButton:e.onDialogCancelButton,showInBuildingRoutes:!0,space:x}),o.createElement("button",{id:"btnNoStepsFound",className:"hidden","data-toggle":"modal","data-target":"#NoStepsFound",title:"Add"},". "),o.createElement(s.a,{id:"NoStepsFound",heading:"Digital Twin 3D Space Equipment View",showSaveButton:!1,showCancelButton:!0},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("h4",{className:"modal-title",style:{textAlign:"center"}},"No Virtual Equipment View"),o.createElement("div",{className:"text-center"},o.createElement("br",null),o.createElement("a",{className:"modal-title","data-dismiss":"modal",style:{color:"black"},onClick:function(){window.location.href="#"+T+"/"+B+"/EditEquipment/"+j}},"Click here to add virtual equipment view"))))))))))})},t}(o.Component);t.default=A},2747:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(12)),o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.checkInventory=n.checkInventory.bind(n),n}return o(t,e),t.prototype.checkInventory=function(e){return r(this,void 0,void 0,function(){var t,n,i;return s(this,function(a){return t=this.props,n=t.instance,i=t.buildingName,window.location.hash=n+"/"+i+"/ViewAssetInventory/"+e,[2]})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,o=t.buildingName,r=t.columns,s=t.virtualBIM,c=t.cadBIM,l=t.n,u=t.i,m=t.isCollapse,p=(this.state,m?"custom-icon-btn":"custom-app-icon"),d=m?"icon-img":"icon-app-img";return i.createElement(i.Fragment,null,m&&i.createElement("a",{className:"pull-right equipspeclbtn","data-toggle":"collapse",href:"#equipDropdown"+u,title:"Click Me..."}," ",i.createElement("i",{style:{width:13,marginTop:4},className:"fa fa-ellipsis-h"})," "),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Inventory",onClick:function(t){e.checkInventory(Object(a.g)(l.equip))},style:{border:"1px solid transparent",backgroundColor:"#ef5a26"}},i.createElement("img",{className:d,src:"assets/img/inventory.png"})),r.find(function(e){return"Digital Twin 3D Space"==e.name&&1==e.selected})&&s&&i.createElement("button",{className:"btn-sm btn-success active pull-right "+p,title:"Digital Twin 3D Space",style:{border:"1px solid transparent",backgroundColor:"#A69888"},onClick:function(){e.props.handleMatterport(l,s)}},i.createElement("img",{className:d,src:"assets/img/virtual-bim.png"})),r.find(function(e){return"Virtual BIM"==e.name&&1==e.selected})&&c&&i.createElement("a",{className:"btn-sm btn-success active pull-right "+p,title:"Virtual BIM",href:c&&c.indexOf("ttp")>0?c:"http://"+c,target:"_blank",style:{border:"1px solid transparent",backgroundColor:"#963D5A"}},i.createElement("img",{className:d,src:"assets/img/digital-twin.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Points",onClick:function(e){window.location.hash=n+"/"+o+"/Points/Equip/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#FFC857"}},i.createElement("img",{className:d,src:"assets/img/points.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Devices",onClick:function(e){window.location.hash=n+"/"+o+"/Devices/Equip/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#399E5A"}},i.createElement("img",{className:d,src:"assets/img/devices.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Zones",onClick:function(e){window.location.hash=n+"/"+o+"/Zones/Equip/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#6A0136"}},i.createElement("img",{className:d,src:"assets/img/zones.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Work",onClick:function(e){window.location.hash=n+"/"+o+"/WorkOrders/Equip/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#5A5353"}},i.createElement("img",{className:d,src:"assets/img/work2.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Tasks",onClick:function(e){window.location.hash=n+"/"+o+"/Tasks/Equip/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#28AFB0"}},i.createElement("img",{className:d,src:"assets/img/Tasks2.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Space Insights",onClick:function(e){window.location.hash=n+"/"+o+"/Insights/EquipmentInsights/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#01BAEF"}},i.createElement("img",{className:d,src:"assets/img/insight.png"})),i.createElement("a",{className:"btn-sm btn-success pull-right "+p,title:"Alarms",onClick:function(e){window.location.hash=n+"/"+o+"/Alarms/OperationalAlarms/Equip/"+l.equip.value},style:{border:"1px solid transparent",backgroundColor:"#D80C09"}},i.createElement("img",{className:d,src:"assets/img/alarm.png"})))},t}(i.Component);t.a=c},714:function(e,t,n){"use strict";t.g=function(e,t,n,c){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},i.a.LIFE.SaveProject,o.b.LIFE).then(function(){Object(a.b)("Project saved Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Project.")})];case 1:return[2,r.sent()]}})})},t.r=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetProjectList,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteProject,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({model:e},i.a.LIFE.SaveProjectSolution,o.b.LIFE).then(function(){Object(a.b)("Solution saved Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({spreadSheetId:e,fileType:t},i.a.LIFE.ExportSheet,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e?[4,Object(i.e)({projectId:e},i.a.LIFE.GetSolutionList,o.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.u=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e?[4,Object(i.e)({inspectionOntology:e},i.a.LIFE.GetSolutionListForInspection,o.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.s=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({solutionId:e},i.a.LIFE.GetSolution,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteSolution,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({manageFile:e,fileData:t},i.a.LIFE.ManageFile,o.b.LIFE).then(function(){Object(a.b)("Upload Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({communityFile:e,fileData:t},i.a.LIFE.SaveCommunityFile,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetManageFile,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetCommunityFile,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ManageFile:e},i.a.LIFE.DeleteManageFile,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({communityFile:e},i.a.LIFE.DeleteCommunityFile,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetProject,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.SaveEmailAndDrive,o.b.LIFE)];case 1:return[2,a.sent()]}})})},t.j=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({email:e,instance:t},i.a.LIFE.ShareCommunityFolder,o.b.LIFE).then(function(e){e.result?Object(a.b)("Successfully Share."):Object(a.a)("The user Email is not valid.")}).catch(function(e){Object(a.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.ShareMMTemplateFolder,o.b.LIFE).then(function(e){e.result?Object(a.b)("Successfully Share."):Object(a.a)("The user Email is not valid.")}).catch(function(e){Object(a.a)("Something Went Wrong!")})];case 1:return[2,r.sent()]}})})},t.i=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({templatePurpose:e},i.a.LIFE.SaveTemplatePurpose,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetTemplatePurpose,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),i=e.getDate().toString().padStart(2,0),a=e.getHours().toString().padStart(2,0),o=e.getMinutes().toString().padStart(2,0),r=e.getSeconds().toString().padStart(2,0);return t+n+i+a+o+r};var i=n(11),a=n(21),o=n(13),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}},866:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(677)),o=n(681),r=n(54),s=n(20),c=n(716),l=n(8),u=n(711),m=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),p=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentConditions:[],ccLabel:[],labelsDropDownList:[],selectedAttachment:void 0},n.addItem=n.addItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCurrentConditionLabelChange=n.handleCurrentConditionLabelChange.bind(n),n.handleCCLabelChange=n.handleCCLabelChange.bind(n),n.removeItem=n.removeItem.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return m(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){return p(this,void 0,void 0,function(){return d(this,function(t){return e.buildingName&&e.instance&&this.setState({currentConditions:e.currentConditions}),[2]})})},t.prototype.componentDidMount=function(){return p(this,void 0,void 0,function(){var e;return d(this,function(t){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e})),this.props.buildingName&&this.props.instance&&this.setState({currentConditions:this.props.currentConditions}),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.currentConditions;t.ccLabel.map(function(e){var t={preRCXName:"",ccBoolean:!1,ccLabel:e.value,proposedRCX:"",photo:"",entryTimeStamp:void 0};n||(n=[]),n.push(t)}),this.setState({currentConditions:n,ccLabel:[]},function(){return p(e,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this.props.handleAdder(n,this.props.isInspectionOrCleanliness)];case 1:return e.sent(),[2]}})})})},t.prototype.removeItem=function(e){var t=this.state.currentConditions;t.splice(e,1),this.setState({currentConditions:t}),this.props.handleAdder(t,this.props.isInspectionOrCleanliness)},t.prototype.handleCurrentConditionLabelChange=function(e){var t=this.state.ccLabel;t=e,this.setState({ccLabel:t})},t.prototype.handleCCLabelChange=function(e){this.setState({ccLabel:e})},t.prototype.handleItemChange=function(e,t){var n=this,i=this.state.currentConditions,a=t.target.name,o=i&&i[e];o[""+a]="ccBoolean"==a?t.target.checked:t.target.value,this.setState({currentConditions:i},function(){"ccBoolean"!=a&&document.getElementById(n.props.isInspectionOrCleanliness+"rcxCC"+e).focus()}),this.props.handleAdder(i,this.props.isInspectionOrCleanliness)},t.prototype.handleFileAttachment=function(e,t){var n=this,i=this.props,a=i.buildingName,o=i.entityName,c=i.infoEntity,m=JSON.parse(l.a.getItem("user")),p=this.state.currentConditions,d=p[t];try{if(e&&e.name&&(e.file||e.length>0)&&d){var h,f,b=this.props.buildingName+"-_-"+Object(s.C)(10),g=e.name.substring(e.name.indexOf("."));h=""+b+g,f=e,p[t].photo=h,this.setState({currentConditions:p,selectedAttachment:e},function(){n.props.handleAdder(p,n.props.isInspectionOrCleanliness),(new r.b).UploadFile(r.a.DOCUMENT(),h,f,function(){var t={building:a,docOntology:Object(s.C)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:m.contact,enteredByName:m.name,entityOntology:[{label:"",value:o}],entityType:c,rdfsLabel:e.name,s3FileName:h,entryTimeStamp:(new Date).toString(),linkToDocument:h};Object(u.f)(t).then(function(){})})})}}catch(e){}},t.prototype.render=function(){var e=this,t=this.state,n=t.currentConditions,s=t.ccLabel,l=t.labelsDropDownList,u=this.props,m=u.hideAddButton,p=u.isView,d=u.isFromReport,h=new r.b;return i.createElement(i.Fragment,null,n&&n.map(function(t,n){var o="";return t.photo&&(t.photo.toLowerCase().indexOf(".mp4")>0&&(o="assets/img/video-file-icon.png"),t.photo.toLowerCase().indexOf(".pdf")>0&&(o="assets/img/pdf-file-icon.png"),(t.photo.toLowerCase().indexOf(".xls")>0||t.photo.toLowerCase().indexOf(".csv")>0)&&(o="assets/img/excel-file-icon.png"),(t.photo.toLowerCase().indexOf(".docx")>0||t.photo.toLowerCase().indexOf(".txt")>0)&&(o="assets/img/doc-file-icon.png"),(t.photo.toLowerCase().indexOf(".png")>0||t.photo.toLowerCase().indexOf(".jpeg")>0||t.photo.toLowerCase().indexOf(".jpg")>0||t.photo.toLowerCase().indexOf(".tiff")>0)&&(o=h.GetSignedURL(r.a.DOCUMENT(),t.photo))),i.createElement("div",{key:n,className:"row padding-5",style:{borderBottom:"1px dotted #20cac738"}},i.createElement("div",{className:"col-md-3"},i.createElement("label",{htmlFor:"ccBoolean"+n},t.ccLabel)),i.createElement("div",{className:"col-md-1",style:{maxWidth:120}},i.createElement("div",{className:"switch-container"},"No / Yes",i.createElement("label",null,i.createElement("input",{id:"ccBoolean"+n,disabled:p,name:"ccBoolean",checked:t.ccBoolean,onChange:function(t){e.handleItemChange(n,t)},className:"switch",type:"checkbox"}),i.createElement("div",null,i.createElement("div",null))))),!t.ccBoolean&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},i.createElement("label",{className:"pull-right",htmlFor:t.proposedRCX},"Describe Proposed RCX:")),i.createElement("div",{className:"col-md-4"},i.createElement("textarea",{disabled:p,id:e.props.isInspectionOrCleanliness+"rcxCC"+n,className:"form-control",value:t.proposedRCX,name:"proposedRCX",onChange:function(t){return e.handleItemChange(n,t)},style:{width:"100%",height:"60px",resize:"vertical"}})),i.createElement("div",{className:"col-md-1"},i.createElement("button",{type:"button",disabled:p||d,className:"btn btn-dark pull-right",style:{fontWeight:"bold",fontSize:"12pt",width:"70px"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Upload Attachment",onClick:function(){e.setState({selectedAttachment:void 0})}},t.photo&&t.photo.length>3?i.createElement("img",{src:o,style:{height:20}}):i.createElement("i",{className:"fa fa-paperclip"})),i.createElement(a.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness+n,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},i.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t[0],n)},files:e.state.selectedAttachment?[e.state.selectedAttachment]:[],single:!0})))),i.createElement("div",{className:"col-md-1"},!d&&n>=0&&i.createElement("button",{disabled:p,type:"button",className:"btn btn-danger",title:"Remove Item",style:{fontWeight:"bold",fontSize:"12pt"},onClick:function(){return e.removeItem(n)}},i.createElement("i",{className:"fa fa-remove"}))))}),!m&&!d&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-1"},i.createElement("label",null,"Add:")),i.createElement("div",{className:"col-md-11 col-xs-11"},i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog_"+this.props.isInspectionOrCleanliness},i.createElement("i",{className:"fa fa-plus"}))),i.createElement(a.a,{disableSaveButton:!s,id:"AddLabelDialog_"+this.props.isInspectionOrCleanliness,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.isInspectionOrCleanliness+" labels"},l&&l.length>0&&i.createElement("div",{className:"form-group"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCCLabelChange,placeholder:this.props.isInspectionOrCleanliness+" labels",options:l,value:s}))))))))},t}(i.Component);t.a=h},867:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(677)),o=n(54),r=n(20),s=n(716),c=n(8),l=n(711),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={rcxItems:[],selectedAttachment:void 0},n.handleNotesChange=n.handleNotesChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return u(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){return m(this,void 0,void 0,function(){return p(this,function(t){return this.setState({rcxItems:e.rcxItems}),[2]})})},t.prototype.handleNotesChange=function(e,t){var n=this,i=this.state.rcxItems;i[e].notesMeasurement=Object(r.J)(t.target.value,!0),this.setState({rcxItems:i},function(){document.getElementById(n.props.isInspectionOrCleanliness+"rcxTask"+e).focus()}),this.props.handleAdder(i)},t.prototype.handleFileAttachment=function(e,t){var n=this,i=this.state.rcxItems,a=this.props,s=a.buildingName,u=a.entityName,m=a.infoEntity,p=JSON.parse(c.a.getItem("user")),d=i[t];try{if(e&&(e.file||e.length>0)&&d){var h,f=this.props.buildingName+"-_-"+Object(r.C)(10),b="";i[t].photo=b,this.setState({rcxItems:i},function(){n.props.handleAdder(i),(new o.b).UploadFile(o.a.DOCUMENT(),b,h)});var g=e.name.substring(e.name.indexOf("."));b=""+f+g,h=e,i[t].photo=b,this.setState({rcxItems:i,selectedAttachment:e},function(){n.props.handleAdder(i),(new o.b).UploadFile(o.a.DOCUMENT(),b,h,function(){var t={building:s,docOntology:Object(r.C)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:p.contact,enteredByName:p.name,entityOntology:[{label:"",value:u}],entityType:m,rdfsLabel:e.name,s3FileName:b,entryTimeStamp:(new Date).toString(),linkToDocument:b};Object(l.f)(t).then(function(){})})})}}catch(e){}},t.prototype.render=function(){var e=this,t=this.state.rcxItems,n=this.props,c=n.isView,l=n.isFromReport,u=new o.b;return i.createElement(i.Fragment,null,t&&t.map(function(t,n){var m=u.GetSignedURL(o.a.DOCUMENT(),t.photo);return i.createElement("div",{key:n,className:"row padding-5",style:{borderBottom:"1px dotted #20cac738"}},i.createElement("div",{className:"col-md-5"},i.createElement("textarea",{disabled:!0,className:"form-control",value:t.ccLabel+": "+t.proposedRCX,style:{resize:"none"}})),i.createElement("div",{className:"col-md-5 col-md-offset-1"},i.createElement("textarea",{disabled:c,id:e.props.isInspectionOrCleanliness+"rcxTask"+n,className:"form-control",value:Object(r.J)(t.notesMeasurement,!1),placeholder:"Notes/Measurements",name:"proposedRCX",onChange:function(t){return e.handleNotesChange(n,t)},style:{resize:"vertical"}})),i.createElement("div",{className:"col-md-1"},i.createElement("button",{disabled:c||l,type:"button",className:"btn btn-dark",style:{fontWeight:"bold",fontSize:"12pt",width:"70px"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.isInspectionOrCleanliness+n,title:"Upload Image"},t.photo&&t.photo.length>3?i.createElement("img",{src:m,style:{height:20}}):i.createElement("i",{className:"fa fa-image"})),i.createElement(a.a,{id:"uploadImage"+e.props.isInspectionOrCleanliness+n,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.isInspectionOrCleanliness},i.createElement(s.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t[0],n)},files:e.state.selectedAttachment?[e.state.selectedAttachment]:[],single:!0}),t.photo&&t.photo.length>3?i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("br",null),i.createElement("img",{src:m,style:{height:150}})," "):i.createElement(i.Fragment,null))))}))},t}(i.Component);t.a=d},868:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],dropDownList:n.props.dropDownList},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleManufacturerChange=n.handleManufacturerChange.bind(n),n.handleModelChange=n.handleModelChange.bind(n),n}return a(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return r(this,function(e){return this.props.items&&this.setState({items:this.props.items}),[2]})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({dropDownList:e.dropDownList})},t.prototype.addItem=function(){var e={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:this.props.typePredicate},t=this.state.items;t?t.push(e):t=[e],this.setState({items:t}),this.props.handleAdder(t)},t.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t)},t.prototype.handleItemChange=function(e,t){var n=this.state.items;n[e].selectedItem=t,this.setState({items:n}),this.props.handleAdder(n)},t.prototype.handleManufacturerChange=function(e,t){var n=this.state.items;n[e].manufacturer=t,this.setState({items:n}),this.props.handleAdder(n)},t.prototype.handleModelChange=function(e,t){var n=this.state.items;n[e].model=t,this.setState({items:n}),this.props.handleAdder(n)},t.prototype.render=function(){var e=this,t=this.props,n=t.isView,a=t.isFromReport,o=t.dropDownLabel,r=this.state,s=r.items,c=r.dropDownList,l=s&&!1===s.map(function(e){return""!==e.selectedItem}).find(function(e){return!1===e}),u=s&&!l||!s,m=this.props.hideAddButton;return i.createElement(i.Fragment,null,s&&s.map(function(t,o){return a&&!t.selectedItem?i.createElement("div",null):i.createElement("div",{key:o,className:"row"},i.createElement("br",null),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"repcmp"},e.props.dropDownLabel),i.createElement("select",{className:"form-control",id:"repcmp",disabled:n,value:t.selectedItem,onChange:function(t){return e.handleItemChange(o,t.target.value)}},i.createElement("option",{value:"",key:-2},"Select Item"),c&&c.map(function(e,t){return i.createElement("option",{key:t,value:e},e)})))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"man"},"Manufacturer"),i.createElement("input",{type:"text ",disabled:n,id:"man",className:"form-control",value:t.manufacturer,onChange:function(t){return e.handleManufacturerChange(o,t.target.value)}}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"model"},"Model"),i.createElement("input",{type:"text ",disabled:n,id:"model",className:"form-control",value:t.model,onChange:function(t){return e.handleModelChange(o,t.target.value)}}))),i.createElement("div",{className:"col-md-1 padding-10"},i.createElement("br",null),o>0&&!a&&i.createElement("button",{type:"button",className:"btn btn-danger btn-xs",title:"Remove Item",onClick:function(){return e.removeItem(o)}},i.createElement("i",{className:"fa fa-remove"}))))}),!m&&!a&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 inline-flex padding-10"},i.createElement("label",null,"Add ",o,":")," \xa0\xa0",i.createElement("button",{type:"button",disabled:!u,className:"btn btn-dark btn-fill btn-sm",title:"Add Item",onClick:this.addItem},i.createElement("i",{className:"fa fa-plus"})))),i.createElement("br",null),i.createElement("br",null))},t}(i.Component);t.a=s},869:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(677)),o=n(681),r=n(54),s=n(20),c=n(716),l=n(13),u=n(711),m=n(8),p=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],caLabel:[],labelsDropDownList:[],files:[]},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCALabelChange=n.handleCALabelChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return h(this,function(t){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e})),[2]})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){return d(this,void 0,void 0,function(){return h(this,function(t){return e.items&&this.setState({items:e.items}),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.items;t.caLabel.map(function(t){var i={caName:"",age:"",assessmentLabel:t.value,notes:"",photo:[],repairCost:"",size:"",type:e.props.type,entryTimeStamp:"",typeOf:t.value};n||(n=[]),n.push(i)}),this.setState({items:n,caLabel:[]}),this.props.handleAdder(n,this.props.type)},t.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t,this.props.type)},t.prototype.handleCALabelChange=function(e){this.setState({caLabel:e})},t.prototype.handleItemChange=function(e,t){var n=this.state.items,i=t.target.name;(n&&n[e])[""+i]=t.target.value,this.setState({items:n}),this.props.handleAdder(n,this.props.type)},t.prototype.handleFileAttachment=function(e,t){var n=this,i=this.props,a=i.buildingName,o=i.entityName,c=i.infoEntity,l=JSON.parse(m.a.getItem("user")),p=this.state.items,d=p[t];e&&e.length>0&&e[0].file&&d&&this.setState({items:p,files:e},function(){for(var i=function(i){var m,d,h=e[i],f=n.props.buildingName+"-_-"+Object(s.C)(10),b=h.name.substring(h.name.indexOf("."));m=""+f+b,d=h,p[t].photo[0]=m,n.props.handleAdder(p,n.props.type),(new r.b).UploadFile(r.a.DOCUMENT(),m,d,function(){var e={building:a,docOntology:Object(s.C)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:l.contact,enteredByName:l.name,entityOntology:[{label:"",value:o}],entityType:c,rdfsLabel:h.name,s3FileName:m,entryTimeStamp:(new Date).toString(),linkToDocument:m};Object(u.f)(e).then(function(){})})},m=0;m<e.length;m++)i(m)})},t.prototype.handlefileAttached=function(e,t){if(e.length>0){for(var n=this.state.items,i=n[t],a=0;a<e.length;a++){var o=e[a].name.split(".").pop(),c=this.props.buildingName+"_"+Object(s.C)(15)+"."+o.toLowerCase();n[0].photo[a]=c}Object(l.g)(e),this.setState({files:e,items:n},function(){}),this.props.handleAdder(n,this.props.type);var u=new r.b,m=Object(l.d)();if(m&&m.length)for(var p=0;p<m.length;p++){var d=m[p];u.UploadFile(r.a.DOCUMENT(),i.photo[p],d)}}},t.prototype.render=function(){var e=this,t=this.state,n=t.items,s=t.caLabel,l=t.labelsDropDownList,u=this.props,m=u.caOf,p=u.hideAddButton,d=void 0!==p&&p,h=u.isFromReport,f=new r.b;return i.createElement(i.Fragment,null,n&&n.map(function(t,n){var o="";return t&&t.photo&&t.photo.length&&t.photo[0]&&(t.photo[0].toLowerCase().indexOf(".mp4")>0&&(o="assets/img/video-file-icon.png"),t.photo[0].toLowerCase().indexOf(".pdf")>0&&(o="assets/img/pdf-file-icon.png"),(t.photo[0].toLowerCase().indexOf(".xls")>0||t.photo[0].toLowerCase().indexOf(".csv")>0)&&(o="assets/img/excel-file-icon.png"),(t.photo[0].toLowerCase().indexOf(".docx")>0||t.photo[0].toLowerCase().indexOf(".txt")>0)&&(o="assets/img/doc-file-icon.png"),(t.photo[0].toLowerCase().indexOf(".png")>0||t.photo[0].toLowerCase().indexOf(".jpeg")>0||t.photo[0].toLowerCase().indexOf(".jpg")>0||t.photo[0].toLowerCase().indexOf(".tiff")>0)&&(o=f.GetSignedURL(r.a.DOCUMENT(),t.photo[0]))),i.createElement("div",{key:n,className:"row"},i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:t.assessmentLabel},t.assessmentLabel)),"Space"==m&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-1"},i.createElement("input",{type:"text",id:t.age,className:"form-control",value:t.age,placeholder:"Age",name:"age",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-1"},i.createElement("input",{type:"text",id:t.size,className:"form-control",value:t.size,placeholder:"Size",name:"size",onChange:function(t){return e.handleItemChange(n,t)}}))),i.createElement("div",{className:"Space"==m?"col-md-4":"col-md-6"},i.createElement("input",{type:"text",id:t.notes,className:"form-control",value:t.notes,placeholder:"Notes",name:"notes",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("input",{type:"text",id:t.repairCost,className:"form-control",value:t.repairCost,placeholder:"Approximate Repair Cost",name:"repairCost",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-1"},!h&&i.createElement("button",{type:"button",className:"btn btn-dark pull-right",style:{fontWeight:"bold",fontSize:"12pt",width:"70px"},"data-toggle":"modal","data-target":"#uploadImage"+e.props.type+n,title:"Upload Attachment",onClick:function(){e.setState({files:[]})}},t&&t.photo&&t.photo.length&&t.photo[0]?i.createElement("img",{src:o,style:{height:20}}):i.createElement("i",{className:"fa fa-paperclip"})),i.createElement(a.a,{disableSaveButton:!s,id:"uploadImage"+e.props.type+n,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.type},i.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t,n)},files:e.state.files,single:!1}))),i.createElement("div",{className:"col-md-1"},!h&&n>=0&&i.createElement("button",{type:"button",className:"btn btn-danger",title:"Remove Item",onClick:function(){return e.removeItem(n)}},i.createElement("i",{className:"fa fa-remove"})))))}),!d&&!h&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-11 col-xs-11"},i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog"+this.props.type,style:{fontWeight:"bold"}},i.createElement("i",{className:"fa fa-plus"}),"Add ",this.props.type)),i.createElement(a.a,{disableSaveButton:!s,id:"AddLabelDialog"+this.props.type,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.type},l&&l.length>0&&i.createElement("div",{className:"form-group"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCALabelChange,placeholder:this.props.type+" Assessment Labels",options:l,value:s}))))))))},t}(i.Component);t.a=f},972:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"rcxInspectionLabels",function(){return C}),n.d(t,"rcxCleanlinessLabels",function(){return N});var i,a,o=n(2),r=(n.n(o),n(718)),s=n(866),c=n(867),l=n(1021),u=n(12),m=n(118),p=n(685),d=n(712),h=n(714),f=n(730),b=n(20),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},E=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,s=o.length;r<s;r++,a++)i[a]=o[r];return i},C=["Appropriate Schedule","Sensors or Actuators Calibrated","Equal Load Distribution Across Equipment","Ventilation Rates are Appropriate","Automatic Reset Functioning","Adjustments Made to Compensate for Oversized/Undersized Equip","No Unintended Simultaneous Cooling/Heating Occurs","Economizer Controls Functioning Properly","Air/Water Distribution Balanced","Light Levels are Appropriate","Light Sensors and Controls are Function Properly","DHW Temp. Settings are Correct","Water Pumps Properly Functioning","There Are No Water/Air Leaks"],N=["Vents/Ducts/Coils Are Clean","Filters/Steam Traps are Clean","Components in Good Condition (belts, bearings, pulleys, etc.)","Proper Insulation/Sealant Where Required"],O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={activeTab:"Current Conditions",rcxObj:{currentSchedule:[],adjustedSchedule:[],currentConditionsCleanliness:[],currentConditionsInspections:[],rcxtasksCleanliness:[],rcxtasksInspections:[]},isCompleted:!1,inspectionOntologies:[],SolutionList:[]},i=n,n._saveCurrentConditions=n._saveCurrentConditions.bind(n),n.handleCurrentScheduler=n.handleCurrentScheduler.bind(n),n.handleAdjustedScheduler=n.handleAdjustedScheduler.bind(n),n.handleCCItems=n.handleCCItems.bind(n),n.handleRcxIncpectionItems=n.handleRcxIncpectionItems.bind(n),n.handleRcxCleanlinessItems=n.handleRcxCleanlinessItems.bind(n),n._saveRCXTaskList=n._saveRCXTaskList.bind(n),n._fetchPreRCX=n._fetchPreRCX.bind(n),n._fetchPostRCX=n._fetchPostRCX.bind(n),n.updateTaskChecklist=n.updateTaskChecklist.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return g(t,e),t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){return clearInterval(a),[2]})})},t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n,i,o,r=this;return y(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,i=e.entityName,t&&n&&i?[4,this.fetchInspection_IsComplete()]:[3,2];case 1:o=s.sent(),this.setState({isCompleted:o},function(){return v(r,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._fetchPreRCX()];case 1:return e.sent(),[4,this._fetchPostRCX()];case 2:return e.sent(),[2]}})})}),s.label=2;case 2:return this._getSolutionList(),a=setInterval(function(){var e=Object(f.a)("inspectionOntology");e!=Object(f.a)("inspectionOntology_Old")&&(Object(f.b)("inspectionOntology_Old",e),r._getSolutionList())},1e4),[2]}})})},t.prototype._getSolutionList=function(){return v(this,void 0,void 0,function(){var e,t=this;return y(this,function(n){switch(n.label){case 0:return e=Object(f.a)("inspectionOntology"),[4,Object(h.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,i,a;return y(this,function(o){switch(o.label){case 0:return e=this.props.entityName,[4,Object(d.h)(e,"RCX")];case 1:return t=o.sent(),n=this.state,i=n.isCompleted,a=n.inspectionOntologies,t?(i="true"==Object(u.g)(t.IsCompleted),a=Object(u.g)(t.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:a}),[2,i]):[2,!1]}})})},t.prototype._fetchPreRCX=function(){return v(this,void 0,void 0,function(){var e,t,n,a,o,r,s,c,m=this;return y(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,a=e.entityName,o=Object(f.a)("inspectionOntology"),r=this.state.rcxObj,s=[],c=[],[4,Object(l.d)(t,a,n).then(function(e){if(e){var t=e.filter(function(e){return Object(u.g)(e.inspection)==o});t&&t.map(function(e){var t=Object(u.g)(e.type),n={ccBoolean:"true"==Object(u.g)(e.ccBoolean),ccLabel:Object(u.g)(e.ccLabel),photo:Object(u.g)(e.photo),preRCXName:Object(u.g)(e.preRCXName),entryTimeStamp:Object(u.g)(e.entryTimeStamp),proposedRCX:Object(u.g)(e.proposedRCX)};"Cleanliness"!=t||s.find(function(e){return e.preRCXName==n.preRCXName})?"Inspection"!=t||c.find(function(e){return e.preRCXName==n.preRCXName})||c.push(n):s.push(n)}),r.currentConditionsCleanliness=s,r.currentConditionsInspections=c,r=m.updateTaskChecklist(r),i.setState({rcxObj:r})}})];case 1:return p.sent(),[2]}})})},t.prototype._fetchPostRCX=function(){return v(this,void 0,void 0,function(){var e,t,n,a,o,r,s,c;return y(this,function(m){switch(m.label){case 0:return e=this.props,t=e.buildingName,n=e.infoEntity,a=e.entityName,o=this.state.rcxObj,r=o.rcxtasksCleanliness,s=o.rcxtasksInspections,(c=E(r.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,a,n,c).then(function(e){e.map(function(e){var t=r.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),r.splice(r.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),r.push(t))}),o.rcxtasksCleanliness=r,i.setState({rcxObj:o})})]:[3,2];case 1:m.sent(),m.label=2;case 2:return c=[],(c=E(s.map(function(e){return e.preRCXName})))&&c.length>0?[4,Object(l.c)(t,a,n,c).then(function(e){e.map(function(e){var t=s.find(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)});t&&(t.photo=Object(u.g)(e.photo),t.entryTimeStamp=Object(u.g)(e.entryTimeStamp),t.notesMeasurement=Object(u.g)(e.notesMeasurement),s.splice(s.findIndex(function(t){return t.preRCXName==Object(u.g)(e.preRCXName)}),1),s.push(t))}),o.rcxtasksInspections=s,i.setState({rcxObj:o})})]:[3,4];case 3:m.sent(),m.label=4;case 4:return[2]}})})},t.prototype.updateTaskChecklist=function(e){var t=E(e.rcxtasksInspections);e.rcxtasksInspections=[],e.currentConditionsInspections&&e.currentConditionsInspections.map(function(n){if(0==n.ccBoolean){var i=t.find(function(e){return e.preRCXName==n.preRCXName});i&&n.preRCXName?(i.proposedRCX=n.proposedRCX,e.rcxtasksInspections.push(i)):e.rcxtasksInspections.push({postRCXName:"",preRCXName:n.preRCXName,proposedRCX:n.proposedRCX,ccLabel:n.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:""})}});var n=E(e.rcxtasksCleanliness);return e.rcxtasksCleanliness=[],e.currentConditionsCleanliness&&e.currentConditionsCleanliness.map(function(t){if(0==t.ccBoolean){var i=n.find(function(e){return e.preRCXName==t.preRCXName});i&&t.preRCXName?(i.proposedRCX=t.proposedRCX,e.rcxtasksCleanliness.push(i)):e.rcxtasksCleanliness.push({postRCXName:"",preRCXName:t.preRCXName,proposedRCX:t.proposedRCX,ccLabel:t.ccLabel.toString(),entryTimeStamp:void 0,photo:"",notesMeasurement:""})}}),e},t.prototype.handleCurrentScheduler=function(e){var t=this.state.rcxObj;t.currentSchedule=e,this.setState({rcxObj:t})},t.prototype.handleAdjustedScheduler=function(e){var t=this.state.rcxObj;t.adjustedSchedule=e,this.setState({rcxObj:t})},t.prototype.handleCCItems=function(e,t){return v(this,void 0,void 0,function(){var n;return y(this,function(i){return n=this.state.rcxObj,"inspection"==t?n.currentConditionsInspections=e:n.currentConditionsCleanliness=e,n=this.updateTaskChecklist(n),this.setState({rcxObj:n}),[2]})})},t.prototype.handleRcxIncpectionItems=function(e){var t=this.state.rcxObj;t.rcxtasksInspections=e,this.setState({rcxObj:t})},t.prototype.handleRcxCleanlinessItems=function(e){var t=this.state.rcxObj;t.rcxtasksCleanliness=e,this.setState({rcxObj:t})},t.prototype._saveCurrentConditions=function(e){return v(this,void 0,void 0,function(){var t,n,i,a,o,r,s,c,u,p,h=this;return y(this,function(b){switch(b.label){case 0:return Object(m.a)(!0),t=this.state,n=t.rcxObj,i=t.inspectionOntologies,a=t.SolutionList,o=this.props,r=o.buildingName,s=o.infoEntity,c=o.entityName,u=o.instance,p=Object(f.a)("inspectionOntology"),[4,Object(l.f)(r,s,c,n,p,!0,a,e)];case 1:return b.sent(),this.setState({rcxObj:n},function(){return v(h,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?p?(i.push(p),[4,Object(d.c)(c,i,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(s){case"Equip":window.location.hash=u+"/"+r+"/Assets";break;case"Space":window.location.hash=u+"/"+r+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(m.a)(!1),[2]}})})},t.prototype._saveRCXTaskList=function(e){return v(this,void 0,void 0,function(){var t,n,i,a,o,r,s,c,u,p,h=this;return y(this,function(b){switch(b.label){case 0:return Object(m.a)(!0),t=this.state,n=t.rcxObj,i=t.inspectionOntologies,a=t.SolutionList,o=this.props,r=o.buildingName,s=o.infoEntity,c=o.entityName,u=o.instance,p=Object(f.a)("inspectionOntology"),[4,Object(l.e)(r,s,c,n,!0,a,e)];case 1:return b.sent(),this.setState({rcxObj:n},function(){return v(h,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?p?(i.push(p),[4,Object(d.c)(c,i,"RCX")]):[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:switch(s){case"Equip":window.location.hash=u+"/"+r+"/Assets";break;case"Space":window.location.hash=u+"/"+r+"/Space";break;default:return[2,!1]}t.label=3;case 3:return[2]}})})}),Object(m.a)(!1),[2]}})})},t.prototype.unComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,i;return y(this,function(a){switch(a.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(f.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(i=0;i<t.length;i++)t[i]==n&&t.splice(i,1);return[4,Object(d.k)(e,t,"RCX")];case 1:a.sent(),a.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,a=t.entityName,l=t.infoEntity,u=t.viewOnly,m=this.state,d=m.activeTab,h=m.rcxObj,g=m.isCompleted,E=m.inspectionOntologies.find(function(e){return e==O}),O=Object(f.a)("inspectionOntology"),w=!!(E&&E.length>0);return o.createElement("div",{className:"content",style:{width:"100%"}},o.createElement("div",{className:"container-fluid",style:{width:"100%"}},o.createElement("div",{className:"row"},!u&&o.createElement("div",{className:"col-md-12"},o.createElement(r.a,{instance:this.props.instance,buildingName:n,tabName:l,showComponentButton:"Equip"==l,itemName:a,showAuditTypes:!0,showBIMButtons:!0})),o.createElement("div",{className:"card"},o.createElement("div",{className:"container-fluid padding-10"},!u&&o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("div",{className:"btn-group"},o.createElement("button",{className:"btn "+("Current Conditions"==d?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"Current Conditions"})}},"Current Conditions"),o.createElement("button",{className:"btn "+("RCX Task CheckList"==d?"btn-fill":"")+" btn-dark",onClick:function(){e.setState({activeTab:"RCX Task CheckList"})}}," RCX Task CheckList")),o.createElement("div",{className:"pull-right"},o.createElement(p.a,{ElementID:"retroCommissioning",data:this.state.rcxObj,filename:"Retro-Commissioning - "+Object(b.x)(a),beforeExportPdfClick:function(){$("#currentconditions").css("display","block"),$("#checklist").css("display","block")},afterExportPdfClick:function(){"Current Conditions"==d?$("#currentconditions").css("display","block"):$("#currentconditions").css("display","none"),"RCX Task CheckList"==d?$("#checklist").css("display","block"):$("#checklist").css("display","none")}}))),o.createElement("div",{className:"col-md-12 padding-10",id:"retroCommissioning"},o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("h3",{style:{margin:10}},"Retro-Commissioning - ",Object(b.x)(a))),o.createElement("div",{style:{display:"Current Conditions"==d||u?"block":"none"},id:"currentconditions",className:"col-md-12 padding-10"},o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("h4",{className:"title"},o.createElement("u",null,"Current Conditions"))),o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("h4",{className:"title"},"Inspections"),o.createElement("div",{className:"col-md-12 padding-10"},o.createElement(s.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"inspection",buildingName:n,instance:i,rcxOf:l,currentConditions:h.currentConditionsInspections,labels:C,entityName:a,infoEntity:l,isView:u,isFromReport:u}))),o.createElement("div",{className:"col-md-12 padding-10 "},o.createElement("h4",{className:"title"},"Cleanliness"),o.createElement("div",{className:"col-md-12 padding-10"},o.createElement(s.a,{handleAdder:this.handleCCItems,isInspectionOrCleanliness:"cleanliness",buildingName:n,instance:i,rcxOf:l,currentConditions:h.currentConditionsCleanliness,labels:N,entityName:a,infoEntity:l,isView:u,isFromReport:u}))),!u&&o.createElement("div",{className:"col-md-12 padding-10 ","data-html2canvas-ignore":"true"},o.createElement("div",{className:"form-group"},o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return v(e,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._saveCurrentConditions(!1)];case 1:return e.sent(),[2]}})})}},o.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",!g&&o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCurrentConditions(!0)}},o.createElement("i",{className:"fa fa-save"})," Save & Complete"),g&&o.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},o.createElement("b",null,"Remove Inspection Completion"))))),o.createElement("div",{style:{display:"RCX Task CheckList"==d||u?"block":"none"},id:"checklist",className:"col-md-12 padding-10"},o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("h4",{className:"title"},o.createElement("u",null,"RCX Task CheckList"))),o.createElement("div",{className:"col-md-12 padding-10 "},o.createElement("h4",{className:"title"},"Inspections"),o.createElement("div",{className:"col-md-12 padding-10"},o.createElement(c.a,{handleAdder:this.handleRcxIncpectionItems,buildingName:n,instance:i,rcxOf:l,rcxItems:h.rcxtasksInspections,isInspectionOrCleanliness:"Inspection",entityName:a,infoEntity:l,isView:u,isFromReport:u}))),o.createElement("div",{className:"col-md-12 padding-10 "},o.createElement("h4",{className:"title"},"Cleanliness"),o.createElement("div",{className:"col-md-12 padding-10"},o.createElement(c.a,{handleAdder:this.handleRcxCleanlinessItems,buildingName:n,instance:i,rcxOf:l,rcxItems:h.rcxtasksCleanliness,isInspectionOrCleanliness:"Cleanliness",entityName:a,infoEntity:l,isView:u,isFromReport:u}))),!u&&o.createElement("div",{className:"col-md-12 padding-10 ","data-html2canvas-ignore":"true"},o.createElement("div",{className:"form-group"},o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return v(e,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this._saveRCXTaskList(!1)];case 1:return e.sent(),[2]}})})}},o.createElement("i",{className:"fa fa-save"})," Save"),"\xa0",(g||!g)&&o.createElement(o.Fragment,null," ",!w&&o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveRCXTaskList(!0)}},o.createElement("i",{className:"fa fa-save"})," Save & Complete")),g&&w&&o.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},o.createElement("b",null,"Remove Inspection Completion"))))))))),o.createElement("br",null)))},t}(o.Component);t.default=O},973:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a,o=n(2),r=(n.n(o),n(718)),s=n(868),c=n(683),l=n(12),u=n(1020),m=n(118),p=n(685),d=n(712),h=n(714),f=n(730),b=n(20),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},E=["Fan","Compressor","Motor","Pump","Ballast","Lamp","Other"],C=["VFD","Dimmer","Occ. Sensor","Controls","Other"],N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ecm:{ecmItems:[],item:n.props.entityName,notes:"",proposeSchedule:[]},replacementEquipmentList:[],isCompleted:!1,inspectionOntologies:[],SolutionList:[]},i=n,n.handleECMItems=n.handleECMItems.bind(n),n.handleScheduler=n.handleScheduler.bind(n),n._saveSchedulerInformation=n._saveSchedulerInformation.bind(n),n._saveECM=n._saveECM.bind(n),n.getEquipmentType=n.getEquipmentType.bind(n),n.fetchECM=n.fetchECM.bind(n),n.fetchECM_Notes=n.fetchECM_Notes.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return g(t,e),t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){return clearInterval(a),[2]})})},t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e,t,n,i=this;return y(this,function(o){switch(o.label){case 0:return Object(m.a)(!0),this._getSolutionList(),a=setInterval(function(){var e=Object(f.a)("inspectionOntology");e!=Object(f.a)("inspectionOntology_Old")&&(Object(f.b)("inspectionOntology_Old",e),i._getSolutionList())},1e4),"Equip"==this.props.infoEntity&&this.getEquipmentType(),this.props.infoEntity&&this.props.entityName?(e=this.state.ecm,t=e,[4,this.fetchECM_Notes()]):[3,3];case 1:return t.notes=o.sent(),[4,this.fetchInspection_IsComplete()];case 2:n=o.sent(),this.setState({ecm:e,isCompleted:n},function(){return v(i,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this.fetchECM()];case 1:return e.sent(),[2]}})})}),o.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype._getSolutionList=function(){return v(this,void 0,void 0,function(){var e,t=this;return y(this,function(n){switch(n.label){case 0:return(e=Object(f.a)("inspectionOntology"))?[4,Object(h.u)(e).then(function(e){t.setState({SolutionList:e})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.fetchECM_Notes=function(){return v(this,void 0,void 0,function(){var e,t,n,i;return y(this,function(a){switch(a.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,i=e.infoEntity,[4,Object(u.c)(t,n,i).then(function(e){return e?Object(l.g)(e):""})];case 1:return[2,a.sent()]}})})},t.prototype.fetchInspection_IsComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,i,a;return y(this,function(o){switch(o.label){case 0:return e=this.props.entityName,[4,Object(d.h)(e,"ECM")];case 1:return t=o.sent(),n=this.state,i=n.isCompleted,a=n.inspectionOntologies,t&&Object(l.g)(t.inspectionOntology).length>0?(i="true"==Object(l.g)(t.IsCompleted),a=Object(l.g)(t.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:a}),[2,i]):[2,!1]}})})},t.prototype.fetchECM=function(){return v(this,void 0,void 0,function(){var e,t,n,a,o,r=this;return y(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,a=e.infoEntity,o=Object(f.a)("inspectionOntology"),[4,Object(u.b)(t,n,a,o).then(function(e){var t=r.state.ecm,n=e.filter(function(e){return Object(l.g)(e.inspectionOntology)==o});if(n&&n.map(function(e){var n={ecmName:Object(l.g)(e.ecmName),manufacturer:Object(l.g)(e.manufacturer),model:Object(l.g)(e.model),selectedItem:Object(l.g)(e.selectedItem),type:Object(l.g)(e.type),inspectionOntology:Object(l.g)(e.inspectionOntology)};t.ecmItems.push(n)}),t.ecmItems&&!(t.ecmItems.length>0)){var a={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:"hasECMRComp",inspectionOntology:""};t.ecmItems.push(a),a={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:"hasECMNComp",inspectionOntology:""},t.ecmItems.push(a),a={ecmName:"",selectedItem:"",manufacturer:"",model:"",type:"hasECMREquip",inspectionOntology:""},t.ecmItems.push(a)}i.setState({ecm:t})})];case 1:return s.sent(),[2]}})})},t.prototype.getEquipmentType=function(){return v(this,void 0,void 0,function(){var e,t,n,a=this;return y(this,function(o){return e=this.props,t=e.buildingName,n=e.entityName,Object(c.v)(t,n).then(function(e){return v(a,void 0,void 0,function(){return y(this,function(t){return Object(c.u)(Object(l.g)(e[0]),2).then(function(e){var t=e.map(function(e){return Object(l.g)(e)});i.setState({replacementEquipmentList:t})}),[2]})})}),[2]})})},t.prototype.handleECMItems=function(e){var t=this.state.ecm,n=[];e&&e.length>0&&(n=t.ecmItems.filter(function(t){return t.type!=e[0].type})).push.apply(n,e),t.ecmItems=n,this.setState({ecm:t})},t.prototype.handleScheduler=function(e){var t=this.state.ecm;t.proposeSchedule=e,this.setState({ecm:t})},t.prototype._saveSchedulerInformation=function(){},t.prototype.handleNotesChange=function(e){var t=this.state.ecm;t.notes=e,this.setState({ecm:t})},t.prototype._saveECM=function(e){return v(this,void 0,void 0,function(){var t,n,i,a,o,r,s,c,l,p;return y(this,function(h){switch(h.label){case 0:return Object(m.a)(!0),t=this.state,n=t.ecm,i=t.inspectionOntologies,a=t.SolutionList,o=this.props,r=o.buildingName,s=o.infoEntity,c=o.instance,l=Object(f.a)("inspectionOntology"),p=!1,n.ecmItems&&n.ecmItems.length>0&&n.ecmItems[0].ecmName&&(p=!0),l?(!!i.find(function(e){return e==l})||i.push(l),[4,Object(u.d)(r,s,n,p,l,a,e)]):[3,3];case 1:return h.sent(),e?[4,Object(d.c)(n.item,i,"ECM")]:[3,3];case 2:switch(h.sent(),s){case"Equip":window.location.hash=c+"/"+r+"/Assets";break;case"Space":window.location.hash=c+"/"+r+"/Space";break;default:return[2,!1]}h.label=3;case 3:return setTimeout(function(){Object(m.a)(!1)},1e3),[2]}})})},t.prototype.unComplete=function(){return v(this,void 0,void 0,function(){var e,t,n,i,a;return y(this,function(o){switch(o.label){case 0:if(e=this.state,t=e.ecm,n=e.inspectionOntologies,i=Object(f.a)("inspectionOntology"),!(n&&n.length>0))return[3,2];if(!i)return[3,2];for(a=0;a<n.length;a++)n[a]==i&&n.splice(a,1);return[4,Object(d.k)(t.item,n,"ECM")];case 1:o.sent(),o.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,a=t.entityName,c=t.infoEntity,l=t.viewOnly,u=this.state,m=u.ecm,d=u.replacementEquipmentList,h=u.isCompleted,g=u.inspectionOntologies,v=Object(f.a)("inspectionOntology"),y=m.ecmItems.filter(function(e){return"hasECMRComp"==e.type}),N=m.ecmItems.filter(function(e){return"hasECMNComp"==e.type}),O=m.ecmItems.filter(function(e){return"hasECMREquip"==e.type}),w=g.find(function(e){return e==v}),S=!!(w&&w.length>0);return o.createElement("div",{className:"content"},o.createElement("div",{className:"container-fluid"},!l&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement(r.a,{instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:a,showAuditTypes:!0,showBIMButtons:!0}))),o.createElement("br",null),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 form-group"},o.createElement("div",{className:"pull-right"},o.createElement(p.a,{ElementID:"ecm",data:this.state.ecm,filename:"ecm - "+Object(b.x)(a)}))))),o.createElement("div",{className:"card"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"col-md-12 padding-10",id:"ecm"},o.createElement("div",{className:"col-md-12 padding-10"},o.createElement("h4",{style:{margin:5}},"Energy Conservation Measures - ",Object(b.x)(a))),o.createElement("div",{className:"col-md-12 padding-10 padding-10"},o.createElement("div",{className:"col-md-12"},y&&y.length>0&&o.createElement(s.a,{instance:i,buildingName:n,dropDownLabel:"Replacement Component",dropDownList:E,typePredicate:"hasECMRComp",items:y,handleAdder:this.handleECMItems,isView:l,isFromReport:l})),o.createElement("div",{className:"col-md-12"},N&&N.length>0&&o.createElement(s.a,{instance:i,buildingName:n,dropDownLabel:"New Component",dropDownList:C,typePredicate:"hasECMNComp",items:N,handleAdder:this.handleECMItems,isView:l,isFromReport:l})),o.createElement("div",{className:"col-md-12"},O&&O.length>0&&o.createElement(s.a,{instance:i,buildingName:n,dropDownLabel:"Replacement Equipment",dropDownList:d,typePredicate:"hasECMREquip",items:O,handleAdder:this.handleECMItems,hideAddButton:!0,isView:l,isFromReport:l})),o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"form-group"},o.createElement("div",{className:"col-md-2"},"Notes"),o.createElement("div",{className:"col-md-10"},o.createElement("textarea",{disabled:l,className:"form-control",value:m.notes,rows:3,onChange:function(t){return e.handleNotesChange(t.target.value)}})))),!l&&o.createElement(o.Fragment,null,o.createElement("br",null),o.createElement("br",null),o.createElement("div",{className:"col-md-12 inline-block"},o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveECM(!1)}},o.createElement("i",{className:"fa fa-save"})," Save"),(h||!h)&&o.createElement(o.Fragment,null,!S&&o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveECM(!0)}},o.createElement("i",{className:"fa fa-save"})," Save & Complete")," "),h&&S&&o.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},o.createElement("b",null,"Remove Inspection Completion"))))))))))},t}(o.Component);t.default=N},974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CA_TYPES",function(){return v});var i,a=n(2),o=(n.n(a),n(718)),r=n(869),s=n(12),c=n(1022),l=n(118),u=n(685),m=n(712),p=n(714),d=n(730),h=n(20),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),b=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},v={CONDITION:"Condition",COMPLIANCE:"Compliance",SAFETY:"Safety",CANOTE:"CA_Note"},y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={caObj:{caAssessments:[]},equipLabels:[],conditionsLabels:[],complianceLabels:[],safetyLabels:[],isCompleted:!1,inspectionOntologies:[],SolutionList:[]},n.setupDropdownLists=n.setupDropdownLists.bind(n),n.handleCAForm=n.handleCAForm.bind(n),n.handleEquipmentAgeChange=n.handleEquipmentAgeChange.bind(n),n._saveCA=n._saveCA.bind(n),n.fetchCA=n.fetchCA.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return f(t,e),t.prototype.componentWillUnmount=function(){return b(this,void 0,void 0,function(){return g(this,function(e){return clearInterval(i),[2]})})},t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var e,t,n,a,o=this;return g(this,function(r){switch(r.label){case 0:return e=this.props,t=e.infoEntity,n=e.entityName,[4,this.fetchInspection_IsComplete()];case 1:return a=r.sent(),this.setState({isCompleted:a}),t&&n?(Object(l.a)(!0),[4,this.fetchCA()]):[3,4];case 2:return r.sent(),[4,this.setupDropdownLists()];case 3:r.sent(),Object(l.a)(!1),r.label=4;case 4:return this._getSolutionList(),i=setInterval(function(){var e=Object(d.a)("inspectionOntology");e!=Object(d.a)("inspectionOntology_Old")&&(Object(d.b)("inspectionOntology_Old",e),o._getSolutionList())},1e4),[2]}})})},t.prototype._getSolutionList=function(){return b(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return e=Object(d.a)("inspectionOntology"),[4,Object(p.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a;return g(this,function(o){switch(o.label){case 0:return e=this.props.entityName,[4,Object(m.h)(e,"CA")];case 1:return t=o.sent(),n=this.state,i=n.isCompleted,a=n.inspectionOntologies,t?(i="true"==Object(s.g)(t.IsCompleted),a=Object(s.g)(t.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:a}),[2,i]):[2,!1]}})})},t.prototype.fetchCA=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a,o=this;return g(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,i=e.infoEntity,a=Object(d.a)("inspectionOntology"),[4,Object(c.b)(t,n,i,a).then(function(e){if(e){var t=o.state.caObj,n=e.filter(function(e){return Object(s.g)(e.inspection)==a});n&&n.map(function(e){var n={caName:Object(s.g)(e.caName),entryTimeStamp:Object(s.g)(e.entryTimeStamp),notes:Object(s.g)(e.notes),age:Object(s.g)(e.age),assessmentLabel:Object(s.g)(e.assessmentLabel),photo:Object(s.g)(e.photo).split(","),repairCost:Object(s.g)(e.repairCost),size:Object(s.g)(e.size),type:Object(s.g)(e.type),typeOf:Object(s.g)(e.typeOf)};t.caAssessments.push(n)}),o.setState({caObj:t})}})];case 1:return r.sent(),[2]}})})},t.prototype.setupDropdownLists=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a;return g(this,function(o){return e=this.state,t=e.equipLabels,n=e.conditionsLabels,i=e.complianceLabels,a=e.safetyLabels,n||(n=[]),i||(i=[]),a||(a=[]),t=["Cleanliness","Debris","Insulation/Sealing","Rust/Chipped Paint","Loose Connections","Pad/Support/Dunnage","Ventilation","General Notes"],0==n.length&&n.push.apply(n,["Access","Ceiling","Egress","Fenestration","Flooring","Foundation","Frame","Roof","Walls","Curb","Landscaping","Pad","ParkingLot","ParkingSpace","Paving","StructuralElement"]),0==i.length&&i.push.apply(i,["ADA","HIPAA","PCI"]),0==a.length&&a.push.apply(a,["AED","AlarmSystem","FireExtinguisher","Sprinkler"]),this.setState({equipLabels:t,conditionsLabels:n,complianceLabels:i,safetyLabels:a}),[2]})})},t.prototype.handleCAForm=function(e,t){var n=this.state.caObj,i=n.caAssessments.filter(function(e){return e.type!=t});i.push.apply(i,e),n.caAssessments=i,this.setState({caObj:n})},t.prototype.handleEquipmentAgeChange=function(e){var t=this.state.caObj;this.setState({caObj:t})},t.prototype._saveCA=function(e){return b(this,void 0,void 0,function(){var t,n,i,a,o,r,s,u,p,h,f;return g(this,function(b){switch(b.label){case 0:return Object(l.a)(!0),t=this.state,n=t.caObj,i=t.inspectionOntologies,a=t.SolutionList,o=this.props,r=o.buildingName,s=o.infoEntity,u=o.entityName,p=o.instance,h=Object(d.a)("inspectionOntology"),f=!0,[4,Object(c.c)(r,s,u,n,h,f,a,e)];case 1:return b.sent(),e?h?(i.push(h),[4,Object(m.c)(u,i,"CA")]):[3,3]:[3,4];case 2:b.sent(),b.label=3;case 3:switch(s){case"Equip":window.location.hash=p+"/"+r+"/Assets";break;case"Space":window.location.hash=p+"/"+r+"/Space";break;default:return[2,!1]}b.label=4;case 4:return Object(l.a)(!1),[2]}})})},t.prototype.unComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,i;return g(this,function(a){switch(a.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(d.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(i=0;i<t.length;i++)t[i]==n&&t.splice(i,1);return[4,Object(m.k)(e,t,"CA")];case 1:a.sent(),a.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,s=t.entityName,c=t.infoEntity,l=t.viewOnly,m=this.state,p=m.caObj,f=m.equipLabels,b=m.conditionsLabels,g=m.complianceLabels,y=m.safetyLabels,E=m.isCompleted,C=m.inspectionOntologies,N=Object(d.a)("inspectionOntology"),O=p.caAssessments.filter(function(e){return e.type==v.CANOTE}),w=p.caAssessments.filter(function(e){return e.type==v.CONDITION}),S=p.caAssessments.filter(function(e){return e.type==v.COMPLIANCE}),I=p.caAssessments.filter(function(e){return e.type==v.SAFETY}),x=C.find(function(e){return e==N}),j=!!(x&&x.length>0);return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},!l&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(o.a,{instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:s,showAuditTypes:!0,showBIMButtons:!0}))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 form-group"},a.createElement("div",{className:"pull-right"},a.createElement(u.a,{ElementID:"ca",data:this.state.caObj,filename:"ca"}))))),a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10",id:"ca"},a.createElement("div",{className:"col-md-12 padding-10"},a.createElement("h3",{style:{margin:10}},"Condition Assessment - ",Object(h.x)(s))),"Equip"==c&&f&&f.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:O,handleAdder:this.handleCAForm,type:v.CANOTE,labels:f,entityName:s,infoEntity:c,isView:l,isFromReport:l}))),"Space"==c&&a.createElement(a.Fragment,null,b&&b.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement("h4",null,v.CONDITION," Assessments"),a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:w,handleAdder:this.handleCAForm,type:v.CONDITION,labels:b,entityName:s,infoEntity:c,isView:l,isFromReport:l})),a.createElement("br",null),a.createElement("br",null)),g&&g.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement("h4",null,v.COMPLIANCE," Assessments"),a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:S,handleAdder:this.handleCAForm,type:v.COMPLIANCE,labels:g,entityName:s,infoEntity:c,isView:l,isFromReport:l})),a.createElement("br",null),a.createElement("br",null)),y&&y.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement("h4",null,v.SAFETY," Assessments"),a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:I,handleAdder:this.handleCAForm,type:v.SAFETY,labels:y,entityName:s,infoEntity:c,isView:l,isFromReport:l})),a.createElement("br",null),a.createElement("br",null))),!l&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 inline-block"},a.createElement("br",null),a.createElement("div",{className:"form-group"},a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!1)}},a.createElement("i",{className:"fa fa-save"})," Save"),(E||!E)&&a.createElement(a.Fragment,null," ",!j&&a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!0)}},a.createElement("i",{className:"fa fa-save"})," Save & Complete")),E&&j&&a.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},a.createElement("b",null,"Remove Inspection Completion. ")))))))))},t}(a.Component);t.default=y}});