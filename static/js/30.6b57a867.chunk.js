webpackJsonp([30],{1328:function(e,t,n){"use strict";var o=n(2),i=(n.n(o),n(698)),a=n(702),s=n(57),r=n(20),c=n(764),l=n(13),u=n(751),p=n(8),m=n(21),h=n(701),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function s(e){try{c(o.next(e))}catch(e){a(e)}}function r(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((o=o.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],caLabel:[],labelsDropDownList:[],files:[],onPageTextChanged:!1},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCALabelChange=n.handleCALabelChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n.setImageURL_ForItems=n.setImageURL_ForItems.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){var e,t=this;return b(this,function(n){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e},function(){t.setImageURL_ForItems(t.props.items)})),[2]})})},t.prototype.setImageURL_ForItems=function(e){return f(this,void 0,void 0,function(){var t,n,o;return b(this,function(i){for(t=new s.b,n=0;n<e.length;n++)o="",e[n]&&e[n].photo&&e[n].photo.length&&e[n].photo[0]&&(e[n].photo[0].toLowerCase().indexOf(".mp4")>0&&(o="assets/img/video-file-icon.png"),e[n].photo[0].toLowerCase().indexOf(".mov")>0&&(o="assets/img/video-file-icon.png"),e[n].photo[0].toLowerCase().indexOf(".pdf")>0&&(o="assets/img/pdf-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".xls")>0||e[n].photo[0].toLowerCase().indexOf(".csv")>0)&&(o="assets/img/excel-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".xlsx")>0||e[n].photo[0].toLowerCase().indexOf(".csv")>0)&&(o="assets/img/excel-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".docx")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(o="assets/img/doc-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".doc")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(o="assets/img/doc-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".ppt")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(o="assets/img/ppt-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".pptx")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(o="assets/img/ppt-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".png")>0||e[n].photo[0].toLowerCase().indexOf(".jpeg")>0||e[n].photo[0].toLowerCase().indexOf(".jpg")>0||e[n].photo[0].toLowerCase().indexOf(".webp")>0||e[n].photo[0].toLowerCase().indexOf(".tiff")>0)&&(o=t.GetSignedURL(s.a.DOCUMENT(),e[n].photo[0]))),e[n].imageurl=o;return this.setState({items:e}),[2]})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){return f(this,void 0,void 0,function(){var t,n,o=this;return b(this,function(i){return e.buildingName&&e.instance&&(t=JSON.stringify(this.state.items),n=JSON.stringify(e.items),(!this.state.onPageTextChanged&&!this.props.isFromReport&&t!=n||this.props.isFromReport&&t!=n)&&this.setState({items:e.items},function(){o.setImageURL_ForItems(e.items)})),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.items;t.caLabel.map(function(t){var o={caName:"",age:"",assessmentLabel:t.value,notes:"",photo:[],repairCost:"",size:"",type:e.props.type,entryTimeStamp:"",typeOf:t.value};n||(n=[]),n.push(o)}),this.setState({items:n,caLabel:[]}),this.props.handleAdder(n,this.props.type)},t.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t,this.props.type)},t.prototype.removeAttachment=function(e){var t=this.state.items;t[e].imageurl="",t[e].photo[0]="",this.setState({items:t}),this.props.handleAdder(t,this.props.type)},t.prototype.handleCALabelChange=function(e){this.setState({caLabel:e})},t.prototype.handleItemChange=function(e,t){var n=this.state.items,o=t.target.name;(n&&n[e])[""+o]=t.target.value,this.setState({items:n,onPageTextChanged:!0}),this.props.handleAdder(n,this.props.type)},t.prototype.handleFileAttachment=function(e,t){var n=this,o=this.props,i=o.buildingName,a=o.entityName,c=o.infoEntity,l=o.type,h=JSON.parse(p.a.getItem("user")),d=this.state.items,g=d[t];e&&e.length>0&&e[0].file&&g&&this.setState({items:d,files:e},function(){return f(n,void 0,void 0,function(){var n,o,p,f=this;return b(this,function(g){switch(g.label){case 0:n=function(n){var p,g,v,y,E;return b(this,function(b){switch(b.label){case 0:return p=e[n],g=o.props.buildingName+"-_-"+Object(r.F)(10),v="",y=void 0,E=p.name.substring(p.name.indexOf(".")),v=""+g+E,y=p,d[t].photo[0]=v,o.props.handleAdder(d,o.props.type),[4,(new s.b).UploadFile(s.a.DOCUMENT(),v,y,function(e,t){if(e)Object(m.a)("Attachment failed to upload");else{var n={building:i,docOntology:Object(r.F)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:h.contact,enteredByName:h.name,entityOntology:[{label:"",value:a}],entityType:c,rdfsLabel:p.name,s3FileName:v,entryTimeStamp:(new Date).toString(),linkToDocument:v};Object(u.f)(n).then(function(){})}})];case 1:return b.sent(),o.setState({items:d,files:[p]},function(){f.props.handleAdder(d,l),document.getElementById("uploadImageClose"+f.props.type+t).click(),setTimeout(function(){f.setImageURL_ForItems(d)},1e3)}),[2]}})},o=this,p=0,g.label=1;case 1:return p<e.length?[5,n(p)]:[3,4];case 2:g.sent(),g.label=3;case 3:return p++,[3,1];case 4:return[2]}})})})},t.prototype.handlefileAttached=function(e,t){if(e.length>0){for(var n=this.state.items,o=n[t],i=0;i<e.length;i++){var a=e[i].name.split(".").pop(),c=this.props.buildingName+"_"+Object(r.F)(15)+"."+a.toLowerCase();n[0].photo[i]=c}Object(l.g)(e),this.setState({files:e,items:n},function(){}),this.props.handleAdder(n,this.props.type);var u=new s.b,p=Object(l.d)();if(p&&p.length)for(var h=0;h<p.length;h++){var d=p[h];u.UploadFile(s.a.DOCUMENT(),o.photo[h],d,function(e,t){e?Object(m.a)("Attachment failed to upload"):console.log(t)})}}},t.prototype.render=function(){var e=this,t=this.state,n=t.items,r=t.caLabel,l=t.labelsDropDownList,u=this.props,p=u.caOf,m=u.hideAddButton,d=void 0!==m&&m,f=u.isFromReport,b=new s.b;return o.createElement(o.Fragment,null,n&&n.map(function(t,n){var a="",r=!1,l="",u=!1;return t.photo&&t.photo.length&&t.photo[0]&&(a=b.GetSignedURL(s.a.DOCUMENT(),t.photo[0]),r=t.photo[0].toLowerCase().indexOf(".mp4")>0||t.photo[0].toLowerCase().indexOf(".mov")>0,l=t.photo[0].toLowerCase().indexOf(".pdf")>0?"assets/img/pdf-file-icon.png":"",u=t.photo[0].toLowerCase().indexOf(".png")>0||t.photo[0].toLowerCase().indexOf(".jpeg")>0||t.photo[0].toLowerCase().indexOf(".jpg")>0||t.photo[0].toLowerCase().indexOf(".tiff")>0),o.createElement("div",{key:n,className:"row"},o.createElement("br",null),o.createElement("div",{className:"form-group"},o.createElement("div",{className:"col-md-2"},o.createElement("label",{htmlFor:t.assessmentLabel},t.assessmentLabel)),"Space"==p&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-1"},o.createElement("input",{type:"text",id:t.age,className:"form-control",value:t.age,placeholder:"Age",name:"age",onChange:function(t){return e.handleItemChange(n,t)}})),o.createElement("div",{className:"col-md-1"},o.createElement("input",{type:"text",id:t.size,className:"form-control",value:t.size,placeholder:"Size",name:"size",onChange:function(t){return e.handleItemChange(n,t)}}))),o.createElement("div",{className:"Space"==p?"col-md-3":"col-md-5"},o.createElement("input",{type:"text",id:t.notes,className:"form-control notInPDF",value:t.notes,placeholder:"Notes",name:"notes",onChange:function(t){return e.handleItemChange(n,t)}}),o.createElement("span",{className:"inPDF",style:{display:"none"}},t.notes)),o.createElement("div",{className:"col-md-2"},o.createElement("input",{type:"text",id:t.repairCost,className:"form-control",value:t.repairCost,placeholder:"Approximate Repair Cost",name:"repairCost",onChange:function(t){return e.handleItemChange(n,t)}})),!f&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-1"},!(t.photo&&t.photo.length>0)&&o.createElement("button",{type:"button",className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.type+n,title:"Upload Attachment",onClick:function(){e.setState({files:[]})}},o.createElement("i",{className:"fa fa-paperclip"})),t.photo&&t.photo.length>0&&o.createElement(o.Fragment,null,u&&o.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,style:{width:"100%"}}),l&&o.createElement("img",{crossOrigin:"anonymous",src:l,style:{width:"100%"}}),r&&o.createElement("video",{src:t.imageurl,controls:!0,width:"100%"},"Sorry, your browser doesn't support embedded videos.")),o.createElement(i.a,{id:"uploadImage"+e.props.type+n,onSaveButtonClick:function(){},saveButtonText:"Close",closeButtonId:"uploadImageClose"+e.props.type+n,isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.type},o.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t,n)},files:e.state.files&&e.state.files.length>0?e.state.files:[],single:!0}))),o.createElement("div",{className:"col-md-2 btn-group"},t.photo&&t.photo.length>0&&o.createElement(o.Fragment,null,o.createElement("button",{type:"button",className:"btn btn-dark padding-5","data-toggle":"modal","data-target":"#uploadImage"+e.props.type+n,title:"Replace Attachment",onClick:function(){e.setState({files:[]})}},o.createElement("i",{className:"fa fa-paperclip"})),a&&o.createElement("a",{className:"btn padding-5",title:"Download Attachment",href:a},o.createElement("i",{className:"fa fa-download"})),o.createElement("button",{type:"button",className:"btn btn-danger padding-5",title:"Remove Attachment",onClick:function(){return document.getElementById("removedCAAttacment"+t.caName).click()}},o.createElement("i",{className:"fa fa-trash"})),o.createElement("button",{style:{display:"none"},id:"removedCAAttacment"+t.caName,"data-toggle":"modal","data-target":"#removedDialogCAAttacment"+t.caName},"."),o.createElement(h.a,{instance:e.props.instance,id:"removedDialogCAAttacment"+t.caName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this attachment for proposed RCX ?",heading:"Alert",onConfirmButtonClick:function(){return e.removeAttachment(n)}})),o.createElement("button",{type:"button",className:"btn ml-5 padding-5",title:"Remove Item",style:{color:"#f00"},onClick:function(){return document.getElementById("removeCA"+t.caName).click()}},o.createElement("i",{className:"fa fa-remove"})),o.createElement("button",{style:{display:"none"},id:"removeCA"+t.caName,"data-toggle":"modal","data-target":"#removeCADialog"+t.caName},"."),o.createElement(h.a,{instance:e.props.instance,id:"removeCADialog"+t.caName,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure you want to delete this proposed RCX?",heading:"Alert",onConfirmButtonClick:function(){return e.removeItem(n)}}))),f&&t.photo&&t.photo.length>0&&o.createElement("div",{className:"col-md-2"},o.createElement("img",{crossOrigin:"anonymous",src:t.imageurl,className:"inspection-image-preview"}))))}),!d&&!f&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-11 col-xs-11"},o.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog"+this.props.type,style:{fontWeight:"bold"}},o.createElement("i",{className:"fa fa-plus"}),"Add ",this.props.type)),o.createElement(i.a,{disableSaveButton:!r,id:"AddLabelDialog"+this.props.type,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.type},l&&l.length>0&&o.createElement("div",{className:"form-group"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-12"},o.createElement(a.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCALabelChange,placeholder:this.props.type+" Assessment Labels",options:l,value:r}))))))))},t}(o.Component);t.a=g},2986:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CA_TYPES",function(){return v});var o,i=n(2),a=(n.n(i),n(771)),s=n(1328),r=n(11),c=n(1072),l=n(122),u=n(708),p=n(749),m=n(775),h=n(800),d=n(20),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function s(e){try{c(o.next(e))}catch(e){a(e)}}function r(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((o=o.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},v={CONDITION:"Condition",COMPLIANCE:"Compliance",SAFETY:"Safety",CANOTE:"CA_Note"},y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={caObj:{caAssessments:[]},equipLabels:[],conditionsLabels:[],complianceLabels:[],safetyLabels:[],isCompleted:!1,inspectionOntologies:[],SolutionList:[]},n.setupDropdownLists=n.setupDropdownLists.bind(n),n.handleCAForm=n.handleCAForm.bind(n),n.handleEquipmentAgeChange=n.handleEquipmentAgeChange.bind(n),n._saveCA=n._saveCA.bind(n),n.fetchCA=n.fetchCA.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return f(t,e),t.prototype.componentWillUnmount=function(){return b(this,void 0,void 0,function(){return g(this,function(e){return clearInterval(o),[2]})})},t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a=this;return g(this,function(s){switch(s.label){case 0:return e=this.props,t=e.infoEntity,n=e.entityName,[4,this.fetchInspection_IsComplete()];case 1:return i=s.sent(),this.setState({isCompleted:i}),t&&n?(Object(l.a)(!0),[4,this.fetchCA()]):[3,4];case 2:return s.sent(),[4,this.setupDropdownLists()];case 3:s.sent(),Object(l.a)(!1),s.label=4;case 4:return this._getSolutionList(),o=setInterval(function(){var e=Object(h.a)("inspectionOntology");e!=Object(h.a)("inspectionOntology_Old")&&(Object(h.b)("inspectionOntology_Old",e),a._getSolutionList())},3e5),[2]}})})},t.prototype._getSolutionList=function(){return b(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return e=Object(h.a)("inspectionOntology"),[4,Object(m.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,o,i,a;return g(this,function(s){switch(s.label){case 0:return e=this.props.entityName,t=Object(h.a)("inspectionOntology"),[4,Object(p.h)(e,"CA",t)];case 1:return n=s.sent(),o=this.state,i=o.isCompleted,a=o.inspectionOntologies,n?(i="true"==Object(r.g)(n.IsCompleted),a=Object(r.g)(n.inspectionOntology).split(","),this.setState({isCompleted:i,inspectionOntologies:a}),[2,i]):[2,!1]}})})},t.prototype.fetchCA=function(){return b(this,void 0,void 0,function(){var e,t,n,o,i,a=this;return g(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,o=e.infoEntity,i=Object(h.a)("inspectionOntology"),[4,Object(c.b)(t,n,o,i).then(function(e){if(e){var t=a.state.caObj,n=e.filter(function(e){return Object(r.g)(e.inspection)==i});n&&n.map(function(e){var n={caName:Object(r.g)(e.caName),entryTimeStamp:Object(r.g)(e.entryTimeStamp),notes:Object(r.g)(e.notes),age:Object(r.g)(e.age),assessmentLabel:Object(r.g)(e.assessmentLabel),photo:Object(r.g)(e.photo).split(","),repairCost:Object(r.g)(e.repairCost),size:Object(r.g)(e.size),type:Object(r.g)(e.type),typeOf:Object(r.g)(e.assessmentLabel)};t.caAssessments.push(n)}),a.setState({caObj:t})}})];case 1:return s.sent(),[2]}})})},t.prototype.setupDropdownLists=function(){return b(this,void 0,void 0,function(){var e,t,n,o,i;return g(this,function(a){return e=this.state,t=e.equipLabels,n=e.conditionsLabels,o=e.complianceLabels,i=e.safetyLabels,n||(n=[]),o||(o=[]),i||(i=[]),t=["Cleanliness","Debris","Insulation/Sealing","Rust/Chipped Paint","Loose Connections","Pad/Support/Dunnage","Ventilation","General Notes"],0==n.length&&n.push.apply(n,["Access","Ceiling","Egress","Fenestration","Flooring","Foundation","Frame","Roof","Walls","Curb","Landscaping","Pad","ParkingLot","ParkingSpace","Paving","StructuralElement"]),0==o.length&&o.push.apply(o,["ADA","HIPAA","PCI"]),0==i.length&&i.push.apply(i,["AED","AlarmSystem","FireExtinguisher","Sprinkler"]),this.setState({equipLabels:t,conditionsLabels:n,complianceLabels:o,safetyLabels:i}),[2]})})},t.prototype.handleCAForm=function(e,t){var n=this.state.caObj,o=n.caAssessments.filter(function(e){return e.type!=t});o.push.apply(o,e),n.caAssessments=o,this.setState({caObj:n})},t.prototype.handleEquipmentAgeChange=function(e){var t=this.state.caObj;this.setState({caObj:t})},t.prototype._saveCA=function(e){return b(this,void 0,void 0,function(){var t,n,o,i,a,s,r,u,m,d,f;return g(this,function(b){switch(b.label){case 0:return Object(l.a)(!0),t=this.state,n=t.caObj,o=t.inspectionOntologies,i=t.SolutionList,a=this.props,s=a.buildingName,r=a.infoEntity,u=a.entityName,m=a.instance,d=Object(h.a)("inspectionOntology"),f=!0,[4,Object(c.c)(s,r,u,n,d,f,i,e)];case 1:return b.sent(),e?d?(o.push(d),[4,Object(p.c)(u,o,"CA")]):[3,3]:[3,4];case 2:b.sent(),b.label=3;case 3:switch(r){case"Equip":window.location.hash=m+"/"+s+"/Assets";break;case"Space":window.location.hash=m+"/"+s+"/Space";break;default:return[2,!1]}b.label=4;case 4:return Object(l.a)(!1),[2]}})})},t.prototype.unComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,o;return g(this,function(i){switch(i.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(h.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(o=0;o<t.length;o++)t[o]==n&&t.splice(o,1);return[4,Object(p.k)(e,t,"CA")];case 1:i.sent(),i.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,o=t.instance,r=t.entityName,c=t.infoEntity,l=t.viewOnly,p=this.state,m=p.caObj,f=p.equipLabels,b=p.conditionsLabels,g=p.complianceLabels,y=p.safetyLabels,E=p.isCompleted,O=p.inspectionOntologies,C=Object(h.a)("inspectionOntology"),w=m.caAssessments.filter(function(e){return e.type==v.CANOTE}),L=m.caAssessments.filter(function(e){return e.type==v.CONDITION}),N=m.caAssessments.filter(function(e){return e.type==v.COMPLIANCE}),I=m.caAssessments.filter(function(e){return e.type==v.SAFETY}),F=O.find(function(e){return e==C}),A=!!(F&&F.length>0);return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},!l&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(a.a,{instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:r,showAuditTypes:!0,showBIMButtons:!0}))),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 form-group"},i.createElement("div",{className:"pull-right"},i.createElement(u.a,{ElementID:"ca",data:this.state.caObj,filename:"ca"}))))),i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid padding-10",id:"ca"},i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("h3",{style:{margin:10}},"Condition Assessment - ",Object(d.A)(r))),"Equip"==c&&f&&f.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement(s.a,{instance:o,buildingName:n,caOf:c,items:w,handleAdder:this.handleCAForm,type:v.CANOTE,labels:f,entityName:r,infoEntity:c,isView:l,isFromReport:l}))),"Space"==c&&i.createElement(i.Fragment,null,b&&b.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,v.CONDITION," Assessments"),i.createElement(s.a,{instance:o,buildingName:n,caOf:c,items:L,handleAdder:this.handleCAForm,type:v.CONDITION,labels:b,entityName:r,infoEntity:c,isView:l,isFromReport:l})),i.createElement("br",null),i.createElement("br",null)),g&&g.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,v.COMPLIANCE," Assessments"),i.createElement(s.a,{instance:o,buildingName:n,caOf:c,items:N,handleAdder:this.handleCAForm,type:v.COMPLIANCE,labels:g,entityName:r,infoEntity:c,isView:l,isFromReport:l})),i.createElement("br",null),i.createElement("br",null)),y&&y.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-12"},i.createElement("h4",null,v.SAFETY," Assessments"),i.createElement(s.a,{instance:o,buildingName:n,caOf:c,items:I,handleAdder:this.handleCAForm,type:v.SAFETY,labels:y,entityName:r,infoEntity:c,isView:l,isFromReport:l})),i.createElement("br",null),i.createElement("br",null))),!l&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!1)}},i.createElement("i",{className:"fa fa-save"})," Save"),(E||!E)&&i.createElement(i.Fragment,null," ",!A&&i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!0)}},i.createElement("i",{className:"fa fa-save"})," Save & Complete")),E&&A&&i.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},i.createElement("b",null,"Remove Inspection Completion. ")))))))))},t}(i.Component);t.default=y},775:function(e,t,n){"use strict";t.g=function(e,t,n,c){return s(this,void 0,void 0,function(){return r(this,function(s){switch(s.label){case 0:return[4,Object(o.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},o.a.LIFE.SaveProject,a.b.LIFE).then(function(){Object(i.b)("Project saved Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Project.")})];case 1:return[2,s.sent()]}})})},t.r=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(o.e)({buildingName:e,instance:t},o.a.LIFE.GetProjectList,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({_id:e},o.a.LIFE.DeleteProject,a.b.LIFE).then(function(){Object(i.b)(" Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({model:e},o.a.LIFE.SaveProjectSolution,a.b.LIFE).then(function(){Object(i.b)("Solution saved Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(o.e)({spreadSheetId:e,fileType:t},o.a.LIFE.ExportSheet,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e?[4,Object(o.e)({projectId:e},o.a.LIFE.GetSolutionList,a.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.u=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return e?[4,Object(o.e)({inspectionOntology:e},o.a.LIFE.GetSolutionListForInspection,a.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.s=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({solutionId:e},o.a.LIFE.GetSolution,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({_id:e},o.a.LIFE.DeleteSolution,a.b.LIFE).then(function(){Object(i.b)(" Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(o.f)({manageFile:e,fileData:t},o.a.LIFE.ManageFile,a.b.LIFE).then(function(){Object(i.b)("Upload Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(o.f)({communityFile:e,fileData:t},o.a.LIFE.SaveCommunityFile,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(o.e)({buildingName:e,instance:t},o.a.LIFE.GetManageFile,a.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({instance:e},o.a.LIFE.GetCommunityFile,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({ManageFile:e},o.a.LIFE.DeleteManageFile,a.b.LIFE).then(function(){Object(i.b)(" Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({communityFile:e},o.a.LIFE.DeleteCommunityFile,a.b.LIFE).then(function(){Object(i.b)(" Deleted Successfully.")}).catch(function(e){Object(i.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({projectId:e},o.a.LIFE.GetProject,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return s(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,Object(o.f)({email:e,buildingName:t,instance:n},o.a.LIFE.SaveEmailAndDrive,a.b.LIFE)];case 1:return[2,i.sent()]}})})},t.j=function(e,t){return s(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(o.f)({email:e,instance:t},o.a.LIFE.ShareCommunityFolder,a.b.LIFE).then(function(e){e.result?Object(i.b)("Successfully Share."):Object(i.a)("The user Email is not valid.")}).catch(function(e){Object(i.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return s(this,void 0,void 0,function(){return r(this,function(s){switch(s.label){case 0:return[4,Object(o.f)({email:e,buildingName:t,instance:n},o.a.LIFE.ShareMMTemplateFolder,a.b.LIFE).then(function(e){e.result?Object(i.b)("Successfully Share."):Object(i.a)("The user Email is not valid.")}).catch(function(e){Object(i.a)("Something Went Wrong!")})];case 1:return[2,s.sent()]}})})},t.i=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.f)({templatePurpose:e},o.a.LIFE.SaveTemplatePurpose,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return s(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.e)({instance:e},o.a.LIFE.GetTemplatePurpose,a.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),o=e.getDate().toString().padStart(2,0),i=e.getHours().toString().padStart(2,0),a=e.getMinutes().toString().padStart(2,0),s=e.getSeconds().toString().padStart(2,0);return t+n+o+i+a+s};var o=n(12),i=n(21),a=n(13),s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function s(e){try{c(o.next(e))}catch(e){a(e)}}function r(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,r)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}}}});