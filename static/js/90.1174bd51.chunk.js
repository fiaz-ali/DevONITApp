webpackJsonp([90],{1533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var a,o=n(3),i=(n.n(o),n(26)),s=n(581),c=n(623),l=n(45),r=n(601),d=n(602),m=n(17),u=n(596),p=n.n(u),h=n(568),v=n(87),g=n(991),b=n(1075),f=n(988),E=n(574),S=n(18),N=n(849),y=n(595),k=n(14),C=n(594),D=n(876),P=n(746),w=n(659),T=n(580),A=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),O=this&&this.__assign||function(){return(O=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},F=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,c)}l((a=a.apply(e,t||[])).next())})},j=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},x=n(877),L=n(1101),_=function(t){function n(e){var n=t.call(this,e)||this;return n.state={point:Object(),oldModel:Object(),assets:[],_spaceList:[],floors:[],components:[],sourceSinkcomponents:[],isEdit:!1,isView:!1,_pointFunctions:[],_pointTypes:[],deviceList:[],newLocation:Object(),equipment:Object(),lightingInformation:Object(),lampTypes:[],isQrCameraMode:!1,isHistorian:!1,pointsListDD:[],relatedPointsListDD:[],selectedDevice:Object()},a=n,n.handlePointForm=n.handlePointForm.bind(n),n.handlePointFunctions=n.handlePointFunctions.bind(n),n.handleExistingRadio=n.handleExistingRadio.bind(n),n.getData=n.getData.bind(n),n._getAssets=n._getAssets.bind(n),n._getSpacesList=n._getSpacesList.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n._fetchPointFunctions=n._fetchPointFunctions.bind(n),n.handleInstallDateChange=n.handleInstallDateChange.bind(n),n.handleCommissioningDateChange=n.handleCommissioningDateChange.bind(n),n.handleDeviceSelect=n.handleDeviceSelect.bind(n),n.savePoint=n.savePoint.bind(n),n.mergePoint=n.mergePoint.bind(n),n.getNewDeviceLabel=n.getNewDeviceLabel.bind(n),n.handleSpaceSelect=n.handleSpaceSelect.bind(n),n.getNewSpaceLabel=n.getNewSpaceLabel.bind(n),n.handleAssetSelect=n.handleAssetSelect.bind(n),n.onEquipmentChange=n.onEquipmentChange.bind(n),n._saveEquipment=n._saveEquipment.bind(n),n.getNewAssetLabel=n.getNewAssetLabel.bind(n),n.onChangeFunction=n.onChangeFunction.bind(n),n.addNewPointFunction=n.addNewPointFunction.bind(n),n.handlePointTypeSelect=n.handlePointTypeSelect.bind(n),n.onChangePointType=n.onChangePointType.bind(n),n.addNewPointType=n.addNewPointType.bind(n),n._fetchPointTypes=n._fetchPointTypes.bind(n),n.handleSensedManual=n.handleSensedManual.bind(n),n.updateSpace=n.updateSpace.bind(n),n.handlefileAttached=n.handlefileAttached.bind(n),n.handleScan=n.handleScan.bind(n),n.restoreSelectedVersion=n.restoreSelectedVersion.bind(n),n.fetchSourceSinkPointsList=n.fetchSourceSinkPointsList.bind(n),n.handleSinkSourceAssetSelect=n.handleSinkSourceAssetSelect.bind(n),n.handleSinkSourceComponentSelect=n.handleSinkSourceComponentSelect.bind(n),n.handleRelatedPoints=n.handleRelatedPoints.bind(n),n.onChangePointConnectedHandler=n.onChangePointConnectedHandler.bind(n),n.onChangeSoftwareAssetTypeHandler=n.onChangeSoftwareAssetTypeHandler.bind(n),n.onSpaceConnectedHandler=n.onSpaceConnectedHandler.bind(n),n}return A(n,t),n.prototype.componentDidMount=function(){return F(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return this.props.buildingName?(Object(v.a)(!0),[4,this.getData()]):[3,3];case 1:return e.sent(),[4,this._getAssets()];case 2:e.sent(),Object(v.a)(!1),e.label=3;case 3:return[2]}})})},n.prototype.getData=function(){return F(this,void 0,void 0,function(){var e,t,n,a,o,i,s,c,l,u,p=this;return j(this,function(h){switch(h.label){case 0:return e=this.props,t=e.buildingName,n=e.PointName,a=e.isView,o=Object(),[4,Object(r.j)()];case 1:return i=h.sent(),[4,Object(r.k)()];case 2:return s=h.sent(),[4,Object(C.f)(this.props.buildingName)];case 3:return c=h.sent(),[4,Object(d.h)(this.props.buildingName,!0)];case 4:return l=h.sent(),n?[4,Object(r.i)(t,n).then(function(e){return F(p,void 0,void 0,function(){var t,n;return j(this,function(a){switch(a.label){case 0:return t=e[0],n=Object(),t&&t.point&&Object(m.g)(t.point)?[4,this.mergePoint(t)]:[3,2];case 1:n=a.sent(),a.label=2;case 2:return[2,n]}})})})]:[3,6];case 5:return o=h.sent(),[3,7];case 6:o.assetConnectedAs="None",o.isConnectedTo="Space",h.label=7;case 7:return""!=o.pointId&&o.pointId?[3,9]:(u=Object(S.k)(7).toString(),[4,Object(r.a)(u,this.props.buildingName).then(function(e){e&&e[0]?o.pointId="":o.pointId=u})]);case 8:h.sent(),h.label=9;case 9:return this.setState({floors:c,_pointFunctions:i,_pointTypes:s,deviceList:l,point:o,oldModel:O({},o),isView:a,isEdit:o.point==this.props.PointName},function(){return F(p,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return n?("Component"==o.isConnectedTo&&this._getComponents(!1),"Component"==o.sinkSourceAssetType&&this._getComponents(!0),[4,this.fetchSourceSinkPointsList(!0)]):[3,3];case 1:return e.sent(),[4,this.fetchSourceSinkPointsList(!1)];case 2:e.sent(),e.label=3;case 3:return[2]}})})}),[2]}})})},n.prototype.fetchSourceSinkPointsList=function(e){return F(this,void 0,void 0,function(){var t,n,a,o,i;return j(this,function(s){switch(s.label){case 0:return t=this.props.buildingName,n=this.state.point,e?(a=[],n.isConnectedTo?(o="","Component"==n.isConnectedTo&&n.component?o=n.component:"Equipment"==n.isConnectedTo&&n.asset?o=n.asset:"Device"==n.isConnectedTo&&n.monconDevice&&(o=n.monconDevice),o?[4,Object(r.g)(t,"",n.isConnectedTo,o)]:[3,2]):[3,2]):[3,3];case 1:a=s.sent(),s.label=2;case 2:return this.setState({relatedPointsListDD:a}),[3,8];case 3:return i=[],n.sinkSourceAssetType?"Component"==n.sinkSourceAssetType&&n.sinkSourceComponent?[4,Object(r.g)(t,"",n.sinkSourceAssetType,n.sinkSourceComponent)]:[3,5]:[3,7];case 4:return i=s.sent(),[3,7];case 5:return n.sinkSourceAsset?[4,Object(r.g)(t,"",n.sinkSourceAssetType,n.sinkSourceAsset)]:[3,7];case 6:i=s.sent(),s.label=7;case 7:this.setState({pointsListDD:i}),s.label=8;case 8:return[2]}})})},n.prototype.fetchDevicesList=function(){return F(this,void 0,void 0,function(){var e;return j(this,function(t){switch(t.label){case 0:return[4,Object(d.h)(this.props.buildingName,!0)];case 1:return e=t.sent(),this.setState({deviceList:e}),[2]}})})},n.prototype._getAssets=function(){return F(this,void 0,void 0,function(){var e;return j(this,function(t){switch(t.label){case 0:return[4,Object(c.g)(this.props.buildingName,i.b.POINT)];case 1:return e=t.sent(),this.setState({assets:e}),[2]}})})},n.prototype._getComponents=function(e,t){return F(this,void 0,void 0,function(){var n,a,o=this;return j(this,function(i){return n=this.state.point,e?(a=n.sinkSourceAsset?n.sinkSourceAsset:t||"")&&Object(E.m)(this.props.buildingName,a).then(function(e){if(e.length>0){var t=[];e.map(function(e){var n={ontology:e.name,rdfsLabel:e.rdfsLabel};t.push(n)}),o.setState({sourceSinkcomponents:t})}else o.setState({sourceSinkcomponents:[]})}).catch(function(e){return e}):n.asset&&Object(E.m)(this.props.buildingName,n.asset).then(function(e){if(e.length>0){var t=[];e.map(function(e){var n={ontology:e.name,rdfsLabel:e.rdfsLabel};t.push(n)}),o.setState({components:t})}else o.setState({components:[]})}).catch(function(e){return e}),[2]})})},n.prototype._getSpacesList=function(e){return F(this,void 0,void 0,function(){var t,n;return j(this,function(a){switch(a.label){case 0:return t=this.props.buildingName,[4,Object(s.c)(e,t,!0)];case 1:return n=a.sent(),this.setState({_spaceList:n}),[2]}})})},n.prototype._fetchPointFunctions=function(){return F(this,void 0,void 0,function(){var e;return j(this,function(t){switch(t.label){case 0:return[4,Object(r.j)()];case 1:return e=t.sent(),this.setState({_pointFunctions:e}),[2]}})})},n.prototype.getNewDeviceLabel=function(e){return F(this,void 0,void 0,function(){var t,n=this;return j(this,function(o){return(t=this.state.point).monconDevice=e,this.setState({point:t},function(){return F(n,void 0,void 0,function(){return j(this,function(e){return a.fetchDevicesList(),[2]})})}),[2]})})},n.prototype._fetchPointTypes=function(){return F(this,void 0,void 0,function(){var e;return j(this,function(t){switch(t.label){case 0:return[4,Object(r.k)()];case 1:return e=t.sent(),this.setState({_pointTypes:e}),[2]}})})},n.prototype.getNewSpaceLabel=function(e){var t=this.state._spaceList&&this.state._spaceList.find(function(t){return Object(m.g)(t.rdfsLabel)==e}),n=this.state.point;n.space=Object(m.g)(t&&t.ontology),this.setState({point:n})},n.prototype.mergePoint=function(e){return F(this,void 0,Promise,function(){var t,n,a,o,i,s;return j(this,function(c){switch(c.label){case 0:return t=Object(),e?(t.point=Object(m.g)(e.point),t.pointId=e&&e.pointId?Object(m.g)(e.pointId):Object(S.k)(7).toString(),t.pointLabel=Object(m.g)(e.pointLabel),t.pointType=Object(m.g)(e.pointType),t.pointDevice=Object(m.g)(e.pointDevice),t.notes=Object(m.g)(e.notes),t.monconDevice=Object(m.g)(e.monconDevice),t.s3FileName=Object(m.g)(e.s3FileName),t.softwarePointDescription=Object(m.g)(e.softwarePointDescription),t.webhook=Object(m.g)(e.webhook),t.sourcePoint=Object(m.g)(e.sourcePoint),t.sourcePointDescription=Object(m.g)(e.sourcePointDescription),t.sinkPoint=Object(m.g)(e.sinkPoint),t.sinkPointDescription=Object(m.g)(e.sinkPointDescription),t.link1=Object(m.g)(e.link1),t.link2=Object(m.g)(e.link2),t.installDate=Object(m.g)(e.installDate),t.commissioningDate=Object(m.g)(e.commissioningDate),t.isExisting="true"!=Object(m.g)(e.isPlanned),t.isSensed="true"==Object(m.g)(e.isSensed),t.unit=Object(m.g)(e.unit),t.tag=Object(m.g)(e.tag),t.floor=Object(m.g)(e.floor),[4,this.handleFloorChange(t.floor)]):[3,10];case 1:return c.sent(),t.space=Object(m.g)(e.space),[4,this.handleSpaceSelect(t.space)];case 2:return c.sent(),t.asset=Object(m.g)(e.asset),[4,this.handleAssetSelect(t.asset)];case 3:return c.sent(),t.component=Object(m.g)(e.component),t.assetLabel=Object(m.g)(e.assetLabel),t.componentLabel=Object(m.g)(e.componentLabel),t.floorLabel=Object(m.g)(e.floorLabel),t.spaceLabel=Object(m.g)(e.spaceLabel),t.pointNumber=Object(m.g)(e.pointNumber),t.pointState=Object(m.g)(e.pointState),t.isConnectedTo=Object(m.g)(e.isConnectedTo),t.assetConnectedAs=Object(m.g)(e.assetConnectedAs),t.sinkSourceAssetType=Object(m.g)(e.sinkSourceAssetType),t.sinkSourceAsset=Object(m.g)(e.sinkSourceAsset),t.sinkSourceAsset?[4,this._getComponents(!0,t.sinkSourceAsset)]:[3,5];case 4:c.sent(),c.label=5;case 5:return t.sinkSourceComponent=Object(m.g)(e.sinkSourceComponent),t.sinkSourcePoint=Object(m.g)(e.sinkSourcePoint),t.pointPIDName=Object(m.g)(e.pointPIDName),(n=Object(m.g)(e.relatedPoints))?(a=n.split(",")).length>0?[4,Object(S.n)(a)]:[3,7]:[3,7];case 6:o=c.sent(),i=[],o.map(function(e){i.push({label:e.rdfsLabel,value:e.ontology})}),t.relatedPoints=i,c.label=7;case 7:return e&&e.pointId&&Object(m.g)(e.pointId)?(t.pointId=Object(m.g)(e.pointId),[3,10]):[3,8];case 8:return s=Object(S.k)(7).toString(),[4,Object(r.a)(s,this.props.buildingName).then(function(e){e&&e[0]?t.pointId="":t.pointId=s})];case 9:c.sent(),c.label=10;case 10:return[2,t]}})})},n.prototype.savePoint=function(e){return F(this,void 0,void 0,function(){var t,n,a,o,s,c,d,m,u,p;return j(this,function(h){switch(h.label){case 0:return t=this.state,n=t.point,a=t.isEdit,o=t.oldModel,a=n.point==this.props.PointName,s=this.props.buildingName,n.point=n.point?n.point:Object(S.l)(7),e?(c=e||n,d=n):(c=n,d=a?o:null),n?(Object(v.a)(!0),m=JSON.parse(k.a.getItem("user")),[4,Object(r.d)(c,s,a).then(function(){Object(P.b)(c.point,c,d,m.contact)})]):[3,2];case 1:h.sent(),u=new l.b,(p=Object(i.c)())&&(p.file||p.length>0)&&u.UploadFile(l.a.DOCUMENT,n.s3FileName,p),Object(v.a)(!1),h.label=2;case 2:return window.location.hash="/"+this.props.instance+"/"+this.props.buildingName+"/Points",[2]}})})},n.prototype.handleFloorChange=function(e){return F(this,void 0,void 0,function(){var t,n,a,o=this;return j(this,function(i){return t=this.state,n=t.point,a=t.floors,n.floor=e,n.floorLabel=a&&a.find(function(t){return Object(m.g)(t.ontology)==e})?Object(m.g)(a.find(function(t){return Object(m.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n,_spaceList:[]},function(){o._getSpacesList(e),o._getAssets()}),[2]})})},n.prototype.handleInstallDateChange=function(e){var t=this.state.point;t.installDate=e.toString(),this.setState({point:t})},n.prototype.handleCommissioningDateChange=function(e){var t=this.state.point;t.commissioningDate=e.toString(),this.setState({point:t})},n.prototype.handleSensedManual=function(e){var t=this.state.point;t.isSensed=e,this.setState({point:t})},n.prototype.onSpaceConnectedHandler=function(){var e=this.state.point,t=this.state.pointsListDD,n=this.state.deviceList;e.sinkSourceAsset="",e.sinkSourceAssetType="",e.sinkSourcePoint="",e.sinkSourceComponent="",t=[],this.handleSinkSourceAssetTypeSelect("Device"),this.setState({point:e,pointsListDD:t,deviceList:n})},n.prototype.handleSourceOrSink=function(e){var t=this.state.point;t.assetConnectedAs=e,this.setState({point:t}),this.onSpaceConnectedHandler()},n.prototype.onChangePointConnectedHandler=function(){var e=this.state.point,t=this.state.relatedPointsListDD,n=this.state.components;e.monconDevice="",e.relatedPoints=[],e.assetLabel="",e.asset="",e.component="",e.componentLabel="",t=[],n=[],this.setState({point:e,relatedPointsListDD:t,components:n})},n.prototype.handleConnectedTo=function(e){var t=this.state.point;t.isConnectedTo=e,this.setState({point:t}),this.onChangePointConnectedHandler()},n.prototype.handlePointForm=function(e){var t=this.state.point;t[""+e.target.name]=e.target.value,this.setState({point:t})},n.prototype.handleDeviceForm=function(e){var t=this.state.selectedDevice,n=e.target.name;if(!t||!t.wirelessConfig){var a=Object();t.wirelessConfig=a}t.wirelessConfig[""+n]=e.target.value,this.setState({selectedDevice:t})},n.prototype.onChangeSoftwareAssetTypeHandler=function(){var e=this.state.point,t=this.state.pointsListDD,n=this.state.sourceSinkcomponents;e.sinkSourceAsset="",e.sinkSourcePoint="",e.sinkSourceComponent="",e.sourcePointDescription="",e.sinkPointDescription="",e.webhook="",e.softwarePointDescription="",e.link1="",e.link2="",e.notes="",delete e.commissioningDate,t=[],n=[],this.setState({point:e,pointsListDD:t,sourceSinkcomponents:n})},n.prototype.handleSinkSourceAssetTypeSelect=function(e){var t=this.state.point;t.sinkSourceAssetType=e,this.setState({point:t}),this.onChangeSoftwareAssetTypeHandler()},n.prototype.handleSinkSourceAssetSelect=function(e){var t=this,n=this.state.point,a=e.target.value;""==a&&(n.sinkSourcePoint=""),n.sinkSourceAsset=a,this.setState({point:n},function(){"Component"==n.sinkSourceAssetType?t._getComponents(!0):t.fetchSourceSinkPointsList(!1)})},n.prototype.handleSinkSourceComponentSelect=function(e){var t=this,n=this.state.point,a=e.target.value;n.sinkSourceComponent=a,this.setState({point:n},function(){t.fetchSourceSinkPointsList(!1)})},n.prototype.handleRelatedPoints=function(e){var t=this.state.point;t.relatedPoints=e,this.setState({point:t})},n.prototype.handleScan=function(e){var t=this.state.point;e&&(t.tag=e.toString(),this.setState({point:t,isQrCameraMode:!1}))},n.prototype.handlePointTypeSelect=function(e){var t=this.state.point,n=e.target.value;"addNewPointType"==n?(t.pointType="",a.setState({point:t}),document.getElementById("addNewPointTypeDailogeButton").click()):(t.pointType=n,this.setState({point:t}))},n.prototype.handleAssetSelect=function(e){var t=this,n=this.state.point,a=this.state.assets,o=this.state.components,i=this.state.relatedPointsListDD;"addNewAsset"==e&&(n.asset="",this.setState({point:n}),document.getElementById("AddAssetDailogeButton").click()),""==e?(n.asset="",n.relatedPoints=[],o=[],i=[],this.setState({point:n,relatedPointsListDD:i,components:o})):(n.asset=e,n.assetLabel=a&&a.find(function(t){return Object(m.g)(t.ontology)==e})?Object(m.g)(a.find(function(t){return Object(m.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n},function(){"Component"==n.isConnectedTo&&t._getComponents(!1),t.fetchSourceSinkPointsList(!0)}))},n.prototype.handleComponentSelect=function(e){var t=this,n=this.state.point,a=this.state.components;n.component=e,n.componentLabel=a&&a.find(function(t){return Object(m.g)(t.ontology)==e})?Object(m.g)(a.find(function(t){return Object(m.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n},function(){t.fetchSourceSinkPointsList(!0)})},n.prototype.handleSpaceSelect=function(e){var t=this,n=this.state.point,a=this.state._spaceList;"addNewSpace"==e?document.getElementById("btnShowSpaceFormDialog").click():(n.space=e,n.spaceLabel=a&&a.find(function(t){return Object(m.g)(t.ontology)==e})?Object(m.g)(a.find(function(t){return Object(m.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n,assets:[]},function(){t._getAssets()}))},n.prototype.handleDeviceSelect=function(e){return F(this,void 0,void 0,function(){var t,n,a,o,i,s=this;return j(this,function(c){switch(c.label){case 0:return t=this.state.point,"addNewDevice"!=(n=e.target.value)?[3,1]:(t.monconDevice="",this.setState({point:t}),document.getElementById("AddDeviceDailogeButton").click(),[3,4]);case 1:return t.monconDevice=n,a=this.state.deviceList,o=a.find(function(e){return Object(m.g)(e.moncondevice)==t.monconDevice}),i=Object(),o?[4,Object(d.d)(o)]:[3,3];case 2:i=c.sent(),c.label=3;case 3:this.setState({point:t,selectedDevice:i},function(){s.fetchSourceSinkPointsList(!0)}),c.label=4;case 4:return[2]}})})},n.prototype.handlePointFunctions=function(e){var t=e.target.value,n=this.state.point;"addPointFunction"==t?(n.pointDevice="",this.setState({point:n}),document.getElementById("addNewFunctionDailogeButton").click()):(n.pointDevice=t,this.setState({point:n}))},n.prototype.onChangeFunction=function(e){var t=this.state.point;t.pointDevice=e,this.setState({point:t})},n.prototype.onChangePointType=function(e){var t=this.state.point;t.pointType=e,this.setState({point:t})},n.prototype.addNewPointType=function(){return F(this,void 0,void 0,function(){var e,t,n=this;return j(this,function(a){switch(a.label){case 0:return e=this.state.point,t={ontology:e.pointType.replace(new RegExp(" ","g"),""),rdfsLabel:e.pointType},[4,Object(r.f)(this.props.buildingName,t).then(function(){})];case 1:return a.sent(),e.pointType=t.ontology,this.setState({point:e},function(){return F(n,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this._fetchPointTypes()];case 1:return e.sent(),[2]}})})}),[2]}})})},n.prototype.addNewPointFunction=function(){return F(this,void 0,void 0,function(){var e,t,n=this;return j(this,function(a){switch(a.label){case 0:return e=this.state.point,t={ontology:e.pointDevice.replace(new RegExp(" ","g"),""),rdfsLabel:e.pointDevice},[4,Object(r.e)(this.props.buildingName,t).then(function(){})];case 1:return a.sent(),e.pointDevice=t.ontology,this.setState({point:e},function(){return F(n,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this._fetchPointFunctions()];case 1:return e.sent(),[2]}})})}),[2]}})})},n.prototype.handleExistingRadio=function(e){var t=this.state.point;t.isExisting=e,this.setState({point:t})},n.prototype.handleFileAttachment=function(t){var n=this.state.point;if(t&&(t.file||t.length>0)&&n.point&&n.point.length>0){var a=this.props.buildingName+"-_-"+n.point,o="";"video/mp4"==t.type?(o=a+".mp4",Object(i.f)(t)):"image/jpeg"==t.type||"image/png"==t.type?(o=a+".jpg",Object(i.f)(t.file)):(o=a+".jpg",Object(i.f)(new e(t.replace(/^data:image\/\w+;base64,/,""),"base64"))),n.s3FileName=o,this.setState({point:n},function(){})}},n.prototype.onEquipmentChange=function(e){var t=this.state.lightingInformation;t.fixtureName=e.equipmentName,t.fixtureType=e.subclassType;var n=f.a[e.subclassType]?f.a[e.subclassType]:[];this.setState({equipment:e,lightingInformation:t,lampTypes:n})},n.prototype._saveEquipment=function(){return F(this,void 0,void 0,function(){var e,t=this;return j(this,function(n){switch(n.label){case 0:return(e=this.state.equipment).equipmentName=e.equipmentName?e.equipmentName:Object(S.l)(7),!1&&!this.state.isEdit?[3,2]:(Object(v.a)(!0),[4,Object(E.w)(this.props.buildingName,e,this.state.isEdit).then(function(){var t=new l.b,n=Object(i.d)();if(n&&n.length)for(var a=0;a<n.length;a++){var o=n[a];t.UploadFile(l.a.DOCUMENT,e.profileFileName[a],o)}})]);case 1:n.sent(),Object(v.a)(!1),"MiscAndProcess"!=e.equipmentType||"PlugLoad"!=e.subclassType&&e.subclassType,n.label=2;case 2:return this.setState({isEdit:!1,equipment:Object()},function(){return F(t,void 0,void 0,function(){return j(this,function(t){switch(t.label){case 0:return[4,this._getAssets()];case 1:return t.sent(),this.getNewAssetLabel(e.equipmentName),[2]}})})}),[2]}})})},n.prototype.getNewAssetLabel=function(e){return F(this,void 0,void 0,function(){var t,n;return j(this,function(a){return t=this.state.assets&&this.state.assets.find(function(t){return Object(m.g)(t.ontology)==e}),(n=this.state.point).asset=Object(m.g)(t&&t.ontology),this.setState({point:n}),[2]})})},n.prototype.updateSpace=function(e){return F(this,void 0,void 0,function(){var t;return j(this,function(n){switch(n.label){case 0:return(t=this.state.point).floor?[4,this._getSpacesList(t.floor)]:[3,2];case 1:n.sent(),t.space=e.name,this.setState({point:t}),n.label=2;case 2:return[2]}})})},n.prototype.handlefileAttached=function(e){var t=this.state.point;e.length>0&&(t.tag=e&&e[0].name,this.setState({point:t}))},n.prototype.restoreSelectedVersion=function(e){return F(this,void 0,void 0,function(){var t;return j(this,function(n){switch(n.label){case 0:return e&&e.model?(t=JSON.parse(e.model),[4,this.savePoint(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},n.prototype.saveMoncon=function(){return F(this,void 0,void 0,function(){var e,t,n;return j(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,t=this.state.selectedDevice,n=JSON.parse(k.a.getItem("user")),t?(t.createdby||(t.createdby=n.name),Object(v.a)(!0),[4,Object(d.c)(t,e,this.props.isEdit)]):[3,2];case 1:a.sent(),Object(v.a)(!1),a.label=2;case 2:return[2]}})})},n.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,i=this.state,s=i.point,c=i.assets,l=i.components,r=i.isView,d=i._pointFunctions,u=i.deviceList,v=i._spaceList,f=i.equipment,E=i.isQrCameraMode,S=i.floors,k=i.isHistorian,C=i.pointsListDD,P=i.sourceSinkcomponents,A=i.relatedPointsListDD,O=i.selectedDevice,F=O&&O.wirelessConfig?O.wirelessConfig.thermostatMacAddress:"",j=O&&O.wirelessConfig?O.wirelessConfig.ipAddress:"",_=O&&O.wirelessConfig?O.wirelessConfig.subnetmask?O.wirelessConfig.subnetmask:"255.255.255.0":"",I=s.pointLabel,q=s.pointType,B=s.monconDevice,M=s.asset,R=s.component,V=s.floor,H=s.space,Q=s.isConnectedTo,G=s.assetConnectedAs,U=s.sinkSourceAssetType,J=s.sinkSourceAsset,W=s.sinkSourceComponent,z=s.sinkSourcePoint,K=!1,X=!1;Q&&("Device"==Q?K=!!B:"Equipment"==Q?K=!!M:"Component"==Q?K=!!R:"Space"==Q&&(K=!!H)),G&&("None"!=G?U&&("Equipment"==U||"Device"==U?X=!(!J||!z):"Component"==U&&(X=!!(J&&z&&W))):X=!0);var Y=!!(!!(I&&q&&V&&H&&G)&&K&&X);return o.createElement(o.Fragment,null,k&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12"},o.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",style:{marginLeft:3,marginTop:5},onClick:function(){e.setState({isHistorian:!1})}}," Go Back To "))),k&&o.createElement(D.default,{buildingName:n,instance:a,ObjectId:s.point,restoreSelectedVersion:this.restoreSelectedVersion}),!k&&o.createElement("div",{className:"card",id:"pointsForm"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"content"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(){e.setState({isHistorian:!0})}}," ",o.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," Historian Archive"))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-2"},o.createElement("label",{htmlFor:"pointLabel"},"Point Name:")),o.createElement("div",{className:"col-md-10"},o.createElement("input",{type:"text",id:"pointLabel",name:"pointLabel",className:"form-control "+(s.pointLabel?"":"addFieldValidate"),value:s.pointLabel,disabled:r,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("label",{htmlFor:"pointId"},"Point ID")),o.createElement("div",{className:"col-md-8 col-sm-3"},o.createElement("div",{className:""},o.createElement("input",{type:"text",disabled:!0,id:"pointId",className:"form-control",onChange:function(t){e.handlePointForm(t)},value:s.pointId}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointType"},"Point Type:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.pointType?"":"addFieldValidate"),id:"pointType",name:"pointType",disabled:r,onChange:function(t){return e.handlePointForm(t)},value:s.pointType?s.pointType:""},o.createElement("option",{value:""},"Select Point Type"),o.createElement("option",{value:"Sensed"},"Sensed"),o.createElement("option",{value:"Manual"},"Manual"),o.createElement("option",{value:"Virtual"},"Virtual"),o.createElement("option",{value:"Wired"},"Wired")))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("label",{htmlFor:"pointState"},"Point State:")," "),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("select",{className:"form-control "+(s.pointState?"":"addFieldValidate"),id:"pointState",name:"pointState",disabled:r,onChange:function(t){return e.handlePointForm(t)},value:s.pointState?s.pointState:""},o.createElement("option",{value:""},"Select Point State"),o.createElement("option",{value:"Planned"},"Planned"),o.createElement("option",{value:"Ordered"},"Ordered"),o.createElement("option",{value:"InInventory"},"In Inventory"),o.createElement("option",{value:"ReleasedForInstall"},"Released for Install"),o.createElement("option",{value:"Installed"},"Installed"),o.createElement("option",{value:"Testing"},"Testing"),o.createElement("option",{value:"Existing"},"Existing"),o.createElement("option",{value:"Retired"},"Retired"),o.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),o.createElement("option",{value:"Sold"},"Sold")))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointFunction"},"Point Function:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control",name:"pointDevice",disabled:r,id:"pointFunction",value:s.pointDevice,onChange:function(t){return e.handlePointFunctions(t)}},o.createElement("option",{value:"",key:-2},"Select Point Function"),o.createElement("option",{value:"addPointFunction",key:-1},"Add New Point Function"),d.map(function(e,t){return o.createElement("option",{key:t,value:Object(m.g)(e.point)},Object(m.g)(e.label))}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointId"},"Unit:")),o.createElement("div",{className:"col-md-8"},o.createElement("div",{className:""},o.createElement("input",{type:"text",className:"form-control",name:"unit",onChange:function(t){e.handlePointForm(t)},value:s.unit})))),o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointPIDName"},"Point P&ID Name:")),o.createElement("div",{className:"col-md-8"},o.createElement("div",{className:""},o.createElement("input",{type:"text",className:"form-control",name:"pointPIDName",onChange:function(t){e.handlePointForm(t)},value:s.pointPIDName})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointNumber"},"Point Number:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"number",id:"pointNumber",name:"pointNumber",disabled:r,className:"form-control col-md-6",value:s.pointNumber,onChange:function(t){return e.handlePointForm(t)}})))),o.createElement("br",null),o.createElement("br",null),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"floor"},"Floor:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.floor?"":"addFieldValidate"),disabled:r,id:"floor",name:"floor",value:s.floor,onChange:function(t){return e.handleFloorChange(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Floor"),S.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"space"},"Space:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.space?"":"addFieldValidate"),disabled:r,id:"space",name:"space",value:s.space,onChange:function(t){return e.handleSpaceSelect(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Space"),o.createElement("option",{value:"addNewSpace",key:-1},"Add New Space"),v&&v.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")}))),o.createElement(N.a,{updateSpace:this.updateSpace,closeDailogBtnID:"btnShowSpaceFormDialog",type:"",floor:"",buildingName:n,instance:a})),o.createElement("div",{className:"col-md-4 col-xs-12"})),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"Sensed"},"Point Connected To:")),o.createElement("div",{className:"col-md-9 col-xs-12"},o.createElement("div",{className:"form-control "+(s.isConnectedTo?"":"addFieldValidate")},o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Space"==s.isConnectedTo,onChange:function(){e.handleConnectedTo("Space")},name:"isSpace",id:"isSpace"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSpace"},"\xa0Space")),o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Device"==s.isConnectedTo,onChange:function(){e.handleConnectedTo("Device")},name:"isDevice",id:"isDevice"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isDevice"},"\xa0Device")),o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Equipment"==s.isConnectedTo,onChange:function(){e.handleConnectedTo("Equipment")},name:"isEquipment",id:"isEquipment"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isEquipment"},"\xa0Equipment")),o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Component"==s.isConnectedTo,onChange:function(){e.handleConnectedTo("Component")},name:"isComponent",id:"isComponent"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isComponent"},"\xa0Component")))))),("Component"==s.isConnectedTo||"Equipment"==s.isConnectedTo)&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"asset"},"Equipment:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.asset?"":"addFieldValidate"),disabled:r,id:"asset",name:"asset",value:s.asset,onChange:function(t){return e.handleAssetSelect(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Asset"),o.createElement("option",{value:"addNewAsset",key:-1},"Add new Asset from Point"),c.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Component"==s.isConnectedTo&&o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"components"},"Device Equipment Component:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.component?"":"addFieldValidate"),disabled:r,id:"components",name:"components",value:s.component,onChange:function(t){return e.handleComponentSelect(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Component"),l.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"asset"},"Related Points:")),o.createElement("div",{className:"col-md-8"},o.createElement(T.a,{closeMenuOnSelect:!1,isMulti:!0,onChange:this.handleRelatedPoints,isDisabled:r,placeholder:"Select Related Points",options:A.length>0?A:[],value:s.relatedPoints})))),"Device"==s.isConnectedTo&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointDevice"},"Device:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.monconDevice?"":"addFieldValidate"),name:"monconDevice",disabled:r,value:s.monconDevice,onChange:function(t){return e.handleDeviceSelect(t)}},o.createElement("option",{value:""},"Select Device"),o.createElement("option",{value:"addNewDevice"},"Add New Device"),u&&u.map(function(e,t){return o.createElement("option",{value:e&&e.moncondevice&&e.moncondevice.value,key:t},e&&e.rdfsLabel&&e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"asset"},"Related Points:")),o.createElement("div",{className:"col-md-8"},o.createElement(T.a,{closeMenuOnSelect:!1,isMulti:!0,onChange:this.handleRelatedPoints,isDisabled:r,placeholder:"Select Related Points",options:A.length>0?A:[],value:s.relatedPoints}))),O&&O.wirelessConfig&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("button",{className:"btn btn-success active custom-outline-btn",style:{marginLeft:3,marginTop:5},onClick:function(){document.getElementById("btnShowDeviceDetails").click()}}," Device Wireless Details "))))),"Manual"!=s.pointType&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",null,s.isConnectedTo," Connected As:")),o.createElement("div",{className:"col-md-9 col-xs-12"},o.createElement("div",{className:"form-control "+(s.assetConnectedAs?"":"addFieldValidate")},o.createElement("div",{className:"col-md-4 col-xs-4 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"None"==s.assetConnectedAs,onChange:function(){e.handleSourceOrSink("None")},name:"isNone",id:"isNone"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isNone"},"\xa0None")),o.createElement("div",{className:"col-md-4 col-xs-4 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Source"==s.assetConnectedAs,onChange:function(){e.handleSourceOrSink("Source")},name:"isSource",id:"isSource"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSource"},"\xa0Source")),o.createElement("div",{className:"col-md-4 col-xs-4 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Sink"==s.assetConnectedAs,onChange:function(){e.handleSourceOrSink("Sink")},name:"isSink",id:"isSink"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSink"},"\xa0Sink")))))),"None"!=s.assetConnectedAs&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",null,"Sink"==s.assetConnectedAs?"Hardware / Software Asset Type (Source):":"Software Asset Type (Sink):")),o.createElement("div",{className:"col-md-9"},o.createElement("div",{className:"form-control "+(s.sinkSourceAssetType?"":"addFieldValidate")},o.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Device"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Device")},name:"isSSDevice",id:"isSSDevice"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSDevice"},"\xa0Device")),o.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Equipment"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Equipment")},name:"isSSEquipment",id:"isSSEquipment"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSEquipment"},"\xa0Equipment")),o.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:r,checked:"Component"==s.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Component")},name:"isSSComponent",id:"isSSComponent"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSComponent"},"\xa0Component")))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkSourceAsset"},"Sink"==s.assetConnectedAs?"Hardware / Software "+(s.sinkSourceAssetType?"Component"==s.sinkSourceAssetType?"Equipment":s.sinkSourceAssetType:"Asset")+" (Source)":"Software "+(s.sinkSourceAssetType?"Component"==s.sinkSourceAssetType?"Equipment":s.sinkSourceAssetType:"Asset")+"  (Sink):")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.sinkSourceAsset?"":"addFieldValidate"),id:"sinkSourceAsset",name:"sinkSourceAsset",value:s.sinkSourceAsset?s.sinkSourceAsset:"",disabled:r&&!s.sinkSourceAssetType,onChange:this.handleSinkSourceAssetSelect},o.createElement("option",{value:"",key:-2},"Select ","Sink"==s.assetConnectedAs?"Source":"Sink"," ",s.sinkSourceAssetType?"Component"==s.sinkSourceAssetType?"Equipment":s.sinkSourceAssetType:"Asset"),"Device"==s.sinkSourceAssetType&&u&&u.length>0&&u[0]&&u.map(function(e,t){return o.createElement(o.Fragment,null,o.createElement("option",{value:e&&e.moncondevice&&Object(m.g)(e.moncondevice)},e&&e.rdfsLabel&&Object(m.g)(e.rdfsLabel)))}),("Equipment"==s.sinkSourceAssetType||"Component"==s.sinkSourceAssetType)&&c&&c.length>0&&c[0]&&c.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Component"==s.sinkSourceAssetType&&o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkSourceComponent"},"Sink"==s.assetConnectedAs?"Hardware / Software "+s.sinkSourceAssetType+" (Source)":"Software "+s.sinkSourceAssetType+" (Sink):")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.sinkSourceComponent?"":"addFieldValidate"),id:"sinkSourceComponent",name:"sinkSourceComponent",value:s.sinkSourceComponent?s.sinkSourceComponent:"",disabled:r&&!s.sinkSourceAssetType,onChange:this.handleSinkSourceComponentSelect},o.createElement("option",{value:"",key:-2},"Select ","Sink"==s.assetConnectedAs?"Source":"Sink"," ",s.sinkSourceAssetType?" "+s.sinkSourceAssetType:" Asset Point"),P&&P.length>0&&P[0]&&P.map(function(e){return o.createElement(o.Fragment,null,o.createElement("option",{value:e&&e.ontology&&Object(m.g)(e.ontology)},e&&e.rdfsLabel&&Object(m.g)(e.rdfsLabel)))})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkSourcePoint"},"Sink"==s.assetConnectedAs?"Hardware / Software Point (Source)":"Software Point (Sink):")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(s.sinkSourcePoint?"":"addFieldValidate"),id:"sinkSourcePoint",name:"sinkSourcePoint",value:s.sinkSourcePoint?s.sinkSourcePoint:"",disabled:r&&!s.sinkSourceAsset,onChange:this.handlePointForm},o.createElement("option",{value:"",key:-2},"Select ","Sink"==s.assetConnectedAs?"Source":"Sink"," ",s.sinkSourceAssetType?" "+s.sinkSourceAssetType:" Asset"," Point"),C&&C.length>0&&C[0]&&C.map(function(e){return o.createElement(o.Fragment,null,o.createElement("option",{value:e.value},e.label))}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sourcePointDescription"},"Source Point Description:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"sourcePointDescription",name:"sourcePointDescription",className:"form-control col-md-6",value:s.sourcePointDescription,disabled:r,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkPointDescription"},"Sink Point Description:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"sinkPointDescription",name:"sinkPointDescription",className:"form-control col-md-6",value:s.sinkPointDescription,disabled:r,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"webhook"},"Graphics link:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"webhook",name:"webhook",disabled:r,className:"form-control col-md-6",value:s.webhook,onChange:function(t){return e.handlePointForm(t)}})))))),o.createElement("br",null),o.createElement("br",null),"None"==s.assetConnectedAs&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"webhook"},"Graphics link:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"webhook",name:"webhook",disabled:r,className:"form-control col-md-6",value:s.webhook,onChange:function(t){return e.handlePointForm(t)}})))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"softwarePointDescription"},"Software Point Description:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"softwarePointDescription",name:"softwarePointDescription",disabled:r,className:"form-control col-md-6",value:s.softwarePointDescription,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"link1"},"Link 1:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"link1",name:"link1",disabled:r,className:"form-control col-md-6",value:s.link1,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"link2"},"Link 2:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"link2",name:"link2",disabled:r,className:"form-control col-md-6",value:s.link2,onChange:function(t){return e.handlePointForm(t)}})))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"notes"},"Notes:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"notes",name:"notes",disabled:r,className:"form-control col-md-6",value:s.notes,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("label",{htmlFor:"link2"},"Commissioning Date:")),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement(p.a,{disabled:r,id:"commissioningDate",className:"form-control",selected:s.commissioningDate?new Date(s.commissioningDate):void 0,onChange:function(t){return e.handleCommissioningDateChange(t)},dateFormat:"MMMM d, yyyy",customInput:o.createElement("input",{type:"text",className:"form-control",placeholder:"Commissioning Date","aria-label":"","aria-describedby":"button-addon4",value:s.commissioningDate})}))),"Manual"==s.pointType&&o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-2 col-xs-12 padding-10"},o.createElement("label",{htmlFor:"tag"},"Tag:")),o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("input",{type:"text",id:"sinkPointDescription",name:"tag",className:"form-control",value:s.tag,disabled:r,onChange:function(t){return e.handlePointForm(t)}})),o.createElement("div",{className:"col-md-4 col-xs-12",style:{display:"inline-flex"}},o.createElement("button",{type:"button",disabled:r,className:"btn btn-dark btn-sm margin-5",onClick:function(){var t=e.state.isQrCameraMode;e.setState({isQrCameraMode:!t})}},o.createElement("i",{className:"fa fa-"+(E?"close":"camera")})),o.createElement("button",{type:"button",title:"QR Code Genrator",disabled:r||!s.tag||s.tag.length<=0,className:"margin-5 btn btn-dark btn-sm",onClick:function(){document.getElementById("QRCodeGenDailogebtn").click()}},o.createElement("i",{id:"icons",className:"fa fa-qrcode"}))),o.createElement("button",{id:"QRCodeGenDailogebtn",type:"button","data-toggle":"modal","data-target":"#QRCodeGenDailoge",className:"hidden"},"."),o.createElement(h.a,{id:"QRCodeGenDailoge",heading:"QR Code",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1,showSaveButton:!1},o.createElement("div",{className:"center"},o.createElement("div",{className:"dataCard img-thumbnail"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-8 center"},s.tag&&o.createElement("div",null,o.createElement(L,{style:{verticalAlign:"middle",alignContent:"center"},id:"QRCode",value:s.tag,size:370,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0,renderAs:"canvas"}))),o.createElement("div",{className:"col-md-2 col-md-offset-2"},o.createElement("div",{className:"pull-right"},o.createElement(y.a,{filename:s.tag,data:"",ElementID:"QRCode"}))))))))))),this.props.PointName&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement(w.a,{buildingName:n,assetOntology:this.props.PointName,showUploader:!r,entityType:"Point"}))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"}),o.createElement("div",{className:"col-md-4 col-xs-12"},E&&o.createElement(x,{delay:300,onError:function(e){console.log(e)},onScan:this.handleScan,style:{width:"100%"}}))),o.createElement("br",null),o.createElement("br",null),o.createElement("div",{className:"col-md-12 text-center"},o.createElement("button",{type:"button",className:"btn btn-primary active",disabled:!Y,onClick:function(){e.savePoint()}},"Save"),"\xa0\xa0",o.createElement("button",{type:"button",className:"btn btn-danger active",onClick:function(){window.history.back()}},"Cancel")),o.createElement("br",null),o.createElement("br",null),o.createElement("button",{id:"AddDeviceDailogeButton","data-toggle":"modal","data-target":"#AddDeviceDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"AddDeviceDailoge",closeButtonId:"closeDeviceForm",heading:"Add New Device from Point",saveButtonText:"Done",isEditForm:!0,showSaveButton:!1},o.createElement(g.default,{getNewDeviceLabel:this.getNewDeviceLabel,buildingName:n,instance:a,isView:!1,isEdit:!1})),o.createElement("button",{id:"AddAssetDailogeButton","data-toggle":"modal","data-target":"#AddAssetDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"AddAssetDailoge",onSaveButtonClick:this._saveEquipment,heading:"Add New Device from Point",saveButtonText:"Save",isEditForm:!0,showSaveButton:!0},o.createElement(b.a,{onEquipmentChange:this.onEquipmentChange,equipment:f,isFromPoint:!0,buildingName:n,instance:a})),o.createElement("button",{id:"addNewFunctionDailogeButton","data-toggle":"modal","data-target":"#addNewFunctionDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"addNewFunctionDailoge",heading:"Add New Function From Point",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewPointFunction()},disableSaveButton:!s.pointDevice},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Add New Function:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:s.pointDevice,onChange:function(t){e.onChangeFunction(t.target.value)},type:"text",className:"form-control"}))))))))),o.createElement("button",{id:"addNewPointTypeDailogeButton","data-toggle":"modal","data-target":"#addNewPointTypeDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"addNewPointTypeDailoge",heading:"Add New Point Type From Point",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewPointType()},disableSaveButton:!s.pointType},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Add New Point Type:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:s.pointType,onChange:function(t){e.onChangePointType(t.target.value)},type:"text",className:"form-control"}))))))))),o.createElement("button",{id:"btnShowDeviceDetails","data-toggle":"modal","data-target":"#dialogShowDeviceDetails",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"dialogShowDeviceDetails",heading:"Device Wireless Details",saveButtonText:"Update",showCancelButton:!0,onSaveButtonClick:function(){e.saveMoncon()},disableSaveButton:!(_&&j&&F)},o.createElement("div",{className:"content card"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"}," MAC Address:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:F,onChange:function(t){e.handleDeviceForm(t)},type:"text",name:"thermostatMacAddress",id:"thermostatMacAddress",className:"form-control"}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"IP Address / Communication:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("textarea",{value:j,onChange:function(t){e.handleDeviceForm(t)},name:"ipAddress",id:"ipAddress",className:"form-control"}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"}," Subnet Mask:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:_,onChange:function(t){e.handleDeviceForm(t)},type:"text",name:"subnetmask",id:"subnetmask",className:"form-control"})))))))))))},n}(o.Component);t.default=_}.call(t,n(5).Buffer)}});