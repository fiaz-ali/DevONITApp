webpackJsonp([55],{1253:function(e,t,n){"use strict";var a=n(2),c=(n.n(a),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}()),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={contactObj:Object()},n.handleVendorForm=n.handleVendorForm.bind(n),n}return c(t,e),t.prototype.handleVendorForm=function(e){var t=this.state.contactObj,n=e.target.name;n&&n.length>0&&"contact"==n&&(e.target.value=e.target.value.replace(new RegExp(" ","g"),"")),t[""+n]=e.target.value,this.setState({contactObj:t}),this.props.handleVendorChange(t)},t.prototype.componentWillReceiveProps=function(e){if(e.contactObj.contact)this.setState({contactObj:e.contactObj});else{var t=Object();t.contact="",t.name="",t.mobile="",t.zipcode="",t.email="",t.streetAddress="",t.company="",t.city="",t.state="",this.setState({contactObj:t})}},t.prototype.render=function(){var e=this,t=(this.props,this.state.contactObj);return a.createElement("div",{className:"content"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"contact"},"Title:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"contact",disabled:this.props.isEdit,name:"contact",placeholder:"e.g BMFS",className:"form-control col-md-6",value:t.contact,onChange:function(t){return e.handleVendorForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"name"},"Name:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"name",name:"name",className:"form-control col-md-6",value:t.name,onChange:function(t){return e.handleVendorForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"company"},"Company:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"company",name:"company",className:"form-control col-md-6",value:t.company,onChange:function(t){return e.handleVendorForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"streetAddress"},"Address:")),a.createElement("div",{className:"col-md-9"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 form-group"},a.createElement("input",{type:"text",id:"streetAddress",name:"streetAddress",className:"form-control",value:t.streetAddress,placeholder:"Street",onChange:function(t){return e.handleVendorForm(t)}})),a.createElement("div",{className:"col-md-6 form-group"},a.createElement("input",{type:"text",id:"city",name:"city",className:"form-control",value:t.city,placeholder:"City",onChange:function(t){return e.handleVendorForm(t)}})),a.createElement("div",{className:"col-md-6 form-group"},a.createElement("input",{type:"text",id:"state",name:"state",className:"form-control",value:t.state,placeholder:"State",onChange:function(t){return e.handleVendorForm(t)}})),a.createElement("div",{className:"col-md-6 form-group"},a.createElement("input",{type:"text",id:"zipcode",name:"zipcode",className:"form-control",value:t.zipcode,placeholder:"Zip Code",onChange:function(t){return e.handleVendorForm(t)}})))))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"email"},"Email:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{type:"text",id:"email",name:"email",className:"form-control col-md-6",value:t.email,onChange:function(t){return e.handleVendorForm(t)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"mobile"},"Contact #:")),a.createElement("div",{className:"col-md-4"},a.createElement("input",{type:"text",id:"contact",name:"mobile",className:"form-control col-md-6",value:t.mobile,onChange:function(t){return e.handleVendorForm(t)}})),a.createElement("div",{className:"col-md-1"},a.createElement("label",{htmlFor:"notes"},"Fax:")),a.createElement("div",{className:"col-md-4"},a.createElement("input",{type:"text",id:"notes",name:"notes",className:"form-control col-md-6",value:t.notes,onChange:function(t){return e.handleVendorForm(t)}})))))},t}(a.Component);t.a=o},730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),c=(n.n(a),n(15)),o=n(10),r=n(31),l=n(1253),s=n(6),i=n(30),m=n(11),d=n(22),u=n(8),p=n(9),h=n(153),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(c,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?c(e.value):new n(function(t){t(e.value)}).then(r,l)}s((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,c,o,r={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(c=2&o[0]?a.return:o[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,o[1])).done)return c;switch(a=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(c=(c=r.trys).length>0&&c[c.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){r.label=o[1];break}if(6===o[0]&&r.label<c[1]){r.label=c[1],c=o;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(o);break}c[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_vendors:[],isEdit:!1,vendorObj:Object(),vendorToDelete:Object()},n.createVendor=n.createVendor.bind(n),n.deleteVendor=n.deleteVendor.bind(n),n.onDeleteVendor=n.onDeleteVendor.bind(n),n.onEditVendor=n.onEditVendor.bind(n),n.fetchVendors=n.fetchVendors.bind(n),n.handleVendorChange=n.handleVendorChange.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this.fetchVendors()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.fetchVendors=function(){return v(this,void 0,void 0,function(){var e=this;return f(this,function(t){switch(t.label){case 0:return Object(i.a)(!0),[4,Object(h.m)(this.props.buildingName).then(function(t){e.setState({_vendors:t&&t.filter(function(e){return"Vendor"==Object(s.g)(e.group)}),vendorObj:Object()})}).catch(function(e){return e})];case 1:return t.sent(),Object(i.a)(!1),[2]}})})},t.prototype.createVendor=function(){return v(this,void 0,void 0,function(){var e,t,n,a,c=this;return f(this,function(o){switch(o.label){case 0:return e=this.state,t=e.vendorObj,n=e.isEdit,[4,Object(m.l)(Object(m.o)(t.contact),["Vendor"])];case 1:return o.sent()&&!n?[3,5]:t?(Object(i.a)(!0),(a=this.state.vendorObj).role="3",a.group="Vendor",a.groups=[{label:"Vendor",value:"Vendor"}],a.facilityAssignedTo=[{value:this.props.buildingName,label:""}],a?[4,Object(h.f)(this.props.buildingName,a,!1).then(function(e){a.contact="",a.name="",a.mobile="",a.zipcode="",a.email="",a.streetAddress="",a.company="",a.city="",a.state=""})]:[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:this.setState({vendorObj:a},function(){c.fetchVendors()}),Object(i.a)(!1),o.label=4;case 4:return[3,6];case 5:alert("title already exists, please change title"),o.label=6;case 6:return[2]}})})},t.prototype.deleteVendor=function(){return v(this,void 0,void 0,function(){var e;return f(this,function(t){switch(t.label){case 0:return e=this.state.vendorToDelete,[4,Object(m.d)(Object(s.g)(e.contact),u.b.VENDOR)];case 1:return t.sent(),[4,this.fetchVendors()];case 2:return t.sent(),[2]}})})},t.prototype.onDeleteVendor=function(e){this.setState({vendorToDelete:e})},t.prototype.onEditVendor=function(e){var t=this.state.vendorObj;t.contact=Object(s.g)(e.contact),t.name=Object(s.g)(e.name),t.streetAddress=Object(s.g)(e.street),t.city=Object(s.g)(e.city),t.state=Object(s.g)(e.state),t.zipcode=Object(s.g)(e.zipcode),t.company=Object(s.g)(e.company),t.role=Object(s.g)(e.role),t.contact=Object(s.g)(e.contact),t.notes=Object(s.g)(e.notes),t.email=Object(s.g)(e.email),this.setState({isEdit:!0,vendorObj:t},function(){document.getElementById("btnOpenVendorForm").click()})},t.prototype.handleVendorChange=function(e){},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.isEdit,i=t._vendors,m=t.vendorObj,u=JSON.parse(p.a.getItem("user")),h=Object(d.b)(u,"work-vendor","write"),b=m&&m.name&&m.contact&&!0;return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},h&&a.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){var t=Object();e.setState({isEdit:!1,vendorObj:t},function(){document.getElementById("btnOpenVendorForm").click()})}},a.createElement("i",{className:"fa fa-plus"}),"  Create New Vendor "))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card",id:"VendorsList"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},"Vendors")),a.createElement("div",{className:"content"},a.createElement(c.AppContext.Consumer,null,function(t){return a.createElement("div",{className:"dataCard"},a.createElement("button",{type:"button",id:"btnOpenVendorForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#vendorFormDialog"}," ."),a.createElement(o.a,{id:"vendorFormDialog",onSaveButtonClick:function(){e.createVendor()},saveButtonText:"Save",disableSaveButton:!b},a.createElement(l.a,{instance:e.props.instance,buildingName:e.props.buildingName,isEdit:n,handleVendorChange:e.handleVendorChange})),a.createElement("div",{className:"row hidden-xs"},a.createElement("div",{className:h?"col-sm-9":"col-sm-12"},a.createElement("div",{className:"col-sm-3 headingText"},"Name"),a.createElement("div",{className:"col-sm-3 headingText"},"Company "),a.createElement("div",{className:"col-sm-2 headingText"},"Street"),a.createElement("div",{className:"col-sm-2 headingText"},"City"),a.createElement("div",{className:"col-sm-2 headingText"},"State/Zip")),a.createElement("div",{className:"col-sm-3 headingText"})),a.createElement(r.a,{instance:e.props.instance,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Vendor?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteVendor()}}),i.map(function(t,n){return a.createElement("div",{key:n,className:"row"},a.createElement("div",{className:h?"col-sm-9":"col-sm-12"},a.createElement("div",{className:"col-sm-3 trim-data",title:Object(s.g)(t.name)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Name")," ",Object(s.g)(t.name)),a.createElement("div",{className:"col-sm-3 trim-data",title:Object(s.g)(t.company)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Company"),Object(s.g)(t.company)),a.createElement("div",{className:"col-sm-2 trim-data",title:Object(s.g)(t.street)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Street"),Object(s.g)(t.street)),a.createElement("div",{className:"col-sm-2 trim-data",title:Object(s.g)(t.city)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"City")," ",Object(s.g)(t.city)),a.createElement("div",{className:"col-sm-2 trim-data",title:Object(s.g)(t.state)+", "+Object(s.g)(t.zipcode)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"State")," ",Object(s.g)(t.state)+", "+Object(s.g)(t.zipcode))),h&&a.createElement("div",{className:"col-sm-3 col-xs-12"},a.createElement("button",{className:"btn-xs btn-danger btn-fill","data-toggle":"modal","data-target":"#ConfirmDeleteDialog",onClick:function(n){e.onDeleteVendor(t)}},a.createElement("i",{className:"fa fa-trash"})," Delete "),a.createElement("button",{className:"btn-xs btn-success btn-fill",onClick:function(){e.onEditVendor(t)}},a.createElement("i",{className:"fa fa-edit"})," Edit ")))}))})))))))},t}(a.Component);t.default=E}});