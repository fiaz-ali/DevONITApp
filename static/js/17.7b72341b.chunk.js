webpackJsonp([17],{1000:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=(n.n(i),n(9)),c=n(11),r=n(213),s=n(8),o=n(5),u=n(66),l=n(30),d=n(104),f=n(17),h=n(14),b=n(18),p=n(1046),m=n(1025),g=n(1332),v=n(48),T=n(23),y=n(49),k=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),S=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,c){function r(e){try{o(i.next(e))}catch(e){c(e)}}function s(e){try{o(i.throw(e))}catch(e){c(e)}}function o(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}o((i=i.apply(e,t||[])).next())})},w=this&&this.__generator||function(e,t){var n,i,a,c,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&c[0]?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(6===c[0]&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],i=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},E="",O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={building:"",floor:"",space:"",asset:"",component:"",ticketType:"",_buildings:[],_floors:[],_spaces:[],_assets:[],_components:[],_ticketType:[],ticketObject:Object(),phaseTemplateDetailList:[],emailsList:[],peopleList:[]},n.ticketTypeChangeHandler=n.ticketTypeChangeHandler.bind(n),n.buildingChangeHandler=n.buildingChangeHandler.bind(n),n.getFloorBasesOnBuildingHandler=n.getFloorBasesOnBuildingHandler.bind(n),n.floorChangeHandler=n.floorChangeHandler.bind(n),n.getSpacesBasedOnFloorHandler=n.getSpacesBasedOnFloorHandler.bind(n),n.spaceChangeHandler=n.spaceChangeHandler.bind(n),n.getAssetsHandler=n.getAssetsHandler.bind(n),n.assetChangeHandler=n.assetChangeHandler.bind(n),n.getComponentsHandler=n.getComponentsHandler.bind(n),n.checkingValidations=n.checkingValidations.bind(n),n.saveTicketHandler=n.saveTicketHandler.bind(n),n.handleActivatePhase=n.handleActivatePhase.bind(n),n.handleActivateStage=n.handleActivateStage.bind(n),n}return k(t,e),t.prototype.componentDidMount=function(){return S(this,void 0,void 0,function(){return w(this,function(e){return this._fetchBuildings(),this._fetchTicketTypes(),this._fetchPhaseTemplateDetails(),this._fetchContact(),[2]})})},t.prototype._fetchBuildings=function(){return S(this,void 0,void 0,function(){var e=this;return w(this,function(t){switch(t.label){case 0:return[4,Object(l.d)().then(function(t){e.setState({_buildings:t}),e.buildingChangeHandler(e.props.buildingName)}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchTicketTypes=function(){return S(this,void 0,void 0,function(){var e=this;return w(this,function(t){switch(t.label){case 0:return[4,Object(g.c)().then(function(t){e.setState({_ticketType:t}),e.ticketTypeChangeHandler(t[0].ontology)}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchPhaseTemplateDetails=function(){return S(this,void 0,void 0,function(){var e=this;return w(this,function(t){switch(t.label){case 0:return[4,Object(v.j)(this.props.buildingName).then(function(t){e.setState({phaseTemplateDetailList:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchContact=function(){return S(this,void 0,void 0,function(){var e;return w(this,function(t){switch(t.label){case 0:return[4,Object(d.m)(this.props.buildingName)];case 1:return(e=t.sent())&&this.setState({peopleList:e}),[2]}})})},t.prototype.ticketTypeChangeHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){return t=this.state.ticketObject,this.setState({ticketType:e}),t.ticketTypeOntology=e,[2]})})},t.prototype.buildingChangeHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){return t=this.state.ticketObject,this.setState({building:e}),t.buildingOntology=e,this.getFloorBasesOnBuildingHandler(e),[2]})})},t.prototype.getFloorBasesOnBuildingHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){switch(n.label){case 0:return[4,Object(T.f)(e)];case 1:return t=n.sent(),this.setState({_floors:t,_spaces:[],_assets:[],_components:[],space:"",asset:"",component:""}),[2]}})})},t.prototype.floorChangeHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){return t=this.state.ticketObject,this.setState({floor:e}),t.floorOntology=e,this.getSpacesBasedOnFloorHandler(e),[2]})})},t.prototype.getSpacesBasedOnFloorHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){switch(n.label){case 0:return[4,Object(b.c)(e,this.state.building)];case 1:return t=n.sent(),this.setState({_spaces:t,_assets:[],_components:[],asset:"",component:""}),[2]}})})},t.prototype.spaceChangeHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){return t=this.state.ticketObject,this.setState({space:e}),t.spaceOntology=e,this.getAssetsHandler(e),[2]})})},t.prototype.getAssetsHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){switch(n.label){case 0:return""==e?(this.setState({_assets:[],_components:[],component:"",asset:""}),[2]):[4,Object(u.g)(this.state.building,s.b.POINT,this.state.floor,e)];case 1:return t=n.sent(),this.setState({_assets:t,_components:[],component:""}),[2]}})})},t.prototype.assetChangeHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){return t=this.state.ticketObject,this.setState({asset:e}),t.assetOntology=e,this.getComponentsHandler(e),[2]})})},t.prototype.getComponentsHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){switch(n.label){case 0:return[4,Object(f.l)(this.state.building,e)];case 1:return t=n.sent(),this.setState({_components:t}),[2]}})})},t.prototype.componentChangeHandler=function(e){return S(this,void 0,void 0,function(){var t;return w(this,function(n){return t=this.state.ticketObject,this.setState({component:e}),t.componentOntology=e,[2]})})},t.prototype.checkingValidations=function(e,t){document.getElementById(e).classList.add("text-success"),document.getElementById(t).classList.add("is-valid")},t.prototype.saveTicketHandler=function(){return S(this,void 0,void 0,function(){var e,t,n,i,a,c,r=this;return w(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.instance,i=this.state.ticketObject,[4,Object(g.e)(i)];case 1:return s.sent(),a=i.ticketTypeOntology,[4,Object(g.b)(a)];case 2:return c=s.sent(),c.split(",").map(function(e){return S(r,void 0,void 0,function(){var n,i,a,c,r,s,o,u,l,d,f=this;return w(this,function(b){switch(b.label){case 0:for(n=this.state.phaseTemplateDetailList.find(function(t){return t.ontology===e}),(i=Object()).description=n.description,i.module=n.module,i.status="Planned",i.phaseID=Object(h.j)(7).toString(),i.templateID=n.templateID,i.templateType=n.templateType,i.stageTemplateOnology=[],i.stages=[],a=0;a<n.stageTemplates.length;a++){for(c=n.stageTemplates[a],r=Object(),s=Object(h.k)(7),r.task=s,r.taskNumber=Object(h.j)(7).toString(),r.description=c.description,r.enteredBy=c.enteredBy,r.enteredByName=c.enteredByName,r.assignedTo=c.assignedTo,r.hasChat=!0,r.entryTimeStamp=c.entryTimeStamp,r.criticality=c.criticality,r.equipSubject=c.equipSubject,r.equipRdfsLabel=c.equipRdfsLabel,r.spaceSubject=c.spaceSubject,r.spaceRdfsLabel=c.spaceRdfsLabel,r.floor=c.floor,r.building=c.building,r.workOrder=c.workOrder,r.status="Planned",r.acknowledged=!0,r.archived=!1,r.startTime="",r.note="",r.isSequence=!0,r.QRTag=c.QRTag,r.isQRTask=c.isQRTask,r.subTasks=[],r.workflowType=c.workflowType,r.redirectionLink=c.redirectionLink,r.isStage=!0,r.isActivated=!1,r.estimatedStartTime=new Date,o=new Date,r.estimatedEndTime=new Date(o.setDate(new Date(o).getDate()+2)),r.subTasks=[],u=0;u<c.subTasks.length;u++)l=c.subTasks[u],(d=Object()).subTask=Object(h.k)(7),d.taskNumber=Object(h.j)(7).toString(),d.description=l.description,d.enteredBy=l.enteredBy,d.enteredByName=l.enteredByName,d.assignedTo=l.assignedTo,d.assignedDepartment=l.assignedDepartment,d.hasChat=!0,d.entryTimeStamp=l.entryTimeStamp,d.criticality=l.criticality,d.equipSubject=r.equipSubject,d.equipRdfsLabel=r.equipRdfsLabel,d.spaceSubject=r.spaceSubject,d.spaceRdfsLabel=r.spaceRdfsLabel,d.building=r.building,d.workOrder=l.workOrder,d.status="Planned",d.acknowledged=!0,d.archived=!1,d.index=l.index,d.parentTask=r.task,d.note=l.note,d.relatedLink=l.relatedLink,d.duration=l.duration,d.durationUnit=l.durationUnit,d.workerDuration=l.workerDuration,d.workerDurationUnit=l.workerDurationUnit,d.fileName=l.fileName,d.oldFileName=l.oldFileName,d.startTime="",d.workType=l.workType,d.checklistID=l.checklistID,d.isQRTask=l.isQRTask,d.QRTag=l.QRTag,d.notifyViaEmail=l.notifyViaEmail,d.notifyViaSMS=l.notifyViaSMS,d.estimatedStartTime=r.estimatedStartTime,d.estimatedEndTime=r.estimatedEndTime,d.workflowType=l.workflowType,d.redirectionLink=l.redirectionLink,d.isStage=!0,d.isActivated=!1,d.acknowledged=!0,d.archived=!1,r.subTasks.push(d);i&&i.stages&&i.stages.push(r)}return[4,Object(m.d)(t,i,!1,!0).then(function(e){return S(f,void 0,void 0,function(){return w(this,function(e){switch(e.label){case 0:return[4,this.handleActivatePhase(i)];case 1:return e.sent(),[2]}})})}).catch(function(e){return e})];case 1:return b.sent(),[2]}})})}),window.location.hash=n+"/"+t+"/Tickets",[2]}})})},t.prototype.handleActivatePhase=function(e){return S(this,void 0,void 0,function(){var t,n;return w(this,function(i){switch(i.label){case 0:t=0,i.label=1;case 1:return t<e.stages.length?(n=e.stages[t],[4,this.handleActivateStage(n,e.templateType,t)]):[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},t.prototype.handleActivateStage=function(e,t,n){return S(this,void 0,void 0,function(){var i,r,s,u,l,d;return w(this,function(f){switch(f.label){case 0:if(i=this.props.buildingName,r=this.state.peopleList,s=this.state.emailsList,e.startTime=n&&null!=n?0==n?new Date(Date.now()).toString():"":new Date(Date.now()).toString(),e.startTaskCondition=n&&null!=n?0==n?"daytime":"completionof":"daytime",e.conditionalTasks=n&&null!=n?0==n?[]:[{label:E,value:E}]:[],e.status=n&&null!=n?0==n?"Assigned":"Pending":"Assigned",e.acknowledged=!0,e.isSequence=!0,e.archived=!1,e.isDeleted=!1,e.isActivated=!0,e.workflowType=e.workflowType?e.workflowType:t,e.assignedTo&&e.assignedTo.length>0)for(u=function(t){if(e.assignedTo[t]&&e.assignedTo[t].value){var n=r&&r.find(function(n){return Object(o.g)(n.contact)==e.assignedTo[t].value});if(s||(s=[]),n&&n.email)s.find(function(e){return e==Object(o.g)(n.email)})||s.push(Object(o.g)(n.email))}},d=0;d<e.assignedTo.length;d++)u(d);for(e.hasChat=!0,l=function(i){if(e.subTasks[i].workflowType=e.workflowType?e.workflowType:t,e.subTasks[i].isActivated=!0,e.subTasks[i].assignedTo&&e.subTasks[i].assignedTo.length>0){var a=r&&r.find(function(t){return Object(o.g)(t.contact)==e.subTasks[i].assignedTo});if(s||(s=[]),a&&a.email)s.find(function(e){return e==Object(o.g)(a.email)})||s.push(Object(o.g)(a.email))}e.subTasks[i].startTime=n&&null!=n?0==n&&0==i?new Date(Date.now()).toString():"":0==i?new Date(Date.now()).toString():"",e.subTasks[i].status=n&&null!=n?0==n&&0==i?"Assigned":"Pending":0==i?"Assigned":"Pending",e.subTasks[i].acknowledged=!0,e.subTasks[i].isDeleted=!1,e.subTasks[i].startTaskCondition=n&&null!=n?0==n&&0==i?"daytime":"completionof":0==i?"daytime":"completionof",e.subTasks[i].conditionalTasks=n&&null!=n?0==n&&0==i?[]:n>0&&0==i?[{label:E,value:E}]:[{label:e.subTasks[i-1].subTask,value:e.subTasks[i-1].subTask}]:i>0?[{label:e.subTasks[i-1].subTask,value:e.subTasks[i-1].subTask}]:[],E=e.task},d=0;d<e.subTasks.length;d++)l(d);return Object(c.a)(!0),"Contract"!=t?[3,2]:[4,Object(p.s)(s,["read"],e.contractFileName).then(function(t){if(t.link){var n=t.link[0].link.webUrl;e.contractFileUrl=n;for(var r=0;r<e.subTasks.length;r++){e.subTasks[r].contractFileUrl=n}Object(p.p)(i,e,!0),Object(m.e)("","Assigned",!0).then(function(){}),Object(c.a)(!1)}else console.log(t),Object(a.a)("Error occured while requesting permissions for Contract File.")})];case 1:return f.sent(),[3,5];case 2:return[4,Object(p.p)(i,e,!0)];case 3:return f.sent(),[4,Object(m.e)("","Assigned",!0).then(function(){})];case 4:f.sent(),Object(c.a)(!1),f.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,a=t.buildingName,c=this.state,s=c._buildings,u=c._floors,l=c._spaces,d=c._assets,f=c._components,h=c._ticketType,b=c.building,p=c.floor,m=c.space,g=c.asset,v=c.component,T=c.ticketObject;return i.createElement(i.Fragment,null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid small"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 no-padding"},i.createElement("div",{className:"card p-2 no-margin"},i.createElement("div",{className:""},i.createElement("div",{className:"content"},i.createElement("div",{className:"row no-margin p-2"},i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"ONIT Ticket Type: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{name:"ticketType",id:"ticketType",className:"form-control",onChange:function(t){e.ticketTypeChangeHandler(t.target.value)}},i.createElement("option",{value:""},"Select Ticket Type "),h&&h.map(function(e,t){return i.createElement("option",{key:t,value:e.ontology},e.ticketType," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{id:"issueLabel",className:"col-md-3 py-2 px-0 headingText"},"Describe the Issue:"),i.createElement("div",{className:"col-md-9 no-padding "},i.createElement("textarea",{id:"issue",rows:3,className:"form-control",value:T.ticketIssue,onChange:function(e){T.ticketIssue=e.target.value}}))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Building: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{className:"form-control",name:"building",value:b,id:"building",onChange:function(t){e.buildingChangeHandler(t.target.value)}},i.createElement("option",{value:""},"Select Building"),s&&s.map(function(e,t){return i.createElement("option",{key:t,value:Object(o.g)(e.building)},Object(o.g)(e.rdfsLabel)," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Floor: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{className:"form-control",id:"floor",name:"floor",value:p,onChange:function(t){e.floorChangeHandler(t.target.value)}},i.createElement("option",{value:""},"Select Floor"),u.map(function(e,t){return i.createElement("option",{value:Object(o.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Space: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{className:"form-control",id:"space",name:"space",value:m,onChange:function(t){e.spaceChangeHandler(t.target.value)}},i.createElement("option",{value:""},"Select Space"),l.map(function(e,t){return i.createElement("option",{value:Object(o.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Asset: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{className:"form-control",id:"space",name:"space",value:g,onChange:function(t){e.assetChangeHandler(t.target.value)}},i.createElement("option",{value:""},"Select Assets"),d.map(function(e,t){return i.createElement("option",{value:Object(o.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Component: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{className:"form-control",id:"component",name:"component",value:v,onChange:function(t){e.componentChangeHandler(t.target.value)}},i.createElement("option",{value:""},"Select Component"),f.map(function(e,t){return i.createElement("option",{value:Object(o.g)(e.name),key:t},e.rdfsLabel.value," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Concern: "),i.createElement("div",{className:"col-md-9 no-padding"},i.createElement("select",{name:"ticketType",id:"ticketType",className:"form-control",onChange:function(e){T.criticalityOntology=e.target.value}},i.createElement("option",{value:""},"Select Criticality"),r.c.map(function(e,t){return i.createElement("option",{key:t,value:e.id}," ",e.id," - ",e.name," ")})))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Suggest Fix: "),i.createElement("div",{className:"col-md-9 no-padding "},i.createElement("textarea",{rows:4,className:"form-control",value:T.suggestionFix,onChange:function(e){T.suggestionFix=e.target.value}}))),i.createElement("div",{className:"col-md-12 px-0 py-2"},i.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Actual Find / Fix:"),i.createElement("div",{className:"col-md-9 no-padding "},i.createElement("textarea",{rows:5,className:"form-control",value:T.acutalFindFix,onChange:function(e){T.acutalFindFix=e.target.value}})))))))),i.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},i.createElement("div",{className:"card p-2"},i.createElement("div",{className:"row py-0 no-margin p-2"},i.createElement(y.a,{showUploader:!0,buildingName:this.props.buildingName,assetOntology:"",entityType:"Ticket",documentType:"Media"})))),i.createElement("br",null),i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){return S(e,void 0,void 0,function(){return w(this,function(e){return this.saveTicketHandler(),[2]})})}},i.createElement("i",{className:"fa fa-save"}),"Save"),i.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=n+"/"+a+"/Tickets"}},i.createElement("i",{className:"fa fa-angle-double-left"}),"  Back to ONIT Tickets")))))))))},t}(i.Component);t.default=O},1025:function(e,t,n){"use strict";t.d=function(e,t,n,o){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({buildingName:e,model:t,isEdit:n,saveStages:o},i.a.TASKTEMPLATE.SAVEPHASE,a.b.TASK).then(function(){Object(c.b)("Workflow "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(c.a)("Error occured while saving Workflow.")})];case 1:return[2,r.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return r(this,void 0,void 0,function(){return s(this,function(c){switch(c.label){case 0:return[4,Object(i.e)({buildingName:e,ontology:t},i.a.TASKTEMPLATE.GETPHASEDETAILLIST,a.b.TASK,n)];case 1:return[2,c.sent()]}})})},t.c=function(e,t,n){void 0===n&&(n=!0);return r(this,void 0,void 0,function(){return s(this,function(c){switch(c.label){case 0:return[4,Object(i.e)({buildingName:e,ontology:t},i.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,a.b.TASK,n)];case 1:return[2,c.sent()]}})})},t.e=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({taskID:e,status:t},i.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,a.b.TASK).then(function(){n||Object(c.b)("Status Updated Successfully.")}).catch(function(e){Object(c.a)("Error occured while update Status.")})];case 1:return[2,r.sent()]}})})},t.a=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,ontology:t},i.a.DEPENDENCY.GETDEPENDENCY,a.b.TASK,!0)];case 1:return[2,n.sent()]}})})};var i=n(12),a=n(8),c=n(9),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,c){function r(e){try{o(i.next(e))}catch(e){c(e)}}function s(e){try{o(i.throw(e))}catch(e){c(e)}}function o(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}o((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,c,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&c[0]?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(6===c[0]&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],i=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}},1046:function(e,t,n){"use strict";t.n=function(){var e=JSON.parse(r.a.getItem("user"));return!(!e||e.workingStatus&&"Not Working"!=e.workingStatus)&&(!!document.getElementById("btnStatus")&&(document.getElementById("btnStatus").click(),!0))},t.l=function(){return s(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(c.e)({},c.a.TASKS.GetTaskTypeList,i.b.TASK)];case 1:return[2,e.sent()]}})})},t.m=function(){return s(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,Object(c.e)({},c.a.TASKS.GetWorkTypeList,i.b.TASK)];case 1:return[2,e.sent()]}})})},t.h=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.e)({buildingName:e,getArchivedOnly:t},c.a.CHATS.GetChats,i.b.TASK)];case 1:return[2,n.sent()]}})})},t.f=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,chatName:t},c.a.CHATS.DeleteChat,i.b.TASK).then(function(){Object(a.b)("Chat Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting Chat.")})];case 1:return[2,n.sent()]}})})},t.r=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,chatName:t},c.a.TASKS.UpdateLastMessageOn,i.b.CHAT)];case 1:return[2,n.sent()]}})})},t.w=function(e){return s(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(c.f)({chatName:e},c.a.TASKS.UpdateUnreadCount,i.b.TASK)];case 1:return[2,t.sent()]}})})},t.p=function(e,t,n){return s(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Object(c.f)({buildingName:e,model:t,isEdit:n},c.a.TASKS.UpdateRootTask,i.b.TASK).then(function(){Object(a.b)("Task "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Task.")})];case 1:return[2,r.sent()]}})})},t.i=function(e,t,n){return s(this,void 0,void 0,function(){return o(this,function(a){switch(a.label){case 0:return[4,Object(c.e)({buildingName:e,taskNumber:t,isArchived:n},c.a.TASKS.GETTASKS,i.b.TASK,!0)];case 1:return[2,a.sent()]}})})},t.j=function(e,t,n){return s(this,void 0,void 0,function(){return o(this,function(a){switch(a.label){case 0:return[4,Object(c.e)({buildingName:e,parentTask:t,subTaskNumber:n},c.a.TASKS.GetSubTask,i.b.TASK)];case 1:return[2,a.sent()]}})})},t.t=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,isDeleted:t},c.a.TASKS.UpdateRootTaskDeleteStatus,i.b.TASK).then(function(){Object(a.b)("Task Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting Task.")})];case 1:return[2,n.sent()]}})})},t.v=function(e,t,n){return s(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Object(c.f)({taskID:e,status:t},c.a.TASKS.UpdateTaskStatus,i.b.TASK).then(function(){n||Object(a.b)("Status Updated Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Task.")})];case 1:return[2,r.sent()]}})})},t.u=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,startTime:t},c.a.TASKS.UpdateTaskStartTime,i.b.TASK).then(function(){Object(a.b)("Start Time Updated Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Task.")})];case 1:return[2,n.sent()]}})})},t.d=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,isArchived:t},c.a.TASKS.ArchiveTask,i.b.TASK).then(function(){Object(a.b)((t?"Archived":"Unarchived")+" Successfully.")}).catch(function(e){Object(a.a)("Error occured while Archiving Task.")})];case 1:return[2,n.sent()]}})})},t.c=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,note:t},c.a.TASKS.AddPauseNote,i.b.TASK).then(function(){}).catch(function(e){Object(a.a)("Error occured while saving Task.")})];case 1:return[2,n.sent()]}})})},t.g=function(e){return s(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(c.f)({taskID:e},c.a.TASKS.DeletePauseNote,i.b.TASK).then(function(){}).catch(function(e){Object(a.a)("Error occured while saving Task.")})];case 1:return[2,t.sent()]}})})},t.b=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,note:t},c.a.TASKS.AddNote,i.b.TASK).then(function(){Object(a.b)("Note Added Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Task.")})];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,isAcknowledged:t},c.a.TASKS.AcknowledgeRootTask,i.b.TASK).then(function(){Object(a.b)(t?"Acknowledged Successfully.":"Unacknowledged Successfully.")}).catch(function(e){Object(a.a)("Error occured while Acknowledging.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.f)({taskID:e,checklistID:t},c.a.TASKS.AssignChecklist,i.b.TASK).then(function(){Object(a.b)("Checklist Assigned Successfully.")}).catch(function(e){Object(a.a)("Error occured while Assigning Checklist.")})];case 1:return[2,n.sent()]}})})},t.s=function(e,t,n){return s(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,Object(c.f)({email:e,roles:t,fileName:n},c.a.ONEDRIVE.UPDATEPERMISSION,i.b.TASK,"",!0).then(function(e){return e}).catch(function(e){Object(a.a)("Error occured while update Permission.")})];case 1:return[2,r.sent()]}})})},t.o=function(e){return s(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(c.f)({fileName:e},c.a.ONEDRIVE.REMOVEPERMISSION,i.b.TASK,"",!0).then(function(e){return e}).catch(function(e){Object(a.a)("Error occured while removing Permission.")})];case 1:return[2,t.sent()]}})})},t.k=function(e,t){return s(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,Object(c.e)({buildingName:e,checklistID:t},c.a.TASKS.GetTaskHavingChecklist,i.b.TASK,!0)];case 1:return[2,n.sent()]}})})},t.q=function(e){return s(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,Object(c.f)({buildingName:e},c.a.TASKS.TriggerTaskManagement,i.b.TASK,"").then(function(e){return e}).catch(function(e){Object(a.a)("Error occured while triggering task automation.")})];case 1:return[2,t.sent()]}})})};var i=n(8),a=n(9),c=n(12),r=n(13),s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,c){function r(e){try{o(i.next(e))}catch(e){c(e)}}function s(e){try{o(i.throw(e))}catch(e){c(e)}}function o(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}o((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,a,c,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&c[0]?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(6===c[0]&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],i=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}},1332:function(e,t,n){"use strict";t.e=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(c.f)(e,c.a.TICKETS.AddNewTicket,a.b.TICKET).then(function(){Object(i.b)("Ticket Added")}).catch(function(e){Object(i.a)("Error occured while saving Ticket.")})];case 1:return[2,t.sent()]}})})},t.f=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(c.f)({ticketType:e},c.a.TICKETS.AddNewTicketType,a.b.TICKET).then(function(){Object(i.b)("Ticket Type Added")}).catch(function(e){Object(i.a)("Error occured while saving Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(c.f)({ticketTypeOntology:e},c.a.TICKETS.DeleteTicketType,a.b.TICKET).then(function(){Object(i.b)("Ticket Type Deleted")}).catch(function(e){Object(i.a)("Error occured while deleting Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.d=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Object(c.e)({},c.a.TICKETS.GetAllTickets,a.b.TICKET)];case 1:return[2,e.sent()]}})})},t.c=function(){return r(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Object(c.e)({},c.a.TICKETS.GetTicketTypes,a.b.TICKET)];case 1:return[2,e.sent()]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(c.e)({ticketTypeOntology:e},c.a.TICKETS.GetTicketTypeUsingOntology,a.b.TICKET,!0)];case 1:return[2,t.sent()]}})})};var i=n(9),a=n(8),c=n(12),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,c){function r(e){try{o(i.next(e))}catch(e){c(e)}}function s(e){try{o(i.throw(e))}catch(e){c(e)}}function o(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}o((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,c,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&c[0]?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(6===c[0]&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],i=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}}});