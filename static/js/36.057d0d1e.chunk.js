webpackJsonp([36],{3115:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=(a.n(n),a(841)),r=a(665),s=a.n(r),o=a(671),c=a(116),l=a(872),u=a(752),d=a(23),m=a(692),f=a(817),h=a(10),p=a(761),b=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),v=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(s,o)}c((n=n.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var a,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},g=new Date,E=new Date,T=new Date,D=new Date,w=new Date,j=new Date,S=function(e){function t(t){var a=e.call(this,t)||this;return a.state={verifyObj:Object(),verifyIPMVPList:[],WOList:[],phaseTemplateDetailList:[]},a.handleChange=a.handleChange.bind(a),a.startDateHandler=a.startDateHandler.bind(a),a.plainLastModifiedHandler=a.plainLastModifiedHandler.bind(a),a.finishDateHandler=a.finishDateHandler.bind(a),a.ecm_startDateHandler=a.ecm_startDateHandler.bind(a),a.ecm_finishDateHandler=a.ecm_finishDateHandler.bind(a),a.fetchVerify=a.fetchVerify.bind(a),a.fetchIPMVPVerify=a.fetchIPMVPVerify.bind(a),a.saveVerify=a.saveVerify.bind(a),a.handleVerifyObjChange=a.handleVerifyObjChange.bind(a),a._getWorkOrdersList=a._getWorkOrdersList.bind(a),a.savingToDateDateHandler=a.savingToDateDateHandler.bind(a),a.handleWorkflowChange=a.handleWorkflowChange.bind(a),a._getPhaseTemplateDetails=a._getPhaseTemplateDetails.bind(a),a.createWorkFlow=a.createWorkFlow.bind(a),a}return b(t,e),t.prototype.componentWillMount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return this.startDateHandler(new Date),this.finishDateHandler(new Date),this.plainLastModifiedHandler(new Date),this.savingToDateDateHandler(new Date),[4,this._getWorkOrdersList()];case 1:return e.sent(),[4,this._getPhaseTemplateDetails()];case 2:return e.sent(),[2]}})})},t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.props.id?[4,this.fetchVerify()]:[3,2];case 1:return t.sent(),[3,5];case 2:return(e=this.state.verifyObj).verifyType=this.props.verifyType,e.verifyType!=i.c.Measure?[3,4]:[4,this.fetchIPMVPVerify()];case 3:t.sent(),t.label=4;case 4:e.startDate=g?g.toString():"",e.plainLastModified=w?w.toString():"",e.finishDate=E?E.toString():"",e.ECM_StartDate=T?T.toString():"",e.ECM_FinishDate=D?D.toString():"",this.setState({verifyObj:e}),t.label=5;case 5:return[2]}})})},t.prototype._getPhaseTemplateDetails=function(){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:return[4,Object(u.j)(this.props.buildingName).then(function(t){t.length>0&&t[0].ontology?e.setState({phaseTemplateDetailList:t}):e.setState({phaseTemplateDetailList:[]})})];case 1:return t.sent(),[2]}})})},t.prototype._getWorkOrdersList=function(){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:return Object(c.a)(!0),[4,Object(l.e)(this.props.buildingName).then(function(t){e.setState({WOList:t})}).catch(function(e){return e})];case 1:return t.sent(),Object(c.a)(!1),[2]}})})},t.prototype.fetchVerify=function(){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:return[4,Object(o.g)(this.props.buildingName,"",this.props.id).then(function(t){return v(e,void 0,void 0,function(){var e;return y(this,function(a){switch(a.label){case 0:return t&&t[0]&&t[0].ontology?(e=t[0],g=e.startDate?new Date(e.startDate):void 0,w=e.plainLastModified?new Date(e.plainLastModified):void 0,E=e.finishDate?new Date(e.finishDate):void 0,T=e.ECM_StartDate?new Date(e.ECM_StartDate):void 0,D=e.ECM_FinishDate?new Date(e.ECM_FinishDate):void 0,j=e.savingToDate?new Date(e.savingToDate):void 0,e.verifyType!=i.c.Measure?[3,2]:[4,this.fetchIPMVPVerify()]):[3,3];case 1:a.sent(),a.label=2;case 2:this.setState({verifyObj:e}),a.label=3;case 3:return[2]}})})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.fetchIPMVPVerify=function(){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:return[4,Object(o.g)(this.props.buildingName,i.c.IPMVP).then(function(t){t&&e.setState({verifyIPMVPList:t},function(){var t=localStorage.getItem("currentIPMVP");t&&e.handleVerifyObjChange("relatedIPMVP",t)})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.createWorkFlow=function(e,t){return v(this,void 0,void 0,function(){var a,n,i,r,s,o,l,u,b,v,g,E,T,D,w,j,S;return y(this,function(O){switch(O.label){case 0:a=this.props.buildingName,Object(c.a)(!0),n=Object(),t._id&&t._id.length>0?n.ontology=Object(d.q)(7):n.ontology=t&&t?t.ontology:Object(d.q)(7),n.description=this.state.verifyObj.projectName+" "+e.description,n.module=e.module,n.status="Planned",n.phaseID=Object(d.o)(7).toString(),n.templateID=e.templateID,n.templateType=e.templateType,n.estimatedStartTime=e.estimatedStartTime,n.estimatedEndTime=e.estimatedEndTime,i=[],r=e.facilitatorAssigned,i[0]=Object(),i[0].label=r,i[0].value=r,n.facilitatorAssigned=i[0],n.stageTemplateOnology=[],n.stages=[],s=[],o=[],l=0,O.label=1;case 1:if(!(l<e.stageTemplates.length))return[3,7];if(!(e.stageTemplates.length>0&&e.stageTemplates[0].ontology))return[3,6];for(u=e.stageTemplates[l],b=Object(),v=Object(d.q)(7),g="",g+=Object(d.p)(),b.color=g,b.task=v,b.taskNumber=Object(d.o)(7).toString(),b.description=u.description,b.action=u.action,b.enteredBy=u.enteredBy,b.enteredByName=u.enteredByName,b.assignedTo=u.assignedTo,b.hasChat=!0,b.entryTimeStamp=u.entryTimeStamp,b.criticality=u.criticality,b.equipSubject=u.equipSubject,b.equipRdfsLabel=u.equipRdfsLabel,b.spaceSubject=u.spaceSubject,b.spaceRdfsLabel=u.spaceRdfsLabel,b.floor=u.floor,b.building=u.building,b.workOrder=u.workOrder,b.wfOntology=n.ontology,b.workflowType="IPMVP",b.status="Pending",b.acknowledged=!0,b.archived=!1,b.startTime="",b.workOrder=u.workOrder,b.note="",b.isSequence=!0,b.QRTag=u.QRTag,b.isQRTask=u.isQRTask,b.subTasks=[],b.redirectionLink=u.redirectionLink,b.isStage=!0,b.isActivated=!1,b.estimatedStartTime=new Date,E=0,S=0;S<u.subTasks.length;S++)T=u.subTasks[S],E+=parseInt(T.duration);D=b.subTasks.length>0?new Date(b.subTasks[0].estimatedStartTime):new Date,b.estimatedEndTime=new Date(D.setHours(D.getHours()+E)),w=function(e){var t,i,r,c,l,m,v,E,T,D,w,S,O;return y(this,function(y){switch(y.label){case 0:return[4,Object(p.c)(j.props.buildingName,[u.subTasks[e].ontology])];case 1:return t=y.sent(),i=u.subTasks[e],(r=Object()).subTask=Object(d.q)(7),r.taskNumber=Object(d.o)(7).toString(),r.color=g,[4,Object(f.d)(a,["TaskTemplate"],[i.ontology])];case 2:if((c=y.sent())&&c.length>0&&c[0].entityOntology)for(l=0;l<c.length;l++)m=Object(),v=c[l],m.docOntology=r.subTask+Object(d.u)()+l,m.building=Object(h.g)(v.building),m.documentType=Object(h.g)(v.documentType),m.enteredBy=Object(h.g)(v.enteredBy),m.entityOntology=[{label:r.subTask,value:r.subTask}],m.entityType="Task",m.entryTimeStamp=(new Date).toString(),m.rdfsLabel=Object(h.g)(v.rdfsLabel),m.s3FileName=Object(h.g)(v.s3FileName),o.push(m);for(r.description=i.description,r.action=i.action,r.asset=i.asset,r.enteredBy=i.enteredBy,r.enteredByName=i.enteredByName,r.assignedTo=i.assignedTo,r.assignedDepartment=i.assignedDepartment,r.hasChat=!0,r.entryTimeStamp=i.entryTimeStamp,r.criticality=i.criticality,r.equipSubject=b.equipSubject,r.equipRdfsLabel=b.equipRdfsLabel,r.spaceSubject=b.spaceSubject,r.spaceRdfsLabel=b.spaceRdfsLabel,r.building=b.building,r.workOrder=i.workOrder,r.status="Pending",r.acknowledged=!0,r.archived=!1,r.index=i.index,r.parentTask=b.task,r.note=i.note,r.relatedLink=i.relatedLink,r.duration=i.duration,r.durationUnit=i.durationUnit,r.workerDuration=i.workerDuration,r.workerDurationUnit=i.workerDurationUnit,r.fileName=i.fileName,r.oldFileName=i.oldFileName,r.startTime="",r.workType=i.workType,r.checklistID=i.checklistID,r.isQRTask=i.isQRTask,r.QRTag=i.QRTag,r.notifyViaEmail=i.notifyViaEmail,r.notifyViaSMS=i.notifyViaSMS,r.estimatedStartTime=b.estimatedStartTime,r.estimatedEndTime=b.estimatedEndTime,r.workflowType=i.workflowType,r.redirectionLink=i.redirectionLink,r.isStage=!0,r.isActivated=!1,r.acknowledged=!0,r.archived=!1,r.wfOntology=n.ontology,b.subTasks.push(r),E=t.filter(function(e){return e.taskOntology==i.ontology}),T=0;T<E.length;T++)D=E[T],(w=Object()).ontology=Object(d.q)(10),w.directive=D.directive,w.directiveType=D.directiveType,w.floorOntology=D.floorOntology,w.spaceOntology=D.spaceOntology,w.componentOntology=D.componentOntology,w.assetOntology=D.assetOntology,w.pointOntology=D.pointOntology,w.unit=D.unit,w.taskOntology=r.subTask,w.taskDescription=D.taskDescription,w.isTemplate=!1,w.objectTemplateReferenceID=D.ontology,w.isQrCodeVerified=!1,w.qrCode=D.qrCode,w.visibleObjectFormActions=[],s.push(w);for(S=function(e){var a=s[e],n=t.find(function(e){return e.ontology==a.objectTemplateReferenceID});if(n&&n.visibleObjectFormActions&&n.visibleObjectFormActions.length>0)for(var i=function(e){var i=n.visibleObjectFormActions[e];if(""!=i){var r=t.find(function(e){return e.ontology==i}),o=s.find(function(e){return e.objectTemplateReferenceID==r.ontology});-1==a.visibleObjectFormActions.findIndex(function(e){return e==o.ontology})&&a.visibleObjectFormActions.push(o.ontology)}},r=0;r<n.visibleObjectFormActions.length;r++)i(r)},O=0;O<s.length;O++)S(O);return[2]}})},j=this,S=0,O.label=2;case 2:return S<u.subTasks.length?[5,w(S)]:[3,5];case 3:O.sent(),O.label=4;case 4:return S++,[3,2];case 5:n&&n.stages&&n.stages.push(b),O.label=6;case 6:return l++,[3,1];case 7:return o.length>0&&o.map(function(e){Object(f.f)(e)}),[4,Object(p.d)(a,s)];case 8:return O.sent(),[4,Object(m.e)(a,n,!1,!0).then(function(e){}).catch(function(e){return e})];case 9:return O.sent(),Object(c.a)(!1),[2]}})})},t.prototype.saveVerify=function(){return v(this,void 0,void 0,function(){var e,t,a,n,i,r,s=this;return y(this,function(c){switch(c.label){case 0:return e=this.state.phaseTemplateDetailList,t=this.state.phaseTemplateDetailList,a=this.props,n=a.buildingName,i=a.instance,(r=this.state.verifyObj).ontology&&""!=r.ontology&&void 0!=r.ontology||(r.ontology=Object(d.q)(8)),r.buildingName=n,[4,Object(o.j)(r).then(function(a){return v(s,void 0,void 0,function(){var a,s,o;return y(this,function(c){switch(c.label){case 0:return r.workflowTemplate&&""!=r.workflowTemplate?(a=t&&t.find(function(e){return e.ontology==r.workflowTemplate}))&&a.ontology?[4,this.createWorkFlow(a,r)]:[3,2]:[3,4];case 1:c.sent(),c.label=2;case 2:return this.props.id?[3,4]:r.workflowTemplate&&""!=r.workflowTemplate?(s=e&&e.find(function(e){return e.ontology==r.workflowTemplate}),o=!s.uses||void 0==s.uses&&NaN==s.uses?"1":(s&&s.uses+1).toString(),[4,Object(u.o)(n,s.ontology,o).then(function(e){}).catch(function(e){return e})]):[3,4];case 3:c.sent(),c.label=4;case 4:return g=new Date,E=new Date,T=new Date,D=new Date,w=new Date,j=new Date,this.setState({verifyObj:Object()},function(){window.location.hash=i+"/"+n+"/VerifyIPMVP"}),[2]}})})}).catch(function(e){console.log(e)})];case 1:return c.sent(),[2]}})})},t.prototype.handleChange=function(e){var t=this.state.verifyObj,a=e.target.value;"percentComplete"==e.target.name&&(a&&a>100?a=100:a&&a<1&&(a=1)),t[e.target.name]=a,this.setState({verifyObj:t})},t.prototype.handleVerifyType=function(e){return v(this,void 0,void 0,function(){var t;return y(this,function(a){switch(a.label){case 0:return(t=this.state.verifyObj).verifyType=e,t.verifyType!=i.c.Measure?[3,2]:[4,this.fetchIPMVPVerify()];case 1:a.sent(),a.label=2;case 2:return this.setState({verifyObj:t}),[2]}})})},t.prototype.savingToDateDateHandler=function(e){var t=this.state.verifyObj;t.savingToDate=e.toString(),j=e,this.setState({verifyObj:t})},t.prototype.startDateHandler=function(e){var t=this.state.verifyObj;t.startDate=e.toString(),g=e,this.setState({verifyObj:t})},t.prototype.finishDateHandler=function(e){var t=this.state.verifyObj;t.finishDate=e.toString(),E=e,this.setState({verifyObj:t})},t.prototype.ecm_startDateHandler=function(e){var t=this.state.verifyObj;t.ECM_StartDate=e.toString(),T=e,this.setState({verifyObj:t})},t.prototype.ecm_finishDateHandler=function(e){var t=this.state.verifyObj;t.ECM_FinishDate=e.toString(),D=e,this.setState({verifyObj:t})},t.prototype.plainLastModifiedHandler=function(e){var t=this.state.verifyObj;t.plainLastModified=e.toString(),w=e,this.setState({verifyObj:t})},t.prototype.handleVerifyObjChange=function(e,t){var a=this.state.verifyObj;a[e]=t,this.setState({verifyObj:a})},t.prototype.handleWorkflowChange=function(e){var t=this.state.verifyObj,a=e.target.name;"checkbox"==e.target.type?t[""+a]=e.target.checked:t[""+a]=e.target.value,this.setState({verifyObj:t})},t.prototype.render=function(){var e=this,t=this.props,a=t.buildingName,r=t.instance,o=this.state,c=o.verifyObj,l=o.WOList,u=o.phaseTemplateDetailList,d=o.verifyIPMVPList,m=c.projectName&&c.projectName.length>0&&c.verifyType&&c.verifyType.length>0&&c.valuationImprovement&&c.valuationImprovement.length>0&&(c.verifyType!=i.c.Measure||c.percentComplete)&&(c.verifyType!=i.c.Measure||c.relatedIPMVP)&&!0;return n.createElement("div",{className:"content"},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"card"},n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"content"},c.verifyType==i.c.Measure&&n.createElement("h4",{className:"title"},"Verify Project Creation: Measure"),c.verifyType==i.c.IPMVP&&n.createElement("h4",{className:"title"},"Verify Project Creation: IPMVP"),n.createElement("hr",null),c.verifyType&&n.createElement("div",{className:"row"},c.verifyType==i.c.Measure&&n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"relatedIPMVP"},"Related IPMVP:")),n.createElement("div",{className:"col-md-8"},n.createElement("select",{className:"form-control "+(c.relatedIPMVP?"":"addFieldValidate"),id:"relatedIPMVP",name:"relatedIPMVP",value:c.relatedIPMVP,onChange:function(t){return e.handleVerifyObjChange("relatedIPMVP",t.target.value)}},n.createElement("option",{value:""},"Select Related IPMVP"),d&&d.length>0&&d.map(function(e){return n.createElement("option",{value:e._id},e.projectName)}))))),n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"projectName"},c.verifyType+" Workflow Template:")),n.createElement("div",{className:"col-md-8"},n.createElement("select",{className:"form-control",id:"workflowTemplate",name:"workflowTemplate",value:c.workflowTemplate,onChange:this.handleWorkflowChange},n.createElement("option",{value:""},"Select Workflow Template"),u&&u.length>0&&u.map(function(e){return e.templateType==c.verifyType&&c.verifyType?n.createElement("option",{value:e&&e.ontology},e&&e.description):""})))),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"projectName"},"Project Name:")),n.createElement("div",{className:"col-md-8"},n.createElement("input",{id:"projectName",name:"projectName",type:"text",className:"form-control "+(c.projectName?"":"addFieldValidate"),value:c.projectName,onChange:function(t){return e.handleChange(t)}})))),n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"valuationImprovement"},"Valuation Improvement:")),n.createElement("div",{className:"col-md-8"},n.createElement("input",{id:"valuationImprovement",name:"valuationImprovement",type:"number",className:"form-control "+(c.valuationImprovement?"":"addFieldValidate"),value:c.valuationImprovement,onChange:function(t){return e.handleChange(t)}}))),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"projectName"},"Last Modified:")),n.createElement("div",{className:"col-md-8"},n.createElement(s.a,{id:"plainLastModified",className:"form-control",selected:w,onChange:function(t){return e.plainLastModifiedHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:n.createElement("input",{type:"text",className:"",name:"notificationExpireDate",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.plainLastModified&&c.plainLastModified.ToEasternDateTime()})})))),n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"projectName"},"Project #:")),n.createElement("div",{className:"col-md-8"},n.createElement("select",{className:"form-control b-long-col-background",id:"relatedWO",name:"projectNumber",value:c.projectNumber,onChange:function(t){return e.handleVerifyObjChange(t.target.name,t.target.value)}},n.createElement("option",{value:""},"Select Project #"),l&&l.length>0&&l.map(function(e,t){return n.createElement("option",{value:e.value,key:t},e.value," ")})))),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"savingToDate"},"Saving To Date:")),n.createElement("div",{className:"col-md-8"},n.createElement(s.a,{id:"savingToDate",className:"form-control",selected:j,onChange:function(t){return e.savingToDateDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:n.createElement("input",{type:"text",className:"",name:"savingToDate",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.savingToDate&&c.savingToDate.ToEasternDateTime()})})))),c.verifyType==i.c.Measure&&n.createElement(n.Fragment,null,n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"startDate"},"AS IS Start Measure Date:")),n.createElement("div",{className:"col-md-8"},n.createElement(s.a,{id:"startDate",className:"form-control",selected:g,onChange:function(t){return e.startDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",name:"startDate",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:n.createElement("input",{type:"text",className:"",name:"notificationExpireDate",placeholder:"AS IS Start Measure Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.startDate&&c.startDate.ToEasternDateTime()})}))),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"finishDate"},"AS IS Finish Measure Date:")),n.createElement("div",{className:"col-md-8"},n.createElement(s.a,{id:"finishDate",name:"finishDate",className:"form-control",selected:E,onChange:function(t){return e.finishDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:n.createElement("input",{type:"text",className:"",name:"finishDate","aria-label":"",placeholder:"AS IS Finish Measure Time","aria-describedby":"button-addon4",value:c&&c.finishDate&&c.finishDate.ToEasternDateTime()})})))),n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"ECM_StartDate"},"ECM Verify Start Measure Date:")),n.createElement("div",{className:"col-md-8"},n.createElement(s.a,{id:"ECM_StartDate",name:"ECM_StartDate",className:"form-control",selected:T,onChange:function(t){return e.ecm_startDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:n.createElement("input",{type:"text",className:"",name:"ECM_StartDate",placeholder:"ECM Start Measure Time","aria-label":"","aria-describedby":"button-addon4",value:c&&c.ECM_StartDate&&c.ECM_StartDate.ToEasternDateTime()})}))),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"ECM_FinishDate"},"ECM Verify Finish Measure Date:")),n.createElement("div",{className:"col-md-8"},n.createElement(s.a,{id:"ECM_FinishDate",name:"ECM_FinishDate",className:"form-control",selected:D,onChange:function(t){return e.ecm_finishDateHandler(t)},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,dateFormat:"MMMM d, yyyy h:mm aa",timeCaption:"time",customInput:n.createElement("input",{type:"text",className:"",name:"ECM_FinishDate","aria-label":"",placeholder:"ECM Finish Measure Time","aria-describedby":"button-addon4",value:c&&c.ECM_FinishDate&&c.ECM_FinishDate.ToEasternDateTime()})})))),n.createElement("div",{className:"row padding-5"},n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"percentComplete"},"Percent(%) Complete:")),n.createElement("div",{className:"col-md-8"},n.createElement("input",{id:"percentComplete",name:"percentComplete",type:"number",placeholder:"1 to 99",style:{width:"100px"},min:1,max:100,className:"form-control "+(c.percentComplete?"":"addFieldValidate"),value:c.percentComplete,onChange:function(t){return e.handleChange(t)}}))),n.createElement("div",{className:"col-md-6"},n.createElement("div",{className:"col-md-4"},n.createElement("label",{htmlFor:"projectName"},"Measurement Point ID:")),n.createElement("div",{className:"col-md-8"},n.createElement("select",{className:"form-control b-long-col-background",id:"measurementPointID",name:"measurementPointID",value:c.measurementPointID,onChange:function(t){return e.handleVerifyObjChange(t.target.name,t.target.value)}},n.createElement("option",{value:""},"Select Measurement Point ID"),l&&l.length>0&&l.map(function(e,t){return n.createElement("option",{value:e.value,key:t},e.value," ")})))))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-9 col-md-offset-2 no-padding"},n.createElement("button",{disabled:!m,className:"btn btn-fill btn-success margin-5",onClick:function(){e.saveVerify()}}," ",n.createElement("i",{className:"fa fa-save"}),"Save"),n.createElement("button",{className:"btn btn-fill btn-danger margin-5",onClick:function(){window.location.hash=r+"/"+a+"/Verify"+c.verifyType}},n.createElement("i",{className:"fa fa-close"})," Cancel")))))))))},t}(n.Component);t.default=S},671:function(e,t,a){"use strict";t.j=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.f)({model:e},n.a.Verify.SaveVerify,i.b.VERIFY).then(function(){Object(r.b)("New Verify saved Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving New Verify.")})];case 1:return[2,t.sent()]}})})},t.g=function(e,t,a){return o(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:return[4,Object(n.e)({buildingName:e,verifyType:t,id:a},n.a.Verify.FetchVerify,i.b.VERIFY,!0)];case 1:return[2,r.sent()]}})})},t.c=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.f)({_id:e},n.a.Verify.DeleteVerify,i.b.VERIFY).then(function(){Object(r.b)(" Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.d=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.f)({_id:e},n.a.Verify.DeleteVerifyDetail,i.b.VERIFY).then(function(){Object(r.b)(" Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.e)({buildingName:e},n.a.Verify.FetchVerifyDetail,i.b.VERIFY)];case 1:return[2,t.sent()]}})})},t.k=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.f)({model:e},n.a.Verify.SaveVerifyDetail,i.b.VERIFY).then(function(){Object(r.b)("Verify details saved Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Verify details.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return o(this,void 0,void 0,function(){var t,a;return c(this,function(o){switch(o.label){case 0:return t=(new Date).ToEasternDateTime(),a=JSON.parse(s.a.getItem("user")),e&&(e._id=e._id&&e._id,e.projectID=e.projectID?e.projectID:"",e.projectNumber=e.projectNumber?e.projectNumber:"",e.implementation=e.implementation?e.implementation:"",e.projectManager=e.projectManager?e.projectManager:"",e.assets=e.assets?e.assets:[],e.descriptionOfECMProject=e.descriptionOfECMProject?e.descriptionOfECMProject:"",e.energy=e.energy?e.energy:"",e.cost=e.cost?e.cost:"",e.greenHouse=e.greenHouse?e.greenHouse:"",e.estimatedImplementationCost=e.estimatedImplementationCost?e.estimatedImplementationCost:"",e.implementationPlanDescription=e.implementationPlanDescription?e.implementationPlanDescription:"",e.keyDates=e.keyDates?e.keyDates:"",e.stakeholders=e.stakeholders?e.stakeholders:[],e.objectives=e.objectives?e.objectives:"",e.updatedBy=e.updatedBy?a.name+", ("+t+")":a.name+", "+t,e.lastUpdated=e.lastUpdated?new Date(e.lastUpdated).ToEasternDateTime():t,e.optionSelected=e.optionSelected?e.optionSelected:"",e.desiredAccuracy=e.desiredAccuracy?e.desiredAccuracy:"",e.overallApproach=e.overallApproach?e.overallApproach:"",e.baselinePeriod=e.baselinePeriod?e.baselinePeriod:"",e.postRetrofitPeriod=e.postRetrofitPeriod?e.postRetrofitPeriod:"",e.descriptionofMeasurement=e.descriptionofMeasurement?e.descriptionofMeasurement:"",e.linkedDocuments=e.linkedDocuments?e.linkedDocuments:"",e.energyAndDemandSavings=e.energyAndDemandSavings?e.energyAndDemandSavings:"",e.calculatingSavingsUncertainty=e.calculatingSavingsUncertainty?e.calculatingSavingsUncertainty:"",e.costSavingsAndGreenhouseGasEmissions=e.costSavingsAndGreenhouseGasEmissions?e.costSavingsAndGreenhouseGasEmissions:"",e.approachForExtrapolatingResults=e.approachForExtrapolatingResults?e.approachForExtrapolatingResults:"",e.OtherInternalExpenses=e.OtherInternalExpenses?e.OtherInternalExpenses:[{description:"",cost:"",notes:""}],e.totalInternalExpenses=e.totalInternalExpenses?e.totalInternalExpenses:"",e.totalInternalExpensesNotes=e.totalInternalExpensesNotes?e.totalInternalExpensesNotes:"",e.externalLabourCosts=e.externalLabourCosts?e.externalLabourCosts:[{description:"",cost:"",notes:""}],e.otherExpenditure=e.otherExpenditure?e.otherExpenditure:[{description:"",Qty:"",rate:"",totalCost:"",notes:""}],e.totalExternalExpenses=e.totalExternalExpenses?e.totalExternalExpenses:"",e.totalExternalExpensesNotes=e.totalExternalExpensesNotes?e.totalExternalExpensesNotes:"",e.totalBudget=e.totalBudget?e.totalBudget:"",e.totalBudgetNotes=e.totalBudgetNotes?e.totalBudgetNotes:"",e.costNotes=e.costNotes?e.costNotes:"",e.estimatedImplementationCostNotes=e.estimatedImplementationCostNotes?e.estimatedImplementationCostNotes:"",e.filesNames=e.filesNames?e.filesNames:[""],e.scopeList=e.scopeList?e.scopeList:[{_id:"",projectID:"",inScope:"",outOfScope:""}],e.deliverableList=e.deliverableList?e.deliverableList:[{_id:"",projectID:"",deliverable:"",dueDate:""}],e.keyConsiderationsList=e.keyConsiderationsList?e.keyConsiderationsList:[],e.successCriteriaList=e.successCriteriaList?e.successCriteriaList:[],e.keyParameterList=e.keyParameterList?e.keyParameterList:[],e.otherParameterList=e.otherParameterList?e.otherParameterList:[],e.PotentialInteractiveList=e.PotentialInteractiveList?e.PotentialInteractiveList:[],e.BaselineAdjustmentsList=e.BaselineAdjustmentsList?e.BaselineAdjustmentsList:[],e.MeasurementEquipmentList=e.MeasurementEquipmentList?e.MeasurementEquipmentList:[],e.BenefitsSummary=e.BenefitsSummary?e.BenefitsSummary:Object(),e.BenefitsDetails=e.BenefitsDetails?e.BenefitsDetails:Object()),[4,Object(n.f)({model:e},n.a.Verify.SaveProjectInformation,i.b.VERIFY).then(function(){Object(r.b)("Project Information Saved Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving.")})];case 1:return[2,o.sent()]}})})},t.f=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.e)({projectID:e},n.a.Verify.FetchProjectInformation,i.b.VERIFY,!0)];case 1:return[2,t.sent()]}})})},t.b=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(n.f)({ontology:e,_id:t},n.a.Verify.DeleteBenefitDetails,i.b.VERIFY).then(function(){Object(r.b)("Benefit Detail Deleted Successfully.")}).catch(function(e){Object(r.a)("Error occured while deleting.")})];case 1:return[2,a.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.d)(n.a.Verify.GetHistorianArchive,"modelID="+e)];case 1:return[2,t.sent()]}})})},t.l=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.f)({model:e},n.a.Verify.SaveVerifyTaskInformation,i.b.VERIFY).then(function(){Object(r.b)("Saved Verify Task Information Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving.")})];case 1:return[2,t.sent()]}})})},t.i=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(n.e)({modelID:e},n.a.Verify.FetchVerifyTaskInformation,i.b.VERIFY)];case 1:return[2,t.sent()]}})})},t.m=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(n.f)({ontology:e,workerEstimatedDuration:t},n.a.Verify.UpdateTaskWorkerEstimateDuration,i.b.VERIFY).then(function(){Object(r.b)("Updated Estimate Duration Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving.")})];case 1:return[2,a.sent()]}})})};var n=a(12),i=a(20),r=a(32),s=a(11),o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(s,o)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var a,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}}},692:function(e,t,a){"use strict";t.f=function(e,t,a){return c(this,void 0,void 0,function(){return l(this,function(s){switch(s.label){case 0:return[4,Object(n.f)({buildingName:e,ontology:t,uses:a},n.a.TASKTEMPLATE.UPDATESTAGETEMPLATEUSES,i.b.TASK).then(function(){Object(r.b)('Stage Template Uses "Updated"  Successfully.')}).catch(function(e){Object(r.a)("Error occured while saving Stage Template Uses.")})];case 1:return[2,s.sent()]}})})},t.e=function(e,t,a,s){return c(this,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return[4,Object(n.f)({buildingName:e,model:t,isEdit:a,saveStages:s},n.a.TASKTEMPLATE.SAVEPHASE,i.b.TASK).then(function(){Object(r.b)("Workflow "+(a?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Workflow.")})];case 1:return[2,o.sent()]}})})},t.b=function(e,t,a){void 0===a&&(a=!0);return c(this,void 0,void 0,function(){return l(this,function(r){switch(r.label){case 0:return[4,Object(n.e)({buildingName:e,ontology:t},n.a.TASKTEMPLATE.GETPHASEDETAILLIST,i.b.TASK,a)];case 1:return[2,r.sent()]}})})},t.c=function(e,t,a){void 0===a&&(a=!0);return c(this,void 0,void 0,function(){return l(this,function(r){switch(r.label){case 0:return[4,Object(n.e)({buildingName:e,ontology:t},n.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,i.b.TASK,a)];case 1:return[2,r.sent()]}})})},t.g=function(e,t,a){return c(this,void 0,void 0,function(){return l(this,function(s){switch(s.label){case 0:return[4,Object(n.f)({taskID:e,status:t},n.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,i.b.TASK).then(function(){a||Object(r.b)("Status Updated Successfully.")}).catch(function(e){Object(r.a)("Error occured while update Status.")})];case 1:return[2,s.sent()]}})})},t.a=function(e,t){return c(this,void 0,void 0,function(){return l(this,function(a){switch(a.label){case 0:return[4,Object(n.e)({buildingName:e,ontology:t},n.a.DEPENDENCY.GETDEPENDENCY,i.b.TASK,!0)];case 1:return[2,a.sent()]}})})},t.d=function(e,t){var a=[];if(!(t.stages&&t.stages.length&&t.stages.length>0))return void Object(r.a)("Error finding Stages");for(var n=o({},t),i=0;i<n.stages.length;i++){for(var c=[],l=n.stages[i],u=0;u<l.subTasks.length;u++){var d=l.subTasks[u];if(!d.estimatedStartTime||void 0==d.estimatedStartTime)return void Object(r.a)("Not all Template Tasks have Estimate Start Time, To Normalise, provide dates first ");c.push(d.estimatedStartTime)}a.push(c)}for(var i=0;i<a.length;i++)for(var c=a[i],u=0;u<c.length;u++)if(0==i&&0==u)t.stages[i].estimatedStartTime=e,t.stages[i].subTasks[u].estimatedStartTime=e;else if(i>0&&0==u){var m=Object(s.g)(new Date(a[i-1][a[i-1].length-1]),new Date(a[i][u])),f=new Date(t.stages[i-1].subTasks[t.stages[i-1].subTasks.length-1].estimatedStartTime);f.setDate(new Date(t.stages[i-1].subTasks[t.stages[i-1].subTasks.length-1].estimatedStartTime).getDate()+m),t.stages[i].subTasks[u].estimatedStartTime=f,t.stages[i].estimatedStartTime=f}else{var m=Object(s.g)(new Date(a[i][u-1]),new Date(a[i][u])),f=new Date(t.stages[i].subTasks[u-1].estimatedStartTime);f.setDate(new Date(t.stages[i].subTasks[u-1].estimatedStartTime).getDate()+m),t.stages[i].subTasks[u].estimatedStartTime=f}var h=Object(s.g)(new Date(t.estimatedEndTime),new Date(t.estimatedStartTime));t.estimatedStartTime=e;var p=new Date(e);return p.setDate(p.getDate()+h),t.estimatedEndTime=p,t};var n=a(12),i=a(20),r=a(32),s=a(23),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var i in t=arguments[a])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(s,o)}c((n=n.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var a,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{a=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}}}});