webpackJsonp([95],{692:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=a(2),l=(a.n(i),a(21)),r=a(78),c=a(34),o=a(7),s=a(9),m=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),d=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(i,l){function r(e){try{o(n.next(e))}catch(e){l(e)}}function c(e){try{o(n.throw(e))}catch(e){l(e)}}function o(e){e.done?i(e.value):new a(function(t){t(e.value)}).then(r,c)}o((n=n.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var a,n,i,l,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],n=0}finally{a=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},g=function(e){function t(t){var a=e.call(this,t)||this;return a.state={buildingObj:Object(),isEdit:!1},n=a,a.setBuilding=a.setBuilding.bind(a),a.saveBuilding=a.saveBuilding.bind(a),a.handleBuildingChange=a.handleBuildingChange.bind(a),a}return m(t,e),t.prototype.saveBuilding=function(){return d(this,void 0,void 0,function(){var e,t,a,n,i;return u(this,function(l){switch(l.label){case 0:return e=this.state,t=e.buildingObj,a=e.isEdit,n=this.props.instance,t.dashboardLink&&t.dashboardLink.indexOf("&kiosk=tv&autofitpanels"),t.dashboardLink,t.wholeBuildingMeterLink&&t.wholeBuildingMeterLink.indexOf("&kiosk=tv&autofitpanels"),t.wholeBuildingMeterLink,i=JSON.parse(s.a.getItem("user")),t&&t.rdfsLabel?(Object(c.a)(!0),[4,Object(r.d)(t,i.contact,a)]):[3,2];case 1:l.sent(),Object(c.a)(!1),l.label=2;case 2:return window.location.hash=n+"/Buildings",[2]}})})},t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.props.instance?[4,this.setBuilding()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.setBuilding=function(){return d(this,void 0,void 0,function(){var e=this;return u(this,function(t){return this.props.buildingName&&this.props.buildingName.length>0&&Object(r.c)(this.props.buildingName).then(function(t){if(t.length>0){var a=t[0],i=e.state.buildingObj;i.rdfsLabel=Object(o.g)(a.rdfsLabel),i.address=Object(o.g)(a.address),i.area=Object(o.g)(a.area),i.buildingFunction=Object(o.g)(a.function),i.buildingName=Object(o.g)(a.building),i.campus=Object(o.g)(a.campus),i.linkbimism=Object(o.g)(a.linkBimism),i.street=Object(o.g)(a.street),i.state=Object(o.g)(a.state),i.city=Object(o.g)(a.city),i.zipcode=Object(o.g)(a.zipcode),i.dashboardLink=Object(o.g)(a.dashboardLink),i.wholeBuildingMeterLink=Object(o.g)(a.wholeBuildingMeterLink),i.MVPSecurity=Object(o.g)(a.MVPSecurity),n.setState({buildingObj:i,isEdit:!0})}}).catch(function(e){return e}),[2]})})},t.prototype.handleBuildingChange=function(e,t){var a=this.state.buildingObj;switch(e){case"buildingName":a.rdfsLabel=t;break;case"address":a.address=t;break;case"area":a.area=t;break;case"buildingFunction":a.buildingFunction=t;break;case"campus":a.campus=t;break;case"linkbimism":a.linkbimism=t;break;case"street":a.street=t;break;case"city":a.city=t;break;case"state":a.state=t;break;case"zipcode":a.zipcode=t;break;case"dashboardLink":a.dashboardLink=t;break;case"wholeBuildingMeterLink":a.wholeBuildingMeterLink=t;break;case"MVPSecurity":a.MVPSecurity=t}this.setState({buildingObj:a})},t.prototype.render=function(){var e=this,t=this.state.buildingObj,a=this.props.instance,n=t&&t.city&&t.state&&t.street&&t.zipcode&&t.rdfsLabel&&t.area&&t.buildingFunction&&!0;return i.createElement(l.AppContext.Consumer,null,function(l){return i.createElement("div",{className:"content"},i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid padding-10"},i.createElement("h4",{className:"title"},"Building Information"),i.createElement("hr",null),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"buildingname"},"Building name:"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"buildingname",className:"form-control",value:t.rdfsLabel,onChange:function(t){e.handleBuildingChange("buildingName",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"area"},"Area:"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"number",id:"area",className:"form-control",value:t.area,onChange:function(t){e.handleBuildingChange("area",t.target.value)}}))),i.createElement("div",{className:"col-md-2"},"Square Feet")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"buildingFunction"},"Function:"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("select",{className:"form-control",id:"buildingFunction",value:t.buildingFunction,onChange:function(t){e.handleBuildingChange("buildingFunction",t.target.value)}},i.createElement("option",{value:""},"Select Function"),i.createElement("option",{value:"Residential"},"Residential"),i.createElement("option",{value:"Commercial"},"Commercial"),i.createElement("option",{value:"Other"},"Other"))))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"streetAddress"},"Address"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"streetAddress",name:"streetAddress",className:"form-control",placeholder:"Street",value:t.street,onChange:function(t){e.handleBuildingChange("street",t.target.value)}}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"city",name:"city",className:"form-control",placeholder:"City",value:t.city,onChange:function(t){e.handleBuildingChange("city",t.target.value)}}))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"state",name:"state",className:"form-control",placeholder:"State",value:t.state,onChange:function(t){e.handleBuildingChange("state",t.target.value)}}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"zipcode",name:"zipcode",className:"form-control",placeholder:"ZipCode",value:t.zipcode,onChange:function(t){e.handleBuildingChange("zipcode",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Virtual BIM Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"linkbimism",value:t.linkbimism,onChange:function(t){e.handleBuildingChange("linkbimism",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Dashboard Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"dashboardLink",value:t.dashboardLink,onChange:function(t){e.handleBuildingChange("dashboardLink",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"MVPSecurity"},"MVP Security Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"MVPSecurity",name:"MVPSecurity",value:t.MVPSecurity,onChange:function(t){e.handleBuildingChange("MVPSecurity",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Whole Building Meter Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"wholeBuildingMeterLink",value:t.wholeBuildingMeterLink,onChange:function(t){e.handleBuildingChange("wholeBuildingMeterLink",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("button",{disabled:!n,className:"btn btn-primary btn-fill",onClick:function(){l.onChangeBuilding(Object()),e.saveBuilding()}},i.createElement("i",{className:"fa fa-save"})," Save"),i.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){return window.location.hash=a+"/Buildings"}},i.createElement("i",{className:"fa fa-window-close"})," Cancel"))))))})},t}(i.Component);t.default=g}});