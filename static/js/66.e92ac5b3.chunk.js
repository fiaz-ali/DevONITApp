webpackJsonp([66],{1423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(2),r=(n.n(l),n(664)),s=n(657),o=n(11),i=n(23),c=n(692),u=n(117),m=n(655),d=n(761),h=n(1336),p=n(667),b=n(668),y=n(10),f=n(123),g=n(676),v=n(22),O=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),S=this&&this.__assign||function(){return(S=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},C=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,r){function s(e){try{i(a.next(e))}catch(e){r(e)}}function o(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,o)}i((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,l,r,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(r){return function(o){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=2&r[0]?a.return:r[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,r[1])).done)return l;switch(a=0,l&&(r=[2&r[0],l.value]),r[0]){case 0:case 1:l=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,a=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(l=(l=s.trys).length>0&&l[l.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!l||r[1]>l[0]&&r[1]<l[3])){s.label=r[1];break}if(6===r[0]&&s.label<l[1]){s.label=l[1],l=r;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(r);break}l[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],a=0}finally{n=l=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}},_=0,N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),CeilingSensorBoard_MonconModel:Object(),Old_RelayBoardInfo:Object(),RelayBoardInfo:Object(),I1RelayBoardInfo:Object(),computingDevice:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,spaces:[],relayControlStatusDesc:"",scheduleSelected:!1,relayisOn:!1,relayisOnNo:0,relayCensorStatus:Object(),relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,I1RelayStatus:!1,relayControlStatus:"Manual",relayControlType:"",isOptimizeControl:!1,isOptimizeControlStatus:"",RelayBoardControl:Object(),relayOptimizeSettings:"",I4RelayBoardInfo:Object(),relayNoOptimize:0,devices:[],callInterval:!0,openRelayControlDialog:!1,showLogs:!1,RelayStatusMessage:["","","",""],bootDevice:!1,isNotSolutionDevice:!0},n,n.fetchDevices=n.fetchDevices.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n._fetchRelayCensorStatus=n._fetchRelayCensorStatus.bind(n),n._fetchV4RelayBoardInfo=n._fetchV4RelayBoardInfo.bind(n),n._fetchI1RelayBoardInfo=n._fetchI1RelayBoardInfo.bind(n),n._fetchI4RelayBoardInfo=n._fetchI4RelayBoardInfo.bind(n),n.fetchRelayControlSettings=n.fetchRelayControlSettings.bind(n),n.saveRelayStatusChanges=n.saveRelayStatusChanges.bind(n),n.setOptimizeSettings=n.setOptimizeSettings.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.handleRelayOnOff=n.handleRelayOnOff.bind(n),n.handleRelayControlStatus=n.handleRelayControlStatus.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n.applyRule=n.applyRule.bind(n),n.onCloseRelayControlDialog=n.onCloseRelayControlDialog.bind(n),n.sendControlTypeAPI=n.sendControlTypeAPI.bind(n),n}return O(t,e),t.prototype.componentDidMount=function(){return C(this,void 0,void 0,function(){var e;return E(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,5];case 1:return t.sent(),[4,this.fetchDevices()];case 2:return t.sent(),[4,this.resetChanges(!0)];case 3:return t.sent(),e=JSON.parse(y.a.getItem("user")),[4,Object(f.b)(e.contact)];case 4:t.sent(),t.label=5;case 5:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a),a=setInterval(function(){var t=e.state,n=t.callInterval,a=t.modelChanged;_++,!a&&n&&_>=2&&(e.resetChanges(!1),Object(u.a)(!1),_=0)},1e3)},t.prototype.componentWillUnmount=function(){return C(this,void 0,void 0,function(){return E(this,function(e){return clearInterval(a),[2]})})},t.prototype.fetchDevices=function(){return C(this,void 0,void 0,function(){var e,t;return E(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(r.u)(e)]:[3,2];case 1:t=n.sent(),this.setState({devices:t}),n.label=2;case 2:return[2]}})})},t.prototype._fetchData=function(){return C(this,void 0,void 0,function(){var e,t,n,a,l,r,i,c,d,h,p,b,y,f,v,O,S,_=this;return E(this,function(N){switch(N.label){case 0:return e=this.state,t=e.scheduleSelected,n=e.relayControlType,a=this.props,l=a.RelayDeviceName,r=a.buildingName,l?(Object(u.a)(!0),[4,Object(m.h)(this.props.buildingName)]):[3,6];case 1:return i=N.sent(),c=i&&i.length>0&&i.map(function(e){return{value:Object(o.g)(e.ontology),label:Object(o.g)(e.rdfsLabel)}}),d=Object(),h=Object(),[4,Object(s.v)(l,r)];case 2:return d=N.sent(),p=!!!d.referenceSolutionOntology,t=d.isSchedule,n=d.monitoringControlDeviceType,d.computingDevice?[4,Object(g.f)(d.computingDevice)]:[3,5];case 3:return b=N.sent(),[4,Object(g.d)(b)];case 4:(y=N.sent())&&y.length>0&&(h=y[0]),N.label=5;case 5:localStorage.getItem(d.deviceID)&&localStorage.getItem(d.deviceID).length>0&&(f=localStorage.getItem(d.deviceID))&&"undefined"!=f&&(n&&-1!=n.indexOf("OneRelay")?(v=JSON.parse(localStorage.getItem(d.deviceID)),this.setState({I1RelayBoardInfo:v,modelChanged:!1,currentChange:""})):-1!=n.toLowerCase().indexOf("i4")?(O=JSON.parse(localStorage.getItem(d.deviceID)),this.setState({I4RelayBoardInfo:O,modelChanged:!1,currentChange:""})):(S=JSON.parse(localStorage.getItem(d.deviceID)),this.setState({RelayBoardInfo:S,modelChanged:!1,currentChange:""}))),this.setState({Moncon:d,EquipmentList:c,scheduleSelected:t,computingDevice:h,relayControlType:n,isNotSolutionDevice:p},function(){return C(_,void 0,void 0,function(){return E(this,function(e){return this._fetchRelayCensorStatus(!0),-1!=n.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(!0):-1!=n.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(!0):this._fetchV4RelayBoardInfo(!0),this._fetchCeilingSensorBoardInfo(!0),this.fetchRelayControlSettings(),[2]})})}),Object(u.a)(!1),N.label=6;case 6:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return C(this,void 0,void 0,function(){var t,n,a,l,o,c,m;return E(this,function(d){switch(d.label){case 0:e&&Object(u.a)(!0),t=this.state.Moncon,n=this.props.buildingName,a="",l=0,d.label=1;case 1:return l<t.sensors.length?(o=t.sensors[l],a=o.value,c=Object(),[4,Object(s.v)(a,n)]):[3,5];case 2:return"CeilingSensor"!=(c=d.sent()).monitoringControlDeviceType?[3,4]:[4,Object(r.n)(c).then(function(e){var t=e[0];return!t||t&&t.error?(Object(i.a)("Error occurred while fetching ceiling sensor board info."),Object()):t}).catch(function(e){return Object()})];case 3:return m=d.sent(),this.setState({CeilingSensorBoardInfo:m,CeilingSensorBoard_MonconModel:c,currentChange:""}),[2];case 4:return l++,[3,1];case 5:return e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchI1RelayBoardInfo=function(e){return C(this,void 0,void 0,function(){var t,n,a;return E(this,function(l){switch(l.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state.I1RelayStatus,[4,Object(r.f)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(a=l.sent())&&a.i1relay_state&&a.i1relay_state[0]&&(n="1"==a.i1relay_state[0]),a&&a.i1relay_state&&0==a.i1relay_state[0]&&(n=!1),this.setState({I1RelayBoardInfo:a,currentChange:"",I1RelayStatus:n}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchV4RelayBoardInfo=function(e){return C(this,void 0,void 0,function(){var t,n,a,l,s,o,c,m,d;return E(this,function(h){switch(h.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,l=n.relay2Status,s=n.relay3Status,o=n.relay4Status,c=Object(),[4,Object(r.g)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(c=h.sent())&&c.v4relay_state&&(m=Object(v.b)(parseInt(c.v4relay_state),!0),d=m.split(","),a="1"==d[0],l="1"==d[1],s="1"==d[2],o="1"==d[3]),this.setState({RelayBoardInfo:c,Old_RelayBoardInfo:S({},c),currentChange:"",relay1Status:a,relay2Status:l,relay3Status:s,relay4Status:o}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchI4RelayBoardInfo=function(e){return C(this,void 0,void 0,function(){var t,n,a,l,s,o,c;return E(this,function(m){switch(m.label){case 0:return e&&Object(u.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,l=n.relay2Status,s=n.relay3Status,o=n.relay4Status,c=Object(),[4,Object(r.q)(t).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e&&localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return c=m.sent(),a=120==c.voltage_volts_Ch1,l=120==c.voltage_volts_Ch2,s=120==c.voltage_volts_Ch3,o=120==c.voltage_volts_Ch4,this.setState({currentChange:"",relay1Status:a,relay2Status:l,relay3Status:s,relay4Status:o,I4RelayBoardInfo:c}),e&&Object(u.a)(!1),[2]}})})},t.prototype._fetchRelayCensorStatus=function(e){return C(this,void 0,void 0,function(){var t,n,a,l=this;return E(this,function(s){switch(s.label){case 0:return e&&Object(u.a)(!0),t=this.props,n=t.buildingName,a=t.RelayDeviceName,[4,Object(r.w)(n,a).then(function(e){var t=e[0];if(!t)return l.setState({relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,relayOptimizeSettings:"Normal,Normal,Normal,Normal,"}),Object();var n=Object();n.relayStatus=[],n.controlStatus=Object(o.g)(t.controlStatus),n.deviceType=Object(o.g)(t.deviceType);var a=Object(o.g)(t.statusNotes).split(",");n.statusNotes=Object(o.g)(t.statusNotes).split(",");var r=l.state,s=r.relay1Status,i=r.relay2Status,c=r.relay3Status,u=r.relay4Status,m=r.relayControlStatus,d=r.I1RelayStatus,h=r.relayOptimizeSettings,p=Object(o.g)(t.relayStatus).split(",");-1!=n.deviceType.indexOf("OneRelay")?(p&&(n.relayStatus=p),m=Object(o.g)(t.controlStatus),l.setState({I1RelayStatus:d,relayControlStatus:m})):(p&&(n.relayStatus=p),m=Object(o.g)(t.controlStatus),l.setState({relay1Status:s,relay2Status:i,relay3Status:c,relay4Status:u,relayControlStatus:m}));var b="Optimize"==n.controlStatus||"Normal"==n.controlStatus;(h=Object(o.g)(t.relayOptimizeSettings))&&",,,,"!=h&&""!=h||(h=-1==n.deviceType.indexOf("OneRelay")?"Normal,Normal,Normal,Normal,":"Normal"),l.setState({isOptimizeControl:b,isOptimizeControlStatus:b?n.controlStatus:"",relayOptimizeSettings:h,RelayStatusMessage:a,relayCensorStatus:n})}).catch(function(e){return Object()})];case 1:return s.sent(),e&&Object(u.a)(!1),[2]}})})},t.prototype.fetchRelayControlSettings=function(){return C(this,void 0,void 0,function(){var e,t,n,a,l,s;return E(this,function(i){switch(i.label){case 0:return e=this.props.RelayDeviceName,t=this.state,n=t.relayControlType,a=t.RelayBoardControl,[4,Object(r.x)(e)];case 1:return(l=i.sent())[0]?(s=l[0],n&&-1==n.indexOf("OneRelay")?a.relays="1,2,3,4":a.relays="OneRelay",a.controlChoice=Object(o.g)(s.controlChoice),a.relayNames=Object(o.g)(s.relayNames),a.lightingTypes=Object(o.g)(s.lightingTypes),a.sensors=Object(o.g)(s.sensors),a.activeRelayStatus=Object(o.g)(s.activeRelayStatus)):n&&-1==n.indexOf("OneRelay")?(a.relays="1,2,3,4",a.controlChoice="0,0,0,0",a.relayNames="Relay 1,Relay 2,Relay 3,Relay 4",a.lightingTypes="0,0,0,0",a.sensors="0,0,0,0",a.activeRelayStatus="active,active,active,active"):(a.relays="OneRelay",a.controlChoice="0",a.relayNames="Relay",a.sensors="0",a.lightingTypes="0",a.activeRelayStatus="active"),this.setState({RelayBoardControl:a}),[2]}})})},t.prototype.handleRelayOnOff=function(e,t,n){var a=this.state,l=a.relay1Status,r=a.relay2Status,s=a.relay3Status,o=a.relay4Status;if(a.isNotSolutionDevice){1==t&&(l=e),2==t&&(r=e),3==t&&(s=e),4==t&&(o=e);for(var i=0;i<=3;i++)t-1===i&&(this.state.RelayStatusMessage[i]="Manually");this.setState({modelChanged:n,relayisOnNo:t,relayisOn:e,relay1Status:l,relay2Status:r,relay3Status:s,relay4Status:o})}},t.prototype.handleI1RelayOnOff=function(e){this.state.isNotSolutionDevice&&this.setState({I1RelayStatus:e,modelChanged:!0})},t.prototype.handleRelayBoot=function(){this.setState({bootDevice:!0,modelChanged:!0})},t.prototype.handleChange=function(e,t){var n=this.state.RelayBoardInfo;n[e]=t,this.setState({RelayBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.handleRelayOptimizeSettings=function(e,t,n){return void 0===n&&(n=!0),C(this,void 0,void 0,function(){var a,l,r,s,o,i;return E(this,function(c){return a=this.state,l=a.relayOptimizeSettings,r=a.isOptimizeControl,s=a.modelChanged,o=a.relayNoOptimize,a.isNotSolutionDevice?((i=l.split(","))[t]=e,r=!0,s=n,l=i.join(","),o=t+1,this.setState({isOptimizeControlStatus:e,relayOptimizeSettings:l,isOptimizeControl:r,modelChanged:s,relayNoOptimize:o}),[2]):[2]})})},t.prototype.handleRelayControlStatus=function(e){return C(this,void 0,void 0,function(){var t,n,a;return E(this,function(l){return this.state.isNotSolutionDevice?(this.state.relayCensorStatus.statusNotes=this.state.RelayStatusMessage,"Remote"==e&&"Local"!=this.state.relayControlStatus?[2]:("Remote"==e&&"Local"==this.state.relayControlStatus&&(e="Manual"),this.setState({relayControlStatus:e,isOptimizeControl:!1}),"Local"!=e&&"Schedule"!=e&&"Manual"!=e||(t=this.state,n=t.isOptimizeControl,a=t.modelChanged,n=!0,a=!0,this.setState({isOptimizeControlStatus:e,isOptimizeControl:n,modelChanged:a})),[2])):[2]})})},t.prototype.cancelSend=function(){var e=this.state,t=e.relay1Status,n=e.relay2Status,a=e.relay3Status,l=e.relay4Status,r=e.I1RelayStatus,s=e.relayCensorStatus,o=e.relayControlType,i=e.relayOptimizeSettings,c=e.bootDevice,u=e.isOptimizeControl,m=e.relayNoOptimize;if(c)this.setState({bootDevice:!1,modelChanged:!1,isOptimizeControl:!1});else if(o&&-1!=o.indexOf("OneRelay"))r=!r,this.setState({I1RelayStatus:r,modelChanged:!1,isOptimizeControl:!1});else{if(s&&s.relayStatus&&s.relayStatus.length>0&&(t="1"==s.relayStatus[0],n="1"==s.relayStatus[1],a="1"==s.relayStatus[2],l="1"==s.relayStatus[3],this.setState({relay1Status:t,relay2Status:n,relay3Status:a,relay4Status:l})),u){var d=i.split(",");d[m]="Normal"==d[m]?"Optimize":"Normal",i=d.join(",")}this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",relayOptimizeSettings:i,relayNoOptimize:0})}},t.prototype.onCloseRelayControlDialog=function(e){return C(this,void 0,void 0,function(){return E(this,function(t){return this.setState({openRelayControlDialog:e}),[2]})})},t.prototype.setOptimizeSettings=function(e,t){return C(this,void 0,void 0,function(){var n,a,l,s=this;return E(this,function(c){switch(c.label){case 0:return this.state.isNotSolutionDevice?(n=this.props,a=n.buildingName,l=n.RelayDeviceName,[4,Object(r.b)(a,l).then(function(n){return C(s,void 0,void 0,function(){var s,c,u,m,d,h,p,b,y,f,g,v,O,S,_,N,R,I=this;return E(this,function(j){switch(j.label){case 0:return s=Object(),n[0]?(s.device=Object(o.g)(n[0].device),s.A1=Object(o.g)(n[0].A1)?Object(o.g)(n[0].A1):"0",s.A2=Object(o.g)(n[0].A2)?Object(o.g)(n[0].A2):"0",s.B1=Object(o.g)(n[0].B1)?Object(o.g)(n[0].B1):"1",s.B2=Object(o.g)(n[0].B2)?Object(o.g)(n[0].B2):"1",s.C1=Object(o.g)(n[0].C1)?Object(o.g)(n[0].C1):"0",s.C2=Object(o.g)(n[0].C2)?Object(o.g)(n[0].C2):"0",s.D1=Object(o.g)(n[0].D1)?Object(o.g)(n[0].D1):"1",s.D2=Object(o.g)(n[0].D2)?Object(o.g)(n[0].D2):"1",s.E1=Object(o.g)(n[0].E1)?Object(o.g)(n[0].E1):"1",s.E2=Object(o.g)(n[0].E2)?Object(o.g)(n[0].E2):"1",s.F1=Object(o.g)(n[0].F1)?Object(o.g)(n[0].F1):"0",s.F2=Object(o.g)(n[0].F2)?Object(o.g)(n[0].F2):"0",s.G1=Object(o.g)(n[0].G1)?Object(o.g)(n[0].G1):"1",s.G2=Object(o.g)(n[0].G2)?Object(o.g)(n[0].G2):"1"):(s.device=l,s.A1="0",s.A2="0",s.B1="1",s.B2="1",s.C1="0",s.C2="0",s.D1="1",s.D2="1",s.E1="1",s.E2="1",s.F1="0",s.F2="0",s.G1="1",s.G2="1"),c=Object(),u=Object(),m=this.state,d=m.Moncon,h=m.relayNoOptimize,p=m.relayControlType,b=m.relayOptimizeSettings,y=m.RelayBoardControl,f=m.devices,g=m.relayControlStatus,v=e?e.split(","):b.split(","),c.isOptimize="Optimize"==v[(t||h)-1],c.isOptimize?(c.varA=parseInt(s.A2),c.varB=parseInt(s.B2),c.varC=parseInt(s.C2),c.varD=parseInt(s.D2),c.varE=parseInt(s.E2),c.varF=parseInt(s.F2),c.varG=parseInt(s.G2)):(c.varA=parseInt(s.A1),c.varB=parseInt(s.B1),c.varC=parseInt(s.C1),c.varD=parseInt(s.D1),c.varE=parseInt(s.E1),c.varF=parseInt(s.F1),c.varG=parseInt(s.G1)),c.deviceID=d.deviceName,c.relaynum=""+h,c.rlb_add=d.boardAddress,d.wirelessConfig.ipAddress&&(c.controllerPI=d.wirelessConfig.ipAddress,u.controllerPI=d.wirelessConfig.ipAddress),d.wirelessConfig.controllerIPAddress&&(c.controllerPI=d.wirelessConfig.controllerIPAddress,u.controllerPI=d.wirelessConfig.controllerIPAddress),-1!=p.toLowerCase().indexOf("v1")?c.rlb_ver="v1":-1!=p.toLowerCase().indexOf("v4")?c.rlb_ver="v4":-1!=p.toLowerCase().indexOf("i1")?c.rlb_ver="i1":-1!=p.toLowerCase().indexOf("i4")&&(c.rlb_ver="i4"),O=[],S=[],_=[],N=[],O=y.controlChoice&&y.controlChoice.split(","),S=y.lightingTypes&&y.lightingTypes.split(","),_=y.sensors&&y.sensors.split(","),N=y.relayNames&&y.relayNames.split(","),u.sched=!1,u.controltype="Manual"!=g?O[h-1]:"10",u.lighting_type=S[h-1],u.relaynum=""+h,u.rlb_ver=c.rlb_ver,u.rlb_add=d.boardAddress,u.deviceID=d.deviceName,_&&_[h-1]?(R=f.find(function(e){return Object(o.g)(e.moncondevice)==_[h-1]}),u.csb_add=R?Object(o.g)(R.boardAddress):"9999"):u.csb_add="9999",u.lighting_type&&"0"!=u.lighting_type&&u.controltype&&"0"!=u.controltype?[4,Object(r.N)(u,c,a)]:(Object(i.a)("Save the control settings for "+N[h-1]+" before posting settings"),[2]);case 1:return j.sent(),"A"!=S[h-1]?[3,11]:"0"!=_[h-1]?[3,11]:c.isOptimize?[4,this.handleRelayOnOff(!1,h,!1)]:[3,11];case 2:return j.sent(),[4,this.saveRelayStatusChanges(g,!1)];case 3:return j.sent(),p&&-1!=p.indexOf("OneRelay")?p&&-1!=p.indexOf("V1")?[3,6]:[3,4]:[3,7];case 4:return[4,Object(r.J)(d,!1,a).then(function(e){return C(I,void 0,void 0,function(){return E(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 5:j.sent(),j.label=6;case 6:return[3,11];case 7:return p&&-1!=p.indexOf("V4")?[4,Object(r.Q)(d,!1,!1,h,a).then(function(e){return C(I,void 0,void 0,function(){return E(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})]:[3,9];case 8:return j.sent(),[3,11];case 9:return[4,Object(r.K)(d,!1,!1,h,a).then(function(e){return C(I,void 0,void 0,function(){return E(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 10:j.sent(),j.label=11;case 11:return[2]}})})})]):[2];case 1:return c.sent(),[2]}})})},t.prototype.bootDevice=function(){return C(this,void 0,void 0,function(){var e,t,n,a=this;return E(this,function(l){switch(l.label){case 0:return e=this.state.computingDevice,t=this.props.buildingName,!(n=JSON.parse(y.a.getItem("user")))||!n.role||"1"!=n.role&&"2"!=n.role?[3,2]:[4,Object(r.I)(e,t,"lightcon",!0).then(function(e){return C(a,void 0,void 0,function(){return E(this,function(t){return 0==e.responseCode?Object(i.b)(e.responseMessage):Object(i.a)(e.responseMessage),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 1:l.sent(),Object(u.a)(!1),l.label=2;case 2:return[2]}})})},t.prototype.sendControlTypeAPI=function(){return C(this,void 0,void 0,function(){var e,t,n,a,l,r,s,o,i;return E(this,function(c){switch(c.label){case 0:if(e=this.state,t=e.relayControlType,n=e.relayOptimizeSettings,a=e.RelayBoardControl,!e.isNotSolutionDevice)return[2];Object(u.a)(!0),l=t&&-1==t.indexOf("OneRelay")?4:1,r=n.split(","),s=a.activeRelayStatus&&a.activeRelayStatus.split(","),o=0,c.label=1;case 1:return o<l?"active"!=s[o]?[3,4]:[4,this.handleRelayOptimizeSettings(r[o],o,!1)]:[3,5];case 2:return c.sent(),n=r.join(","),i=o+1,[4,this.setOptimizeSettings(n,i)];case 3:c.sent(),c.label=4;case 4:return o++,[3,1];case 5:return Object(u.a)(!1),[2]}})})},t.prototype.resetChanges=function(e){return C(this,void 0,void 0,function(){var t=this;return E(this,function(n){return this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",callInterval:!1},function(){return C(t,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:return t=this.state.relayControlType,[4,this._fetchRelayCensorStatus(e)];case 1:return n.sent(),-1!=t.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(e):-1!=t.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(e):this._fetchV4RelayBoardInfo(e),[4,this._fetchCeilingSensorBoardInfo(e)];case 2:return n.sent(),this.setState({callInterval:!0}),[2]}})})}),[2]})})},t.prototype.handleScheduleSelection=function(e){return C(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,Object(r._1)(this.props.RelayDeviceName,e)];case 1:return t.sent(),e?Object(i.b)("Successfully Selected Schedule"):Object(i.b)("Successfully unSelected Schedule"),[2]}})})},t.prototype.saveRelayStatusChanges=function(e,t){return C(this,void 0,void 0,function(){var n,a,l,s,o,c,m,d,h,p,b,y,f;return E(this,function(g){switch(g.label){case 0:return t&&Object(u.a)(!0),n=this.props,a=n.buildingName,l=n.RelayDeviceName,s=this.state,o=s.relay1Status,c=s.relay2Status,m=s.relay3Status,d=s.relay4Status,h=s.relayCensorStatus,p=s.relayControlType,b=s.I1RelayStatus,y=s.relayOptimizeSettings,s.isNotSolutionDevice?(f=[],p&&-1!=p.indexOf("OneRelay")?f.push(b?"1":"0"):(f.push(o?"1":"0"),f.push(c?"1":"0"),f.push(m?"1":"0"),f.push(d?"1":"0")),h.relayStatus=f,h.controlStatus=e,h.deviceType=p,h.device=l,h.relayOptimizeSettings=y.split(","),[4,Object(r.X)(a,h).then(function(e){}).catch(function(e){Object(i.a)("Some error orccured. ")})]):[2];case 1:return g.sent(),t&&Object(u.a)(!1),[2]}})})},t.prototype.applyChanges=function(){return C(this,void 0,void 0,function(){var e=this;return E(this,function(t){return this.state.isNotSolutionDevice?(Object(u.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return C(e,void 0,void 0,function(){var e,t,n,l,s,o,c,m,d,h,p,b,y,f,g,v,O,S,N=this;return E(this,function(R){switch(R.label){case 0:return _=0,a&&clearInterval(a),Object(u.a)(!0),e=this.state,t=e.Moncon,n=e.relayControlStatus,l=e.relayControlType,s=e.isOptimizeControlStatus,o=e.relayOptimizeSettings,c=e.RelayBoardControl,m=e.relayCensorStatus,d=e.isOptimizeControl,h=e.I1RelayStatus,p=e.relayisOn,b=e.relayisOnNo,y=e.bootDevice,m.statusNotes=this.state.RelayStatusMessage,[4,this.saveRelayStatusChanges(n,!1)];case 1:return R.sent(),y?[4,this.bootDevice()]:[3,3];case 2:return R.sent(),this.setState({bootDevice:!1}),this.setIntervalStart(),Object(u.a)(!1),[2];case 3:if("Schedule"==s)return this.handleScheduleSelection(!0),this.setIntervalStart(),Object(u.a)(!1),[2];if(this.handleScheduleSelection(!1),"Local"!=s&&"Manual"!=s)return[3,9];f=l&&-1==l.indexOf("OneRelay")?4:1,g=o.split(","),v=c.activeRelayStatus&&c.activeRelayStatus.split(","),O=0,R.label=4;case 4:return O<f?"active"!=v[O]?[3,7]:[4,this.handleRelayOptimizeSettings(g[O],O,!1)]:[3,8];case 5:return R.sent(),o=g.join(","),S=O+1,[4,this.setOptimizeSettings(o,S)];case 6:R.sent(),R.label=7;case 7:return O++,[3,4];case 8:return"Local"==n&&"Local"==s?(this.setIntervalStart(),Object(u.a)(!1),[2]):[3,20];case 9:return"Schedule"!=n&&"Schedule"!=s&&this.handleScheduleSelection(!1),d?[3,18]:l&&-1!=l.indexOf("OneRelay")?l&&-1!=l.indexOf("V1")?[3,12]:[3,10]:[3,13];case 10:return[4,Object(r.J)(t,h,this.props.buildingName).then(function(e){return C(N,void 0,void 0,function(){return E(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 11:R.sent(),R.label=12;case 12:return[3,17];case 13:return l&&-1!=l.indexOf("V4")?[4,Object(r.Q)(t,!1,p,b,this.props.buildingName).then(function(e){return C(N,void 0,void 0,function(){return E(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})]:[3,15];case 14:return R.sent(),[3,17];case 15:return[4,Object(r.K)(t,!1,p,b,this.props.buildingName).then(function(e){return C(N,void 0,void 0,function(){return E(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 16:R.sent(),R.label=17;case 17:return[3,20];case 18:return[4,this.setOptimizeSettings()];case 19:R.sent(),R.label=20;case 20:return this.setState({isOptimizeControl:!1}),this.setIntervalStart(),Object(u.a)(!1),[2]}})})}),[2]):[2]})})},t.prototype.applyRule=function(e,t,n){return e?t?e<n?0:e:e>n?0:e:0},t.prototype.render=function(){var e,t,n,a,r=this,s=this.state,o=s.CeilingSensorBoardInfo,i=s.CeilingSensorBoard_MonconModel,u=s.Moncon,m=s.modelChanged,f=s.currentChange,g=s.detailsExpanded,v=s.RelayBoardInfo,O=s.relayControlStatus,S=s.relayisOn,C=s.relayisOnNo,E=s.relay1Status,_=s.relay2Status,N=s.relay3Status,R=s.relay4Status,I=s.relayControlType,j=s.I1RelayBoardInfo,w=s.I1RelayStatus,D=s.isOptimizeControl,z=s.isOptimizeControlStatus,B=s.RelayBoardControl,x=s.relayOptimizeSettings,A=s.I4RelayBoardInfo,L=s.openRelayControlDialog,F=s.RelayStatusMessage,M=s.relayCensorStatus,T=s.showLogs,W=s.bootDevice,k=s.isNotSolutionDevice,P=this.props,q=P.instance,H=P.buildingName,G=P.RelayDeviceName,V=P.type,J=P.hideTabs,K="Local"!=O;e=B.relayNames&&B.relayNames.split(","),t=B.lightingTypes&&B.lightingTypes.split(","),n=x&&x.split(","),a=B.activeRelayStatus&&B.activeRelayStatus.split(",");var Q="not refreshed";if(I&&(-1!=I.toLowerCase().indexOf("i1")?j&&j.timestamp&&(Q=new Date(j.timestamp).toLocaleString()):-1!=I.toLowerCase().indexOf("i4")?A&&A.timestamp&&(Q=new Date(A.timestamp).toLocaleString()):-1!=I.toLowerCase().indexOf("v4")&&v&&v.timestamp&&(Q=new Date(v.timestamp).toLocaleString())),T)return l.createElement(p.a,{instance:q,buildingName:H,fromEntityList:!0,module:b.a.Assets,ontology:u.monitoringControl,entityName:"Device",onLogClose:function(){return r.setState({showLogs:!1})}});var U=JSON.parse(y.a.getItem("user"));return l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},!J&&l.createElement(c.a,{InsightName:G,ControlName:"RelayControl",buildingName:H,instance:q,type:V}),U&&"1"==U.role&&l.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){r.setState({showLogs:!0})}}," ",l.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,u.rdfsLabel)," "),l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",u&&u.relatedEquipment&&u.relatedEquipment.map(function(e,t){return l.createElement("span",{key:t},t+1==u.relatedEquipment.length?"":",")}))))),l.createElement("div",{className:"col-md-6"},k&&l.createElement(l.Fragment,null,l.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Control Settings",onClick:function(e){r.setState({openRelayControlDialog:!0},function(){document.getElementById("btnDialogRelayControl").click()})}}," ",l.createElement("i",{className:"fa fa-sliders"})," Control Settings"),l.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Send Control Settings To Board",onClick:function(e){r.sendControlTypeAPI()}}," ",l.createElement("i",{className:"fa fa-cog"})," Send CTs To Board")),U&&U.role&&("1"==U.role||"2"==U.role)&&l.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Boot PI Board",onClick:function(e){r.handleRelayBoot()}}," ",l.createElement("i",{className:"fa fa-refresh"})," Boot PI Board")))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},I&&-1!=I.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-8 InsightRow"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("h4",{className:"padding-5 margin-5"},"Power Watts: ",l.createElement("b",null,j&&j.active_power_Watts&&parseFloat(j.active_power_Watts)?parseFloat(j.active_power_Watts):0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Amperes: ",l.createElement("b",null,j&&j.current_Amperes?j.current_Amperes:0)),l.createElement("h4",{className:"padding-5 margin-5"},"Frequency Hz: ",l.createElement("b",null,j&&j.frequency_Hz?this.applyRule(j.frequency_Hz,!0,55):0))),l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("h4",{className:"padding-5 margin-5"},"Total Energy Watt Hours: ",l.createElement("b",null,j&&j.import_active_energy_Wh&&parseFloat(j.import_active_energy_Wh)?parseFloat(j.import_active_energy_Wh).toFixed(2):0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Power Factor: ",l.createElement("b",null,j&&j.power_factor?j.power_factor:0)),l.createElement("h4",{className:"padding-5 margin-5"},"Voltage volts: ",l.createElement("b",null,j&&j.voltage_volts?j.voltage_volts:0))))),l.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},l.createElement("h4",{className:"padding-5 margin-5"},"Control Type: ",l.createElement("b",null,B&&B.controlChoice?B.controlChoice:"Not selected"," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Illuminance: ",l.createElement("b",null,o&&o.illuminance_lux?o.illuminance_lux:0," Lumens")),l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,o&&o.motion_sensed&&o.motion_sensed>0?"True":"False")))),I&&-1==I.indexOf("OneRelay")&&l.createElement("div",{className:"col-md-12 InsightRow"},l.createElement("table",{className:"table table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null),l.createElement("th",null,l.createElement("b",null,"Amperes")),l.createElement("th",null,l.createElement("b",null,"Power Watt")),-1!=I.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("th",null,l.createElement("b",null,"Frequency")),l.createElement("th",null,l.createElement("b",null,"Energy")),l.createElement("th",null,l.createElement("b",null,"Power Factor")),l.createElement("th",null,l.createElement("b",null,"Voltage"))),l.createElement("th",null,"Manual"==O?"Status":""),t&&t.length>0&&(1==t.length?"0"!=t[0]:"0"!=t[0]&&"0"!=t[1]&&"0"!=t[2]&&"0"!=t[3])&&l.createElement("th",null,"Optimize Settings"))),l.createElement("tbody",null,a&&"inactive"!=a[0]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[0])),-1!=I.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,v&&v.mAmps_relay1?this.applyRule(parseFloat(v.mAmps_relay1)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,v&&v.power_Wt_relay1?this.applyRule(parseFloat(v.power_Wt_relay1)/1e3,!0,3):0," W"))),-1!=I.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,A&&A.current_Amperes_Ch1?this.applyRule(A.current_Amperes_Ch1,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,A&&A.active_power_Watts_Ch1?this.applyRule(parseFloat(A.active_power_Watts_Ch1)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,A&&A.frequency_Hz_Ch1?A.frequency_Hz_Ch1:0," Hz")),l.createElement("td",null,l.createElement("b",null,A&&A.import_active_energy_Wh_Ch1?A.import_active_energy_Wh_Ch1:0," Wh")),l.createElement("td",null,l.createElement("b",null,A&&A.power_factor_Ch1?A.power_factor_Ch1:0)),l.createElement("td",null,l.createElement("b",null,A&&A.voltage_volts_Ch1?this.applyRule(A.voltage_volts_Ch1,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",M.statusNotes&&M.statusNotes.length>0&&" "!=M.statusNotes[0]&&"(Triggered "+M.statusNotes[0]+")"),l.createElement("button",{type:"button",className:E?"btn":"btn btn-fill",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!1,1,!0)}},"Off"),l.createElement("button",{type:"button",className:E?"btn btn-fill":"btn",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!0,1,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[0]&&"C"!=t[0]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Normal",0)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),a&&"inactive"!=a[1]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[1])),-1!=I.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,v&&v.mAmps_relay2?this.applyRule(parseFloat(v.mAmps_relay2)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,v&&v.power_Wt_relay2?this.applyRule(parseFloat(v.power_Wt_relay2)/1e3,!0,3):0," W"))),-1!=I.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,A&&A.current_Amperes_Ch2?this.applyRule(A.current_Amperes_Ch2,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,A&&A.active_power_Watts_Ch2?this.applyRule(parseFloat(A.active_power_Watts_Ch2)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,A&&A.frequency_Hz_Ch2?A.frequency_Hz_Ch2:0," Hz")),l.createElement("td",null,l.createElement("b",null,A&&A.import_active_energy_Wh_Ch2?A.import_active_energy_Wh_Ch2:0," Wh")),l.createElement("td",null,l.createElement("b",null,A&&A.power_factor_Ch2?A.power_factor_Ch2:0)),l.createElement("td",null,l.createElement("b",null,A&&A.voltage_volts_Ch2?this.applyRule(A.voltage_volts_Ch2,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",M.statusNotes&&M.statusNotes.length>0&&" "!=M.statusNotes[1]&&"(Triggered "+M.statusNotes[1]+")"),l.createElement("button",{type:"button",className:_?"btn":"btn btn-fill",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!1,2,!0)}},"Off"),l.createElement("button",{type:"button",className:_?"btn btn-fill":"btn",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!0,2,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[1]&&"C"!=t[1]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[1]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Normal",1)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[1]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Optimize",1)}},"Optimize")))),a&&"inactive"!=a[2]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[2])),-1!=I.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,v&&v.mAmps_relay3?this.applyRule(parseFloat(v.mAmps_relay3)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,v&&v.power_Wt_relay3?this.applyRule(parseFloat(v.power_Wt_relay3)/1e3,!0,3):0," W"))),-1!=I.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,A&&A.current_Amperes_Ch3?this.applyRule(A.current_Amperes_Ch3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,A&&A.active_power_Watts_Ch3?this.applyRule(parseFloat(A.active_power_Watts_Ch3)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,A&&A.frequency_Hz_Ch3?A.frequency_Hz_Ch3:0," Hz")),l.createElement("td",null,l.createElement("b",null,A&&A.import_active_energy_Wh_Ch3?A.import_active_energy_Wh_Ch3:0," Wh")),l.createElement("td",null,l.createElement("b",null,A&&A.power_factor_Ch3?A.power_factor_Ch3:0)),l.createElement("td",null,l.createElement("b",null,A&&A.voltage_volts_Ch3?this.applyRule(A.voltage_volts_Ch3,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",M.statusNotes&&M.statusNotes.length>0&&" "!=M.statusNotes[2]&&"(Triggered "+M.statusNotes[2]+")"),l.createElement("button",{type:"button",className:N?"btn":"btn btn-fill",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!1,3,!0)}},"Off"),l.createElement("button",{type:"button",className:N?"btn btn-fill":"btn",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!0,3,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[2]&&"C"!=t[2]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[2]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Normal",2)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[2]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Optimize",2)}},"Optimize")))),a&&"inactive"!=a[3]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[3])),-1!=I.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,v&&v.mAmps_relay4?this.applyRule(parseFloat(v.mAmps_relay4)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,"-"))),-1!=I.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,A&&A.current_Amperes_Ch4?this.applyRule(A.current_Amperes_Ch4,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,A&&A.active_power_Watts_Ch4?this.applyRule(parseFloat(A.active_power_Watts_Ch4)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,A&&A.frequency_Hz_Ch4?A.frequency_Hz_Ch4:0," Hz")),l.createElement("td",null,l.createElement("b",null,A&&A.import_active_energy_Wh_Ch4?A.import_active_energy_Wh_Ch4:0," Wh")),l.createElement("td",null,l.createElement("b",null,A&&A.power_factor_Ch4?A.power_factor_Ch4:0)),l.createElement("td",null,l.createElement("b",null,A&&A.voltage_volts_Ch4?this.applyRule(A.voltage_volts_Ch4,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",M.statusNotes&&M.statusNotes.length>0&&" "!=M.statusNotes[3]&&"(Triggered "+M.statusNotes[3]+")"),l.createElement("button",{type:"button",className:R?"btn":"btn btn-fill",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!1,4,!0)}},"Off"),l.createElement("button",{type:"button",className:R?"btn btn-fill":"btn",disabled:m||"Manual"!=O||!k,onClick:function(){r.handleRelayOnOff(!0,4,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[3]&&"C"!=t[3]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[3]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Normal",3)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[3]?"btn btn-fill":"btn",disabled:D||!k,onClick:function(){r.handleRelayOptimizeSettings("Optimize",3)}},"Optimize"))))))),l.createElement("div",{className:"col-md-8 col-xs-12 InsightRow"},I&&-1!=I.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-6"},l.createElement(l.Fragment,null,l.createElement("div",{className:"RelayHeading"},"Relay Status: ",M.statusNotes&&M.statusNotes.length>0&&" "!=M.statusNotes[0]&&"(Triggered "+M.statusNotes[0]+")"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:w?"btn":"btn btn-fill",disabled:m||"Manual"!=O||!k,onClick:function(){F[0]="Manually",r.handleI1RelayOnOff(!1)}},"Off"),l.createElement("button",{type:"button",className:w?"btn btn-fill":"btn",disabled:m||"Manual"!=O||!k,onClick:function(){F[0]="Manually",r.handleI1RelayOnOff(!0)}},"On")))),t&&"0"!=t[0]&&"C"!=t[0]&&l.createElement("div",{className:"col-md-6"},l.createElement("div",{className:"RelayHeading"},"Optimize Settings"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",disabled:!k,onClick:function(){r.handleRelayOptimizeSettings("Normal",0)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",disabled:!k,onClick:function(){r.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),I&&-1==I.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",l.createElement("b",null,v&&v.nominal_src_volts?v.nominal_src_volts:0," "))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Illuminance: ",l.createElement("b",null,o&&o.illuminance_lux?o.illuminance_lux:0," Lumens"))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,o&&o.motion_sensed&&o.motion_sensed>0?"True":"False"))))),l.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},k&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:"Local"==O?"btn btn-success btn-fill":"btn btn-success",disabled:""!=f&&"state"!=f,onClick:function(){if(I&&-1!=I.indexOf("V4"))for(var e=0;e<=3;e++)F[e]="Locally";else F[0]="Locally";r.handleRelayControlStatus("Local")}},"Local"),l.createElement("button",{type:"button",className:K?"btn btn-success btn-fill":"btn btn-success",disabled:""!=f&&"state"!=f,onClick:function(){r.handleRelayControlStatus("Remote")}},"Remote"),l.createElement("button",{type:"button",className:"Manual"==O?"btn btn-success btn-fill":"btn btn-success",disabled:!K,onClick:function(){r.handleRelayControlStatus("Manual")}},"Manual"),l.createElement("button",{type:"button",className:"Schedule"==O?"btn btn-success btn-fill":"btn btn-success",disabled:!K,onClick:function(){r.handleRelayControlStatus("Schedule")}},"Schedule")))),I&&l.createElement(d.a,{instance:q,buildingName:H,monconType:I,moncon:u.monitoringControl,deviceId:u.deviceID,monconRDFsLabel:u.rdfsLabel}),i&&i.monitoringControl&&l.createElement(d.a,{instance:q,buildingName:H,monconType:"CeilingSensor",moncon:i.monitoringControl,deviceId:i.deviceID,monconRDFsLabel:i.rdfsLabel}),l.createElement("div",{className:"accordion row padding-10",id:"accordionExample"+G,style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne"+G,style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne"+G,onClick:function(){r.setState({detailsExpanded:!g})}},l.createElement("i",{className:g?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),l.createElement("div",{id:"collapseOne"+G,className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"+G},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",u.wirelessConfig&&u.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",u.wirelessConfig&&u.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",u.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",u.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Board Address:")," ",u.boardAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",u.deviceID?u.deviceID:""),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Control Type sent to PI:")," ","Manual"==O?"10":B&&B.controlChoice?B.controlChoice:"Not selected"),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Last Data Synced At:")," ",Q)))),l.createElement("div",{className:m?"InsightApplyChanges":"hidden"},W?l.createElement("h4",null,"Do you want to apply these changes (Boot Relay Device) ?"):D?l.createElement("h4",null,"Do you want to apply these changes (Optimize Settings: ",z,") ?"):l.createElement("h4",null,"Do you want to apply these changes (Relay ",I&&-1!=I.indexOf("OneRelay")?" : "+(w?"on":"off"):C+" : "+(S?"on":"off"),")?"),l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return r.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return r.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return r.applyChanges()}},"Apply Changes"))))))),L&&k&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",id:"btnDialogRelayControl",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#dialogRelayControl"}," . "),l.createElement(h.a,{id:"dialogRelayControl",relayDeviceName:G,buildingName:H,onCloseRelayControlDialog:this.onCloseRelayControlDialog,refreshRelayControlDB:this.fetchRelayControlSettings}))))},t}(l.Component);t.default=N}});