webpackJsonp([27],{1007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n.n(a),r=n(26),o=n(9),c=n(1032),l=n(1332),s=n(11),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}l((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={newTicketType:"",selectedOptions:[],ticketTypes:[],workflows:[],workFlowList:[],workFlowTemplate:[],deleteOntology:""},n.ticketInputChangeHandler=n.ticketInputChangeHandler.bind(n),n.addNewTicketHandler=n.addNewTicketHandler.bind(n),n.addWorkFlowTemplateChangeHandler=n.addWorkFlowTemplateChangeHandler.bind(n),n.deleteTicketTypeHandler=n.deleteTicketTypeHandler.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e,t,n,a,i=this;return f(this,function(r){switch(r.label){case 0:return e=this.state,t=e.workFlowList,n=e.workFlowTemplate,[4,Object(c.c)(this.props.buildingName).then(function(e){e.length>0&&e[0].ontology?(i.setState({workflows:e}),i.state.workflows.map(function(e,n){var a=Object();a.label=e.description,a.value=e.ontology,t.push(a)}),i.setState({workFlowList:t})):i.setState({workflows:[]})})];case 1:return r.sent(),[4,Object(l.d)()];case 2:return(a=r.sent()).map(function(e,a){if(void 0!=e.assignedWorkFlowTemplate&&"undefined"!=e.assignedWorkFlowTemplate){for(var r=[],o=e.assignedWorkFlowTemplate.split(","),c=0;c<o.length;c++){var l=t.find(function(e){return e.value===o[c]});r.push(l)}n[e.ontology]=r}i.setState({workFlowTemplate:n})}),this.setState({ticketTypes:a}),[2]}})})},t.prototype.ticketInputChangeHandler=function(e){return d(this,void 0,void 0,function(){return f(this,function(t){return this.setState({newTicketType:e}),[2]})})},t.prototype.addNewTicketHandler=function(){return d(this,void 0,void 0,function(){var e,t,n;return f(this,function(a){switch(a.label){case 0:return""==(e=this.state.newTicketType)||null==e||""==e.trim()?(Object(o.a)("Ticket Type Empty."),[2]):((t=Object()).ticketType=e,[4,Object(l.h)(t)]);case 1:return a.sent(),[4,Object(l.d)()];case 2:return n=a.sent(),this.setState({ticketTypes:n,newTicketType:""}),[2]}})})},t.prototype.addWorkFlowTemplateChangeHandler=function(e,t){return d(this,void 0,void 0,function(){var n,a,i;return f(this,function(r){return n=this.state,a=n.workFlowTemplate,(i=n.selectedOptions)[t]=e,a[t]=e,this.setState({selectedOptions:i,workFlowTemplate:a}),[2]})})},t.prototype.saveTicketTypeHandler=function(e){return d(this,void 0,void 0,function(){var t,n,a;return f(this,function(i){switch(i.label){case 0:return n="",(t=this.state.workFlowTemplate[e])&&t.length>0?(t.map(function(e,t){n=n+e.value+","}),a=this.state.ticketTypes.filter(function(t){return t.ontology===e}),n=n.substring(0,n.length-1),a[0].assignedWorkFlowTemplate=n,[4,Object(l.h)(a[0])]):(Object(o.a)("No WorkFlow Template Selected."),[2]);case 1:return i.sent(),[2]}})})},t.prototype.deleteTicketTypeHandler=function(e){return d(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,Object(l.b)(e)];case 1:return t.sent(),this.setState({deleteOntology:""}),this.setState(function(t){return{ticketTypes:t.ticketTypes.filter(function(t){return t.ontology!==e})}}),[2]}})})},t.prototype.render=function(){var e=this;return i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"container-fluid p-0"},i.a.createElement("div",{className:"container-fluid mb-4"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},i.a.createElement("div",{className:"pull-left mx-1 form-inline"},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"inputPassword6"},"Ticket Type ",i.a.createElement("span",null,"\xa0")),i.a.createElement("input",{type:"text",id:"inputPassword6",className:"form-control mx-sm-3","aria-describedby":"passwordHelpInline",value:this.state.newTicketType,onChange:function(t){e.ticketInputChangeHandler(t.target.value)}})))),i.a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 "},i.a.createElement("button",{type:"button",className:"btn btn-dark pull-left mx-1",onClick:function(){e.addNewTicketHandler()}},i.a.createElement("i",{className:"fa fa-plus"}),i.a.createElement("span",null,"Add Ticket Type "))),i.a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12"})))),i.a.createElement("div",{className:"card small mt-4"},i.a.createElement("div",{className:"container-fluid p-2"},i.a.createElement("div",{className:"content p-0 mt-0"},i.a.createElement("div",{className:"row no-margin no-padding hidden-sm hidden-xs"},i.a.createElement("div",{className:"col-md-12 p-1"},i.a.createElement("div",{className:"col-md-12 no-padding"},i.a.createElement("div",{className:"col-md-1 px-0 py-2 trim-data grid-header text-center"},i.a.createElement("i",{className:" mx-0 px-0 py-2 fa fas fa-sort text-center"}),"No."),i.a.createElement("div",{className:"col-md-3 px-0 py-2 trim-data grid-header text-center"},i.a.createElement("i",{className:" mx-0 px-0 py-2 fa fas fa-sort text-center"}),"Ticket Type"),i.a.createElement("div",{className:"col-md-5 px-0 py-2 trim-data grid-header text-center"},i.a.createElement("i",{className:" mx-0 px-0 py-2 fa fas fa-sort text-center"}),"Work Flow Template"),i.a.createElement("div",{className:"col-md-3 px-0 py-2 trim-data grid-header text-center"},i.a.createElement("i",{className:" mx-0 px-0 py-2 fa fas fa-sort text-center"}),"Actions")))),i.a.createElement("div",{className:"dataCard px-1"},this.state.ticketTypes.map(function(t,n){return i.a.createElement("div",{className:"card no-margin no-padding"},i.a.createElement("div",{className:"container-fluid  no-padding"},i.a.createElement("div",{className:"row no-margin no-padding"},i.a.createElement("div",{className:"col-md-12 no-padding"},i.a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12  no-padding"},i.a.createElement("div",{className:"col-md-1 col-sm-6 col-xs-12 padding-5 no-margin trim-data"},i.a.createElement("span",{className:"hidden-md hidden-lg visible-inline-sm visible-inline-xs headingText"},"No."),n+1),i.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 padding-5 no-margin trim-data"},i.a.createElement("span",{className:"hidden-md hidden-lg visible-inline-sm visible-inline-xs headingText"},"Ticket Type"),t.ticketType),i.a.createElement("div",{className:"col-md-5 col-sm-6 col-xs-12 padding-5 no-margin text-center"},i.a.createElement("span",{className:"hidden-md hidden-lg visible-inline-sm visible-inline-xs headingText"},"Work Flow Template"),i.a.createElement(r.a,{isMulti:!0,onChange:function(n){e.addWorkFlowTemplateChangeHandler(n,t.ontology)},placeholder:"Add WorkFlow Template",options:e.state.workFlowList,value:e.state.workFlowTemplate[t.ontology]})),i.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 padding-5 no-margin trim-data justify-content-center"},i.a.createElement("span",{className:"hidden-md hidden-lg visible-inline-sm visible-inline-xs headingText"}),i.a.createElement("button",{type:"button",className:"btn btn-primary pull-left mx-1",onClick:function(){e.saveTicketTypeHandler(t.ontology)}},i.a.createElement("i",{className:"fa fa-save"}),i.a.createElement("span",null,"Save ")),i.a.createElement("button",{type:"button",className:"btn btn-danger pull-left mx-1",onClick:function(){e.setState({deleteOntology:t.ontology}),document.getElementById("deleteConfirmDialogue").click()}},i.a.createElement("i",{className:"fa fa-trash"}),i.a.createElement("span",null,"Delete "))))))))}),i.a.createElement("button",{type:"button",id:"deleteConfirmDialogue",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#deleteTicketTypeConfirmDialog"}," ."),i.a.createElement(s.a,{id:"deleteTicketTypeConfirmDialog",heading:"Delete Ticket Type",saveButtonText:"Delete",cancelButtonText:"Cancel",disableSaveButton:!1,showCancelButton:!0,showSaveButton:!0,isEditForm:!1,onSaveButtonClick:function(){e.deleteTicketTypeHandler(e.state.deleteOntology)},onCancelButtonClick:function(){e.setState({deleteOntology:""})}},i.a.createElement("p",{className:"headingText"},"Are you sure you want to Delete?"))),i.a.createElement("div",{className:"col-md-12 inline-block"},i.a.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=e.props.instance+"/"+e.props.buildingName+"/Tickets"}},i.a.createElement("i",{className:"fa fa-angle-double-left"}),"  Back to ONIT Tickets")))))))},t}(i.a.Component);t.default=p},1032:function(e,t,n){"use strict";t.d=function(e,t,n,l){return o(this,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({buildingName:e,model:t,isEdit:n,saveStages:l},a.a.TASKTEMPLATE.SAVEPHASE,i.b.TASK).then(function(){Object(r.b)("Workflow "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(r.a)("Error occured while saving Workflow.")})];case 1:return[2,o.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return o(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASEDETAILLIST,i.b.TASK,n)];case 1:return[2,r.sent()]}})})},t.c=function(e,t,n){void 0===n&&(n=!0);return o(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,i.b.TASK,n)];case 1:return[2,r.sent()]}})})},t.e=function(e,t,n){return o(this,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({taskID:e,status:t},a.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,i.b.TASK).then(function(){n||Object(r.b)("Status Updated Successfully.")}).catch(function(e){Object(r.a)("Error occured while update Status.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t){return o(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.DEPENDENCY.GETDEPENDENCY,i.b.TASK,!0)];case 1:return[2,n.sent()]}})})};var a=n(12),i=n(7),r=n(9),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}l((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}},1332:function(e,t,n){"use strict";t.g=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.f)(e,r.a.TICKETS.AddNewTicket,i.b.TICKET).then(function(){Object(a.b)("Ticket Added")}).catch(function(e){Object(a.a)("Error occured while saving Ticket.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.f)({ticketType:e},r.a.TICKETS.AddNewTicketType,i.b.TICKET).then(function(){Object(a.b)("Ticket Type Added")}).catch(function(e){Object(a.a)("Error occured while saving Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.b=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.f)({ticketTypeOntology:e},r.a.TICKETS.DeleteTicketType,i.b.TICKET).then(function(){Object(a.b)("Ticket Type Deleted")}).catch(function(e){Object(a.a)("Error occured while deleting Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.f=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Object(r.e)({},r.a.TICKETS.GetAllTickets,i.b.TICKET,!0)];case 1:return[2,e.sent()]}})})},t.d=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Object(r.e)({},r.a.TICKETS.GetTicketTypes,i.b.TICKET)];case 1:return[2,e.sent()]}})})},t.c=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({ticketTypeOntology:e},r.a.TICKETS.GetTicketTypeUsingOntology,i.b.TICKET,!0)];case 1:return[2,t.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({ticketOntology:e},r.a.TICKETS.GetTicketUsingOntology,i.b.TICKET,!0)];case 1:return[2,t.sent()]}})})},t.a=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.f)({ticketOntology:e},r.a.TICKETS.DeleteTicket,i.b.TICKET).then(function(){Object(a.b)("Ticket Deleted")}).catch(function(e){Object(a.a)("Error occured while deleting Ticket.")})];case 1:return[2,t.sent()]}})})};var a=n(9),i=n(7),r=n(12),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function c(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}l((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}}});