webpackJsonp([10],{2754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=(a.n(n),a(123)),s=a(1197),o=a(12),i=a(686),r=a(2755),u=a(20),m=a(2756),c=a(2757),d=a(2758),h=a(2759),p=a(2760),g=a(2761),f=a(2762),v=a(2763),x=a(2764),V=a(2765),w=a(1552),y=(a.n(w),a(714)),L=a(2766),b=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),E=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},H=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},A=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},N=function(e){function t(t){var a=e.call(this,t)||this,n=new Date(new Date(Date.now()).setMinutes(new Date(Date.now()).getMinutes()-30)),l=new Date(Date.now());return a.state={from:n,to:l,dashboardURL:"",insights:[],templatesList:[],selectedTemplate:"",loadingDevices:!0,liveGraphRange:30,filteredInsights:[],showInsights:[],selectedTemplateGraphs:{},showAlarmPoints:!1,insightsLoaded:0,verifyList:[]},a}return b(t,e),t.prototype.componentDidMount=function(){return E(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,this._fetchInsights()];case 1:return e.sent(),[2]}})})},t.prototype.moreInsights=function(){var e=this.state,t=e.showInsights,a=e.filteredInsights.slice(t.length-1,t.length+4),n=A(t,a);this.setState({showInsights:n},function(){window.dispatchEvent(new Event("reLoadGraph"))})},t.prototype.loadNextInsight=function(){var e=this.state,t=e.showInsights,a=e.insightsLoaded;a<t.length&&this.setState({insightsLoaded:a+1})},t.prototype._fetchInsights=function(){return E(this,void 0,void 0,function(){var e,t,a,n,l=this;return H(this,function(r){switch(r.label){case 0:return e=this.props.buildingName,t=[],[4,Object(y.o)(e)];case 1:return a=(a=r.sent()).filter(function(e){return"Measure"==e.verifyType}),e?[4,Object(i.w)(e)]:[3,4];case 2:return n=(n=r.sent()).filter(function(e){var t,a,n,l,s,i,r;return-1!=(null===(t=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===t?void 0:t.toLowerCase().indexOf("thermostat"))||-1!=(null===(a=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===a?void 0:a.toLowerCase().indexOf("ceiling"))||-1!=(null===(n=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===n?void 0:n.toLowerCase().indexOf("intesis"))||-1!=(null===(l=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===l?void 0:l.toLowerCase().indexOf("ats"))||-1!=(null===(s=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===s?void 0:s.toLowerCase().indexOf("generator"))||"CBW406"==Object(o.g)(null===e||void 0===e?void 0:e.moncontype)||"CBW418"==Object(o.g)(null===e||void 0===e?void 0:e.moncontype)||-1!=(null===(i=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===i?void 0:i.toLowerCase().indexOf("relayv4"))||-1!=(null===(r=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===r?void 0:r.toLowerCase().indexOf("relayi1"))||"WattNode"==Object(o.g)(null===e||void 0===e?void 0:e.moncontype)}),[4,Object(s.b)(e).then(function(e){if(e&&e.length>0)e.map(function(e){t.push({ontology:Object(o.g)(e.ontology),label:Object(o.g)(e.label),deviceGraphs:Object(o.g)(e.deviceGraphs)})}),l.setState({templatesList:t,insights:n,selectedTemplate:(t.length-1).toString(),filteredInsights:[],showInsights:[]},function(){var e=JSON.parse(t[t.length-1].deviceGraphs),s=Object.keys(e),i=null===n||void 0===n?void 0:n.filter(function(e){return s.indexOf(Object(o.g)(e.moncondevice))>-1}),r=i.slice(0,10);l.setState({filteredInsights:i,showInsights:r,selectedTemplateGraphs:e,verifyList:a,loadingDevices:!1})});else{var s=null===n||void 0===n?void 0:n.filter(function(e){return e.moncondevice}),i=s.slice(0,10);l.setState({insights:n,filteredInsights:s,showInsights:i,verifyList:a,loadingDevices:!1})}})];case 3:r.sent(),r.label=4;case 4:return[2]}})})},t.prototype.changeAlarmStatus=function(){this.setState({showAlarmPoints:!this.state.showAlarmPoints}),window.dispatchEvent(new Event("ShowAlarms"))},t.prototype.liveGraphRangeChange=function(e){var t=this,a=new Date,n=new Date;n.setMinutes(n.getMinutes()-+e),this.setState({from:n,to:a,liveGraphRange:+e,loadingDevices:!0,insightsLoaded:0},function(){t.setState({loadingDevices:!1})})},t.prototype.selectTemplate=function(e){var t=this,a=this.state,n=a.templatesList,l=a.insights,s=a.verifyList;if(isNaN(+e))if("default"==e){var i=l,r=i.slice(0,10);this.setState({loadingDevices:!0,showAlarmPoints:!1,insightsLoaded:0},function(){t.setState({selectedTemplate:e,filteredInsights:i,showInsights:r,loadingDevices:!1})})}else{if(!s.find(function(t){return t._id==e}))return;this.setState({loadingDevices:!0,showAlarmPoints:!1,insightsLoaded:0},function(){t.setState({loadingDevices:!1,showAlarmPoints:!1,selectedTemplate:e,filteredInsights:[],showInsights:[],liveGraphRange:1})})}else this.setState({loadingDevices:!0,showAlarmPoints:!1,selectedTemplate:e,filteredInsights:[],showInsights:[],insightsLoaded:0},function(){var a=JSON.parse(n[+e].deviceGraphs),s=Object.keys(a),i=l.filter(function(e){return s.indexOf(Object(o.g)(e.moncondevice))>-1}),r=i.slice(0,10);t.setState({showInsights:r,filteredInsights:i,loadingDevices:!1,selectedTemplateGraphs:a})})},t.prototype.render=function(){var e,t=this,a=this.state,s=a.verifyList,i=a.from,w=a.to,y=a.showInsights,b=a.filteredInsights,E=a.templatesList,H=a.selectedTemplate,A=a.loadingDevices,N=a.liveGraphRange,D=a.selectedTemplateGraphs,P=a.showAlarmPoints,S=a.insightsLoaded,_=this.props,k=_.buildingName,O=_.instance;return n.createElement("div",{className:"dashboard"},n.createElement("div",{className:"dashboard-header sticky"},!A&&n.createElement("div",{className:"col-md-4 float-left"},n.createElement("div",{className:"col-md-8 no-padding"},n.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){t.selectTemplate(e.target.value)},value:H,placeholder:"Select Template"},0==E.length&&n.createElement("option",{value:""},"Select Template"),n.createElement("option",{value:"default"},"All Graphs"),(null===E||void 0===E?void 0:E.length)>0&&E.map(function(e,t){return n.createElement("option",{value:t,key:t},e.label)}),(null===s||void 0===s?void 0:s.length)>0&&s.map(function(e,t){return n.createElement("option",{value:e._id,key:t},e.projectName)}))),n.createElement(l.b,{target:"_blank",to:"/"+O+"/"+k+"/Dashboard/Templates",className:"btn btn-fill btn-secondary btn-secondary-dark margin-left-20 btn-fix-height"},"Create Template")),n.createElement("h3",{className:"dashboard-title"},Object(u.x)(k)),!A&&n.createElement("div",{className:"col-md-4 float-right margin-top-10"},S===y.length&&!s.find(function(e){return e._id==H})&&n.createElement(n.Fragment,null,n.createElement("div",{className:"col-md-3 padding-5"},n.createElement("label",{style:{color:"#fff",cursor:"default"}},"Show Alarm: \xa0")),n.createElement("div",{className:"padding-5"},n.createElement("label",null,n.createElement("input",{name:"showError",onChange:function(e){t.changeAlarmStatus()},className:"switchDashboard",type:"checkbox",checked:P}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-5 padding-5 margin-left-20"},n.createElement("label",{style:{color:"#fff",cursor:"default"}},"Graph Range: \xa0")),n.createElement("div",{className:"col-md-6 no-padding"},n.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){t.liveGraphRangeChange(e.target.value)},value:N},s.find(function(e){return e._id==H})?n.createElement(n.Fragment,null,n.createElement("option",{value:1},"1 Month"),n.createElement("option",{value:2},"2 Months"),n.createElement("option",{value:3},"3 Months"),n.createElement("option",{value:4},"4 Months"),n.createElement("option",{value:5},"5 Months"),n.createElement("option",{value:6},"6 Months")):n.createElement(n.Fragment,null,n.createElement("option",{value:5},"5 Minutes"),n.createElement("option",{value:15},"15 Minutes"),n.createElement("option",{value:30},"30 Minutes"),n.createElement("option",{value:60},"1 Hour"),n.createElement("option",{value:180},"3 Hours"),n.createElement("option",{value:360},"6 Hours"),n.createElement("option",{value:720},"12 Hours"),n.createElement("option",{value:1440},"24 Hours")))))),A||""!=H||0!=E.length?A?n.createElement("div",{className:"graph-box-loader full-screen"},n.createElement("div",{className:"center-object loader"})):s.find(function(e){return e._id==H})?n.createElement("div",{className:""},n.createElement(L.a,{instance:O,buildingName:k,from:i,to:w,projectName:H,measureAnalysis:s.find(function(e){return e._id==H}).measureAnalysis})):n.createElement(m.a,{dataLength:y.length,className:"graph-boxes",next:function(){return t.moreInsights()},hasMore:y.length<b.length,loader:n.createElement("div",{className:"graph-box-loader full-screen"},n.createElement("div",{className:"center-object loader"}))},null===(e=null===y||void 0===y?void 0:y.slice(0,S+1))||void 0===e?void 0:e.map(function(e,a){var l,s,u,m,y,L,b,E=-1!=(null===(l=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===l?void 0:l.toLowerCase().indexOf("thermostat")),H=-1!=(null===(s=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===s?void 0:s.toLowerCase().indexOf("ceiling")),A=-1!=(null===(u=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===u?void 0:u.toLowerCase().indexOf("intesis")),S=-1!=(null===(m=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===m?void 0:m.toLowerCase().indexOf("ats")),_=-1!=(null===(y=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===y?void 0:y.toLowerCase().indexOf("generator")),F="CBW406"==Object(o.g)(null===e||void 0===e?void 0:e.moncontype),j="CBW418"==Object(o.g)(null===e||void 0===e?void 0:e.moncontype),C=-1!=(null===(L=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===L?void 0:L.toLowerCase().indexOf("relayv4")),R=-1!=(null===(b=Object(o.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===b?void 0:b.toLowerCase().indexOf("relayi1")),G="WattNode"==Object(o.g)(null===e||void 0===e?void 0:e.moncontype);return n.createElement(n.Fragment,null,E&&n.createElement(r.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),H&&n.createElement(d.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Temp & Humidity","Pressure","Illuminance","Air Particles","Gas Resistance","Other Parameters"],space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),A&&n.createElement(h.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),index:a,loadNextInsight:function(){return t.loadNextInsight()}}),S&&n.createElement(p.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),index:a,loadNextInsight:function(){return t.loadNextInsight()}}),_&&n.createElement(g.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Voltages","Currents","Powers","Power Factor","Other Parameters","Binary Parameters"],space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),index:a,showAlarmPoints:P,loadNextInsight:function(){return t.loadNextInsight()}}),F&&n.createElement(f.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),j&&n.createElement(v.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),index:a,showAlarmPoints:P,loadNextInsight:function(){return t.loadNextInsight()}}),C&&n.createElement(x.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),index:a,showAlarmPoints:P,loadNextInsight:function(){return t.loadNextInsight()}}),R&&n.createElement(c.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Totalized Energy","Frequency and Voltage","Current and Power","State and Power Factor"],space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()}}),G&&n.createElement(V.a,{InsightName:Object(o.g)(null===e||void 0===e?void 0:e.moncondevice),buildingName:k,instance:O,from:i,to:w,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(o.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Power","Phase Voltage","Voltage","Frequency","Energy Sum Resettable","Positive Energy Sum Non-resettable"],space:Object(o.g)(e.spaceRdfsLabel),zone:Object(o.g)(e.zoneRdfsLabel),floor:Object(o.g)(e.floorRdfsLabel),equipment:Object(o.g)(e.equipmentsRdfsLabel),showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()}}))}),0==(null===y||void 0===y?void 0:y.length)&&n.createElement("div",{className:"full-screen"},n.createElement("h1",{className:"no-graph-heading"}," No Graphs "))):n.createElement("div",{className:"full-screen"},n.createElement("h1",{className:"no-graph-heading"}," No Template Created ")))},t}(n.Component);t.default=N},2755:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(12),i=a(680),r=a(686),u=a(765),m=a(20),c=a(695),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],graphDataAlarmPoint:{},selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm:!1},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.E)(this.props.equipment.split(","))];case 1:return(null===(e=a.sent())||void 0===e?void 0:e.length)>0&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,r,u,g,f,v,x=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint,l=this.props,s=l.buildingName,i=l.InsightName,r=l.showAlarmPoints,Object(h.a)(!0),r&&!e?[3,3]:(u=[],g=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(o.g)(a.point)&&Object(o.g)(a.pointLabel)&&Object(m.P)(Object(o.g)(a.point),Object(o.g)(a.pointLabel))}u=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),u.filter(function(e){return Object(o.g)(e.monconDevice)==x.props.InsightName}).forEach(function(e){g.push({sensedValue:Object(o.g)(e.sensedValue),maximumExtremeValue:Object(o.g)(e.maximumExtremeValue),maximumNormalValue:Object(o.g)(e.maximumNormalValue),minimumExtremeValue:Object(o.g)(e.minimumExtremeValue),minimumNormalValue:Object(o.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,s,!1,0,50,null,null,[i],null)];case 2:return f=V.sent(),v=new Date(a.columns[0][1]),f=f.filter(function(e){return new Date(e.timeofalarm)>v}),this.setState({alarmSensedPoints:g,deviceAlarms:f},function(){if((null===g||void 0===g?void 0:g.length)>0&&a.columns.length>1){var e=n.sensedValue.length>1?n.sensedValue:g[g.length-1].sensedValue;x.selectAlarmPoint(e)}}),[3,4];case 3:this.selectAlarmPoint(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{},axes:{}};if(o){if("cooltemp"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"grey",Low:"grey","Cool setpoint":"red",High:"grey","High-High":"grey"}}}else if("heattemp"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},colors:{"Low-Low":"red",Low:"grey","Heat setpoint":"#e3e3e3",High:"grey","High-High":"red"}}}else if("spacetemp"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Space Temp":"#e3e3e3",High:"grey","High-High":"red"},axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"}}}else if("fan"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan 0: Auto 1: On":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Fan 0: Auto 1: On":"#e3e3e3",High:"grey","High-High":"red"}}}else if("fanstate"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan State 1: On":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Fan State 1: On":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mode"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Mode 0: Heat 1: Cool 2: Auto":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Mode 0: Heat 1: Cool 2: Auto":"#e3e3e3",High:"grey","High-High":"red"}}}else if("state"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{state:"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","State 1: Heat 2: Cool":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint:o,graphDataAlarmPoint:e,indicateAlarm:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},graphDataAlarmPoint:e,indicateAlarm:i,loading:!1})})},t.prototype.callLiveUpdate=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,i,r,u,c,d=this;return V(this,function(h){return t=this.state,a=t.graphData,n=t.axis1,l=t.grid,s=t.alarmSensedPoints,o=t.selectedAlarmPoint,i=this.props.showAlarmPoints,e["@timestamp"]&&(r=new Date(e["@timestamp"]),r=new Date(r.setHours(r.getHours()+10))),u=this.props.liveGraphRange,a.columns.length>1&&r&&(a.columns[0].push(r),1==(null===e||void 0===e?void 0:e.tempunits)?(a.columns[1].push(Object(m.a)(null===e||void 0===e?void 0:e.cooltemp).toFixed(1)),a.columns[2].push(Object(m.a)(null===e||void 0===e?void 0:e.heattemp).toFixed(1)),a.columns[3].push(Object(m.a)(null===e||void 0===e?void 0:e.spacetemp).toFixed(1))):(a.columns[1].push(null===e||void 0===e?void 0:e.cooltemp),a.columns[2].push(null===e||void 0===e?void 0:e.heattemp),a.columns[3].push(null===e||void 0===e?void 0:e.spacetemp)),a.columns[4].push(null===e||void 0===e?void 0:e.fan),a.columns[5].push(null===e||void 0===e?void 0:e.fanstate),a.columns[6].push(null===e||void 0===e?void 0:e.mode),a.columns[7].push(null===e||void 0===e?void 0:e.state),(r.getTime()-a.columns[0][2].getTime())/6e4>u&&a.columns[0].splice(1,1),n.x.tick.values[0]<a.columns[0][1]&&(n.x.tick.values.splice(0,1),l.x.lines.splice(0,1)),n.x.tick.values[2]&&n.x.tick.values[1].getTime()&&n.x.tick.values[2].getTime()-n.x.tick.values[1].getTime()<r.getTime()-n.x.tick.values[n.x.tick.values.length-1]&&(r.setSeconds(0),u>10&&r.setMinutes(r.getMinutes()-r.getMinutes()%5),n.x.tick.values.push(r),l.x.lines.push({value:r,class:"grid4"})),c=null===r||void 0===r?void 0:r.toLocaleString(),i?this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:c},function(){var e=o.sensedValue.length>1?o.sensedValue:s[s.length-1].sensedValue;d.selectAlarmPoint(e)}):this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:c})),[2]})})},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,o,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.from,n=t.to,l=t.InsightName,s=t.buildingName,o=t.showAlarmPoints,c=this.state,d=c.grid,h=c.axis1,p=c.graphData,f=c.lastUpdatedAt,l?(v=Object(),[4,Object(i.D)(l,s)]):[3,3];case 1:return v=V.sent(),this.setState({Moncon:v}),[4,Object(r.I)(v.topic,a,n,p.columns.length>1)];case 2:return x=V.sent(),y=["Heat setpoint"],L=["Space Temp"],b=["Fan 0: Auto 1: On"],E=["Fan State 1: On"],H=["Mode 0: Heat 1: Cool 2: Auto"],A=["State 1: Heat 2: Cool"],N=["x"],(w=["Cool setpoint"]).push(null),y.push(null),L.push(null),b.push(null),E.push(null),H.push(null),A.push(null),N.push(new Date(a)),x.length>0&&(null===x||void 0===x||x.forEach(function(e){(null===e||void 0===e?void 0:e.cooltemp)&&(1==e.tempunits?(w.push(Object(m.a)(e.cooltemp).toFixed(1)),y.push(Object(m.a)(e.heattemp).toFixed(1)),L.push(Object(m.a)(e.spacetemp).toFixed(1))):(w.push(e.cooltemp),y.push(e.heattemp),L.push(e.spacetemp)),b.push(e.fan),E.push(e.fanstate),H.push(e.mode),A.push(e.state),N.push(new Date(e.timestamp)))})),f=x.length>0?null===(e=N[N.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",(p.columns.length>1||0===x.length)&&(w.push(null),y.push(null),L.push(null),b.push(null),E.push(null),H.push(null),A.push(null),N.push(new Date(n))),h.y.label="\xb0C",D=Object(u.a)(5,a,n),P="",D.length>1?(S=((new Date).getTime()-D[0].getTime())/1e3,P=(S/=3600)>24?"%m-%d %H:%M":S<.3?"%H:%M:%S":"%H:%M"):P="%H:%M:%S",d.x.lines=[],D.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),p={x:"x",columns:[N,w,y,L,b,E,H,A],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},colors:{"Cool setpoint":"yellow","Heat setpoint":"green","Space Temp":"blue","Fan 0: Auto 1: On":"pink","Fan State 1: On":"yellow","Mode 0: Heat 1: Cool 2: Auto":"magenta","State 1: Heat 2: Cool":"#06cfa4"},types:{"Cool setpoint":"line","Heat setpoint":"line","Space Temp":"line","Fan 0: Auto 1: On":"step","Fan State 1: On":"step","Mode 0: Heat 1: Cool 2: Auto":"step","State 1: Heat 2: Cool":"step"}},h={x:{type:"timeseries",tick:{fit:!1,count:5,values:D,format:P}},y:{label:{text:"Temperature \xb0F",position:"outer-middle"},tick:{fit:!0,values:[0,20,40,60,80,100],count:6,format:function(e){return parseFloat(e).toFixed(1)}},max:100,min:0},y2:{show:!0,label:{text:"State, Mode, Fan, Fan State",position:"outer-middle"},tick:{fit:!0,values:[0,1,2,3],count:6,format:function(e){return parseFloat(e).toFixed(0)}},max:3,min:0}},this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:d,axis1:h,graphData:p,loading:!1,lastUpdatedAt:f},function(){o&&_.changeAlarmStatus(!0)}),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){o&&_.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t=this,a=this.state,l=a.Moncon,o=a.loading,i=a.graphData,r=a.axis1,u=a.grid,m=a.equipmentsLabels,c=a.lastUpdatedAt,d=a.alarmSensedPoints,h=a.selectedAlarmPoint,p=a.graphDataAlarmPoint,g=a.indicateAlarm,f=this.props,v=f.instance,x=f.buildingName,V=f.space,w=f.floor,y=f.zone,L=f.showAlarmPoints,b=f.InsightName;return n.createElement("div",{className:"row col-md-12 device-graphs "+(g&&L?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),L&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",d&&d.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:h.sensedValue,onChange:function(e){t.selectAlarmPoint(e.target.value)}},d.map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),g&&n.createElement("a",{href:"#"+v+"/"+x+"/Alarms/OperationalAlarms/Device/"+b,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign text-align-center tooltipDashboard graphHeading"},n.createElement("a",{href:"#"+v+"/"+x+"/Insights/Equipment/Graphs/InsightControl/"+(null===l||void 0===l?void 0:l.deviceName),target:"_blank",rel:"noreferrer noopener"},m.length>0&&m[0].rdfsLabel," ",V),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",V," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",w," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",y," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",m.map(function(e,t){return e.rdfsLabel+(t<m.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===l||void 0===l?void 0:l.rdfsLabel," ")),n.createElement("span",{className:"lastUpdated"},"Last: ",c)),o?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:L&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:i,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}}))},t}(n.Component);t.a=y},2756:function(e,t,a){"use strict";var n=a(2),l=a.n(n),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};var o=function(){return(o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};var i={Pixel:"Pixel",Percent:"Percent"},r={unit:i.Percent,value:.8};function u(e){return"number"===typeof e?{unit:i.Percent,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:i.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:i.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),r):(console.warn("scrollThreshold should be string or number"),r)}var m=function(e){function t(t){var a=e.call(this,t)||this;return a.lastScrollTop=0,a.actionTriggered=!1,a.startY=0,a.currentY=0,a.dragging=!1,a.maxPullDownDistance=0,a.getScrollableTarget=function(){return a.props.scrollableTarget instanceof HTMLElement?a.props.scrollableTarget:"string"===typeof a.props.scrollableTarget?document.getElementById(a.props.scrollableTarget):(null===a.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},a.onStart=function(e){a.lastScrollTop||(a.dragging=!0,e instanceof MouseEvent?a.startY=e.pageY:e instanceof TouchEvent&&(a.startY=e.touches[0].pageY),a.currentY=a.startY,a._infScroll&&(a._infScroll.style.willChange="transform",a._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},a.onMove=function(e){a.dragging&&(e instanceof MouseEvent?a.currentY=e.pageY:e instanceof TouchEvent&&(a.currentY=e.touches[0].pageY),a.currentY<a.startY||(a.currentY-a.startY>=Number(a.props.pullDownToRefreshThreshold)&&a.setState({pullToRefreshThresholdBreached:!0}),a.currentY-a.startY>1.5*a.maxPullDownDistance||a._infScroll&&(a._infScroll.style.overflow="visible",a._infScroll.style.transform="translate3d(0px, "+(a.currentY-a.startY)+"px, 0px)")))},a.onEnd=function(){a.startY=0,a.currentY=0,a.dragging=!1,a.state.pullToRefreshThresholdBreached&&(a.props.refreshFunction&&a.props.refreshFunction(),a.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){a._infScroll&&(a._infScroll.style.overflow="auto",a._infScroll.style.transform="none",a._infScroll.style.willChange="unset")})},a.onScrollListener=function(e){"function"===typeof a.props.onScroll&&setTimeout(function(){return a.props.onScroll&&a.props.onScroll(e)},0);var t=a.props.height||a._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;a.actionTriggered||((a.props.inverse?a.isElementAtTop(t,a.props.scrollThreshold):a.isElementAtBottom(t,a.props.scrollThreshold))&&a.props.hasMore&&(a.actionTriggered=!0,a.setState({showLoader:!0}),a.props.next&&a.props.next()),a.lastScrollTop=t.scrollTop)},a.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},a.throttledOnScrollListener=function(e,t,a,n){var l,s=!1,o=0;function i(){l&&clearTimeout(l)}function r(){var r=this,u=Date.now()-o,m=arguments;function c(){o=Date.now(),a.apply(r,m)}s||(n&&!l&&c(),i(),void 0===n&&u>e?c():!0!==t&&(l=setTimeout(n?function(){l=void 0}:c,void 0===n?e-u:e)))}return"boolean"!==typeof t&&(n=a,a=t,t=void 0),r.cancel=function(){i(),s=!0},r}(150,a.onScrollListener).bind(a),a.onStart=a.onStart.bind(a),a.onMove=a.onMove.bind(a),a.onEnd=a.onEnd.bind(a),a}return function(e,t){function a(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?o(o({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var a=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=u(t);return n.unit===i.Pixel?e.scrollTop<=n.value+a-e.scrollHeight+1:e.scrollTop<=n.value/100+a-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var a=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=u(t);return n.unit===i.Pixel?e.scrollTop+a>=e.scrollHeight-n.value:e.scrollTop+a>=n.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=o({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),a=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),n=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return l.a.createElement("div",{style:n,className:"infinite-scroll-component__outerdiv"},l.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&l.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},l.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!a&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(n.Component);t.a=m},2757:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(12),i=a(680),r=a(686),u=a(765),m=a(20),c=a(695),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,i,r,u,g,f,v,x,y,L,b=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,r=this.props,u=r.buildingName,g=r.InsightName,f=r.showAlarmPoints,Object(h.a)(!0),f&&!e?[3,3]:(v=[],x=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(o.g)(a.point)&&Object(o.g)(a.pointLabel)&&Object(m.P)(Object(o.g)(a.point),Object(o.g)(a.pointLabel))}v=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),v.filter(function(e){return Object(o.g)(e.monconDevice)==b.props.InsightName}).forEach(function(e){x.push({sensedValue:Object(o.g)(e.sensedValue),maximumExtremeValue:Object(o.g)(e.maximumExtremeValue),maximumNormalValue:Object(o.g)(e.maximumNormalValue),minimumExtremeValue:Object(o.g)(e.minimumExtremeValue),minimumNormalValue:Object(o.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,u,!1,0,50,null,null,[g],null)];case 2:return y=V.sent(),L=new Date(a.columns[0][1]),y=y.filter(function(e){return new Date(e.timeofalarm)>L}),this.setState({alarmSensedPoints:x,deviceAlarms:y},function(){if((null===x||void 0===x?void 0:x.length)>0&&a.columns.length>1){var e=x.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";b.selectAlarmPoint1(t);var o=x.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}),r=l.sensedValue.length>1?l.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";b.selectAlarmPoint2(r);var u=x.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}),m=s.sensedValue.length>1?s.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";b.selectAlarmPoint3(m);var c=x.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}),d=i.sensedValue.length>1?i.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";b.selectAlarmPoint4(d)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,i=this;return V(this,function(r){return t=this.state,a=t.graphData,n=t.alarmSensedPoints,l=t.deviceAlarms,s=n.find(function(t){return t.sensedValue===e}),o=l.length>0&&l.findIndex(function(e){return"import_active_energy_Wh"==e.sensedValueKey})>-1,this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(s){if("import_active_energy_Wh"==s.sensedValue){for(var t=["Low-Low"],n=["Low"],l=["High"],r=["High-High"],u=0;u<a.columns[1].length-1;u++)t.push(+s.minimumExtremeValue/1e3),n.push(+s.minimumNormalValue/1e3),l.push(+s.maximumNormalValue/1e3),r.push(+s.maximumExtremeValue/1e3);e={x:"x",columns:[a.columns[0],t,n,a.columns[1],l,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Killo Watt Hour":"#e3e3e3",High:"grey","High-High":"red"}}}else e=a;i.setState({selectedAlarmPoint1:s,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=a,i.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})}),[2]})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"frequency_Hz"==e.sensedValueKey||"voltage_volts"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("frequency_Hz"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Freq:"#e3e3e3",High:"grey","High-High":"red"}}}else if("voltage_volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Volts:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:o,graphDataAlarmPoint2:e,indicateAlarm2:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:i,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"active_power_Watts"==e.sensedValueKey||"current_Amperes"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("active_power_Watts"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Watts:"#e3e3e3",High:"grey","High-High":"red"}}}else if("current_Amperes"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Amps:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:o,graphDataAlarmPoint3:e,indicateAlarm3:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:i,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"relay_state"==e.sensedValueKey||"power_factor"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("relay_state"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",State:"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_factor"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Factor":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:o,graphDataAlarmPoint4:e,indicateAlarm4:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:i,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,o=n.graphData3,i=n.graphData4,r=n.axis1,u=n.grid,m=n.alarmSensedPoints,c=n.selectedAlarmPoint1,d=n.selectedAlarmPoint2,h=n.selectedAlarmPoint3,p=n.selectedAlarmPoint4,g=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var f=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(+(null===e||void 0===e?void 0:e.import_active_energy_Wh)/1e3),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.frequency_Hz),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.voltage_volts),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.active_power_Watts),o.columns[2].splice(1,1),o.columns[2].push(null===e||void 0===e?void 0:e.current_Amperes),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.i1relay_state),i.columns[2].splice(1,1),i.columns[2].push(null===e||void 0===e?void 0:e.power_factor),r.x.tick.values[0]<l.columns[0][1]&&(r.x.tick.values.splice(0,1),u.x.lines.splice(0,1)),(t.getTime()-l.columns[0][2].getTime())/6e4>f&&l.columns[0].splice(1,1),r.x.tick.values[0]<l.columns[0][1]&&(r.x.tick.values.splice(0,1),u.x.lines.splice(0,1)),r.x.tick.values[2]&&r.x.tick.values[1].getTime()&&r.x.tick.values[2].getTime()-r.x.tick.values[1].getTime()<t.getTime()-r.x.tick.values[r.x.tick.values.length-1]&&(t.setSeconds(0),f>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),r.x.tick.values.push(t),u.x.lines.push({value:t,class:"grid4"}));var v=null===t||void 0===t?void 0:t.toLocaleString();g?this.setState({grid:u,axis1:r,graphData:l,graphData2:s,graphData3:o,graphData4:i,lastUpdatedAt:v},function(){var e=m.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}),t=c.sensedValue.length>1?c.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=m.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}),l=d.sensedValue.length>1?d.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=m.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}),o=h.sensedValue.length>1?h.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(o);var i=m.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}),r=p.sensedValue.length>1?p.sensedValue:(null===i||void 0===i?void 0:i.length)>0?i[i.length-1].sensedValue:"";a.selectAlarmPoint4(r)}):this.setState({grid:u,axis1:r,graphData:l,graphData2:s,graphData3:o,graphData4:i,lastUpdatedAt:v})}},t.prototype.liveGraph=function(){var e,t,a,n,l,s,o,i,u;return x(this,void 0,void 0,function(){var m,c,d,h,p,g,f,v,x,w,y,L,b,E;return V(this,function(V){switch(V.label){case 0:return m=this.state,c=m.Moncon,d=m.graphData,h=m.graphData2,p=m.graphData3,g=m.graphData4,f=m.axis1,v=m.grid,x=m.lastUpdatedAt,w=this.props.liveGraphRange,y=new Date,(L=new Date).setMinutes(L.getMinutes()-w),[4,Object(r.g)(c.topic,L,y,!0)];case 1:return b=V.sent(),(E=new Date(null===(e=b[0])||void 0===e?void 0:e.timestamp))>d.columns[0][d.columns[0].length-1]&&(null===(t=b[0])||void 0===t?void 0:t.timestamp)&&(d.columns[0].splice(1,1),d.columns[0].push(E),d.columns[1].splice(1,1),d.columns[1].push(+(null===(a=b[0])||void 0===a?void 0:a.import_active_energy_Wh)/1e3),h.columns[1].splice(1,1),h.columns[1].push(null===(n=b[0])||void 0===n?void 0:n.frequency_Hz),h.columns[2].splice(1,1),h.columns[2].push(null===(l=b[0])||void 0===l?void 0:l.voltage_volts),p.columns[1].splice(1,1),p.columns[1].push(null===(s=b[0])||void 0===s?void 0:s.active_power_Watts),p.columns[2].splice(1,1),p.columns[2].push(null===(o=b[0])||void 0===o?void 0:o.current_Amperes),g.columns[1].splice(1,1),g.columns[1].push(null===(i=b[0])||void 0===i?void 0:i.i1relay_state),g.columns[2].splice(1,1),g.columns[2].push(null===(u=b[0])||void 0===u?void 0:u.power_factor),f.x.tick.values[0]<d.columns[0][1]&&(f.x.tick.values.splice(0,1),v.x.lines.splice(0,1)),(E.getTime()-d.columns[0][2].getTime())/6e4>w&&d.columns[0].splice(1,1),f.x.tick.values[0]<d.columns[0][1]&&(f.x.tick.values.splice(0,1),v.x.lines.splice(0,1)),f.x.tick.values[2]&&f.x.tick.values[1].getTime()&&f.x.tick.values[2].getTime()-f.x.tick.values[1].getTime()<E.getTime()-f.x.tick.values[f.x.tick.values.length-1]&&(E.setSeconds(0),w>10&&E.setMinutes(E.getMinutes()-E.getMinutes()%5),f.x.tick.values.push(E),v.x.lines.push({value:E,class:"grid4"})),x=null===E||void 0===E?void 0:E.toLocaleString(),this.setState({grid:v,axis1:f,graphData:d,graphData2:h,graphData3:p,graphData4:g,lastUpdatedAt:x})),[2]}})})},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,o,m,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,o=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.axis4,v=m.graphData,x=m.graphData2,w=m.graphData3,y=m.graphData4,L=m.lastUpdatedAt,a?(b=Object(),[4,Object(i.D)(a,n)]):[3,3];case 1:return b=V.sent(),this.setState({Moncon:b}),[4,Object(r.g)(b.topic,l,s,v.columns.length>1)];case 2:return E=V.sent(),A=["Watts"],N=["Amps"],D=["Freq"],P=["Killo Watt Hour"],S=["Power Factor"],_=["Volts"],k=["x"],(H=["State"]).push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(new Date(l)),E.length>0&&E.forEach(function(e){(null===e||void 0===e?void 0:e.i1relay_state)&&(H.push(e.i1relay_state),A.push(e.active_power_Watts),N.push(e.current_Amperes),D.push(e.frequency_Hz),P.push(+e.import_active_energy_Wh/1e3),S.push(e.power_factor),_.push(e.voltage_volts),k.push(new Date(e.timestamp)))}),L=E.length>0?null===(e=k[k.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(new Date(s)),v={x:"x",columns:[k,P]},x={x:"x",columns:[k,D,_]},w={x:"x",columns:[k,A,N]},y={x:"x",columns:[k,H,S]},d.y.label="kWh",h.y.label="Hz/Volts",p.y.label="Watts/Amps",f.y.label="",O=Object(u.a)(5,l,s),F="",O.length>1?(j=((new Date).getTime()-O[0].getTime())/1e3,F=(j/=3600)>24?"%m-%d %H:%M":j<.3?"%H:%M:%S":"%H:%M"):F="%H:%M:%S",c.x.lines=[],O.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},f.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,10,20,30,40,50],h.y.tick.values=[0,50,100,150,200],p.y.tick.values=[0,20,40,60,80,100],f.y.tick.values=[-1,0,1,2],d.y.max=50,d.y.min=0,h.y.max=200,h.y.min=0,p.y.max=100,p.y.min=0,f.y.max=2,f.y.min=-1,d.x.tick.format=F,h.x.tick.format=F,p.x.tick.format=F,f.x.tick.format=F,d.x.tick.values=O,h.x.tick.values=O,p.x.tick.values=O,f.x.tick.values=O,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,axis4:f,graphData:v,graphData2:x,graphData3:w,graphData4:y,loading:!1,lastUpdatedAt:L},function(){o&&C.changeAlarmStatus(!0)}),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){o&&C.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a,l,o=this,i=this.state,r=i.Moncon,u=i.loading,m=i.graphData,c=i.graphData2,d=i.graphData3,h=i.graphData4,p=i.graphDataAlarmPoint1,g=i.graphDataAlarmPoint2,f=i.graphDataAlarmPoint3,v=i.graphDataAlarmPoint4,x=i.axis1,V=i.axis2,w=i.axis3,y=i.axis4,L=i.grid,b=i.lastUpdatedAt,E=i.equipmentsLabels,H=i.indicateAlarm1,A=i.indicateAlarm2,N=i.indicateAlarm3,D=i.indicateAlarm4,P=i.alarmSensedPoints,S=i.selectedAlarmPoint1,_=i.selectedAlarmPoint2,k=i.selectedAlarmPoint3,O=i.selectedAlarmPoint4,F=this.props,j=F.graphsList,C=F.instance,R=F.buildingName,G=F.space,T=F.floor,M=F.zone,I=F.showAlarmPoints,U=F.InsightName;return n.createElement(n.Fragment,null,j.indexOf("Totalized Energy")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",P&&P.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(e){o.selectAlarmPoint1(e.target.value)}},P.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},E.length>0&&E[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Totalized Energy"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===E||void 0===E?void 0:E.map(function(e,t){return e.rdfsLabel+(t<E.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",b)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:m,size:{height:300},axis:x,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),j.indexOf("Frequency and Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",P&&P.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:_.sensedValue,onChange:function(e){o.selectAlarmPoint2(e.target.value)}},P.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),A&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},E.length>0&&E[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Frequency and Voltage"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===E||void 0===E?void 0:E.map(function(e,t){return e.rdfsLabel+(t<E.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",b)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(t=g.columns)||void 0===t?void 0:t.length)>1?g:c,size:{height:300},axis:V,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Current and Power")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(N&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",n.createElement("select",{className:"alarm-points-list",id:"spaces",value:k.sensedValue,onChange:function(e){o.selectAlarmPoint3(e.target.value)}},P.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})),N&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},E.length>0&&E[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Current and Power"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===E||void 0===E?void 0:E.map(function(e,t){return e.rdfsLabel+(t<E.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",b)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(a=f.columns)||void 0===a?void 0:a.length)>1?f:d,size:{height:300},axis:w,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("State and Power Factor")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(D&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",P&&P.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:O.sensedValue,onChange:function(e){o.selectAlarmPoint4(e.target.value)}},P.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),D&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/RelayControl/"+(null===r||void 0===r?void 0:r.deviceName),target:"_blank",rel:"noreferrer noopener"},E.length>0&&E[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","State and Power Factor"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===E||void 0===E?void 0:E.map(function(e,t){return e.rdfsLabel+(t<E.length-1?", ":" ")})," "),n.createElement("br",null),"F",n.createElement("span",null,"RDFS Label: ",null===r||void 0===r?void 0:r.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",b)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:I&&(null===(l=v.columns)||void 0===l?void 0:l.length)>1?v:h,size:{height:300},axis:y,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2758:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(686),r=a(950),u=a(765),m=a(20),c=a(12),d=a(695),h=a(766),p=a(710),g=a(118),f=a(120),v=a(726),x=(a.n(v),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),V=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},w=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},y=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},L=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return x(t,e),t.prototype.componentDidMount=function(){return V(this,void 0,void 0,function(){var e,t=this;return w(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return V(this,void 0,void 0,function(){var e,t=this;return w(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(f.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return V(this,void 0,void 0,function(){var t,a,n,l,s,o,i,r,u,f,v,x,V,L,b,E,H=this;return w(this,function(w){switch(w.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,o=t.selectedAlarmPoint4,i=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,u=this.props,f=u.buildingName,v=u.InsightName,x=u.showAlarmPoints,Object(g.a)(!0),x&&!e?[3,3]:(V=[],L=[],[4,Object(d.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(c.g)(a.point)&&Object(c.g)(a.pointLabel)&&Object(m.P)(Object(c.g)(a.point),Object(c.g)(a.pointLabel))}V=y(e)}).catch(function(e){return e})]);case 1:return w.sent(),V.filter(function(e){return Object(c.g)(e.monconDevice)==H.props.InsightName}).forEach(function(e){L.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),[4,Object(h.d)(p.a.OperationalAlarm,f,!1,0,50,null,null,[v],null)];case 2:return b=w.sent(),a.columns.length>1&&(E=new Date(a.columns[0][1]),b=b.filter(function(e){return new Date(e.timeofalarm)>E})),this.setState({alarmSensedPoints:L,deviceAlarms:b},function(){if((null===L||void 0===L?void 0:L.length)>0&&a.columns.length>1){var e=L.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";H.selectAlarmPoint1(t);var u=L.filter(function(e){return"pressure_hPa"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";H.selectAlarmPoint2(m);var c=L.filter(function(e){return"illuminance_lux"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";H.selectAlarmPoint3(d);var h=L.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),p=o.sensedValue.length>1?o.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";H.selectAlarmPoint4(p);var g=L.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),f=i.sensedValue.length>1?i.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";H.selectAlarmPoint5(f);var v=L.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";H.selectAlarmPoint6(x)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),w.label=4;case 4:return Object(g.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"relhumidity_pct"==e.sensedValueKey||"temp_celsius"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("temp_celsius"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[0].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Temp:"#e3e3e3",High:"grey","High-High":"red"}}}else if("relhumidity_pct"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[0].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Humidity:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:o,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"pressure_hPa"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("pressure_hPa"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Pressure:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:o,graphDataAlarmPoint2:e,indicateAlarm2:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:i,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"illuminance_lux"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("illuminance_lux"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Illuminance:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:o,graphDataAlarmPoint3:e,indicateAlarm3:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:i,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"gasResistance_kOhm"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("gasResistance_kOhm"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gas Res":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:o,graphDataAlarmPoint4:e,indicateAlarm4:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:i,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"equiCO2_ppm"==e.sensedValueKey||"tvoc_ppm"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("equiCO2_ppm"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",CO2:"#e3e3e3",High:"grey","High-High":"red"}}}else if("tvoc_ppm"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",TVOC:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:o,graphDataAlarmPoint5:e,indicateAlarm5:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:i,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"motion_sensed"==e.sensedValueKey||"num_BTdev"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("motion_sensed"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Motion:"#e3e3e3",High:"grey","High-High":"red"}}}else if("tvoc_ppm"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Blth Dev.":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:o,graphDataAlarmPoint6:e,indicateAlarm6:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:i,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.fetChAlarmPoints=function(){return V(this,void 0,void 0,function(){var e,t,a=this;return w(this,function(n){switch(n.label){case 0:return e=[],t=this.state.alarmSensedPoints,[4,Object(d.k)(this.props.buildingName).then(function(t){if(t&&t.length>0)for(var a=0;a<t.length;a++){var n=t[a];Object(c.g)(n.point)&&Object(c.g)(n.pointLabel)&&Object(m.P)(Object(c.g)(n.point),Object(c.g)(n.pointLabel))}e=y(t)}).catch(function(e){return e})];case 1:return n.sent(),e.filter(function(e){return e.sensedValue&&Object(c.g)(e.monconDevice)==a.props.InsightName}).forEach(function(e){t.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),this.setState({alarmSensedPoints:t},function(){return a.changeAlarmStatus()}),[2]}})})},t.prototype._fetchData=function(){var e;return V(this,void 0,void 0,function(){var t,a,n,l,s,m,c,d,h,p,g,v,x,V,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K=this;return w(this,function(w){switch(w.label){case 0:return t=this.props,a=t.from,n=t.to,l=t.InsightName,s=t.buildingName,m=t.showAlarmPoints,c=this.state,d=c.grid,h=c.axis1,p=c.axis2,g=c.axis3,v=c.axis4,x=c.axis5,V=c.axis6,y=c.graphData,L=c.graphData2,b=c.graphData3,E=c.graphData4,H=c.graphData5,A=c.graphData6,N=c.lastUpdatedAt,l?(D=Object(),[4,Object(o.D)(l,s)]):[3,3];case 1:return D=w.sent(),this.setState({Moncon:D}),[4,Object(i.d)(D.topic,a,n,y.columns.length>1)];case 2:return P=w.sent(),_=["Humidity"],k=["Alt."],O=["CO2"],F=["TVOC"],j=["Gas Res"],C=["Illuminance"],R=["Motion"],G=["Blth Dev."],T=["Pressure"],M=["x"],(S=["Temp"]).push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(new Date(a)),P.length>0&&P.forEach(function(e){e&&(S.push(Object(r.a)(e.temp_celsius,D&&D.firmwareVersion?D.firmwareVersion:"",D.csbCallibration)),_.push(e.relhumidity_pct),k.push(e.altitude_m),O.push(e.equiCO2_ppm),F.push(e.tvoc_ppm),T.push(e.pressure_hPa),j.push(e.gasResistance_kOhm),C.push(e.illuminance_lux),R.push(e.motion_sensed),G.push(e.num_BTdev),M.push(new Date(e.timestamp)))}),N=P.length>0?null===(e=M[M.length-1])||void 0===e?void 0:e.toLocaleString():"No data",0===P.length&&(S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(new Date(n))),h.y.label="\xb0F / %",p.y.label="hPa",g.y.label="Lux",v.y.label="kOhm",x.y.label="PPM",V.y.label="",M.length>1&&(I=Object(u.a)(5,a,n),U="",I.length>1?(q=((new Date).getTime()-I[0].getTime())/1e3,U=(q/=3600)>24?"%m-%d %H:%M":q<.3?"%H:%M:%S":"%H:%M"):U="%H:%M:%S",d.x.lines=[],I.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(0)},g.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},V.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.values=[0,20,40,60,80,100],p.y.tick.values=[0,400,800,1200],g.y.tick.values=[0,40,80,120,160,200,240],v.y.tick.values=[0,600,1200,1800,2400,3e3],x.y.tick.values=[0,4e3,8e3,12e3,16e3],V.y.tick.values=[0,10,20,30,40,50],h.y.max=100,h.y.min=0,p.y.max=1100,p.y.min=0,g.y.max=200,g.y.min=0,v.y.max=3e3,v.y.min=0,x.y.max=16e3,x.y.min=0,V.y.max=50,V.y.min=0,h.x.tick.format=U,p.x.tick.format=U,g.x.tick.format=U,v.x.tick.format=U,x.x.tick.format=U,V.x.tick.format=U,h.x.tick.values=I,p.x.tick.values=I,g.x.tick.values=I,v.x.tick.values=I,x.x.tick.values=I,V.x.tick.values=I,y={x:"x",columns:[M,S,_]},L={x:"x",columns:[M,T]},b={x:"x",columns:[M,C]},E={x:"x",columns:[M,j]},H={x:"x",columns:[M,O,F]},A={x:"x",columns:[M,R,G]},this.props.loadNextInsight(),Object(f.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:d,axis1:h,axis2:p,axis3:g,axis4:v,axis5:x,axis6:V,graphData:y,graphData2:L,graphData3:b,graphData4:E,graphData5:H,graphData6:A,lastUpdatedAt:N,loading:!1},function(){m&&K.changeAlarmStatus(!0)})),[3,4];case 3:Object(f.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){m&&K.changeAlarmStatus(!0)}),w.label=4;case 4:return[2]}})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.Moncon,s=n.graphData,o=n.graphData2,i=n.graphData3,u=n.graphData4,m=n.graphData5,c=n.graphData6,d=n.axis1,h=n.grid,p=n.alarmSensedPoints,g=n.selectedAlarmPoint1,f=n.selectedAlarmPoint2,v=n.selectedAlarmPoint3,x=n.selectedAlarmPoint4,V=n.selectedAlarmPoint5,w=n.selectedAlarmPoint6,y=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var L=this.props.liveGraphRange;if(s.columns.length>1&&t){s.columns[0].push(t),s.columns[1].push(Object(r.a)(null===e||void 0===e?void 0:e.temp_celsius,l&&l.firmwareVersion?l.firmwareVersion:"",l.csbCallibration)),s.columns[2].push(null===e||void 0===e?void 0:e.relhumidity_pct),o.columns[1].push(null===e||void 0===e?void 0:e.pressure_hPa),i.columns[1].push(null===e||void 0===e?void 0:e.illuminance_lux),u.columns[1].push(null===e||void 0===e?void 0:e.gasResistance_kOhm),m.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.equiCO2_ppm)),m.columns[2].push(parseFloat(null===e||void 0===e?void 0:e.tvoc_ppm)),c.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.motion_sensed)),c.columns[2].push(parseFloat(null===e||void 0===e?void 0:e.num_BTdev)),(t.getTime()-s.columns[0][2].getTime())/6e4>L&&s.columns[0].splice(1,1),d.x.tick.values[0]<s.columns[0][1]&&(d.x.tick.values.splice(0,1),h.x.lines.splice(0,1)),d.x.tick.values[2]&&d.x.tick.values[1].getTime()&&d.x.tick.values[2].getTime()-d.x.tick.values[1].getTime()<t.getTime()-d.x.tick.values[d.x.tick.values.length-1]&&(t.setSeconds(0),L>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),d.x.tick.values.push(t),h.x.lines.push({value:t,class:"grid4"}));var b=null===t||void 0===t?void 0:t.toLocaleString();y?this.setState({grid:h,axis1:d,graphData:s,graphData2:o,graphData3:i,graphData4:u,graphData5:m,graphData6:c,lastUpdatedAt:b},function(){var e=p.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=g.sensedValue.length>1?g.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=p.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=f.sensedValue.length>1?f.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=p.filter(function(e){return"illuminance_lux"==e.sensedValue}),o=v.sensedValue.length>1?v.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(o);var i=p.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),r=x.sensedValue.length>1?x.sensedValue:(null===i||void 0===i?void 0:i.length)>0?i[i.length-1].sensedValue:"";a.selectAlarmPoint4(r);var u=p.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),m=V.sensedValue.length>1?V.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";a.selectAlarmPoint5(m);var c=p.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),d=w.sensedValue.length>1?w.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";a.selectAlarmPoint6(d)}):this.setState({grid:h,axis1:d,graphData:s,graphData2:o,graphData3:i,graphData4:u,graphData5:m,graphData6:c,lastUpdatedAt:b})}},t.prototype.render=function(){var e,t,a,l,o,i,r=this,u=this.state,m=u.Moncon,c=u.loading,d=u.graphData,h=u.graphData2,p=u.graphData3,g=u.graphData4,f=u.graphData5,v=u.graphData6,x=u.axis1,V=u.axis2,w=u.axis3,y=u.axis4,L=u.axis5,b=u.axis6,E=u.grid,H=u.lastUpdatedAt,A=u.equipmentsLabels,N=u.graphDataAlarmPoint1,D=u.graphDataAlarmPoint2,P=u.graphDataAlarmPoint3,S=u.graphDataAlarmPoint4,_=u.graphDataAlarmPoint5,k=u.graphDataAlarmPoint6,O=u.indicateAlarm1,F=u.indicateAlarm2,j=u.indicateAlarm3,C=u.indicateAlarm4,R=u.indicateAlarm5,G=u.indicateAlarm6,T=u.alarmSensedPoints,M=u.selectedAlarmPoint1,I=u.selectedAlarmPoint2,U=u.selectedAlarmPoint3,q=u.selectedAlarmPoint4,K=u.selectedAlarmPoint5,B=u.selectedAlarmPoint6,W=this.props,z=W.instance,Z=W.buildingName,Y=W.graphsList,$=W.space,J=W.floor,Q=W.zone,X=W.showAlarmPoints,ee=W.InsightName;return n.createElement(n.Fragment,null,Y.indexOf("Temp & Humidity")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(O&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:M.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},T.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),O&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Temp & Humidity"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(e=N.columns)||void 0===e?void 0:e.length)>1?N:d,size:{height:300},axis:x,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),Y.indexOf("Pressure")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(F&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:I.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},T.filter(function(e){return"pressure_hPa"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),F&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," "," Pressure"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(t=D.columns)||void 0===t?void 0:t.length)>1?D:h,size:{height:300},axis:V,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Illuminance")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(j&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:U.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},T.filter(function(e){return"illuminance_lux"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),j&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Illuminance"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(a=P.columns)||void 0===a?void 0:a.length)>1?P:p,size:{height:300},axis:w,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Gas Resistance")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(C&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:q.sensedValue,onChange:function(e){r.selectAlarmPoint4(e.target.value)}},T.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),C&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Gas Resistance"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(l=S.columns)||void 0===l?void 0:l.length)>1?S:g,size:{height:300},axis:y,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Air Particles")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(R&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:K.sensedValue,onChange:function(e){r.selectAlarmPoint5(e.target.value)}},T.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),R&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Air Particles"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(o=_.columns)||void 0===o?void 0:o.length)>1?_:f,size:{height:300},axis:L,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Other Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(G&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:B.sensedValue,onChange:function(e){r.selectAlarmPoint6(e.target.value)}},T.filter(function(e){return"num_BTdev"==e.sensedValue||"motion_sensed"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),G&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Other Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(i=k.columns)||void 0===i?void 0:i.length)>1?k:v,size:{height:300},axis:b,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=L},2759:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(686),r=a(765),u=a(20),m=a(120),c=a(726),d=(a.n(c),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),h=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},g=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return d(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(m.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(){},t.prototype.callLiveUpdate=function(e){var t,a=this.state,n=a.graphData,l=a.axis1,s=a.grid;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var o=this.props.liveGraphRange;if(n.columns.length>1&&t){n.columns[0].splice(1,1),n.columns[0].push(t),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.setpoint),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.roomtemp),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.fanspeed),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.horizontalvans),n.columns[5].splice(1,1),n.columns[5].push(null===e||void 0===e?void 0:e.usermode),n.columns[6].splice(1,1),n.columns[6].push(null===e||void 0===e?void 0:e.verticalvans),n.columns[7].splice(1,1),n.columns[7].push(null===e||void 0===e?void 0:e.wifiSignal),(t.getTime()-n.columns[0][2].getTime())/6e4>o&&n.columns[0].splice(1,1),l.x.tick.values[0]<n.columns[0][1]&&(l.x.tick.values.splice(0,1),s.x.lines.splice(0,1)),l.x.tick.values[2]&&l.x.tick.values[1].getTime()&&l.x.tick.values[2].getTime()-l.x.tick.values[1].getTime()<t.getTime()-l.x.tick.values[l.x.tick.values.length-1]&&(t.setSeconds(0),o>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),l.x.tick.values.push(t),s.x.lines.push({value:t,class:"grid4"}));var i=null===t||void 0===t?void 0:t.toLocaleString();this.setState({grid:s,axis1:l,graphData:n,lastUpdatedAt:i})}},t.prototype._fetchData=function(){var e;return h(this,void 0,void 0,function(){var t,a,n,l,s,u,c,d,h,g,f,v,x,V,w,y,L,b,E,H,A,N,D;return p(this,function(p){switch(p.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=this.state,c=u.grid,d=u.axis1,h=u.graphData,g=u.lastUpdatedAt,a?(f=Object(),[4,Object(o.D)(a,n)]):[3,3];case 1:return f=p.sent(),this.setState({Moncon:f}),[4,Object(i.e)(f.topic,l,s,h.columns.length>1)];case 2:return v=p.sent(),x=["setpoint"],w=["mode"],y=["fanspeed"],L=["horizontalvans"],b=["verticalvans"],E=["wifiSignal"],H=["x"],(V=["roomtemp"]).push(null),x.push(null),y.push(null),L.push(null),w.push(null),b.push(null),E.push(null),H.push(new Date(l)),v.length>0&&v.forEach(function(e){e&&(1!=isNaN(e.roomtemp)&&V.push(e.roomtemp),1!=isNaN(e.setpoint)&&x.push(e.setpoint),e.fanspeed?y.push(e.fanspeed):y.push("undefined"),e.horizontalvans?L.push(e.horizontalvans):L.push("undefined"),e.usermode?w.push(e.usermode):w.push("undefined"),e.verticalvans?b.push(e.verticalvans):b.push("undefined"),e.wifiSignal?E.push(e.wifiSignal):E.push("undefined"),H.push(new Date(e.timestamp)))}),g=v.length>0?null===(e=H[H.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",V.push(null),x.push(null),y.push(null),L.push(null),w.push(null),b.push(null),E.push(null),H.push(new Date(s)),h={x:"x",columns:[H,x,V,y,L,w,b,E]},d.y.label="\xb0F",A=Object(r.a)(5,l,s),N="",A.length>1?(D=((new Date).getTime()-A[0].getTime())/1e3,N=(D/=3600)>24?"%m-%d %H:%M":D<.3?"%H:%M:%S":"%H:%M"):N="%H:%M:%S",c.x.lines=[],A.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,20,40,60,80,100],d.y.max=100,d.y.min=0,d.x.tick.format=N,d.x.tick.values=A,this.props.loadNextInsight(),Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,graphData:h,loading:!1,lastUpdatedAt:g},function(){}),[3,4];case 3:Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){}),p.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,a=e.loading,l=e.graphData,o=e.axis1,i=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,m=this.props,c=m.instance,d=m.buildingName,h=m.space,p=m.floor,g=m.zone;return n.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},n.createElement("br",null),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{onClick:function(){window.location.hash=c+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},u.length>0&&u[0]," ",h),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",h," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",p," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",g," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",u.length>0&&u[0]," ",h," "))," ","Refrigerator 1",n.createElement("span",{className:"lastUpdated"},"Last: ",r)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:l,size:{height:300},axis:o,grid:i,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(n.Component);t.a=g},2760:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(693),r=a(765),u=a(20),m=a(120),c=a(726),d=(a.n(c),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),h=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},g=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[]},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return d(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){var e,t=this;return p(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(m.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(){},t.prototype.callLiveUpdate=function(e){var t,a=this.state,n=a.graphData,l=a.axis1,s=a.grid;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var o=this.props.liveGraphRange;if(n.columns.length>1&&t){n.columns[0].splice(1,1),n.columns[0].push(t),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.Normal_Frequency),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.Emergency_Frequency),(t.getTime()-n.columns[0][2].getTime())/6e4>o&&n.columns[0].splice(1,1),l.x.tick.values[0]<n.columns[0][1]&&(l.x.tick.values.splice(0,1),s.x.lines.splice(0,1)),l.x.tick.values[2]&&l.x.tick.values[1].getTime()&&l.x.tick.values[2].getTime()-l.x.tick.values[1].getTime()<t.getTime()-l.x.tick.values[l.x.tick.values.length-1]&&(t.setSeconds(0),o>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),l.x.tick.values.push(t),s.x.lines.push({value:t,class:"grid4"}));var i=null===t||void 0===t?void 0:t.toLocaleString();this.setState({grid:s,axis1:l,graphData:n,lastUpdatedAt:i})}},t.prototype._fetchData=function(){var e;return h(this,void 0,void 0,function(){var t,a,n,l,s,u,c,d,h,g,f,v,x,V,w,y,L,b;return p(this,function(p){switch(p.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=this.state,c=u.grid,d=u.axis1,h=u.graphData,g=u.lastUpdatedAt,a?(f=Object(),[4,Object(o.D)(a,n)]):[3,3];case 1:return f=p.sent(),this.setState({Moncon:f}),[4,Object(i.i)(f.topic,l,s,h.columns.length>1)];case 2:return v=p.sent(),V=["Emergency Freq"],w=["x"],(x=["Normal Freq"]).push(null),V.push(null),w.push(new Date(l)),v.length>0&&v.forEach(function(e){e&&(x.push(e.Normal_Frequency),V.push(e.Emergency_Frequency),w.push(new Date(e.timestamp)))}),g=v.length>0?null===(e=w[w.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",x.push(null),V.push(null),w.push(new Date(s)),h={x:"x",xFormat:"%Y-%m-%dT%H:%M:%S.%LZ",columns:[w,x,V]},d.y.label="Hz",y=Object(r.a)(5,l,s),L="",y.length>1?(b=((new Date).getTime()-y[0].getTime())/1e3,L=(b/=3600)>24?"%m-%d %H:%M":b<.3?"%H:%M:%S":"%H:%M"):L="%H:%M:%S",c.x.lines=[],y.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(2)},d.y.tick.values=[0,20,40,60,80],d.y.max=80,d.y.min=0,d.x.tick.format=L,d.x.tick.values=y,this.props.loadNextInsight(),Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,graphData:h,loading:!1,lastUpdatedAt:g},function(){}),[3,4];case 3:this.props.loadNextInsight(),Object(m.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){}),p.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.Moncon,a=e.loading,l=e.graphData,o=e.axis1,i=e.grid,r=e.lastUpdatedAt,u=e.equipmentsLabels,m=this.props,c=m.instance,d=m.buildingName,h=m.space,p=m.floor,g=m.zone;return n.createElement(n.Fragment,null,n.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},n.createElement("br",null),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard"},n.createElement("a",{onClick:function(){window.location.hash=c+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===t||void 0===t?void 0:t.deviceName)}},h),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",h," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",p," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",g," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===u||void 0===u?void 0:u.map(function(e,t){return e.rdfsLabel+(t<u.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===t||void 0===t?void 0:t.rdfsLabel," ")),n.createElement("span",{className:"lastUpdated"},"Last: ",r)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:l,size:{height:300},axis:o,grid:i,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})))},t}(n.Component);t.a=g},2761:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(693),r=a(765),u=a(20),m=a(695),c=a(12),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,i,r,g,f,v,x,y,L,b,E,H=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,o=t.selectedAlarmPoint4,i=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,g=this.props,f=g.buildingName,v=g.InsightName,x=g.showAlarmPoints,Object(h.a)(!0),x&&!e?[3,3]:(y=[],L=[],[4,Object(m.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(c.g)(a.point)&&Object(c.g)(a.pointLabel)&&Object(u.P)(Object(c.g)(a.point),Object(c.g)(a.pointLabel))}y=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),y.filter(function(e){return Object(c.g)(e.monconDevice)==H.props.InsightName}).forEach(function(e){L.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,f,!1,0,50,null,null,[v],null)];case 2:return b=V.sent(),E=new Date(a.columns[0][1]),b=b.filter(function(e){return new Date(e.timeofalarm)>E}),this.setState({alarmSensedPoints:L,deviceAlarms:b},function(){if((null===L||void 0===L?void 0:L.length)>0&&a.columns.length>1){var e=L.filter(function(e){return"GenVAB_Volts"==e.sensedValue||"GenVBC_Volts"==e.sensedValue||"GenVCA_Volts"==e.sensedValue||"GenVAN_Volts"==e.sensedValue||"GenVBN_Volts"==e.sensedValue||"GenVCN_Volts"==e.sensedValue||" BusVoltage_Volts"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";H.selectAlarmPoint1(t);var u=L.filter(function(e){return"GenIA_Amps"==e.sensedValue||"GenIB_Amps"==e.sensedValue||"GenIC_Amps"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";H.selectAlarmPoint2(m);var c=L.filter(function(e){return"GenKVA_A_KiloVA"==e.sensedValue||"GenKVA__B_KiloVA"==e.sensedValue||"GenKVA_C_KiloVA"==e.sensedValue||"GenKVA_Total_KiloVA"==e.sensedValue||"Gen_A_kW"==e.sensedValue||"Gen_B_kW"==e.sensedValue||"Gen_C_kW"==e.sensedValue||"Gen_Total_kW"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";H.selectAlarmPoint3(d);var h=L.filter(function(e){return"GenPFLagging"==e.sensedValue}),p=o.sensedValue.length>1?o.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";H.selectAlarmPoint4(p);var g=L.filter(function(e){return"ActiveSpeedSource"==e.sensedValue||"EngineSpeed_rpm"==e.sensedValue||"EngineLoad_pct"==e.sensedValue||"CoolantTemp_F"==e.sensedValue||"OilPressure_psi"==e.sensedValue||"BatteryVoltage_DeciVolt"==e.sensedValue||"FuelLevel"==e.sensedValue||"ECUCoolantLevel"==e.sensedValue||"CoolDownTimeRemaining_mins"==e.sensedValue}),f=i.sensedValue.length>1?i.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";H.selectAlarmPoint5(f);var v=L.filter(function(e){return"UnexpectedShutdown"==e.sensedValue||"GlobalAlarm"==e.sensedValue||"AutoRestartFailure"==e.sensedValue||"FuelLeakDetect"==e.sensedValue||"BatteryChargerFailure"==e.sensedValue||"TransferFail"==e.sensedValue||"LowCoolantLevel"==e.sensedValue||"ECUShutdown"==e.sensedValue||"EmergencyShutdown"==e.sensedValue||"Overcrank"==e.sensedValue||"LossofECUComms"==e.sensedValue||"GlobalSenderFail"==e.sensedValue||"LowFuelLevel"==e.sensedValue||"LowOilPressure"==e.sensedValue||"HighCoolantTemp"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";H.selectAlarmPoint6(x)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"GenVAB_Volts"==e.sensedValueKey||"GenVBC_Volts"==e.sensedValueKey||"GenVCA_Volts"==e.sensedValueKey||"GenVAN_Volts"==e.sensedValueKey||"GenVBN_Volts"==e.sensedValueKey||"GenVCN_Volts"==e.sensedValueKey||" BusVoltage_Volts"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("GenVAB_Volts"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VAB:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVBC_Volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VBC:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVCA_Volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VCA:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVAN_Volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VA:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVBN_Volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VB:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVCN_Volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VC:"#e3e3e3",High:"grey","High-High":"red"}}}else if("BusVoltage_Volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Bus Voltage":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:o,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"GenIA_Amps"==e.sensedValueKey||"GenIB_Amps"==e.sensedValueKey||"GenIC_Amps"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("GenIA_Amps"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IA":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenIB_Amps"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IB":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenIC_Amps"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IC":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:o,graphDataAlarmPoint2:e,indicateAlarm2:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:i,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"GenKVA_A_KiloVA"==e.sensedValueKey||"GenKVA__B_KiloVA"==e.sensedValueKey||"GenKVA_C_KiloVA"==e.sensedValueKey||"GenKVA_Total_KiloVA"==e.sensedValueKey||"Gen_A_kW"==e.sensedValueKey||"Gen_B_kW"==e.sensedValueKey||"Gen_C_kW"==e.sensedValueKey||"Gen_Total_kW"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("GenKVA_A_KiloVA"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA__B_KiloVA"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA_C_KiloVA"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA_Total_KiloVA"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA Tota":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_A_kW"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_B_kW"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_C_kW"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_Total_kW"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltC"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW Total":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:o,graphDataAlarmPoint3:e,indicateAlarm3:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:i,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"GenPFLagging"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("GenPFLagging"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen Power Factor":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:o,graphDataAlarmPoint4:e,indicateAlarm4:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:i,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"ActiveSpeedSource"==e.sensedValueKey||"EngineSpeed_rpm"==e.sensedValueKey||"EngineLoad_pct"==e.sensedValueKey||"CoolantTemp_F"==e.sensedValueKey||"OilPressure_psi"==e.sensedValueKey||"BatteryVoltage_DeciVolt"==e.sensedValueKey||"FuelLevel"==e.sensedValueKey||"ECUCoolantLevel"==e.sensedValueKey||"CoolDownTimeRemaining_mins"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("ActiveSpeedSource"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Act speed":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EngineSpeed_rpm"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Engine Speed":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EngineLoad_pct"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Engine Load":"#e3e3e3",High:"grey","High-High":"red"}}}else if("CoolantTemp_F"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Coolant Temp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("OilPressure_psi"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Oil Press":"#e3e3e3",High:"grey","High-High":"red"}}}else if("BatteryVoltage_DeciVolt"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Battery Volt":"#e3e3e3",High:"grey","High-High":"red"}}}else if("FuelLevel"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Fuel Level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("ECUCoolantLevel"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","ECU Coolant level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("CoolDownTimeRemaining_mins"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[9].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[9],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Cool Down Time Rem.":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:o,graphDataAlarmPoint5:e,indicateAlarm5:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:i,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"UnexpectedShutdown"==e.sensedValueKey||"GlobalAlarm"==e.sensedValueKey||"AutoRestartFailure"==e.sensedValueKey||"FuelLeakDetect"==e.sensedValueKey||"BatteryChargerFailure"==e.sensedValueKey||"TransferFail"==e.sensedValueKey||"LowCoolantLevel"==e.sensedValueKey||"ECUShutdown"==e.sensedValueKey||"EmergencyShutdown"==e.sensedValueKey||"Overcrank"==e.sensedValueKey||"LossofECUComms"==e.sensedValueKey||"GlobalSenderFail"==e.sensedValueKey||"LowFuelLevel"==e.sensedValueKey||"LowOilPressure"==e.sensedValueKey||"HighCoolantTemp"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("UnexpectedShutdown"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Unexp. Shutdown":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GlobalAlarm"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Global Alarm":"#e3e3e3",High:"grey","High-High":"red"}}}else if("AutoRestartFailure"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Auto Restart Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("FuelLeakDetect"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Fuel Leak Det.":"#e3e3e3",High:"grey","High-High":"red"}}}else if("BatteryChargerFailure"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Battery Chg. Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("TransferFail"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Transfer Fai":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowCoolantLevel"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Coolant level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("ECUShutdown"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","ECU Shutdown":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EmergencyShutdown"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[9].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[9],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Emerg. Shut":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Overcrank"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[10].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[10],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Overcrank:"#e3e3e3",High:"grey","High-High":"red"}}}else if("LossofECUComms"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[11].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[11],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Loss of ECU Comms":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GlobalSenderFail"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[12].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[12],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Global Sender Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowFuelLevel"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[13].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[13],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Fuel Level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowOilPressure"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[14].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[14],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Oil Press":"#e3e3e3",High:"grey","High-High":"red"}}}else if("HighCoolantTemp"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[15].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[15],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","High Coolant":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:o,graphDataAlarmPoint6:e,indicateAlarm6:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:i,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,o=n.graphData3,i=n.graphData4,r=n.graphData5,u=n.graphData6,m=n.axis1,c=n.grid,d=n.alarmSensedPoints,h=n.selectedAlarmPoint1,p=n.selectedAlarmPoint2,g=n.selectedAlarmPoint3,f=n.selectedAlarmPoint4,v=n.selectedAlarmPoint5,x=n.selectedAlarmPoint6,V=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var w=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.GenVAB_Volts),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.GenVBC_Volts),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.GenVCA_Volts),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.GenVAN_Volts),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.GenVBN_Volts),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.GenVCN_Volts),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.BusVoltage_Volts),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.GenIA_Amps),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.GenIB_Amps),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.GenIC_Amps),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.GenKVA_A_KiloVA),o.columns[2].splice(1,1),o.columns[2].push(null===e||void 0===e?void 0:e.GenKVA__B_KiloVA),o.columns[3].splice(1,1),o.columns[3].push(null===e||void 0===e?void 0:e.GenKVA_C_KiloVA),o.columns[4].splice(1,1),o.columns[4].push(null===e||void 0===e?void 0:e.GenKVA_Total_KiloVA),o.columns[5].splice(1,1),o.columns[5].push(null===e||void 0===e?void 0:e.Gen_A_kW),o.columns[6].splice(1,1),o.columns[6].push(null===e||void 0===e?void 0:e.Gen_B_kW),o.columns[7].splice(1,1),o.columns[7].push(null===e||void 0===e?void 0:e.Gen_C_kW),o.columns[8].splice(1,1),o.columns[8].push(null===e||void 0===e?void 0:e.Gen_Total_kW),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.GenPFLagging),r.columns[1].splice(1,1),r.columns[1].push(null===e||void 0===e?void 0:e.ActiveSpeedSource),r.columns[2].splice(1,1),r.columns[2].push(null===e||void 0===e?void 0:e.EngineSpeed_rpm),r.columns[3].splice(1,1),r.columns[3].push(null===e||void 0===e?void 0:e.EngineLoad_pct),r.columns[4].splice(1,1),r.columns[4].push(null===e||void 0===e?void 0:e.CoolantTemp_F),r.columns[5].splice(1,1),r.columns[5].push(null===e||void 0===e?void 0:e.OilPressure_psi),r.columns[6].splice(1,1),r.columns[6].push(null===e||void 0===e?void 0:e.BatteryVoltage_DeciVolt),r.columns[7].splice(1,1),r.columns[7].push(null===e||void 0===e?void 0:e.FuelLevel),r.columns[8].splice(1,1),r.columns[8].push(null===e||void 0===e?void 0:e.ECUCoolantLevel),r.columns[9].splice(1,1),r.columns[9].push(null===e||void 0===e?void 0:e.CoolDownTimeRemaining_mins),u.columns[1].splice(1,1),u.columns[1].push(null===e||void 0===e?void 0:e.UnexpectedShutdown),u.columns[2].splice(1,1),u.columns[2].push(null===e||void 0===e?void 0:e.GlobalAlarm),u.columns[3].splice(1,1),u.columns[3].push(null===e||void 0===e?void 0:e.AutoRestartFailure),u.columns[4].splice(1,1),u.columns[4].push(null===e||void 0===e?void 0:e.FuelLeakDetect),u.columns[5].splice(1,1),u.columns[5].push(null===e||void 0===e?void 0:e.BatteryChargerFailure),u.columns[6].splice(1,1),u.columns[6].push(null===e||void 0===e?void 0:e.TransferFail),u.columns[7].splice(1,1),u.columns[7].push(null===e||void 0===e?void 0:e.LowCoolantLevel),u.columns[8].splice(1,1),u.columns[8].push(null===e||void 0===e?void 0:e.ECUShutdown),u.columns[9].splice(1,1),u.columns[9].push(null===e||void 0===e?void 0:e.EmergencyShutdown),u.columns[10].splice(1,1),u.columns[10].push(null===e||void 0===e?void 0:e.Overcrank),u.columns[11].splice(1,1),u.columns[11].push(null===e||void 0===e?void 0:e.LossofECUComms),u.columns[12].splice(1,1),u.columns[12].push(null===e||void 0===e?void 0:e.GlobalSenderFail),u.columns[13].splice(1,1),u.columns[13].push(null===e||void 0===e?void 0:e.LowFuelLevel),u.columns[14].splice(1,1),u.columns[14].push(null===e||void 0===e?void 0:e.LowOilPressure),u.columns[15].splice(1,1),u.columns[15].push(null===e||void 0===e?void 0:e.HighCoolantTemp),(t.getTime()-l.columns[0][2].getTime())/6e4>w&&l.columns[0].splice(1,1),m.x.tick.values[0]<l.columns[0][1]&&(m.x.tick.values.splice(0,1),c.x.lines.splice(0,1)),m.x.tick.values[2]&&m.x.tick.values[1].getTime()&&m.x.tick.values[2].getTime()-m.x.tick.values[1].getTime()<t.getTime()-m.x.tick.values[m.x.tick.values.length-1]&&(t.setSeconds(0),w>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),m.x.tick.values.push(t),c.x.lines.push({value:t,class:"grid4"}));var y=null===t||void 0===t?void 0:t.toLocaleString();V?this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:o,graphData4:i,graphData5:r,graphData6:u,lastUpdatedAt:y},function(){var e=d.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=h.sensedValue.length>1?h.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=d.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=p.sensedValue.length>1?p.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=d.filter(function(e){return"illuminance_lux"==e.sensedValue}),o=g.sensedValue.length>1?g.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(o);var i=d.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),r=f.sensedValue.length>1?f.sensedValue:(null===i||void 0===i?void 0:i.length)>0?i[i.length-1].sensedValue:"";a.selectAlarmPoint4(r);var u=d.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),m=v.sensedValue.length>1?v.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";a.selectAlarmPoint5(m);var c=d.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),V=x.sensedValue.length>1?x.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";a.selectAlarmPoint6(V)}):this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:o,graphData4:i,graphData5:r,graphData6:u,lastUpdatedAt:y})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K,B,W,z,Z,Y,$,J,Q,X,ee,te,ae,ne,le,se,oe,ie,re,ue,me,ce,de,he,pe,ge,fe,ve,xe,Ve,we,ye,Le=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.axis4,v=m.axis5,x=m.axis6,w=m.graphData,y=m.graphData2,L=m.graphData3,b=m.graphData4,E=m.graphData5,H=m.graphData6,A=m.lastUpdatedAt,a?(N=Object(),[4,Object(o.D)(a,n)]):[3,3];case 1:return N=V.sent(),this.setState({Moncon:N}),[4,Object(i.l)(N.topic,l,s,w.columns.length>1)];case 2:return D=V.sent(),S=["VBC"],_=["VCA"],k=["VA"],O=["VB"],F=["VC"],j=["Bus Voltage"],C=["Gen IA"],R=["Gen IB"],G=["Gen IC"],T=["Gen kVA A"],M=["Gen kVA B"],I=["Gen kVA C"],U=["Gen kVA Total"],q=["Gen kW A"],K=["Gen kW B"],B=["Gen kW C"],W=["Gen kW Total"],z=["Gen Power Factor"],Z=["Act speed"],Y=["Engine Speed"],$=["Engine Load"],J=["Coolant Temp"],Q=["Oil Press"],X=["Battery Volt"],ee=["Fuel Level"],te=["ECU Coolant level"],ae=["Cool Down Time Rem."],ne=["Unexp. Shutdown"],le=["Global Alarm"],se=["Auto Restart Fail"],oe=["Fuel Leak Det."],ie=["Battery Chg. Fail"],re=["Transfer Fail"],ue=["Low Coolant level"],me=["ECU Shutdown"],ce=["Emerg. Shut"],de=["Overcrank"],he=["Loss of ECU Comms"],pe=["Global Sender Fail"],ge=["Low Fuel Level"],fe=["Low Oil Press"],ve=["High Coolant"],xe=["x"],(P=["VAB"]).push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(null),z.push(null),Z.push(null),Y.push(null),$.push(null),J.push(null),Q.push(null),X.push(null),ee.push(null),te.push(null),ae.push(null),ne.push(null),le.push(null),se.push(null),oe.push(null),ie.push(null),re.push(null),ue.push(null),me.push(null),ce.push(null),de.push(null),he.push(null),pe.push(null),ge.push(null),fe.push(null),ve.push(null),xe.push(new Date(l)),D.length>0&&D.forEach(function(e){e&&(P.push(e.GenVAB_Volts),S.push(e.GenVBC_Volts),_.push(e.GenVCA_Volts),k.push(e.GenVAN_Volts),O.push(e.GenVBN_Volts),F.push(e.GenVCN_Volts),j.push(e.BusVoltage_Volts),C.push(e.GenIA_Amps),R.push(e.GenIB_Amps),G.push(e.GenIC_Amps),T.push(e.GenKVA_A_KiloVA),M.push(e.GenKVA__B_KiloVA),I.push(e.GenKVA_C_KiloVA),U.push(e.GenKVA_Total_KiloVA),q.push(e.Gen_A_kW),K.push(e.Gen_B_kW),B.push(e.Gen_C_kW),W.push(e.Gen_Total_kW),z.push(e.GenPFLagging),Z.push(e.ActiveSpeedSource),Y.push(e.EngineSpeed_rpm),$.push(e.EngineLoad_pct),J.push(e.CoolantTemp_F),Q.push(e.OilPressure_psi),X.push(e.BatteryVoltage_DeciVolt),ee.push(e.FuelLevel),te.push(e.ECUCoolantLevel),ae.push(e.CoolDownTimeRemaining_mins),ne.push(e.UnexpectedShutdown),le.push(e.GlobalAlarm),se.push(e.AutoRestartFailure),oe.push(e.FuelLeakDetect),ie.push(e.BatteryChargerFailure),re.push(e.TransferFail),ue.push(e.LowCoolantLevel),me.push(e.ECUShutdown),ce.push(e.EmergencyShutdown),de.push(e.Overcrank),he.push(e.LossofECUComms),pe.push(e.GlobalSenderFail),ge.push(e.LowFuelLevel),fe.push(e.LowOilPressure),ve.push(e.HighCoolantTemp),xe.push(new Date(e.timestamp)))}),A=D.length>0?null===(e=xe[xe.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(null),z.push(null),Z.push(null),Y.push(null),$.push(null),J.push(null),Q.push(null),X.push(null),ee.push(null),te.push(null),ae.push(null),ne.push(null),le.push(null),se.push(null),oe.push(null),ie.push(null),re.push(null),ue.push(null),me.push(null),ce.push(null),de.push(null),he.push(null),pe.push(null),ge.push(null),fe.push(null),ve.push(null),xe.push(new Date(s)),w={x:"x",columns:[xe,P,S,_,k,O,F,j]},y={x:"x",columns:[xe,C,R,G]},L={x:"x",columns:[xe,T,M,I,U,q,K,B,W]},b={x:"x",columns:[xe,z]},E={x:"x",columns:[xe,Z,Y,$,J,Q,X,ee,te,ae]},H={x:"x",columns:[xe,ne,le,se,oe,ie,re,ue,me,ce,de,he,pe,ge,fe,ve]},d.y.label="Volts",h.y.label="Amps",p.y.label="Watts",f.y.label="",v.y.label="",x.y.label="",xe.length>1&&(Ve=Object(r.a)(5,l,s),we="",Ve.length>1?(ye=((new Date).getTime()-Ve[0].getTime())/1e3,we=(ye/=3600)>24?"%m-%d %H:%M":ye<.3?"%H:%M:%S":"%H:%M"):we="%H:%M:%S",c.x.lines=[],Ve.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},f.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},d.y.tick.values=[0,50,100,150,200,250],h.y.tick.values=[0,10,20,30,40,50],p.y.tick.values=[0,20,40,60,80,100],f.y.tick.values=[-1,0,1],v.y.tick.values=[0,40,80,120,160,160],x.y.tick.values=[-1,0,1],d.y.max=250,d.y.min=0,h.y.max=50,h.y.min=0,p.y.max=100,p.y.min=0,f.y.max=1,f.y.min=-1,v.y.max=160,v.y.min=0,x.y.max=1,x.y.min=-1,d.x.tick.format=we,h.x.tick.format=we,p.x.tick.format=we,f.x.tick.format=we,v.x.tick.format=we,x.x.tick.format=we,d.x.tick.values=Ve,h.x.tick.values=Ve,p.x.tick.values=Ve,f.x.tick.values=Ve,v.x.tick.values=Ve,x.x.tick.values=Ve,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,axis4:f,axis5:v,axis6:x,graphData:w,graphData2:y,graphData3:L,graphData4:b,graphData5:E,graphData6:H,lastUpdatedAt:A,loading:!1},function(){u&&Le.changeAlarmStatus(!0)})),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){u&&Le.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,a=t.Moncon,l=t.loading,o=t.graphData,i=t.graphData2,r=t.graphData3,u=t.graphData4,m=t.graphData5,c=t.graphData6,d=t.axis1,h=t.axis2,p=t.axis3,g=t.axis4,f=t.axis5,v=t.axis6,x=t.grid,V=t.lastUpdatedAt,w=t.equipmentsLabels,y=t.indicateAlarm1,L=t.indicateAlarm2,b=t.indicateAlarm3,E=t.indicateAlarm4,H=t.indicateAlarm5,A=t.indicateAlarm6,N=t.alarmSensedPoints,D=t.selectedAlarmPoint1,P=t.selectedAlarmPoint2,S=t.selectedAlarmPoint3,_=t.selectedAlarmPoint4,k=t.selectedAlarmPoint5,O=t.selectedAlarmPoint6,F=this.props,j=F.graphsList,C=F.instance,R=F.buildingName,G=F.space,T=F.floor,M=F.zone,I=F.showAlarmPoints,U=F.InsightName;return n.createElement(n.Fragment,null,j.indexOf("Voltages")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(y&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:D.sensedValue,onChange:function(t){e.selectAlarmPoint1(t.target.value)}},N.filter(function(e){return"GenVAB_Volts"==e.sensedValue||"GenVBC_Volts"==e.sensedValue||"GenVCA_Volts"==e.sensedValue||"GenVAN_Volts"==e.sensedValue||"GenVBN_Volts"==e.sensedValue||"GenVCN_Volts"==e.sensedValue||"BusVoltage_Volts"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),y&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Voltages"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:o,size:{height:300},axis:d,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),j.indexOf("Currents")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(L&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(t){e.selectAlarmPoint2(t.target.value)}},N.filter(function(e){return"GenIA_Amps"==e.sensedValue||"GenIB_Amps"==e.sensedValue||"GenIC_Amps"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),L&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Currents"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:i,size:{height:300},axis:h,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Powers")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(b&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(t){e.selectAlarmPoint3(t.target.value)}},N.filter(function(e){return"GenKVA_A_KiloVA"==e.sensedValue||"GenKVA__B_KiloVA"==e.sensedValue||"GenKVA_C_KiloVA"==e.sensedValue||"GenKVA_Total_KiloVA"==e.sensedValue||"Gen_A_kW"==e.sensedValue||"Gen_B_kW"==e.sensedValue||"Gen_C_kW"==e.sensedValue||"Gen_Total_kW"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),b&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Powers"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:r,size:{height:300},axis:p,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Power Factor")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(E&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:_.sensedValue,onChange:function(t){e.selectAlarmPoint4(t.target.value)}},N.filter(function(e){return"GenPFLagging"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),E&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Power Factor"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:u,size:{height:300},axis:g,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Other Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:k.sensedValue,onChange:function(t){e.selectAlarmPoint5(t.target.value)}},N.filter(function(e){return"ActiveSpeedSource"==e.sensedValue||"EngineSpeed_rpm"==e.sensedValue||"EngineLoad_pct"==e.sensedValue||"CoolantTemp_F"==e.sensedValue||"OilPressure_psi"==e.sensedValue||"BatteryVoltage_DeciVolt"==e.sensedValue||"FuelLevel"==e.sensedValue||"ECUCoolantLevel"==e.sensedValue||"CoolDownTimeRemaining_mins"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Other Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:m,size:{height:300},axis:f,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),j.indexOf("Binary Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&I?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),I&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:O.sensedValue,onChange:function(t){e.selectAlarmPoint6(t.target.value)}},N.filter(function(e){return"UnexpectedShutdown"==e.sensedValue||"GlobalAlarm"==e.sensedValue||"AutoRestartFailure"==e.sensedValue||"FuelLeakDetect"==e.sensedValue||"BatteryChargerFailure"==e.sensedValue||"TransferFail"==e.sensedValue||"LowCoolantLevel"==e.sensedValue||"ECUShutdown"==e.sensedValue||"EmergencyShutdown"==e.sensedValue||"Overcrank"==e.sensedValue||"LossofECUComms"==e.sensedValue||"GlobalSenderFail"==e.sensedValue||"LowFuelLevel"==e.sensedValue||"LowOilPressure"==e.sensedValue||"HighCoolantTemp"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),A&&n.createElement("a",{href:"#"+C+"/"+R+"/Alarms/OperationalAlarms/Device/"+U,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+C+"/"+R+"/Insights/Equipment/Graphs/Generator/"+(null===a||void 0===a?void 0:a.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",G),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Binary Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",G," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",T," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",M," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===a||void 0===a?void 0:a.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:c,size:{height:300},axis:v,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2762:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(693),r=a(765),u=a(20),m=a(12),c=a(695),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,i,r,g,f,v,x,y=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=this.props,o=s.buildingName,i=s.InsightName,r=s.showAlarmPoints,Object(h.a)(!0),r&&!e?[3,3]:(g=[],f=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(m.g)(a.point)&&Object(m.g)(a.pointLabel)&&Object(u.P)(Object(m.g)(a.point),Object(m.g)(a.pointLabel))}g=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),g.filter(function(e){return Object(m.g)(e.monconDevice)==y.props.InsightName}).forEach(function(e){f.push({sensedValue:Object(m.g)(e.sensedValue),maximumExtremeValue:Object(m.g)(e.maximumExtremeValue),maximumNormalValue:Object(m.g)(e.maximumNormalValue),minimumExtremeValue:Object(m.g)(e.minimumExtremeValue),minimumNormalValue:Object(m.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,o,!1,0,50,null,null,[i],null)];case 2:return v=V.sent(),x=new Date(a.columns[0][1]),v=v.filter(function(e){return new Date(e.timeofalarm)>x}),this.setState({alarmSensedPoints:f,deviceAlarms:v},function(){if((null===f||void 0===f?void 0:f.length)>0&&a.columns.length>1){var e=f.filter(function(e){return"register1"==e.sensedValue||"t3frontRefrigerator1"==e.sensedValue||"t4backRefrigerator1"==e.sensedValue||"t5evapfanRefrigerator1"==e.sensedValue||"t6comprinRefrigerator1"==e.sensedValue||"t7comproutRefrigerator1"==e.sensedValue||"t8probeRefrigerator1"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";y.selectAlarmPoint1(t);var s=f.filter(function(e){return"register1"==e.sensedValue||"t3frontRefrigerator2"==e.sensedValue||"t4backRefrigerator2"==e.sensedValue||"t5evapfanRefrigerator2"==e.sensedValue||"t6comprinRefrigerator2"==e.sensedValue||"t7comproutRefrigerator2"==e.sensedValue||"t8probeRefrigerator2"==e.sensedValue}),o=l.sensedValue.length>1?l.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";y.selectAlarmPoint2(o)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"register1"==e.sensedValueKey||"t3frontRefrigerator1"==e.sensedValueKey||"t4backRefrigerator1"==e.sensedValueKey||"t5evapfanRefrigerator1"==e.sensedValueKey||"t6comprinRefrigerator1"==e.sensedValueKey||"t7comproutRefrigerator1"==e.sensedValueKey||"t8probeRefrigerator1"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("register1"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Register:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t3frontRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Front:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t4backRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Back:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t5evapfanRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Evaporator Fan":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t6comprinRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor In":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t7comproutRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor Out":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t8probeRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Solid:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:o,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"register1"==e.sensedValueKey||"t3frontRefrigerator2"==e.sensedValueKey||"t4backRefrigerator2"==e.sensedValueKey||"t5evapfanRefrigerator2"==e.sensedValueKey||"t6comprinRefrigerator2"==e.sensedValueKey||"t7comproutRefrigerator2"==e.sensedValueKey||"t8probeRefrigerator2"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("register1"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Register:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t3frontRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Front:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t4backRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Back:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t5evapfanRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Evaporator Fan":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t6comprinRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor In":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Compressor Out"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t8probeRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Solid:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:o,graphDataAlarmPoint2:e,indicateAlarm2:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:i,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,o=n.axis1,i=n.grid,r=n.alarmSensedPoints,u=n.selectedAlarmPoint1,m=n.selectedAlarmPoint2,c=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var d=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.register1),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.t3frontRefrigerator1),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.t4backRefrigerator1),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.t5evapfanRefrigerator1),l.columns[5].splice(1,1),l.columns[5].push(null===e||void 0===e?void 0:e.t6comprinRefrigerator1),l.columns[6].splice(1,1),l.columns[6].push(null===e||void 0===e?void 0:e.t7comproutRefrigerator1),l.columns[7].splice(1,1),l.columns[7].push(null===e||void 0===e?void 0:e.t8probeRefrigerator1),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.register1),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.t3frontRefrigerator2),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.t4backRefrigerator2),s.columns[4].splice(1,1),s.columns[4].push(null===e||void 0===e?void 0:e.t5evapfanRefrigerator2),s.columns[5].splice(1,1),s.columns[5].push(null===e||void 0===e?void 0:e.t6comprinRefrigerator2),s.columns[6].splice(1,1),s.columns[6].push(null===e||void 0===e?void 0:e.t7comproutRefrigerator2),s.columns[7].splice(1,1),s.columns[7].push(null===e||void 0===e?void 0:e.t8probeRefrigerator2),(t.getTime()-l.columns[0][2].getTime())/6e4>d&&l.columns[0].splice(1,1),o.x.tick.values[0]<l.columns[0][1]&&(o.x.tick.values.splice(0,1),i.x.lines.splice(0,1)),o.x.tick.values[2]&&o.x.tick.values[1].getTime()&&o.x.tick.values[2].getTime()-o.x.tick.values[1].getTime()<t.getTime()-o.x.tick.values[o.x.tick.values.length-1]&&(t.setSeconds(0),d>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),o.x.tick.values.push(t),i.x.lines.push({value:t,class:"grid4"}));var h=null===t||void 0===t?void 0:t.toLocaleString();c?this.setState({grid:i,axis1:o,graphData:l,graphData2:s,lastUpdatedAt:h},function(){var e=r.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=u.sensedValue.length>1?u.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=r.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=m.sensedValue.length>1?m.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l)}):this.setState({grid:i,axis1:o,graphData:l,graphData2:s,lastUpdatedAt:h})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C,R,G=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.graphData,f=m.graphData2,v=m.lastUpdatedAt,a?(x=Object(),[4,Object(o.D)(a,n)]):[3,3];case 1:return x=V.sent(),this.setState({Moncon:x}),[4,Object(i.j)(x.topic,l,s,p.columns.length>1)];case 2:return w=V.sent(),L=["Front"],b=["Back"],E=["Evaporator Fan"],H=["Compressor In"],A=["Compressor Out"],N=["Solid"],D=["Front"],P=["Back"],S=["Evaporator Fan"],_=["Compressor In"],k=["Compressor Out"],O=["Solid"],F=["x"],(y=["Register"]).push(null),L.push(null),b.push(null),E.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(new Date(l)),w.length>0&&w.forEach(function(e){e&&(y.push(""+e.register1),L.push(""+e.t3frontRefrigerator1),b.push(""+e.t4backRefrigerator1),E.push(""+e.t5evapfanRefrigerator1),H.push(""+e.t6comprinRefrigerator1),A.push(""+e.t7comproutRefrigerator1),N.push(""+e.t8probeRefrigerator1),D.push(""+e.t3frontRefrigerator2),P.push(""+e.t4backRefrigerator2),S.push(""+e.t5evapfanRefrigerator2),_.push(""+e.t6comprinRefrigerator2),k.push(""+e.t7comproutRefrigerator2),O.push(""+e.t8probeRefrigerator2),F.push(new Date(e.timestamp)))}),v=w.length>0?null===(e=F[F.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",y.push(null),L.push(null),b.push(null),E.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(new Date(s)),p={x:"x",columns:[F,y,L,b,E,H,A,N]},f={x:"x",columns:[F,y,D,P,S,_,k,O]},d.y.label="\xb0F",h.y.label="\xb0F",F.length>1&&(j=Object(r.a)(5,l,s),C="",j.length>1?(R=((new Date).getTime()-j[0].getTime())/1e3,C=(R/=3600)>24?"%m-%d %H:%M":R<.3?"%H:%M:%S":"%H:%M"):C="%H:%M:%S",c.x.lines=[],j.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,20,40,60,80,100],h.y.tick.values=[0,20,40,60,80,100],d.y.max=100,d.y.min=0,h.y.max=100,h.y.min=0,d.x.tick.format=C,h.x.tick.format=C,d.x.tick.values=j,h.x.tick.values=j,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,graphData:p,graphData2:f,lastUpdatedAt:v,loading:!1},function(){u&&G.changeAlarmStatus(!0)})),[3,4];case 3:this.setState({loading:!1},function(){u&&G.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a=this,l=this.state,o=l.Moncon,i=l.loading,r=l.graphData,u=l.graphData2,m=l.axis1,c=l.axis2,d=l.grid,h=l.lastUpdatedAt,p=l.equipmentsLabels,g=l.graphDataAlarmPoint1,f=l.graphDataAlarmPoint2,v=l.indicateAlarm1,x=l.indicateAlarm2,V=l.alarmSensedPoints,w=l.selectedAlarmPoint1,y=l.selectedAlarmPoint2,L=this.props,b=L.graphsList,E=L.instance,H=L.buildingName,A=L.space,N=L.floor,D=L.zone,P=L.showAlarmPoints,S=L.InsightName;return n.createElement(n.Fragment,null,b.indexOf("Refrigerator 1")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(v&&P?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),P&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",V&&V.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:w.sensedValue,onChange:function(e){a.selectAlarmPoint1(e.target.value)}},V.filter(function(e){return"t3frontRefrigerator1"==e.sensedValue||"t4backRefrigerator1"==e.sensedValue||"t5evapfanRefrigerator1"==e.sensedValue||"t6comprinRefrigerator1"==e.sensedValue||"t7comproutRefrigerator1"==e.sensedValue||"t8probeRefrigerator1"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),v&&n.createElement("a",{href:"#"+E+"/"+H+"/Alarms/OperationalAlarms/Device/"+S,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{href:"#"+E+"/"+H+"/Insights/Equipment/Graphs/CBW406/"+(null===o||void 0===o?void 0:o.deviceName),target:"_blank",rel:"noreferrer noopener"},p.length>0&&p[0].rdfsLabel," ",A),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",A," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",N," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",D," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===p||void 0===p?void 0:p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===o||void 0===o?void 0:o.rdfsLabel," ")),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 1"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",A," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",N," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",D," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===o||void 0===o?void 0:o.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",h)),i?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:P&&(null===(e=g.columns)||void 0===e?void 0:e.length)>1?g:r,size:{height:300},axis:m,grid:d,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),b.indexOf("Refrigerator 2")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(x&&P?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),P&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",V&&V.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:y.sensedValue,onChange:function(e){a.selectAlarmPoint2(e.target.value)}},V.filter(function(e){return"register1"==e.sensedValue||"t3frontRefrigerator2"==e.sensedValue||"t4backRefrigerator2"==e.sensedValue||"t5evapfanRefrigerator2"==e.sensedValue||"t6comprinRefrigerator2"==e.sensedValue||"t7comproutRefrigerator2"==e.sensedValue||"t8probeRefrigerator2"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),x&&n.createElement("a",{href:"#"+E+"/"+H+"/Alarms/OperationalAlarms/Device/"+S,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+E+"/"+H+"/Insights/Equipment/Graphs/CBW406/"+(null===o||void 0===o?void 0:o.deviceName),target:"_blank",rel:"noreferrer noopener"},p.length>0&&p[0].rdfsLabel," ",A),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 2"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",A," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",N," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",D," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===o||void 0===o?void 0:o.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",h)),i?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:P&&(null===(t=f.columns)||void 0===t?void 0:t.length)>1?f:u,size:{height:300},axis:c,grid:d,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2763:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(693),r=a(765),u=a(20),m=a(12),c=a(695),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){var t;return x(this,void 0,void 0,function(){var a,n,l,s,o,i,r,g,f,v,x,y,L,b=this;return V(this,function(V){switch(V.label){case 0:return a=this.state,n=a.graphData,l=a.selectedAlarmPoint1,s=a.selectedAlarmPoint2,o=a.selectedAlarmPoint3,i=this.props,r=i.buildingName,g=i.InsightName,f=i.showAlarmPoints,Object(h.a)(!0),f&&!e?[3,3]:(v=[],x=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(m.g)(a.point)&&Object(m.g)(a.pointLabel)&&Object(u.P)(Object(m.g)(a.point),Object(m.g)(a.pointLabel))}v=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),v.filter(function(e){return Object(m.g)(e.monconDevice)==b.props.InsightName}).forEach(function(e){x.push({sensedValue:Object(m.g)(e.sensedValue),maximumExtremeValue:Object(m.g)(e.maximumExtremeValue),maximumNormalValue:Object(m.g)(e.maximumNormalValue),minimumExtremeValue:Object(m.g)(e.minimumExtremeValue),minimumNormalValue:Object(m.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,r,!1,0,50,null,null,[g],null)];case 2:return y=V.sent(),L=(null===(t=n.columns[0])||void 0===t?void 0:t.length)>1?new Date(n.columns[0][1]):null,y=y.filter(function(e){return new Date(e.timeofalarm)>L}),this.setState({alarmSensedPoints:x,deviceAlarms:y},function(){if((null===x||void 0===x?void 0:x.length)>0&&n.columns.length>1){var e=x.filter(function(e){return"a13comprcurrRefrigerator1"==e.sensedValue||"a14efmcurrRefrigerator1"==e.sensedValue||"a15prRefrigerator1"==e.sensedValue||"a16doorRefrigerator1"==e.sensedValue}),t=l.sensedValue.length>1?l.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";b.selectAlarmPoint1(t);var a=x.filter(function(e){return"a13comprcurrRefrigerator2"==e.sensedValue||"a14efmcurrRefrigerator2"==e.sensedValue||"a15prRefrigerator2"==e.sensedValue||"a16doorRefrigerator2"==e.sensedValue}),i=s.sensedValue.length>1?s.sensedValue:(null===a||void 0===a?void 0:a.length)>0?a[a.length-1].sensedValue:"";b.selectAlarmPoint2(i);var r=x.filter(function(e){return"poweranalogInput5"==e.sensedValue||"poweranalogInput6"==e.sensedValue||"poweranalogInput7"==e.sensedValue||"poweranalogInput8"==e.sensedValue}),u=o.sensedValue.length>1?o.sensedValue:(null===r||void 0===r?void 0:r.length)>0?r[r.length-1].sensedValue:"";b.selectAlarmPoint3(u)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"a13comprcurrRefrigerator1"==e.sensedValueKey||"a14efmcurrRefrigerator1"==e.sensedValueKey||"a15prRefrigerator1"==e.sensedValueKey||"a16doorRefrigerator1"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("a13comprcurrRefrigerator1"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Compressor:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a14efmcurrRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EFM:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a15prRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Pressure Sensor":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a16doorRefrigerator1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(+o.minimumExtremeValue/1e3),l.push(+o.minimumNormalValue/1e3),s.push(+o.maximumNormalValue/1e3),r.push(+o.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Door Contact":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:o,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"a13comprcurrRefrigerator2"==e.sensedValueKey||"a14efmcurrRefrigerator2"==e.sensedValueKey||"a15prRefrigerator2"==e.sensedValueKey||"a16doorRefrigerator2"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("a13comprcurrRefrigerator2"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Compressor:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a14efmcurrRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EFM:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a15prRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Pressure Sensor":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a16doorRefrigerator2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Door Contact":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:o,graphDataAlarmPoint2:e,indicateAlarm2:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:i,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"poweranalogInput5"==e.sensedValueKey||"poweranalogInput6"==e.sensedValueKey||"poweranalogInput7"==e.sensedValueKey||"poweranalogInput8"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("poweranalogInput5"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 5":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput6"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 6":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput7"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 7":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput8"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:o,graphDataAlarmPoint3:e,indicateAlarm3:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:i,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,o=n.axis1,i=n.grid,r=n.alarmSensedPoints,u=n.selectedAlarmPoint1,m=n.selectedAlarmPoint2,c=n.selectedAlarmPoint3,d=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var h=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.a13comprcurrRefrigerator1),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.a14efmcurrRefrigerator1),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.a15prRefrigerator1),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.a16doorRefrigerator1),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.a13comprcurrRefrigerator2),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.a14efmcurrRefrigerator2),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.a15prRefrigerator2),s.columns[4].splice(1,1),s.columns[4].push(null===e||void 0===e?void 0:e.a16doorRefrigerator2),(t.getTime()-l.columns[0][2].getTime())/6e4>h&&l.columns[0].splice(1,1),o.x.tick.values[0]<l.columns[0][1]&&(o.x.tick.values.splice(0,1),i.x.lines.splice(0,1)),o.x.tick.values[2]&&o.x.tick.values[1].getTime()&&o.x.tick.values[2].getTime()-o.x.tick.values[1].getTime()<t.getTime()-o.x.tick.values[o.x.tick.values.length-1]&&(t.setSeconds(0),h>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),o.x.tick.values.push(t),i.x.lines.push({value:t,class:"grid4"}));var p=null===t||void 0===t?void 0:t.toLocaleString();d?this.setState({grid:i,axis1:o,graphData:l,graphData2:s,lastUpdatedAt:p},function(){var e=r.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=u.sensedValue.length>1?u.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=r.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=m.sensedValue.length>1?m.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=r.filter(function(e){return"illuminance_lux"==e.sensedValue}),o=c.sensedValue.length>1?c.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(o)}):this.setState({grid:i,axis1:o,graphData:l,graphData2:s,lastUpdatedAt:p})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.graphData,v=m.graphData2,x=m.graphData3,w=m.lastUpdatedAt,a?(y=Object(),[4,Object(o.D)(a,n)]):[3,3];case 1:return y=V.sent(),this.setState({Moncon:y}),[4,Object(i.k)(y.topic,l,s,f.columns.length>1)];case 2:return L=V.sent(),E=["EFM"],H=["Pressure Sensor"],A=["Door Contact"],N=["Compressor"],D=["EFM"],P=["Pressure Sensor"],S=["Door Contact"],_=["Register"],k=["Serial Number"],O=["Refresh"],F=["Power Analog Input 5"],j=["Power Analog Input 6"],C=["Power Analog Input 7"],R=["Power Analog Input 8"],G=["Amalgamated Watts"],T=["x"],(b=["Compressor"]).push(null),E.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(new Date(l)),L.length>0&&L.forEach(function(e){e&&(e.a13comprcurrRefrigerator1&&b.push(""+e.a13comprcurrRefrigerator1),e.a14efmcurrRefrigerator1&&E.push(""+e.a14efmcurrRefrigerator1),e.a15prRefrigerator1&&H.push(""+e.a15prRefrigerator1),e.a16doorRefrigerator1&&A.push(""+e.a16doorRefrigerator1),e.a13comprcurrRefrigerator2&&N.push(""+e.a13comprcurrRefrigerator2),e.a14efmcurrRefrigerator2&&D.push(""+e.a14efmcurrRefrigerator2),e.a15prRefrigerator2&&P.push(""+e.a15prRefrigerator2),e.a16doorRefrigerator2&&S.push(""+e.a16doorRefrigerator2),e.register1&&_.push(""+e.register1),e.serialNumber&&k.push(""+e.serialNumber),e.minRecRefresh&&O.push(""+e.minRecRefresh),e.poweranalogInput5&&F.push(""+e.poweranalogInput5),e.poweranalogInput6&&j.push(""+e.poweranalogInput6),e.poweranalogInput7&&C.push(""+e.poweranalogInput7),e.poweranalogInput8&&R.push(""+e.poweranalogInput8),G.push(""+360*e.a13comprcurrRefrigerator1),T.push(new Date(e.timestamp)))}),w=L.length>0?null===(e=T[T.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",b.push(null),E.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(new Date(s)),(b.length>3||E.length>3||H.length>3||A.length>3)&&(f={x:"x",columns:[T,b,E,H,A]}),(N.length>3||D.length>3||P.length>3||S.length>3)&&(v={x:"x",columns:[T,N,D,P,S]}),(F.length>3||j.length>3||C.length>3||R.length>3)&&(x={x:"x",columns:[T,F,j,C,R]},p.y.label="kw"),d.y.label="Amps",h.y.label="Amps",T.length>1&&(M=Object(r.a)(5,l,s),I="",M.length>1?(U=((new Date).getTime()-M[0].getTime())/1e3,I=(U/=3600)>24?"%m-%d %H:%M":U<.3?"%H:%M:%S":"%H:%M"):I="%H:%M:%S",c.x.lines=[],M.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,5,10,15,20],h.y.tick.values=[0,5,10,15,20],p.y.tick.values=[0,20,40,60,80,100],d.y.max=20,d.y.min=0,h.y.max=20,h.y.min=0,p.y.max=100,p.y.min=0,d.x.tick.format=I,h.x.tick.format=I,p.x.tick.format=I,d.x.tick.values=M,h.x.tick.values=M,p.x.tick.values=M,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,graphData:f,graphData2:v,graphData3:x,lastUpdatedAt:w,loading:!1},function(){u&&q.changeAlarmStatus(!0)})),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){u&&q.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a,l,o,i,r=this,u=this.state,m=u.Moncon,c=u.loading,d=u.graphData,h=u.graphData2,p=u.graphData3,g=u.axis1,f=u.axis2,v=u.axis3,x=u.grid,V=u.lastUpdatedAt,w=u.equipmentsLabels,y=u.graphDataAlarmPoint1,L=u.graphDataAlarmPoint2,b=u.graphDataAlarmPoint3,E=u.indicateAlarm1,H=u.indicateAlarm2,A=u.indicateAlarm3,N=u.alarmSensedPoints,D=u.selectedAlarmPoint1,P=u.selectedAlarmPoint2,S=u.selectedAlarmPoint3,_=this.props,k=_.graphsList,O=_.instance,F=_.buildingName,j=_.space,C=_.floor,R=_.zone,G=_.showAlarmPoints,T=_.InsightName;return n.createElement(n.Fragment,null,k.indexOf("Refrigerator 1")>-1&&(null===(e=d.columns[1])||void 0===e?void 0:e.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(E&&G?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),G&&N.length>0&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:D.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},N.filter(function(e){return"a13comprcurrRefrigerator1"==e.sensedValue||"a14efmcurrRefrigerator1"==e.sensedValue||"a15prRefrigerator1"==e.sensedValue||"a16doorRefrigerator1"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),E&&n.createElement("a",{href:"#"+O+"/"+F+"/Alarms/OperationalAlarms/Device/"+T,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+O+"/"+F+"/Insights/Equipment/Graphs/CompressorControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",j),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 1"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",j," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",C," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",R," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:G&&(null===(t=y.columns)||void 0===t?void 0:t.length)>1?y:d,size:{height:300},axis:g,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),k.indexOf("Refrigerator 2")>-1&&(null===(a=h.columns[1])||void 0===a?void 0:a.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&G?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),G&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},N.filter(function(e){return"a13comprcurrRefrigerator2"==e.sensedValue||"a14efmcurrRefrigerator2"==e.sensedValue||"a15prRefrigerator2"==e.sensedValue||"a16doorRefrigerator2"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+O+"/"+F+"/Alarms/OperationalAlarms/Device/"+T,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{href:"#"+O+"/"+F+"/Insights/Equipment/Graphs/CompressorControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",j),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Refrigerator 2"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",j," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",C," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",R," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:G&&(null===(l=L.columns)||void 0===l?void 0:l.length)>1?L:h,size:{height:300},axis:f,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),k.indexOf("Refrigerator 1")>-1&&k.indexOf("Power Analog Inputs")>-1&&(null===(o=p.columns[1])||void 0===o?void 0:o.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&G?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),G&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",N&&N.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},N.filter(function(e){return"poweranalogInput5"==e.sensedValue||"poweranalogInput6"==e.sensedValue||"poweranalogInput7"==e.sensedValue||"poweranalogInput8"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),A&&n.createElement("a",{href:"#"+O+"/"+F+"/Alarms/OperationalAlarms/Device/"+T,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+O+"/"+F+"/Insights/Equipment/Graphs/CompressorControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},w.length>0&&w[0].rdfsLabel," ",j),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",j," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",C," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",R," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===w||void 0===w?void 0:w.map(function(e,t){return e.rdfsLabel+(t<w.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:G&&(null===(i=b.columns)||void 0===i?void 0:i.length)>1?b:p,size:{height:300},axis:v,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2764:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(686),r=a(12),u=a(765),m=a(20),c=a(695),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],alarmSensedPoints:[],graphDataAlarmPoint:{},selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm:!1},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(m.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){var t;return x(this,void 0,void 0,function(){var a,n,l,s,o,i,u,g,f,v,x,y=this;return V(this,function(V){switch(V.label){case 0:return a=this.state,n=a.graphData,l=a.selectedAlarmPoint,s=this.props,o=s.buildingName,i=s.InsightName,u=s.showAlarmPoints,Object(h.a)(!0),u&&!e?[3,3]:(g=[],f=[],[4,Object(c.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(r.g)(a.point)&&Object(r.g)(a.pointLabel)&&Object(m.P)(Object(r.g)(a.point),Object(r.g)(a.pointLabel))}g=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),g.filter(function(e){return Object(r.g)(e.monconDevice)==y.props.InsightName}).forEach(function(e){f.push({sensedValue:Object(r.g)(e.sensedValue),maximumExtremeValue:Object(r.g)(e.maximumExtremeValue),maximumNormalValue:Object(r.g)(e.maximumNormalValue),minimumExtremeValue:Object(r.g)(e.minimumExtremeValue),minimumNormalValue:Object(r.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,o,!1,0,50,null,null,[i],null)];case 2:return v=V.sent(),x=(null===(t=n.columns[0])||void 0===t?void 0:t.length)>1?new Date(n.columns[0][1]):null,v=v.filter(function(e){return new Date(e.timeofalarm)>x}),this.setState({alarmSensedPoints:f,deviceAlarms:v},function(){if((null===f||void 0===f?void 0:f.length)>0&&n.columns.length>1){var e=l.sensedValue.length>1?l.sensedValue:f[f.length-1].sensedValue;y.selectAlarmPoint(e)}}),[3,4];case 3:this.selectAlarmPoint(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("mAmps_relay1"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"grey",Low:"grey","Relay 1 Amp":"red",High:"grey","High-High":"grey"}}}else if("mAmps_relay2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 2 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mAmps_relay3"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mAmps_relay4"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 4 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay1"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 1 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay2"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 2 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay3"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("nominal_src_volts"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[12].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[12],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint:o,graphDataAlarmPoint:e,indicateAlarm:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},graphDataAlarmPoint:e,indicateAlarm:i,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.grid,o=n.alarmSensedPoints,r=n.axis1,u=n.selectedAlarmPoint,m=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var c=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.mAmps_relay1),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.mAmps_relay2),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.mAmps_relay3),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.mAmps_relay4),l.columns[5].splice(1,1),l.columns[5].push(null===e||void 0===e?void 0:e.power_Wt_relay1),l.columns[6].splice(1,1),l.columns[6].push(null===e||void 0===e?void 0:e.power_Wt_relay2),l.columns[7].splice(1,1),l.columns[7].push(null===e||void 0===e?void 0:e.power_Wt_relay3);var d=Object(i.a)(parseInt(null===e||void 0===e?void 0:e.v4relay_state));3==d.length?d="0"+d:2==d.length?d="00"+d:1==d.length&&(d="000"+d);var h=d[3],p=d[2],g=d[1],f=d[0];l.columns[8].splice(1,1),l.columns[8].push(h||"0"),l.columns[9].splice(1,1),l.columns[9].push(p||"0"),l.columns[10].splice(1,1),l.columns[10].push(g||"0"),l.columns[11].splice(1,1),l.columns[11].push(f||"0"),l.columns[12].splice(1,1),l.columns[12].push(null===e||void 0===e?void 0:e.nominal_src_volts),(t.getTime()-l.columns[0][2].getTime())/6e4>c&&l.columns[0].splice(1,1),r.x.tick.values[0]<l.columns[0][1]&&(r.x.tick.values.splice(0,1),s.x.lines.splice(0,1)),r.x.tick.values[2]&&r.x.tick.values[1].getTime()&&r.x.tick.values[2].getTime()-r.x.tick.values[1].getTime()<t.getTime()-r.x.tick.values[r.x.tick.values.length-1]&&(t.setSeconds(0),c>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),r.x.tick.values.push(t),s.x.lines.push({value:t,class:"grid4"}));var v=null===t||void 0===t?void 0:t.toLocaleString();m?this.setState({grid:s,axis1:r,graphData:l,lastUpdatedAt:v},function(){var e=o.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=u.sensedValue.length>1?u.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint(t)}):this.setState({grid:s,axis1:r,graphData:l,lastUpdatedAt:v})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,m,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K,B,W,z=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,m=t.showAlarmPoints,c=this.state,d=c.grid,h=c.axis1,p=c.graphData,f=c.lastUpdatedAt,a?(v=Object(),[4,Object(o.D)(a,n)]):[3,4];case 1:return v=V.sent(),this.setState({Moncon:v}),[4,Object(i.h)(v.topic,l,s,p.columns.length>1)];case 2:return x=V.sent(),[4,Object(i.z)(v.deviceName)];case 3:if(w=V.sent(),y=[],w[0]?(L=w[0],b=Object(r.g)(L.relayNames),y=b.split(",")):(y.push("Relay 1"),y.push("Relay 2"),y.push("Relay 3"),y.push("Relay 4")),E=[y[0]+" Amp"],H=[y[1]+" Amp"],A=[y[2]+" Amp"],N=[y[3]+" Amp"],D=["Nom. Source Volts"],P=[y[0]+" Watts"],S=[y[1]+" Watts"],_=[y[2]+" Watts"],k=[y[0]+" State"],O=[y[1]+" State"],F=[y[2]+" State"],j=[y[3]+" State"],C=["x"],E.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(new Date(l)),x.length>0)for(R=0;R<x.length;R++)(null===(G=x[R])||void 0===G?void 0:G.mAmps_relay1)&&(E.push(G.mAmps_relay1),H.push(G.mAmps_relay2),A.push(G.mAmps_relay3),N.push(G.mAmps_relay4),D.push(G.nominal_src_volts),P.push(G.power_Wt_relay1),S.push(G.power_Wt_relay2),_.push(G.power_Wt_relay3),T=Object(i.a)(parseInt(G.v4relay_state)),C.push(new Date(G.timestamp)),3==T.length?T="0"+T:2==T.length?T="00"+T:1==T.length&&(T="000"+T),M=T[3],I=T[2],U=T[1],q=T[0],k.push(M||"0"),O.push(I||"0"),F.push(U||"0"),j.push(q||"0"));return f=x.length>0?null===(e=C[C.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",E.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(new Date(s)),p={x:"x",columns:[C,E,H,A,N,P,S,_,k,O,F,j,D]},h.y.label="Amp, W, On/Off, Volts",K=Object(u.a)(5,l,s),B="",K.length>1?(W=((new Date).getTime()-K[0].getTime())/1e3,B=(W/=3600)>24?"%m-%d %H:%M":W<.3?"%H:%M:%S":"%H:%M"):B="%H:%M:%S",d.x.lines=[],K.forEach(function(e){d.x.lines.push({value:e,class:"grid4"})}),h.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.values=[0,50,100,150,200,250,300],h.y.max=300,h.y.min=0,h.x.tick.format=B,h.x.tick.values=K,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:d,axis1:h,graphData:p,loading:!1,lastUpdatedAt:f},function(){m&&z.changeAlarmStatus(!0)}),[3,5];case 4:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){m&&z.changeAlarmStatus(!0)}),V.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e,t=this,a=this.state,l=a.Moncon,o=a.loading,i=a.graphData,r=a.axis1,u=a.grid,m=a.lastUpdatedAt,c=a.equipmentsLabels,d=a.alarmSensedPoints,h=a.selectedAlarmPoint,p=a.graphDataAlarmPoint,g=a.indicateAlarm,f=this.props,v=f.instance,x=f.buildingName,V=f.space,w=f.floor,y=f.zone,L=f.showAlarmPoints,b=f.InsightName;return n.createElement("div",{className:"row col-md-12 device-graphs "+(g&&L?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),L&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",d&&d.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:h.sensedValue,onChange:function(e){t.selectAlarmPoint(e.target.value)}},d.map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),g&&n.createElement("a",{href:"#"+v+"/"+x+"/Alarms/OperationalAlarms/Device/"+b,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+v+"/"+x+"/Insights/Equipment/Graphs/RelayControl/"+(null===l||void 0===l?void 0:l.deviceName),target:"_blank",rel:"noreferrer noopener"},c.length>0&&c[0].rdfsLabel," ",V),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",V," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",w," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",y," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===c||void 0===c?void 0:c.map(function(e,t){return e.rdfsLabel+(t<c.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===l||void 0===l?void 0:l.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",m)),o?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:L&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:i,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(n.Component);t.a=y},2765:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(735)),s=a.n(l),o=a(680),i=a(693),r=a(765),u=a(20),m=a(695),c=a(12),d=a(766),h=a(118),p=a(710),g=a(120),f=a(726),v=(a.n(f),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),x=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},V=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},w=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],o=0,i=s.length;o<i;o++,l++)n[l]=s[o];return n},y=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:"",topic:""},loading:!0,lastUpdatedAt:"No Data",equipmentsLabels:[],deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""}},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return v(t,e),t.prototype.componentDidMount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){switch(a.label){case 0:return window.addEventListener("ShowAlarms",function(){return t.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),this._fetchData(),[4,Object(u.E)(this.props.equipment.split(","))];case 1:return(e=a.sent())[0]&&this.setState({equipmentsLabels:e}),[2]}})})},t.prototype.componentWillUnmount=function(){return x(this,void 0,void 0,function(){var e,t=this;return V(this,function(a){return e=this.state.Moncon.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),e&&Object(g.g)(e),[2]})})},t.prototype.changeAlarmStatus=function(e){return x(this,void 0,void 0,function(){var t,a,n,l,s,o,i,r,g,f,v,x,y,L,b,E,H=this;return V(this,function(V){switch(V.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,o=t.selectedAlarmPoint4,i=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,g=this.props,f=g.buildingName,v=g.InsightName,x=g.showAlarmPoints,Object(h.a)(!0),x&&!e?[3,3]:(y=[],L=[],[4,Object(m.k)(this.props.buildingName).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var a=e[t];Object(c.g)(a.point)&&Object(c.g)(a.pointLabel)&&Object(u.P)(Object(c.g)(a.point),Object(c.g)(a.pointLabel))}y=w(e)}).catch(function(e){return e})]);case 1:return V.sent(),y.filter(function(e){return Object(c.g)(e.monconDevice)==H.props.InsightName}).forEach(function(e){L.push({sensedValue:Object(c.g)(e.sensedValue),maximumExtremeValue:Object(c.g)(e.maximumExtremeValue),maximumNormalValue:Object(c.g)(e.maximumNormalValue),minimumExtremeValue:Object(c.g)(e.minimumExtremeValue),minimumNormalValue:Object(c.g)(e.minimumNormalValue)})}),[4,Object(d.d)(p.a.OperationalAlarm,f,!1,0,50,null,null,[v],null)];case 2:return b=V.sent(),E=new Date(a.columns[0][1]),b=b.filter(function(e){return new Date(e.timeofalarm)>E}),this.setState({alarmSensedPoints:L,deviceAlarms:b},function(){if((null===L||void 0===L?void 0:L.length)>0&&a.columns.length>1){var e=L.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";H.selectAlarmPoint1(t);var u=L.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";H.selectAlarmPoint2(m);var c=L.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";H.selectAlarmPoint3(d);var h=L.filter(function(e){return"Freq"==e.sensedValue}),p=o.sensedValue.length>1?o.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";H.selectAlarmPoint4(p);var g=L.filter(function(e){return"EnergySumNR"==e.sensedValue}),f=i.sensedValue.length>1?i.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";H.selectAlarmPoint5(f);var v=L.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";H.selectAlarmPoint6(x)}}),[3,4];case 3:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),V.label=4;case 4:return Object(h.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"PowerA"==e.sensedValueKey||"PowerB"==e.sensedValueKey||"PowerB"==e.sensedValueKey||"PowerC"==e.sensedValueKey||"PowerSum"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("PowerA"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerB"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerC"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerSum"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",PowerSum:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:o,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"VoltAB"==e.sensedValueKey||"VoltAC"==e.sensedValueKey||"VoltAB"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("VoltAB"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts AB":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltBC"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts BC":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltAC"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts AC":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:o,graphDataAlarmPoint2:e,indicateAlarm2:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:i,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"VoltA"==e.sensedValueKey||"VoltB"==e.sensedValueKey||"VoltC"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("VoltA"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltB"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltC"==o.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts C":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:o,graphDataAlarmPoint3:e,indicateAlarm3:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:i,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"Freq"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("Freq"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Freq:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:o,graphDataAlarmPoint4:e,indicateAlarm4:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:i,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"EnergySumNR"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("EnergySumNR"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EnergySumNR:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:o,graphDataAlarmPoint5:e,indicateAlarm5:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:i,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,o=l.find(function(t){return t.sensedValue===e}),i=s.length>0&&s.findIndex(function(e){return"EnergyPosSumNR"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(o){if("EnergyPosSumNR"==o.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(o.minimumExtremeValue),l.push(o.minimumNormalValue),s.push(o.maximumNormalValue),r.push(o.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EnergyPosSumNR:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:o,graphDataAlarmPoint6:e,indicateAlarm6:i,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:i,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,o=n.graphData3,i=n.graphData4,r=n.graphData5,u=n.graphData6,m=n.axis1,c=n.grid,d=n.alarmSensedPoints,h=n.selectedAlarmPoint1,p=n.selectedAlarmPoint2,g=n.selectedAlarmPoint3,f=n.selectedAlarmPoint4,v=n.selectedAlarmPoint5,x=n.selectedAlarmPoint6,V=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var w=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.PowerA),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.PowerB),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.PowerC),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.PowerSum),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.VoltAB),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.VoltAC),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.VoltBC),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.VoltA),o.columns[2].splice(1,1),o.columns[2].push(null===e||void 0===e?void 0:e.VoltB),o.columns[3].splice(1,1),o.columns[3].push(null===e||void 0===e?void 0:e.VoltC),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.Freq),r.columns[1].splice(1,1),r.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.EnergySumNR)/1e3),u.columns[1].splice(1,1),u.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.EnergyPosSumNR)/1e3),(t.getTime()-l.columns[0][2].getTime())/6e4>w&&l.columns[0].splice(1,1),m.x.tick.values[0]<l.columns[0][1]&&(m.x.tick.values.splice(0,1),c.x.lines.splice(0,1)),m.x.tick.values[2]&&m.x.tick.values[1].getTime()&&m.x.tick.values[2].getTime()-m.x.tick.values[1].getTime()<t.getTime()-m.x.tick.values[m.x.tick.values.length-1]&&(t.setSeconds(0),w>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),m.x.tick.values.push(t),c.x.lines.push({value:t,class:"grid4"}));var y=null===t||void 0===t?void 0:t.toLocaleString();V?this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:o,graphData4:i,graphData5:r,graphData6:u,lastUpdatedAt:y},function(){var e=d.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}),t=h.sensedValue.length>1?h.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=d.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}),l=p.sensedValue.length>1?p.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=d.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}),o=g.sensedValue.length>1?g.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(o);var i=d.filter(function(e){return"Freq"==e.sensedValue}),r=f.sensedValue.length>1?f.sensedValue:(null===i||void 0===i?void 0:i.length)>0?i[i.length-1].sensedValue:"";a.selectAlarmPoint4(r);var u=d.filter(function(e){return"EnergySumNR"==e.sensedValue}),m=v.sensedValue.length>1?v.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";a.selectAlarmPoint5(m);var c=d.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}),V=x.sensedValue.length>1?x.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";a.selectAlarmPoint6(V)}):this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:o,graphData4:i,graphData5:r,graphData6:u,lastUpdatedAt:y})}},t.prototype._fetchData=function(){var e;return x(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,d,h,p,f,v,x,w,y,L,b,E,H,A,N,D,P,S,_,k,O,F,j,C,R,G,T,M,I,U,q,K,B,W,z,Z,Y,$=this;return V(this,function(V){switch(V.label){case 0:return t=this.props,a=t.InsightName,n=t.buildingName,l=t.from,s=t.to,u=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,h=m.axis2,p=m.axis3,f=m.axis4,v=m.axis5,x=m.axis6,w=m.graphData,y=m.graphData2,L=m.graphData3,b=m.graphData4,E=m.graphData5,H=m.graphData6,A=m.lastUpdatedAt,a?(N=Object(),[4,Object(o.D)(a,n)]):[3,3];case 1:return N=V.sent(),this.setState({Moncon:N}),D=N.topic.split(","),[4,Object(i.m)(D[0],l,s,w.columns.length>1)];case 2:return P=V.sent(),_=["EnergyPOSSUM"],k=["EnergySumNR"],O=["EnergyPosSumNR"],F=["PowerSum"],j=["Power A"],C=["Power B"],R=["Power C"],G=["Volts A"],T=["Volts B"],M=["Volts C"],I=["VoltsAvgLL"],U=["Volts AB"],q=["Volts AC"],K=["Volts BC"],B=["Freq"],W=["x"],(S=["EnerygySum"]).push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(new Date(l)),P.length>0&&P.forEach(function(e){e&&(S.push(e.EnergySum),_.push(e.EnergyPosSum),k.push(+e.EnergySumNR/1e3),O.push(+e.EnergyPosSumNR/1e3),F.push(e.PowerSum),j.push(e.PowerA),C.push(e.PowerB),R.push(e.PowerC),G.push(e.VoltA),T.push(e.VoltB),M.push(e.VoltC),I.push(e.VoltAvgLL),U.push(e.VoltAB),q.push(e.VoltAC),K.push(e.VoltBC),B.push(e.Freq),W.push(new Date(e.timestamp)))}),A=P.length>0?null===(e=W[W.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",S.push(null),_.push(null),k.push(null),O.push(null),F.push(null),j.push(null),C.push(null),R.push(null),G.push(null),T.push(null),M.push(null),I.push(null),U.push(null),q.push(null),K.push(null),B.push(null),W.push(new Date(s)),w={x:"x",columns:[W,j,C,R,F]},y={x:"x",columns:[W,U,K,q]},L={x:"x",columns:[W,G,T,M]},b={x:"x",columns:[W,B]},E={x:"x",columns:[W,k]},H={x:"x",columns:[W,O]},d.y.label="Watts",h.y.label="Volts",p.y.label="Volts",f.y.label="Hz",v.y.label="MWh",x.y.label="MWh",z=Object(r.a)(5,l,s),Z="",z.length>1?(Y=((new Date).getTime()-z[0].getTime())/1e3,Z=(Y/=3600)>24?"%m-%d %H:%M":Y<.3?"%H:%M:%S":"%H:%M"):Z="%H:%M:%S",c.x.lines=[],z.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(0)},p.y.tick.format=function(e){return parseFloat(e).toFixed(0)},f.y.tick.format=function(e){return parseFloat(e).toFixed(1)},v.y.tick.format=function(e){return parseFloat(e).toFixed(1)},x.y.tick.format=function(e){return parseFloat(e).toFixed(1)},d.y.tick.values=[0,1e4,2e4,3e4,4e4],h.y.tick.values=[0,50,100,150,200,250],p.y.tick.values=[0,50,100,150],f.y.tick.values=[0,20,40,60,80],v.y.tick.values=[0,40,80,120,160],x.y.tick.values=[0,40,80,120,160],d.y.max=4e4,d.y.min=0,h.y.max=250,h.y.min=0,p.y.max=150,p.y.min=0,f.y.max=80,f.y.min=0,v.y.max=160,v.y.min=0,x.y.max=160,x.y.min=0,d.x.tick.format=Z,h.x.tick.format=Z,p.x.tick.format=Z,f.x.tick.format=Z,v.x.tick.format=Z,x.x.tick.format=Z,d.x.tick.values=z,h.x.tick.values=z,p.x.tick.values=z,f.x.tick.values=z,v.x.tick.values=z,x.x.tick.vawlues=z,this.props.loadNextInsight(),Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:h,axis3:p,axis4:f,axis5:v,axis6:x,graphData:w,graphData2:y,graphData3:L,graphData4:b,graphData5:E,graphData6:H,lastUpdatedAt:A,loading:!1},function(){u&&$.changeAlarmStatus(!0)}),[3,4];case 3:Object(g.h)(this.state.Moncon.topic,this.callLiveUpdate),this.setState({loading:!1},function(){u&&$.changeAlarmStatus(!0)}),V.label=4;case 4:return[2]}})})},t.prototype.render=function(){var e,t,a,l,o,i,r=this,u=this.state,m=u.Moncon,c=u.loading,d=u.graphData,h=u.graphData2,p=u.graphData3,g=u.graphData4,f=u.graphData5,v=u.graphData6,x=u.axis1,V=u.axis2,w=u.axis3,y=u.axis4,L=u.axis5,b=u.axis6,E=u.grid,H=u.lastUpdatedAt,A=u.equipmentsLabels,N=u.graphDataAlarmPoint1,D=u.graphDataAlarmPoint2,P=u.graphDataAlarmPoint3,S=u.graphDataAlarmPoint4,_=u.graphDataAlarmPoint5,k=u.graphDataAlarmPoint6,O=u.indicateAlarm1,F=u.indicateAlarm2,j=u.indicateAlarm3,C=u.indicateAlarm4,R=u.indicateAlarm5,G=u.indicateAlarm6,T=u.alarmSensedPoints,M=u.selectedAlarmPoint1,I=u.selectedAlarmPoint2,U=u.selectedAlarmPoint3,q=u.selectedAlarmPoint4,K=u.selectedAlarmPoint5,B=u.selectedAlarmPoint6,W=this.props,z=W.graphsList,Z=W.instance,Y=W.buildingName,$=W.space,J=W.floor,Q=W.zone,X=W.showAlarmPoints,ee=W.InsightName;return n.createElement(n.Fragment,null,z.indexOf("Power")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(O&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:M.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},T.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),O&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Power"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(e=N.columns)||void 0===e?void 0:e.length)>1?N:d,size:{height:300},axis:x,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),z.indexOf("Phase Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(F&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:I.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},T.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),F&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Phase Voltage"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(t=D.columns)||void 0===t?void 0:t.length)>1?D:h,size:{height:300},axis:V,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(j&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:U.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},T.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),j&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," "))," ","Voltage",n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(a=P.columns)||void 0===a?void 0:a.length)>1?P:p,size:{height:300},axis:w,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Frequency")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(C&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:q.sensedValue,onChange:function(e){r.selectAlarmPoint4(e.target.value)}},T.filter(function(e){return"Freq"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),C&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Frequency"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(l=S.columns)||void 0===l?void 0:l.length)>1?S:g,size:{height:300},axis:y,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Energy Sum Resettable")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(R&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:K.sensedValue,onChange:function(e){r.selectAlarmPoint5(e.target.value)}},T.filter(function(e){return"EnergySumNR"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),R&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Energy Sum Resettable"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(o=_.columns)||void 0===o?void 0:o.length)>1?_:f,size:{height:300},axis:L,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Positive Energy Sum Non-resettable")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(G&&X?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),X&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:B.sensedValue,onChange:function(e){r.selectAlarmPoint6(e.target.value)}},T.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),G&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+ee,target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+(null===m||void 0===m?void 0:m.deviceName),target:"_blank",rel:"noreferrer noopener"},A.length>0&&A[0].rdfsLabel," ",$),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Positive Energy Sum Non-resettable"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",$," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",J," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Q," "),n.createElement("br",null),n.createElement("span",null,"Equipments: ",null===A||void 0===A?void 0:A.map(function(e,t){return e.rdfsLabel+(t<A.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"RDFS Label: ",null===m||void 0===m?void 0:m.rdfsLabel," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:X&&(null===(i=k.columns)||void 0===i?void 0:i.length)>1?k:v,size:{height:300},axis:b,grid:E,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=y},2766:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(714)),s=a(954),o=a(735),i=a.n(o),r=a(726),u=(a.n(r),a(693)),m=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function o(e){try{r(n.next(e))}catch(e){s(e)}}function i(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(o,i)}r((n=n.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var a,n,l,s,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){o.label=s[1];break}if(6===s[0]&&o.label<l[1]){o.label=l[1],l=s;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(s);break}l[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},h=function(e){function t(t){var a=e.call(this,t)||this;return a.state={asisData:[],seasonList:[],graphData1:{x:"Date",columns:[],type:"bar"},grid1:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{count:30,format:"%m-%d"}},y:{label:"kWh",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},graphData2:{x:"Date",columns:[],type:"bar"},grid2:{x:{lines:[{}]},y:{show:!0}},axis2:{x:{type:"timeseries",tick:{count:30,format:"%m-%d"}},y:{label:"kWh",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}},y2:{show:!0,label:"$",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,selectedSeason:""},a._fetchData=a._fetchData.bind(a),a}return m(t,e),t.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){return d(this,function(e){return this._fetchData(),[2]})})},t.prototype.fetchVeifyDetail=function(e){return c(this,void 0,void 0,function(){return d(this,function(e){return[2]})})},t.prototype._fetchData=function(){return c(this,void 0,void 0,function(){var e,t,a=this;return d(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,t=this.props.projectName,[4,Object(l.o)(e,"",t).then(function(e){return c(a,void 0,void 0,function(){var t,a,n,o,i,r,u,m,c,h,p,g,f,v,x=this;return d(this,function(d){switch(d.label){case 0:return e&&e[0]&&e[0].ontology?(t=[],0,0,0,0,a=[],n=e[0],[4,Object(l.l)(n.ontology)]):[3,7];case 1:if(!((o=d.sent())&&o.length>0))return[3,7];for((t=o.sort(function(e,t){return e.seasonSequence>t.seasonSequence?1:t.seasonSequence>e.seasonSequence?-1:0})).map(function(e){var t=e.analysisName+": "+(e.seasonType&&"both"==e.seasonType.toLocaleLowerCase().trim()?e.seasonType+": "+("cooling"==e.selectedAnalysis?"Cooling":"Heating"):e.seasonType);a.push({label:t,value:e.ontology})}),i=0;i<t.length;i++)r=t[i],r.totalConsumedEnergyASIS,r.totalConsumedEnergyECM,r.totalConsumedEnergyCostASIS,r.totalConsumedEnergyCostECM;return 0==n.measureAnalysis.length?n.measureAnalysis=[{staticSeasonName:"Summer",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value},{staticSeasonName:"Fall",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value},{staticSeasonName:"Winter",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value},{staticSeasonName:"Spring",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value}]:n.measureAnalysis.length,u=[],m=[],t&&t.length>0?(c=[],h=[],(p=t.sort(function(e,t){return new Date(e.asisStartDate)>new Date(t.asisStartDate)?1:new Date(t.asisStartDate)>new Date(e.asisStartDate)?-1:0}))&&p.length>0?(g=p[0],[4,Object(l.k)(g.importDataASISOntology).then(function(e){u=e?e[0].fileData:[]})]):[3,6]):[3,7];case 2:return d.sent(),[4,Object(l.k)(g.importDataECMOntology).then(function(e){m=e?e[0].fileData:[]})];case 3:return d.sent(),[4,Object(s.c)(u,new Date(g.asisStartDate),new Date(g.asisEndDate),g.noaaStation.value,parseFloat(g.basepointCD),parseFloat(g.basepointHD),g.isMeasureFile)];case 4:return f=d.sent(),[4,Object(s.c)(m,new Date(g.ecmStartDate),new Date(g.ecmEndDate),g.noaaStation.value,parseFloat(g.basepointCD),parseFloat(g.basepointHD),g.isMeasureFile)];case 5:v=d.sent(),c.push.apply(c,f),h.push.apply(h,v),d.label=6;case 6:this.setState({seasonList:t,asisData:u},function(){x.energyConsumptionGraph()}),d.label=7;case 7:return[2]}})})}).catch(function(e){console.log(e)})];case 1:return n.sent(),[2]}})})},t.prototype.energyConsumptionGraph=function(){return c(this,void 0,void 0,function(){var e,t,a,n,l,s,o,i,r,m,c,h,p,g,f,v,x,V,w,y,L,b,E,H;return d(this,function(d){switch(d.label){case 0:e=this.state.asisData,t=this.state,a=t.graphData1,n=t.axis1,l=t.grid1,s=t.graphData2,o=t.axis2,i=t.grid2,r=new Date,m=new Date,r.setMonth(r.getMonth()-1),r.setHours(0,0,0,0),c=["ECM Energy Consumption (Metered)"],h=["Date"],p=["Asis Consumption (Projected)"],g=["Energy Saving"],f=["Energy Savings $ at 10.42 cents per unit"],v=["Tons CO2 emission reduction at 0.000709 tons per unit"],x=new Date(r),d.label=1;case 1:return x<=m?((V=new Date(x)).setHours(23,59,59,0),[4,Object(u.m)("michaels/5_125/wn_basicreg1",x,V,!1)]):[3,4];case 2:w=d.sent(),y=w[0],L=w[w.length-1],y&&L?c.push(""+(L.EnergyPosSum-y.EnergyPosSum)):c.push("0"),h.push(new Date(x)),d.label=3;case 3:return x.setDate(x.getDate()+1),[3,1];case 4:for(b=function(t){var a=new Date(h[t]),n=0;e.filter(function(e){if(+e.Date.split("/")[1]==a.getDate())return e}).forEach(function(e){n+=+e.ValueSum}),p.push(n),l.x.lines.push({value:a,class:"grid4"}),i.x.lines.push({value:a,class:"grid4"})},E=1;E<h.length-1;E++)b(E);for(E=1;E<p.length-1;E++)+p[E]&&+c[E]?(H=+p[E]-+c[E],g.push(H),f.push(.01042*H),v.push(709e-6*H)):(g.push(0),f.push(0));return a={x:"Date",columns:[h,c,p],type:"bar"},s={x:"Date",columns:[h,g,f],groups:[["Energy Saving"]],axes:{"Energy Savings $ at 10.42 cents per unit":"y"},type:"bar",types:{"Energy Savings $ at 10.42 cents per unit":"line"}},n.y.label="KwH",o.y.tick.values=[-2e3,-1e3,0,1e3,2e3],o.y.tick.max=2e3,o.y.tick.min=-2e3,o.y2.tick.values=[-40,-20,0,20,40],o.y2.tick.max=40,o.y2.tick.min=-40,this.setState({loading:!1,graphData1:a,axis1:n,grid1:l,graphData2:s,grid2:i}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,a=e.graphData1,l=e.grid1,s=e.axis1,o=e.graphData2,r=e.axis2,u=e.grid2;return n.createElement(n.Fragment,null,n.createElement("div",{className:"row col-md-12 device-graphs mt-22 ",id:"divGraphs"},t?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(i.a,{data:a,size:{height:500},axis:s,grid:l,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),n.createElement("div",{className:"row col-md-12 device-graphs mt-22 ",id:"divGraphs"},t?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(i.a,{data:o,size:{height:500},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=h}});