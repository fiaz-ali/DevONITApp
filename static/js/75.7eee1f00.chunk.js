webpackJsonp([75],{841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r=(n.n(a),n(13)),l=n(40),i=n(90),c=n(11),o=n(3),s=n(18),u=n(38),d=n(4),m=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},h=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,l){function i(e){try{o(a.next(e))}catch(e){l(e)}}function c(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}o((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,r,l,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),Old_CeilingSensorBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[]},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[]},n,n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n}return m(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._fetchData=function(){return h(this,void 0,void 0,function(){var e,t,n,a,r,l,c,o=this;return f(this,function(m){switch(m.label){case 0:return this.state,e=this.props,t=e.CeilingSensorBoardName,n=e.buildingName,t?(Object(s.a)(!0),[4,Object(u.f)(this.props.buildingName)]):[3,3];case 1:return a=m.sent(),r=a&&a.length>0&&a.map(function(e){return{value:Object(d.g)(e.ontology),label:Object(d.g)(e.rdfsLabel)}}),l=Object(),[4,Object(i.d)(t,n)];case 2:l=m.sent(),localStorage.getItem(l.deviceID)&&localStorage.getItem(l.deviceID).length>0&&(c=JSON.parse(localStorage.getItem(l.deviceID)),this.setState({CeilingSensorBoardInfo:c,Old_CeilingSensorBoardInfo:p({},c),modelChanged:!1,currentChange:""})),this.setState({Moncon:l,EquipmentList:r},function(){return h(o,void 0,void 0,function(){return f(this,function(e){return[2]})})}),Object(s.a)(!1),m.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n;return f(this,function(a){switch(a.label){case 0:return e&&Object(s.a)(!0),t=this.state.Moncon,[4,Object(l.l)(t).then(function(e){return!e||e&&e.error?(Object(o.a)("Error occurred while fetching ceiling sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return n=a.sent(),this.setState({CeilingSensorBoardInfo:n,Old_CeilingSensorBoardInfo:p({},n),modelChanged:!1,currentChange:""}),e&&Object(s.a)(!1),[2]}})})},t.prototype.handleChange=function(e,t){var n=this.state.CeilingSensorBoardInfo;n[e]=t,this.setState({CeilingSensorBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.cancelSend=function(){this.setState({modelChanged:!1,currentChange:""})},t.prototype.resetChanges=function(e){return h(this,void 0,void 0,function(){var t=this;return f(this,function(n){return this.setState({modelChanged:!1,currentChange:""},function(){return h(t,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this._fetchCeilingSensorBoardInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return h(this,void 0,void 0,function(){var n=this;return f(this,function(a){return Object(s.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return h(n,void 0,void 0,function(){return f(this,function(n){return Object(l.B)(e,t,this.state.Old_CeilingSensorBoardInfo).then(function(e){e.success?Object(o.b)("Changes applied successfully. "):e.error&&Object(o.a)(e.reason)}).catch(function(e){Object(o.a)("Some error orccured. ")}),Object(s.a)(!1),[2]})})}),[2]})})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.state,n=t.CeilingSensorBoardInfo,l=t.Moncon,i=t.modelChanged,o=t.currentChange,s=t.detailsExpanded,u=t.localBTNState;return a.createElement(r.AppContext.Consumer,null,function(t){return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h3",{className:"title"},a.createElement("strong",null,l.rdfsLabel)," "),a.createElement("h4",{className:"title"},a.createElement("strong",null,e.props.type.toUpperCase(),":",l&&l.relatedEquipment.map(function(t,n){return a.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==l.relatedEquipment.length?"":",")}))))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp"},a.createElement("h4",{className:"padding-5 margin-5"},"Temp: ",a.createElement("b",null,Object(c.a)(n&&n.temp_celsius?n.temp_celsius:0).toFixed(2),"\xb0F")),a.createElement("h4",{className:"padding-5 margin-5"},"CO2: ",a.createElement("b",null,n&&n.equiCO2_ppm?n.equiCO2_ppm+" ppm":"-")),a.createElement("h4",{className:"padding-5 margin-5"},"Altitude: ",a.createElement("b",null,n&&n.altitude_m?n.altitude_m+" m":"-")),a.createElement("h4",{className:"padding-5 margin-5"},"Pressure: ",a.createElement("b",null,n&&n.pressure_hPa?n.pressure_hPa+" hPa":"-")),a.createElement("h4",{className:"padding-5 margin-5"},"Illumiance: ",a.createElement("b",null,n&&n.illuminance_lux?n.illuminance_lux:0," Lumens")),a.createElement("h4",{className:"padding-5 margin-5"},"Gas Resistance: ",a.createElement("b",null,n&&n.gasResistance_kOhm?n.gasResistance_kOhm+" kOhm":"-"))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("h4",{className:"padding-5 margin-5"},"Humidity: ",a.createElement("b",null,n&&n.relhumidity_pct?n.relhumidity_pct+" %":"-")),a.createElement("h4",{className:"padding-5 margin-5"},"TVOC: ",a.createElement("b",null,n&&n.tvoc_ppm?n.tvoc_ppm+" ppm":"-")),a.createElement("h4",{className:"padding-5 margin-5"},"No. of BT Devices: ",a.createElement("b",null,n&&n.num_BTdev?n.num_BTdev:"-")),a.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",a.createElement("b",null,n&&n.illuminance_lux&&n.motion_sensed>0?"True":"False")),a.createElement("h4",{className:"padding-5 margin-5"},"WIFI Temp: ",a.createElement("b",null,Object(c.a)(n&&n.wifiTemp1_celsius?n.wifiTemp1_celsius:0).toFixed(2),"\xb0F"))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"}),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",{className:"btn-group"},a.createElement(a.Fragment,null,a.createElement("button",{type:"button",className:"btn btn-success",disabled:""!=o&&"state"!=o,onClick:function(){}},"Local"),a.createElement("button",{type:"button",className:"btn btn-defualt",disabled:""!=o&&"state"!=o,onClick:function(){}},"Remote"),a.createElement("button",{type:"button",className:"btn btn-default ",disabled:""!=o&&"state"!=o||u,onClick:function(){}},"Manual")),a.createElement("button",{type:"button",className:"btn btn-success",disabled:""!=o&&"state"!=o||u,onClick:function(){}},"Schedule"),a.createElement("button",{type:"button",className:"btn btn-fill btn-success",disabled:""!=o&&"state"!=o||u,onClick:function(){}},"Schedule"),a.createElement("button",{type:"button",className:"btn btn-success",disabled:""!=o&&"state"!=o||u,onClick:function(){}},"Optimize")))),a.createElement("div",{className:"row"}),a.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},a.createElement("div",{className:"",id:"headingOne"},a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){e.setState({detailsExpanded:!s})}},a.createElement("i",{className:s?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}))),a.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},a.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},a.createElement("h5",{className:"title"},a.createElement("strong",null,"IP Address:")," ",l.wirelessConfig&&l.wirelessConfig.ipAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Controller IP Address:")," ",l.wirelessConfig.controllerIPAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Manufacturer:")," ",l.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Model:")," ",l.model),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Board Address:")," ",l.boardAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Device ID:")," ",l.deviceID?l.deviceID:"")))),a.createElement("div",{className:i?"InsightApplyChanges":"hidden"},a.createElement("h4",null,"Do you want to apply these changes?"),a.createElement("div",null,a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(l,n)}},"Apply Changes")))))))))})},t}(a.Component);t.default=b}});