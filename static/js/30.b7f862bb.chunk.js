webpackJsonp([30],{1029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CA_TYPES",function(){return v});var i,a=n(2),o=(n.n(a),n(747)),r=n(913),s=n(11),c=n(1077),l=n(122),u=n(706),p=n(738),h=n(740),m=n(762),f=n(20),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),b=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},v={CONDITION:"Condition",COMPLIANCE:"Compliance",SAFETY:"Safety",CANOTE:"CA_Note"},y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={caObj:{caAssessments:[]},equipLabels:[],conditionsLabels:[],complianceLabels:[],safetyLabels:[],isCompleted:!1,inspectionOntologies:[],SolutionList:[]},n.setupDropdownLists=n.setupDropdownLists.bind(n),n.handleCAForm=n.handleCAForm.bind(n),n.handleEquipmentAgeChange=n.handleEquipmentAgeChange.bind(n),n._saveCA=n._saveCA.bind(n),n.fetchCA=n.fetchCA.bind(n),n.fetchInspection_IsComplete=n.fetchInspection_IsComplete.bind(n),n.unComplete=n.unComplete.bind(n),n._getSolutionList=n._getSolutionList.bind(n),n}return d(t,e),t.prototype.componentWillUnmount=function(){return b(this,void 0,void 0,function(){return g(this,function(e){return clearInterval(i),[2]})})},t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var e,t,n,a,o=this;return g(this,function(r){switch(r.label){case 0:return e=this.props,t=e.infoEntity,n=e.entityName,[4,this.fetchInspection_IsComplete()];case 1:return a=r.sent(),this.setState({isCompleted:a}),t&&n?(Object(l.a)(!0),[4,this.fetchCA()]):[3,4];case 2:return r.sent(),[4,this.setupDropdownLists()];case 3:r.sent(),Object(l.a)(!1),r.label=4;case 4:return this._getSolutionList(),i=setInterval(function(){var e=Object(m.a)("inspectionOntology");e!=Object(m.a)("inspectionOntology_Old")&&(Object(m.b)("inspectionOntology_Old",e),o._getSolutionList())},3e5),[2]}})})},t.prototype._getSolutionList=function(){return b(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return e=Object(m.a)("inspectionOntology"),[4,Object(h.u)(e).then(function(e){t.setState({SolutionList:e})})];case 1:return n.sent(),[2]}})})},t.prototype.fetchInspection_IsComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a,o;return g(this,function(r){switch(r.label){case 0:return e=this.props.entityName,t=Object(m.a)("inspectionOntology"),[4,Object(p.h)(e,"CA",t)];case 1:return n=r.sent(),i=this.state,a=i.isCompleted,o=i.inspectionOntologies,n?(a="true"==Object(s.g)(n.IsCompleted),o=Object(s.g)(n.inspectionOntology).split(","),this.setState({isCompleted:a,inspectionOntologies:o}),[2,a]):[2,!1]}})})},t.prototype.fetchCA=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a,o=this;return g(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,i=e.infoEntity,a=Object(m.a)("inspectionOntology"),[4,Object(c.b)(t,n,i,a).then(function(e){if(e){var t=o.state.caObj,n=e.filter(function(e){return Object(s.g)(e.inspection)==a});n&&n.map(function(e){var n={caName:Object(s.g)(e.caName),entryTimeStamp:Object(s.g)(e.entryTimeStamp),notes:Object(s.g)(e.notes),age:Object(s.g)(e.age),assessmentLabel:Object(s.g)(e.assessmentLabel),photo:Object(s.g)(e.photo).split(","),repairCost:Object(s.g)(e.repairCost),size:Object(s.g)(e.size),type:Object(s.g)(e.type),typeOf:Object(s.g)(e.typeOf)};t.caAssessments.push(n)}),o.setState({caObj:t})}})];case 1:return r.sent(),[2]}})})},t.prototype.setupDropdownLists=function(){return b(this,void 0,void 0,function(){var e,t,n,i,a;return g(this,function(o){return e=this.state,t=e.equipLabels,n=e.conditionsLabels,i=e.complianceLabels,a=e.safetyLabels,n||(n=[]),i||(i=[]),a||(a=[]),t=["Cleanliness","Debris","Insulation/Sealing","Rust/Chipped Paint","Loose Connections","Pad/Support/Dunnage","Ventilation","General Notes"],0==n.length&&n.push.apply(n,["Access","Ceiling","Egress","Fenestration","Flooring","Foundation","Frame","Roof","Walls","Curb","Landscaping","Pad","ParkingLot","ParkingSpace","Paving","StructuralElement"]),0==i.length&&i.push.apply(i,["ADA","HIPAA","PCI"]),0==a.length&&a.push.apply(a,["AED","AlarmSystem","FireExtinguisher","Sprinkler"]),this.setState({equipLabels:t,conditionsLabels:n,complianceLabels:i,safetyLabels:a}),[2]})})},t.prototype.handleCAForm=function(e,t){var n=this.state.caObj,i=n.caAssessments.filter(function(e){return e.type!=t});i.push.apply(i,e),n.caAssessments=i,this.setState({caObj:n})},t.prototype.handleEquipmentAgeChange=function(e){var t=this.state.caObj;this.setState({caObj:t})},t.prototype._saveCA=function(e){return b(this,void 0,void 0,function(){var t,n,i,a,o,r,s,u,h,f,d;return g(this,function(b){switch(b.label){case 0:return Object(l.a)(!0),t=this.state,n=t.caObj,i=t.inspectionOntologies,a=t.SolutionList,o=this.props,r=o.buildingName,s=o.infoEntity,u=o.entityName,h=o.instance,f=Object(m.a)("inspectionOntology"),d=!0,[4,Object(c.c)(r,s,u,n,f,d,a,e)];case 1:return b.sent(),e?f?(i.push(f),[4,Object(p.c)(u,i,"CA")]):[3,3]:[3,4];case 2:b.sent(),b.label=3;case 3:switch(s){case"Equip":window.location.hash=h+"/"+r+"/Assets";break;case"Space":window.location.hash=h+"/"+r+"/Space";break;default:return[2,!1]}b.label=4;case 4:return Object(l.a)(!1),[2]}})})},t.prototype.unComplete=function(){return b(this,void 0,void 0,function(){var e,t,n,i;return g(this,function(a){switch(a.label){case 0:if(e=this.props.entityName,t=this.state.inspectionOntologies,n=Object(m.a)("inspectionOntology"),!(t&&t.length>0))return[3,2];if(!n)return[3,2];for(i=0;i<t.length;i++)t[i]==n&&t.splice(i,1);return[4,Object(p.k)(e,t,"CA")];case 1:a.sent(),a.label=2;case 2:return this.setState({isCompleted:!1}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,i=t.instance,s=t.entityName,c=t.infoEntity,l=t.viewOnly,p=this.state,h=p.caObj,d=p.equipLabels,b=p.conditionsLabels,g=p.complianceLabels,y=p.safetyLabels,E=p.isCompleted,O=p.inspectionOntologies,C=Object(m.a)("inspectionOntology"),w=h.caAssessments.filter(function(e){return e.type==v.CANOTE}),L=h.caAssessments.filter(function(e){return e.type==v.CONDITION}),S=h.caAssessments.filter(function(e){return e.type==v.COMPLIANCE}),j=h.caAssessments.filter(function(e){return e.type==v.SAFETY}),I=O.find(function(e){return e==C}),N=!!(I&&I.length>0);return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},!l&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(o.a,{instance:this.props.instance,buildingName:n,tabName:c,showComponentButton:"Equip"==c,itemName:s,showAuditTypes:!0,showBIMButtons:!0}))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 form-group"},a.createElement("div",{className:"pull-right"},a.createElement(u.a,{ElementID:"ca",data:this.state.caObj,filename:"ca"}))))),a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10",id:"ca"},a.createElement("div",{className:"col-md-12 padding-10"},a.createElement("h3",{style:{margin:10}},"Condition Assessment - ",Object(f.y)(s))),"Equip"==c&&d&&d.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:w,handleAdder:this.handleCAForm,type:v.CANOTE,labels:d,entityName:s,infoEntity:c,isView:l,isFromReport:l}))),"Space"==c&&a.createElement(a.Fragment,null,b&&b.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement("h4",null,v.CONDITION," Assessments"),a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:L,handleAdder:this.handleCAForm,type:v.CONDITION,labels:b,entityName:s,infoEntity:c,isView:l,isFromReport:l})),a.createElement("br",null),a.createElement("br",null)),g&&g.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement("h4",null,v.COMPLIANCE," Assessments"),a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:S,handleAdder:this.handleCAForm,type:v.COMPLIANCE,labels:g,entityName:s,infoEntity:c,isView:l,isFromReport:l})),a.createElement("br",null),a.createElement("br",null)),y&&y.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-12"},a.createElement("h4",null,v.SAFETY," Assessments"),a.createElement(r.a,{instance:i,buildingName:n,caOf:c,items:j,handleAdder:this.handleCAForm,type:v.SAFETY,labels:y,entityName:s,infoEntity:c,isView:l,isFromReport:l})),a.createElement("br",null),a.createElement("br",null))),!l&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 inline-block"},a.createElement("br",null),a.createElement("div",{className:"form-group"},a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!1)}},a.createElement("i",{className:"fa fa-save"})," Save"),(E||!E)&&a.createElement(a.Fragment,null," ",!N&&a.createElement("button",{className:"btn btn-primary btn-fill",type:"button",onClick:function(){e._saveCA(!0)}},a.createElement("i",{className:"fa fa-save"})," Save & Complete")),E&&N&&a.createElement("button",{className:"btn btn-fill btn-dark text-inspection-completed padding-10 margin-5",type:"button",onClick:function(){e.unComplete()}},a.createElement("b",null,"Remove Inspection Completion. ")))))))))},t}(a.Component);t.default=y},740:function(e,t,n){"use strict";t.g=function(e,t,n,c){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({model:e,buildingData:t,equipment:n,lightingEquipment:c},i.a.LIFE.SaveProject,o.b.LIFE).then(function(){Object(a.b)("Project saved Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Project.")})];case 1:return[2,r.sent()]}})})},t.r=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetProjectList,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.m=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteProject,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({model:e},i.a.LIFE.SaveProjectSolution,o.b.LIFE).then(function(){Object(a.b)("Solution saved Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Solution.")})];case 1:return[2,t.sent()]}})})},t.o=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({spreadSheetId:e,fileType:t},i.a.LIFE.ExportSheet,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.t=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e?[4,Object(i.e)({projectId:e},i.a.LIFE.GetSolutionList,o.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.u=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e?[4,Object(i.e)({inspectionOntology:e},i.a.LIFE.GetSolutionListForInspection,o.b.LIFE)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}})})},t.s=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({solutionId:e},i.a.LIFE.GetSolution,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.n=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({_id:e},i.a.LIFE.DeleteSolution,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.v=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({manageFile:e,fileData:t},i.a.LIFE.ManageFile,o.b.LIFE).then(function(){Object(a.b)("Upload Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Upload.")})];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({communityFile:e,fileData:t},i.a.LIFE.SaveCommunityFile,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.p=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,instance:t},i.a.LIFE.GetManageFile,o.b.LIFE)];case 1:return[2,n.sent()]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetCommunityFile,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.l=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ManageFile:e},i.a.LIFE.DeleteManageFile,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({communityFile:e},i.a.LIFE.DeleteCommunityFile,o.b.LIFE).then(function(){Object(a.b)(" Deleted Successfully.")}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,t.sent()]}})})},t.q=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({projectId:e},i.a.LIFE.GetProject,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.f=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.SaveEmailAndDrive,o.b.LIFE)];case 1:return[2,a.sent()]}})})},t.j=function(e,t){return r(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({email:e,instance:t},i.a.LIFE.ShareCommunityFolder,o.b.LIFE).then(function(e){e.result?Object(a.b)("Successfully Share."):Object(a.a)("The user Email is not valid.")}).catch(function(e){Object(a.a)("Something Went Wrong!")})];case 1:return[2,n.sent()]}})})},t.k=function(e,t,n){return r(this,void 0,void 0,function(){return s(this,function(r){switch(r.label){case 0:return[4,Object(i.f)({email:e,buildingName:t,instance:n},i.a.LIFE.ShareMMTemplateFolder,o.b.LIFE).then(function(e){e.result?Object(a.b)("Successfully Share."):Object(a.a)("The user Email is not valid.")}).catch(function(e){Object(a.a)("Something Went Wrong!")})];case 1:return[2,r.sent()]}})})},t.i=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({templatePurpose:e},i.a.LIFE.SaveTemplatePurpose,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.c=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({instance:e},i.a.LIFE.GetTemplatePurpose,o.b.LIFE)];case 1:return[2,t.sent()]}})})},t.d=function(e){var t=e.getFullYear().toString().slice(2,4),n=(e.getMonth()+1).toString().padStart(2,0),i=e.getDate().toString().padStart(2,0),a=e.getHours().toString().padStart(2,0),o=e.getMinutes().toString().padStart(2,0),r=e.getSeconds().toString().padStart(2,0);return t+n+i+a+o+r};var i=n(12),a=n(21),o=n(13),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}},913:function(e,t,n){"use strict";var i=n(2),a=(n.n(i),n(698)),o=n(702),r=n(57),s=n(20),c=n(743),l=n(13),u=n(737),p=n(8),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],i=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],caLabel:[],labelsDropDownList:[],files:[],onPageTextChanged:!1},n.addItem=n.addItem.bind(n),n.removeItem=n.removeItem.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleCALabelChange=n.handleCALabelChange.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n.setImageURL_ForItems=n.setImageURL_ForItems.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e,t=this;return f(this,function(n){return e=this.state.labelsDropDownList,this.props.labels&&this.props.labels.length>0&&(e=this.props.labels.map(function(e){return{value:e,label:e}}),this.setState({labelsDropDownList:e},function(){t.setImageURL_ForItems()})),[2]})})},t.prototype.setImageURL_ForItems=function(){return m(this,void 0,void 0,function(){var e,t,n,i;return f(this,function(a){for(e=this.state.items,t=new r.b,n=0;n<e.length;n++)i="",e[n]&&e[n].photo&&e[n].photo.length&&e[n].photo[0]&&(e[n].photo[0].toLowerCase().indexOf(".mp4")>0&&(i="assets/img/video-file-icon.png"),e[n].photo[0].toLowerCase().indexOf(".mov")>0&&(i="assets/img/video-file-icon.png"),e[n].photo[0].toLowerCase().indexOf(".pdf")>0&&(i="assets/img/pdf-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".xls")>0||e[n].photo[0].toLowerCase().indexOf(".csv")>0)&&(i="assets/img/excel-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".docx")>0||e[n].photo[0].toLowerCase().indexOf(".txt")>0)&&(i="assets/img/doc-file-icon.png"),(e[n].photo[0].toLowerCase().indexOf(".png")>0||e[n].photo[0].toLowerCase().indexOf(".jpeg")>0||e[n].photo[0].toLowerCase().indexOf(".jpg")>0||e[n].photo[0].toLowerCase().indexOf(".tiff")>0)&&(i=t.GetSignedURL(r.a.DOCUMENT(),e[n].photo[0]))),e[n].imageurl=i;return this.setState({items:e}),[2]})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){return m(this,void 0,void 0,function(){var t,n,i=this;return f(this,function(a){return e.buildingName&&e.instance&&(t=JSON.stringify(this.state.items),n=JSON.stringify(e.items),(!this.state.onPageTextChanged&&!this.props.isFromReport&&t!=n||this.props.isFromReport&&t!=n)&&this.setState({items:e.items},function(){i.setImageURL_ForItems()})),[2]})})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.items;t.caLabel.map(function(t){var i={caName:"",age:"",assessmentLabel:t.value,notes:"",photo:[],repairCost:"",size:"",type:e.props.type,entryTimeStamp:"",typeOf:t.value};n||(n=[]),n.push(i)}),this.setState({items:n,caLabel:[]}),this.props.handleAdder(n,this.props.type)},t.prototype.removeItem=function(e){var t=this.state.items;t.splice(e,1),this.setState({items:t}),this.props.handleAdder(t,this.props.type)},t.prototype.handleCALabelChange=function(e){this.setState({caLabel:e})},t.prototype.handleItemChange=function(e,t){var n=this.state.items,i=t.target.name;(n&&n[e])[""+i]=t.target.value,this.setState({items:n,onPageTextChanged:!0}),this.props.handleAdder(n,this.props.type)},t.prototype.handleFileAttachment=function(e,t){var n=this,i=this.props,a=i.buildingName,o=i.entityName,c=i.infoEntity,l=JSON.parse(p.a.getItem("user")),h=this.state.items,m=h[t];e&&e.length>0&&e[0].file&&m&&this.setState({items:h,files:e},function(){for(var i=function(i){var p,m,f=e[i],d=n.props.buildingName+"-_-"+Object(s.D)(10),b=f.name.substring(f.name.indexOf("."));p=""+d+b,m=f,h[t].photo[0]=p,n.props.handleAdder(h,n.props.type),(new r.b).UploadFile(r.a.DOCUMENT(),p,m,function(){var e={building:a,docOntology:Object(s.D)(12),documentType:"InspectionDoc",documentSubtype:"InspectionDoc",enteredBy:l.contact,enteredByName:l.name,entityOntology:[{label:"",value:o}],entityType:c,rdfsLabel:f.name,s3FileName:p,entryTimeStamp:(new Date).toString(),linkToDocument:p};Object(u.f)(e).then(function(){})})},p=0;p<e.length;p++)i(p)})},t.prototype.handlefileAttached=function(e,t){if(e.length>0){for(var n=this.state.items,i=n[t],a=0;a<e.length;a++){var o=e[a].name.split(".").pop(),c=this.props.buildingName+"_"+Object(s.D)(15)+"."+o.toLowerCase();n[0].photo[a]=c}Object(l.g)(e),this.setState({files:e,items:n},function(){}),this.props.handleAdder(n,this.props.type);var u=new r.b,p=Object(l.d)();if(p&&p.length)for(var h=0;h<p.length;h++){var m=p[h];u.UploadFile(r.a.DOCUMENT(),i.photo[h],m)}}},t.prototype.render=function(){var e=this,t=this.state,n=t.items,r=t.caLabel,s=t.labelsDropDownList,l=this.props,u=l.caOf,p=l.hideAddButton,h=void 0!==p&&p,m=l.isFromReport;return i.createElement(i.Fragment,null,n&&n.map(function(t,n){return i.createElement("div",{key:n,className:"row"},i.createElement("br",null),i.createElement("div",{className:"form-group"},i.createElement("div",{className:"col-md-2"},i.createElement("label",{htmlFor:t.assessmentLabel},t.assessmentLabel)),"Space"==u&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-1"},i.createElement("input",{type:"text",id:t.age,className:"form-control",value:t.age,placeholder:"Age",name:"age",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-1"},i.createElement("input",{type:"text",id:t.size,className:"form-control",value:t.size,placeholder:"Size",name:"size",onChange:function(t){return e.handleItemChange(n,t)}}))),i.createElement("div",{className:"Space"==u?"col-md-4":"col-md-6"},i.createElement("input",{type:"text",id:t.notes,className:"form-control",value:t.notes,placeholder:"Notes",name:"notes",onChange:function(t){return e.handleItemChange(n,t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("input",{type:"text",id:t.repairCost,className:"form-control",value:t.repairCost,placeholder:"Approximate Repair Cost",name:"repairCost",onChange:function(t){return e.handleItemChange(n,t)}})),!m&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},!m&&i.createElement("button",{type:"button",className:"btn btn-dark",style:{fontWeight:"bold",fontSize:"12pt",width:t.photo&&t.photo.length>0&&t.photo[0]?"204px":"60px",padding:0},"data-toggle":"modal","data-target":"#uploadImage"+e.props.type+n,title:"Upload Attachment",onClick:function(){e.setState({files:[]})}},t&&t.photo&&t.photo.length&&t.photo[0]?i.createElement("img",{src:t.imageurl,style:{maxHeight:"200px",maxWidth:"200px"}}):i.createElement("i",{className:"fa fa-paperclip"})),i.createElement(a.a,{disableSaveButton:!r,id:"uploadImage"+e.props.type+n,onSaveButtonClick:function(){},saveButtonText:"Close",isEditForm:!1,showCancelButton:!1,cancelButtonText:"Cancel",heading:e.props.type},i.createElement(c.a,{handleAttachedFile:function(t){t&&t[0]&&e.handleFileAttachment(t,n)},files:e.state.files,single:!1})),!m&&n>=0&&i.createElement("button",{type:"button",className:"btn pull-right",title:"Remove Item",style:{fontWeight:"bold",fontSize:"12pt",width:"25px",height:"24px",padding:0,color:"#f00"},onClick:function(){return e.removeItem(n)}},i.createElement("i",{className:"fa fa-remove"})))),m&&t.photo&&t.photo.length>0&&i.createElement("div",{className:"col-md-2"},i.createElement("img",{src:t.imageurl,className:"inspection-image-preview"}))))}),!h&&!m&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-11 col-xs-11"},i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm","data-toggle":"modal","data-target":"#AddLabelDialog"+this.props.type,style:{fontWeight:"bold"}},i.createElement("i",{className:"fa fa-plus"}),"Add ",this.props.type)),i.createElement(a.a,{disableSaveButton:!r,id:"AddLabelDialog"+this.props.type,onSaveButtonClick:function(){e.addItem()},saveButtonText:"Ok",isEditForm:!1,showCancelButton:!0,cancelButtonText:"Cancel",heading:this.props.type},s&&s.length>0&&i.createElement("div",{className:"form-group"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{id:"lbl",isMulti:!0,closeMenuOnSelect:!1,onChange:this.handleCALabelChange,placeholder:this.props.type+" Assessment Labels",options:s,value:r}))))))))},t}(i.Component);t.a=d}});