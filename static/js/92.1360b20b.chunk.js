webpackJsonp([92],{3069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(2),l=(n.n(a),n(119)),r=n(116),i=n(10),s=n(651),c=n(654),d=n(673),m=n(669),u=n(667),p=n(23),b=n(658),f=n(11),g=n(1388),h=n(671),v=n(670),y=n(728),O=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,l){function r(e){try{s(o.next(e))}catch(e){l(e)}}function i(e){try{s(o.throw(e))}catch(e){l(e)}}function s(e){e.done?a(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((o=o.apply(e,t||[])).next())})},j=this&&this.__generator||function(e,t){var n,o,a,l,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&l[0]?o.return:l[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,l[1])).done)return a;switch(o=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(6===l[0]&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],o=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}},F=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_zones:[],onlyZones:[],onlyFloors:[],sortOrder:1,zoneObj:Object(),isEdit:!1,zonetoDelete:Object(),currentView:"Zone",newFloor:Object(),deviceList:[],refreshMatterportDialog:!1,bimImage:"",search:"",showLogs:!1,matterportImageModel:[],selectedFloor:"",selectedFloorPlanImage:"",isEditFloorPlan:!1,selectedMatterportImageModel:Object()},o=n,n.handleZoneNameChange=n.handleZoneNameChange.bind(n),n.handleZoneTypeChange=n.handleZoneTypeChange.bind(n),n.handleSaveFloorMatterport=n.handleSaveFloorMatterport.bind(n),n.handleRefreshMatterport=n.handleRefreshMatterport.bind(n),n.urltoFile=n.urltoFile.bind(n),n.createZone=n.createZone.bind(n),n.resetForm=n.resetForm.bind(n),n.onDeleteZone=n.onDeleteZone.bind(n),n.deleteZone=n.deleteZone.bind(n),n.sortZone=n.sortZone.bind(n),n.createFloor=n.createFloor.bind(n),n.fetchDevicesList=n.fetchDevicesList.bind(n),n.getControllerEndPointLabel=n.getControllerEndPointLabel.bind(n),n.setDialogState=n.setDialogState.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.fetchFloorPlan=n.fetchFloorPlan.bind(n),n}return O(t,e),t.prototype.componentDidMount=function(){return E(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this.fetchZones()]:[3,3];case 1:return e.sent(),[4,this.fetchDevicesList()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.fetchDevicesList=function(){return E(this,void 0,void 0,function(){var e,t;return j(this,function(n){switch(n.label){case 0:return[4,Object(b.w)(this.props.buildingName,!0)];case 1:return e=n.sent(),t=e&&e.length>0&&e.map(function(e){return{value:Object(i.g)(e.moncondevice),label:Object(i.g)(e.rdfsLabel)}}),this.setState({deviceList:t}),[2]}})})},t.prototype.getControllerEndPointLabel=function(e){var t=this.state.deviceList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.fetchZones=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l=this;return j(this,function(s){switch(s.label){case 0:return e=this.props,t=e.buildingName,n=e.equipmentName,a=e.spaceName,Object(r.a)(!0),[4,Object(u.a)(t).then(function(e){return E(l,void 0,void 0,function(){var t,l,r,s,c,d,m,u,b,f,g,h;return j(this,function(v){switch(v.label){case 0:""==Object(i.g)(e[0].zone)&&(e=[]),t=[],l=[],r=0,v.label=1;case 1:if(!(r<e.length))return[3,8];if(h=e[r],!(s=Object(i.g)(h.selectedSpaces)))return[3,6];if(!((c=s.split(","))&&c.length>0))return[3,6];d="",g=0,v.label=2;case 2:return g<c.length?(m=c[g],[4,Object(p.p)(m)]):[3,5];case 3:u=v.sent(),d=d+","+u,v.label=4;case 4:return g++,[3,2];case 5:d&&(d=d.substring(1)),h.selectedSpacesRdfsLabel={type:"literal",value:d},v.label=6;case 6:"Floor"==Object(i.g)(h.type)?t.push(h):l.push(h),Object(i.g)(h.zone),Object(i.g)(h.rdfsLabel)&&Object(p.F)(Object(i.g)(h.zone),Object(i.g)(h.rdfsLabel)),v.label=7;case 7:return r++,[3,1];case 8:if(b=[],f=[],n||a){for(g=0;g<t.length;g++)Object(i.g)(t[g].serviceprovider).indexOf(n)>-1?b.push(t[g]):Object(i.g)(t[g].serviceprovider).indexOf(a)>-1&&b.push(t[g]);for(h=0;h<l.length;h++)Object(i.g)(l[h].serviceprovider).indexOf(n)>-1?f.push(l[h]):Object(i.g)(l[h].serviceprovider).indexOf(a)>-1&&f.push(l[h]);o.setState({_zones:e,onlyFloors:b,onlyZones:f})}else o.setState({_zones:e,onlyFloors:t,onlyZones:l});return[2]}})})}).catch(function(e){return e})];case 1:return s.sent(),Object(r.a)(!1),[2]}})})},t.prototype.sortZone=function(e,t){var n=this.state._zones,o=this.state.sortOrder,a=n.sort(function(t,n){if(t&&n){var a="",l="";switch(e){case"Zone":t.rdfsLabel&&n.rdfsLabel&&(a=t.rdfsLabel.value,l=n.rdfsLabel.value);break;case"Type":t.type&&n.type&&(a=t.type.value,l=n.type.value);break;case"Service Provider":t.spRdfsLabel&&n.spRdfsLabel&&(a=t.spRdfsLabel.value,l=n.spRdfsLabel.value);break;case"Endpoint":t.controllerendpoint&&n.controllerendpoint&&(a=t.controllerendpoint.value,l=n.controllerendpoint.value)}var r=0;return a.toLocaleLowerCase()<l.toLocaleLowerCase()?r=-1:a.toLocaleLowerCase()>l.toLocaleLowerCase()&&(r=1),r*o}}),l=a.filter(function(e){return"Floor"==Object(i.g)(e.type)}),r=a.filter(function(e){return"Floor"!=Object(i.g)(e.type)});this.setState({_zones:a,sortOrder:-1*o,onlyFloors:l,onlyZones:r})},t.prototype.editZone=function(e){return E(this,void 0,void 0,function(){var t;return j(this,function(n){return(t=this.state.zoneObj).zone=Object(i.g)(e.zone),t.zonetype=Object(i.g)(e.type),this.setState({zoneObj:t,isEdit:!0}),[2]})})},t.prototype.handleZoneNameChange=function(e){var t=this.state.zoneObj;t.zone=e.target.value,this.setState({zoneObj:t})},t.prototype.handleZoneTypeChange=function(e){var t=this.state.zoneObj;t.zonetype=e.target.value,this.setState({zoneObj:t})},t.prototype.createZone=function(){return E(this,void 0,void 0,function(){return j(this,function(e){return this.state.zoneObj&&this.fetchZones(),[2]})})},t.prototype.resetForm=function(){var e=this.state.zoneObj;e.zone="",e.zonetype="",this.setState({zoneObj:e})},t.prototype.onDeleteZone=function(e){return E(this,void 0,void 0,function(){return j(this,function(t){return this.setState({zonetoDelete:e}),[2]})})},t.prototype.deleteZone=function(){return E(this,void 0,void 0,function(){var e;return j(this,function(t){switch(t.label){case 0:return e=this.state.zonetoDelete,Object(r.a)(!0),[4,Object(u.d)(this.props.buildingName,Object(i.g)(e.zone))];case 1:return t.sent(),[4,this.fetchZones()];case 2:return t.sent(),Object(r.a)(!1),[2]}})})},t.prototype.handleRefreshMatterport=function(e){this.setState({refreshMatterportDialog:e})},t.prototype.urltoFile=function(e,t,n){return fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],t,{type:n})})},t.prototype.handleSaveFloorMatterport=function(e,t,n,o,a){var l=this.state.newFloor;l.xOffsetMap=""+n,l.xScaleMap=""+e,l.yOffsetMap=""+o,l.yScaleMap=""+t,l.imgFloorMap=a,this.setState({newFloor:l})},t.prototype.createFloor=function(e){return E(this,void 0,void 0,function(){var t;return j(this,function(n){switch(n.label){case 0:return(t=this.state.newFloor)&&t.rdfsLabel?(t.floor=t.floor?t.floor:Object(p.u)(7),t.hasFloorPlan=!!e,Object(r.a)(!0),[4,Object(u.b)(this.props.buildingName,t)]):[3,3];case 1:return n.sent(),Object(r.a)(!1),this.setState({newFloor:{floor:"",rdfsLabel:"",linkBimism:"",bimFloor:"",bimSid:"",xScaleMap:"",xOffsetMap:"",yScaleMap:"",yOffsetMap:""},selectedFloor:"",selectedFloorPlanImage:"",selectedMatterportImageModel:Object()}),[4,this.fetchZones()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.handleFloorChange=function(e){return E(this,void 0,void 0,function(){return j(this,function(t){return this.setState({newFloor:e}),[2]})})},t.prototype.fetchFloorPlan=function(e){return E(this,void 0,void 0,function(){var t,n,o,a,l;return j(this,function(s){switch(s.label){case 0:return t=this.state,n=t.selectedFloorPlanImage,o=t.isEditFloorPlan,a=t.selectedMatterportImageModel,Object(r.a)(!0),[4,Object(y.b)(this.props.buildingName,Object(i.g)(e.zone))];case 1:return(l=s.sent())&&l[0]?(o=!1,a.floorOntology=l[0]?l[0].floorOntology:"",a.building=l[0]?l[0].building:"",a.bimImageBase=l[0]?l[0].bimImageBase:"",a.floorplan=l[0]?l[0].floorplan:"",a.cropperCanvasData=l[0]?l[0].cropperCanvasData:Object(),a.cropperCropboxData=l[0]?l[0].cropperCropboxData:Object(),a.cropperData=l[0]?l[0].cropperData:Object(),n=l[0].floorplan?l[0].floorplan:l[0].bimImageBase?l[0].bimImageBase:""):(o=!0,a.floorOntology=Object(i.g)(e.zone.value)?Object(i.g)(e.zone.value):""),this.setState({selectedFloorPlanImage:n,isEditFloorPlan:o,selectedMatterportImageModel:a}),Object(r.a)(!1),[2]}})})},t.prototype.setDialogState=function(e){this.setState({newFloor:e})},t.prototype.search_filter=function(e){this.setState({search:e.target.value})},t.prototype.saveFloorPlan=function(){return E(this,void 0,void 0,function(){var e,t;return j(this,function(n){switch(n.label){case 0:return e=this.state.selectedFloorPlanImage,(t=this.state.selectedMatterportImageModel).building=this.props.buildingName,t.floorplan=e,this.setState({selectedMatterportImageModel:t}),Object(r.a)(!0),[4,Object(y.f)(t)];case 1:return n.sent(),Object(r.a)(!0),[4,this.createFloor(!0)];case 2:return n.sent(),[4,this.fetchZones()];case 3:return n.sent(),[2]}})})},t.prototype.handleChangeFloorPlan=function(e){return E(this,void 0,void 0,function(){var t,n;return j(this,function(o){return t=e.target.files[0],n=new FileReader,t&&(n.readAsDataURL(t),n.onloadend=function(e){this.setState({selectedFloorPlanImage:n.result})}.bind(this)),[2]})})},t.prototype.render=function(){var e,t=this,n=this.state,o=n.onlyZones,r=n.onlyFloors,u=n.currentView,p=n.newFloor,b=n.isEdit,y=n.zoneObj,O=n.search,F=n.showLogs,N=n.selectedFloorPlanImage,S=n.isEditFloorPlan,Z=this.props,w=Z.instance,C=Z.buildingName,L=(("Zone"===u?o:r)&&"Zone"===u?o:r).filter(function(e){return Object(i.g)(e.rdfsLabel).toLowerCase().includes(O.toLowerCase().trim())}),k=JSON.parse(f.a.getItem("user")),x=Object(m.b)(k,"info-zone","write"),M="Zone"==u?o:r;return p.rdfsLabel&&(e=!0,p.linkBimism&&(e=!!p.bimFloor)),M.map(function(e){if(e.selectedSpacesRdfsLabel&&Object(i.g)(e.selectedSpacesRdfsLabel)&&Object(i.g)(e.selectedSpacesRdfsLabel).split(",")&&Object(i.g)(e.selectedSpacesRdfsLabel).split(",").length>0){var t=Object(i.g)(e.selectedSpacesRdfsLabel).replace(/,/g,"|");e.selectedSpacesRdfsLabel={type:"literal",value:t}}if(e.selectedSpaces&&Object(i.g)(e.selectedSpaces)&&Object(i.g)(e.selectedSpaces).split(",")&&Object(i.g)(e.selectedSpaces).split(",").length>0){t=Object(i.g)(e.selectedSpaces).replace(/,/g,"|");e.selectedSpaces={type:"literal",value:t}}if(e.relayDevice&&Object(i.g)(e.relayDevice)&&Object(i.g)(e.relayDevice).split(",")&&Object(i.g)(e.relayDevice).split(",").length>0){t=Object(i.g)(e.relayDevice).replace(/,/g,"|");e.relayDevice={type:"literal",value:t}}}),F?a.createElement(v.a,{instance:w,buildingName:C,fromEntityList:!0,module:h.a.Assets,entityName:u,entityList:"Zone"==u?o.map(function(e){return{label:Object(i.g)(e.rdfsLabel),value:Object(i.g)(e.zone)}}):r.map(function(e){return{label:Object(i.g)(e.rdfsLabel),value:Object(i.g)(e.zone)}}),onLogClose:function(){return t.setState({showLogs:!1})}}):a.createElement(l.a.Consumer,null,function(n){return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-3 padding-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("Zone"==u?"btn-fill":"")+" btn-secondary btn-secondary-dark",onClick:function(){t.setState({currentView:"Zone"})}},"Zones"),a.createElement("button",{className:"btn "+("Floor"==u?"btn-fill":"")+" btn-secondary btn-secondary-dark",onClick:function(){t.setState({currentView:"Floor"})}},"Floors"))),a.createElement("div",{className:"col-md-9 padding-5"},a.createElement("div",{className:"col-md-1 col-xs-12 px-0"},a.createElement("h6",{style:{marginTop:"10px"}},"Filter : \xa0")),a.createElement("div",{className:"col-md-4 col-xs-12"},a.createElement("input",{className:"form-control pull-right",onChange:function(e){t.search_filter(e)},id:"zonefilter",type:"text",placeholder:"Search.."})),k&&"1"==k.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){t.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),a.createElement("div",{className:"dropdown pull-right"},a.createElement(d.a,{filename:"Zone"==u?"Zones List":"Floor List",data:M,ElementID:"ZonesList"})),x&&a.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){"Zone"==u?(window.location.hash=w+"/"+C+"/NewZone",t.resetForm(),t.setState({isEdit:!1})):(t.setState({newFloor:{floor:"",rdfsLabel:"",linkBimism:"",bimFloor:"",bimSid:""}}),document.getElementById("btnShowFloorForm").click())}},a.createElement("i",{className:"fa fa-plus"})," Create New ","Zone"==u?"Zone":"Floor"," ")))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card  padding-10",id:"ZonesList",style:{paddingTop:"0px"}},a.createElement("div",{className:"content",style:{paddingTop:"10px"}},a.createElement("button",{type:"button",id:"btnOpenZoneForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#ZonesFormDialog"}," ."),a.createElement(s.a,{id:"ZonesFormDialog",heading:"Add Zone",showCancelButton:!0,cancelButtonText:"Cancel",onSaveButtonClick:function(){t.createZone()},saveButtonText:"Save",disableSaveButton:!1},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("label",{htmlFor:"zone"},"Zone Name:"),a.createElement("input",{id:"zone",disabled:b,type:"text",className:"form-control",value:y.zone,onChange:t.handleZoneNameChange}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("label",{htmlFor:"type"},"Zone Type:"),a.createElement("input",{id:"type",type:"text",className:"form-control",value:y.zonetype,onChange:t.handleZoneTypeChange})))),a.createElement(c.a,{instance:w,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this "+("Zone"==u?"Zone":"Floor")+"?",heading:"Confirm...",onConfirmButtonClick:function(){t.deleteZone()}}),a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row hidden-xs no-padding"},a.createElement("div",{className:"col-md-12 col-sm-12 no-padding dataCard"},a.createElement("div",{className:("Zone"==u?"col-md-2":"col-md-3")+" col-sm-2 small grid-header-left",onClick:function(){return t.sortZone("Zone")}},a.createElement("i",{className:"fa fas fa-sort"})," ","Zone"==u?"Zone ":"","Name "),a.createElement("div",{className:"col-md-2 col-sm-3 small grid-header",onClick:function(){return t.sortZone("Type")}},a.createElement("i",{className:"fa fas fa-sort"})," ","Zone"==u?"Zone ":""," Type"),"Floor"==u&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-4 col-sm-3 small grid-header-left padding-10"},"Virtual Bim "),a.createElement("div",{className:"col-md-3 col-sm-4 small grid-header-left padding-10"},"Action")),"Zone"==u&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-3 col-sm-2 small grid-header",onClick:function(){return t.sortZone("Service Provider")}},a.createElement("i",{className:"fa fas fa-sort"})," Service Provider "),a.createElement("div",{className:"col-md-3 col-sm-3 small grid-header",style:{paddingLeft:"10px"},onClick:function(){return t.sortZone("Endpoint")}},a.createElement("i",{className:"fa fas fa-sort"})," Controller Endpoint "),a.createElement("div",{style:{paddingLeft:"10px"},className:"col-md-2 col-sm-2 small grid-header"},"Action ")))),L.map(function(e,o){var l=e.controllerendpoint&&Object(i.g)(e.controllerendpoint).split(",");return a.createElement("div",{key:o,className:"row no-padding"},a.createElement("div",{className:"col-md-12 col-sm-12 no-padding"},a.createElement("div",{className:("Zone"==u?"col-md-2":"col-md-3")+" col-sm-2 small padding-10 grid-left trim-data",title:Object(i.g)(e.rdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Zone"==u?"Zone ":""," Name"),a.createElement("a",{href:"#"+w+"/"+C+"/Zone/Profile/"+Object(i.g)(e.zone)},Object(i.g)(e.rdfsLabel))),a.createElement("div",{className:"col-md-2 col-sm-3 small padding-10 grid trim-data",title:e.type&&Object(i.g)(e.type)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Zone"==u?"Zone ":""," Type"),e.type&&Object(i.g)(e.type)),"Floor"==u&&a.createElement("div",{className:"col-md-4 col-sm-3 small padding-10 grid trim-data",title:e.linkBimism&&Object(i.g)(e.linkBimism)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"BIMISM"),Object(i.g)(e.linkBimism)&&a.createElement("a",{href:e.linkBimism&&Object(i.g)(e.linkBimism).indexOf("ttp")>0?e.linkBimism&&Object(i.g)(e.linkBimism):"http://"+(e.linkBimism&&Object(i.g)(e.linkBimism)),target:"_blank",title:"Click here to walk through your building."},"Click here to walk through your building.")),"Zone"==u&&a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-3 col-sm-3 padding-10 grid",title:e.spRdfsLabel&&Object(i.g)(e.spRdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Service Provider"),e.spRdfsLabel&&e.spRdfsLabel.value.split(",").map(function(t,n){return a.createElement("p",{className:"small"},t,e.spRdfsLabel.value.split(",").length==n+1?"":",")})),a.createElement("div",{className:"col-md-3 col-sm-2 padding-10 grid trim-data"},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Controller Endpoint"),l&&l.map(function(e,n){return a.createElement("p",{className:"small",key:n},t.getControllerEndPointLabel(e)," ",n+1==l.length?"":",")}))),x&&a.createElement("div",{className:("Zone"==u?"col-md-2":"col-md-3")+" col-sm-12 col-xs-12 no-padding"},a.createElement("button",{className:"btn-sm btn-danger active trim-data pull-right custom-outline-btn",onClick:function(n){t.onDeleteZone(e)},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog",title:"Delete"},a.createElement("i",{className:"fa fa-trash"})," "),a.createElement("button",{className:"btn-sm btn-success active pull-right trim-data custom-outline-btn",onClick:function(o){"Zone"==u?(n.onChangeZone(Object(i.g)(e.zone)),window.location.hash=w+"/"+C+"/EditZone/"+Object(i.g)(e.zone)):(t.setState({newFloor:{floor:Object(i.g)(e.zone),rdfsLabel:Object(i.g)(e.rdfsLabel),linkBimism:Object(i.g)(e.linkBimism),bimFloor:Object(i.g)(e.bimFloor),bimSid:Object(i.g)(e.bimSid),xOffsetMap:Object(i.g)(e.xOffsetMap),xScaleMap:Object(i.g)(e.xScaleMap),yOffsetMap:Object(i.g)(e.yOffsetMap),yScaleMap:Object(i.g)(e.yScaleMap)},refreshMatterportDialog:!0},function(){return E(t,void 0,void 0,function(){return j(this,function(e){return[2]})})}),document.getElementById("btnShowFloorForm").click())},title:"Edit"},a.createElement("i",{className:"fa fa-edit"})," "),"Zone"!=u&&a.createElement("button",{className:"btn-sm btn-success active pull-right custom-icon-btn",title:"Floor Plan",onClick:function(){t.setState({newFloor:{floor:Object(i.g)(e.zone),rdfsLabel:Object(i.g)(e.rdfsLabel),linkBimism:Object(i.g)(e.linkBimism),bimFloor:Object(i.g)(e.bimFloor),bimSid:Object(i.g)(e.bimSid),xOffsetMap:Object(i.g)(e.xOffsetMap),xScaleMap:Object(i.g)(e.xScaleMap),yOffsetMap:Object(i.g)(e.yOffsetMap),yScaleMap:Object(i.g)(e.yScaleMap)},refreshMatterportDialog:!0},function(){return E(t,void 0,void 0,function(){return j(this,function(t){return this.fetchFloorPlan(e),[2]})})}),document.getElementById("btnShowFloorPlan").click()},style:{border:"1px solid transparent",backgroundColor:e.hasFloorPlan?"#FF4C29":"#929292"}},a.createElement("img",{className:"icon-img",src:"assets/img/Space3.png"})," "),"Zone"!=u&&a.createElement("button",{className:"btn-sm btn-success active pull-right custom-icon-btn",title:"Matterport Map",onClick:function(t){window.location.hash=w+"/"+C+"/Zone/Floor/"+Object(i.g)(e.zone)+"/Matterport"},style:{visibility:e.linkBimism?"visible":"hidden",border:"1px solid transparent",backgroundColor:"#A69888"}},a.createElement("img",{className:"icon-img",src:"assets/img/virtual-bim.png"})," "))))}))),a.createElement("button",{type:"button",id:"btnShowFloorForm",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#floorFormDialog",style:{display:"none"}},"."),a.createElement(s.a,{id:"floorFormDialog",onSaveButtonClick:function(){t.createFloor()},saveButtonText:"Save",disableSaveButton:!e},a.createElement(g.a,{instance:w,buildingName:C,isView:!1,handleFloorChange:t.handleFloorChange,newFloor:p})),a.createElement("button",{type:"button",id:"btnShowFloorPlan",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#floorPlanDialog",style:{display:"none"}},"."),a.createElement(s.a,{id:"floorPlanDialog",onSaveButtonClick:function(){t.saveFloorPlan()},saveButtonText:"Save",disableSaveButton:!N,showSaveButton:S,showCancelButton:!0,cancelButtonText:S?"Cancel":"Close",onCancelButtonClick:function(){t.setState({selectedFloor:"",selectedFloorPlanImage:"",selectedMatterportImageModel:Object()})},onCancelButtonClickActive:!0},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12",style:{marginBottom:10}},N&&!S&&a.createElement("div",null,a.createElement("button",{style:{marginRight:3},disabled:!N,className:"btn btn-success active pull-right",title:"Edit",onClick:function(){return t.setState({isEditFloorPlan:!0})}},a.createElement("i",{className:"fa fa-edit"})," Edit ")),S&&a.createElement("div",{className:"pull-right",style:{marginRight:3}},a.createElement("button",{type:"button",title:"Import floor plan",className:"btn btn-dark btn-fill",onClick:function(){return document.getElementById("btnImportImage").click()}},"Import floor plan"),a.createElement("input",{id:"btnImportImage",accept:"image",className:"custom-file-input display-none",type:"file",multiple:!1,onChange:function(e){return t.handleChangeFloorPlan(e)}}))),a.createElement("div",{className:"col-md-12"},a.createElement("img",{src:N||"",width:"100%"}))))))))))})},t}(a.Component);t.default=F}});