webpackJsonp([10,22,34,39,57,63,64,68,69],{1036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),l=(n.n(a),n(691)),s=n(1128),r=n(631),c=n(99),i=n(668),o=n(614),m=n(21),d=n(30),u=n(605),p=n(29),h=n(993),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),g=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={schedule:Object(),Moncon:Object(),intesisHome_Device:Object(),InsightInfo:Object(),building:!1,RelayBoardInfo:Object()},n.update_Schedule=n.update_Schedule.bind(n),n.saveSchedule=n.saveSchedule.bind(n),n.fetchSchedule=n.fetchSchedule.bind(n),n.resetSchedule=n.resetSchedule.bind(n),n._fetchRelayBoardInfo=n._fetchRelayBoardInfo.bind(n),n}return f(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e,t,n,a,l,s,c,i,m,u,p;return b(this,function(h){switch(h.label){case 0:return e=this.props,t=e.buildingName,n=e.InsightName,a=e.type,t&&a&&a.length>0?(l=!!(a&&a.length>0&&"Building"==a),[4,Object(o.k)(n,t)]):[3,7];case 1:return s=h.sent(),[4,this.fetchSchedule(l)];case 2:return c=h.sent(),i=-1!=s.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),m=Object(),u=Object(),(p=localStorage.getItem(s.deviceID))&&p.length>0&&"undefined"!=p?i?(m=JSON.parse(p),[3,6]):[3,3]:[3,6];case 3:return s.deviceName?[4,Object(r.z)(t,s.deviceName).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})]:[3,5];case 4:return u=h.sent(),[3,6];case 5:u=JSON.parse(p),h.label=6;case 6:this.setState({Moncon:s,schedule:c,InsightInfo:u,intesisHome_Device:m,building:l},function(){}),h.label=7;case 7:return[2]}})})},t.prototype._fetchRelayBoardInfo=function(){return g(this,void 0,void 0,function(){var e,t;return b(this,function(n){switch(n.label){case 0:return e=this.state.Moncon,[4,Object(r.A)(e).then(function(t){if(!t||t&&t.error)return Object(d.a)("Error occurred while fetching relay board info."),Object();var n=JSON.stringify(t);return n=(n=n.replace(/'/g,'"')).replace(/^"(.*)"$/,"$1"),t=JSON.parse(n),localStorage.setItem(e.deviceID,JSON.stringify(t)),t}).catch(function(e){return Object()})];case 1:return t=n.sent(),this.setState({RelayBoardInfo:t}),[2]}})})},t.prototype.fetchSchedule=function(e){return g(this,void 0,void 0,function(){var t,n,a,l,s,c,i;return b(this,function(o){switch(o.label){case 0:return t=this.props,n=t.buildingName,a=t.InsightName,(l=Object()).deviceName=a,[4,Object(r.s)(n,a,e)];case 1:for(s=o.sent(),c=0;c<s.length;c++)i=i=s[c],l[Object(m.g)(i.day)]||(l[Object(m.g)(i.day)]=[]),l[Object(m.g)(i.day)].push({setPoint:Object(m.g)(i.setPoint),setHeatPoint:Object(m.g)(i.setHeatPoint),setCoolPoint:Object(m.g)(i.setCoolPoint),setRelayStatus:Object(m.g)(i.setRelayStatus),setRelayName:Object(m.g)(i.setRelayName),start:Object(m.g)(i.start)});return[2,l]}})})},t.prototype.update_Schedule=function(e){this.setState({schedule:e})},t.prototype.saveSchedule=function(){return g(this,void 0,void 0,function(){var e,t,n,a,l,s,i,o,m,u,p,h;return b(this,function(f){switch(f.label){case 0:for(e=this.props,t=e.buildingName,n=e.ControlName,a=this.state,l=a.schedule,s=a.building,Object(c.a)(!0),i=Object.keys(l),o=0;o<i.length;o++)if("deviceName"!=(m=i[o]))for(u=l[m],p=0;p<u.length;p++)(h=u[p]).setPoint||h.setCoolPoint&&h.setHeatPoint||h.setRelayStatus||h.setRelayName||h.start||u.splice(p,1);return l.isRelayControl="RelayControl"==n,l.isThermoControl="InsightControl"==n,l.isIntesisControl="IntesisControl"==n,console.log(JSON.stringify(l)),this.setState({schedule:l}),[4,Object(r.N)(l,t,s).then(function(e){Object(c.a)(!1),Object(d.b)("Schedule updated successfully. ")}).catch(function(e){Object(c.a)(!1),console.log("error: ",e)})];case 1:return f.sent(),[2]}})})},t.prototype.resetSchedule=function(){return g(this,void 0,void 0,function(){var e,t,n,a;return b(this,function(l){switch(l.label){case 0:return e=this.props.buildingName,t=this.state,n=t.schedule,a=t.building,[4,Object(r.L)(n,e,a)];case 1:return l.sent()?(Object(d.b)("Successfully Reset your Schedule"),this.setState({schedule:Object()})):Object(d.a)("Error"),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.Moncon,r=t.schedule,c=t.InsightInfo,o=t.intesisHome_Device,m=t.building,d=this.props,f=d.instance,g=d.buildingName,b=d.InsightName,v=d.ControlName,E=d.type,y=d.hideTabs,N=d.isDefrost,O=n&&n.monitoringControlDeviceType&&-1!=n.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),C=o&&o.services&&o.services["com.intesishome.setpoint-temp"]?o.services["com.intesishome.setpoint-temp"].value:0,S=o&&o.services&&o.services["com.intesishome.user-mode"]&&o.services&&o.services["com.intesishome.user-mode"].value,T=localStorage.getItem("hvacUNIT");return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12  col-sm-12 col-xs-12"},!m&&!y&&a.createElement(i.a,{InsightName:b,buildingName:g,instance:f,ControlName:v,type:E,isCompressorDefrost:N}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},!m&&a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 tempCounter roomTemp",style:{height:"300px"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"header pull-left",style:{textAlign:"left"}},T&&a.createElement("h4",{className:"title"},a.createElement("strong",null,"HVAC:")," (",T,")"),a.createElement("h3",{className:"title"},!N&&a.createElement("strong",null,n.rdfsLabel)," ",N&&a.createElement("strong",null,"Box name ",a.createElement("br",null)," Defrost Inhibit")," "),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Manufacturer:")," ",n.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Model:")," ",n.model)," ",a.createElement("br",null),a.createElement("br",null))),a.createElement("div",{className:"col-md-3 col-md-offset-3 col-sm-12 col-xs-12"},a.createElement("div",{className:"header"},!O&&c&&"CompressorControl"!=v&&a.createElement(a.Fragment,null,c.mode===l.c.HEAT&&a.createElement(a.Fragment,null,a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},Object(p.a)(c.heattemp).toFixed(2),"\xb0F")),c.mode===l.c.COOL&&a.createElement(a.Fragment,null,a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(p.a)(c.cooltemp).toFixed(2),"\xb0F")),(c.mode===l.c.AUTO||c.mode===l.c.OFF)&&a.createElement(a.Fragment,null,a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},Object(p.a)(c.heattemp).toFixed(2),"\xb0F"),a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(p.a)(c.cooltemp).toFixed(2),"\xb0F"))),O&&S&&"CompressorControl"!=v&&a.createElement(a.Fragment,null,a.createElement("div",null,"Mode:"," ",S==h.b.AUTO?"AUTO":S==h.b.COOL?"COOL":S==h.b.DRY?"DRY":S==h.b.FAN?"FAN":S==h.b.HEAT?"HEAT":"NONE"),a.createElement("div",{className:"counter"},Object(p.a)(C).toFixed(2),"\xb0F")),"CompressorControl"==v&&!N&&a.createElement(a.Fragment,null,a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(p.a)(c.heattemp).toFixed(2),"\xb0F")))))),m&&a.createElement("div",{className:"col-md-8 col-sm-12 col-xs-12 tempCounter roomTemp",style:{height:"300px"}}),a.createElement("div",{className:"col-md-7 col-sm-12 col-xs-12 dataCard"},a.createElement("div",{className:"card hidden-sm hidden-xs"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"35px"}},"Day"),"RelayControl"==v&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"15px"}},"Set Relay"),"RelayControl"==v&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"30px"}},"Off/On"),"RelayControl"==v&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"45px"}},"Start"),"RelayControl"!=v&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"50px"}},"Set Point"),"RelayControl"!=v&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"50px"}},"Start"),a.createElement("div",{className:"col-md-3 headingText"},a.createElement("button",{className:"btn btn-primary btn-fill pull-right",style:{marginRight:"10px"},onClick:function(){document.getElementById("btnReset").click()}},"Reset Schedule")))),a.createElement(s.a,{schedule:r,day:"Monday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement(s.a,{schedule:r,day:"Tuesday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement(s.a,{schedule:r,day:"Wednesday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement(s.a,{schedule:r,day:"Thursday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement(s.a,{schedule:r,day:"Friday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement(s.a,{schedule:r,day:"Saturday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement(s.a,{schedule:r,day:"Sunday",update_Schedule:this.update_Schedule,ControlName:v,DeviceType:n.monitoringControlDeviceType,InsightInfo:c,isDefrost:N}),a.createElement("div",{className:"col-md-5 col-md-offset-3 center"},a.createElement("button",{className:"btn btn-success btn-fill",style:{marginRight:"2px"},onClick:function(){e.saveSchedule()}},"Save Schedule"),"\xa0",a.createElement("button",{className:"btn btn-primary btn-fill",onClick:function(){document.getElementById("btnReset").click()}},"Reset Schedule"))),a.createElement("button",{id:"btnReset",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmResetDialog"},"."),a.createElement(u.a,{instance:"",id:"ConfirmResetDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to reset Schedule?",heading:"Confirm...",onConfirmButtonClick:function(){e.resetSchedule()}})))))))))},t}(a.Component);t.default=v},1037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),l=(n.n(a),n(668)),s=n(691),r=n(631),c=n(99),i=n(30),o=n(614),m=n(21),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ADPData:[],spaceName:"",RelayADPData:Object(),compressorADP:Object()},n.handleChangeInputs=n.handleChangeInputs.bind(n),n.handleRelayChangeInputs=n.handleRelayChangeInputs.bind(n),n.SaveADP=n.SaveADP.bind(n),n._fetchADP=n._fetchADP.bind(n),n._fetchRelayADP=n._fetchRelayADP.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e,t,n,a,l,s,c,i,m;return p(this,function(d){switch(d.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.ControlName,l=this.state,s=l.spaceName,c=l.compressorADP,t&&n?"IntesisControl"!=a&&"InsightControl"!=a?[3,2]:[4,Object(o.k)(t,n)]:[3,6];case 1:return i=d.sent(),s=i.location,this._fetchADP(t,s),this.setState({spaceName:s}),[3,6];case 2:return"RelayControl"!=a?[3,4]:[4,this._fetchRelayADP(n,t)];case 3:return d.sent(),[3,6];case 4:return"CompressorControl"!=a?[3,6]:[4,Object(r.n)(this.props.buildingName,"fix")];case 5:m=d.sent(),c=m&&m.device?m:{BackTempWeight:30,BackTempActualWeight:50,FrontTempActualWeight:50,FrontTempWeight:40,HighDeadBandTemp:-.1,HighTemp:40,LowDeadBandTemp:.2,LowTemp:33.5,LowTimeBeforeRestart:10,MedianDeadBandTemp:-.1,MedianTemp:37.5,MedianTimeBeforeRestart:10,MinTimeBeforeRestart:10,SolidTempWeight:30,ThresholdAmps:3,ThresholdTemp:1,building:"bXut",device:""},this.setState({compressorADP:c}),d.label=6;case 6:return[2]}})})},t.prototype._fetchADP=function(e,t){return u(this,void 0,void 0,function(){var n,a,l,c,i,o,d;return p(this,function(u){switch(u.label){case 0:return n=this.state.ADPData,n=[],e&&t?[4,Object(r.o)(e)]:[3,3];case 1:return a=u.sent(),[4,Object(r.y)(t)];case 2:if(l=u.sent(),a&&a.length>0&&l&&l.length>0){for(c=0;c<a.length;c++)i=Object(),o=a[c],d=l[c],i.ontology=Object(m.g)(o.ontology),i.season=Object(m.g)(o.season),i.occType=Object(m.g)(o.occType),i.defaultTargetTemp=Object(m.g)(o.defaultTargetTemp),i.fanSetting=Object(m.g)(o.fanSetting),i.warmLittleTemp=Object(m.g)(d.warmLittleTemp),i.warmLittleHowBad=Object(m.g)(d.warmLittleHowBad),i.warmLotTemp=Object(m.g)(d.warmLotTemp),i.warmLotHowBad=Object(m.g)(d.warmLotHowBad),i.warmHardLimitTemp=Object(m.g)(d.warmHardLimitTemp),i.coolLittleTemp=Object(m.g)(d.coolLittleTemp),i.coolLittleHowBad=Object(m.g)(d.coolLittleHowBad),i.coolLotTemp=Object(m.g)(d.coolLotTemp),i.coolLotHowBad=Object(m.g)(d.coolLotHowBad),i.coolHardLimitTemp=Object(m.g)(d.coolHardLimitTemp),n.push(i);console.log(n),this.setState({ADPData:n})}else this.setState({ADPData:s.a});u.label=3;case 3:return[2]}})})},t.prototype._fetchRelayADP=function(e,t){return u(this,void 0,void 0,function(){var n=this;return p(this,function(a){switch(a.label){case 0:return e&&t?[4,Object(r.b)(e,t).then(function(e){var a=Object();e[0]?(a.device=Object(m.g)(e[0].device),a.A1=Object(m.g)(e[0].A1),a.A2=Object(m.g)(e[0].A2),a.B1=Object(m.g)(e[0].B1),a.B2=Object(m.g)(e[0].B2),a.C1=Object(m.g)(e[0].C1),a.C2=Object(m.g)(e[0].C2),a.D1=Object(m.g)(e[0].D1),a.D2=Object(m.g)(e[0].D2),a.E1=Object(m.g)(e[0].E1),a.E2=Object(m.g)(e[0].E2),a.F1=Object(m.g)(e[0].F1),a.F2=Object(m.g)(e[0].F2),a.G1=Object(m.g)(e[0].G1),a.G2=Object(m.g)(e[0].G2)):(a.device=t,a.A1="0",a.A2="0",a.B1="0",a.B2="0",a.C1="0",a.C2="0",a.D1="0",a.D2="0",a.E1="0",a.E2="0",a.F1="0",a.F2="0",a.G1="0",a.G2="0"),n.setState({RelayADPData:a})})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.handleChangeInputs=function(e,t){var n=this.state.ADPData;n[t][e.target.name]=e.target.value,this.setState({ADPData:n})},t.prototype.handleRelayChangeInputs=function(e){var t=this.state.RelayADPData;t[e.target.name]=e.target.value,this.setState({RelayADPData:t})},t.prototype.handleCompressorChangeInputs=function(e,t,n){var a=this.state.compressorADP,l=0;l=-1!=e.indexOf("Weight")||-1!=e.indexOf("Time")||-1!=e.indexOf("Threshold")?1:.1;var s=n?t+l:t-l;s=parseFloat(s.toFixed(1)),a[e]=s,this.setState({compressorADP:a})},t.prototype.SaveADP=function(){return u(this,void 0,void 0,function(){var e,t,n,a,l,s,o,m;return p(this,function(d){switch(d.label){case 0:return e=this.state,t=e.ADPData,n=e.spaceName,a=e.RelayADPData,l=this.props,s=l.buildingName,o=l.InsightName,m=l.ControlName,Object(c.a)(!0),"RelayControl"!=m?[3,2]:(a.building=s,a.device=o,[4,Object(r.k)(a).then(function(e){e?(console.log(e),Object(i.b)("Successfully Save")):Object(i.a)("Something Went Wrong")}).catch(function(e){console.log("error: ",e)})]);case 1:return d.sent(),[3,6];case 2:return"IntesisControl"!=m&&"InsightControl"!=m?[3,4]:[4,Object(r.i)(t,s,o,n).then(function(e){e?(console.log(e),Object(i.b)("Successfully Save")):Object(i.a)("Something Went Wrong")}).catch(function(e){console.log("error: ",e)})];case 3:return d.sent(),this._fetchADP(o,n),[3,6];case 4:return"CompressorControl"!=m?[3,6]:(this.state.compressorADP.building=this.props.buildingName,[4,Object(r.M)(this.state.compressorADP)]);case 5:d.sent(),d.label=6;case 6:return Object(c.a)(!1),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.InsightName,s=t.buildingName,r=t.instance,c=t.ControlName,i=t.type,o=t.hideTabs,m=this.state,d=m.ADPData,u=m.RelayADPData,p=m.compressorADP;return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},!o&&a.createElement(l.a,{InsightName:n,ControlName:c,buildingName:s,instance:r,type:i}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:""},("IntesisControl"==c||"InsightControl"==c)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row cell_border hidden-sm hidden-xs",style:{padding:"0px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{padding:"0px 0px",height:"91px"}},a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"4%"}},"Season"),a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"10%"}},"Occ. Type"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"91px",paddingTop:"4%",paddingLeft:"4%"}},"Default Target F\xb0"),a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"10%"}},"Fan Setting")),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 cell_border",style:{height:"91px"}},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},"Too Warm")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A little")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A Lot")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"69px",paddingTop:"2%",paddingLeft:"3%"}},"Hard limit F\xb0"))))),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 cell_border",style:{height:"91px"}},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12  col-xsm-12"},"Too Cool")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A little")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A Lot")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6  col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6  col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-2 col-sm-2  col-xs-6  cell_border",style:{height:"69px",paddingTop:"2%",paddingLeft:"3%"}},"Hard limit F\xb0")))))),a.createElement("br",null),d&&d.map(function(t,n){return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12 "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Season"),t.season),a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Occ. Type")," ",t.occType),a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Default Target F\xb0"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"defaultTargetTemp",value:t.defaultTargetTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 trim-data"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Fan Setting"),a.createElement("div",{className:"form-group",style:{margin:"0px"}},a.createElement("select",{className:"form-control form-control-adp",value:t.fanSetting,name:"fanSetting",onChange:function(t){e.handleChangeInputs(t,n)}},a.createElement("option",{value:""},"Fan Setting"),a.createElement("option",{value:"AUTO_HI"},"AUTO_HI"),a.createElement("option",{value:"AUTO_LO"},"AUTO_LO"),a.createElement("option",{value:"MEET_TURNOVER_REQTS"},"MEET_TURNOVER_REQTS")))))),a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12",style:{width:"57%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Little Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLittleTemp",value:t.warmLittleTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Little HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLittleHowBad",value:t.warmLittleHowBad,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Lot Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLotTemp",value:t.warmLotTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12  col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Lot HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLotHowBad",value:t.warmLotHowBad,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 no-padding",style:{width:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Hard Limit Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmHardLimitTemp",value:t.warmHardLimitTemp,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-6 col-sm-12  col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Little Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLittleTemp",value:t.coolLittleTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Little HowBad"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLittleHowBad",value:t.coolLittleHowBad,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Lot Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLotTemp",value:t.coolLotTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Lot HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLotHowBad",value:t.coolLotHowBad,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-2 col-sm-12  col-xs-12 no-padding",style:{width:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Hard Limit Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolHardLimitTemp",value:t.coolHardLimitTemp,onChange:function(t){e.handleChangeInputs(t,n)}})))))))})),"RelayControl"==c&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row cell_border hidden-sm hidden-xs",style:{padding:"0px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 grid-header"},"Description"),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3 grid-header"},"Settings Variable Under Normal"),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3 grid-header"},"Settings Variable Under Optimize")),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance High Limit \u2013 0-1000 Lumens"),"Illuminance High Limit \u2013 0-1000 Lumens"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A1")," A1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"A1",onChange:this.handleRelayChangeInputs,value:u.A1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A2")," A2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"A2",onChange:this.handleRelayChangeInputs,value:u.A2}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance High Limit Time Delay to initiate OFF - Sec "),"Illuminance High Limit Time Delay to initiate OFF - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B1")," B1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"B1",onChange:this.handleRelayChangeInputs,value:u.B1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B2")," B2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"B2",onChange:this.handleRelayChangeInputs,value:u.B2}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance Low Limit \u2013 0-1000 Lumens"),"Illuminance Low Limit \u2013 0-1000 Lumens"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C1")," C1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"C1",onChange:this.handleRelayChangeInputs,value:u.C1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C2")," C2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"C2",onChange:this.handleRelayChangeInputs,value:u.C2}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance Low Limit Time Delay to initiate ON - sec"),"Illuminance Low Limit Time Delay to initiate ON - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D1")," D1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"D1",onChange:this.handleRelayChangeInputs,value:u.D1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D2")," D2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"D2",onChange:this.handleRelayChangeInputs,value:u.D2}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"IlluminaMotion Detection Time Delay to initiate light OFF"),"Motion Detection Time Delay to initiate light OFF"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E1")," E1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"E1",onChange:this.handleRelayChangeInputs,value:u.E1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E2")," E2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"E2",onChange:this.handleRelayChangeInputs,value:u.E2}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Blue Tooth (BT) High Limit initiate On - Integer"),"Blue Tooth (BT) High Limit initiate On - Integer"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F1")," F1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"F1",onChange:this.handleRelayChangeInputs,value:u.F1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F2")," F2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"F2",onChange:this.handleRelayChangeInputs,value:u.F2}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"BT Time Delay to shut off upon below high limit - sec"),"BT Time Delay to shut off upon below high limit - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G1")," G1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"G1",onChange:this.handleRelayChangeInputs,value:u.G1})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G2")," G2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"G2",onChange:this.handleRelayChangeInputs,value:u.G2})))))),"CompressorControl"==c&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"}),a.createElement("div",{className:"col-md-6"},a.createElement("h4",{className:"center"},a.createElement("strong",null,"Temp Set"))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6 col-sm-12"},a.createElement("h5",{className:""},a.createElement("strong",null,"High Temperature"))),a.createElement("div",{className:"col-md-6 col-sm-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("HighTemp",p.HighTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.HighTemp))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("HighTemp",p.HighTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Temp"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("HighDeadBandTemp",p.HighDeadBandTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.HighDeadBandTemp))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("HighDeadBandTemp",p.HighDeadBandTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Median Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MedianTemp",p.MedianTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.MedianTemp))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MedianTemp",p.MedianTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Temp"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MedianDeadBandTemp",p.MedianDeadBandTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.MedianDeadBandTemp))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MedianDeadBandTemp",p.MedianDeadBandTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"}),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MedianTimeBeforeRestart",p.MedianTimeBeforeRestart,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.MedianTimeBeforeRestart," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MedianTimeBeforeRestart",p.MedianTimeBeforeRestart,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Low Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("LowTemp",p.LowTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.LowTemp))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("LowTemp",p.LowTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Temp"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("LowDeadBandTemp",p.LowDeadBandTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.LowDeadBandTemp))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("LowDeadBandTemp",p.LowDeadBandTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"}),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("LowTimeBeforeRestart",p.LowTimeBeforeRestart,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.LowTimeBeforeRestart," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("LowTimeBeforeRestart",p.LowTimeBeforeRestart,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Min Time Before Restart"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MinTimeBeforeRestart",p.MinTimeBeforeRestart,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.MinTimeBeforeRestart," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MinTimeBeforeRestart",p.MinTimeBeforeRestart,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Threshold Amps before evap fan forced on"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("ThresholdAmps",p.ThresholdAmps,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.ThresholdAmps," amps"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("ThresholdAmps",p.ThresholdAmps,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Threshold temp before evap fan turns on above/below control set point"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("ThresholdTemp",p.ThresholdTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.ThresholdTemp," deg"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("ThresholdTemp",p.ThresholdTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null))))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"}),a.createElement("div",{className:"col-md-7"},a.createElement("h4",{className:"center"},a.createElement("strong",null,"Temp Sensor"))),a.createElement("div",{className:"col-md-5"}),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Weights"))),a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Actual Weights")))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Front Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("FrontTempWeight",p.FrontTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.FrontTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("FrontTempWeight",p.FrontTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("FrontTempActualWeight",p.FrontTempActualWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.FrontTempActualWeight))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("FrontTempActualWeight",p.FrontTempActualWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Back Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("BackTempWeight",p.BackTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.BackTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("BackTempWeight",p.BackTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("BackTempActualWeight",p.BackTempActualWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.BackTempActualWeight))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("BackTempActualWeight",p.BackTempActualWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Solid Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("SolidTempWeight",p.SolidTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,p.SolidTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("SolidTempWeight",p.SolidTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null))))))))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("button",{className:"btn btn-success pull-left",onClick:function(){e.SaveADP()}},"Save ADP"),a.createElement("button",{className:"btn btn-danger pull-left",onClick:function(){}},"Cancel"))),a.createElement("br",null),"  ",a.createElement("br",null)))))))))},t}(a.Component);t.default=h},1114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),s=(n.n(l),n(691)),r=n(631),c=n(614),i=n(21),o=n(29),m=n(604),d=n(30),u=n(668),p=n(99),h=n(608),f=n(623),g=n(600),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__assign||function(){return(v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},E=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},N=0,O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={InsightInfo:Object(),Old_InsightInfo:Object(),InsightChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,filteredInsight:[],buildingOptimalTStat:[],spaceOptimalTStat:[],spaces:[],spacesOptimalInfo:[],avgBuildingOptimalTStat:Object(),buildingInsightInfos:[],spaceInsightInfos:[],avgSpaceOptimalTStat:Object(),buildingOptimal:!1,spaceOptimal:!1,scheduleSelected:!1,callInterval:!0,controlStatus:"Manual"},n.changeMode=n.changeMode.bind(n),n.changeOverrideState=n.changeOverrideState.bind(n),n.changeFanSetting=n.changeFanSetting.bind(n),n.increaseTemp=n.increaseTemp.bind(n),n.decreaseTemp=n.decreaseTemp.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchInsightInfo=n._fetchInsightInfo.bind(n),n.changeStateLocal=n.changeStateLocal.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleOptimize=n.handleOptimize.bind(n),n._fetchInsights=n._fetchInsights.bind(n),n._fetchSelectedTStatData=n._fetchSelectedTStatData.bind(n),n.handleOptimalSelection=n.handleOptimalSelection.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return E(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return e.sent(),[4,this._fetchInsights()];case 2:return e.sent(),[4,this.fetchThermostatInfo()];case 3:e.sent(),this._fetchInsightInfo(!1),e.label=4;case 4:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a),setInterval(function(){N++},1e3),a=setInterval(function(){var t=e.state,n=t.callInterval;!t.InsightChanged&&n&&N>=15&&(e._fetchInsightInfo(!1),Object(p.a)(!1))},15e3)},t.prototype.componentWillUnmount=function(){return E(this,void 0,void 0,function(){return y(this,function(e){return clearInterval(a),[2]})})},t.prototype.handleScheduleSelection=function(e){return E(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,Object(r.Q)(this.props.InsightName,e)];case 1:return t.sent(),e?Object(d.b)("Successfully Selected Schedule"):Object(d.b)("Successfully unSelected Schedule"),this.setState({scheduleSelected:e}),this._fetchData(),[2]}})})},t.prototype.handleOptimalSelection=function(e,t){var n=this.state,a=n.buildingOptimal,l=n.spaceOptimal;"spaceOptimal"==e?l=t:a=t,this.setState({spaceOptimal:l,buildingOptimal:a}),this.handleOptimize()},t.prototype.handleOptimize=function(){return E(this,void 0,void 0,function(){var e,t,n,a;return y(this,function(l){return e=this.state,t=e.avgBuildingOptimalTStat,n=e.avgSpaceOptimalTStat,a=e.spaceOptimal,e.buildingOptimal&&!a?this.setState({InsightInfo:t,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}):this.setState({InsightInfo:n,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}),[2]})})},t.prototype._fetchSelectedTStatData=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,s,o,m,u,p,h,f,g,b,v,E,N,O,C;return y(this,function(y){switch(y.label){case 0:e=this.state,t=e.buildingOptimalTStat,n=e.buildingInsightInfos,a=e.spaceInsightInfos,l=e.spaceOptimalTStat,s=e.buildingOptimal,o=e.spaceOptimal,p=0,y.label=1;case 1:return p<t.length?(m=t[p],(v=Object(i.g)(m.moncondevice))?[4,Object(c.k)(v,this.props.buildingName)]:[3,4]):[3,5];case 2:return E=y.sent(),[4,Object(r.r)(E).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 3:u=y.sent(),n.push(u),y.label=4;case 4:return p++,[3,1];case 5:p=0,y.label=6;case 6:if(!(p<l.length))return[3,12];if(h=l[p],!((f=h.spaceInsights)&&f.length>0))return[3,11];g=0,y.label=7;case 7:return g<f.length?(b=f[g],(v=Object(i.g)(b.moncondevice))?[4,Object(c.k)(v,this.props.buildingName)]:[3,10]):[3,11];case 8:return E=y.sent(),[4,Object(r.r)(E).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 9:N=y.sent(),a.push(N),y.label=10;case 10:return g++,[3,7];case 11:return p++,[3,6];case 12:return s=n.length>0,o=a.length>0,[4,Object(r.B)(n)];case 13:return O=y.sent(),[4,Object(r.B)(a)];case 14:return C=y.sent(),this.setState({avgBuildingOptimalTStat:O,avgSpaceOptimalTStat:C,buildingInsightInfos:n,spaceInsightInfos:a,buildingOptimal:s,spaceOptimal:o}),[2]}})})},t.prototype._fetchInsights=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,s,c,m,d,u,p,g,b,v,E;return y(this,function(N){switch(N.label){case 0:return(e=this.props.buildingName)?[4,Object(r.t)(e)]:[3,7];case 1:for(t=N.sent(),E=0;E<t.length;E++)n=t[E],Object(i.g)(n.moncondevice)&&Object(i.g)(n.rdfsLabel)&&Object(o.y)(Object(i.g)(n.moncondevice),Object(i.g)(n.rdfsLabel));for(a=this.state,l=a.spaces,s=a.spacesOptimalInfo,c=a.spaceOptimalTStat,m=a.buildingOptimalTStat,l=[],d=function(e){var n=t[e],a=Object(i.g)(n.space),s=Object(i.g)(n.spaceRdfsLabel);a&&s&&-1==l.findIndex(function(e){return e.ontology==a})&&l.push({ontology:a,rdfsLabel:s})},E=0;E<t.length;E++)d(E);s=[],c=[],m=[],u=function(e){var n,a,r,o,m,d,u;return y(this,function(p){switch(p.label){case 0:return n=l[e],[4,Object(h.e)(n.ontology)];case 1:return a=p.sent(),r=t.filter(function(e){return Object(i.g)(e.space)==n.ontology}),o={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:r},s.push.apply(s,[o]),m=t.find(function(e){return Object(i.g)(e.space)==n.ontology}),d=[],m&&(d=Object(i.g)(m.spaceOptimalTStats).split(",")),u={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:t.filter(function(e){return-1!=d.findIndex(function(t){return t==Object(i.g)(e.moncondevice)})})},c.push.apply(c,[u]),[2]}})},p=0,N.label=2;case 2:return p<l.length?[5,u(p)]:[3,5];case 3:N.sent(),N.label=4;case 4:return p++,[3,2];case 5:return[4,Object(f.c)(this.props.buildingName)];case 6:if((g=N.sent())&&g[0])for(b=g[0],b=(b=Object(i.g)(b.buildingOptimal)).split(","),v=function(e){var n=b[e],a=t&&t.length>0&&t[0]&&t.find(function(e){return Object(i.g)(e.moncondevice)==n});a&&m.push.apply(m,[a])},E=0;E<b.length;E++)v(E);this.setState({spaces:l,spacesOptimalInfo:s,spaceOptimalTStat:c,buildingOptimalTStat:m}),N.label=7;case 7:return[2]}})})},t.prototype._fetchData=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,s,r,o,d,u,f=this;return y(this,function(g){switch(g.label){case 0:return e=this.state.scheduleSelected,t=this.props,n=t.InsightName,a=t.buildingName,l=t.type,n?(Object(p.a)(!0),[4,Object(m.i)(this.props.buildingName)]):[3,6];case 1:return s=g.sent(),r=s&&s.length>0&&s.map(function(e){return{value:Object(i.g)(e.ontology),label:Object(i.g)(e.rdfsLabel)}}),o=Object(),d=Object(),"Optimal"!=l?[3,3]:[4,Object(h.e)(n)];case 2:return d=g.sent(),[3,5];case 3:return[4,Object(c.k)(n,a)];case 4:o=g.sent(),g.label=5;case 5:localStorage.getItem(o.deviceID)&&localStorage.getItem(o.deviceID).length>0&&(u=JSON.parse(localStorage.getItem(o.deviceID)),this.setState({InsightInfo:u,Old_InsightInfo:v({},u),InsightChanged:!1,currentChange:""})),e=o.isSchedule,this.setState({Moncon:o,space:d,EquipmentList:r,scheduleSelected:e},function(){return E(f,void 0,void 0,function(){return y(this,function(e){return[2]})})}),Object(p.a)(!1),g.label=6;case 6:return[2]}})})},t.prototype.fetchThermostatInfo=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,s,c;return y(this,function(i){switch(i.label){case 0:return Object(p.a)(!0),e=this.props,t=e.InsightName,n=e.buildingName,a=this.state,l=a.Moncon,s=a.controlStatus,this.setState({callInterval:!1}),[4,Object(r.z)(n,t).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(l.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return c=i.sent(),this.setState({InsightInfo:c,Old_InsightInfo:v({},c),InsightChanged:!1,currentChange:"",callInterval:!0,controlStatus:c.thermostatControlStatus?c.thermostatControlStatus:s}),Object(p.a)(!1),[2]}})})},t.prototype._fetchInsightInfo=function(e){return E(this,void 0,void 0,function(){var t,n,a,l;return y(this,function(s){switch(s.label){case 0:return e&&Object(p.a)(!0),t=this.state,n=t.Moncon,a=t.controlStatus,this.setState({callInterval:!1}),[4,Object(r.r)(n).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(n.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return(l=s.sent())?(l.thermostatControlStatus=a,l.insightName=this.props.InsightName,[4,Object(r.R)(this.props.buildingName,l)]):[3,3];case 2:s.sent(),this.setState({InsightInfo:l,Old_InsightInfo:v({},l),InsightChanged:!1,currentChange:"",callInterval:!0}),s.label=3;case 3:return e&&Object(p.a)(!1),[2]}})})},t.prototype.changeMode=function(e,t){e.mode=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"mode"})},t.prototype.changeOverrideState=function(e,t,n){"Local"==this.state.controlStatus&&"Remote"==n?(n="Manual",e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1})):"Manual"==n&&(e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1}))},t.prototype.changeFanSetting=function(e,t){e.fan=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"fan"})},t.prototype.increaseTemp=function(e,t){"Heat"==t?e.heattemp=(e.heattemp?e.heattemp:0)+.555556:e.cooltemp=(e.cooltemp?e.cooltemp:0)+.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.decreaseTemp=function(e,t){"Heat"==t?e.heattemp=e.heattemp-.555556:e.cooltemp=e.cooltemp-.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.cancelSend=function(){this.setState({InsightChanged:!1,currentChange:""}),this._fetchInsightInfo(!1)},t.prototype.resetChanges=function(e){return E(this,void 0,void 0,function(){var t=this;return y(this,function(n){return this.setState({InsightChanged:!1,currentChange:""},function(){return E(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this._fetchInsightInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return E(this,void 0,void 0,function(){var n=this;return y(this,function(l){return Object(p.a)(!0),this.setState({InsightChanged:!1,currentChange:""},function(){return E(n,void 0,void 0,function(){var n;return y(this,function(l){switch(l.label){case 0:return N=0,a&&clearInterval(a),"Local"!=(n=this.state.controlStatus)?[3,2]:[4,Object(r.Q)(this.props.InsightName,!1)];case 1:return l.sent(),[3,10];case 2:return"Manual"!=n?[3,4]:[4,Object(r.Q)(this.props.InsightName,!1)];case 3:return l.sent(),[3,10];case 4:return"Remote"!=n?[3,6]:[4,Object(r.Q)(this.props.InsightName,!1)];case 5:return l.sent(),[3,10];case 6:return"Schedule"!=n?[3,8]:[4,Object(r.Q)(this.props.InsightName,!0)];case 7:return l.sent(),[3,10];case 8:return"Optimize"!=n?[3,10]:[4,Object(r.Q)(this.props.InsightName,!1)];case 9:l.sent(),l.label=10;case 10:return t.thermostatControlStatus=n,t.insightName=this.props.InsightName,[4,Object(r.R)(this.props.buildingName,t)];case 11:return l.sent(),Object(r.G)(e,t,this.state.Old_InsightInfo).then(function(e){e.success?Object(d.b)("Changes applied successfully. "):e.error&&Object(d.a)(e.reason)}).catch(function(e){Object(d.a)("Some error orccured. ")}),this.setIntervalStart(),Object(p.a)(!1),[2]}})})}),[2]})})},t.prototype.changeStateLocal=function(e){this.setState({localBTNState:e,controlStatus:"Local",InsightChanged:!0,currentChange:"state"})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.state,n=t.InsightInfo,a=t.Moncon,r=t.space,c=t.InsightChanged,i=t.detailsExpanded,m=t.buildingOptimal,d=t.spaceOptimal,p=t.controlStatus,h=this.props,f=h.instance,b=h.buildingName,v=h.InsightName,E=h.type,y=h.hideTabs,N="Optimal"==E,O="Local"==p,C=n.mode==s.c.AUTO&&n.cooltemp<n.heattemp+.5;return l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},!y&&l.createElement(u.a,{InsightName:v,ControlName:"InsightControl",buildingName:b,instance:f,type:E}),l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,N?r.rdfsLabel:a.rdfsLabel)," "),!N&&l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",a&&a.relatedEquipment.map(function(t,n){return l.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==a.relatedEquipment.length?"":",")}),"STATUS:")," (",s.d[n.state],")"))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp pull-right"},l.createElement("div",null,"Room Temp"),l.createElement("div",{className:"counter"},Object(o.a)(n.spacetemp).toFixed(2),"\xb0F")),l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("div",{className:"row"},(n.mode==s.c.HEAT||n.mode==s.c.AUTO)&&l.createElement(l.Fragment,null,l.createElement("div",{className:(n.mode==s.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},l.createElement("div",null,"Heat To"),l.createElement("div",{className:"counter"},Object(o.a)(n.heattemp).toFixed(2),"\xb0F")),l.createElement("div",{className:(n.mode==s.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},l.createElement("div",{className:"btn-group-vertical"},l.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:O||C,onClick:function(){return e.increaseTemp(n,"Heat")}},l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-up"})),l.createElement("div",null,"Warmer")),l.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:O,onClick:function(){return e.decreaseTemp(n,"Heat")}},l.createElement("div",null,"Cooler"),l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-down"})))))),(n.mode==s.c.COOL||n.mode==s.c.AUTO)&&l.createElement(l.Fragment,null,l.createElement("div",{className:(n.mode==s.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},l.createElement("div",null,"Cool To"),l.createElement("div",{className:"counter"},Object(o.a)(n.cooltemp).toFixed(2),"\xb0F")),l.createElement("div",{className:(n.mode==s.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},l.createElement("div",{className:"btn-group-vertical"},l.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:O,onClick:function(){return e.increaseTemp(n,"Cool")}},l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-up"})),l.createElement("div",null,"Warmer")),l.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:O||C,onClick:function(){return e.decreaseTemp(n,"Cool")}},l.createElement("div",null,"Cooler"),l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-down"}))))))))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},l.createElement("div",{className:"btn-group"},!N&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:"btn btn-success "+("Local"==p?"btn-fill":""),onClick:function(){e.changeStateLocal(!0)}},"Local"),l.createElement("button",{type:"button",className:"btn btn-success "+("Remote"==p||"Schedule"==p||"Manual"==p||"Optimize"==p?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,s.e.ON,"Remote")}},"Remote"),l.createElement("button",{type:"button",disabled:O,className:"btn btn-success "+("Manual"==p?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,s.e.OFF,"Manual")}},"Manual")),l.createElement("button",{type:"button",className:"btn btn-success "+("Schedule"==p?"btn-fill":""),disabled:O,onClick:function(){e.setState({InsightChanged:!0,currentChange:"state",controlStatus:"Schedule"})}},"Schedule"),l.createElement("button",{type:"button",disabled:O,className:"btn btn-success "+("Optimize"==p?"btn-fill":""),onClick:function(){m&&d?document.getElementById("btnOptimize").click():e.handleOptimize()}},"Optimize"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",disabled:O,className:n.mode===s.c.OFF?"btn btn-fill":"btn",onClick:function(){return e.changeMode(n,s.c.OFF)}},"Off"),l.createElement("button",{type:"button",className:n.mode===s.c.HEAT?"btn btn-fill":"btn",disabled:O,onClick:function(){return e.changeMode(n,s.c.HEAT)}},"Heat"),l.createElement("button",{type:"button",className:n.mode===s.c.COOL?"btn btn-fill":"btn",disabled:O,onClick:function(){return e.changeMode(n,s.c.COOL)}},"Cool"),l.createElement("button",{type:"button",className:n.mode===s.c.AUTO?"btn btn-fill":"btn",disabled:O,onClick:function(){return e.changeMode(n,s.c.AUTO)}},"Auto")))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("div",{className:"InsightHeading"},l.createElement("i",{className:"fa fa-first-order"})," Fan"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n.fan===s.b.AUTO?"btn btn-fill":"btn",disabled:O,onClick:function(){return e.changeFanSetting(n,s.b.AUTO)}},"Auto"),l.createElement("button",{type:"button",className:n.fan===s.b.ON?"btn btn-fill":"btn",disabled:O,onClick:function(){return e.changeFanSetting(n,s.b.ON)}},"On")))),!N&&l.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){e.setState({detailsExpanded:!i})}},l.createElement("i",{className:i?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}))),l.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",a.wirelessConfig&&a.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",a.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",a.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",a.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",a.deviceID?a.deviceID:"")))),l.createElement("div",{className:c?"InsightApplyChanges":"hidden"},!C&&l.createElement("h4",null,"Do you want to apply these changes?"),C&&l.createElement("h4",null," Both heating and cooling could be on at the same time with these setpoints, please modify your request"),!C&&l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(a,n)}},"Apply Changes"))))),l.createElement("button",{id:"btnOptimize",style:{display:"none"},"data-toggle":"modal","data-target":"#showOptimizeDialog"},"."),l.createElement(g.a,{id:"showOptimizeDialog",cancelButtonId:"cancelOptimizeDialog",onSaveButtonClick:function(){e.handleOptimize()},saveButtonText:"Yes",showCancelButton:!0,showSaveButton:!1,cancelButtonText:"Cancel",heading:"Select One"},l.createElement("div",{className:"card padding-10"},l.createElement("div",{className:"row text-center col-md-offset-1"},m&&l.createElement("div",{onClick:function(){e.handleOptimalSelection("buildingOptimal",!0),e.setState({spaceOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},l.createElement("label",{className:"text-center title"}," Building Optimal ")),d&&l.createElement("div",{onClick:function(){e.handleOptimalSelection("spaceOptimal",!0),e.setState({buildingOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},l.createElement("label",{className:"text-center title"}," Space Optimal ")))))))))},t}(l.Component);t.default=O},1128:function(e,t,n){"use strict";var a=n(3),l=(n.n(a),n(691)),s=n(624),r=n.n(s),c=n(30),i=n(29),o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__assign||function(){return(m=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},p=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={schedule:Object(),relayBoardsList:[],isDefrost:n.props.isDefrost},n.addItem=n.addItem.bind(n),n.setDropdownValues=n.setDropdownValues.bind(n),n.onchangeHandler=n.onchangeHandler.bind(n),n.onSelectChangeHandler=n.onSelectChangeHandler.bind(n),n.onRelayStatusChangeHandler=n.onRelayStatusChangeHandler.bind(n),n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){return d(this,void 0,void 0,function(){var t=this;return u(this,function(n){return this.setState({schedule:e.schedule,deviceType:e.DeviceType,isDefrost:e.isDefrost},function(){t.setDropdownValues()}),[2]})})},t.prototype.setDropdownValues=function(){var e=this.state.deviceType,t=[];e&&-1==e.indexOf("OneRelay")?(t.push({ontology:"all",rdfsLabel:"All"}),t.push({ontology:"1",rdfsLabel:"Relay 1"}),t.push({ontology:"2",rdfsLabel:"Relay 2"}),t.push({ontology:"3",rdfsLabel:"Relay 3"}),t.push({ontology:"4",rdfsLabel:"Relay 4"})):t.push({ontology:"OneRelay",rdfsLabel:"Relay"}),this.setState({schedule:this.props.schedule,relayBoardsList:t})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.schedule,a=t.deviceType,l=this.props.day;n&&!n[l]&&(n[l]=[]);var s=new Date(new Date((new Date).setTime(0)).setHours(9)),r=s;n[l].length>0&&(r=n[l][n[l].length-1]&&n[l][n[l].length-1].start?new Date(new Date(n[l][n[l].length-1].start).setHours(new Date(n[l][n[l].length-1].start).getHours()+1)):s);a&&-1==a.indexOf("OneRelay")?n[l].push({setPoint:"",setRelayName:"",setRelayStatus:"",start:r}):n[l].push({setPoint:"",setRelayName:"OneRelay",setRelayStatus:"",start:r}),this.setState({schedule:n},function(){e.props.update_Schedule(n)})},t.prototype.removeItem=function(e){var t=this,n=this.state.schedule,a=this.props.day;n[a].splice(e,1),this.setState({schedule:n},function(){t.props.update_Schedule(n)})},t.prototype.onchangeHandler=function(e,t){var n=this,a=this.state.schedule,l=this.props.day;a[l][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onBlurSetPoint=function(e,t){var n=this,a=this.state.schedule,s=this.props,r=s.day,i=s.InsightInfo;i&&i.mode==l.c.AUTO&&a[r][e].setHeatPoint>=a[r][e].setCoolPoint&&("setHeatPoint"==t.target.name?a[r][e].setCoolPoint=a[r][e].setHeatPoint?parseInt(a[r][e].setHeatPoint)+1:parseInt(t.target.value)+1:a[r][e].setHeatPoint=a[r][e].setCoolPoint?parseInt(a[r][e].setCoolPoint)-1:parseInt(t.target.value)-1,Object(c.a)("Both heating and cooling could be on at the same time with these setpoints, please modify your request")),a[r][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onSelectChangeHandler=function(e,t){var n=this,a=this.state.schedule,l=this.props.day;a[l][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onRelayStatusChangeHandler=function(e,t,n){var a=this,l=this.state.schedule,s=this.props.day;l[s][e][t.target.name]=n,this.setState({schedule:l},function(){a.props.update_Schedule(l)})},t.prototype.startChangeHandler=function(e,t){var n=this,a=this.state.schedule,l=this.props.day;a[l][e].start=t.toString(),this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.render=function(){var e=this,t=this.props,n=t.day,s=t.ControlName,c=t.InsightInfo,o=this.state,d=o.schedule,u=o.relayBoardsList,h=o.deviceType,f=o.isDefrost,g=h&&-1!=h.indexOf("OneRelay"),b=function(e){var t=e.value,n=p(e,["value"]);return a.createElement("input",m({value:t.toLocaleString()},n))};return a.createElement(a.Fragment,null,a.createElement("div",{className:"card"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 headingText",style:{paddingLeft:30,paddingTop:15}},n),a.createElement("div",{className:"col-md-10 col-sm-12 col-xs-12 headingText no-padding"},d[n]&&d[n].map(function(t,n){var o=new Date(new Date((new Date).setTime(0)).setHours(9)),m=t.start&&t.start.toString().length>10?new Date(t.start):o;return m=Object(i.w)(m),a.createElement("div",{className:"row padding-5"},"RelayControl"==s&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-6"},a.createElement("select",{className:"form-control",name:"setRelayName",disabled:g,value:t.setRelayName,onChange:function(t){e.onSelectChangeHandler(n,t)}},!g&&a.createElement("option",{value:"",key:-2},"Select"),u.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology},e.rdfsLabel," ")}))),a.createElement("div",{className:"col-sm-6"},a.createElement("button",{type:"button",className:"off"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"off")}},"Off"),a.createElement("button",{type:"button",className:"on"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"on")}},"On")))),"CompressorControl"==s&&f&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12 center"},a.createElement("button",{type:"button",className:"off"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"Inhibit")}},"Inhibit"),a.createElement("button",{type:"button",className:"on"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"Released")}},"Released")))),"CompressorControl"==s&&!f&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Cool Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})))),h&&h.toLowerCase().indexOf("thermostat")>-1&&a.createElement(a.Fragment,null," ","RelayControl"!=s&&c&&c.mode==l.c.HEAT&&a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Heat Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setHeatPoint,name:"setHeatPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})),"RelayControl"!=s&&c&&c.mode==l.c.COOL&&a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Cool Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})),"RelayControl"!=s&&c&&(c.mode==l.c.AUTO||c.mode==l.c.OFF)&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6",style:{padding:"4px"}},a.createElement("span",null,"Heat To"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setHeatPoint,name:"setHeatPoint",onChange:function(t){e.onchangeHandler(n,t)},onBlur:function(t){e.onBlurSetPoint(n,t)},style:{border:"1px solid gray"}})),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6",style:{padding:"4px"}},a.createElement("span",null,"Cool To"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},onBlur:function(t){e.onBlurSetPoint(n,t)},style:{border:"1px solid gray"}}))))," "),h&&h.toLowerCase().indexOf("intesis")>-1&&a.createElement(a.Fragment,null," ",a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setPoint,name:"setPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}}))),a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Start"),a.createElement(r.a,{className:"form-control",selected:m,name:"start",onChange:function(t){e.startChangeHandler(n,t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"hh:mm aa",timeIntervals:15,customInput:a.createElement(b,{value:m.toLocaleTimeString(),onChange:function(t){e.startChangeHandler(n,t)}})})),a.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 headingText"},a.createElement("button",{className:"btn-sm btn-danger active shortcut-btn",onClick:function(){e.removeItem(n)}},"X")))}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-md-offset-3",style:{paddingTop:"10px",textAlign:"center"}},a.createElement("button",{className:"btn btn-success",onClick:function(){e.addItem()}},a.createElement("i",{className:"fa fa-plus"}))))))},t}(a.Component);t.a=h},1129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),l=(n.n(a),n(668)),s=n(994),r=n(614),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},enclosure:"",deviceNumber:""}},n}return c(t,e),t.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){var e,t,n,a;return o(this,function(l){switch(l.label){case 0:return e=this.props,t=e.buildingName,n=e.InsightName,[4,Object(r.k)(n,t)];case 1:return a=l.sent(),this.setState({Moncon:a}),[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,r=e.InsightName,c=e.ControlName,i=e.type,o=e.hideTabs,m=this.state.Moncon;return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!o&&a.createElement(l.a,{InsightName:r,buildingName:n,instance:t,ControlName:c,type:i}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement(s.default,{instance:t,deviceName:r,buildingName:n,isInTab:!0,deviceId:m.deviceID}))))))},t}(a.Component);t.default=m},1130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),l=(n.n(a),n(668)),s=n(614),r=n(608),c=n(1131),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},d=function(e){function t(t){var n=e.call(this,t)||this;return n.graphTypes={"Ambient Temp":"http://18.188.22.84:5601/app/kibana#/visualize/edit/ac22fe30-2a9c-11e9-ac7b-91aa8480a091?embed=true&_g=(refreshInterval:(pause:!f,value:5000),time:(from:now-4h,mode:quick,to:now))&_a=(filters:!(),linked:!f,query:(language:lucene,query:''),uiState:(),vis:(aggs:!(),params:(expression:'.es(index%3D+test*,metric%3Davg:properties.cooltemp,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.spacetemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.heattemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.fan,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.fanstate,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.mode,timefield%3Dproperties.@timestamp)',interval:auto),title:thermostat,type:timelion))","Set Point":"","Outside Temp":"",Combined:"http://18.188.117.70:3000/d/Hgyp5OpZz/office-lab?tab=queries&orgId=1&fullscreen&edit&panelId=4&_g=(refreshInterval:(pause:!f,value:3000),time:(from:now-4h,mode:quick,to:now))&refresh=3s"},n.state={selectedMode:"Combined",selectedGraph:"",InsightInfo:Object(),HVAC_List:[],Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1}},n.onGraphTypeChange=n.onGraphTypeChange.bind(n),n._fetchData=n._fetchData.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.onGraphTypeChange=function(e){this.setState({selectedMode:e,selectedGraph:this.graphTypes[e]})},t.prototype._fetchData=function(){return o(this,void 0,void 0,function(){var e,t,n,a,l,c,i=this;return m(this,function(d){switch(d.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.type,t?(l=Object(),c=Object(),"Optimal"!=a?[3,2]:[4,Object(r.e)(t)]):[3,5];case 1:return c=d.sent(),[3,4];case 2:return[4,Object(s.k)(t,n)];case 3:l=d.sent(),d.label=4;case 4:this.setState({selectedGraph:"Optimal"==a?c.graphURL:l.graphURL,Moncon:l,space:c},function(){return o(i,void 0,void 0,function(){return m(this,function(e){return[2]})})}),d.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,s=e.InsightName,r=e.ControlName,i=e.type,o=e.hideTabs,m=this.state,d=m.selectedGraph,u=m.Moncon,p=u&&u.monitoringControlDeviceType&&-1!=u.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),h=u&&u.monitoringControlDeviceType&&-1!=u.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),f=u&&u.monitoringControlDeviceType&&-1!=u.monitoringControlDeviceType.toLowerCase().indexOf("relayi1");return d=d&&-1!=d.indexOf("http")?d:"https://"+d,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!o&&a.createElement(l.a,{InsightName:s,buildingName:n,instance:t,ControlName:r,type:i}),a.createElement("div",{className:"card InsightsListGraph",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("div",{className:"content"},!p&&!h&&!f&&a.createElement(a.Fragment,null,!d&&a.createElement("p",{id:"txtnograph"},"No Graph Available"),d&&a.createElement("iframe",{src:d,height:"600",width:"100%"})),p&&a.createElement(a.Fragment,null,a.createElement(c.a,{Moncon:u,buildingName:n,instance:t})),h&&a.createElement(a.Fragment,null,a.createElement(c.a,{Moncon:u,buildingName:n,instance:t})),f&&a.createElement(a.Fragment,null,a.createElement(c.a,{Moncon:u,buildingName:n,instance:t}))))),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null))))))))},t}(a.Component);t.default=d},1131:function(e,t,n){"use strict";var a,l=n(3),s=(n.n(l),n(1068)),r=n.n(s),c=n(1069),i=(n.n(c),n(29)),o=n(624),m=n.n(o),d=n(99),u=n(631),p=n(633),h=n(21),f=n(600),g=n(10),b=n(30),v=n(612),E=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},N=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},O={height:600},C={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"\xb0F"}},S={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp, W, On/Off, Volts"}},T={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp"}},w={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"W"}},I={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"State"}},x={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Volts"}},_=function(e){function t(t){var n=e.call(this,t)||this,a=new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-1)),l=new Date(Date.now());return n.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},fourRelayGraphData:{x:"x",columns:[]},from:a,to:l,timeIntervalLog:{buildingName:n.props.buildingName,minutes:0,seconds:0},isRelayV4Device:!1,isRelayI1Device:!1,isIntesisDevice:!1,btnSeparateGraph:!1,btngraph:!1,showGraph:!1,topic:""},n.handleGraph=n.handleGraph.bind(n),n.handleFromTimeChange=n.handleFromTimeChange.bind(n),n.handleToTimeChange=n.handleToTimeChange.bind(n),n.fetchIntesisGraphData=n.fetchIntesisGraphData.bind(n),n.getRelayV4GraphData=n.getRelayV4GraphData.bind(n),n.fetchGrapgData=n.fetchGrapgData.bind(n),n.handleTimeIntervalChange=n.handleTimeIntervalChange.bind(n),n.saveTimeLog=n.saveTimeLog.bind(n),n.getTimeLog=n.getTimeLog.bind(n),n.showgraphData=n.showgraphData.bind(n),n}return E(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return N(this,function(e){switch(e.label){case 0:return Object(i.x)(!1),[4,this.getTimeLog()];case 1:return e.sent(),[2]}})})},t.prototype.handleGraph=function(){var e=[75,72,70,65,66,68,77,80],t=[73,78,72,68,74,80,65,69],n=[70,82,65,62,76,78,67,60],a=[];a=Object(i.k)(new Date(2020,0,1),new Date,8),e.unshift("heattemp"),t.unshift("cooltemp"),n.unshift("roomtemp"),a.unshift("x");var l={x:"x",columns:[a,e,t,n]};this.setState({graphData:l})},t.prototype.handleFromTimeChange=function(e){this.setState({from:e,graphData:{x:"x",columns:[]}})},t.prototype.handleToTimeChange=function(e){this.setState({to:e,graphData:{x:"x",columns:[]}})},t.prototype.handleTimeIntervalChange=function(e){var t=this.state.timeIntervalLog;t[e.target.name]=e.target.value,this.setState({timeIntervalLog:t})},t.prototype.fetchGrapgData=function(){return y(this,void 0,void 0,function(){var e,t,n,a;return N(this,function(l){return e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),t&&(this.getRelayV4GraphData(),this.setState({isRelayV4Device:t})),a&&(this.getRelayI1GraphData(),this.setState({isRelayI1Device:a})),n&&(this.fetchIntesisGraphData(),this.setState({isIntesisDevice:n})),[2]})})},t.prototype.fetchMQTTData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l;return N(this,function(s){switch(s.label){case 0:return e=this.state,t=e.from,n=e.to,a=e.topic,[4,Object(u.e)(a,t,n)];case 1:return l=s.sent(),console.log(l),[2]}})})},t.prototype.fetchIntesisGraphData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l,s,r,c,o,m,p,h,f=this;return N(this,function(g){switch(g.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,Object(d.a)(!0),l=[],s=[],r=[],c=[],o=[],m=[],p=[],h=[],e.deviceID?[4,Object(u.c)(e.deviceID,n,a).then(function(e){e.forEach(function(e){1!=isNaN(e.roomtemp)&&s.push(Object(i.a)(e.roomtemp)),1!=isNaN(e.setpoint)&&l.push(Object(i.a)(e.setpoint)),e.fanspeed?c.push(e.fanspeed):c.push("undefined"),e.horizontalvans?o.push(e.horizontalvans):o.push("undefined"),e.usermode?r.push(e.usermode):r.push("undefined"),e.verticalvans?m.push(e.verticalvans):m.push("undefined"),e.wifiSignal?p.push(e.wifiSignal):p.push("undefined"),h.push(new Date(e.timestamp))}),l.unshift("setpoint"),s.unshift("roomtemp"),c.unshift("fanspeed"),o.unshift("horizontalvans"),r.unshift("mode"),m.unshift("verticalvans"),p.unshift("wifiSignal"),h.unshift("x");var t={x:"x",columns:[h,l,s,c,o,r,m,p]};f.setState({graphData:t})})]:[3,2];case 1:g.sent(),g.label=2;case 2:return Object(d.a)(!1),[2]}})})},t.prototype.getRelayV4GraphData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l,s,r,c,i,o,m,p,f,g,b,v,E,y,O,C,S,T,w,I,x,_,D,j,L,A,R,k,B,F,M;return N(this,function(N){switch(N.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,l=[],s=[],r=[],c=[],i=[],o=[],m=[],p=[],f=[],g=[],b=[],v=[],E=[],y=this.state.btngraph,e.deviceID?(y||Object(d.a)(!0,"loading graph data..."),[4,Object(u.g)(e.topic,n,a)]):[3,4];case 1:if(!((O=N.sent()).length>0))return[3,3];for(C=0;C<O.length;C++)(S=O[C])&&(l.push(S.mAmps_relay1),s.push(S.mAmps_relay2),r.push(S.mAmps_relay3),c.push(S.mAmps_relay4),i.push(S.nominal_src_volts),o.push(S.power_Wt_relay1),m.push(S.power_Wt_relay2),p.push(S.power_Wt_relay3),T=Object(u.a)(parseInt(S.v4relay_state)),E.push(new Date(S.timestamp)),3==T.length?T="0"+T:2==T.length?T="00"+T:1==T.length&&(T="000"+T),w=T[3],I=T[2],x=T[1],_=T[0],f.push(w||"0"),g.push(I||"0"),b.push(x||"0"),v.push(_||"0"));return[4,Object(u.x)(e.deviceName)];case 2:D=N.sent(),j=[],D[0]?(L=D[0],A=Object(h.g)(L.relayNames),j=A.split(",")):(j.push("Relay 1"),j.push("Relay 2"),j.push("Relay 3"),j.push("Relay 4")),l.unshift(j[0]+" Amp"),s.unshift(j[1]+" Amp"),r.unshift(j[2]+" Amp"),c.unshift(j[3]+" Amp"),i.unshift("Nominal Source Volts"),o.unshift(j[0]+" Watts"),m.unshift(j[1]+" Watts"),p.unshift(j[2]+" Watts"),E.unshift("x"),f.unshift(j[0]+" State"),g.unshift(j[1]+" State"),b.unshift(j[2]+" State"),v.unshift(j[3]+" State"),k={x:"x",columns:[E,l,s,r,c]},B={x:"x",columns:[E,o,m,p]},F={x:"x",columns:[E,f,g,b,v]},M={x:"x",columns:[E,i]},(R={x:"x",columns:[E,l,s,r,c,o,m,p,f,g,b,v,i]}).columns[R.columns.length-1][1]&&this.setState({fourRelayGraphData:R}),k.columns[k.columns.length-1][1]&&this.setState({graphData:k}),B.columns[B.columns.length-1][1]&&this.setState({graphData2:B}),F.columns[F.columns.length-1][1]&&this.setState({graphData3:F}),i[i.length-1]&&this.setState({graphData4:M}),N.label=3;case 3:y||Object(d.a)(!1),N.label=4;case 4:return[2]}})})},t.prototype.getRelayI1GraphData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l,s,r,c,i,o,m,d,p,f,g,b,v,E;return N(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,l=[],s=[],r=[],c=[],i=[],o=[],m=[],d=[],[4,Object(u.f)(e.topic,a,n)];case 1:return(p=y.sent()).length>0?(p.forEach(function(e){e&&(l.push(e.i1relay_state),s.push(e.active_power_Watts),s.push(e.active_power_Watts),r.push(e.current_Amperes),c.push(e.frequency_Hz),i.push(e.import_active_energy_Wh),o.push(e.power_factor),m.push(e.voltage_volts),d.push(new Date(e.timestamp)))}),[4,Object(u.x)(e.deviceName)]):[3,3];case 2:f=y.sent(),g=[],f[0]?(b=f[0],v=Object(h.g)(b.relayNames),g=v.split(",")):g.push("Relay"),l.unshift(g[0]+" State"),s.unshift(g[0]+" Watts"),r.unshift(g[0]+"Amps"),c.unshift(g[0]+" frequency_Hz"),i.unshift(g[0]+" Watts/Hour"),o.unshift(g[0]+" Power Factor"),m.unshift(g[0]+" Volts"),d.unshift("x"),E={x:"x",columns:[d,l,s,s,r,c,i,o,m]},this.setState({graphData:E}),y.label=3;case 3:return[2]}})})},t.prototype.saveTimeLog=function(){return y(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:return e=this.state.timeIntervalLog,[4,Object(u.l)(e)];case 1:return t.sent()&&Object(b.b)("Successfully Save TimeInterval"),[2]}})})},t.prototype.getTimeLog=function(){return y(this,void 0,void 0,function(){var e,t;return N(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(u.h)(e)]:[3,2];case 1:t=n.sent(),console.log(t),t[0]?this.setState({timeIntervalLog:t[0]}):this.setState({timeIntervalLog:{buildingName:this.props.buildingName,minutes:0,seconds:0}}),n.label=2;case 2:return[2]}})})},t.prototype.showgraphData=function(){var e=this,t=this.state,n=t.btngraph,l=t.to,s=t.from;n=!n,this.setState({btngraph:n},function(){n?(a&&clearInterval(a),a=setInterval(function(){l=new Date,(s=new Date).setMinutes(s.getMinutes()-30),e.setState({to:l,from:s},function(){e.fetchGrapgData()})},5e3)):clearInterval(a)})},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.from,a=t.to,s=t.graphData,c=t.isRelayV4Device,i=t.graphData2,o=t.graphData3,d=t.graphData4,u=t.isRelayI1Device,h=t.isIntesisDevice,b=t.btnSeparateGraph,E=t.fourRelayGraphData,y=t.timeIntervalLog,N=t.btngraph,_=t.topic,D=JSON.parse(g.a.getItem("user")),j=Object(v.b)(D,"timeInterval","write"),L=[s.columns,i.columns,o.columns,d.columns],A={x:{show:!0},y:{show:!0}},R=l.createElement(r.a,{data:s,size:O,axis:c?T:C,unloadBeforeLoad:!0,grid:A}),k=l.createElement(r.a,{data:s,size:O,axis:u?T:C,unloadBeforeLoad:!0,grid:A}),B=l.createElement(r.a,{data:E,size:O,axis:S,unloadBeforeLoad:!0,grid:A}),F=l.createElement(r.a,{data:i,size:O,axis:w,unloadBeforeLoad:!0,grid:A}),M=l.createElement(r.a,{data:o,size:O,axis:I,unloadBeforeLoad:!0,grid:A}),P=l.createElement(r.a,{data:d,size:O,axis:x,unloadBeforeLoad:!0,grid:A});return l.createElement("div",{className:"row",id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"},s&&s.columns&&s.columns.length>0&&l.createElement(p.a,{filename:"DeviceStatusGraph",isArrayData:b,data:b?L:s.columns,ElementID:"divGraphs",isGraphData:!0,isLandscape:!0}))),l.createElement("br",null),l.createElement("div",{className:"row showhide timeLine"},l.createElement("div",{className:"col-md-4 col-sm-6"},!N&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-2 padding-5"},l.createElement("label",null,"From: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:n,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),l.createElement("div",{className:"col-md-4 col-sm-6"},!N&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"To: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-3 col-sm-6"},!N&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-2 padding-5"},l.createElement("label",null,"From: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:n,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),l.createElement("div",{className:"col-md-3 col-sm-6"},!N&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"To: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),l.createElement("div",{className:"col-md-6"},l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.fetchGrapgData()}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Load Graph"),l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({btnSeparateGraph:!b})},style:{margin:"0 5px"}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),b?"Combine":"Separate"," Graphs"),l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:this.showgraphData,style:{margin:"0 5px"}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),N?"Hide":"Show"," Live Graph"),j&&l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){document.getElementById("addTimeIntervalLog").click()}},"Add Time Log"))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-3 col-sm-6"},l.createElement("div",{className:"col-md-2 padding-5"},l.createElement("label",null,"From: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:n,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),l.createElement("div",{className:"col-md-3 col-sm-6"},l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"To: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),l.createElement("div",{className:"col-md-3 col-sm-6"},l.createElement("div",{className:"col-md-4 padding-5"},l.createElement("label",null,"Topic: \xa0")),l.createElement("div",{className:"col-md-8 no-padding"},l.createElement("input",{type:"text",id:"topic",name:"topic",className:"form-control "+(_?"":"addFieldValidate"),value:_,onChange:function(t){e.setState({topic:t.target.value})}}))),l.createElement("div",{className:"col-md-3"},l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.fetchMQTTData()}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Show MQTT Data"))),l.createElement("hr",null),h&&s&&s.columns&&s.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},R),u&&s&&s.columns&&s.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},k),!b&&c&&E&&E.columns&&E.columns.length>0&&l.createElement("div",{className:"row margin-top-25px  pdfDiv",id:"DeviceStatusGraph"},B),b&&c&&s&&i&&o&&d&&o.columns[1]&&d.columns[1]&&o.columns&&s.columns&&o.columns.length>0&&d.columns&&d.columns.length>0&&s.columns.length>0&&l.createElement(l.Fragment,null," ",l.createElement("div",{id:"DeviceStatusGraph"},l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},R),l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphWatt"},F),l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphState"},M),l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphVolts"},P)," ")," "),l.createElement("button",{id:"addTimeIntervalLog",className:"hidden","data-toggle":"modal","data-target":"#addTimeIntervalLogDialog",title:"Add"}," ",l.createElement("i",{className:"fa fa-plus"})," "),l.createElement(f.a,{id:"addTimeIntervalLogDialog",saveButtonText:"Save",heading:"Time Interval Log",onSaveButtonClick:function(){e.saveTimeLog()},disableSaveButton:!1},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3 padding-5"},l.createElement("label",null,"Time Interval:")))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12 col-md-offset-2"},l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"Minute:")," "),l.createElement("div",{className:"col-md-3"},l.createElement("input",{className:"form-control",type:"number",name:"minutes",value:y.minutes,onChange:function(t){e.handleTimeIntervalChange(t)}})),l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"Second:")," "),l.createElement("div",{className:"col-md-3"},l.createElement("input",{className:"form-control",type:"number",name:"seconds",value:y.seconds,onChange:function(t){e.handleTimeIntervalChange(t)}}))))))},t}(l.Component);t.a=_},1132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),s=(n.n(l),n(631)),r=n(614),c=n(21),i=n(30),o=n(668),m=n(99),d=n(604),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},h=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},g=0,b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),Old_RelayBoardInfo:Object(),RelayBoardInfo:Object(),I1RelayBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,spaces:[],relayControlStatusDesc:"",scheduleSelected:!1,relayisOn:!1,relayisOnNo:0,relayCensorStatus:Object(),relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,I1RelayStatus:!1,relayControlStatus:"Manual",relayControlType:"",isOptimizeControl:!1,isOptimizeControlStatus:"",RelayBoardControl:Object(),relayOptimizeSettings:"",I4RelayBoardInfo:Object(),relayNoOptimize:0,devices:[],callInterval:!0},n,n.fetchDevices=n.fetchDevices.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n._fetchRelayCensorStatus=n._fetchRelayCensorStatus.bind(n),n._fetchV4RelayBoardInfo=n._fetchV4RelayBoardInfo.bind(n),n._fetchI1RelayBoardInfo=n._fetchI1RelayBoardInfo.bind(n),n._fetchI4RelayBoardInfo=n._fetchI4RelayBoardInfo.bind(n),n.fetchRelayControlSettings=n.fetchRelayControlSettings.bind(n),n.saveRelayStatusChanges=n.saveRelayStatusChanges.bind(n),n.setOptimizeSettings=n.setOptimizeSettings.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.handleRelayOnOff=n.handleRelayOnOff.bind(n),n.handleRelayControlStatus=n.handleRelayControlStatus.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n.applyRule=n.applyRule.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return e.sent(),[4,this.fetchDevices()];case 2:return e.sent(),[4,this.resetChanges(!0)];case 3:e.sent(),e.label=4;case 4:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a),setInterval(function(){g++},1e3),a=setInterval(function(){var t=e.state,n=t.callInterval;!t.modelChanged&&n&&g>=15&&(e.resetChanges(!1),Object(m.a)(!1))},5e3)},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){return clearInterval(a),[2]})})},t.prototype.fetchDevices=function(){return h(this,void 0,void 0,function(){var e,t;return f(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(s.t)(e)]:[3,2];case 1:t=n.sent(),this.setState({devices:t}),n.label=2;case 2:return[2]}})})},t.prototype._fetchData=function(){return h(this,void 0,void 0,function(){var e,t,n,a,l,s,i,o,u,p,g,b,v,E=this;return f(this,function(y){switch(y.label){case 0:return e=this.state,t=e.scheduleSelected,n=e.relayControlType,a=this.props,l=a.RelayDeviceName,s=a.buildingName,l?(Object(m.a)(!0),[4,Object(d.i)(this.props.buildingName)]):[3,3];case 1:return i=y.sent(),o=i&&i.length>0&&i.map(function(e){return{value:Object(c.g)(e.ontology),label:Object(c.g)(e.rdfsLabel)}}),u=Object(),[4,Object(r.k)(l,s)];case 2:u=y.sent(),t=u.isSchedule,n=u.monitoringControlDeviceType,localStorage.getItem(u.deviceID)&&localStorage.getItem(u.deviceID).length>0&&(p=localStorage.getItem(u.deviceID))&&"undefined"!=p&&(-1!=n.indexOf("OneRelay")?(g=JSON.parse(localStorage.getItem(u.deviceID)),this.setState({I1RelayBoardInfo:g,modelChanged:!1,currentChange:""})):-1!=n.toLowerCase().indexOf("i4")?(b=JSON.parse(localStorage.getItem(u.deviceID)),this.setState({I4RelayBoardInfo:b,modelChanged:!1,currentChange:""})):(v=JSON.parse(localStorage.getItem(u.deviceID)),this.setState({RelayBoardInfo:v,modelChanged:!1,currentChange:""}))),this.setState({Moncon:u,EquipmentList:o,scheduleSelected:t,relayControlType:n},function(){return h(E,void 0,void 0,function(){return f(this,function(e){return this._fetchRelayCensorStatus(!0),-1!=n.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(!0):-1!=n.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(!0):this._fetchV4RelayBoardInfo(!0),this._fetchCeilingSensorBoardInfo(!0),this.fetchRelayControlSettings(),[2]})})}),Object(m.a)(!1),y.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n,a,l=this;return f(this,function(c){return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.props.buildingName,a="",t.sensors&&t.sensors.map(function(e){return h(l,void 0,void 0,function(){var t,l;return f(this,function(c){switch(c.label){case 0:return a=e.value,t=Object(),[4,Object(r.k)(a,n)];case 1:return"CeilingSensor"!=(t=c.sent()).monitoringControlDeviceType?[3,3]:[4,Object(s.m)(t).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching ceiling sensor board info."),Object()):e}).catch(function(e){return Object()})];case 2:return l=c.sent(),this.setState({CeilingSensorBoardInfo:l,modelChanged:!1,currentChange:""}),[2];case 3:return[2]}})})}),e&&Object(m.a)(!1),[2]})})},t.prototype._fetchI1RelayBoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n,a;return f(this,function(l){switch(l.label){case 0:return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.state.I1RelayStatus,[4,Object(s.f)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(a=l.sent())&&a.i1relay_state&&a.i1relay_state[0]&&(n="1"==a.i1relay_state[0]),a&&a.i1relay_state&&0==a.i1relay_state[0]&&(n=!1),this.setState({I1RelayBoardInfo:a,modelChanged:!1,currentChange:"",I1RelayStatus:n}),e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchV4RelayBoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n,a,l,r,c,o,d,u;return f(this,function(h){switch(h.label){case 0:return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,l=n.relay2Status,r=n.relay3Status,c=n.relay4Status,o=Object(),[4,Object(s.g)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(o=h.sent())&&o.v4relay_state&&(d=this.ConvertDecimalToBinary(parseInt(o.v4relay_state)),u=d.split(","),a="1"==u[0],l="1"==u[1],r="1"==u[2],c="1"==u[3]),this.setState({RelayBoardInfo:o,Old_RelayBoardInfo:p({},o),modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:l,relay3Status:r,relay4Status:c}),e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchI4RelayBoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n,a,l,r,c,o;return f(this,function(d){switch(d.label){case 0:return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,l=n.relay2Status,r=n.relay3Status,c=n.relay4Status,o=Object(),[4,Object(s.p)(t).then(function(e){return!e||e&&e.error?(Object(i.a)("Error occurred while fetching relay board info."),Object()):(e&&localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return o=d.sent(),a=120==o.voltage_volts_Ch1,l=120==o.voltage_volts_Ch2,r=120==o.voltage_volts_Ch3,c=120==o.voltage_volts_Ch4,this.setState({modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:l,relay3Status:r,relay4Status:c,I4RelayBoardInfo:o}),e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchRelayCensorStatus=function(e){return h(this,void 0,void 0,function(){var t,n,a,l=this;return f(this,function(r){switch(r.label){case 0:return e&&Object(m.a)(!0),t=this.props,n=t.buildingName,a=t.RelayDeviceName,[4,Object(s.w)(n,a).then(function(e){var t=e[0];if(!t)return l.setState({relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,relayOptimizeSettings:"Normal,Normal,Normal,Normal,"}),Object();var n=Object();n.relayStatus=[],n.controlStatus=Object(c.g)(t.controlStatus),n.deviceType=Object(c.g)(t.deviceType);var a=l.state,s=a.relay1Status,r=a.relay2Status,i=a.relay3Status,o=a.relay4Status,m=a.relayControlStatus,d=a.I1RelayStatus,u=a.relayOptimizeSettings,p=Object(c.g)(t.relayStatus).split(",");-1!=n.deviceType.indexOf("OneRelay")?(p&&(n.relayStatus=p),m=Object(c.g)(t.controlStatus),l.setState({I1RelayStatus:d,relayControlStatus:m})):(p&&(n.relayStatus=p),m=Object(c.g)(t.controlStatus),l.setState({relay1Status:s,relay2Status:r,relay3Status:i,relay4Status:o,relayControlStatus:m}));var h="Optimize"==n.controlStatus||"Normal"==n.controlStatus;(u=Object(c.g)(t.relayOptimizeSettings))&&",,,,"!=u&&""!=u||(u=-1==n.deviceType.indexOf("OneRelay")?"Normal,Normal,Normal,Normal,":"Normal"),l.setState({isOptimizeControl:h,isOptimizeControlStatus:h?n.controlStatus:"",relayOptimizeSettings:u})}).catch(function(e){return Object()})];case 1:return r.sent(),e&&Object(m.a)(!1),[2]}})})},t.prototype.fetchRelayControlSettings=function(){return h(this,void 0,void 0,function(){var e,t,n,a,l,r;return f(this,function(i){switch(i.label){case 0:return e=this.props.RelayDeviceName,t=this.state,n=t.relayControlType,a=t.RelayBoardControl,[4,Object(s.x)(e)];case 1:return(l=i.sent())[0]?(r=l[0],n&&-1==n.indexOf("OneRelay")?a.relays="1,2,3,4":a.relays="OneRelay",a.controlChoice=Object(c.g)(r.controlChoice),a.relayNames=Object(c.g)(r.relayNames),a.lightingTypes=Object(c.g)(r.lightingTypes),a.sensors=Object(c.g)(r.sensors),a.activeRelayStatus=Object(c.g)(r.activeRelayStatus)):n&&-1==n.indexOf("OneRelay")?(a.relays="1,2,3,4",a.controlChoice="0,0,0,0",a.relayNames="Relay 1,Relay 2,Relay 3,Relay 4",a.lightingTypes="0,0,0,0",a.sensors="0,0,0,0",a.activeRelayStatus="active,active,active,active"):(a.relays="OneRelay",a.controlChoice="0",a.relayNames="Relay",a.sensors="0",a.lightingTypes="0",a.activeRelayStatus="active"),this.setState({RelayBoardControl:a}),[2]}})})},t.prototype.ConvertDecimalToBinary=function(e){for(var t=[],n=e;n>0;)n%2==0?t.push("0"):t.push("1"),n=Math.floor(n/2);if(-1==this.state.relayControlType.indexOf("OneRelay"))for(var a=4-t.length,l=0;l<a;l++)t.push("0");return t.join(",")},t.prototype.handleRelayOnOff=function(e,t,n){var a=this.state,l=a.relay1Status,s=a.relay2Status,r=a.relay3Status,c=a.relay4Status;1==t&&(l=e),2==t&&(s=e),3==t&&(r=e),4==t&&(c=e),this.setState({modelChanged:n,relayisOnNo:t,relayisOn:e,relay1Status:l,relay2Status:s,relay3Status:r,relay4Status:c})},t.prototype.handleI1RelayOnOff=function(e){this.setState({I1RelayStatus:e,modelChanged:!0})},t.prototype.handleChange=function(e,t){var n=this.state.RelayBoardInfo;n[e]=t,this.setState({RelayBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.handleRelayOptimizeSettings=function(e,t,n){return void 0===n&&(n=!0),h(this,void 0,void 0,function(){var a,l,s,r,c,i;return f(this,function(o){return a=this.state,l=a.relayOptimizeSettings,s=a.isOptimizeControl,r=a.modelChanged,c=a.relayNoOptimize,(i=l.split(","))[t]=e,s=!0,r=n,l=i.join(","),c=t+1,this.setState({isOptimizeControlStatus:e,relayOptimizeSettings:l,isOptimizeControl:s,modelChanged:r,relayNoOptimize:c}),[2]})})},t.prototype.handleRelayControlStatus=function(e){return h(this,void 0,void 0,function(){var t=this;return f(this,function(n){switch(n.label){case 0:return"Remote"==e&&"Local"!=this.state.relayControlStatus?[2]:("Remote"==e&&"Local"==this.state.relayControlStatus&&(e="Manual"),[4,this.saveRelayStatusChanges(e,!0).then(function(){return h(t,void 0,void 0,function(){var t,n,a;return f(this,function(l){return this.setState({relayControlStatus:e,isOptimizeControl:!1}),"Local"!=e&&"Schedule"!=e&&"Manual"!=e||(t=this.state,n=t.isOptimizeControl,a=t.modelChanged,n=!0,a=!0,this.setState({isOptimizeControlStatus:e,isOptimizeControl:n,modelChanged:a})),[2]})})})]);case 1:return n.sent(),[2]}})})},t.prototype.cancelSend=function(){var e=this.state,t=e.relay1Status,n=e.relay2Status,a=e.relay3Status,l=e.relay4Status,s=e.I1RelayStatus,r=e.relayCensorStatus,c=e.relayControlType,i=e.relayOptimizeSettings,o=e.isOptimizeControl,m=e.relayNoOptimize;if(-1!=c.indexOf("OneRelay"))s=!s,this.setState({I1RelayStatus:s,modelChanged:!1,isOptimizeControl:!1});else{if(r&&r.relayStatus&&r.relayStatus.length>0&&(t="1"==r.relayStatus[0],n="1"==r.relayStatus[1],a="1"==r.relayStatus[2],l="1"==r.relayStatus[3],this.setState({relay1Status:t,relay2Status:n,relay3Status:a,relay4Status:l})),o){var d=i.split(",");d[m]="Normal"==d[m]?"Optimize":"Normal",i=d.join(",")}this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",relayOptimizeSettings:i,relayNoOptimize:0})}},t.prototype.setOptimizeSettings=function(e,t){return h(this,void 0,void 0,function(){var n,a,l,r=this;return f(this,function(o){switch(o.label){case 0:return n=this.props,a=n.buildingName,l=n.RelayDeviceName,[4,Object(s.b)(a,l).then(function(n){return h(r,void 0,void 0,function(){var a,r,o,m,d,u,p,g,b,v,E,y,N,O,C,S,T,w=this;return f(this,function(I){switch(I.label){case 0:return a=Object(),n[0]?(a.device=Object(c.g)(n[0].device),a.A1=Object(c.g)(n[0].A1),a.A2=Object(c.g)(n[0].A2),a.B1=Object(c.g)(n[0].B1),a.B2=Object(c.g)(n[0].B2),a.C1=Object(c.g)(n[0].C1),a.C2=Object(c.g)(n[0].C2),a.D1=Object(c.g)(n[0].D1),a.D2=Object(c.g)(n[0].D2),a.E1=Object(c.g)(n[0].E1),a.E2=Object(c.g)(n[0].E2),a.F1=Object(c.g)(n[0].F1),a.F2=Object(c.g)(n[0].F2),a.G1=Object(c.g)(n[0].G1),a.G2=Object(c.g)(n[0].G2)):(a.device=l,a.A1="0",a.A2="0",a.B1="0",a.B2="0",a.C1="0",a.C2="0",a.D1="0",a.D2="0",a.E1="0",a.E2="0",a.F1="0",a.F2="0",a.G1="0",a.G2="0"),r=Object(),o=Object(),m=this.state,d=m.Moncon,u=m.relayNoOptimize,p=m.relayControlType,g=m.relayOptimizeSettings,b=m.RelayBoardControl,v=m.devices,E=m.relayControlStatus,y=e?e.split(","):g.split(","),r.isOptimize="Optimize"==y[(t||u)-1],r.isOptimize?(r.varA=parseInt(a.A2),r.varB=parseInt(a.B2),r.varC=parseInt(a.C2),r.varD=parseInt(a.D2),r.varE=parseInt(a.E2),r.varF=parseInt(a.F2),r.varG=parseInt(a.G2)):(r.varA=parseInt(a.A1),r.varB=parseInt(a.B1),r.varC=parseInt(a.C1),r.varD=parseInt(a.D1),r.varE=parseInt(a.E1),r.varF=parseInt(a.F1),r.varG=parseInt(a.G1)),r.deviceID=d.deviceName,r.relaynum=""+u,r.rlb_add=d.boardAddress,d.wirelessConfig.ipAddress&&(r.controllerPI=d.wirelessConfig.ipAddress,o.controllerPI=d.wirelessConfig.ipAddress),d.wirelessConfig.controllerIPAddress&&(r.controllerPI=d.wirelessConfig.controllerIPAddress,o.controllerPI=d.wirelessConfig.controllerIPAddress),-1!=p.toLowerCase().indexOf("v1")?r.rlb_ver="v1":-1!=p.toLowerCase().indexOf("v4")?r.rlb_ver="v4":-1!=p.toLowerCase().indexOf("i1")?r.rlb_ver="i1":-1!=p.toLowerCase().indexOf("i4")&&(r.rlb_ver="i4"),N=[],O=[],C=[],S=[],N=b.controlChoice&&b.controlChoice.split(","),O=b.lightingTypes&&b.lightingTypes.split(","),C=b.sensors&&b.sensors.split(","),S=b.relayNames&&b.relayNames.split(","),o.sched="Schedule"==E,o.controltype=o.sched?N[u-1]:"10",o.lighting_type=O[u-1],o.relaynum=""+u,o.rlb_ver=r.rlb_ver,o.rlb_add=d.boardAddress,o.deviceID=d.deviceName,C&&C[u-1]?(T=v.find(function(e){return Object(c.g)(e.moncondevice)==C[u-1]}),o.csb_add=T?Object(c.g)(T.boardAddress):"9999"):o.csb_add="9999",o.lighting_type&&"0"!=o.lighting_type&&o.controltype&&"0"!=o.controltype?[4,Object(s.I)(o,r)]:(Object(i.a)("Save the control settings for "+S[u-1]+" before posting settings"),[2]);case 1:return I.sent(),"A"!=O[u-1]?[3,11]:"0"!=C[u-1]?[3,11]:r.isOptimize?[4,this.handleRelayOnOff(!1,u,!1)]:[3,11];case 2:return I.sent(),[4,this.saveRelayStatusChanges(E,!1)];case 3:return I.sent(),-1==p.indexOf("OneRelay")?[3,7]:-1==p.indexOf("V1")?[3,4]:[3,6];case 4:return[4,Object(s.E)(d,!1).then(function(e){return h(w,void 0,void 0,function(){return f(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 5:I.sent(),I.label=6;case 6:return[3,11];case 7:return-1==p.indexOf("V4")?[3,9]:[4,Object(s.K)(d,!1,!1,u).then(function(e){return h(w,void 0,void 0,function(){return f(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 8:return I.sent(),[3,11];case 9:return[4,Object(s.F)(d,!1,!1,u).then(function(e){return h(w,void 0,void 0,function(){return f(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 10:I.sent(),I.label=11;case 11:return[2]}})})})];case 1:return o.sent(),[2]}})})},t.prototype.resetChanges=function(e){return h(this,void 0,void 0,function(){var t=this;return f(this,function(n){return this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",callInterval:!1},function(){return h(t,void 0,void 0,function(){var t;return f(this,function(n){switch(n.label){case 0:return t=this.state.relayControlType,[4,this._fetchRelayCensorStatus(e)];case 1:return n.sent(),-1!=t.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(e):-1!=t.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(e):this._fetchV4RelayBoardInfo(e),[4,this._fetchCeilingSensorBoardInfo(e)];case 2:return n.sent(),this.setState({callInterval:!0}),[2]}})})}),[2]})})},t.prototype.handleScheduleSelection=function(e){return h(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,Object(s.Q)(this.props.RelayDeviceName,e)];case 1:return t.sent(),e?Object(i.b)("Successfully Selected Schedule"):Object(i.b)("Successfully unSelected Schedule"),[2]}})})},t.prototype.saveRelayStatusChanges=function(e,t){return h(this,void 0,void 0,function(){var n,a,l,r,c,o,d,u,p,h,g,b,v;return f(this,function(f){switch(f.label){case 0:return t&&Object(m.a)(!0),n=this.props,a=n.buildingName,l=n.RelayDeviceName,r=this.state,c=r.relay1Status,o=r.relay2Status,d=r.relay3Status,u=r.relay4Status,p=r.relayCensorStatus,h=r.relayControlType,g=r.I1RelayStatus,b=r.relayOptimizeSettings,v=[],-1!=h.indexOf("OneRelay")?v.push(g?"1":"0"):(v.push(c?"1":"0"),v.push(o?"1":"0"),v.push(d?"1":"0"),v.push(u?"1":"0")),p.relayStatus=v,p.controlStatus=e,p.deviceType=h,p.device=l,p.relayOptimizeSettings=b.split(","),[4,Object(s.O)(a,p).then(function(e){}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 1:return f.sent(),t&&Object(m.a)(!1),[2]}})})},t.prototype.applyChanges=function(){return h(this,void 0,void 0,function(){var e=this;return f(this,function(t){return Object(m.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return h(e,void 0,void 0,function(){var e,t,n,l,r,c,o,d,u,p,b,v,E,y,N,O,C=this;return f(this,function(S){switch(S.label){case 0:if(g=0,a&&clearInterval(a),Object(m.a)(!0),e=this.state,t=e.Moncon,n=e.relayisOnNo,l=e.relayisOn,r=e.relayControlStatus,c=e.I1RelayStatus,o=e.relayControlType,d=e.isOptimizeControl,u=e.isOptimizeControlStatus,p=e.relayOptimizeSettings,b=e.RelayBoardControl,"Local"!=u&&"Schedule"!=u&&"Manual"!=u)return[3,6];"Schedule"==u&&this.handleScheduleSelection(!0),v=-1==o.indexOf("OneRelay")?4:1,E=p.split(","),y=b.activeRelayStatus&&b.activeRelayStatus.split(","),N=0,S.label=1;case 1:return N<v?"active"!=y[N]?[3,4]:[4,this.handleRelayOptimizeSettings(E[N],N,!1)]:[3,5];case 2:return S.sent(),p=E.join(","),O=N+1,[4,this.setOptimizeSettings(p,O)];case 3:S.sent(),S.label=4;case 4:return N++,[3,1];case 5:return"Local"==r&&"Local"==u?(Object(m.a)(!1),[2]):[3,18];case 6:return"Schedule"!=r&&"Schedule"!=u&&this.handleScheduleSelection(!1),[4,this.saveRelayStatusChanges(r,!1)];case 7:return S.sent(),d?[3,16]:-1==o.indexOf("OneRelay")?[3,11]:-1==o.indexOf("V1")?[3,8]:[3,10];case 8:return[4,Object(s.E)(t,c).then(function(e){return h(C,void 0,void 0,function(){return f(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 9:S.sent(),S.label=10;case 10:return[3,15];case 11:return-1==o.indexOf("V4")?[3,13]:[4,Object(s.K)(t,!1,l,n).then(function(e){return h(C,void 0,void 0,function(){return f(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 12:return S.sent(),[3,15];case 13:return[4,Object(s.F)(t,!1,l,n).then(function(e){return h(C,void 0,void 0,function(){return f(this,function(t){return e.error?Object(i.a)(e.error):e&&Object(i.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(i.a)("Some error orccured. ")})];case 14:S.sent(),S.label=15;case 15:return[3,18];case 16:return[4,this.setOptimizeSettings()];case 17:S.sent(),S.label=18;case 18:return this.setState({isOptimizeControl:!1}),this.setIntervalStart(),Object(m.a)(!1),[2]}})})}),[2]})})},t.prototype.applyRule=function(e,t,n){return e?t?e<n?0:e:e>n?0:e:0},t.prototype.render=function(){var e,t,n,a,s=this,r=this.state,c=r.CeilingSensorBoardInfo,i=r.Moncon,m=r.modelChanged,d=r.currentChange,u=r.detailsExpanded,p=r.RelayBoardInfo,h=r.relayControlStatus,f=r.relayisOn,g=r.relayisOnNo,b=r.relay1Status,v=r.relay2Status,E=r.relay3Status,y=r.relay4Status,N=r.relayControlType,O=r.I1RelayBoardInfo,C=r.I1RelayStatus,S=r.isOptimizeControl,T=r.isOptimizeControlStatus,w=r.RelayBoardControl,I=r.relayOptimizeSettings,x=r.I4RelayBoardInfo,_=this.props,D=_.instance,j=_.buildingName,L=_.RelayDeviceName,A=_.type,R=_.hideTabs,k="Local"!=h;e=w.relayNames&&w.relayNames.split(","),t=w.lightingTypes&&w.lightingTypes.split(","),n=I&&I.split(","),a=w.activeRelayStatus&&w.activeRelayStatus.split(",");var B="not refreshed";return N&&(-1!=N.toLowerCase().indexOf("i1")?O&&O.timestamp&&(B=new Date(O.timestamp).toLocaleString()):-1!=N.toLowerCase().indexOf("i4")?x&&x.timestamp&&(B=new Date(x.timestamp).toLocaleString()):-1!=N.toLowerCase().indexOf("v4")&&p&&p.timestamp&&(B=new Date(p.timestamp).toLocaleString())),l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},!R&&l.createElement(o.a,{InsightName:L,ControlName:"RelayControl",buildingName:j,instance:D,type:A}),l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-9"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,i.rdfsLabel)," "),l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",i&&i.relatedEquipment.map(function(e,t){return l.createElement("span",{key:t},t+1==i.relatedEquipment.length?"":",")}))))))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},-1!=N.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-8 InsightRow"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("h4",{className:"padding-5 margin-5"},"Power Watts: ",l.createElement("b",null,O&&O.active_power_Watts?O.active_power_Watts:0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Amperes: ",l.createElement("b",null,O&&O.current_Amperes?O.current_Amperes:0)),l.createElement("h4",{className:"padding-5 margin-5"},"Frequency Hz: ",l.createElement("b",null,O&&O.frequency_Hz?this.applyRule(O.frequency_Hz,!0,55):0))),l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("h4",{className:"padding-5 margin-5"},"Energy Watt/Hour: ",l.createElement("b",null,O&&O.import_active_energy_Wh?O.import_active_energy_Wh:0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Power Factor: ",l.createElement("b",null,O&&O.power_factor?O.power_factor:0)),l.createElement("h4",{className:"padding-5 margin-5"},"Voltage volts: ",l.createElement("b",null,O&&O.voltage_volts?O.voltage_volts:0))))),l.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},l.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",l.createElement("b",null,p&&p.nominal_src_volts?p.nominal_src_volts:0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Illumiance: ",l.createElement("b",null,c&&c.illuminance_lux?c.illuminance_lux:0," Lumens")),l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,c&&c.illuminance_lux&&c.motion_sensed>0?"True":"False")))),-1==N.indexOf("OneRelay")&&l.createElement("div",{className:"col-md-12 InsightRow"},l.createElement("table",{className:"table table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null),l.createElement("th",null,l.createElement("b",null,"Amperes")),l.createElement("th",null,l.createElement("b",null,"Power Watt")),-1!=N.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("th",null,l.createElement("b",null,"Frequency")),l.createElement("th",null,l.createElement("b",null,"Energy")),l.createElement("th",null,l.createElement("b",null,"Power Factor")),l.createElement("th",null,l.createElement("b",null,"Voltage"))),l.createElement("th",null,"Manual"==h?"Status":""),t&&t.length>0&&(1==t.length?"0"!=t[0]:"0"!=t[0]&&"0"!=t[1]&&"0"!=t[2]&&"0"!=t[3])&&l.createElement("th",null,"Optimize Settings"))),l.createElement("tbody",null,a&&"inactive"!=a[0]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[0])),-1!=N.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,p&&p.mAmps_relay1?this.applyRule(parseFloat(p.mAmps_relay1)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,p&&p.power_Wt_relay1?this.applyRule(parseFloat(p.power_Wt_relay1)/1e3,!0,3):0," W"))),-1!=N.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,x&&x.current_Amperes_Ch1?this.applyRule(x.current_Amperes_Ch1,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,x&&x.active_power_Watts_Ch1?this.applyRule(parseFloat(x.active_power_Watts_Ch1)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,x&&x.frequency_Hz_Ch1?x.frequency_Hz_Ch1:0," Hz")),l.createElement("td",null,l.createElement("b",null,x&&x.import_active_energy_Wh_Ch1?x.import_active_energy_Wh_Ch1:0," Wh")),l.createElement("td",null,l.createElement("b",null,x&&x.power_factor_Ch1?x.power_factor_Ch1:0)),l.createElement("td",null,l.createElement("b",null,x&&x.voltage_volts_Ch1?this.applyRule(x.voltage_volts_Ch1,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:b?"btn":"btn btn-fill",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!1,1,!0)}},"Off"),l.createElement("button",{type:"button",className:b?"btn btn-fill":"btn",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!0,1,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[0]&&"C"!=t[0]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Normal",0)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),a&&"inactive"!=a[1]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[1])),-1!=N.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,p&&p.mAmps_relay2?this.applyRule(parseFloat(p.mAmps_relay2)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,p&&p.power_Wt_relay2?this.applyRule(parseFloat(p.power_Wt_relay2)/1e3,!0,3):0," W"))),-1!=N.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,x&&x.current_Amperes_Ch2?this.applyRule(x.current_Amperes_Ch2,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,x&&x.active_power_Watts_Ch2?this.applyRule(parseFloat(x.active_power_Watts_Ch2)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,x&&x.frequency_Hz_Ch2?x.frequency_Hz_Ch2:0," Hz")),l.createElement("td",null,l.createElement("b",null,x&&x.import_active_energy_Wh_Ch2?x.import_active_energy_Wh_Ch2:0," Wh")),l.createElement("td",null,l.createElement("b",null,x&&x.power_factor_Ch2?x.power_factor_Ch2:0)),l.createElement("td",null,l.createElement("b",null,x&&x.voltage_volts_Ch2?this.applyRule(x.voltage_volts_Ch2,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:v?"btn":"btn btn-fill",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!1,2,!0)}},"Off"),l.createElement("button",{type:"button",className:v?"btn btn-fill":"btn",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!0,2,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[1]&&"C"!=t[1]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[1]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Normal",1)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[1]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Optimize",1)}},"Optimize")))),a&&"inactive"!=a[2]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[2])),-1!=N.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,p&&p.mAmps_relay3?this.applyRule(parseFloat(p.mAmps_relay3)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,p&&p.power_Wt_relay3?this.applyRule(parseFloat(p.power_Wt_relay3)/1e3,!0,3):0," W"))),-1!=N.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,x&&x.current_Amperes_Ch3?this.applyRule(x.current_Amperes_Ch3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,x&&x.active_power_Watts_Ch3?this.applyRule(parseFloat(x.active_power_Watts_Ch3)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,x&&x.frequency_Hz_Ch3?x.frequency_Hz_Ch3:0," Hz")),l.createElement("td",null,l.createElement("b",null,x&&x.import_active_energy_Wh_Ch3?x.import_active_energy_Wh_Ch3:0," Wh")),l.createElement("td",null,l.createElement("b",null,x&&x.power_factor_Ch3?x.power_factor_Ch3:0)),l.createElement("td",null,l.createElement("b",null,x&&x.voltage_volts_Ch3?this.applyRule(x.voltage_volts_Ch3,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:E?"btn":"btn btn-fill",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!1,3,!0)}},"Off"),l.createElement("button",{type:"button",className:E?"btn btn-fill":"btn",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!0,3,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[2]&&"C"!=t[2]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[2]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Normal",2)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[2]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Optimize",2)}},"Optimize")))),a&&"inactive"!=a[3]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[3])),-1!=N.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,p&&p.mAmps_relay4?this.applyRule(parseFloat(p.mAmps_relay4)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,"-"))),-1!=N.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,x&&x.current_Amperes_Ch4?this.applyRule(x.current_Amperes_Ch4,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,x&&x.active_power_Watts_Ch4?this.applyRule(parseFloat(x.active_power_Watts_Ch4)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,x&&x.frequency_Hz_Ch4?x.frequency_Hz_Ch4:0," Hz")),l.createElement("td",null,l.createElement("b",null,x&&x.import_active_energy_Wh_Ch4?x.import_active_energy_Wh_Ch4:0," Wh")),l.createElement("td",null,l.createElement("b",null,x&&x.power_factor_Ch4?x.power_factor_Ch4:0)),l.createElement("td",null,l.createElement("b",null,x&&x.voltage_volts_Ch4?this.applyRule(x.voltage_volts_Ch4,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:y?"btn":"btn btn-fill",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!1,4,!0)}},"Off"),l.createElement("button",{type:"button",className:y?"btn btn-fill":"btn",disabled:m||"Manual"!=h,onClick:function(){s.handleRelayOnOff(!0,4,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[3]&&"C"!=t[3]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[3]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Normal",3)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[3]?"btn btn-fill":"btn",disabled:S,onClick:function(){s.handleRelayOptimizeSettings("Optimize",3)}},"Optimize"))))))),l.createElement("div",{className:"col-md-8 col-xs-12 InsightRow"},-1!=N.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-6"},l.createElement(l.Fragment,null,l.createElement("div",{className:"RelayHeading"},"Relay Status"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:C?"btn":"btn btn-fill",disabled:m||"Manual"!=h,onClick:function(){s.handleI1RelayOnOff(!1)}},"Off"),l.createElement("button",{type:"button",className:C?"btn btn-fill":"btn",disabled:m||"Manual"!=h,onClick:function(){s.handleI1RelayOnOff(!0)}},"On")))),t&&"0"!=t[0]&&"C"!=t[0]&&l.createElement("div",{className:"col-md-6"},l.createElement("div",{className:"RelayHeading"},"Optimize Settings"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",onClick:function(){s.handleRelayOptimizeSettings("Normal",0)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",onClick:function(){s.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),-1==N.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",l.createElement("b",null,p&&p.nominal_src_volts?p.nominal_src_volts:0," "))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Illumiance: ",l.createElement("b",null,c&&c.illuminance_lux?c.illuminance_lux:0," Lumens"))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,c&&c.illuminance_lux&&c.motion_sensed>0?"True":"False"))))),l.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:"Local"==h?"btn btn-success btn-fill":"btn btn-success",disabled:""!=d&&"state"!=d,onClick:function(){s.handleRelayControlStatus("Local")}},"Local"),l.createElement("button",{type:"button",className:k?"btn btn-success btn-fill":"btn btn-success",disabled:""!=d&&"state"!=d,onClick:function(){s.handleRelayControlStatus("Remote")}},"Remote"),l.createElement("button",{type:"button",className:"Manual"==h?"btn btn-success btn-fill":"btn btn-success",disabled:!k,onClick:function(){s.handleRelayControlStatus("Manual")}},"Manual"),l.createElement("button",{type:"button",className:"Schedule"==h?"btn btn-success btn-fill":"btn btn-success",disabled:!k,onClick:function(){s.handleRelayControlStatus("Schedule")}},"Schedule")))),l.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){s.setState({detailsExpanded:!u})}},l.createElement("i",{className:u?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}))),l.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",i.wirelessConfig&&i.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",i.wirelessConfig&&i.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",i.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",i.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Board Address:")," ",i.boardAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",i.deviceID?i.deviceID:""),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Last Data Synced At:")," ",B)))),l.createElement("div",{className:m?"InsightApplyChanges":"hidden"},S?l.createElement("h4",null,"Do you want to apply these changes (Optimize Settings: ",T,") ?"):l.createElement("h4",null,"Do you want to apply these changes (Relay ",-1!=N.indexOf("OneRelay")?" : "+(C?"on":"off"):g+" : "+(f?"on":"off"),")?"),l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return s.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return s.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return s.applyChanges()}},"Apply Changes")))))))))},t}(l.Component);t.default=b},1133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),s=(n.n(l),n(631)),r=n(614),c=n(29),i=n(30),o=n(99),m=n(604),d=n(21),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},h=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),Old_CeilingSensorBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[]},a=a=n,n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){var e=this;return f(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:t.sent(),t.label=2;case 2:return setInterval(function(){e.resetChanges(!1)},1e4),[2]}})})},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._fetchData=function(){return h(this,void 0,void 0,function(){var e,t,n,a,l,s,c,i=this;return f(this,function(u){switch(u.label){case 0:return this.state,e=this.props,t=e.CeilingSensorBoardName,n=e.buildingName,t?(Object(o.a)(!0),[4,Object(m.i)(this.props.buildingName)]):[3,3];case 1:return a=u.sent(),l=a&&a.length>0&&a.map(function(e){return{value:Object(d.g)(e.ontology),label:Object(d.g)(e.rdfsLabel)}}),s=Object(),[4,Object(r.k)(t,n)];case 2:s=u.sent(),localStorage.getItem(s.deviceID)&&localStorage.getItem(s.deviceID).length>0&&(c=JSON.parse(localStorage.getItem(s.deviceID)),this.setState({CeilingSensorBoardInfo:c,Old_CeilingSensorBoardInfo:p({},c),modelChanged:!1,currentChange:""})),this.setState({Moncon:s,EquipmentList:l},function(){return h(i,void 0,void 0,function(){return f(this,function(e){return this._fetchCeilingSensorBoardInfo(!0),[2]})})}),Object(o.a)(!1),u.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n;return f(this,function(a){switch(a.label){case 0:return e&&Object(o.a)(!0),t=this.state.Moncon,[4,Object(s.m)(t).then(function(e){var n=e[0];return!n||n&&n.error?(Object(i.a)("Error occurred while fetching ceiling sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return n=a.sent(),this.setState({CeilingSensorBoardInfo:n,Old_CeilingSensorBoardInfo:p({},n),modelChanged:!1,currentChange:""}),e&&Object(o.a)(!1),[2]}})})},t.prototype.handleChange=function(e,t){var n=this.state.CeilingSensorBoardInfo;n[e]=t,this.setState({CeilingSensorBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.cancelSend=function(){this.setState({modelChanged:!1,currentChange:""})},t.prototype.resetChanges=function(e){return h(this,void 0,void 0,function(){var t=this;return f(this,function(n){return this.setState({modelChanged:!1,currentChange:""},function(){return h(t,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this._fetchCeilingSensorBoardInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return h(this,void 0,void 0,function(){var n=this;return f(this,function(l){return Object(o.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return h(n,void 0,void 0,function(){var n=this;return f(this,function(l){return setTimeout(function(){n.resetChanges(!0)},5e3),Object(s.D)(e,t,this.state.Old_CeilingSensorBoardInfo).then(function(e){e.success?Object(i.b)("Changes applied successfully. "):e.error&&Object(i.a)(e.reason)}).catch(function(e){Object(i.a)("Some error orccured. ")}),setTimeout(function(){a._fetchCeilingSensorBoardInfo()},5e3),Object(o.a)(!1),[2]})})}),[2]})})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.state,n=t.CeilingSensorBoardInfo,a=t.Moncon,s=t.modelChanged,r=t.detailsExpanded,i="not refreshed";return n&&n.timestamp&&(i=new Date(n.timestamp).toLocaleString()),l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,a.rdfsLabel)," "),l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",a&&a.relatedEquipment.map(function(t,n){return l.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==a.relatedEquipment.length?"":",")}))))))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp"},l.createElement("h4",{className:"padding-5 margin-5"},"Temp: ",l.createElement("b",null,Object(c.a)(n&&n.temp_celsius?n.temp_celsius:0).toFixed(2),"\xb0F")),l.createElement("h4",{className:"padding-5 margin-5"},"CO2: ",l.createElement("b",null,n&&n.equiCO2_ppm?n.equiCO2_ppm+" ppm":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Altitude: ",l.createElement("b",null,n&&n.altitude_m?n.altitude_m+" m":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Pressure: ",l.createElement("b",null,n&&n.pressure_hPa?n.pressure_hPa+" hPa":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Illumiance: ",l.createElement("b",null,n&&n.illuminance_lux?n.illuminance_lux:0," Lumens")),l.createElement("h4",{className:"padding-5 margin-5"},"Gas Resistance: ",l.createElement("b",null,n&&n.gasResistance_kOhm?n.gasResistance_kOhm+" kOhm":"-"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("h4",{className:"padding-5 margin-5"},"Humidity: ",l.createElement("b",null,n&&n.relhumidity_pct?n.relhumidity_pct+" %":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"TVOC: ",l.createElement("b",null,n&&n.tvoc_ppm?n.tvoc_ppm+" ppm":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"No. of BT Devices: ",l.createElement("b",null,n&&n.num_BTdev?n.num_BTdev:"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,n&&n.illuminance_lux&&n.motion_sensed>0?"True":"False")),l.createElement("h4",{className:"padding-5 margin-5"},"WIFI Temp: ",l.createElement("b",null,Object(c.a)(n&&n.wifiTemp1_celsius?n.wifiTemp1_celsius:0).toFixed(2),"\xb0F"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"})),l.createElement("div",{className:"row"}),l.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){e.setState({detailsExpanded:!r})}},l.createElement("i",{className:r?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}))),l.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",a.wirelessConfig&&a.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",a.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",a.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",a.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Board Address:")," ",a.boardAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",a.deviceID?a.deviceID:""),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Last Data Synced At:")," ",i)))),l.createElement("div",{className:s?"InsightApplyChanges":"hidden"},l.createElement("h4",null,"Do you want to apply these changes?"),l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(a,n)}},"Apply Changes")))))))))},t}(l.Component);t.default=g},2081:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),l=n.n(a),s=n(600),r=n(1018),c=n(1037),i=n(2082),o=n(1036),m=n(99),d=n(29),u=n(911),p=n(1019),h=n(1084),f=n(941),g=n(1085),b=n(1213),v=n(2083),E=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},N=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={solution:Object(),generatorDevice:Object(),currentEquipment:"",currentEquipmentIndex:0,currentTab:"GUI",showControllers:[],selectedAssetType:"",selectedAssetLabel:"",selectedComponnet:Object(),selectedDevice:Object(),selectedEquipment:Object(),selectedPoint:Object(),compressorDefrostState:!1},n.getSolutionInDetail=n.getSolutionInDetail.bind(n),n.deforstState=n.deforstState.bind(n),n}return E(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:return e=this.props.solution,Object(d.x)(!1),[4,this.getSolutionInDetail(e)];case 1:return t.sent(),[2]}})})},t.prototype.getSolutionInDetail=function(e){return y(this,void 0,void 0,function(){var t,n,a,l,s,r,c=this;return N(this,function(i){switch(i.label){case 0:return Object(m.a)(!0),t=this.props.buildingName,n=Object(),[4,Object(u.f)(t,e)];case 1:return a=i.sent(),(n=a&&a.length>0&&a[0]?a[0]:Object())&&n.equipmentTemplatesOntology&&(l=n.equipmentTemplatesOntology.split(","),s=[],r=[],n&&n.equipmentByTemplate&&n.equipmentByTemplate.length>0&&n.equipmentByTemplate[0]&&n.equipmentByTemplate.map(function(e,t){s.push({label:e.equipment.rdfsLabel,value:l[t]});var n=[];e.devices&&e.devices.map(function(e){return n.push(!1)}),r.push(n)}),this.setState({solution:n,currentEquipmentIndex:0,currentEquipment:e,showControllers:r},function(){c.setState({currentTab:"GUI"})}),this.fetchEquipmentTemplateFromSolution(0)),Object(m.a)(!1),[2]}})})},t.prototype.fetchEquipmentTemplateFromSolution=function(e){var t=this;Object(m.a)(!0);var n=this.state.solution;if(n&&n.equipmentByTemplate&&n.equipmentByTemplate.length>0){var a=Object(),l=n.equipmentByTemplate[e];"Generator"==l.equipment.subclassType&&(a=l.equipment),this.setState({generatorDevice:void 0},function(){t.setState({generatorDevice:a})})}Object(m.a)(!1)},t.prototype.setCollapseIcon=function(e){var t=e.currentTarget.children[0].className;e.currentTarget.children[0].className="fa fa-plus"==t?"fa fa-minus":"fa fa-plus"},t.prototype.getDeviceControllerData=function(e,t,n){var a=this.state,l=a.currentEquipmentIndex,s=a.showControllers;s[l][t]=!n,this.setState({showControllers:s})},t.prototype.deforstState=function(e){this.setState({compressorDefrostState:e})},t.prototype.showAssetProfile=function(e,t){var n=this,a=this.state,l=a.selectedAssetLabel,s=a.selectedComponnet,r=a.selectedDevice,c=a.selectedEquipment,i=a.selectedPoint;this.setState({selectedAssetType:""}),"Device"==t?(l=(r=e).rdfsLabel,this.setState({selectedAssetLabel:l,selectedDevice:r},function(){n.setState({selectedAssetType:t})})):"Point"==t?(l=(i=e).pointLabel,this.setState({selectedAssetLabel:l,selectedPoint:i},function(){n.setState({selectedAssetType:t})})):"Equipment"==t?(l=(c=e).rdfsLabel,this.setState({selectedAssetLabel:l,selectedEquipment:c},function(){n.setState({selectedAssetType:t})})):"Component"==t&&(l=(s=e).rdfsLabel,this.setState({selectedAssetLabel:l,selectedComponnet:s},function(){n.setState({selectedAssetType:t})})),document.getElementById("btnShowAssetProfile").click()},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,m=this.state,d=m.solution,u=m.currentEquipmentIndex,E=m.generatorDevice,y=m.currentTab,N=m.showControllers,O=m.selectedAssetType,C=m.selectedAssetLabel,S=m.selectedComponnet,T=m.selectedDevice,w=m.selectedEquipment,I=m.selectedPoint,x=m.compressorDefrostState,_=[],D=Object();d&&d.equipmentByTemplate&&d.equipmentByTemplate.length>0&&(_=d.equipmentByTemplate[u||0].devices,D=d.equipmentByTemplate[u||0].equipment),E&&E.equipmentName&&(D=E);var j=!(!D||!D.subclassType||"Refrigerator"!=D.subclassType);return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"card",style:{padding:"1vw"}},l.a.createElement("div",{className:"row m-0"},l.a.createElement("div",{className:"col-md-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 padding-5 margin-5"},l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{className:"btn "+("GUI"==y?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"GUI"})}},l.a.createElement("span",{className:"vertical-align"},"GUI")),l.a.createElement("button",{className:"btn "+("SolutionDiagram"==y?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"SolutionDiagram"})}},l.a.createElement("span",{className:"vertical-align"},"Diagram")),!j&&l.a.createElement("button",{className:"btn "+("Schedule"==y?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"Schedule"})}},l.a.createElement("span",{className:"vertical-align"},D&&D.subclassType&&"Refrigerator"==D.subclassType?x?"Defrost":"Box":""," Schedule")),j&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn "+("BoxSchedule"==y?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"BoxSchedule"})}},l.a.createElement("span",{className:"vertical-align"},"Box Schedule")),l.a.createElement("button",{className:"btn "+("DefrostSchedule"==y?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"DefrostSchedule"})}},l.a.createElement("span",{className:"vertical-align"},"Defrost Schedule"))),l.a.createElement("button",{className:"btn "+("ADP"==y?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"ADP"})}},l.a.createElement("span",{className:"vertical-align"},"ADP"))))),"GUI"==y&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},D&&D.subclassType&&"Refrigerator"==D.subclassType&&l.a.createElement(i.a,{instance:a,buildingName:n,InsightName:_[0].deviceName,type:"Equipment",deforstState:this.deforstState}),D&&D.subclassType&&"Generator"==D.subclassType&&l.a.createElement(b.a,{building:n,instance:a,ontology:D.equipmentName}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 padding-5 margin-5"},l.a.createElement("div",{className:"btn-group"},d&&d.equipmentByTemplate&&d.equipmentByTemplate.map(function(t,n){return l.a.createElement("button",{className:"btn "+(u==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){var t=d.equipmentTemplatesOntology.split(",")[n];e.fetchEquipmentTemplateFromSolution(n),e.setState({currentEquipmentIndex:n,currentEquipment:t})}},l.a.createElement("span",{className:"vertical-align"},t.equipment.rdfsLabel))})))),l.a.createElement("div",{className:"row m-0"},l.a.createElement("div",{className:"col-md-12 p-0"},l.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},l.a.createElement("h4",{className:"panel-title"},l.a.createElement("div",null,l.a.createElement("span",{style:{marginLeft:"15px"}},"Devices'"),l.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse1",href:"#collapse1",onClick:function(t){e.setCollapseIcon(t)}},l.a.createElement("i",{className:"fa fa-minus"}))))),l.a.createElement("div",{id:"collapse1",className:"panel-collapse collapse in"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{style:{height:"auto"}},l.a.createElement("div",{className:"padding-10",style:{border:"2px solid gainsboro"}},l.a.createElement("div",{className:"row no-padding"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-2 headingText"},"Device"),l.a.createElement("div",{className:"col-md-1 headingText"},"Device Type"),l.a.createElement("div",{className:"col-md-2 headingText"},"Moncon Type"),l.a.createElement("div",{className:"col-md-1 headingText"},"State"),l.a.createElement("div",{className:"col-md-1 headingText"},"ID"),l.a.createElement("div",{className:"col-md-2 headingText"},"IP Address"),l.a.createElement("div",{className:"col-md-2 headingText"},"Controller IP Address")))),l.a.createElement("div",{style:{paddingBottom:"1%",border:"1px solid lightgray",padding:"20px"}},_&&_.length>0&&_.map(function(t,s){if(t){var r;r=t.monitoringControlDeviceType&&(-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("thermo")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("intesis"));var c="";return!t.monitoringControlDeviceType||-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")&&-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")?t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("intesis")?c="IntesisControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")?c="CeilingSensor":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("thermo")&&(c="InsightControl"):c="RelayControl",l.a.createElement("div",{key:s,style:{margin:"2px",border:"1px dotted lightgray",borderRadius:5}},l.a.createElement("div",{className:"padding-10",style:{marginBottom:"1px"},key:s},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("a",{title:t.rdfsLabel,style:{color:"slategrey"},onClick:function(){e.showAssetProfile(t,"Device")}},t.rdfsLabel)),l.a.createElement("div",{className:"col-md-1"},t.deviceType),l.a.createElement("div",{className:"col-md-2"},t.monitoringControlDeviceType),l.a.createElement("div",{className:"col-md-1"},t.deviceState),l.a.createElement("div",{className:"col-md-1"},t.deviceID),l.a.createElement("div",{className:"col-md-2"},t.wirelessConfig&&t.wirelessConfig.ipAddress),l.a.createElement("div",{className:"col-md-2"},t.wirelessConfig&&t.wirelessConfig.ipAddress),l.a.createElement("div",{className:"col-md-1"},r&&l.a.createElement("a",{className:"btn-xs btn-success btn active pull-right",style:{marginLeft:"5px"},title:"Show Controller",onClick:function(n){e.getDeviceControllerData(t.deviceName,s,N[u][s])},"data-toggle":"collapse",id:"btn-deviceCollapse"+s,href:"#deviceCollapse"+s}," ",l.a.createElement("i",{className:"fa fa-cogs","aria-hidden":"true"})," ",N[u][s]?"Hide":"Show"," Controller")))),l.a.createElement("div",{id:"deviceCollapse"+s,className:"panel-collapse collapse"},l.a.createElement("div",{className:"row"},N[u][s]&&t.monitoringControlDeviceType&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(v.a,{ControlName:c,InsightName:t.deviceName,buildingName:n,instance:a,monconType:t.monitoringControlDeviceType,type:"Equipment"}))))))}})))))))),"SolutionDiagram"==y&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},l.a.createElement(r.a,{buildingName:n,instance:a,SolutionName:"",solution:d,isFullScreenHeight:!1,isRefreshButtonShow:!1})),"Schedule"==y&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},D&&D.subclassType&&"Refrigerator"==D.subclassType&&l.a.createElement(o.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",isDefrost:!1,hideTabs:!0})),"BoxSchedule"==y&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},D&&D.subclassType&&"Refrigerator"==D.subclassType&&l.a.createElement(o.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",isDefrost:!1,hideTabs:!0})),"DefrostSchedule"==y&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},D&&D.subclassType&&"Refrigerator"==D.subclassType&&l.a.createElement(o.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",isDefrost:!0,hideTabs:!0})),"ADP"==y&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},D&&D.subclassType&&"Refrigerator"==D.subclassType&&l.a.createElement(c.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",hideTabs:!0})))),l.a.createElement("button",{type:"button",id:"btnShowAssetProfile",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#assetProfileDialog",style:{display:"none"}},"."),l.a.createElement(s.a,{id:"assetProfileDialog",showSaveButton:!1,showCancelButton:!0,isEditForm:!0,heading:C+" Selected"},l.a.createElement("div",{className:"row padding-10"},O&&l.a.createElement("div",{className:"col=md-12"},"Device"==O&&T.deviceName&&l.a.createElement(f.default,{hideBackButton:!0,deviceName:T.deviceName,isEdit:!1,isView:!0,instance:a,buildingName:n,deviceType:"Device"==T.deviceType||"Electronic"==T.deviceType?"Electronic":-1!=T.deviceType.indexOf("Network")?"Network":-1!=T.deviceType.indexOf("Computi")?"Computing":""}),"Point"==O&&I.point&&l.a.createElement(g.default,{isEdit:!1,isView:!0,instance:a,buildingName:n,PointName:I.point}),"Equipment"==O&&w.equipmentName&&l.a.createElement(h.default,{instance:a,buildingName:n,equipmentName:w.equipmentName,showEquipmentInfoOnly:!0}),"Component"==O&&S.name&&l.a.createElement(p.a,{instance:a,buildingName:n,isEdit:!1,component:S,isView:!0})))))))},t}(l.a.Component);t.default=O},2082:function(e,t,n){"use strict";var a,l=n(3),s=(n.n(l),n(691)),r=n(631),c=n(614),i=n(21),o=n(29),m=n(604),d=n(30),u=n(99),p=n(608),h=n(623),f=n(600),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__assign||function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},y=0,N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={InsightInfo:Object(),Old_InsightInfo:Object(),InsightChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,filteredInsight:[],buildingOptimalTStat:[],spaceOptimalTStat:[],spaces:[],spacesOptimalInfo:[],avgBuildingOptimalTStat:Object(),buildingInsightInfos:[],spaceInsightInfos:[],avgSpaceOptimalTStat:Object(),buildingOptimal:!1,spaceOptimal:!1,scheduleSelected:!1,callInterval:!0,controlStatus:"Manual",isDefrost:!1},n.changeMode=n.changeMode.bind(n),n.changeOverrideState=n.changeOverrideState.bind(n),n.changeFanSetting=n.changeFanSetting.bind(n),n.increaseTemp=n.increaseTemp.bind(n),n.decreaseTemp=n.decreaseTemp.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchInsightInfo=n._fetchInsightInfo.bind(n),n.changeStateLocal=n.changeStateLocal.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleOptimize=n.handleOptimize.bind(n),n._fetchInsights=n._fetchInsights.bind(n),n._fetchSelectedTStatData=n._fetchSelectedTStatData.bind(n),n.handleOptimalSelection=n.handleOptimalSelection.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n}return g(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return e.sent(),[4,this._fetchInsights()];case 2:return e.sent(),[4,this.fetchThermostatInfo()];case 3:e.sent(),this._fetchInsightInfo(!1),e.label=4;case 4:return[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a),setInterval(function(){y++},1e3),a=setInterval(function(){var t=e.state,n=t.callInterval;!t.InsightChanged&&n&&y>=15&&(e._fetchInsightInfo(!1),Object(u.a)(!1))},15e3)},t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return E(this,function(e){return clearInterval(a),[2]})})},t.prototype.handleScheduleSelection=function(e){return v(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,Object(r.Q)(this.props.InsightName,e)];case 1:return t.sent(),e?Object(d.b)("Successfully Selected Schedule"):Object(d.b)("Successfully unSelected Schedule"),this.setState({scheduleSelected:e}),this._fetchData(),[2]}})})},t.prototype.handleOptimalSelection=function(e,t){var n=this.state,a=n.buildingOptimal,l=n.spaceOptimal;"spaceOptimal"==e?l=t:a=t,this.setState({spaceOptimal:l,buildingOptimal:a}),this.handleOptimize()},t.prototype.handleOptimize=function(){return v(this,void 0,void 0,function(){var e,t,n,a;return E(this,function(l){return e=this.state,t=e.avgBuildingOptimalTStat,n=e.avgSpaceOptimalTStat,a=e.spaceOptimal,e.buildingOptimal&&!a?this.setState({InsightInfo:t,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}):this.setState({InsightInfo:n,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}),[2]})})},t.prototype._fetchSelectedTStatData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,s,o,m,u,p,h,f,g,b,v,y,N,O,C;return E(this,function(E){switch(E.label){case 0:e=this.state,t=e.buildingOptimalTStat,n=e.buildingInsightInfos,a=e.spaceInsightInfos,l=e.spaceOptimalTStat,s=e.buildingOptimal,o=e.spaceOptimal,p=0,E.label=1;case 1:return p<t.length?(m=t[p],(v=Object(i.g)(m.moncondevice))?[4,Object(c.k)(v,this.props.buildingName)]:[3,4]):[3,5];case 2:return y=E.sent(),[4,Object(r.r)(y).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 3:u=E.sent(),n.push(u),E.label=4;case 4:return p++,[3,1];case 5:p=0,E.label=6;case 6:if(!(p<l.length))return[3,12];if(h=l[p],!((f=h.spaceInsights)&&f.length>0))return[3,11];g=0,E.label=7;case 7:return g<f.length?(b=f[g],(v=Object(i.g)(b.moncondevice))?[4,Object(c.k)(v,this.props.buildingName)]:[3,10]):[3,11];case 8:return y=E.sent(),[4,Object(r.r)(y).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 9:N=E.sent(),a.push(N),E.label=10;case 10:return g++,[3,7];case 11:return p++,[3,6];case 12:return s=n.length>0,o=a.length>0,[4,Object(r.B)(n)];case 13:return O=E.sent(),[4,Object(r.B)(a)];case 14:return C=E.sent(),this.setState({avgBuildingOptimalTStat:O,avgSpaceOptimalTStat:C,buildingInsightInfos:n,spaceInsightInfos:a,buildingOptimal:s,spaceOptimal:o}),[2]}})})},t.prototype._fetchInsights=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,s,c,m,d,u,f,g,b,v,y;return E(this,function(N){switch(N.label){case 0:return(e=this.props.buildingName)?[4,Object(r.t)(e)]:[3,7];case 1:for(t=N.sent(),y=0;y<t.length;y++)n=t[y],Object(i.g)(n.moncondevice)&&Object(i.g)(n.rdfsLabel)&&Object(o.y)(Object(i.g)(n.moncondevice),Object(i.g)(n.rdfsLabel));for(a=this.state,l=a.spaces,s=a.spacesOptimalInfo,c=a.spaceOptimalTStat,m=a.buildingOptimalTStat,l=[],d=function(e){var n=t[e],a=Object(i.g)(n.space),s=Object(i.g)(n.spaceRdfsLabel);a&&s&&-1==l.findIndex(function(e){return e.ontology==a})&&l.push({ontology:a,rdfsLabel:s})},y=0;y<t.length;y++)d(y);s=[],c=[],m=[],u=function(e){var n,a,r,o,m,d,u;return E(this,function(h){switch(h.label){case 0:return n=l[e],[4,Object(p.e)(n.ontology)];case 1:return a=h.sent(),r=t.filter(function(e){return Object(i.g)(e.space)==n.ontology}),o={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:r},s.push.apply(s,[o]),m=t.find(function(e){return Object(i.g)(e.space)==n.ontology}),d=[],m&&(d=Object(i.g)(m.spaceOptimalTStats).split(",")),u={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:t.filter(function(e){return-1!=d.findIndex(function(t){return t==Object(i.g)(e.moncondevice)})})},c.push.apply(c,[u]),[2]}})},f=0,N.label=2;case 2:return f<l.length?[5,u(f)]:[3,5];case 3:N.sent(),N.label=4;case 4:return f++,[3,2];case 5:return[4,Object(h.c)(this.props.buildingName)];case 6:if((g=N.sent())&&g[0])for(b=g[0],b=(b=Object(i.g)(b.buildingOptimal)).split(","),v=function(e){var n=b[e],a=t&&t.length>0&&t[0]&&t.find(function(e){return Object(i.g)(e.moncondevice)==n});a&&m.push.apply(m,[a])},y=0;y<b.length;y++)v(y);this.setState({spaces:l,spacesOptimalInfo:s,spaceOptimalTStat:c,buildingOptimalTStat:m}),N.label=7;case 7:return[2]}})})},t.prototype._fetchData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,s,r,o,d,h,f=this;return E(this,function(g){switch(g.label){case 0:return e=this.state.scheduleSelected,t=this.props,n=t.InsightName,a=t.buildingName,l=t.type,n?(Object(u.a)(!0),[4,Object(m.i)(this.props.buildingName)]):[3,6];case 1:return s=g.sent(),r=s&&s.length>0&&s.map(function(e){return{value:Object(i.g)(e.ontology),label:Object(i.g)(e.rdfsLabel)}}),o=Object(),d=Object(),"Optimal"!=l?[3,3]:[4,Object(p.e)(n)];case 2:return d=g.sent(),[3,5];case 3:return[4,Object(c.k)(n,a)];case 4:o=g.sent(),g.label=5;case 5:localStorage.getItem(o.deviceID)&&localStorage.getItem(o.deviceID).length>0&&(h=JSON.parse(localStorage.getItem(o.deviceID)),this.setState({InsightInfo:h,Old_InsightInfo:b({},h),InsightChanged:!1,currentChange:""})),e=o.isSchedule,this.setState({Moncon:o,space:d,EquipmentList:r,scheduleSelected:e},function(){return v(f,void 0,void 0,function(){return E(this,function(e){return[2]})})}),Object(u.a)(!1),g.label=6;case 6:return[2]}})})},t.prototype.fetchThermostatInfo=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,s,c;return E(this,function(i){switch(i.label){case 0:return Object(u.a)(!0),e=this.props,t=e.InsightName,n=e.buildingName,a=this.state,l=a.Moncon,s=a.controlStatus,this.setState({callInterval:!1}),[4,Object(r.z)(n,t).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(l.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return c=i.sent(),this.setState({InsightInfo:c,Old_InsightInfo:b({},c),InsightChanged:!1,currentChange:"",callInterval:!0,controlStatus:c.thermostatControlStatus?c.thermostatControlStatus:s}),Object(u.a)(!1),[2]}})})},t.prototype._fetchInsightInfo=function(e){return v(this,void 0,void 0,function(){var t,n,a,l;return E(this,function(s){switch(s.label){case 0:return e&&Object(u.a)(!0),t=this.state,n=t.Moncon,a=t.controlStatus,this.setState({callInterval:!1}),[4,Object(r.r)(n).then(function(e){return!e||e&&e.error?(Object(d.a)("Error occurred while fetching compressor info."),Object()):(e&&localStorage.setItem(n.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return(l=s.sent())&&(l.thermostatControlStatus=a,l.insightName=this.props.InsightName,this.setState({InsightInfo:l,Old_InsightInfo:b({},l),InsightChanged:!1,currentChange:"",callInterval:!0})),e&&Object(u.a)(!1),[2]}})})},t.prototype.changeMode=function(e,t){e.mode=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"mode"})},t.prototype.changeOverrideState=function(e,t,n){"Local"==this.state.controlStatus&&"Remote"==n?(n="Manual",e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1})):"Manual"==n&&(e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1}))},t.prototype.changeFanSetting=function(e,t){e.fan=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"fan"})},t.prototype.increaseTemp=function(e,t){"Heat"==t?e.heattemp=(e.heattemp?e.heattemp:0)+.555556:e.cooltemp=(e.cooltemp?e.cooltemp:0)+.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.decreaseTemp=function(e,t){"Heat"==t?e.heattemp=e.heattemp-.555556:e.cooltemp=e.cooltemp-.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.cancelSend=function(){this.setState({InsightChanged:!1,currentChange:""}),this._fetchInsightInfo(!1)},t.prototype.resetChanges=function(e){return v(this,void 0,void 0,function(){var t=this;return E(this,function(n){return this.setState({InsightChanged:!1,currentChange:""},function(){return v(t,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,this._fetchInsightInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return v(this,void 0,void 0,function(){var n=this;return E(this,function(l){return Object(u.a)(!0),this.setState({InsightChanged:!1,currentChange:""},function(){return v(n,void 0,void 0,function(){var n;return E(this,function(l){switch(l.label){case 0:return y=0,a&&clearInterval(a),"Local"!=(n=this.state.controlStatus)?[3,2]:[4,Object(r.Q)(this.props.InsightName,!1)];case 1:return l.sent(),[3,10];case 2:return"Manual"!=n?[3,4]:[4,Object(r.Q)(this.props.InsightName,!1)];case 3:return l.sent(),[3,10];case 4:return"Remote"!=n?[3,6]:[4,Object(r.Q)(this.props.InsightName,!1)];case 5:return l.sent(),[3,10];case 6:return"Schedule"!=n?[3,8]:[4,Object(r.Q)(this.props.InsightName,!0)];case 7:return l.sent(),[3,10];case 8:return"Optimize"!=n?[3,10]:[4,Object(r.Q)(this.props.InsightName,!1)];case 9:l.sent(),l.label=10;case 10:return t.thermostatControlStatus=n,t.insightName=this.props.InsightName,[4,Object(r.R)(this.props.buildingName,t)];case 11:return l.sent(),Object(r.G)(e,t,this.state.Old_InsightInfo).then(function(e){e.success?Object(d.b)("Changes applied successfully. "):e.error&&Object(d.a)(e.reason)}).catch(function(e){Object(d.a)("Some error orccured. ")}),this.setIntervalStart(),Object(u.a)(!1),[2]}})})}),[2]})})},t.prototype.changeStateLocal=function(e){this.setState({localBTNState:e,controlStatus:"Local",InsightChanged:!0,currentChange:"state"})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.state,n=t.InsightInfo,a=t.Moncon,r=t.space,c=t.InsightChanged,i=t.buildingOptimal,m=t.spaceOptimal,d=t.controlStatus,u=t.isDefrost,p="Optimal"==this.props.type,h="Local"==d,g=n.mode==s.c.AUTO&&n.cooltemp<n.heattemp+.5;return l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,p?r.rdfsLabel:a.rdfsLabel)," "),!p&&l.createElement("h4",{className:"title"},l.createElement("strong",null,"COMPRESSOR \xa0",a&&a.relatedEquipment.map(function(t,n){return l.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==a.relatedEquipment.length?"":",")}),"STATUS:")," (",s.d[n.state],")"))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp pull-right"},l.createElement("div",null,"Space Temp"),l.createElement("div",{className:"counter"},Object(o.a)(n.spacetemp).toFixed(2),"\xb0F")),l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 tempCounter"},l.createElement("div",null,"Cool To"),l.createElement("div",{className:"counter"},Object(o.a)(n.cooltemp).toFixed(2),"\xb0F")),l.createElement("div",{className:"col-md-6 col-xs-12 InsightControls"},l.createElement("div",{className:"btn-group-vertical"},l.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:h,onClick:function(){return e.increaseTemp(n,"Cool")}},l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-up"})),l.createElement("div",null,"Warmer")),l.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:h||g,onClick:function(){return e.decreaseTemp(n,"Cool")}},l.createElement("div",null,"Cooler"),l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-down"})))))))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},l.createElement("button",{type:"button",className:u?"btn":"btn btn-fill",style:{marginRight:"15px"},onClick:function(){e.setState({isDefrost:!1}),e.props.deforstState(!1)}},"Inhibited"),l.createElement("div",{className:"btn-group"},!p&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:"btn btn-success "+("Local"==d?"btn-fill":""),onClick:function(){e.changeStateLocal(!0)},disabled:u},"Local"),l.createElement("button",{type:"button",className:"btn btn-success "+("Remote"==d||"Schedule"==d||"Manual"==d||"Optimize"==d?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,s.e.ON,"Remote")},disabled:u},"Remote"),l.createElement("button",{type:"button",disabled:h||u,className:"btn btn-success "+("Manual"==d?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,s.e.OFF,"Manual")}},"Manual")),l.createElement("button",{type:"button",className:"btn btn-success "+("Schedule"==d?"btn-fill":""),disabled:h||u,onClick:function(){e.setState({InsightChanged:!0,currentChange:"state",controlStatus:"Schedule"})}},"Schedule"),l.createElement("button",{type:"button",disabled:h||u,className:"btn btn-success "+("Optimize"==d?"btn-fill":""),onClick:function(){i&&m?document.getElementById("btnOptimize").click():e.handleOptimize()}},"Optimize")))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("div",{className:"InsightHeading"},l.createElement("i",{className:"fa fa-first-order"}),"Evaporator Fan"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n.fan===s.b.AUTO?"btn btn-fill":"btn",disabled:h,onClick:function(){return e.changeFanSetting(n,s.b.AUTO)}},"Auto"),l.createElement("button",{type:"button",className:n.fan===s.b.ON?"btn btn-fill":"btn",disabled:h,onClick:function(){return e.changeFanSetting(n,s.b.ON)}},"On"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},l.createElement("button",{type:"button",className:u?"btn btn-fill":"btn",style:{marginRight:"26px"},onClick:function(){e.setState({isDefrost:!0}),e.props.deforstState(!0)}},"Defrost"),l.createElement("div",{className:"btn-group"},!p&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:"btn btn-success "+("Local"==d?"btn-fill":""),onClick:function(){e.changeStateLocal(!0)},disabled:!u},"Local"),l.createElement("button",{type:"button",className:"btn btn-success "+("Remote"==d||"Schedule"==d||"Manual"==d||"Optimize"==d?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,s.e.ON,"Remote")},disabled:!u},"Remote"),l.createElement("button",{type:"button",disabled:h||!u,className:"btn btn-success "+("Manual"==d?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,s.e.OFF,"Manual")}},"Manual")),l.createElement("button",{type:"button",className:"btn btn-success "+("Schedule"==d?"btn-fill":""),disabled:h||!u,onClick:function(){e.setState({InsightChanged:!0,currentChange:"state",controlStatus:"Schedule"})}},"Schedule"),l.createElement("button",{type:"button",disabled:h||!u,className:"btn btn-success "+("Optimize"==d?"btn-fill":""),onClick:function(){i&&m?document.getElementById("btnOptimize").click():e.handleOptimize()}},"Optimize")))),l.createElement("div",{className:c?"InsightApplyChanges":"hidden"},!g&&l.createElement("h4",null,"Do you want to apply these changes?"),g&&l.createElement("h4",null," Both heating and cooling could be on at the same time with these setpoints, please modify your request"),!g&&l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(a,n)}},"Apply Changes"))))),l.createElement("button",{id:"btnOptimize",style:{display:"none"},"data-toggle":"modal","data-target":"#showOptimizeDialog"},"."),l.createElement(f.a,{id:"showOptimizeDialog",cancelButtonId:"cancelOptimizeDialog",onSaveButtonClick:function(){e.handleOptimize()},saveButtonText:"Yes",showCancelButton:!0,showSaveButton:!1,cancelButtonText:"Cancel",heading:"Select One"},l.createElement("div",{className:"card padding-10"},l.createElement("div",{className:"row text-center col-md-offset-1"},i&&l.createElement("div",{onClick:function(){e.handleOptimalSelection("buildingOptimal",!0),e.setState({spaceOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},l.createElement("label",{className:"text-center title"}," Building Optimal ")),m&&l.createElement("div",{onClick:function(){e.handleOptimalSelection("spaceOptimal",!0),e.setState({buildingOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},l.createElement("label",{className:"text-center title"}," Space Optimal ")))))))},t}(l.Component);t.a=N},2083:function(e,t,n){"use strict";var a=n(3),l=n.n(a),s=n(1037),r=n(1129),c=n(1133),i=n(1130),o=n(1132),m=n(1036),d=n(1114),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentTab:"Current"},n}return u(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.InsightName,a=t.buildingName,u=t.instance,p=t.ControlName,h=t.type,f=t.monconType,g=this.state.currentTab;return l.a.createElement(l.a.Fragment,null,f&&-1==f.toLocaleLowerCase().indexOf("ceiling")&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 "},l.a.createElement("ul",{className:"nav nav-tabs"},l.a.createElement("li",{className:"Current"==g?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Current"})}},"Current Values")),l.a.createElement("li",{className:"Schedule"==g?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Schedule"})}},"Schedule")),l.a.createElement("li",{className:"Alarms"==g?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Alarms"})}},"Alarms")),l.a.createElement("li",{className:"Graphs"==g?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Graphs"})}},"Graphs")),l.a.createElement("li",{className:"ADP"==g?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"ADP"})}},"ADP"))))),"Current"==g&&l.a.createElement(l.a.Fragment,null,f&&-1!=f.toLocaleLowerCase().indexOf("relay")&&l.a.createElement(o.default,{buildingName:a,instance:u,RelayDeviceName:n,hideTabs:!0,type:h}),f&&-1!=f.toLocaleLowerCase().indexOf("ceiling")&&l.a.createElement(c.default,{buildingName:a,instance:u,CeilingSensorBoardName:n,type:h}),f&&(-1!=f.toLocaleLowerCase().indexOf("thermo")||-1!=f.toLocaleLowerCase().indexOf("inte"))&&l.a.createElement(d.default,{buildingName:a,instance:u,InsightName:n,type:h,hideTabs:!0})),"Schedule"==g&&l.a.createElement(m.default,{instance:u,buildingName:a,InsightName:n,ControlName:p,type:h,hideTabs:!0}),"Alarms"==g&&l.a.createElement(r.default,{instance:u,buildingName:a,InsightName:n,ControlName:p,type:h,hideTabs:!0}),"Graphs"==g&&l.a.createElement(i.default,{instance:u,buildingName:a,InsightName:n,ControlName:p,type:h,hideTabs:!0}),"ADP"==g&&l.a.createElement(s.default,{instance:u,buildingName:a,InsightName:n,ControlName:p,type:h,hideTabs:!0}))},t}(l.a.Component);t.a=p},993:function(e,t,n){"use strict";var a,l,s,r,c;n.d(t,"c",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return m}),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(a||(a={})),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE"}(l||(l={})),function(e){e[e.NOTALARMING=0]="NOTALARMING",e[e.ALARMING=1]="ALARMING"}(s||(s={})),function(e){e[e.ENABLED=0]="ENABLED",e[e.DISABLED=1]="DISABLED"}(r||(r={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.OPEN=1]="OPEN"}(c||(c={}));var i,o={AUTO:"auto",HEAT:"heat",DRY:"dry",FAN:"fan",COOL:"cool"};!function(e){e[e.AUTO=0]="AUTO",e[e.LOW=1]="LOW",e[e.MID=2]="MID",e[e.HIGH=3]="HIGH",e[e.POWERFUL=4]="POWERFUL"}(i||(i={}));var m={AUTO:"auto",LOW:"position-one",MID:"position-two",HIGH:"position-three",POWERFUL:"position-four"}},994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),s=(n.n(l),n(689)),r=n(995),c=n(29),i=n(600),o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},u=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),l=0;for(t=0;t<n;t++)for(var s=arguments[t],r=0,c=s.length;r<c;r++,l++)a[l]=s[r];return a},p=function(e){function t(t){var n=e.call(this,t)||this;return n.pageLength=15,n.state={AcknowledgedItems:[],sortOrder:1,AlarmList:[],showArchivedOnly:!1,alarmType:s.a.OperationalAlarm,selectedAlarm:Object()},a=n,n.handleAcknowledgeCheck=n.handleAcknowledgeCheck.bind(n),n.handleAcknowledgeButton=n.handleAcknowledgeButton.bind(n),n.handleStatusChange=n.handleStatusChange.bind(n),n._FetchAlarmList=n._FetchAlarmList.bind(n),n.sortAlarmList=n.sortAlarmList.bind(n),n.handleAcknowledgeChange=n.handleAcknowledgeChange.bind(n),n.handleClear=n.handleClear.bind(n),n.handleAcknowledge=n.handleAcknowledge.bind(n),n}return o(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e,t,n,l=this;return d(this,function(s){return e=this.props,t=e.alarmType,n=e.buildingName,this.setState({alarmType:t},function(){return m(l,void 0,void 0,function(){var e=this;return d(this,function(t){return n&&setTimeout(function(){return m(e,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,a._FetchAlarmList(!1)];case 1:return e.sent(),[2]}})})},300),[2]})})}),[2]})})},t.prototype.componentWillUnmount=function(){return m(this,void 0,void 0,function(){return d(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._FetchAlarmList=function(e){return m(this,void 0,void 0,function(){var t,n,a,l,s,c,i,o,m,p,h,f;return d(this,function(d){switch(d.label){case 0:return t=this.props,n=t.buildingName,a=t.equipmentName,l=t.spaceName,s=t.deviceId,c=this.state,i=c.alarmType,o=c.showArchivedOnly,(m=c.AlarmList)||(m=[]),p=this.pageLength,h=e?0:m.length,[4,Object(r.d)(i,n,o,h,p,a,l,s)];case 1:return f=d.sent(),e?m=u(f):m.push.apply(m,f),this.setState({AlarmList:m}),[2]}})})},t.prototype.handleAcknowledgeCheck=function(e){if(e.target.checked){var t=this.state.AlarmList.find(function(t){return t.id==e.target.value});(n=this.state.AcknowledgedItems).push(t),this.setState({AcknowledgedItems:n})}else{var n,a=(n=this.state.AcknowledgedItems).findIndex(function(t){return t.id==e.target.value});n.splice(a,1),this.setState({AcknowledgedItems:n})}},t.prototype.sortAlarmList=function(e,t){var n=this.state.AlarmList,a=this.state.sortOrder,l=n.sort(function(t,n){if(t&&n){var l="",s="";switch(e){case"Floor":t.floorRdfsLabel&&n.floorRdfsLabel&&(l=t.floorRdfsLabel,s=n.floorRdfsLabel);break;case"Title":t.title&&n.title&&(l=t.title,s=n.title);break;case"Space":t.spaceRdfsLabel&&n.spaceRdfsLabel&&(l=t.spaceRdfsLabel,s=n.spaceRdfsLabel);break;case"Zone":t.zoneRdfsLabel&&n.zoneRdfsLabel&&(l=t.zoneRdfsLabel,s=n.zoneRdfsLabel);break;case"EquipmentSensor":t.equipmentsensor&&n.equipmentsensor&&(l=t.equipmentsensor,s=n.equipmentsensor);break;case"Status":t.status&&n.status&&(l=t.status,s=n.status);break;case"TimeofAlarm":t.timeofalarm&&n.timeofalarm&&(l=t.timeofalarm,s=n.timeofalarm)}var r=0;return l.toLocaleLowerCase()<s.toLocaleLowerCase()?r=-1:l.toLocaleLowerCase()>s.toLocaleLowerCase()&&(r=1),r*a}});this.setState({AlarmList:l,sortOrder:-1*a})},t.prototype.handleStatusChange=function(e,t){var n=this.state.AlarmList;n[t].status=e,this.setState({AlarmList:n})},t.prototype.handleAcknowledgeChange=function(e,t){var n=this.state.AlarmList;n[t].isSelected=e,this.setState({AlarmList:n})},t.prototype.handleClear=function(){return m(this,void 0,void 0,function(){var e,t,n;return d(this,function(a){switch(a.label){case 0:for(e=this.state.alarmType,t=this.state.AlarmList,n=0;n<t.length;n++)t[n].status=t[n].isSelected?"clear":t[n].status,t[n].isSelected=!1;return this.setState({AlarmList:t}),e!=s.a.CustomerAlarm?[3,2]:[4,Object(r.a)(t)];case 1:return a.sent(),[3,6];case 2:return e!=s.a.OperationalAlarm?[3,4]:[4,Object(r.b)(t)];case 3:return a.sent(),[3,6];case 4:return e!=s.a.SupervisoryAlarm?[3,6]:[4,Object(r.c)(t)];case 5:a.sent(),a.label=6;case 6:return[4,this._FetchAlarmList(!0)];case 7:return a.sent(),[2]}})})},t.prototype.handleAcknowledge=function(){return m(this,void 0,void 0,function(){var e,t,n;return d(this,function(a){switch(a.label){case 0:for(e=this.state.alarmType,t=this.state.AlarmList,!1,t.map(function(e){e.acknowledge}),n=0;n<t.length;n++)!!t[n].isSelected&&(t[n].acknowledge=!!t[n].isSelected),t[n].isSelected=!1;return this.setState({AlarmList:t}),e!=s.a.CustomerAlarm?[3,2]:[4,Object(r.a)(t)];case 1:return a.sent(),[3,6];case 2:return e!=s.a.OperationalAlarm?[3,4]:[4,Object(r.b)(t)];case 3:return a.sent(),[3,6];case 4:return e!=s.a.SupervisoryAlarm?[3,6]:[4,Object(r.c)(t)];case 5:a.sent(),a.label=6;case 6:return[4,this._FetchAlarmList(!0)];case 7:return a.sent(),[2]}})})},t.prototype.handleArchive=function(){return m(this,void 0,void 0,function(){var e,t,n;return d(this,function(a){switch(a.label){case 0:for(e=this.state.alarmType,t=this.state.AlarmList,!1,t.map(function(e){e.archived}),n=0;n<t.length;n++)!!t[n].isSelected&&(t[n].archived=!!t[n].isSelected),t[n].isSelected=!1;return this.setState({AlarmList:t}),e!=s.a.CustomerAlarm?[3,2]:[4,Object(r.a)(t)];case 1:return a.sent(),[3,6];case 2:return e!=s.a.OperationalAlarm?[3,4]:[4,Object(r.b)(t)];case 3:return a.sent(),[3,6];case 4:return e!=s.a.SupervisoryAlarm?[3,6]:[4,Object(r.c)(t)];case 5:a.sent(),a.label=6;case 6:return[4,this._FetchAlarmList(!0)];case 7:return a.sent(),[2]}})})},t.prototype.handleAcknowledgeButton=function(){this.setState({AcknowledgedItems:[]})},t.prototype.render=function(){var e=this,t=this.state.alarmType,n=this.props,a=n.buildingName,r=n.instance,o=n.equipmentName,u=n.spaceName,p=n.isInTab,h=this.state,f=h.AlarmList,g=h.showArchivedOnly,b=h.selectedAlarm,v=!!(f&&f.length>0);if(f)for(var E=0;E<f.length;E++){f[E].isSelected||(v=!1)}return l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12 "},l.createElement("div",{className:"btn-group margin-5",style:{marginLeft:"0px"}},l.createElement("button",{type:"button",className:"btn btn-dark "+(t==s.a.OperationalAlarm?"btn-fill":"")+" ",onClick:function(){p?e.setState({alarmType:s.a.OperationalAlarm,showArchivedOnly:!1,AlarmList:[]},function(){return m(e,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+r+"/"+a+"/"+(o?"Alarms/OperationalAlarms/Equip/"+o:u?"Alarms/OperationalAlarms/Space/"+u:"Health/Alarms/OperationalAlarms")}},l.createElement("span",null,"Operational Alarms")),l.createElement("button",{type:"button",className:"btn btn-dark "+(t==s.a.CustomerAlarm?"btn-fill":"")+" ",onClick:function(){p?e.setState({alarmType:s.a.CustomerAlarm,showArchivedOnly:!1,AlarmList:[]},function(){return m(e,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+r+"/"+a+"/"+(o?"Alarms/CustomerAlarms/Equip/"+o:u?"Alarms/CustomerAlarms/Space/"+u:"Health/Alarms/CustomerAlarms")}},l.createElement("span",null,"Customer Alarms")),l.createElement("button",{type:"button",className:"btn btn-dark "+(t==s.a.SupervisoryAlarm?"btn-fill":"")+" ",onClick:function(){p?e.setState({alarmType:s.a.SupervisoryAlarm,showArchivedOnly:!1,AlarmList:[]},function(){return m(e,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+r+"/"+a+"/"+(o?"Alarms/SupervisoryAlarms/Equip/"+o:u?"Alarms/SupervisoryAlarms/Space/"+u:"Health/Alarms/SupervisoryAlarms")}},l.createElement("span",{className:""},"Supervisor Alarms"))),!g&&l.createElement(l.Fragment,null," ",l.createElement("button",{type:"button",className:"margin-5 btn btn-dark pull-right active",onClick:function(){e.handleArchive()}}," ",l.createElement("span",null,"ARCHIVE")),l.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleClear()}}," ",l.createElement("span",null,"CLEAR")),l.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleAcknowledge()}}," ",l.createElement("span",null,"ACKNOWLEDGE")),l.createElement("button",{type:"button",className:"margin-5 btn btn-success active pull-right"}," ",l.createElement("span",null,"GRAPH"))))),l.createElement("br",null),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("a",{className:"btn-sm btn-success pull-left custom-icon-btn",title:"Archived "+(t==s.a.CustomerAlarm?"Customer":t==s.a.SupervisoryAlarm?"Supervisory":t==s.a.OperationalAlarm?"Operational":"")+" Alarms",style:{marginTop:"0px"},onClick:function(t){e.setState({showArchivedOnly:!g,AlarmList:[]},function(){return e._FetchAlarmList(!0)})}},g?l.createElement("img",{className:"icon-img",style:{backgroundColor:"#B3A2C7"},src:"assets/img/alarm.png"}):l.createElement("img",{className:"icon-img",style:{backgroundColor:"#B3A2C7"},src:"assets/img/archive.png"})))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("br",null),l.createElement("div",{className:"card padding-10",style:{paddingTop:"0px"}},l.createElement("div",{className:"content",style:{paddingTop:"10px"}},l.createElement("div",{className:"dataCard"},l.createElement("div",{className:"row hidden-sm hidden-xs no-padding"},l.createElement("div",{className:"col-md-12 no-padding dataCard"},l.createElement("div",{className:(g?"col-md-4":"col-md-3")+" col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("Title")}},l.createElement("i",{className:"fa fas fa-sort"}),"Title"),l.createElement("div",{className:"col-md-1 col-sm-12 small grid-header-left",onClick:function(){return e.sortAlarmList("Floor")}},l.createElement("i",{className:"fa fas fa-sort"}),"Floor"),l.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("Space")}},l.createElement("i",{className:"fa fas fa-sort"}),"Space"),l.createElement("div",{className:"col-md-3 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("EquipmentSensor")}},l.createElement("i",{className:"fa fas fa-sort"}),"Device"),l.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("Status")}},l.createElement("i",{className:"fa fas fa-sort"}),"Status"),l.createElement("div",{className:"col-md-2 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("TimeofAlarm")}},l.createElement("i",{className:"fa fas fa-sort"}),"Time of Alarm"),!g&&l.createElement("div",{className:"col-md-1 col-sm-12 small  grid-header"},l.createElement("input",{style:{marginTop:"0px",marginLeft:"50px",height:"17px"},onChange:function(t){if(f){for(var n=0;n<f.length;n++){f[n].isSelected=t.target.checked}e.setState({AlarmList:f})}},type:"checkbox",checked:v,className:"form-control"})))),f&&f.length>0&&f.map(function(t,n){var a=t.spaceRdfsLabel?t.spaceRdfsLabel:Object(c.j)(t.space),s=t.floorRdfsLabel?t.floorRdfsLabel:Object(c.j)(t.floor);return l.createElement("div",{key:n,className:" row clickable",onClick:function(){e.setState({selectedAlarm:t},function(){document.getElementById("showSelectedAlarmDetails").click()})}},l.createElement("div",{className:t.acknowledge?"col-md-12 no-padding":"text-danger col-md-12 no-padding blink-text"},l.createElement("div",{className:(g?"col-md-4":"col-md-3")+" small headingText trim-data",title:t.title},l.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Title"),t.title),l.createElement("div",{className:"col-md-1 small headingText trim-data",title:s},l.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Floor"),s),l.createElement("div",{className:"col-md-1 small headingText trim-data",title:a},l.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Space"),a),l.createElement("div",{className:"col-md-3 small headingText trim-data",title:t.deviceName},l.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Device"),"\xa0\xa0",t.deviceName),l.createElement("div",{className:"col-md-1 small headingText trim-data",title:t.status},l.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Status"),t.status),l.createElement("div",{className:"col-md-2 small headingText trim-data",title:t.timeofalarm.ToEasternDateTime()},l.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Time of Alarm"),t.timeofalarm.ToEasternDateTime()),!g&&l.createElement("div",{className:"col-md-1 headingText"},l.createElement("span",{className:"visible-sm-inline visible-xs-inline  headingText"},"Select"),l.createElement("input",{style:{marginTop:"0px",marginLeft:"36px",height:"22px"},onChange:function(t){e.handleAcknowledgeChange(t.target.checked,n)},type:"checkbox",checked:t.isSelected,className:"form-control"}))))}),f&&f.length>=this.pageLength&&f.length%this.pageLength==0&&l.createElement("div",{className:"row center"},l.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e._FetchAlarmList(!1)}}," ",l.createElement("span",null,"Load More..."))),l.createElement("button",{type:"button",id:"showSelectedAlarmDetails",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#selectedAlarmDetails"}," ."),l.createElement(i.a,{id:"selectedAlarmDetails",heading:"Alarm Details",saveButtonText:"Ok",cancelButtonText:"Ok",showCancelButton:!1,showSaveButton:!0,isEditForm:!1,onSaveButtonClick:function(){e.setState({selectedAlarm:Object()})}},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleClear()}}," ",l.createElement("span",null,"CLEAR")),l.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleAcknowledge()}}," ",l.createElement("span",null,"ACKNOWLEDGE"))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Title:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.title))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Description:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null," ",b.description))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Device Name:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.deviceName))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Point:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.pointLabel))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Sensed Key:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.sensedValueKey))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Sensed Value:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.sensedValue))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Floor:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.floorRdfsLabel?b.floorRdfsLabel:Object(c.j)(b.floor)))),l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3"},l.createElement("label",{className:"header no-padding"},"Space:")),l.createElement("div",{className:"col-md-9"},l.createElement("p",null,b.spaceRdfsLabel?b.spaceRdfsLabel:Object(c.j)(b.space)))))))))))))},t}(l.Component);t.default=p},995:function(e,t,n){"use strict";t.d=function(e,t,n,s,i,o,m,d){return r(this,void 0,void 0,function(){var r,u,p,h;return c(this,function(c){switch(c.label){case 0:return u="",p=window.location.hash,u=-1!=p.indexOf("/")?p.substring(1,p.indexOf("/")):p.substring(1),h=e==l.a.CustomerAlarm?a.a.ALARMS.GetCutomerAlarm:e==l.a.SupervisoryAlarm?a.a.ALARMS.GetSupervisorAlarm:(l.a.OperationalAlarm,a.a.ALARMS.GetOperationalAlarm),t?[4,Object(a.d)(h,"instance="+u+"&buildingName="+t+"&isArchivedOnly="+n+"&skip="+s+"&limit="+i+(o?"&equipmentName="+o:"")+(m?"&spaceName="+m:"")+(d?"&deviceId="+d:""))]:[3,2];case 1:return r=c.sent(),[3,4];case 2:return[4,Object(a.d)(h,"instance="+u)];case 3:r=c.sent(),c.label=4;case 4:return[2,r.result]}})})},t.c=function(e){return r(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.ALARMS.UpdateSuperviorAlarm,"").then(function(e){if(e&&e.result)return e.result;Object(s.b)("Supervisory Alarm updated Successfully.")}).catch(function(e){Object(s.a)("Error occured while updating Supervisory Alarm.")})];case 1:return[2,t.sent()]}})})},t.a=function(e){return r(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.ALARMS.UpdateCustomerAlarm,"").then(function(e){if(e&&e.result)return e.result;Object(s.b)("Customer Alarm updated Successfully.")}).catch(function(e){Object(s.a)("Error occured while updating Customer Alarm.")})];case 1:return[2,t.sent()]}})})},t.b=function(e){return r(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(a.f)({model:e},a.a.ALARMS.UpdateOperationalAlarm,"").then(function(e){if(e&&e.result)return e.result;Object(s.b)("Operational Alarm updated Successfully.")}).catch(function(e){Object(s.a)("Error occured while updating Operational Alarm.")})];case 1:return[2,t.sent()]}})})};var a=n(18),l=n(689),s=n(30),r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,s){function r(e){try{i(a.next(e))}catch(e){s(e)}}function c(e){try{i(a.throw(e))}catch(e){s(e)}}function i(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,c)}i((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,l,s,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&s[0]?a.return:s[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,s[1])).done)return l;switch(a=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,a=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){r.label=s[1];break}if(6===s[0]&&r.label<l[1]){r.label=l[1],l=s;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(s);break}l[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],a=0}finally{n=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}}});