webpackJsonp([11],{2962:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=(a.n(n),a(127)),s=a(1289),i=a(11),o=a(707),r=a(2963),u=a(20),m=a(2964),c=a(2965),d=a(2966),h=a(2967),p=a(2968),g=a(2969),f=a(2970),v=a(2971),x=a(2972),V=a(2973),y=a(1678),b=(a.n(y),a(743)),w=a(2974),E=a(725),L=a(124),H=a(8),A=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),N=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},D=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},P=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),l=0;for(t=0;t<a;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,l++)n[l]=s[i];return n},S=function(e){function t(t){var a=e.call(this,t)||this,n=new Date(new Date(Date.now()).setMinutes(new Date(Date.now()).getMinutes()-30)),l=new Date(Date.now());return a.state={from:n,to:l,dashboardURL:"",insights:[],templatesList:[],selectedTemplate:"",loadingDevices:!0,liveGraphRange:30,filteredInsights:[],showInsights:[],selectedTemplateGraphs:{},showAlarmPoints:!1,insightsLoaded:0,verifyList:[],insightPoints:[]},a}return A(t,e),t.prototype.componentDidMount=function(){return N(this,void 0,void 0,function(){var e;return D(this,function(t){switch(t.label){case 0:return e=JSON.parse(H.a.getItem("user")),[4,Object(L.b)(e.contact)];case 1:return t.sent(),[4,this._fetchInsights()];case 2:return t.sent(),[2]}})})},t.prototype.moreInsights=function(){var e=this.state,t=e.showInsights,a=e.filteredInsights.slice(t.length-1,t.length+4),n=P(t,a);this.setState({showInsights:n},function(){window.dispatchEvent(new Event("reLoadGraph"))})},t.prototype.loadNextInsight=function(){var e=this.state,t=e.showInsights,a=e.insightsLoaded;a<t.length&&this.setState({insightsLoaded:a+1})},t.prototype._fetchInsights=function(){return N(this,void 0,void 0,function(){var e,t,a,n,l,r,u=this;return D(this,function(m){switch(m.label){case 0:return e=this.props.buildingName,t=[],a=[],[4,Object(b.o)(e)];case 1:return n=(n=m.sent()).filter(function(e){return"Measure"==e.verifyType}),e?[4,Object(o.w)(e)]:[3,6];case 2:return(l=(l=m.sent()).filter(function(e){var t,a,n,l,s,o,r;return-1!=(null===(t=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===t?void 0:t.toLowerCase().indexOf("thermostat"))||-1!=(null===(a=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===a?void 0:a.toLowerCase().indexOf("ceiling"))||-1!=(null===(n=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===n?void 0:n.toLowerCase().indexOf("intesis"))||-1!=(null===(l=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===l?void 0:l.toLowerCase().indexOf("ats"))||-1!=(null===(s=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===s?void 0:s.toLowerCase().indexOf("generator"))||"CBW406"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype)||"CBW418"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype)||-1!=(null===(o=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===o?void 0:o.toLowerCase().indexOf("relayv4"))||-1!=(null===(r=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===r?void 0:r.toLowerCase().indexOf("relayi1"))||"WattNode"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype)}))&&l.length?(r=l.map(function(e){return Object(i.g)(e.moncondevice)}),[4,Object(E.k)(e,"Sensed",r)]):[3,4];case 3:a=m.sent(),m.label=4;case 4:return[4,Object(s.b)(e).then(function(e){if(e&&e.length>0)e.map(function(e){t.push({ontology:Object(i.g)(e.ontology),label:Object(i.g)(e.label),deviceGraphs:Object(i.g)(e.deviceGraphs)})}),u.setState({insightPoints:a,templatesList:t,insights:l,selectedTemplate:(t.length-1).toString(),filteredInsights:[],showInsights:[]},function(){var e=JSON.parse(t[t.length-1].deviceGraphs),a=Object.keys(e),s=null===l||void 0===l?void 0:l.filter(function(e){return a.indexOf(Object(i.g)(e.moncondevice))>-1}),o=s.slice(0,10);u.setState({filteredInsights:s,showInsights:o,selectedTemplateGraphs:e,verifyList:n,loadingDevices:!1})});else{var s=null===l||void 0===l?void 0:l.filter(function(e){return e.moncondevice}),o=s.slice(0,10);u.setState({insightPoints:a,insights:l,filteredInsights:s,showInsights:o,verifyList:n,loadingDevices:!1})}})];case 5:m.sent(),m.label=6;case 6:return[2]}})})},t.prototype.changeAlarmStatus=function(){this.setState({showAlarmPoints:!this.state.showAlarmPoints}),window.dispatchEvent(new Event("ShowAlarms"))},t.prototype.liveGraphRangeChange=function(e){var t=this,a=new Date,n=new Date;n.setMinutes(n.getMinutes()-+e),this.setState({from:n,to:a,liveGraphRange:+e,loadingDevices:!0,insightsLoaded:0},function(){t.setState({loadingDevices:!1})})},t.prototype.selectTemplate=function(e){var t=this,a=this.state,n=a.templatesList,l=a.insights,s=a.verifyList;if(isNaN(+e))if("default"==e){var o=l,r=o.slice(0,10);this.setState({loadingDevices:!0,showAlarmPoints:!1,insightsLoaded:0},function(){t.setState({selectedTemplate:e,filteredInsights:o,showInsights:r,loadingDevices:!1})})}else{if(!s.find(function(t){return t._id==e}))return;this.setState({loadingDevices:!0,showAlarmPoints:!1,insightsLoaded:0},function(){t.setState({loadingDevices:!1,showAlarmPoints:!1,selectedTemplate:e,filteredInsights:[],showInsights:[],liveGraphRange:1})})}else this.setState({loadingDevices:!0,showAlarmPoints:!1,selectedTemplate:e,filteredInsights:[],showInsights:[],insightsLoaded:0},function(){var a=JSON.parse(n[+e].deviceGraphs),s=Object.keys(a),o=l.filter(function(e){return s.indexOf(Object(i.g)(e.moncondevice))>-1}),r=o.slice(0,10);t.setState({showInsights:r,filteredInsights:o,loadingDevices:!1,selectedTemplateGraphs:a})})},t.prototype.render=function(){var e,t=this,a=this.state,s=a.verifyList,o=a.from,y=a.to,b=a.showInsights,E=a.filteredInsights,L=a.templatesList,H=a.selectedTemplate,A=a.loadingDevices,N=a.liveGraphRange,D=a.selectedTemplateGraphs,P=a.showAlarmPoints,S=a.insightsLoaded,_=a.insightPoints,O=this.props,k=O.buildingName,j=O.instance;return n.createElement("div",{className:"dashboard"},n.createElement("div",{className:"dashboard-header sticky"},!A&&n.createElement("div",{className:"col-md-4 float-left"},n.createElement("div",{className:"col-md-8 no-padding"},n.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){t.selectTemplate(e.target.value)},value:H,placeholder:"Select Template"},0==L.length&&n.createElement("option",{value:""},"Select Template"),n.createElement("option",{value:"default"},"All Graphs"),(null===L||void 0===L?void 0:L.length)>0&&L.map(function(e,t){return n.createElement("option",{value:t,key:t},e.label)}),(null===s||void 0===s?void 0:s.length)>0&&s.map(function(e,t){return n.createElement("option",{value:e._id,key:t},e.projectName)}))),n.createElement(l.b,{target:"_blank",to:"/"+j+"/"+k+"/Dashboard/Templates",className:"btn btn-fill btn-secondary btn-secondary-dark margin-left-20 btn-fix-height"},"Create Template")),n.createElement("h3",{className:"dashboard-title"},Object(u.z)(k)),!A&&n.createElement("div",{className:"col-md-4 float-right margin-top-10"},S===b.length&&!s.find(function(e){return e._id==H})&&n.createElement(n.Fragment,null,n.createElement("div",{className:"col-md-3 padding-5"},n.createElement("label",{style:{color:"#fff",cursor:"default"}},"Show Alarm: \xa0")),n.createElement("div",{className:"padding-5"},n.createElement("label",null,n.createElement("input",{name:"showError",onChange:function(e){t.changeAlarmStatus()},className:"switchDashboard",type:"checkbox",checked:P}),n.createElement("div",null,n.createElement("div",null))))),n.createElement("div",{className:"col-md-5 padding-5 margin-left-20"},n.createElement("label",{style:{color:"#fff",cursor:"default"}},"Graph Range: \xa0")),n.createElement("div",{className:"col-md-6 no-padding"},n.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(e){t.liveGraphRangeChange(e.target.value)},value:N},s.find(function(e){return e._id==H})?n.createElement(n.Fragment,null,n.createElement("option",{value:1},"1 Month"),n.createElement("option",{value:2},"2 Months"),n.createElement("option",{value:3},"3 Months"),n.createElement("option",{value:4},"4 Months"),n.createElement("option",{value:5},"5 Months"),n.createElement("option",{value:6},"6 Months")):n.createElement(n.Fragment,null,n.createElement("option",{value:5},"5 Minutes"),n.createElement("option",{value:15},"15 Minutes"),n.createElement("option",{value:30},"30 Minutes"),n.createElement("option",{value:60},"1 Hour"),n.createElement("option",{value:180},"3 Hours"),n.createElement("option",{value:360},"6 Hours"),n.createElement("option",{value:720},"12 Hours"),n.createElement("option",{value:1440},"24 Hours")))))),A||""!=H||0!=L.length?A?n.createElement("div",{className:"graph-box-loader full-screen"},n.createElement("div",{className:"center-object loader"})):s.find(function(e){return e._id==H})?n.createElement("div",{className:""},n.createElement(w.a,{instance:j,buildingName:k,from:o,to:y,projectName:H,measureAnalysis:s.find(function(e){return e._id==H}).measureAnalysis})):n.createElement(m.a,{dataLength:b.length,className:"graph-boxes",next:function(){return t.moreInsights()},hasMore:b.length<E.length,loader:n.createElement("div",{className:"graph-box-loader full-screen"},n.createElement("div",{className:"center-object loader"}))},null===(e=null===b||void 0===b?void 0:b.slice(0,S+1))||void 0===e?void 0:e.map(function(e,a){for(var l,s,u,m,b,w,E,L=-1!=(null===(l=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===l?void 0:l.toLowerCase().indexOf("thermostat")),H=-1!=(null===(s=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===s?void 0:s.toLowerCase().indexOf("ceiling")),A=-1!=(null===(u=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===u?void 0:u.toLowerCase().indexOf("intesis")),S=-1!=(null===(m=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===m?void 0:m.toLowerCase().indexOf("ats")),O=-1!=(null===(b=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===b?void 0:b.toLowerCase().indexOf("generator")),F="CBW406"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),R="CBW418"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),C=-1!=(null===(w=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===w?void 0:w.toLowerCase().indexOf("relayv4")),T=-1!=(null===(E=Object(i.g)(null===e||void 0===e?void 0:e.moncontype))||void 0===E?void 0:E.toLowerCase().indexOf("relayi1")),q="WattNode"==Object(i.g)(null===e||void 0===e?void 0:e.moncontype),G=Object(i.g)(e.equipmentsRdfsLabel).split(","),M=Object(i.g)(e.relatedEquipmentsLabel).split(","),I=[],U=0;U<G.length;U++){var K=G[U],B=M&&M[U]?M[U]:"";I.push({ontology:K,rdfsLabel:B})}var W=null===_||void 0===_?void 0:_.filter(function(t){return Object(i.g)(t.monconDevice)==Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)});return n.createElement(n.Fragment,null,L&&n.createElement(r.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,equipment:I,showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),H&&n.createElement(d.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Temp & Humidity","Pressure","Illuminance","Air Particles","Gas Resistance","Other Parameters"],equipment:I,showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),A&&n.createElement(h.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,space:Object(i.g)(e.spaceRdfsLabel),zone:Object(i.g)(e.zoneRdfsLabel),floor:Object(i.g)(e.floorRdfsLabel),equipment:I,index:a,loadNextInsight:function(){return t.loadNextInsight()},device:e}),S&&n.createElement(p.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,equipment:I,index:a,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),O&&n.createElement(g.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Voltages","Currents","Powers","Power Factor","Other Parameters","Binary Parameters"],equipment:I,index:a,showAlarmPoints:P,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),F&&n.createElement(f.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],equipment:I,showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),R&&n.createElement(v.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Refrigerator 1","Refrigerator 2"],equipment:I,index:a,showAlarmPoints:P,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),C&&n.createElement(x.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,equipment:I,index:a,showAlarmPoints:P,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),T&&n.createElement(c.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Totalized Energy","Frequency and Voltage","Current and Power","State and Power Factor"],equipment:I,showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}),q&&n.createElement(V.a,{buildingName:k,instance:j,from:o,to:y,liveGraphRange:N,updateAfterMilliSeconds:15e3,graphsList:D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]?D[Object(i.g)(null===e||void 0===e?void 0:e.moncondevice)]:["Power","Phase Voltage","Voltage","Frequency","Energy Sum Resettable","Positive Energy Sum Non-resettable"],equipment:I,showAlarmPoints:P,index:a,loadNextInsight:function(){return t.loadNextInsight()},devicePoints:W,device:e}))}),0==(null===b||void 0===b?void 0:b.length)&&n.createElement("div",{className:"full-screen"},n.createElement("h1",{className:"no-graph-heading"}," No Graphs "))):n.createElement("div",{className:"full-screen"},n.createElement("h1",{className:"no-graph-heading"}," No Template Created ")))},t}(n.Component);t.default=S},2963:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(11),o=a(707),r=a(802),u=a(20),m=a(803),c=a(122),d=a(736),h=a(124),p=a(760),g=(a.n(p),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),f=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},x=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No data",deviceAlarms:[],alarmSensedPoints:[],graphDataAlarmPoint:{},selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm:!1,pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return g(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){var e=this;return v(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return f(this,void 0,void 0,function(){var e,t=this;return v(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(i.g)(e)&&Object(h.g)(Object(i.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){return f(this,void 0,void 0,function(){var t,a,n,l,s,o,r,u,h,p,g,f=this;return v(this,function(v){switch(v.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint,l=this.props,s=l.buildingName,o=l.devicePoints,r=l.showAlarmPoints,u=l.device,Object(c.a)(!0),r&&!e?[3,2]:(h=[],o&&o.length&&o.forEach(function(e){h.push({sensedValue:Object(i.g)(e.sensedValue),maximumExtremeValue:Object(i.g)(e.maximumExtremeValue),maximumNormalValue:Object(i.g)(e.maximumNormalValue),minimumExtremeValue:Object(i.g)(e.minimumExtremeValue),minimumNormalValue:Object(i.g)(e.minimumNormalValue)})}),[4,Object(m.e)(d.a.OperationalAlarm,s,!1,0,50,null,null,[Object(i.g)(u.moncondevice)],null)]);case 1:return p=v.sent(),g=new Date(a.columns[0][1]),p=p.filter(function(e){return new Date(e.timeofalarm)>g}),this.setState({alarmSensedPoints:h,deviceAlarms:p},function(){if((null===h||void 0===h?void 0:h.length)>0&&a.columns.length>1){var e=n.sensedValue.length>1?n.sensedValue:h[h.length-1].sensedValue;f.selectAlarmPoint(e)}}),[3,3];case 2:this.selectAlarmPoint(""),v.label=3;case 3:return Object(c.a)(!1),[2]}})})},t.prototype.selectAlarmPoint=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{},axes:{}};if(i){if("cooltemp"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"grey",Low:"grey","Cool setpoint":"red",High:"grey","High-High":"grey"}}}else if("heattemp"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},colors:{"Low-Low":"red",Low:"grey","Heat setpoint":"#e3e3e3",High:"grey","High-High":"red"}}}else if("spacetemp"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Space Temp":"#e3e3e3",High:"grey","High-High":"red"},axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"}}}else if("fan"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan 0: Auto 1: On":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Fan 0: Auto 1: On":"#e3e3e3",High:"grey","High-High":"red"}}}else if("fanstate"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Fan State 1: On":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Fan State 1: On":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mode"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{"Mode 0: Heat 1: Cool 2: Auto":"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","Mode 0: Heat 1: Cool 2: Auto":"#e3e3e3",High:"grey","High-High":"red"}}}else if("state"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},axes:{state:"y2","Low-Low":"y2",Low:"y2","High-High":"y2",High:"y2"},colors:{"Low-Low":"red",Low:"grey","State 1: Heat 2: Cool":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint:i,graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})})},t.prototype.callLiveUpdate=function(e){return f(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,m,c,d=this;return v(this,function(h){return t=this.state,a=t.graphData,n=t.axis1,l=t.grid,s=t.alarmSensedPoints,i=t.selectedAlarmPoint,o=this.props.showAlarmPoints,e["@timestamp"]&&(r=new Date(e["@timestamp"]),r=new Date(r.setHours(r.getHours()+10))),m=this.props.liveGraphRange,a.columns.length>1&&r&&(a.columns[0].push(r),1==(null===e||void 0===e?void 0:e.tempunits)?(a.columns[1].push(Object(u.a)(null===e||void 0===e?void 0:e.cooltemp).toFixed(1)),a.columns[2].push(Object(u.a)(null===e||void 0===e?void 0:e.heattemp).toFixed(1)),a.columns[3].push(Object(u.a)(null===e||void 0===e?void 0:e.spacetemp).toFixed(1))):(a.columns[1].push(null===e||void 0===e?void 0:e.cooltemp),a.columns[2].push(null===e||void 0===e?void 0:e.heattemp),a.columns[3].push(null===e||void 0===e?void 0:e.spacetemp)),a.columns[4].push(null===e||void 0===e?void 0:e.fan),a.columns[5].push(null===e||void 0===e?void 0:e.fanstate),a.columns[6].push(null===e||void 0===e?void 0:e.mode),a.columns[7].push(null===e||void 0===e?void 0:e.state),(r.getTime()-a.columns[0][2].getTime())/6e4>m&&a.columns[0].splice(1,1),n.x.tick.values[2]&&n.x.tick.values[1].getTime()&&n.x.tick.values[2].getTime()-n.x.tick.values[1].getTime()<r.getTime()-n.x.tick.values[n.x.tick.values.length-1]&&(n.x.tick.values.splice(0,1),l.x.lines.splice(0,1),r.setSeconds(0),m>10&&r.setMinutes(r.getMinutes()-r.getMinutes()%5),n.x.tick.values.push(r),l.x.lines.push({value:r,class:"grid4"})),c=null===r||void 0===r?void 0:r.toLocaleString(),o?this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:c},function(){var e=i.sensedValue.length>1?i.sensedValue:s[s.length-1].sensedValue;d.selectAlarmPoint(e)}):this.setState({grid:l,axis1:n,graphData:a,lastUpdatedAt:c})),[2]})})},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(i.g)(a.relatedEquipment))return{value:Object(i.g)(a.relatedEquipment),label:Object(i.g)(a.relatedEquipmentLabel),deviceType:Object(i.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return f(this,void 0,void 0,function(){var t,a,n,l,s,m,c,d,p,g,f,x,V,y,b,w,E,L,H,A,N,D,P,S,_=this;return v(this,function(v){switch(v.label){case 0:return t=this.props,a=t.from,n=t.to,l=t.device,s=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,p=m.graphData,g=m.lastUpdatedAt,l&&l.moncondevice?(f=this.fetchEquipmentFromPoints(),x=Object(i.g)(l.topic),[4,Object(o.I)(x,a,n,p.columns.length>1)]):[3,2];case 1:V=v.sent(),b=["Heat setpoint"],w=["Space Temp"],E=["Fan 0: Auto 1: On"],L=["Fan State 1: On"],H=["Mode 0: Heat 1: Cool 2: Auto"],A=["State 1: Heat 2: Cool"],N=["x"],(y=["Cool setpoint"]).push(null),b.push(null),w.push(null),E.push(null),L.push(null),H.push(null),A.push(null),N.push(new Date(a)),V.length>0&&(null===V||void 0===V||V.forEach(function(e){(null===e||void 0===e?void 0:e.cooltemp)&&(1==e.tempunits?(y.push(Object(u.a)(e.cooltemp).toFixed(1)),b.push(Object(u.a)(e.heattemp).toFixed(1)),w.push(Object(u.a)(e.spacetemp).toFixed(1))):(y.push(e.cooltemp),b.push(e.heattemp),w.push(e.spacetemp)),E.push(e.fan),L.push(e.fanstate),H.push(e.mode),A.push(e.state),N.push(new Date(e.timestamp)))})),g=V.length>0?null===(e=N[N.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",(p.columns.length>1||0===V.length)&&(y.push(null),b.push(null),w.push(null),E.push(null),L.push(null),H.push(null),A.push(null),N.push(new Date(n))),d.y.label="\xb0C",D=Object(r.a)(5,a,n),P="",D.length>1?(S=((new Date).getTime()-D[0].getTime())/1e3,P=(S/=3600)>24?"%m-%d %H:%M":S<.3?"%H:%M:%S":"%H:%M"):P="%H:%M:%S",c.x.lines=[],D.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),p={x:"x",columns:[N,y,b,w,E,L,H,A],axes:{"Fan 0: Auto 1: On":"y2","Fan State 1: On":"y2","Mode 0: Heat 1: Cool 2: Auto":"y2",state:"y2"},colors:{"Cool setpoint":"yellow","Heat setpoint":"green","Space Temp":"blue","Fan 0: Auto 1: On":"pink","Fan State 1: On":"yellow","Mode 0: Heat 1: Cool 2: Auto":"magenta","State 1: Heat 2: Cool":"#06cfa4"},types:{"Cool setpoint":"line","Heat setpoint":"line","Space Temp":"line","Fan 0: Auto 1: On":"step","Fan State 1: On":"step","Mode 0: Heat 1: Cool 2: Auto":"step","State 1: Heat 2: Cool":"step"}},d={x:{type:"timeseries",tick:{fit:!1,count:5,values:D,format:P}},y:{label:{text:"Temperature \xb0F",position:"outer-middle"},tick:{fit:!0,values:[0,20,40,60,80,100],count:6,format:function(e){return parseFloat(e).toFixed(1)}},max:100,min:0},y2:{show:!0,label:{text:"State, Mode, Fan, Fan State",position:"outer-middle"},tick:{fit:!0,values:[0,1,2,3],count:6,format:function(e){return parseFloat(e).toFixed(0)}},max:3,min:0}},this.props.loadNextInsight(),Object(h.h)(x,this.callLiveUpdate),this.setState({grid:c,axis1:d,graphData:p,loading:!1,lastUpdatedAt:g,pointEquipment:f},function(){s&&_.changeAlarmStatus(!0)}),v.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e,t=this,a=this.state,l=a.loading,o=a.graphData,r=a.axis1,u=a.grid,m=a.lastUpdatedAt,c=a.alarmSensedPoints,d=a.selectedAlarmPoint,h=a.graphDataAlarmPoint,p=a.indicateAlarm,g=a.pointEquipment,f=this.props,v=f.instance,x=f.buildingName,V=f.device,y=f.showAlarmPoints,b=f.equipment;return n.createElement("div",{className:"row col-md-12 device-graphs "+(p&&y?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),y&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",c&&c.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:d.sensedValue,onChange:function(e){t.selectAlarmPoint(e.target.value)}},c.map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),p&&n.createElement("a",{href:"#"+v+"/"+x+"/Alarms/OperationalAlarms/Device/"+Object(i.g)(V.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+v+"/"+x+"/Insights/Equipment/Graphs/InsightControl/"+Object(i.g)(V.moncondevice),target:"_blank",rel:"noreferrer noopener"},g&&g.value?g.label:b.length>0&&b[0].rdfsLabel?b[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Space: ",Object(i.g)(V.spaceRdfsLabel)),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",g&&g.value?g.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",g&&g.deviceType?g.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(i.g)(V.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(i.g)(V.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",b.map(function(e,t){return e.rdfsLabel+(t<b.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(i.g)(V.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(i.g)(V.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",m)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:y&&(null===(e=h.columns)||void 0===e?void 0:e.length)>1?h:o,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}}))},t}(n.Component);t.a=x},2964:function(e,t,a){"use strict";var n=a(2),l=a.n(n),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};var i=function(){return(i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)};var o={Pixel:"Pixel",Percent:"Percent"},r={unit:o.Percent,value:.8};function u(e){return"number"===typeof e?{unit:o.Percent,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:o.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:o.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),r):(console.warn("scrollThreshold should be string or number"),r)}var m=function(e){function t(t){var a=e.call(this,t)||this;return a.lastScrollTop=0,a.actionTriggered=!1,a.startY=0,a.currentY=0,a.dragging=!1,a.maxPullDownDistance=0,a.getScrollableTarget=function(){return a.props.scrollableTarget instanceof HTMLElement?a.props.scrollableTarget:"string"===typeof a.props.scrollableTarget?document.getElementById(a.props.scrollableTarget):(null===a.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},a.onStart=function(e){a.lastScrollTop||(a.dragging=!0,e instanceof MouseEvent?a.startY=e.pageY:e instanceof TouchEvent&&(a.startY=e.touches[0].pageY),a.currentY=a.startY,a._infScroll&&(a._infScroll.style.willChange="transform",a._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},a.onMove=function(e){a.dragging&&(e instanceof MouseEvent?a.currentY=e.pageY:e instanceof TouchEvent&&(a.currentY=e.touches[0].pageY),a.currentY<a.startY||(a.currentY-a.startY>=Number(a.props.pullDownToRefreshThreshold)&&a.setState({pullToRefreshThresholdBreached:!0}),a.currentY-a.startY>1.5*a.maxPullDownDistance||a._infScroll&&(a._infScroll.style.overflow="visible",a._infScroll.style.transform="translate3d(0px, "+(a.currentY-a.startY)+"px, 0px)")))},a.onEnd=function(){a.startY=0,a.currentY=0,a.dragging=!1,a.state.pullToRefreshThresholdBreached&&(a.props.refreshFunction&&a.props.refreshFunction(),a.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){a._infScroll&&(a._infScroll.style.overflow="auto",a._infScroll.style.transform="none",a._infScroll.style.willChange="unset")})},a.onScrollListener=function(e){"function"===typeof a.props.onScroll&&setTimeout(function(){return a.props.onScroll&&a.props.onScroll(e)},0);var t=a.props.height||a._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;a.actionTriggered||((a.props.inverse?a.isElementAtTop(t,a.props.scrollThreshold):a.isElementAtBottom(t,a.props.scrollThreshold))&&a.props.hasMore&&(a.actionTriggered=!0,a.setState({showLoader:!0}),a.props.next&&a.props.next()),a.lastScrollTop=t.scrollTop)},a.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},a.throttledOnScrollListener=function(e,t,a,n){var l,s=!1,i=0;function o(){l&&clearTimeout(l)}function r(){var r=this,u=Date.now()-i,m=arguments;function c(){i=Date.now(),a.apply(r,m)}s||(n&&!l&&c(),o(),void 0===n&&u>e?c():!0!==t&&(l=setTimeout(n?function(){l=void 0}:c,void 0===n?e-u:e)))}return"boolean"!==typeof t&&(n=a,a=t,t=void 0),r.cancel=function(){o(),s=!0},r}(150,a.onScrollListener).bind(a),a.onStart=a.onStart.bind(a),a.onMove=a.onMove.bind(a),a.onEnd=a.onEnd.bind(a),a}return function(e,t){function a(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?i(i({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var a=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=u(t);return n.unit===o.Pixel?e.scrollTop<=n.value+a-e.scrollHeight+1:e.scrollTop<=n.value/100+a-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var a=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,n=u(t);return n.unit===o.Pixel?e.scrollTop+a>=e.scrollHeight-n.value:e.scrollTop+a>=n.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),a=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),n=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return l.a.createElement("div",{style:n,className:"infinite-scroll-component__outerdiv"},l.a.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&l.a.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},l.a.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!a&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(n.Component);t.a=m},2965:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(11),o=a(707),r=a(802),u=a(803),m=a(122),c=a(736),d=a(124),h=a(760),p=(a.n(h),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e=this;return f(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){var e,t=this;return f(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(i.g)(e)&&Object(d.g)(Object(i.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){return g(this,void 0,void 0,function(){var t,a,n,l,s,o,r,d,h,p,g,v,x,V,y=this;return f(this,function(f){switch(f.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,o=t.selectedAlarmPoint4,r=this.props,d=r.buildingName,h=r.devicePoints,p=r.showAlarmPoints,g=r.device,Object(m.a)(!0),p&&!e?[3,2]:(v=[],h&&h.length&&h.forEach(function(e){v.push({sensedValue:Object(i.g)(e.sensedValue),maximumExtremeValue:Object(i.g)(e.maximumExtremeValue),maximumNormalValue:Object(i.g)(e.maximumNormalValue),minimumExtremeValue:Object(i.g)(e.minimumExtremeValue),minimumNormalValue:Object(i.g)(e.minimumNormalValue)})}),[4,Object(u.e)(c.a.OperationalAlarm,d,!1,0,50,null,null,[Object(i.g)(g.moncondevice)],null)]);case 1:return x=f.sent(),V=new Date(a.columns[0][1]),x=x.filter(function(e){return new Date(e.timeofalarm)>V}),this.setState({alarmSensedPoints:v,deviceAlarms:x},function(){if((null===v||void 0===v?void 0:v.length)>0&&a.columns.length>1){var e=v.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";y.selectAlarmPoint1(t);var i=v.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}),r=l.sensedValue.length>1?l.sensedValue:(null===i||void 0===i?void 0:i.length)>0?i[i.length-1].sensedValue:"";y.selectAlarmPoint2(r);var u=v.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}),m=s.sensedValue.length>1?s.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";y.selectAlarmPoint3(m);var c=v.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}),d=o.sensedValue.length>1?o.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";y.selectAlarmPoint4(d)}}),[3,3];case 2:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),f.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){return g(this,void 0,void 0,function(){var t,a,n,l,s,i,o=this;return f(this,function(r){return t=this.state,a=t.graphData,n=t.alarmSensedPoints,l=t.deviceAlarms,s=n.find(function(t){return t.sensedValue===e}),i=l.length>0&&l.findIndex(function(e){return"import_active_energy_Wh"==e.sensedValueKey})>-1,this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(s){if("import_active_energy_Wh"==s.sensedValue){for(var t=["Low-Low"],n=["Low"],l=["High"],r=["High-High"],u=0;u<a.columns[1].length-1;u++)t.push(+s.minimumExtremeValue/1e3),n.push(+s.minimumNormalValue/1e3),l.push(+s.maximumNormalValue/1e3),r.push(+s.maximumExtremeValue/1e3);e={x:"x",columns:[a.columns[0],t,n,a.columns[1],l,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Killo Watt Hour":"#e3e3e3",High:"grey","High-High":"red"}}}else e=a;o.setState({selectedAlarmPoint1:s,graphDataAlarmPoint1:e,indicateAlarm1:i,loading:!1})}else e=a,o.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:i,graphDataAlarmPoint1:e,loading:!1})}),[2]})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"frequency_Hz"==e.sensedValueKey||"voltage_volts"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("frequency_Hz"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Freq:"#e3e3e3",High:"grey","High-High":"red"}}}else if("voltage_volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Volts:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"active_power_Watts"==e.sensedValueKey||"current_Amperes"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("active_power_Watts"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Watts:"#e3e3e3",High:"grey","High-High":"red"}}}else if("current_Amperes"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Amps:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"relay_state"==e.sensedValueKey||"power_factor"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("relay_state"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",State:"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_factor"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Factor":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,i=n.graphData3,o=n.graphData4,r=n.axis1,u=n.grid,m=n.alarmSensedPoints,c=n.selectedAlarmPoint1,d=n.selectedAlarmPoint2,h=n.selectedAlarmPoint3,p=n.selectedAlarmPoint4,g=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var f=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(+(null===e||void 0===e?void 0:e.import_active_energy_Wh)/1e3),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.frequency_Hz),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.voltage_volts),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.active_power_Watts),i.columns[2].splice(1,1),i.columns[2].push(null===e||void 0===e?void 0:e.current_Amperes),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.i1relay_state),o.columns[2].splice(1,1),o.columns[2].push(null===e||void 0===e?void 0:e.power_factor),r.x.tick.values[0]<l.columns[0][1]&&(r.x.tick.values.splice(0,1),u.x.lines.splice(0,1)),(t.getTime()-l.columns[0][2].getTime())/6e4>f&&l.columns[0].splice(1,1),r.x.tick.values[2]&&r.x.tick.values[1].getTime()&&r.x.tick.values[2].getTime()-r.x.tick.values[1].getTime()<t.getTime()-r.x.tick.values[r.x.tick.values.length-1]&&(r.x.tick.values.splice(0,1),u.x.lines.splice(0,1),t.setSeconds(0),f>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),r.x.tick.values.push(t),u.x.lines.push({value:t,class:"grid4"}));var v=null===t||void 0===t?void 0:t.toLocaleString();g?this.setState({grid:u,axis1:r,graphData:l,graphData2:s,graphData3:i,graphData4:o,lastUpdatedAt:v},function(){var e=m.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}),t=c.sensedValue.length>1?c.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=m.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}),l=d.sensedValue.length>1?d.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=m.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}),i=h.sensedValue.length>1?h.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(i);var o=m.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}),r=p.sensedValue.length>1?p.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";a.selectAlarmPoint4(r)}):this.setState({grid:u,axis1:r,graphData:l,graphData2:s,graphData3:i,graphData4:o,lastUpdatedAt:v})}},t.prototype.liveGraph=function(){var e,t,a,n,l,s,r,u,m;return g(this,void 0,void 0,function(){var c,d,h,p,g,v,x,V,y,b,w,E,L,H,A,N;return f(this,function(f){switch(f.label){case 0:return c=this.state,d=c.graphData,h=c.graphData2,p=c.graphData3,g=c.graphData4,v=c.axis1,x=c.grid,V=c.lastUpdatedAt,y=this.props,b=y.device,w=y.liveGraphRange,E=new Date,L=new Date,H=Object(i.g)(b.topic),L.setMinutes(L.getMinutes()-w),[4,Object(o.g)(H,L,E,!0)];case 1:return A=f.sent(),(N=new Date(null===(e=A[0])||void 0===e?void 0:e.timestamp))>d.columns[0][d.columns[0].length-1]&&(null===(t=A[0])||void 0===t?void 0:t.timestamp)&&(d.columns[0].splice(1,1),d.columns[0].push(N),d.columns[1].splice(1,1),d.columns[1].push(+(null===(a=A[0])||void 0===a?void 0:a.import_active_energy_Wh)/1e3),h.columns[1].splice(1,1),h.columns[1].push(null===(n=A[0])||void 0===n?void 0:n.frequency_Hz),h.columns[2].splice(1,1),h.columns[2].push(null===(l=A[0])||void 0===l?void 0:l.voltage_volts),p.columns[1].splice(1,1),p.columns[1].push(null===(s=A[0])||void 0===s?void 0:s.active_power_Watts),p.columns[2].splice(1,1),p.columns[2].push(null===(r=A[0])||void 0===r?void 0:r.current_Amperes),g.columns[1].splice(1,1),g.columns[1].push(null===(u=A[0])||void 0===u?void 0:u.i1relay_state),g.columns[2].splice(1,1),g.columns[2].push(null===(m=A[0])||void 0===m?void 0:m.power_factor),v.x.tick.values[0]<d.columns[0][1]&&(v.x.tick.values.splice(0,1),x.x.lines.splice(0,1)),(N.getTime()-d.columns[0][2].getTime())/6e4>w&&d.columns[0].splice(1,1),v.x.tick.values[0]<d.columns[0][1]&&(v.x.tick.values.splice(0,1),x.x.lines.splice(0,1)),v.x.tick.values[2]&&v.x.tick.values[1].getTime()&&v.x.tick.values[2].getTime()-v.x.tick.values[1].getTime()<N.getTime()-v.x.tick.values[v.x.tick.values.length-1]&&(N.setSeconds(0),w>10&&N.setMinutes(N.getMinutes()-N.getMinutes()%5),v.x.tick.values.push(N),x.x.lines.push({value:N,class:"grid4"})),V=null===N||void 0===N?void 0:N.toLocaleString(),this.setState({grid:x,axis1:v,graphData:d,graphData2:h,graphData3:p,graphData4:g,lastUpdatedAt:V})),[2]}})})},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(i.g)(a.relatedEquipment))return{value:Object(i.g)(a.relatedEquipment),label:Object(i.g)(a.relatedEquipmentLabel),deviceType:Object(i.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return g(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,h,p,g,v,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R=this;return f(this,function(f){switch(f.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=t.showAlarmPoints,u=this.state,m=u.grid,c=u.axis1,h=u.axis2,p=u.axis3,g=u.axis4,v=u.graphData,x=u.graphData2,V=u.graphData3,y=u.graphData4,b=u.lastUpdatedAt,a&&a.moncondevice?(w=this.fetchEquipmentFromPoints(),E=Object(i.g)(a.topic),[4,Object(o.g)(E,n,l,v.columns.length>1)]):[3,2];case 1:L=f.sent(),A=["Watts"],N=["Amps"],D=["Freq"],P=["Killo Watt Hour"],S=["Power Factor"],_=["Volts"],O=["x"],(H=["State"]).push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(new Date(n)),L.length>0&&L.forEach(function(e){(null===e||void 0===e?void 0:e.i1relay_state)&&(H.push(e.i1relay_state),A.push(e.active_power_Watts),N.push(e.current_Amperes),D.push(e.frequency_Hz),P.push(+e.import_active_energy_Wh/1e3),S.push(e.power_factor),_.push(e.voltage_volts),O.push(new Date(e.timestamp)))}),b=L.length>0?null===(e=O[O.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(new Date(l)),v={x:"x",columns:[O,P]},x={x:"x",columns:[O,D,_]},V={x:"x",columns:[O,A,N]},y={x:"x",columns:[O,H,S]},c.y.label="kWh",h.y.label="Hz/Volts",p.y.label="Watts/Amps",g.y.label="",k=Object(r.a)(5,n,l),j="",k.length>1?(F=((new Date).getTime()-k[0].getTime())/1e3,j=(F/=3600)>24?"%m-%d %H:%M":F<.3?"%H:%M:%S":"%H:%M"):j="%H:%M:%S",m.x.lines=[],k.forEach(function(e){m.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},g.y.tick.format=function(e){return parseFloat(e).toFixed(2)},c.y.tick.values=[0,10,20,30,40,50],h.y.tick.values=[0,50,100,150,200],p.y.tick.values=[0,20,40,60,80,100],g.y.tick.values=[-1,0,1,2],c.y.max=50,c.y.min=0,h.y.max=200,h.y.min=0,p.y.max=100,p.y.min=0,g.y.max=2,g.y.min=-1,c.x.tick.format=j,h.x.tick.format=j,p.x.tick.format=j,g.x.tick.format=j,c.x.tick.values=k,h.x.tick.values=k,p.x.tick.values=k,g.x.tick.values=k,this.props.loadNextInsight(),Object(d.h)(E,this.callLiveUpdate),this.setState({grid:m,axis1:c,axis2:h,axis3:p,axis4:g,graphData:v,graphData2:x,graphData3:V,graphData4:y,loading:!1,lastUpdatedAt:b,pointEquipment:w},function(){s&&R.changeAlarmStatus(!0)}),f.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e,t,a,l,o=this,r=this.state,u=r.loading,m=r.graphData,c=r.graphData2,d=r.graphData3,h=r.graphData4,p=r.graphDataAlarmPoint1,g=r.graphDataAlarmPoint2,f=r.graphDataAlarmPoint3,v=r.graphDataAlarmPoint4,x=r.axis1,V=r.axis2,y=r.axis3,b=r.axis4,w=r.grid,E=r.lastUpdatedAt,L=r.indicateAlarm1,H=r.indicateAlarm2,A=r.indicateAlarm3,N=r.indicateAlarm4,D=r.alarmSensedPoints,P=r.selectedAlarmPoint1,S=r.selectedAlarmPoint2,_=r.selectedAlarmPoint3,O=r.selectedAlarmPoint4,k=r.pointEquipment,j=this.props,F=j.graphsList,R=j.instance,C=j.buildingName,T=j.device,q=j.showAlarmPoints,G=j.equipment;return n.createElement(n.Fragment,null,F.indexOf("Totalized Energy")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(L&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",D&&D.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(e){o.selectAlarmPoint1(e.target.value)}},D.filter(function(e){return"import_active_energy_Wh"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),L&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/RelayControl/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Totalized Energy"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(i.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(i.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(i.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(i.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:q&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:m,size:{height:300},axis:x,grid:w,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),F.indexOf("Frequency and Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",D&&D.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(e){o.selectAlarmPoint2(e.target.value)}},D.filter(function(e){return"frequency_Hz"==e.sensedValue||"voltage_volts"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/RelayControl/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Freq & Volts"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(i.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(i.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(i.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(i.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:q&&(null===(t=g.columns)||void 0===t?void 0:t.length)>1?g:c,size:{height:300},axis:V,grid:w,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),F.indexOf("Current and Power")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(A&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",n.createElement("select",{className:"alarm-points-list",id:"spaces",value:_.sensedValue,onChange:function(e){o.selectAlarmPoint3(e.target.value)}},D.filter(function(e){return"active_power_Watts"==e.sensedValue||"current_Amperes"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})),A&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/RelayControl/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Current and Power"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(i.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(i.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(i.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(i.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:q&&(null===(a=f.columns)||void 0===a?void 0:a.length)>1?f:d,size:{height:300},axis:y,grid:w,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),F.indexOf("State and Power Factor")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(N&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",D&&D.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:O.sensedValue,onChange:function(e){o.selectAlarmPoint4(e.target.value)}},D.filter(function(e){return"relay_state"==e.sensedValue||"power_factor"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),N&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/RelayControl/"+Object(i.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-4 sentence-break"}," ","State and Power Factor"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(i.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(i.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(i.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(i.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",E)),u?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:q&&(null===(l=v.columns)||void 0===l?void 0:l.length)>1?v:h,size:{height:300},axis:b,grid:w,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=v},2966:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(707),o=a(1007),r=a(802),u=a(11),m=a(803),c=a(736),d=a(122),h=a(124),p=a(760),g=(a.n(p),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),f=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},x=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return g(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){var e=this;return v(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return f(this,void 0,void 0,function(){var e,t=this;return v(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(u.g)(e)&&Object(h.g)(Object(u.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){return f(this,void 0,void 0,function(){var t,a,n,l,s,i,o,r,h,p,g,f,x,V,y,b,w=this;return v(this,function(v){switch(v.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,o=t.selectedAlarmPoint5,r=t.selectedAlarmPoint6,h=this.props,p=h.buildingName,g=h.devicePoints,f=h.showAlarmPoints,x=h.device,Object(d.a)(!0),f&&!e?[3,2]:(V=[],g&&g.length&&g.forEach(function(e){V.push({sensedValue:Object(u.g)(e.sensedValue),maximumExtremeValue:Object(u.g)(e.maximumExtremeValue),maximumNormalValue:Object(u.g)(e.maximumNormalValue),minimumExtremeValue:Object(u.g)(e.minimumExtremeValue),minimumNormalValue:Object(u.g)(e.minimumNormalValue)})}),[4,Object(m.e)(c.a.OperationalAlarm,p,!1,0,50,null,null,[Object(u.g)(x.moncondevice)],null)]);case 1:return y=v.sent(),a.columns.length>1&&(b=new Date(a.columns[0][1]),y=y.filter(function(e){return new Date(e.timeofalarm)>b})),this.setState({alarmSensedPoints:V,deviceAlarms:y},function(){if((null===V||void 0===V?void 0:V.length)>0&&a.columns.length>1){var e=V.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";w.selectAlarmPoint1(t);var u=V.filter(function(e){return"pressure_hPa"==e.sensedValue}),m=l.sensedValue.length>1?l.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";w.selectAlarmPoint2(m);var c=V.filter(function(e){return"illuminance_lux"==e.sensedValue}),d=s.sensedValue.length>1?s.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";w.selectAlarmPoint3(d);var h=V.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),p=i.sensedValue.length>1?i.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";w.selectAlarmPoint4(p);var g=V.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),f=o.sensedValue.length>1?o.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";w.selectAlarmPoint5(f);var v=V.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),x=r.sensedValue.length>1?r.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";w.selectAlarmPoint6(x)}}),[3,3];case 2:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),v.label=3;case 3:return Object(d.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"relhumidity_pct"==e.sensedValueKey||"temp_celsius"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("temp_celsius"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[0].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Temp:"#e3e3e3",High:"grey","High-High":"red"}}}else if("relhumidity_pct"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[0].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Humidity:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"pressure_hPa"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("pressure_hPa"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Pressure:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"illuminance_lux"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("illuminance_lux"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Illuminance:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"gasResistance_kOhm"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("gasResistance_kOhm"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gas Res":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"equiCO2_ppm"==e.sensedValueKey||"tvoc_ppm"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("equiCO2_ppm"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",CO2:"#e3e3e3",High:"grey","High-High":"red"}}}else if("tvoc_ppm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",TVOC:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:i,graphDataAlarmPoint5:e,indicateAlarm5:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:o,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"motion_sensed"==e.sensedValueKey||"num_BTdev"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("motion_sensed"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Motion:"#e3e3e3",High:"grey","High-High":"red"}}}else if("tvoc_ppm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Blth Dev.":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:i,graphDataAlarmPoint6:e,indicateAlarm6:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:o,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(u.g)(a.relatedEquipment))return{value:Object(u.g)(a.relatedEquipment),label:Object(u.g)(a.relatedEquipmentLabel),deviceType:Object(u.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return f(this,void 0,void 0,function(){var t,a,n,l,s,m,c,d,p,g,f,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R,C,T,q,G,M,I,U,K,B,W=this;return v(this,function(v){switch(v.label){case 0:return t=this.props,a=t.from,n=t.to,l=t.device,s=t.showAlarmPoints,m=this.state,c=m.grid,d=m.axis1,p=m.axis2,g=m.axis3,f=m.axis4,x=m.axis5,V=m.axis6,y=m.graphData,b=m.graphData2,w=m.graphData3,E=m.graphData4,L=m.graphData5,H=m.graphData6,A=m.lastUpdatedAt,l&&l.moncondevice?(N=this.fetchEquipmentFromPoints(),D=Object(u.g)(l.topic),P=Object(u.g)(l.firmwareVersion),S=Object(u.g)(l.csbCallibration)?parseInt(Object(u.g)(l.csbCallibration)):0,[4,Object(i.d)(D,a,n,y.columns.length>1)]):[3,2];case 1:_=v.sent(),k=["Humidity"],j=["Alt."],F=["CO2"],R=["TVOC"],C=["Gas Res"],T=["Illuminance"],q=["Motion"],G=["Blth Dev."],M=["Pressure"],I=["x"],(O=["Temp"]).push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(null),G.push(null),M.push(null),I.push(new Date(a)),_.length>0&&_.forEach(function(e){e&&(O.push(Object(o.a)(e.temp_celsius,P||"",S)),k.push(e.relhumidity_pct),j.push(e.altitude_m),F.push(e.equiCO2_ppm),R.push(e.tvoc_ppm),M.push(e.pressure_hPa),C.push(e.gasResistance_kOhm),T.push(e.illuminance_lux),q.push(e.motion_sensed),G.push(e.num_BTdev),I.push(new Date(e.timestamp)))}),A=_.length>0?null===(e=I[I.length-1])||void 0===e?void 0:e.toLocaleString():"No data",0===_.length&&(O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(null),G.push(null),M.push(null),I.push(new Date(n))),d.y.label="\xb0F / %",p.y.label="hPa",g.y.label="Lux",f.y.label="kOhm",x.y.label="PPM",V.y.label="",I.length>1&&(U=Object(r.a)(5,a,n),K="",U.length>1?(B=((new Date).getTime()-U[0].getTime())/1e3,K=(B/=3600)>24?"%m-%d %H:%M":B<.3?"%H:%M:%S":"%H:%M"):K="%H:%M:%S",c.x.lines=[],U.forEach(function(e){c.x.lines.push({value:e,class:"grid4"})}),d.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(0)},g.y.tick.format=function(e){return parseFloat(e).toFixed(0)},f.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},V.y.tick.format=function(e){return parseFloat(e).toFixed(0)},d.y.tick.values=[0,20,40,60,80,100],p.y.tick.values=[0,400,800,1200],g.y.tick.values=[0,40,80,120,160,200,240],f.y.tick.values=[0,600,1200,1800,2400,3e3],x.y.tick.values=[0,4e3,8e3,12e3,16e3],V.y.tick.values=[0,10,20,30,40,50],d.y.max=100,d.y.min=0,p.y.max=1100,p.y.min=0,g.y.max=200,g.y.min=0,f.y.max=3e3,f.y.min=0,x.y.max=16e3,x.y.min=0,V.y.max=50,V.y.min=0,d.x.tick.format=K,p.x.tick.format=K,g.x.tick.format=K,f.x.tick.format=K,x.x.tick.format=K,V.x.tick.format=K,d.x.tick.values=U,p.x.tick.values=U,g.x.tick.values=U,f.x.tick.values=U,x.x.tick.values=U,V.x.tick.values=U,y={x:"x",columns:[I,O,k]},b={x:"x",columns:[I,M]},w={x:"x",columns:[I,T]},E={x:"x",columns:[I,C]},L={x:"x",columns:[I,F,R]},H={x:"x",columns:[I,q,G]},this.props.loadNextInsight(),Object(h.h)(D,this.callLiveUpdate),this.setState({grid:c,axis1:d,axis2:p,axis3:g,axis4:f,axis5:x,axis6:V,graphData:y,graphData2:b,graphData3:w,graphData4:E,graphData5:L,graphData6:H,lastUpdatedAt:A,loading:!1,pointEquipment:N},function(){s&&W.changeAlarmStatus(!0)})),v.label=2;case 2:return[2]}})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,i=n.graphData3,r=n.graphData4,m=n.graphData5,c=n.graphData6,d=n.axis1,h=n.grid,p=n.alarmSensedPoints,g=n.selectedAlarmPoint1,f=n.selectedAlarmPoint2,v=n.selectedAlarmPoint3,x=n.selectedAlarmPoint4,V=n.selectedAlarmPoint5,y=n.selectedAlarmPoint6,b=this.props,w=b.device,E=b.showAlarmPoints,L=Object(u.g)(w.firmwareVersion),H=Object(u.g)(w.csbCallibration)?parseInt(Object(u.g)(w.csbCallibration)):0;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var A=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].push(t),l.columns[1].push(Object(o.a)(null===e||void 0===e?void 0:e.temp_celsius,L||"",H)),l.columns[2].push(null===e||void 0===e?void 0:e.relhumidity_pct),s.columns[1].push(null===e||void 0===e?void 0:e.pressure_hPa),i.columns[1].push(null===e||void 0===e?void 0:e.illuminance_lux),r.columns[1].push(null===e||void 0===e?void 0:e.gasResistance_kOhm),m.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.equiCO2_ppm)),m.columns[2].push(parseFloat(null===e||void 0===e?void 0:e.tvoc_ppm)),c.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.motion_sensed)),c.columns[2].push(parseFloat(null===e||void 0===e?void 0:e.num_BTdev)),(t.getTime()-l.columns[0][2].getTime())/6e4>A&&l.columns[0].splice(1,1),d.x.tick.values[2]&&d.x.tick.values[1].getTime()&&d.x.tick.values[2].getTime()-d.x.tick.values[1].getTime()<t.getTime()-d.x.tick.values[d.x.tick.values.length-1]&&(d.x.tick.values.splice(0,1),h.x.lines.splice(0,1),t.setSeconds(0),A>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),d.x.tick.values.push(t),h.x.lines.push({value:t,class:"grid4"}));var N=null===t||void 0===t?void 0:t.toLocaleString();E?this.setState({grid:h,axis1:d,graphData:l,graphData2:s,graphData3:i,graphData4:r,graphData5:m,graphData6:c,lastUpdatedAt:N},function(){var e=p.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=g.sensedValue.length>1?g.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=p.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=f.sensedValue.length>1?f.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=p.filter(function(e){return"illuminance_lux"==e.sensedValue}),i=v.sensedValue.length>1?v.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(i);var o=p.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),r=x.sensedValue.length>1?x.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";a.selectAlarmPoint4(r);var u=p.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),m=V.sensedValue.length>1?V.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";a.selectAlarmPoint5(m);var c=p.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),d=y.sensedValue.length>1?y.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";a.selectAlarmPoint6(d)}):this.setState({grid:h,axis1:d,graphData:l,graphData2:s,graphData3:i,graphData4:r,graphData5:m,graphData6:c,lastUpdatedAt:N})}},t.prototype.render=function(){var e,t,a,l,i,o,r=this,m=this.state,c=m.loading,d=m.graphData,h=m.graphData2,p=m.graphData3,g=m.graphData4,f=m.graphData5,v=m.graphData6,x=m.axis1,V=m.axis2,y=m.axis3,b=m.axis4,w=m.axis5,E=m.axis6,L=m.grid,H=m.lastUpdatedAt,A=m.graphDataAlarmPoint1,N=m.graphDataAlarmPoint2,D=m.graphDataAlarmPoint3,P=m.graphDataAlarmPoint4,S=m.graphDataAlarmPoint5,_=m.graphDataAlarmPoint6,O=m.indicateAlarm1,k=m.indicateAlarm2,j=m.indicateAlarm3,F=m.indicateAlarm4,R=m.indicateAlarm5,C=m.indicateAlarm6,T=m.alarmSensedPoints,q=m.selectedAlarmPoint1,G=m.selectedAlarmPoint2,M=m.selectedAlarmPoint3,I=m.selectedAlarmPoint4,U=m.selectedAlarmPoint5,K=m.selectedAlarmPoint6,B=m.pointEquipment,W=this.props,z=W.instance,Z=W.buildingName,Y=W.graphsList,$=W.device,J=W.showAlarmPoints,Q=W.equipment;return n.createElement(n.Fragment,null,Y.indexOf("Temp & Humidity")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(O&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:q.sensedValue,onChange:function(e){r.selectAlarmPoint1(e.target.value)}},T.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),O&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Temp & Humidity"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(u.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(u.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(u.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(u.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(e=A.columns)||void 0===e?void 0:e.length)>1?A:d,size:{height:300},axis:x,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),Y.indexOf("Pressure")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(k&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:G.sensedValue,onChange:function(e){r.selectAlarmPoint2(e.target.value)}},T.filter(function(e){return"pressure_hPa"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),k&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," "," Pressure"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(u.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(u.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(u.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(u.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(t=N.columns)||void 0===t?void 0:t.length)>1?N:h,size:{height:300},axis:V,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Illuminance")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(j&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:M.sensedValue,onChange:function(e){r.selectAlarmPoint3(e.target.value)}},T.filter(function(e){return"illuminance_lux"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),j&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Illuminance"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(u.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(u.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(u.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(u.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(a=D.columns)||void 0===a?void 0:a.length)>1?D:p,size:{height:300},axis:y,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Gas Resistance")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(F&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:I.sensedValue,onChange:function(e){r.selectAlarmPoint4(e.target.value)}},T.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),F&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Gas Resistance"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(u.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(u.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(u.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(u.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(l=P.columns)||void 0===l?void 0:l.length)>1?P:g,size:{height:300},axis:b,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Air Particles")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(R&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:U.sensedValue,onChange:function(e){r.selectAlarmPoint5(e.target.value)}},T.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),R&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Air Particles"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(u.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(u.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(u.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(u.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(i=S.columns)||void 0===i?void 0:i.length)>1?S:f,size:{height:300},axis:w,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),Y.indexOf("Other Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(C&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:K.sensedValue,onChange:function(e){r.selectAlarmPoint6(e.target.value)}},T.filter(function(e){return"num_BTdev"==e.sensedValue||"motion_sensed"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),C&&n.createElement("a",{href:"#"+z+"/"+Z+"/Alarms/OperationalAlarms/Device/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+z+"/"+Z+"/Insights/Equipment/Graphs/CeilingSensor/"+Object(u.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Other Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(u.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(u.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(u.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(u.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(o=_.columns)||void 0===o?void 0:o.length)>1?_:v,size:{height:300},axis:E,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=x},2967:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(707),o=a(802),r=a(124),u=a(760),m=(a.n(u),a(11)),c=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),d=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},p=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data"},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return c(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e=this;return h(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){var e,t=this;return h(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(m.g)(e)&&Object(r.g)(Object(m.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(){},t.prototype.callLiveUpdate=function(e){var t,a=this.state,n=a.graphData,l=a.axis1,s=a.grid;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var i=this.props.liveGraphRange;if(n.columns.length>1&&t){n.columns[0].splice(1,1),n.columns[0].push(t),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.setpoint),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.roomtemp),n.columns[3].splice(1,1),n.columns[3].push(null===e||void 0===e?void 0:e.fanspeed),n.columns[4].splice(1,1),n.columns[4].push(null===e||void 0===e?void 0:e.horizontalvans),n.columns[5].splice(1,1),n.columns[5].push(null===e||void 0===e?void 0:e.usermode),n.columns[6].splice(1,1),n.columns[6].push(null===e||void 0===e?void 0:e.verticalvans),n.columns[7].splice(1,1),n.columns[7].push(null===e||void 0===e?void 0:e.wifiSignal),(t.getTime()-n.columns[0][2].getTime())/6e4>i&&n.columns[0].splice(1,1),l.x.tick.values[2]&&l.x.tick.values[1].getTime()&&l.x.tick.values[2].getTime()-l.x.tick.values[1].getTime()<t.getTime()-l.x.tick.values[l.x.tick.values.length-1]&&(l.x.tick.values.splice(0,1),s.x.lines.splice(0,1),t.setSeconds(0),i>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),l.x.tick.values.push(t),s.x.lines.push({value:t,class:"grid4"}));var o=null===t||void 0===t?void 0:t.toLocaleString();this.setState({grid:s,axis1:l,graphData:n,lastUpdatedAt:o})}},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,a,n,l,s,u,c,d,p,g,f,v,x,V,y,b,w,E,L,H,A,N;return h(this,function(h){switch(h.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=this.state,u=s.grid,c=s.axis1,d=s.graphData,p=s.lastUpdatedAt,a&&a.moncondevice?(g=Object(m.g)(a.topic),[4,Object(i.e)(g,n,l,d.columns.length>1)]):[3,2];case 1:f=h.sent(),v=["setpoint"],V=["mode"],y=["fanspeed"],b=["horizontalvans"],w=["verticalvans"],E=["wifiSignal"],L=["x"],(x=["roomtemp"]).push(null),v.push(null),y.push(null),b.push(null),V.push(null),w.push(null),E.push(null),L.push(new Date(n)),f.length>0&&f.forEach(function(e){e&&(1!=isNaN(e.roomtemp)&&x.push(e.roomtemp),1!=isNaN(e.setpoint)&&v.push(e.setpoint),e.fanspeed?y.push(e.fanspeed):y.push("undefined"),e.horizontalvans?b.push(e.horizontalvans):b.push("undefined"),e.usermode?V.push(e.usermode):V.push("undefined"),e.verticalvans?w.push(e.verticalvans):w.push("undefined"),e.wifiSignal?E.push(e.wifiSignal):E.push("undefined"),L.push(new Date(e.timestamp)))}),p=f.length>0?null===(e=L[L.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",x.push(null),v.push(null),y.push(null),b.push(null),V.push(null),w.push(null),E.push(null),L.push(new Date(l)),d={x:"x",columns:[L,v,x,y,b,V,w,E]},c.y.label="\xb0F",H=Object(o.a)(5,n,l),A="",H.length>1?(N=((new Date).getTime()-H[0].getTime())/1e3,A=(N/=3600)>24?"%m-%d %H:%M":N<.3?"%H:%M:%S":"%H:%M"):A="%H:%M:%S",u.x.lines=[],H.forEach(function(e){u.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(2)},c.y.tick.values=[0,20,40,60,80,100],c.y.max=100,c.y.min=0,c.x.tick.format=A,c.x.tick.values=H,this.props.loadNextInsight(),Object(r.h)(g,this.callLiveUpdate),this.setState({grid:u,axis1:c,graphData:d,loading:!1,lastUpdatedAt:p}),h.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,a=e.graphData,l=e.axis1,i=e.grid,o=e.lastUpdatedAt,r=this.props,u=r.instance,c=r.buildingName,d=r.device,h=r.equipment;return n.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},n.createElement("br",null),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-8 sentence-break",onClick:function(){window.location.hash=u+"/"+c+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(m.g)(d.moncondevice)}},h.length>0&&h[0].rdfsLabel?h[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Space: ",Object(m.g)(d.spaceRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(m.g)(d.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(m.g)(d.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Equipment: ",null===h||void 0===h?void 0:h.map(function(e,t){return e.rdfsLabel+(t<h.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(m.g)(d.rdfsLabel)||"No device assigned"," ")),n.createElement("span",{className:"lastUpdated"},"Last: ",o)),t?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:a,size:{height:300},axis:l,grid:i,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(n.Component);t.a=p},2968:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(715),o=a(802),r=a(124),u=a(760),m=(a.n(u),a(11)),c=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),d=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},p=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return c(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e=this;return h(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return d(this,void 0,void 0,function(){var e,t=this;return h(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(m.g)(e)&&Object(r.g)(Object(m.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(){},t.prototype.callLiveUpdate=function(e){var t,a=this.state,n=a.graphData,l=a.axis1,s=a.grid;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var i=this.props.liveGraphRange;if(n.columns.length>1&&t){n.columns[0].splice(1,1),n.columns[0].push(t),n.columns[1].splice(1,1),n.columns[1].push(null===e||void 0===e?void 0:e.Normal_Frequency),n.columns[2].splice(1,1),n.columns[2].push(null===e||void 0===e?void 0:e.Emergency_Frequency),(t.getTime()-n.columns[0][2].getTime())/6e4>i&&n.columns[0].splice(1,1),l.x.tick.values[2]&&l.x.tick.values[1].getTime()&&l.x.tick.values[2].getTime()-l.x.tick.values[1].getTime()<t.getTime()-l.x.tick.values[l.x.tick.values.length-1]&&(l.x.tick.values.splice(0,1),s.x.lines.splice(0,1),t.setSeconds(0),i>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),l.x.tick.values.push(t),s.x.lines.push({value:t,class:"grid4"}));var o=null===t||void 0===t?void 0:t.toLocaleString();this.setState({grid:s,axis1:l,graphData:n,lastUpdatedAt:o})}},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(m.g)(a.relatedEquipment))return{value:Object(m.g)(a.relatedEquipment),label:Object(m.g)(a.relatedEquipmentLabel),deviceType:Object(m.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return d(this,void 0,void 0,function(){var t,a,n,l,s,u,c,d,p,g,f,v,x,V,y,b,w,E;return h(this,function(h){switch(h.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=this.state,u=s.grid,c=s.axis1,d=s.graphData,p=s.lastUpdatedAt,a&&a.moncondevice?(g=this.fetchEquipmentFromPoints(),f=Object(m.g)(a.topic),[4,Object(i.j)(f,n,l,d.columns.length>1)]):[3,2];case 1:v=h.sent(),V=["Emergency Freq"],y=["x"],(x=["Normal Freq"]).push(null),V.push(null),y.push(new Date(n)),v.length>0&&v.forEach(function(e){e&&(x.push(e.Normal_Frequency),V.push(e.Emergency_Frequency),y.push(new Date(e.timestamp)))}),p=v.length>0?null===(e=y[y.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",x.push(null),V.push(null),y.push(new Date(l)),d={x:"x",xFormat:"%Y-%m-%dT%H:%M:%S.%LZ",columns:[y,x,V]},c.y.label="Hz",b=Object(o.a)(5,n,l),w="",b.length>1?(E=((new Date).getTime()-b[0].getTime())/1e3,w=(E/=3600)>24?"%m-%d %H:%M":E<.3?"%H:%M:%S":"%H:%M"):w="%H:%M:%S",u.x.lines=[],b.forEach(function(e){u.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(2)},c.y.tick.values=[0,20,40,60,80],c.y.max=80,c.y.min=0,c.x.tick.format=w,c.x.tick.values=b,this.props.loadNextInsight(),Object(r.h)(f,this.callLiveUpdate),this.setState({grid:u,axis1:c,graphData:d,loading:!1,lastUpdatedAt:p,pointEquipment:g}),h.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,a=e.graphData,l=e.axis1,i=e.grid,o=e.lastUpdatedAt,r=e.pointEquipment,u=this.props,c=u.instance,d=u.buildingName,h=u.device,p=u.equipment;return n.createElement(n.Fragment,null,n.createElement("div",{className:"row col-md-12 device-graphs",id:"divGraphs"},n.createElement("br",null),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard"},n.createElement("a",{className:"col-md-5 sentence-break",onClick:function(){window.location.hash=c+"/"+d+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(m.g)(h.moncondevice)}},r&&r.value?r.label:p.length>0&&p[0].rdfsLabel?p[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"},"Space: ",Object(m.g)(h.spaceRdfsLabel)),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",r&&r.value?r.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",r&&r.deviceType?r.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(m.g)(h.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(m.g)(h.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===p||void 0===p?void 0:p.map(function(e,t){return e.rdfsLabel+(t<p.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(m.g)(h.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(m.g)(h.spaceRdfsLabel)," ")),n.createElement("span",{className:"lastUpdated"},"Last: ",o)),t?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:a,size:{height:300},axis:l,grid:i,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})))},t}(n.Component);t.a=p},2969:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(715),o=a(802),r=a(11),u=a(803),m=a(122),c=a(736),d=a(124),h=a(760),p=(a.n(h),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e=this;return f(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){var e,t=this;return f(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(r.g)(e)&&Object(d.g)(Object(r.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){return g(this,void 0,void 0,function(){var t,a,n,l,s,i,o,d,h,p,g,v,x,V,y,b,w=this;return f(this,function(f){switch(f.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,o=t.selectedAlarmPoint5,d=t.selectedAlarmPoint6,h=this.props,p=h.buildingName,g=h.devicePoints,v=h.showAlarmPoints,x=h.device,Object(m.a)(!0),v&&!e?[3,2]:(V=[],g&&g.length&&g.forEach(function(e){V.push({sensedValue:Object(r.g)(e.sensedValue),maximumExtremeValue:Object(r.g)(e.maximumExtremeValue),maximumNormalValue:Object(r.g)(e.maximumNormalValue),minimumExtremeValue:Object(r.g)(e.minimumExtremeValue),minimumNormalValue:Object(r.g)(e.minimumNormalValue)})}),[4,Object(u.e)(c.a.OperationalAlarm,p,!1,0,50,null,null,[Object(r.g)(x.moncondevice)],null)]);case 1:return y=f.sent(),b=new Date(a.columns[0][1]),y=y.filter(function(e){return new Date(e.timeofalarm)>b}),this.setState({alarmSensedPoints:V,deviceAlarms:y},function(){if((null===V||void 0===V?void 0:V.length)>0&&a.columns.length>1){var e=V.filter(function(e){return"GenVAB_Volts"==e.sensedValue||"GenVBC_Volts"==e.sensedValue||"GenVCA_Volts"==e.sensedValue||"GenVAN_Volts"==e.sensedValue||"GenVBN_Volts"==e.sensedValue||"GenVCN_Volts"==e.sensedValue||" BusVoltage_Volts"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";w.selectAlarmPoint1(t);var r=V.filter(function(e){return"GenIA_Amps"==e.sensedValue||"GenIB_Amps"==e.sensedValue||"GenIC_Amps"==e.sensedValue}),u=l.sensedValue.length>1?l.sensedValue:(null===r||void 0===r?void 0:r.length)>0?r[r.length-1].sensedValue:"";w.selectAlarmPoint2(u);var m=V.filter(function(e){return"GenKVA_A_KiloVA"==e.sensedValue||"GenKVA__B_KiloVA"==e.sensedValue||"GenKVA_C_KiloVA"==e.sensedValue||"GenKVA_Total_KiloVA"==e.sensedValue||"Gen_A_kW"==e.sensedValue||"Gen_B_kW"==e.sensedValue||"Gen_C_kW"==e.sensedValue||"Gen_Total_kW"==e.sensedValue}),c=s.sensedValue.length>1?s.sensedValue:(null===m||void 0===m?void 0:m.length)>0?m[m.length-1].sensedValue:"";w.selectAlarmPoint3(c);var h=V.filter(function(e){return"GenPFLagging"==e.sensedValue}),p=i.sensedValue.length>1?i.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";w.selectAlarmPoint4(p);var g=V.filter(function(e){return"ActiveSpeedSource"==e.sensedValue||"EngineSpeed_rpm"==e.sensedValue||"EngineLoad_pct"==e.sensedValue||"CoolantTemp_F"==e.sensedValue||"OilPressure_psi"==e.sensedValue||"BatteryVoltage_DeciVolt"==e.sensedValue||"FuelLevel"==e.sensedValue||"ECUCoolantLevel"==e.sensedValue||"CoolDownTimeRemaining_mins"==e.sensedValue}),f=o.sensedValue.length>1?o.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";w.selectAlarmPoint5(f);var v=V.filter(function(e){return"UnexpectedShutdown"==e.sensedValue||"GlobalAlarm"==e.sensedValue||"AutoRestartFailure"==e.sensedValue||"FuelLeakDetect"==e.sensedValue||"BatteryChargerFailure"==e.sensedValue||"TransferFail"==e.sensedValue||"LowCoolantLevel"==e.sensedValue||"ECUShutdown"==e.sensedValue||"EmergencyShutdown"==e.sensedValue||"Overcrank"==e.sensedValue||"LossofECUComms"==e.sensedValue||"GlobalSenderFail"==e.sensedValue||"LowFuelLevel"==e.sensedValue||"LowOilPressure"==e.sensedValue||"HighCoolantTemp"==e.sensedValue}),x=d.sensedValue.length>1?d.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";w.selectAlarmPoint6(x)}}),[3,3];case 2:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),f.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenVAB_Volts"==e.sensedValueKey||"GenVBC_Volts"==e.sensedValueKey||"GenVCA_Volts"==e.sensedValueKey||"GenVAN_Volts"==e.sensedValueKey||"GenVBN_Volts"==e.sensedValueKey||"GenVCN_Volts"==e.sensedValueKey||" BusVoltage_Volts"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenVAB_Volts"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VAB:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVBC_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VBC:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVCA_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VCA:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVAN_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VA:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVBN_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VB:"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenVCN_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",VC:"#e3e3e3",High:"grey","High-High":"red"}}}else if("BusVoltage_Volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Bus Voltage":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenIA_Amps"==e.sensedValueKey||"GenIB_Amps"==e.sensedValueKey||"GenIC_Amps"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenIA_Amps"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IA":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenIB_Amps"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IB":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenIC_Amps"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen IC":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenKVA_A_KiloVA"==e.sensedValueKey||"GenKVA__B_KiloVA"==e.sensedValueKey||"GenKVA_C_KiloVA"==e.sensedValueKey||"GenKVA_Total_KiloVA"==e.sensedValueKey||"Gen_A_kW"==e.sensedValueKey||"Gen_B_kW"==e.sensedValueKey||"Gen_C_kW"==e.sensedValueKey||"Gen_Total_kW"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenKVA_A_KiloVA"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA__B_KiloVA"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA_C_KiloVA"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GenKVA_Total_KiloVA"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kVA Tota":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_A_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_B_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_C_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Gen_Total_kW"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen kW Total":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"GenPFLagging"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("GenPFLagging"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Gen Power Factor":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"ActiveSpeedSource"==e.sensedValueKey||"EngineSpeed_rpm"==e.sensedValueKey||"EngineLoad_pct"==e.sensedValueKey||"CoolantTemp_F"==e.sensedValueKey||"OilPressure_psi"==e.sensedValueKey||"BatteryVoltage_DeciVolt"==e.sensedValueKey||"FuelLevel"==e.sensedValueKey||"ECUCoolantLevel"==e.sensedValueKey||"CoolDownTimeRemaining_mins"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("ActiveSpeedSource"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Act speed":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EngineSpeed_rpm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Engine Speed":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EngineLoad_pct"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Engine Load":"#e3e3e3",High:"grey","High-High":"red"}}}else if("CoolantTemp_F"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Coolant Temp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("OilPressure_psi"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Oil Press":"#e3e3e3",High:"grey","High-High":"red"}}}else if("BatteryVoltage_DeciVolt"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Battery Volt":"#e3e3e3",High:"grey","High-High":"red"}}}else if("FuelLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Fuel Level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("ECUCoolantLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","ECU Coolant level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("CoolDownTimeRemaining_mins"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[9].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[9],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Cool Down Time Rem.":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:i,graphDataAlarmPoint5:e,indicateAlarm5:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:o,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"UnexpectedShutdown"==e.sensedValueKey||"GlobalAlarm"==e.sensedValueKey||"AutoRestartFailure"==e.sensedValueKey||"FuelLeakDetect"==e.sensedValueKey||"BatteryChargerFailure"==e.sensedValueKey||"TransferFail"==e.sensedValueKey||"LowCoolantLevel"==e.sensedValueKey||"ECUShutdown"==e.sensedValueKey||"EmergencyShutdown"==e.sensedValueKey||"Overcrank"==e.sensedValueKey||"LossofECUComms"==e.sensedValueKey||"GlobalSenderFail"==e.sensedValueKey||"LowFuelLevel"==e.sensedValueKey||"LowOilPressure"==e.sensedValueKey||"HighCoolantTemp"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("UnexpectedShutdown"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Unexp. Shutdown":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GlobalAlarm"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Global Alarm":"#e3e3e3",High:"grey","High-High":"red"}}}else if("AutoRestartFailure"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Auto Restart Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("FuelLeakDetect"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Fuel Leak Det.":"#e3e3e3",High:"grey","High-High":"red"}}}else if("BatteryChargerFailure"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Battery Chg. Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("TransferFail"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Transfer Fai":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowCoolantLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Coolant level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("ECUShutdown"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","ECU Shutdown":"#e3e3e3",High:"grey","High-High":"red"}}}else if("EmergencyShutdown"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[9].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[9],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Emerg. Shut":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Overcrank"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[10].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[10],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Overcrank:"#e3e3e3",High:"grey","High-High":"red"}}}else if("LossofECUComms"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[11].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[11],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Loss of ECU Comms":"#e3e3e3",High:"grey","High-High":"red"}}}else if("GlobalSenderFail"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[12].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[12],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Global Sender Fail":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowFuelLevel"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[13].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[13],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Fuel Level":"#e3e3e3",High:"grey","High-High":"red"}}}else if("LowOilPressure"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[14].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[14],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Low Oil Press":"#e3e3e3",High:"grey","High-High":"red"}}}else if("HighCoolantTemp"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[15].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[15],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","High Coolant":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:i,graphDataAlarmPoint6:e,indicateAlarm6:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:o,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,i=n.graphData3,o=n.graphData4,r=n.graphData5,u=n.graphData6,m=n.axis1,c=n.grid,d=n.alarmSensedPoints,h=n.selectedAlarmPoint1,p=n.selectedAlarmPoint2,g=n.selectedAlarmPoint3,f=n.selectedAlarmPoint4,v=n.selectedAlarmPoint5,x=n.selectedAlarmPoint6,V=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var y=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.GenVAB_Volts),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.GenVBC_Volts),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.GenVCA_Volts),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.GenVAN_Volts),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.GenVBN_Volts),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.GenVCN_Volts),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.BusVoltage_Volts),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.GenIA_Amps),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.GenIB_Amps),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.GenIC_Amps),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.GenKVA_A_KiloVA),i.columns[2].splice(1,1),i.columns[2].push(null===e||void 0===e?void 0:e.GenKVA__B_KiloVA),i.columns[3].splice(1,1),i.columns[3].push(null===e||void 0===e?void 0:e.GenKVA_C_KiloVA),i.columns[4].splice(1,1),i.columns[4].push(null===e||void 0===e?void 0:e.GenKVA_Total_KiloVA),i.columns[5].splice(1,1),i.columns[5].push(null===e||void 0===e?void 0:e.Gen_A_kW),i.columns[6].splice(1,1),i.columns[6].push(null===e||void 0===e?void 0:e.Gen_B_kW),i.columns[7].splice(1,1),i.columns[7].push(null===e||void 0===e?void 0:e.Gen_C_kW),i.columns[8].splice(1,1),i.columns[8].push(null===e||void 0===e?void 0:e.Gen_Total_kW),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.GenPFLagging),r.columns[1].splice(1,1),r.columns[1].push(null===e||void 0===e?void 0:e.ActiveSpeedSource),r.columns[2].splice(1,1),r.columns[2].push(null===e||void 0===e?void 0:e.EngineSpeed_rpm),r.columns[3].splice(1,1),r.columns[3].push(null===e||void 0===e?void 0:e.EngineLoad_pct),r.columns[4].splice(1,1),r.columns[4].push(null===e||void 0===e?void 0:e.CoolantTemp_F),r.columns[5].splice(1,1),r.columns[5].push(null===e||void 0===e?void 0:e.OilPressure_psi),r.columns[6].splice(1,1),r.columns[6].push(null===e||void 0===e?void 0:e.BatteryVoltage_DeciVolt),r.columns[7].splice(1,1),r.columns[7].push(null===e||void 0===e?void 0:e.FuelLevel),r.columns[8].splice(1,1),r.columns[8].push(null===e||void 0===e?void 0:e.ECUCoolantLevel),r.columns[9].splice(1,1),r.columns[9].push(null===e||void 0===e?void 0:e.CoolDownTimeRemaining_mins),u.columns[1].splice(1,1),u.columns[1].push(null===e||void 0===e?void 0:e.UnexpectedShutdown),u.columns[2].splice(1,1),u.columns[2].push(null===e||void 0===e?void 0:e.GlobalAlarm),u.columns[3].splice(1,1),u.columns[3].push(null===e||void 0===e?void 0:e.AutoRestartFailure),u.columns[4].splice(1,1),u.columns[4].push(null===e||void 0===e?void 0:e.FuelLeakDetect),u.columns[5].splice(1,1),u.columns[5].push(null===e||void 0===e?void 0:e.BatteryChargerFailure),u.columns[6].splice(1,1),u.columns[6].push(null===e||void 0===e?void 0:e.TransferFail),u.columns[7].splice(1,1),u.columns[7].push(null===e||void 0===e?void 0:e.LowCoolantLevel),u.columns[8].splice(1,1),u.columns[8].push(null===e||void 0===e?void 0:e.ECUShutdown),u.columns[9].splice(1,1),u.columns[9].push(null===e||void 0===e?void 0:e.EmergencyShutdown),u.columns[10].splice(1,1),u.columns[10].push(null===e||void 0===e?void 0:e.Overcrank),u.columns[11].splice(1,1),u.columns[11].push(null===e||void 0===e?void 0:e.LossofECUComms),u.columns[12].splice(1,1),u.columns[12].push(null===e||void 0===e?void 0:e.GlobalSenderFail),u.columns[13].splice(1,1),u.columns[13].push(null===e||void 0===e?void 0:e.LowFuelLevel),u.columns[14].splice(1,1),u.columns[14].push(null===e||void 0===e?void 0:e.LowOilPressure),u.columns[15].splice(1,1),u.columns[15].push(null===e||void 0===e?void 0:e.HighCoolantTemp),(t.getTime()-l.columns[0][2].getTime())/6e4>y&&l.columns[0].splice(1,1),m.x.tick.values[2]&&m.x.tick.values[1].getTime()&&m.x.tick.values[2].getTime()-m.x.tick.values[1].getTime()<t.getTime()-m.x.tick.values[m.x.tick.values.length-1]&&(m.x.tick.values.splice(0,1),c.x.lines.splice(0,1),t.setSeconds(0),y>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),m.x.tick.values.push(t),c.x.lines.push({value:t,class:"grid4"}));var b=null===t||void 0===t?void 0:t.toLocaleString();V?this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:i,graphData4:o,graphData5:r,graphData6:u,lastUpdatedAt:b},function(){var e=d.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=h.sensedValue.length>1?h.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=d.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=p.sensedValue.length>1?p.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=d.filter(function(e){return"illuminance_lux"==e.sensedValue}),i=g.sensedValue.length>1?g.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(i);var o=d.filter(function(e){return"gasResistance_kOhm"==e.sensedValue}),r=f.sensedValue.length>1?f.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";a.selectAlarmPoint4(r);var u=d.filter(function(e){return"equiCO2_ppm"==e.sensedValue||"tvoc_ppm"==e.sensedValue}),m=v.sensedValue.length>1?v.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";a.selectAlarmPoint5(m);var c=d.filter(function(e){return"motion_sensed"==e.sensedValue||"num_BTdev"==e.sensedValue}),V=x.sensedValue.length>1?x.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";a.selectAlarmPoint6(V)}):this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:i,graphData4:o,graphData5:r,graphData6:u,lastUpdatedAt:b})}},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(r.g)(a.relatedEquipment))return{value:Object(r.g)(a.relatedEquipment),label:Object(r.g)(a.relatedEquipmentLabel),deviceType:Object(r.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return g(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,h,p,g,v,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R,C,T,q,G,M,I,U,K,B,W,z,Z,Y,$,J,Q,X,ee,te,ae,ne,le,se,ie,oe,re,ue,me,ce,de,he,pe,ge,fe,ve,xe,Ve,ye,be,we=this;return f(this,function(f){switch(f.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=t.showAlarmPoints,u=this.state,m=u.grid,c=u.axis1,h=u.axis2,p=u.axis3,g=u.axis4,v=u.axis5,x=u.axis6,V=u.graphData,y=u.graphData2,b=u.graphData3,w=u.graphData4,E=u.graphData5,L=u.graphData6,H=u.lastUpdatedAt,a&&a.moncondevice?(A=this.fetchEquipmentFromPoints(),N=Object(r.g)(a.topic),[4,Object(i.m)(N,n,l,V.columns.length>1)]):[3,2];case 1:D=f.sent(),S=["VBC"],_=["VCA"],O=["VA"],k=["VB"],j=["VC"],F=["Bus Voltage"],R=["Gen IA"],C=["Gen IB"],T=["Gen IC"],q=["Gen kVA A"],G=["Gen kVA B"],M=["Gen kVA C"],I=["Gen kVA Total"],U=["Gen kW A"],K=["Gen kW B"],B=["Gen kW C"],W=["Gen kW Total"],z=["Gen Power Factor"],Z=["Act speed"],Y=["Engine Speed"],$=["Engine Load"],J=["Coolant Temp"],Q=["Oil Press"],X=["Battery Volt"],ee=["Fuel Level"],te=["ECU Coolant level"],ae=["Cool Down Time Rem."],ne=["Unexp. Shutdown"],le=["Global Alarm"],se=["Auto Restart Fail"],ie=["Fuel Leak Det."],oe=["Battery Chg. Fail"],re=["Transfer Fail"],ue=["Low Coolant level"],me=["ECU Shutdown"],ce=["Emerg. Shut"],de=["Overcrank"],he=["Loss of ECU Comms"],pe=["Global Sender Fail"],ge=["Low Fuel Level"],fe=["Low Oil Press"],ve=["High Coolant"],xe=["x"],(P=["VAB"]).push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(null),G.push(null),M.push(null),I.push(null),U.push(null),K.push(null),B.push(null),W.push(null),z.push(null),Z.push(null),Y.push(null),$.push(null),J.push(null),Q.push(null),X.push(null),ee.push(null),te.push(null),ae.push(null),ne.push(null),le.push(null),se.push(null),ie.push(null),oe.push(null),re.push(null),ue.push(null),me.push(null),ce.push(null),de.push(null),he.push(null),pe.push(null),ge.push(null),fe.push(null),ve.push(null),xe.push(new Date(n)),D.length>0&&D.forEach(function(e){e&&(P.push(e.GenVAB_Volts),S.push(e.GenVBC_Volts),_.push(e.GenVCA_Volts),O.push(e.GenVAN_Volts),k.push(e.GenVBN_Volts),j.push(e.GenVCN_Volts),F.push(e.BusVoltage_Volts),R.push(e.GenIA_Amps),C.push(e.GenIB_Amps),T.push(e.GenIC_Amps),q.push(e.GenKVA_A_KiloVA),G.push(e.GenKVA__B_KiloVA),M.push(e.GenKVA_C_KiloVA),I.push(e.GenKVA_Total_KiloVA),U.push(e.Gen_A_kW),K.push(e.Gen_B_kW),B.push(e.Gen_C_kW),W.push(e.Gen_Total_kW),z.push(e.GenPFLagging),Z.push(e.ActiveSpeedSource),Y.push(e.EngineSpeed_rpm),$.push(e.EngineLoad_pct),J.push(e.CoolantTemp_F),Q.push(e.OilPressure_psi),X.push(e.BatteryVoltage_DeciVolt),ee.push(e.FuelLevel),te.push(e.ECUCoolantLevel),ae.push(e.CoolDownTimeRemaining_mins),ne.push(e.UnexpectedShutdown),le.push(e.GlobalAlarm),se.push(e.AutoRestartFailure),ie.push(e.FuelLeakDetect),oe.push(e.BatteryChargerFailure),re.push(e.TransferFail),ue.push(e.LowCoolantLevel),me.push(e.ECUShutdown),ce.push(e.EmergencyShutdown),de.push(e.Overcrank),he.push(e.LossofECUComms),pe.push(e.GlobalSenderFail),ge.push(e.LowFuelLevel),fe.push(e.LowOilPressure),ve.push(e.HighCoolantTemp),xe.push(new Date(e.timestamp)))}),H=D.length>0?null===(e=xe[xe.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(null),G.push(null),M.push(null),I.push(null),U.push(null),K.push(null),B.push(null),W.push(null),z.push(null),Z.push(null),Y.push(null),$.push(null),J.push(null),Q.push(null),X.push(null),ee.push(null),te.push(null),ae.push(null),ne.push(null),le.push(null),se.push(null),ie.push(null),oe.push(null),re.push(null),ue.push(null),me.push(null),ce.push(null),de.push(null),he.push(null),pe.push(null),ge.push(null),fe.push(null),ve.push(null),xe.push(new Date(l)),V={x:"x",columns:[xe,P,S,_,O,k,j,F]},y={x:"x",columns:[xe,R,C,T]},b={x:"x",columns:[xe,q,G,M,I,U,K,B,W]},w={x:"x",columns:[xe,z]},E={x:"x",columns:[xe,Z,Y,$,J,Q,X,ee,te,ae]},L={x:"x",columns:[xe,ne,le,se,ie,oe,re,ue,me,ce,de,he,pe,ge,fe,ve]},c.y.label="Volts",h.y.label="Amps",p.y.label="Watts",g.y.label="",v.y.label="",x.y.label="",xe.length>1&&(Ve=Object(o.a)(5,n,l),ye="",Ve.length>1?(be=((new Date).getTime()-Ve[0].getTime())/1e3,ye=(be/=3600)>24?"%m-%d %H:%M":be<.3?"%H:%M:%S":"%H:%M"):ye="%H:%M:%S",m.x.lines=[],Ve.forEach(function(e){m.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(0)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},g.y.tick.format=function(e){return parseFloat(e).toFixed(0)},v.y.tick.format=function(e){return parseFloat(e).toFixed(0)},x.y.tick.format=function(e){return parseFloat(e).toFixed(0)},c.y.tick.values=[0,50,100,150,200,250],h.y.tick.values=[0,10,20,30,40,50],p.y.tick.values=[0,20,40,60,80,100],g.y.tick.values=[-1,0,1],v.y.tick.values=[0,40,80,120,160,160],x.y.tick.values=[-1,0,1],c.y.max=250,c.y.min=0,h.y.max=50,h.y.min=0,p.y.max=100,p.y.min=0,g.y.max=1,g.y.min=-1,v.y.max=160,v.y.min=0,x.y.max=1,x.y.min=-1,c.x.tick.format=ye,h.x.tick.format=ye,p.x.tick.format=ye,g.x.tick.format=ye,v.x.tick.format=ye,x.x.tick.format=ye,c.x.tick.values=Ve,h.x.tick.values=Ve,p.x.tick.values=Ve,g.x.tick.values=Ve,v.x.tick.values=Ve,x.x.tick.values=Ve,this.props.loadNextInsight(),Object(d.h)(N,this.callLiveUpdate),this.setState({grid:m,axis1:c,axis2:h,axis3:p,axis4:g,axis5:v,axis6:x,graphData:V,graphData2:y,graphData3:b,graphData4:w,graphData5:E,graphData6:L,lastUpdatedAt:H,loading:!1,pointEquipment:A},function(){s&&we.changeAlarmStatus(!0)})),f.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,a=t.loading,l=t.graphData,i=t.graphData2,o=t.graphData3,u=t.graphData4,m=t.graphData5,c=t.graphData6,d=t.axis1,h=t.axis2,p=t.axis3,g=t.axis4,f=t.axis5,v=t.axis6,x=t.grid,V=t.lastUpdatedAt,y=t.indicateAlarm1,b=t.indicateAlarm2,w=t.indicateAlarm3,E=t.indicateAlarm4,L=t.indicateAlarm5,H=t.indicateAlarm6,A=t.alarmSensedPoints,N=t.selectedAlarmPoint1,D=t.selectedAlarmPoint2,P=t.selectedAlarmPoint3,S=t.selectedAlarmPoint4,_=t.selectedAlarmPoint5,O=t.selectedAlarmPoint6,k=t.pointEquipment,j=this.props,F=j.graphsList,R=j.instance,C=j.buildingName,T=j.device,q=j.showAlarmPoints,G=j.equipment;return n.createElement(n.Fragment,null,F.indexOf("Voltages")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(y&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:N.sensedValue,onChange:function(t){e.selectAlarmPoint1(t.target.value)}},A.filter(function(e){return"GenVAB_Volts"==e.sensedValue||"GenVBC_Volts"==e.sensedValue||"GenVCA_Volts"==e.sensedValue||"GenVAN_Volts"==e.sensedValue||"GenVBN_Volts"==e.sensedValue||"GenVCN_Volts"==e.sensedValue||"BusVoltage_Volts"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),y&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/Generator/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Voltages"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:l,size:{height:300},axis:d,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),F.indexOf("Currents")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(b&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:D.sensedValue,onChange:function(t){e.selectAlarmPoint2(t.target.value)}},A.filter(function(e){return"GenIA_Amps"==e.sensedValue||"GenIB_Amps"==e.sensedValue||"GenIC_Amps"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),b&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/Generator/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Currents"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:i,size:{height:300},axis:h,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),F.indexOf("Powers")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(w&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(t){e.selectAlarmPoint3(t.target.value)}},A.filter(function(e){return"GenKVA_A_KiloVA"==e.sensedValue||"GenKVA__B_KiloVA"==e.sensedValue||"GenKVA_C_KiloVA"==e.sensedValue||"GenKVA_Total_KiloVA"==e.sensedValue||"Gen_A_kW"==e.sensedValue||"Gen_B_kW"==e.sensedValue||"Gen_C_kW"==e.sensedValue||"Gen_Total_kW"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),w&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/Generator/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Powers"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:o,size:{height:300},axis:p,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),F.indexOf("Power Factor")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(E&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:S.sensedValue,onChange:function(t){e.selectAlarmPoint4(t.target.value)}},A.filter(function(e){return"GenPFLagging"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),E&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/Generator/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Power Factor"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:u,size:{height:300},axis:g,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),F.indexOf("Other Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(L&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:_.sensedValue,onChange:function(t){e.selectAlarmPoint5(t.target.value)}},A.filter(function(e){return"ActiveSpeedSource"==e.sensedValue||"EngineSpeed_rpm"==e.sensedValue||"EngineLoad_pct"==e.sensedValue||"CoolantTemp_F"==e.sensedValue||"OilPressure_psi"==e.sensedValue||"BatteryVoltage_DeciVolt"==e.sensedValue||"FuelLevel"==e.sensedValue||"ECUCoolantLevel"==e.sensedValue||"CoolDownTimeRemaining_mins"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),L&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/Generator/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Other Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:m,size:{height:300},axis:f,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),F.indexOf("Binary Parameters")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&q?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),q&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:O.sensedValue,onChange:function(t){e.selectAlarmPoint6(t.target.value)}},A.filter(function(e){return"UnexpectedShutdown"==e.sensedValue||"GlobalAlarm"==e.sensedValue||"AutoRestartFailure"==e.sensedValue||"FuelLeakDetect"==e.sensedValue||"BatteryChargerFailure"==e.sensedValue||"TransferFail"==e.sensedValue||"LowCoolantLevel"==e.sensedValue||"ECUShutdown"==e.sensedValue||"EmergencyShutdown"==e.sensedValue||"Overcrank"==e.sensedValue||"LossofECUComms"==e.sensedValue||"GlobalSenderFail"==e.sensedValue||"LowFuelLevel"==e.sensedValue||"LowOilPressure"==e.sensedValue||"HighCoolantTemp"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+R+"/"+C+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+R+"/"+C+"/Insights/Equipment/Graphs/Generator/"+Object(r.g)(T.moncondevice),target:"_blank",rel:"noreferrer noopener"},k&&k.value?k.label:G.length>0&&G[0].rdfsLabel?G[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Binary Parameters"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",k&&k.value?k.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",k&&k.deviceType?k.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(T.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(T.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===G||void 0===G?void 0:G.map(function(e,t){return e.rdfsLabel+(t<G.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(T.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(T.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),a?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:c,size:{height:300},axis:v,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=v},2970:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(715),o=a(802),r=a(11),u=a(803),m=a(122),c=a(736),d=a(124),h=a(760),p=(a.n(h),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e=this;return f(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){var e,t=this;return f(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(r.g)(e)&&Object(d.g)(Object(r.g)(e)),[2]})})},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(r.g)(a.relatedEquipment))return{value:Object(r.g)(a.relatedEquipment),label:Object(r.g)(a.relatedEquipmentLabel),deviceType:Object(r.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype.changeAlarmStatus=function(e){return g(this,void 0,void 0,function(){var t,a,n,l,s,i,o,d,h,p,g,v,x=this;return f(this,function(f){switch(f.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=this.props,i=s.buildingName,o=s.devicePoints,d=s.showAlarmPoints,h=s.device,Object(m.a)(!0),d&&!e?[3,2]:(p=[],o&&o.length&&o.forEach(function(e){p.push({sensedValue:Object(r.g)(e.sensedValue),maximumExtremeValue:Object(r.g)(e.maximumExtremeValue),maximumNormalValue:Object(r.g)(e.maximumNormalValue),minimumExtremeValue:Object(r.g)(e.minimumExtremeValue),minimumNormalValue:Object(r.g)(e.minimumNormalValue)})}),[4,Object(u.e)(c.a.OperationalAlarm,i,!1,0,50,null,null,[Object(r.g)(h.moncondevice)],null)]);case 1:return g=f.sent(),v=new Date(a.columns[0][1]),g=g.filter(function(e){return new Date(e.timeofalarm)>v}),this.setState({alarmSensedPoints:p,deviceAlarms:g},function(){if((null===p||void 0===p?void 0:p.length)>0&&a.columns.length>1){var e=p.filter(function(e){return"register1"==e.sensedValue||"t3frontRefrigerator1"==e.sensedValue||"t4backRefrigerator1"==e.sensedValue||"t5evapfanRefrigerator1"==e.sensedValue||"t6comprinRefrigerator1"==e.sensedValue||"t7comproutRefrigerator1"==e.sensedValue||"t8probeRefrigerator1"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";x.selectAlarmPoint1(t);var s=p.filter(function(e){return"register1"==e.sensedValue||"t3frontRefrigerator2"==e.sensedValue||"t4backRefrigerator2"==e.sensedValue||"t5evapfanRefrigerator2"==e.sensedValue||"t6comprinRefrigerator2"==e.sensedValue||"t7comproutRefrigerator2"==e.sensedValue||"t8probeRefrigerator2"==e.sensedValue}),i=l.sensedValue.length>1?l.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";x.selectAlarmPoint2(i)}}),[3,3];case 2:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),f.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"register1"==e.sensedValueKey||"t3frontRefrigerator1"==e.sensedValueKey||"t4backRefrigerator1"==e.sensedValueKey||"t5evapfanRefrigerator1"==e.sensedValueKey||"t6comprinRefrigerator1"==e.sensedValueKey||"t7comproutRefrigerator1"==e.sensedValueKey||"t8probeRefrigerator1"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("register1"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Register:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t3frontRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Front:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t4backRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Back:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t5evapfanRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Evaporator Fan":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t6comprinRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor In":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t7comproutRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor Out":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t8probeRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Solid:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"register1"==e.sensedValueKey||"t3frontRefrigerator2"==e.sensedValueKey||"t4backRefrigerator2"==e.sensedValueKey||"t5evapfanRefrigerator2"==e.sensedValueKey||"t6comprinRefrigerator2"==e.sensedValueKey||"t7comproutRefrigerator2"==e.sensedValueKey||"t8probeRefrigerator2"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("register1"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Register:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t3frontRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Front:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t4backRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Back:"#e3e3e3",High:"grey","High-High":"red"}}}else if("t5evapfanRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Evaporator Fan":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t6comprinRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Compressor In":"#e3e3e3",High:"grey","High-High":"red"}}}else if("Compressor Out"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else if("t8probeRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[8].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[8],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Solid:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,i=n.axis1,o=n.grid,r=n.alarmSensedPoints,u=n.selectedAlarmPoint1,m=n.selectedAlarmPoint2,c=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var d=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.register1),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.t3frontRefrigerator1),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.t4backRefrigerator1),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.t5evapfanRefrigerator1),l.columns[5].splice(1,1),l.columns[5].push(null===e||void 0===e?void 0:e.t6comprinRefrigerator1),l.columns[6].splice(1,1),l.columns[6].push(null===e||void 0===e?void 0:e.t7comproutRefrigerator1),l.columns[7].splice(1,1),l.columns[7].push(null===e||void 0===e?void 0:e.t8probeRefrigerator1),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.register1),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.t3frontRefrigerator2),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.t4backRefrigerator2),s.columns[4].splice(1,1),s.columns[4].push(null===e||void 0===e?void 0:e.t5evapfanRefrigerator2),s.columns[5].splice(1,1),s.columns[5].push(null===e||void 0===e?void 0:e.t6comprinRefrigerator2),s.columns[6].splice(1,1),s.columns[6].push(null===e||void 0===e?void 0:e.t7comproutRefrigerator2),s.columns[7].splice(1,1),s.columns[7].push(null===e||void 0===e?void 0:e.t8probeRefrigerator2),(t.getTime()-l.columns[0][2].getTime())/6e4>d&&l.columns[0].splice(1,1),i.x.tick.values[2]&&i.x.tick.values[1].getTime()&&i.x.tick.values[2].getTime()-i.x.tick.values[1].getTime()<t.getTime()-i.x.tick.values[i.x.tick.values.length-1]&&(i.x.tick.values.splice(0,1),o.x.lines.splice(0,1),t.setSeconds(0),d>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),i.x.tick.values.push(t),o.x.lines.push({value:t,class:"grid4"}));var h=null===t||void 0===t?void 0:t.toLocaleString();c?this.setState({grid:o,axis1:i,graphData:l,graphData2:s,lastUpdatedAt:h},function(){var e=r.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=u.sensedValue.length>1?u.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=r.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=m.sensedValue.length>1?m.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l)}):this.setState({grid:o,axis1:i,graphData:l,graphData2:s,lastUpdatedAt:h})}},t.prototype._fetchData=function(){var e;return g(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,h,p,g,v,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R,C,T=this;return f(this,function(f){switch(f.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=t.showAlarmPoints,u=this.state,m=u.grid,c=u.axis1,h=u.axis2,p=u.graphData,g=u.graphData2,v=u.lastUpdatedAt,a&&a.moncondevice?(x=this.fetchEquipmentFromPoints(),V=Object(r.g)(a.topic),[4,Object(i.k)(V,n,l,p.columns.length>1)]):[3,2];case 1:y=f.sent(),w=["Front"],E=["Back"],L=["Evaporator Fan"],H=["Compressor In"],A=["Compressor Out"],N=["Solid"],D=["Front"],P=["Back"],S=["Evaporator Fan"],_=["Compressor In"],O=["Compressor Out"],k=["Solid"],j=["x"],(b=["Register"]).push(null),w.push(null),E.push(null),L.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(new Date(n)),y.length>0&&y.forEach(function(e){e&&(b.push(""+e.register1),w.push(""+e.t3frontRefrigerator1),E.push(""+e.t4backRefrigerator1),L.push(""+e.t5evapfanRefrigerator1),H.push(""+e.t6comprinRefrigerator1),A.push(""+e.t7comproutRefrigerator1),N.push(""+e.t8probeRefrigerator1),D.push(""+e.t3frontRefrigerator2),P.push(""+e.t4backRefrigerator2),S.push(""+e.t5evapfanRefrigerator2),_.push(""+e.t6comprinRefrigerator2),O.push(""+e.t7comproutRefrigerator2),k.push(""+e.t8probeRefrigerator2),j.push(new Date(e.timestamp)))}),v=y.length>0?null===(e=j[j.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",b.push(null),w.push(null),E.push(null),L.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(new Date(l)),p={x:"x",columns:[j,b,w,E,L,H,A,N]},g={x:"x",columns:[j,b,D,P,S,_,O,k]},c.y.label="\xb0F",h.y.label="\xb0F",j.length>1&&(F=Object(o.a)(5,n,l),R="",F.length>1?(C=((new Date).getTime()-F[0].getTime())/1e3,R=(C/=3600)>24?"%m-%d %H:%M":C<.3?"%H:%M:%S":"%H:%M"):R="%H:%M:%S",m.x.lines=[],F.forEach(function(e){m.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},c.y.tick.values=[0,20,40,60,80,100],h.y.tick.values=[0,20,40,60,80,100],c.y.max=100,c.y.min=0,h.y.max=100,h.y.min=0,c.x.tick.format=R,h.x.tick.format=R,c.x.tick.values=F,h.x.tick.values=F,this.props.loadNextInsight(),Object(d.h)(V,this.callLiveUpdate),this.setState({grid:m,axis1:c,axis2:h,graphData:p,graphData2:g,lastUpdatedAt:v,loading:!1,pointEquipment:x},function(){s&&T.changeAlarmStatus(!0)})),f.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e,t,a=this,l=this.state,i=l.loading,o=l.graphData,u=l.graphData2,m=l.axis1,c=l.axis2,d=l.grid,h=l.lastUpdatedAt,p=l.graphDataAlarmPoint1,g=l.graphDataAlarmPoint2,f=l.indicateAlarm1,v=l.indicateAlarm2,x=l.alarmSensedPoints,V=l.selectedAlarmPoint1,y=l.selectedAlarmPoint2,b=l.pointEquipment,w=this.props,E=w.graphsList,L=w.instance,H=w.buildingName,A=w.device,N=w.showAlarmPoints,D=w.equipment;return n.createElement(n.Fragment,null,E.indexOf("Refrigerator 1")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(f&&N?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),N&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",x&&x.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:V.sensedValue,onChange:function(e){a.selectAlarmPoint1(e.target.value)}},x.filter(function(e){return"t3frontRefrigerator1"==e.sensedValue||"t4backRefrigerator1"==e.sensedValue||"t5evapfanRefrigerator1"==e.sensedValue||"t6comprinRefrigerator1"==e.sensedValue||"t7comproutRefrigerator1"==e.sensedValue||"t8probeRefrigerator1"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),f&&n.createElement("a",{href:"#"+L+"/"+H+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(A.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-8 sentence-break",href:"#"+L+"/"+H+"/Insights/Equipment/Graphs/CBW406/"+Object(r.g)(A.moncondevice),target:"_blank",rel:"noreferrer noopener"},b&&b.value?b.label:D.length>0&&D[0].rdfsLabel?D[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",b&&b.value?b.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",b&&b.deviceType?b.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(A.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(A.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===D||void 0===D?void 0:D.map(function(e,t){return e.rdfsLabel+(t<D.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(A.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(A.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",h)),i?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:N&&(null===(e=p.columns)||void 0===e?void 0:e.length)>1?p:o,size:{height:300},axis:m,grid:d,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),E.indexOf("Refrigerator 2")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(v&&N?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),N&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",x&&x.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:y.sensedValue,onChange:function(e){a.selectAlarmPoint2(e.target.value)}},x.filter(function(e){return"register1"==e.sensedValue||"t3frontRefrigerator2"==e.sensedValue||"t4backRefrigerator2"==e.sensedValue||"t5evapfanRefrigerator2"==e.sensedValue||"t6comprinRefrigerator2"==e.sensedValue||"t7comproutRefrigerator2"==e.sensedValue||"t8probeRefrigerator2"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),v&&n.createElement("a",{href:"#"+L+"/"+H+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(A.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-8 sentence-break",href:"#"+L+"/"+H+"/Insights/Equipment/Graphs/CBW406/"+Object(r.g)(A.moncondevice),target:"_blank",rel:"noreferrer noopener"},b&&b.value?b.label:D.length>0&&D[0].rdfsLabel?D[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",b&&b.value?b.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",b&&b.deviceType?b.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(A.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(A.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",D.map(function(e,t){return e.rdfsLabel+(t<D.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(A.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(A.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",h)),i?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:N&&(null===(t=g.columns)||void 0===t?void 0:t.length)>1?g:u,size:{height:300},axis:c,grid:d,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=v},2971:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(715),o=a(802),r=a(11),u=a(803),m=a(122),c=a(736),d=a(124),h=a(760),p=(a.n(h),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],alarmSensedPoints:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e=this;return f(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){var e,t=this;return f(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(r.g)(e)&&Object(d.g)(Object(r.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){var t;return g(this,void 0,void 0,function(){var a,n,l,s,i,o,d,h,p,g,v,x,V,y=this;return f(this,function(f){switch(f.label){case 0:return a=this.state,n=a.graphData,l=a.selectedAlarmPoint1,s=a.selectedAlarmPoint2,i=a.selectedAlarmPoint3,o=this.props,d=o.buildingName,h=o.devicePoints,p=o.showAlarmPoints,g=o.device,Object(m.a)(!0),p&&!e?[3,2]:(v=[],h&&h.length&&h.forEach(function(e){v.push({sensedValue:Object(r.g)(e.sensedValue),maximumExtremeValue:Object(r.g)(e.maximumExtremeValue),maximumNormalValue:Object(r.g)(e.maximumNormalValue),minimumExtremeValue:Object(r.g)(e.minimumExtremeValue),minimumNormalValue:Object(r.g)(e.minimumNormalValue)})}),[4,Object(u.e)(c.a.OperationalAlarm,d,!1,0,50,null,null,[Object(r.g)(g.moncondevice)],null)]);case 1:return x=f.sent(),V=(null===(t=n.columns[0])||void 0===t?void 0:t.length)>1?new Date(n.columns[0][1]):null,x=x.filter(function(e){return new Date(e.timeofalarm)>V}),this.setState({alarmSensedPoints:v,deviceAlarms:x},function(){if((null===v||void 0===v?void 0:v.length)>0&&n.columns.length>1){var e=v.filter(function(e){return"a13comprcurrRefrigerator1"==e.sensedValue||"a14efmcurrRefrigerator1"==e.sensedValue||"a15prRefrigerator1"==e.sensedValue||"a16doorRefrigerator1"==e.sensedValue}),t=l.sensedValue.length>1?l.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";y.selectAlarmPoint1(t);var a=v.filter(function(e){return"a13comprcurrRefrigerator2"==e.sensedValue||"a14efmcurrRefrigerator2"==e.sensedValue||"a15prRefrigerator2"==e.sensedValue||"a16doorRefrigerator2"==e.sensedValue}),o=s.sensedValue.length>1?s.sensedValue:(null===a||void 0===a?void 0:a.length)>0?a[a.length-1].sensedValue:"";y.selectAlarmPoint2(o);var r=v.filter(function(e){return"poweranalogInput5"==e.sensedValue||"poweranalogInput6"==e.sensedValue||"poweranalogInput7"==e.sensedValue||"poweranalogInput8"==e.sensedValue}),u=i.sensedValue.length>1?i.sensedValue:(null===r||void 0===r?void 0:r.length)>0?r[r.length-1].sensedValue:"";y.selectAlarmPoint3(u)}}),[3,3];case 2:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),f.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"a13comprcurrRefrigerator1"==e.sensedValueKey||"a14efmcurrRefrigerator1"==e.sensedValueKey||"a15prRefrigerator1"==e.sensedValueKey||"a16doorRefrigerator1"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("a13comprcurrRefrigerator1"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Compressor:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a14efmcurrRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EFM:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a15prRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Pressure Sensor":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a16doorRefrigerator1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(+i.minimumExtremeValue/1e3),l.push(+i.minimumNormalValue/1e3),s.push(+i.maximumNormalValue/1e3),r.push(+i.maximumExtremeValue/1e3);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Door Contact":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"a13comprcurrRefrigerator2"==e.sensedValueKey||"a14efmcurrRefrigerator2"==e.sensedValueKey||"a15prRefrigerator2"==e.sensedValueKey||"a16doorRefrigerator2"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("a13comprcurrRefrigerator2"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Compressor:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a14efmcurrRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EFM:"#e3e3e3",High:"grey","High-High":"red"}}}else if("a15prRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Pressure Sensor":"#e3e3e3",High:"grey","High-High":"red"}}}else if("a16doorRefrigerator2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Door Contact":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"poweranalogInput5"==e.sensedValueKey||"poweranalogInput6"==e.sensedValueKey||"poweranalogInput7"==e.sensedValueKey||"poweranalogInput8"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("poweranalogInput5"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 5":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput6"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 6":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput7"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 7":"#e3e3e3",High:"grey","High-High":"red"}}}else if("poweranalogInput8"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power Analog Input 8":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,i=n.axis1,o=n.grid,r=n.alarmSensedPoints,u=n.selectedAlarmPoint1,m=n.selectedAlarmPoint2,c=n.selectedAlarmPoint3,d=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var h=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.a13comprcurrRefrigerator1),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.a14efmcurrRefrigerator1),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.a15prRefrigerator1),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.a16doorRefrigerator1),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.a13comprcurrRefrigerator2),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.a14efmcurrRefrigerator2),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.a15prRefrigerator2),s.columns[4].splice(1,1),s.columns[4].push(null===e||void 0===e?void 0:e.a16doorRefrigerator2),(t.getTime()-l.columns[0][2].getTime())/6e4>h&&l.columns[0].splice(1,1),i.x.tick.values[2]&&i.x.tick.values[1].getTime()&&i.x.tick.values[2].getTime()-i.x.tick.values[1].getTime()<t.getTime()-i.x.tick.values[i.x.tick.values.length-1]&&(i.x.tick.values.splice(0,1),o.x.lines.splice(0,1),t.setSeconds(0),h>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),i.x.tick.values.push(t),o.x.lines.push({value:t,class:"grid4"}));var p=null===t||void 0===t?void 0:t.toLocaleString();d?this.setState({grid:o,axis1:i,graphData:l,graphData2:s,lastUpdatedAt:p},function(){var e=r.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=u.sensedValue.length>1?u.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=r.filter(function(e){return"pressure_hPa"==e.sensedValue}),l=m.sensedValue.length>1?m.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=r.filter(function(e){return"illuminance_lux"==e.sensedValue}),i=c.sensedValue.length>1?c.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(i)}):this.setState({grid:o,axis1:i,graphData:l,graphData2:s,lastUpdatedAt:p})}},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(r.g)(a.relatedEquipment))return{value:Object(r.g)(a.relatedEquipment),label:Object(r.g)(a.relatedEquipmentLabel),deviceType:Object(r.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return g(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,h,p,g,v,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R,C,T,q,G,M,I,U,K=this;return f(this,function(f){switch(f.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=t.showAlarmPoints,u=this.state,m=u.grid,c=u.axis1,h=u.axis2,p=u.axis3,g=u.graphData,v=u.graphData2,x=u.graphData3,V=u.lastUpdatedAt,a&&a.moncondevice?(y=this.fetchEquipmentFromPoints(),b=Object(r.g)(a.topic),[4,Object(i.l)(b,n,l,g.columns.length>1)]):[3,2];case 1:w=f.sent(),L=["EFM"],H=["Pressure Sensor"],A=["Door Contact"],N=["Compressor"],D=["EFM"],P=["Pressure Sensor"],S=["Door Contact"],_=["Register"],O=["Serial Number"],k=["Refresh"],j=["Power Analog Input 5"],F=["Power Analog Input 6"],R=["Power Analog Input 7"],C=["Power Analog Input 8"],T=["Amalgamated Watts"],q=["x"],(E=["Compressor"]).push(null),L.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(new Date(n)),G=!1,w.length>0&&w.forEach(function(e){e&&(e.a13comprcurrRefrigerator1&&E.push(""+e.a13comprcurrRefrigerator1),e.a14efmcurrRefrigerator1&&(G=e.a14efmcurrRefrigerator1<-5,L.push(""+e.a14efmcurrRefrigerator1)),e.a15prRefrigerator1&&H.push(""+e.a15prRefrigerator1),e.a16doorRefrigerator1&&A.push(""+e.a16doorRefrigerator1),e.a13comprcurrRefrigerator2&&N.push(""+e.a13comprcurrRefrigerator2),e.a14efmcurrRefrigerator2&&D.push(""+e.a14efmcurrRefrigerator2),e.a15prRefrigerator2&&P.push(""+e.a15prRefrigerator2),e.a16doorRefrigerator2&&S.push(""+e.a16doorRefrigerator2),e.register1&&_.push(""+e.register1),e.serialNumber&&O.push(""+e.serialNumber),e.minRecRefresh&&k.push(""+e.minRecRefresh),e.poweranalogInput5&&j.push(""+e.poweranalogInput5),e.poweranalogInput6&&F.push(""+e.poweranalogInput6),e.poweranalogInput7&&R.push(""+e.poweranalogInput7),e.poweranalogInput8&&C.push(""+e.poweranalogInput8),T.push(""+360*e.a13comprcurrRefrigerator1),q.push(new Date(e.timestamp)))}),V=w.length>0?null===(e=q[q.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",E.push(null),L.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(new Date(l)),(E.length>3||L.length>3||H.length>3||A.length>3)&&(g={x:"x",columns:[q,E,L,H,A]}),(N.length>3||D.length>3||P.length>3||S.length>3)&&(v={x:"x",columns:[q,N,D,P,S]}),(j.length>3||F.length>3||R.length>3||C.length>3)&&(x={x:"x",columns:[q,j,F,R,C]},p.y.label="kw"),c.y.label="Amps",h.y.label="Amps",q.length>1&&(M=Object(o.a)(5,n,l),I="",M.length>1?(U=((new Date).getTime()-M[0].getTime())/1e3,I=(U/=3600)>24?"%m-%d %H:%M":U<.3?"%H:%M:%S":"%H:%M"):I="%H:%M:%S",m.x.lines=[],M.forEach(function(e){m.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(1)},p.y.tick.format=function(e){return parseFloat(e).toFixed(1)},c.y.tick.values=G?[-20,-10,0,10,20]:[0,5,10,15,20],h.y.tick.values=[0,5,10,15,20],p.y.tick.values=[0,20,40,60,80,100],c.y.max=20,c.y.min=G?-20:0,h.y.max=20,h.y.min=0,p.y.max=100,p.y.min=0,c.x.tick.format=I,h.x.tick.format=I,p.x.tick.format=I,c.x.tick.values=M,h.x.tick.values=M,p.x.tick.values=M,this.props.loadNextInsight(),Object(d.h)(b,this.callLiveUpdate),this.setState({grid:m,axis1:c,axis2:h,axis3:p,graphData:g,graphData2:v,graphData3:x,lastUpdatedAt:V,loading:!1,pointEquipment:y},function(){s&&K.changeAlarmStatus(!0)})),f.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e,t,a,l,i,o,u=this,m=this.state,c=m.loading,d=m.graphData,h=m.graphData2,p=m.graphData3,g=m.axis1,f=m.axis2,v=m.axis3,x=m.grid,V=m.lastUpdatedAt,y=m.graphDataAlarmPoint1,b=m.graphDataAlarmPoint2,w=m.graphDataAlarmPoint3,E=m.indicateAlarm1,L=m.indicateAlarm2,H=m.indicateAlarm3,A=m.alarmSensedPoints,N=m.selectedAlarmPoint1,D=m.selectedAlarmPoint2,P=m.selectedAlarmPoint3,S=m.pointEquipment,_=this.props,O=_.graphsList,k=_.instance,j=_.buildingName,F=_.showAlarmPoints,R=_.device,C=_.equipment;return n.createElement(n.Fragment,null,O.indexOf("Refrigerator 1")>-1&&(null===(e=d.columns[1])||void 0===e?void 0:e.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(E&&F?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),F&&A.length>0&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:N.sensedValue,onChange:function(e){u.selectAlarmPoint1(e.target.value)}},A.filter(function(e){return"a13comprcurrRefrigerator1"==e.sensedValue||"a14efmcurrRefrigerator1"==e.sensedValue||"a15prRefrigerator1"==e.sensedValue||"a16doorRefrigerator1"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),E&&n.createElement("a",{href:"#"+k+"/"+j+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(R.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-8 sentence-break",href:"#"+k+"/"+j+"/Insights/Equipment/Graphs/CompressorControl/"+Object(r.g)(R.moncondevice),target:"_blank",rel:"noreferrer noopener"},S&&S.value?S.label:C.length>0&&C[0].rdfsLabel?C[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",S&&S.value?S.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",S&&S.deviceType?S.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(R.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(R.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===C||void 0===C?void 0:C.map(function(e,t){return e.rdfsLabel+(t<C.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(R.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(R.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:F&&(null===(t=y.columns)||void 0===t?void 0:t.length)>1?y:d,size:{height:300},axis:g,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),O.indexOf("Refrigerator 2")>-1&&(null===(a=h.columns[1])||void 0===a?void 0:a.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(L&&F?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),F&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:D.sensedValue,onChange:function(e){u.selectAlarmPoint2(e.target.value)}},A.filter(function(e){return"a13comprcurrRefrigerator2"==e.sensedValue||"a14efmcurrRefrigerator2"==e.sensedValue||"a15prRefrigerator2"==e.sensedValue||"a16doorRefrigerator2"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),L&&n.createElement("a",{href:"#"+k+"/"+j+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(R.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-8 sentence-break",href:"#"+k+"/"+j+"/Insights/Equipment/Graphs/CompressorControl/"+Object(r.g)(R.moncondevice),target:"_blank",rel:"noreferrer noopener"},S&&S.value?S.label:C.length>0&&C[0].rdfsLabel?C[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",S&&S.value?S.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",S&&S.deviceType?S.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(R.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(R.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===C||void 0===C?void 0:C.map(function(e,t){return e.rdfsLabel+(t<C.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(R.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(R.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:F&&(null===(l=b.columns)||void 0===l?void 0:l.length)>1?b:h,size:{height:300},axis:f,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),O.indexOf("Refrigerator 1")>-1&&O.indexOf("Power Analog Inputs")>-1&&(null===(i=p.columns[1])||void 0===i?void 0:i.length)>2&&n.createElement("div",{className:"row col-md-12 device-graphs "+(H&&F?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),F&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",A&&A.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:P.sensedValue,onChange:function(e){u.selectAlarmPoint3(e.target.value)}},A.filter(function(e){return"poweranalogInput5"==e.sensedValue||"poweranalogInput6"==e.sensedValue||"poweranalogInput7"==e.sensedValue||"poweranalogInput8"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),H&&n.createElement("a",{href:"#"+k+"/"+j+"/Alarms/OperationalAlarms/Device/"+Object(r.g)(R.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-8 sentence-break",href:"#"+k+"/"+j+"/Insights/Equipment/Graphs/CompressorControl/"+Object(r.g)(R.moncondevice),target:"_blank",rel:"noreferrer noopener"},S&&S.value?S.label:C.length>0&&C[0].rdfsLabel?C[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",S&&S.value?S.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",S&&S.deviceType?S.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)(R.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)(R.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===C||void 0===C?void 0:C.map(function(e,t){return e.rdfsLabel+(t<C.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)(R.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)(R.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",V)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:F&&(null===(o=w.columns)||void 0===o?void 0:o.length)>1?w:p,size:{height:300},axis:v,grid:x,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=v},2972:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(707),o=a(11),r=a(802),u=a(803),m=a(122),c=a(736),d=a(124),h=a(760),p=(a.n(h),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],alarmSensedPoints:[],graphDataAlarmPoint:{},selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm:!1,pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e=this;return f(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){var e,t=this;return f(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(o.g)(e)&&Object(d.g)(Object(o.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){var t;return g(this,void 0,void 0,function(){var a,n,l,s,i,r,d,h,p,g,v,x=this;return f(this,function(f){switch(f.label){case 0:return a=this.state,n=a.graphData,l=a.selectedAlarmPoint,s=this.props,i=s.buildingName,r=s.devicePoints,d=s.showAlarmPoints,h=s.device,Object(m.a)(!0),d&&!e?[3,2]:(p=[],r&&r.length&&r.forEach(function(e){p.push({sensedValue:Object(o.g)(e.sensedValue),maximumExtremeValue:Object(o.g)(e.maximumExtremeValue),maximumNormalValue:Object(o.g)(e.maximumNormalValue),minimumExtremeValue:Object(o.g)(e.minimumExtremeValue),minimumNormalValue:Object(o.g)(e.minimumNormalValue)})}),[4,Object(u.e)(c.a.OperationalAlarm,i,!1,0,50,null,null,[Object(o.g)(h.moncondevice)],null)]);case 1:return g=f.sent(),v=(null===(t=n.columns[0])||void 0===t?void 0:t.length)>1?new Date(n.columns[0][1]):null,g=g.filter(function(e){return new Date(e.timeofalarm)>v}),this.setState({alarmSensedPoints:p,deviceAlarms:g},function(){if((null===p||void 0===p?void 0:p.length)>0&&n.columns.length>1){var e=l.sensedValue.length>1?l.sensedValue:p[p.length-1].sensedValue;x.selectAlarmPoint(e)}}),[3,3];case 2:this.selectAlarmPoint(""),f.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype.selectAlarmPoint=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("mAmps_relay1"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"grey",Low:"grey","Relay 1 Amp":"red",High:"grey","High-High":"grey"}}}else if("mAmps_relay2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 2 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mAmps_relay3"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("mAmps_relay4"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 4 Amp":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay1"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[5].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[5],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 1 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay2"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[6].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[6],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 2 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("power_Wt_relay3"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[7].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[7],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else if("nominal_src_volts"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[12].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[12],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Relay 3 Watts":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint:i,graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},graphDataAlarmPoint:e,indicateAlarm:o,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.grid,o=n.alarmSensedPoints,r=n.axis1,u=n.selectedAlarmPoint,m=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var c=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.mAmps_relay1),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.mAmps_relay2),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.mAmps_relay3),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.mAmps_relay4),l.columns[5].splice(1,1),l.columns[5].push(null===e||void 0===e?void 0:e.power_Wt_relay1),l.columns[6].splice(1,1),l.columns[6].push(null===e||void 0===e?void 0:e.power_Wt_relay2),l.columns[7].splice(1,1),l.columns[7].push(null===e||void 0===e?void 0:e.power_Wt_relay3);var d=Object(i.a)(parseInt(null===e||void 0===e?void 0:e.v4relay_state));3==d.length?d="0"+d:2==d.length?d="00"+d:1==d.length&&(d="000"+d);var h=d[3],p=d[2],g=d[1],f=d[0];l.columns[8].splice(1,1),l.columns[8].push(h||"0"),l.columns[9].splice(1,1),l.columns[9].push(p||"0"),l.columns[10].splice(1,1),l.columns[10].push(g||"0"),l.columns[11].splice(1,1),l.columns[11].push(f||"0"),l.columns[12].splice(1,1),l.columns[12].push(null===e||void 0===e?void 0:e.nominal_src_volts),(t.getTime()-l.columns[0][2].getTime())/6e4>c&&l.columns[0].splice(1,1),r.x.tick.values[2]&&r.x.tick.values[1].getTime()&&r.x.tick.values[2].getTime()-r.x.tick.values[1].getTime()<t.getTime()-r.x.tick.values[r.x.tick.values.length-1]&&(r.x.tick.values.splice(0,1),s.x.lines.splice(0,1),t.setSeconds(0),c>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),r.x.tick.values.push(t),s.x.lines.push({value:t,class:"grid4"}));var v=null===t||void 0===t?void 0:t.toLocaleString();m?this.setState({grid:s,axis1:r,graphData:l,lastUpdatedAt:v},function(){var e=o.filter(function(e){return"relhumidity_pct"==e.sensedValue||"temp_celsius"==e.sensedValue}),t=u.sensedValue.length>1?u.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint(t)}):this.setState({grid:s,axis1:r,graphData:l,lastUpdatedAt:v})}},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(o.g)(a.relatedEquipment))return{value:Object(o.g)(a.relatedEquipment),label:Object(o.g)(a.relatedEquipmentLabel),deviceType:Object(o.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return g(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,h,p,g,v,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R,C,T,q,G,M,I,U,K,B,W,z=this;return f(this,function(f){switch(f.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=t.showAlarmPoints,u=this.state,m=u.grid,c=u.axis1,h=u.graphData,p=u.lastUpdatedAt,a&&a.moncondevice?(g=this.fetchEquipmentFromPoints(),v=Object(o.g)(a.topic),x=Object(o.g)(a.moncondevice),[4,Object(i.h)(v,n,l,h.columns.length>1)]):[3,3];case 1:return V=f.sent(),[4,Object(i.z)(x)];case 2:if(y=f.sent(),b=[],y[0]?(w=y[0],E=Object(o.g)(w.relayNames),b=E.split(",")):(b.push("Relay 1"),b.push("Relay 2"),b.push("Relay 3"),b.push("Relay 4")),L=[b[0]+" Amp"],H=[b[1]+" Amp"],A=[b[2]+" Amp"],N=[b[3]+" Amp"],D=["Nom. Source Volts"],P=[b[0]+" Watts"],S=[b[1]+" Watts"],_=[b[2]+" Watts"],O=[b[0]+" State"],k=[b[1]+" State"],j=[b[2]+" State"],F=[b[3]+" State"],R=["x"],L.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(new Date(n)),V.length>0)for(C=0;C<V.length;C++)(null===(T=V[C])||void 0===T?void 0:T.mAmps_relay1)&&(L.push(T.mAmps_relay1),H.push(T.mAmps_relay2),A.push(T.mAmps_relay3),N.push(T.mAmps_relay4),D.push(T.nominal_src_volts),P.push(T.power_Wt_relay1),S.push(T.power_Wt_relay2),_.push(T.power_Wt_relay3),q=Object(i.a)(parseInt(T.v4relay_state)),R.push(new Date(T.timestamp)),3==q.length?q="0"+q:2==q.length?q="00"+q:1==q.length&&(q="000"+q),G=q[3],M=q[2],I=q[1],U=q[0],O.push(G||"0"),k.push(M||"0"),j.push(I||"0"),F.push(U||"0"));p=V.length>0?null===(e=R[R.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",L.push(null),H.push(null),A.push(null),N.push(null),D.push(null),P.push(null),S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(new Date(l)),h={x:"x",columns:[R,L,H,A,N,P,S,_,O,k,j,F,D]},c.y.label="Amp, W, On/Off, Volts",K=Object(r.a)(5,n,l),B="",K.length>1?(W=((new Date).getTime()-K[0].getTime())/1e3,B=(W/=3600)>24?"%m-%d %H:%M":W<.3?"%H:%M:%S":"%H:%M"):B="%H:%M:%S",m.x.lines=[],K.forEach(function(e){m.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(0)},c.y.tick.values=[0,50,100,150,200,250,300],c.y.max=300,c.y.min=0,c.x.tick.format=B,c.x.tick.values=K,this.props.loadNextInsight(),Object(d.h)(v,this.callLiveUpdate),this.setState({grid:m,axis1:c,graphData:h,loading:!1,lastUpdatedAt:p,pointEquipment:g},function(){s&&z.changeAlarmStatus(!0)}),f.label=3;case 3:return[2]}})})},t.prototype.render=function(){var e,t=this,a=this.state,l=a.loading,i=a.graphData,r=a.axis1,u=a.grid,m=a.lastUpdatedAt,c=a.alarmSensedPoints,d=a.selectedAlarmPoint,h=a.graphDataAlarmPoint,p=a.indicateAlarm,g=a.pointEquipment,f=this.props,v=f.instance,x=f.buildingName,V=f.device,y=f.showAlarmPoints,b=f.equipment;return n.createElement("div",{className:"row col-md-12 device-graphs "+(p&&y?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),y&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",c&&c.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:d.sensedValue,onChange:function(e){t.selectAlarmPoint(e.target.value)}},c.map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),p&&n.createElement("a",{href:"#"+v+"/"+x+"/Alarms/OperationalAlarms/Device/"+Object(o.g)(V.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-8 sentence-break",href:"#"+v+"/"+x+"/Insights/Equipment/Graphs/RelayControl/"+Object(o.g)(V.moncondevice),target:"_blank",rel:"noreferrer noopener"},g&&g.value?g.label:b.length>0&&b[0].rdfsLabel?b[0].rdfsLabel:"No equipment assigned"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",g&&g.value?g.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",g&&g.deviceType?g.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(o.g)(V.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(o.g)(V.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===b||void 0===b?void 0:b.map(function(e,t){return e.rdfsLabel+(t<b.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(o.g)(V.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(o.g)(V.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",m)),l?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:y&&(null===(e=h.columns)||void 0===e?void 0:e.length)>1?h:i,size:{height:300},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}}))},t}(n.Component);t.a=v},2973:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(772)),s=a.n(l),i=a(715),o=a(802),r=a(11),u=a(803),m=a(122),c=a(736),d=a(124),h=a(760),p=(a.n(h),this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}()),g=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},v=function(e){function t(t){var a=e.call(this,t)||this;return a.state={graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},grid:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis2:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis3:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis4:{x:{type:"timeseries",tick:{fit:!1,count:5,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis5:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},axis6:{x:{type:"timeseries",tick:{fit:!1,multiline:!0,format:"%m-%d/%H:%M:%S"}},y:{label:"\xb0F",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,lastUpdatedAt:"No Data",deviceAlarms:[],indicateAlarm1:!1,indicateAlarm2:!1,indicateAlarm3:!1,indicateAlarm4:!1,indicateAlarm5:!1,indicateAlarm6:!1,alarmSensedPoints:[],graphDataAlarmPoint1:{},graphDataAlarmPoint2:{},graphDataAlarmPoint3:{},graphDataAlarmPoint4:{},graphDataAlarmPoint5:{},graphDataAlarmPoint6:{},selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},pointEquipment:Object()},a._fetchData=a._fetchData.bind(a),a.callLiveUpdate=a.callLiveUpdate.bind(a),a}return p(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e=this;return f(this,function(t){return window.addEventListener("ShowAlarms",function(){return e.changeAlarmStatus()}),window.addEventListener("reLoadGraph",function(){e.state.loading||e.setState({loading:!0},function(){return e.setState({loading:!1})})}),this._fetchData(),[2]})})},t.prototype.componentWillUnmount=function(){return g(this,void 0,void 0,function(){var e,t=this;return f(this,function(a){return e=this.props.device.topic,window.removeEventListener("ShowAlarms",function(e){return t.changeAlarmStatus()}),window.removeEventListener("reLoadGraph",function(){t.state.loading||t.setState({loading:!0},function(){return t.setState({loading:!1})})}),Object(r.g)(e)&&Object(d.g)(Object(r.g)(e)),[2]})})},t.prototype.changeAlarmStatus=function(e){return g(this,void 0,void 0,function(){var t,a,n,l,s,i,o,d,h,p,g,v,x,V,y,b,w=this;return f(this,function(f){switch(f.label){case 0:return t=this.state,a=t.graphData,n=t.selectedAlarmPoint1,l=t.selectedAlarmPoint2,s=t.selectedAlarmPoint3,i=t.selectedAlarmPoint4,o=t.selectedAlarmPoint5,d=t.selectedAlarmPoint6,h=this.props,p=h.buildingName,g=h.devicePoints,v=h.showAlarmPoints,x=h.device,Object(m.a)(!0),v&&!e?[3,2]:(V=[],g&&g.length&&g.forEach(function(e){V.push({sensedValue:Object(r.g)(e.sensedValue),maximumExtremeValue:Object(r.g)(e.maximumExtremeValue),maximumNormalValue:Object(r.g)(e.maximumNormalValue),minimumExtremeValue:Object(r.g)(e.minimumExtremeValue),minimumNormalValue:Object(r.g)(e.minimumNormalValue)})}),[4,Object(u.e)(c.a.OperationalAlarm,p,!1,0,50,null,null,[Object(r.g)(x.moncondevice)],null)]);case 1:return y=f.sent(),b=new Date(a.columns[0][1]),y=y.filter(function(e){return new Date(e.timeofalarm)>b}),this.setState({alarmSensedPoints:V,deviceAlarms:y},function(){if((null===V||void 0===V?void 0:V.length)>0&&a.columns.length>1){var e=V.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}),t=n.sensedValue.length>1?n.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";w.selectAlarmPoint1(t);var r=V.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}),u=l.sensedValue.length>1?l.sensedValue:(null===r||void 0===r?void 0:r.length)>0?r[r.length-1].sensedValue:"";w.selectAlarmPoint2(u);var m=V.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}),c=s.sensedValue.length>1?s.sensedValue:(null===m||void 0===m?void 0:m.length)>0?m[m.length-1].sensedValue:"";w.selectAlarmPoint3(c);var h=V.filter(function(e){return"Freq"==e.sensedValue}),p=i.sensedValue.length>1?i.sensedValue:(null===h||void 0===h?void 0:h.length)>0?h[h.length-1].sensedValue:"";w.selectAlarmPoint4(p);var g=V.filter(function(e){return"EnergySumNR"==e.sensedValue}),f=o.sensedValue.length>1?o.sensedValue:(null===g||void 0===g?void 0:g.length)>0?g[g.length-1].sensedValue:"";w.selectAlarmPoint5(f);var v=V.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}),x=d.sensedValue.length>1?d.sensedValue:(null===v||void 0===v?void 0:v.length)>0?v[v.length-1].sensedValue:"";w.selectAlarmPoint6(x)}}),[3,3];case 2:this.selectAlarmPoint1(""),this.selectAlarmPoint2(""),this.selectAlarmPoint3(""),this.selectAlarmPoint4(""),this.selectAlarmPoint5(""),this.selectAlarmPoint6(""),f.label=3;case 3:return Object(m.a)(!1),[2]}})})},t.prototype.selectAlarmPoint1=function(e){var t=this,a=this.state,n=a.graphData,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"PowerA"==e.sensedValueKey||"PowerB"==e.sensedValueKey||"PowerB"==e.sensedValueKey||"PowerC"==e.sensedValueKey||"PowerSum"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("PowerA"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerB"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Power C":"#e3e3e3",High:"grey","High-High":"red"}}}else if("PowerSum"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[4].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[4],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",PowerSum:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint1:i,graphDataAlarmPoint1:e,indicateAlarm1:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint1:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm1:o,graphDataAlarmPoint1:e,loading:!1})})},t.prototype.selectAlarmPoint2=function(e){var t=this,a=this.state,n=a.graphData2,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"VoltAB"==e.sensedValueKey||"VoltAC"==e.sensedValueKey||"VoltAB"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("VoltAB"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts AB":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltBC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts BC":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltAC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts AC":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint2:i,graphDataAlarmPoint2:e,indicateAlarm2:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint2:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm2:o,graphDataAlarmPoint2:e,loading:!1})})},t.prototype.selectAlarmPoint3=function(e){var t=this,a=this.state,n=a.graphData3,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"VoltA"==e.sensedValueKey||"VoltB"==e.sensedValueKey||"VoltC"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("VoltA"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts A":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltB"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[2].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[2],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts B":"#e3e3e3",High:"grey","High-High":"red"}}}else if("VoltC"==i.sensedValue){for(a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[3].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[3],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey","Volts C":"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint3:i,graphDataAlarmPoint3:e,indicateAlarm3:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint3:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm3:o,graphDataAlarmPoint3:e,loading:!1})})},t.prototype.selectAlarmPoint4=function(e){var t=this,a=this.state,n=a.graphData4,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"Freq"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("Freq"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",Freq:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint4:i,graphDataAlarmPoint4:e,indicateAlarm4:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint4:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm4:o,graphDataAlarmPoint4:e,loading:!1})})},t.prototype.selectAlarmPoint5=function(e){var t=this,a=this.state,n=a.graphData5,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"EnergySumNR"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("EnergySumNR"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EnergySumNR:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint5:i,graphDataAlarmPoint5:e,indicateAlarm5:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint5:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm5:o,graphDataAlarmPoint5:e,loading:!1})})},t.prototype.selectAlarmPoint6=function(e){var t=this,a=this.state,n=a.graphData6,l=a.alarmSensedPoints,s=a.deviceAlarms,i=l.find(function(t){return t.sensedValue===e}),o=s.length>0&&s.findIndex(function(e){return"EnergyPosSumNR"==e.sensedValueKey})>-1;this.setState({loading:!0},function(){var e={x:"x",columns:[],regions:{},colors:{}};if(i){if("EnergyPosSumNR"==i.sensedValue){for(var a=["Low-Low"],l=["Low"],s=["High"],r=["High-High"],u=0;u<n.columns[1].length-1;u++)a.push(i.minimumExtremeValue),l.push(i.minimumNormalValue),s.push(i.maximumNormalValue),r.push(i.maximumExtremeValue);e={x:"x",columns:[n.columns[0],a,l,n.columns[1],s,r],regions:{"Low-Low":[{style:"dashed"}],Low:[{style:"dashed"}],High:[{style:"dashed"}],"High-High":[{style:"dashed"}]},colors:{"Low-Low":"red",Low:"grey",EnergyPosSumNR:"#e3e3e3",High:"grey","High-High":"red"}}}else e=n;t.setState({selectedAlarmPoint6:i,graphDataAlarmPoint6:e,indicateAlarm6:o,loading:!1})}else e=n,t.setState({selectedAlarmPoint6:{sensedValue:"",maximumExtremeValue:"",minimumExtremeValue:"",maximumNormalValue:"",minimumNormalValue:""},indicateAlarm6:o,graphDataAlarmPoint6:e,loading:!1})})},t.prototype.callLiveUpdate=function(e){var t,a=this,n=this.state,l=n.graphData,s=n.graphData2,i=n.graphData3,o=n.graphData4,r=n.graphData5,u=n.graphData6,m=n.axis1,c=n.grid,d=n.alarmSensedPoints,h=n.selectedAlarmPoint1,p=n.selectedAlarmPoint2,g=n.selectedAlarmPoint3,f=n.selectedAlarmPoint4,v=n.selectedAlarmPoint5,x=n.selectedAlarmPoint6,V=this.props.showAlarmPoints;e["@timestamp"]&&(t=new Date(e["@timestamp"]),t=new Date(t.setHours(t.getHours()+10)));var y=this.props.liveGraphRange;if(l.columns.length>1&&t){l.columns[0].splice(1,1),l.columns[0].push(t),l.columns[1].splice(1,1),l.columns[1].push(null===e||void 0===e?void 0:e.PowerA),l.columns[2].splice(1,1),l.columns[2].push(null===e||void 0===e?void 0:e.PowerB),l.columns[3].splice(1,1),l.columns[3].push(null===e||void 0===e?void 0:e.PowerC),l.columns[4].splice(1,1),l.columns[4].push(null===e||void 0===e?void 0:e.PowerSum),s.columns[1].splice(1,1),s.columns[1].push(null===e||void 0===e?void 0:e.VoltAB),s.columns[2].splice(1,1),s.columns[2].push(null===e||void 0===e?void 0:e.VoltAC),s.columns[3].splice(1,1),s.columns[3].push(null===e||void 0===e?void 0:e.VoltBC),i.columns[1].splice(1,1),i.columns[1].push(null===e||void 0===e?void 0:e.VoltA),i.columns[2].splice(1,1),i.columns[2].push(null===e||void 0===e?void 0:e.VoltB),i.columns[3].splice(1,1),i.columns[3].push(null===e||void 0===e?void 0:e.VoltC),o.columns[1].splice(1,1),o.columns[1].push(null===e||void 0===e?void 0:e.Freq),r.columns[1].splice(1,1),r.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.EnergySumNR)/1e3),u.columns[1].splice(1,1),u.columns[1].push(parseFloat(null===e||void 0===e?void 0:e.EnergyPosSumNR)/1e3),(t.getTime()-l.columns[0][2].getTime())/6e4>y&&l.columns[0].splice(1,1),m.x.tick.values[2]&&m.x.tick.values[1].getTime()&&m.x.tick.values[2].getTime()-m.x.tick.values[1].getTime()<t.getTime()-m.x.tick.values[m.x.tick.values.length-1]&&(m.x.tick.values.splice(0,1),c.x.lines.splice(0,1),t.setSeconds(0),y>10&&t.setMinutes(t.getMinutes()-t.getMinutes()%5),m.x.tick.values.push(t),c.x.lines.push({value:t,class:"grid4"}));var b=null===t||void 0===t?void 0:t.toLocaleString();V?this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:i,graphData4:o,graphData5:r,graphData6:u,lastUpdatedAt:b},function(){var e=d.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}),t=h.sensedValue.length>1?h.sensedValue:(null===e||void 0===e?void 0:e.length)>0?e[e.length-1].sensedValue:"";a.selectAlarmPoint1(t);var n=d.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}),l=p.sensedValue.length>1?p.sensedValue:(null===n||void 0===n?void 0:n.length)>0?n[n.length-1].sensedValue:"";a.selectAlarmPoint2(l);var s=d.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}),i=g.sensedValue.length>1?g.sensedValue:(null===s||void 0===s?void 0:s.length)>0?s[s.length-1].sensedValue:"";a.selectAlarmPoint3(i);var o=d.filter(function(e){return"Freq"==e.sensedValue}),r=f.sensedValue.length>1?f.sensedValue:(null===o||void 0===o?void 0:o.length)>0?o[o.length-1].sensedValue:"";a.selectAlarmPoint4(r);var u=d.filter(function(e){return"EnergySumNR"==e.sensedValue}),m=v.sensedValue.length>1?v.sensedValue:(null===u||void 0===u?void 0:u.length)>0?u[u.length-1].sensedValue:"";a.selectAlarmPoint5(m);var c=d.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}),V=x.sensedValue.length>1?x.sensedValue:(null===c||void 0===c?void 0:c.length)>0?c[c.length-1].sensedValue:"";a.selectAlarmPoint6(V)}):this.setState({grid:c,axis1:m,graphData:l,graphData2:s,graphData3:i,graphData4:o,graphData5:r,graphData6:u,lastUpdatedAt:b})}},t.prototype.fetchEquipmentFromPoints=function(){for(var e=this.props.devicePoints,t=0;t<e.length;t++){var a=e[t];if(Object(r.g)(a.relatedEquipment))return{value:Object(r.g)(a.relatedEquipment),label:Object(r.g)(a.relatedEquipmentLabel),deviceType:Object(r.g)(a.relatedEquipmentSpaceLabel)}}return{label:"",value:"",deviceType:""}},t.prototype._fetchData=function(){var e;return g(this,void 0,void 0,function(){var t,a,n,l,s,u,m,c,h,p,g,v,x,V,y,b,w,E,L,H,A,N,D,P,S,_,O,k,j,F,R,C,T,q,G,M,I,U,K,B,W,z,Z,Y,$=this;return f(this,function(f){switch(f.label){case 0:return t=this.props,a=t.device,n=t.from,l=t.to,s=t.showAlarmPoints,u=this.state,m=u.grid,c=u.axis1,h=u.axis2,p=u.axis3,g=u.axis4,v=u.axis5,x=u.axis6,V=u.graphData,y=u.graphData2,b=u.graphData3,w=u.graphData4,E=u.graphData5,L=u.graphData6,H=u.lastUpdatedAt,a&&a.moncondevice?(A=Object(r.g)(a.topic),N=this.fetchEquipmentFromPoints(),(D=A?A.split(","):[]).length&&D[0]?[4,Object(i.n)(D[0],n,l,V.columns.length>1)]:[3,2]):[3,2];case 1:P=f.sent(),_=["EnergyPOSSUM"],O=["EnergySumNR"],k=["EnergyPosSumNR"],j=["PowerSum"],F=["Power A"],R=["Power B"],C=["Power C"],T=["Volts A"],q=["Volts B"],G=["Volts C"],M=["VoltsAvgLL"],I=["Volts AB"],U=["Volts AC"],K=["Volts BC"],B=["Freq"],W=["x"],(S=["EnerygySum"]).push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(null),G.push(null),M.push(null),I.push(null),U.push(null),K.push(null),B.push(null),W.push(new Date(n)),P.length>0&&P.forEach(function(e){e&&(S.push(e.EnergySum),_.push(e.EnergyPosSum),O.push(+e.EnergySumNR/1e3),k.push(+e.EnergyPosSumNR/1e3),j.push(e.PowerSum),F.push(e.PowerA),R.push(e.PowerB),C.push(e.PowerC),T.push(e.VoltA),q.push(e.VoltB),G.push(e.VoltC),M.push(e.VoltAvgLL),I.push(e.VoltAB),U.push(e.VoltAC),K.push(e.VoltBC),B.push(e.Freq),W.push(new Date(e.timestamp)))}),H=P.length>0?null===(e=W[W.length-1])||void 0===e?void 0:e.toLocaleString():"No Data",S.push(null),_.push(null),O.push(null),k.push(null),j.push(null),F.push(null),R.push(null),C.push(null),T.push(null),q.push(null),G.push(null),M.push(null),I.push(null),U.push(null),K.push(null),B.push(null),W.push(new Date(l)),V={x:"x",columns:[W,F,R,C,j]},y={x:"x",columns:[W,I,K,U]},b={x:"x",columns:[W,T,q,G]},w={x:"x",columns:[W,B]},E={x:"x",columns:[W,O]},L={x:"x",columns:[W,k]},c.y.label="Watts",h.y.label="Volts",p.y.label="Volts",g.y.label="Hz",v.y.label="MWh",x.y.label="MWh",z=Object(o.a)(5,n,l),Z="",z.length>1?(Y=((new Date).getTime()-z[0].getTime())/1e3,Z=(Y/=3600)>24?"%m-%d %H:%M":Y<.3?"%H:%M:%S":"%H:%M"):Z="%H:%M:%S",m.x.lines=[],z.forEach(function(e){m.x.lines.push({value:e,class:"grid4"})}),c.y.tick.format=function(e){return parseFloat(e).toFixed(1)},h.y.tick.format=function(e){return parseFloat(e).toFixed(0)},p.y.tick.format=function(e){return parseFloat(e).toFixed(0)},g.y.tick.format=function(e){return parseFloat(e).toFixed(1)},v.y.tick.format=function(e){return parseFloat(e).toFixed(1)},x.y.tick.format=function(e){return parseFloat(e).toFixed(1)},c.y.tick.values=[0,1e4,2e4,3e4,4e4],h.y.tick.values=[0,50,100,150,200,250],p.y.tick.values=[0,50,100,150],g.y.tick.values=[0,20,40,60,80],v.y.tick.values=[0,40,80,120,160],x.y.tick.values=[0,40,80,120,160],c.y.max=4e4,c.y.min=0,h.y.max=250,h.y.min=0,p.y.max=150,p.y.min=0,g.y.max=80,g.y.min=0,v.y.max=160,v.y.min=0,x.y.max=160,x.y.min=0,c.x.tick.format=Z,h.x.tick.format=Z,p.x.tick.format=Z,g.x.tick.format=Z,v.x.tick.format=Z,x.x.tick.format=Z,c.x.tick.values=z,h.x.tick.values=z,p.x.tick.values=z,g.x.tick.values=z,v.x.tick.values=z,x.x.tick.vawlues=z,this.props.loadNextInsight(),Object(d.h)(D,this.callLiveUpdate),this.setState({grid:m,axis1:c,axis2:h,axis3:p,axis4:g,axis5:v,axis6:x,graphData:V,graphData2:y,graphData3:b,graphData4:w,graphData5:E,graphData6:L,lastUpdatedAt:H,loading:!1,pointEquipment:N},function(){s&&$.changeAlarmStatus(!0)}),f.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e,t,a,l,i,o,u=this,m=this.state,c=m.loading,d=m.graphData,h=m.graphData2,p=m.graphData3,g=m.graphData4,f=m.graphData5,v=m.graphData6,x=m.axis1,V=m.axis2,y=m.axis3,b=m.axis4,w=m.axis5,E=m.axis6,L=m.grid,H=m.lastUpdatedAt,A=m.graphDataAlarmPoint1,N=m.graphDataAlarmPoint2,D=m.graphDataAlarmPoint3,P=m.graphDataAlarmPoint4,S=m.graphDataAlarmPoint5,_=m.graphDataAlarmPoint6,O=m.indicateAlarm1,k=m.indicateAlarm2,j=m.indicateAlarm3,F=m.indicateAlarm4,R=m.indicateAlarm5,C=m.indicateAlarm6,T=m.alarmSensedPoints,q=m.selectedAlarmPoint1,G=m.selectedAlarmPoint2,M=m.selectedAlarmPoint3,I=m.selectedAlarmPoint4,U=m.selectedAlarmPoint5,K=m.selectedAlarmPoint6,B=m.pointEquipment,W=this.props,z=W.graphsList,Z=W.instance,Y=W.buildingName,$=W.device,J=W.showAlarmPoints,Q=W.equipment;return n.createElement(n.Fragment,null,z.indexOf("Power")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(O&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:q.sensedValue,onChange:function(e){u.selectAlarmPoint1(e.target.value)}},T.filter(function(e){return"PowerA"==e.sensedValue||"PowerB"==e.sensedValue||"PowerB"==e.sensedValue||"PowerC"==e.sensedValue||"PowerSum"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),O&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Power"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===Q||void 0===Q?void 0:Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(e=A.columns)||void 0===e?void 0:e.length)>1?A:d,size:{height:300},axis:x,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0},colors:{spaceTemp:"red",cooltemp:"blue",fan:"pink"}})),z.indexOf("Phase Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(k&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:G.sensedValue,onChange:function(e){u.selectAlarmPoint2(e.target.value)}},T.filter(function(e){return"VoltAB"==e.sensedValue||"VoltAC"==e.sensedValue||"VoltAB"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),k&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Phase Voltage"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===Q||void 0===Q?void 0:Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(t=N.columns)||void 0===t?void 0:t.length)>1?N:h,size:{height:300},axis:V,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Voltage")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(j&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:M.sensedValue,onChange:function(e){u.selectAlarmPoint3(e.target.value)}},T.filter(function(e){return"VoltA"==e.sensedValue||"VoltB"==e.sensedValue||"VoltC"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),j&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:"no-padding no-margin-color-textalign tooltipDashboard graphHeading"},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Voltage"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===Q||void 0===Q?void 0:Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(a=D.columns)||void 0===a?void 0:a.length)>1?D:p,size:{height:300},axis:y,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Frequency")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(F&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:I.sensedValue,onChange:function(e){u.selectAlarmPoint4(e.target.value)}},T.filter(function(e){return"Freq"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),F&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-3 sentence-break"}," ","Frequency"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===Q||void 0===Q?void 0:Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(l=P.columns)||void 0===l?void 0:l.length)>1?P:g,size:{height:300},axis:b,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Energy Sum Resettable")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(R&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:U.sensedValue,onChange:function(e){u.selectAlarmPoint5(e.target.value)}},T.filter(function(e){return"EnergySumNR"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),R&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-4 sentence-break"}," ","Energy Sum Resettable"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===Q||void 0===Q?void 0:Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(i=S.columns)||void 0===i?void 0:i.length)>1?S:f,size:{height:300},axis:w,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),z.indexOf("Positive Energy Sum Non-resettable")>-1&&n.createElement("div",{className:"row col-md-12 device-graphs "+(C&&J?"alarm-graph":""),id:"divGraphs"},n.createElement("br",null),J&&n.createElement("div",{className:"alarm-limit-select"},"Limits For: "," ",T&&T.length>0?n.createElement("select",{className:"alarm-points-list",id:"spaces",value:K.sensedValue,onChange:function(e){u.selectAlarmPoint6(e.target.value)}},T.filter(function(e){return"EnergyPosSumNR"==e.sensedValue}).map(function(e,t){return n.createElement("option",{key:t,value:e.sensedValue},e.sensedValue," ")})):n.createElement(n.Fragment,null,"No Alarm points created"),C&&n.createElement("a",{href:"#"+Z+"/"+Y+"/Alarms/OperationalAlarms/Device/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},n.createElement("i",{className:"fa fa-info-circle select alarm-icon","aria-hidden":"true"}))),n.createElement("h5",{className:" no-padding no-margin-color-textalign tooltipDashboard graphHeading "},n.createElement("a",{className:"col-md-5 sentence-break",href:"#"+Z+"/"+Y+"/Insights/Equipment/Graphs/WattNodeControl/"+Object(r.g)($.moncondevice),target:"_blank",rel:"noreferrer noopener"},B&&B.value?B.label:Q.length>0&&Q[0].rdfsLabel?Q[0].rdfsLabel:"No equipment assigned"),n.createElement("span",{className:"col-md-4 sentence-break"}," ","Pos. Energy Sum Non-resettable"),n.createElement("div",{className:"tooltiptextDashboard"},n.createElement("span",null,"Equipment: ",B&&B.value?B.label:"No equipment assigned to data point"," "),n.createElement("br",null),n.createElement("span",null,"Space: ",B&&B.deviceType?B.deviceType:"No space for equipment"," "),n.createElement("br",null),n.createElement("span",null,"Floor: ",Object(r.g)($.floorRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Zone: ",Object(r.g)($.zoneRdfsLabel)," "),n.createElement("br",null),n.createElement("span",null,"Device Rel. Equip.: ",null===Q||void 0===Q?void 0:Q.map(function(e,t){return e.rdfsLabel+(t<Q.length-1?", ":" ")})," "),n.createElement("br",null),n.createElement("span",null,"Device: ",Object(r.g)($.rdfsLabel)||"No device assigned"," "),n.createElement("br",null),n.createElement("span",null,"Device Space: ",Object(r.g)($.spaceRdfsLabel)," ")),n.createElement("span",{className:"sentence-break lastUpdated"},"Last: ",H)),c?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(s.a,{data:J&&(null===(o=_.columns)||void 0===o?void 0:o.length)>1?_:v,size:{height:300},axis:E,grid:L,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=v},2974:function(e,t,a){"use strict";var n=a(2),l=(a.n(n),a(743)),s=a(1012),i=a(772),o=a.n(i),r=a(760),u=(a.n(r),a(715)),m=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,s){function i(e){try{r(n.next(e))}catch(e){s(e)}}function o(e){try{r(n.throw(e))}catch(e){s(e)}}function r(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,o)}r((n=n.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var a,n,l,s,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(l=2&s[0]?n.return:s[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,s[1])).done)return l;switch(n=0,l&&(s=[2&s[0],l.value]),s[0]){case 0:case 1:l=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!l||s[1]>l[0]&&s[1]<l[3])){i.label=s[1];break}if(6===s[0]&&i.label<l[1]){i.label=l[1],l=s;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(s);break}l[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{a=l=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}},h=function(e){function t(t){var a=e.call(this,t)||this;return a.state={asisData:[],seasonList:[],graphData1:{x:"Date",columns:[],type:"bar"},grid1:{x:{lines:[{}]},y:{show:!0}},axis1:{x:{type:"timeseries",tick:{count:30,format:"%m-%d"}},y:{label:"kWh",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},graphData2:{x:"Date",columns:[],type:"bar"},grid2:{x:{lines:[{}]},y:{show:!0}},axis2:{x:{type:"timeseries",tick:{count:30,format:"%m-%d"}},y:{label:"kWh",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}},y2:{show:!0,label:"$",tick:{fit:!0,count:6,format:function(e){return parseFloat(e).toFixed(2)}}}},loading:!0,selectedSeason:""},a._fetchData=a._fetchData.bind(a),a}return m(t,e),t.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){return d(this,function(e){return this._fetchData(),[2]})})},t.prototype.fetchVeifyDetail=function(e){return c(this,void 0,void 0,function(){return d(this,function(e){return[2]})})},t.prototype._fetchData=function(){return c(this,void 0,void 0,function(){var e,t,a=this;return d(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,t=this.props.projectName,[4,Object(l.o)(e,"",t).then(function(e){return c(a,void 0,void 0,function(){var t,a,n,i,o,r,u,m,c,h,p,g,f,v,x=this;return d(this,function(d){switch(d.label){case 0:return e&&e[0]&&e[0].ontology?(t=[],0,0,0,0,a=[],n=e[0],[4,Object(l.l)(n.ontology)]):[3,7];case 1:if(!((i=d.sent())&&i.length>0))return[3,7];for((t=i.sort(function(e,t){return e.seasonSequence>t.seasonSequence?1:t.seasonSequence>e.seasonSequence?-1:0})).map(function(e){var t=e.analysisName+": "+(e.seasonType&&"both"==e.seasonType.toLocaleLowerCase().trim()?e.seasonType+": "+("cooling"==e.selectedAnalysis?"Cooling":"Heating"):e.seasonType);a.push({label:t,value:e.ontology})}),o=0;o<t.length;o++)r=t[o],r.totalConsumedEnergyASIS,r.totalConsumedEnergyECM,r.totalConsumedEnergyCostASIS,r.totalConsumedEnergyCostECM;return 0==n.measureAnalysis.length?n.measureAnalysis=[{staticSeasonName:"Summer",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value},{staticSeasonName:"Fall",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value},{staticSeasonName:"Winter",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value},{staticSeasonName:"Spring",selectedSeasonName:a[0].label,selectedSeasonOntology:a[0].value}]:n.measureAnalysis.length,u=[],m=[],t&&t.length>0?(c=[],h=[],(p=t.sort(function(e,t){return new Date(e.asisStartDate)>new Date(t.asisStartDate)?1:new Date(t.asisStartDate)>new Date(e.asisStartDate)?-1:0}))&&p.length>0?(g=p[0],[4,Object(l.k)(g.importDataASISOntology).then(function(e){u=e?e[0].fileData:[]})]):[3,6]):[3,7];case 2:return d.sent(),[4,Object(l.k)(g.importDataECMOntology).then(function(e){m=e?e[0].fileData:[]})];case 3:return d.sent(),[4,Object(s.c)(u,new Date(g.asisStartDate),new Date(g.asisEndDate),g.noaaStation.value,parseFloat(g.basepointCD),parseFloat(g.basepointHD),g.isMeasureFile)];case 4:return f=d.sent(),[4,Object(s.c)(m,new Date(g.ecmStartDate),new Date(g.ecmEndDate),g.noaaStation.value,parseFloat(g.basepointCD),parseFloat(g.basepointHD),g.isMeasureFile)];case 5:v=d.sent(),c.push.apply(c,f),h.push.apply(h,v),d.label=6;case 6:this.setState({seasonList:t,asisData:u},function(){x.energyConsumptionGraph()}),d.label=7;case 7:return[2]}})})}).catch(function(e){console.log(e)})];case 1:return n.sent(),[2]}})})},t.prototype.energyConsumptionGraph=function(){return c(this,void 0,void 0,function(){var e,t,a,n,l,s,i,o,r,m,c,h,p,g,f,v,x,V,y,b,w,E,L,H;return d(this,function(d){switch(d.label){case 0:e=this.state.asisData,t=this.state,a=t.graphData1,n=t.axis1,l=t.grid1,s=t.graphData2,i=t.axis2,o=t.grid2,r=new Date,m=new Date,r.setMonth(r.getMonth()-1),r.setHours(0,0,0,0),c=["ECM Energy Consumption (Metered)"],h=["Date"],p=["Asis Consumption (Projected)"],g=["Energy Saving"],f=["Energy Savings $ at 10.42 cents per unit"],v=["Tons CO2 emission reduction at 0.000709 tons per unit"],x=new Date(r),d.label=1;case 1:return x<=m?((V=new Date(x)).setHours(23,59,59,0),[4,Object(u.n)("michaels/5_125/wn_basicreg1",x,V,!1)]):[3,4];case 2:y=d.sent(),b=y[0],w=y[y.length-1],b&&w?c.push(""+(w.EnergyPosSum-b.EnergyPosSum)):c.push("0"),h.push(new Date(x)),d.label=3;case 3:return x.setDate(x.getDate()+1),[3,1];case 4:for(E=function(t){var a=new Date(h[t]),n=0;e.filter(function(e){if(+e.Date.split("/")[1]==a.getDate())return e}).forEach(function(e){n+=+e.ValueSum}),p.push(n),l.x.lines.push({value:a,class:"grid4"}),o.x.lines.push({value:a,class:"grid4"})},L=1;L<h.length-1;L++)E(L);for(L=1;L<p.length-1;L++)+p[L]&&+c[L]?(H=+p[L]-+c[L],g.push(H),f.push(.01042*H),v.push(709e-6*H)):(g.push(0),f.push(0));return a={x:"Date",columns:[h,c,p],type:"bar"},s={x:"Date",columns:[h,g,f],groups:[["Energy Saving"]],axes:{"Energy Savings $ at 10.42 cents per unit":"y"},type:"bar",types:{"Energy Savings $ at 10.42 cents per unit":"line"}},n.y.label="KwH",i.y.tick.values=[-2e3,-1e3,0,1e3,2e3],i.y.tick.max=2e3,i.y.tick.min=-2e3,i.y2.tick.values=[-40,-20,0,20,40],i.y2.tick.max=40,i.y2.tick.min=-40,this.setState({loading:!1,graphData1:a,axis1:n,grid1:l,graphData2:s,grid2:o}),[2]}})})},t.prototype.render=function(){var e=this.state,t=e.loading,a=e.graphData1,l=e.grid1,s=e.axis1,i=e.graphData2,r=e.axis2,u=e.grid2;return n.createElement(n.Fragment,null,n.createElement("div",{className:"row col-md-12 device-graphs mt-22 ",id:"divGraphs"},t?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(o.a,{data:a,size:{height:500},axis:s,grid:l,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})),n.createElement("div",{className:"row col-md-12 device-graphs mt-22 ",id:"divGraphs"},t?n.createElement("div",{className:"graph-box-loader"},n.createElement("div",{className:"loader center-object"})):n.createElement(o.a,{data:i,size:{height:500},axis:r,grid:u,legend:{position:"bottom"},point:{focus:{expand:{r:3}},r:0}})))},t}(n.Component);t.a=h}});