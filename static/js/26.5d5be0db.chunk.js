webpackJsonp([26,67],{1258:function(e,t,n){"use strict";var o=n(2),a=(n.n(o),n(808)),r=n(79),i=n(10),c=n(11),l=n(885),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={floorsList:[],locationList:[],newFloor:Object(),newLocation:{ontology:"",buildingName:n.props.buildingName,floor:"",type:"",name:"",rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""},selectedFloorLocation:{selectedFloor:"",selectedLocation:""}},n._getFloorsList=n._getFloorsList.bind(n),n._getLocationsList=n._getLocationsList.bind(n),n.handleNewFloorChange=n.handleNewFloorChange.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.handleLocationChange=n.handleLocationChange.bind(n),n.createFloor=n.createFloor.bind(n),n.updateSpace=n.updateSpace.bind(n),n}return s(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._getFloorsList()]:[3,3];case 1:return t.sent(),[4,this._getLocationsList(this.state.selectedFloorLocation.selectedFloor)];case 2:t.sent(),(e=this.props.selectedFloorLocation)&&this.setState({selectedFloorLocation:e}),t.label=3;case 3:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){return m(this,void 0,void 0,function(){var t=this;return u(this,function(n){return e.selectedFloorLocation&&this.setState({selectedFloorLocation:e.selectedFloorLocation},function(){t._getFloorsList(),t._getLocationsList(t.state.selectedFloorLocation.selectedFloor)}),[2]})})},t.prototype._getFloorsList=function(){return m(this,void 0,void 0,function(){var e=this;return u(this,function(t){switch(t.label){case 0:return[4,Object(a.f)(this.props.buildingName).then(function(t){e.setState({floorsList:t})})];case 1:return t.sent(),[2]}})})},t.prototype._getLocationsList=function(e){return m(this,void 0,void 0,function(){var t,n=this;return u(this,function(o){switch(o.label){case 0:return t=this.props.buildingName,[4,Object(r.c)(e,t).then(function(e){n.setState({locationList:e})})];case 1:return o.sent(),[2]}})})},t.prototype.handleNewFloorChange=function(e){var t=this.state.newFloor;t.rdfsLabel=e,this.setState({newFloor:t})},t.prototype.handleFloorChange=function(e){return m(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return"newFloor"!==e?[3,1]:(document.getElementById("btnShowFloorForm").click(),[3,4]);case 1:return""===e?[3,4]:(t=this.state.selectedFloorLocation,e===t.selectedFloor?[3,3]:(t.selectedFloor=e,t.selectedLocation="",this.setState({selectedFloorLocation:t}),[4,this._getLocationsList(e)]));case 2:n.sent(),n.label=3;case 3:this.props.onLocationChange(t),n.label=4;case 4:return[2]}})})},t.prototype.handleLocationChange=function(e){return m(this,void 0,void 0,function(){var t;return u(this,function(n){return t=this.state.selectedFloorLocation,"addLocation"===e?(document.getElementById("closeDeviceForm").click(),document.getElementById("btnShowSpaceFormDialog").click()):t.selectedLocation=e,this.setState({selectedFloorLocation:t}),this.props.onLocationChange(t),[2]})})},t.prototype.createFloor=function(){return m(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return(e=this.state.newFloor)&&e.rdfsLabel?(e.floor=e.floor?e.floor:Object(c.j)(7),[4,Object(a.b)(this.props.buildingName,e)]):[3,4];case 1:return t.sent(),[4,this._getFloorsList()];case 2:return t.sent(),[4,this.handleFloorChange(e.floor)];case 3:t.sent(),setTimeout(function(){document.getElementById("btnShowSpaceFormDialog").click()},1e3),t.label=4;case 4:return[2]}})})},t.prototype.updateSpace=function(e){return m(this,void 0,void 0,function(){var t;return u(this,function(n){switch(n.label){case 0:return[4,this._getLocationsList(e.floor)];case 1:return n.sent(),(t=this.state.selectedFloorLocation).selectedFloor=e.floor,t.selectedLocation=e.name,this.setState({selectedFloorLocation:t}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.isDisabled,a=t.buildingName,r=t.instance,c=this.state,s=c.selectedFloorLocation,m=c.floorsList,u=c.locationList,d=c.newFloor;return o.createElement("div",{className:"row",style:{paddingTop:"10px"}},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"floor"},"Floor:"))),o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"form-group"},o.createElement("select",{id:"floor",className:"form-control",disabled:n,value:s.selectedFloor,onChange:function(t){return e.handleFloorChange(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Floor"),o.createElement("option",{value:"newFloor",key:-1},"New Floor"),o.createElement("hr",null),m.map(function(e,t){return o.createElement("option",{value:e.ontology.value,key:t},e.rdfsLabel.value," ")})),o.createElement("button",{type:"button",id:"btnShowFloorForm",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#floorFormDialog",style:{display:"none"}},"."),o.createElement(i.a,{id:"floorFormDialog",onSaveButtonClick:function(){e.createFloor()},saveButtonText:"Save and Create Space",disableSaveButton:!1},o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 center"},o.createElement("label",{htmlFor:"newfloor"},"Floor:")),o.createElement("div",{className:"col-md-7"},o.createElement("input",{id:"newfloor",type:"text",className:"form-control",value:d.rdfsLabel,onChange:function(t){return e.handleNewFloorChange(t.target.value)}})))))),o.createElement("div",{className:"col-md-1"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"})))),o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"space"},"Space:"))),o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"form-group"},o.createElement("select",{id:"space",className:"form-control",disabled:n,value:s.selectedLocation,onChange:function(t){return e.handleLocationChange(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Location"),o.createElement("option",{value:"addLocation",key:-1},"New Space"),o.createElement("hr",null),u.map(function(e,t){return o.createElement("option",{value:e.ontology.value,key:t},e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-1"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"})))),o.createElement(l.a,{updateSpace:this.updateSpace,closeDailogBtnID:"btnShowSpaceFormDialog",floor:s.selectedFloor,buildingName:a,instance:r}))},t}(o.Component);t.a=d},1259:function(e,t,n){"use strict";var o=n(2),a=(n.n(o),n(10)),r=n(30),i=n(82),c=n(9),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_monconDeviceTypes:[],newDeviceType:"",Moncon:Object()},n._fetchMonConDeviceTypes=n._fetchMonConDeviceTypes.bind(n),n.saveEquipmentType=n.saveEquipmentType.bind(n),n.onchangeEquipmentType=n.onchangeEquipmentType.bind(n),n.handleMonConDeviceTypeChange=n.handleMonConDeviceTypeChange.bind(n),n}return l(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({Moncon:e.Moncon})},t.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchMonConDeviceTypes()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype._fetchMonConDeviceTypes=function(){return s(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return Object(r.a)(!0),[4,Object(i.f)().then(function(t){e.setState({_monconDeviceTypes:t})}).catch(function(e){return e})];case 1:return t.sent(),Object(r.a)(!1),[2]}})})},t.prototype.onchangeEquipmentType=function(e){var t=e.target.value;this.setState({newDeviceType:t})},t.prototype.saveEquipmentType=function(){return s(this,void 0,void 0,function(){var e,t,n,o=this;return m(this,function(a){switch(a.label){case 0:return e=this.state.Moncon,t=this.state.newDeviceType,n=t.replace(new RegExp(" ","g"),""),t="",Object(r.a)(!0),[4,Object(i.g)(n,this.props.buildingName).then(function(e){}).catch(function(e){return e})];case 1:return a.sent(),e.monitoringControlDeviceType=n,this.setState({Moncon:e,newDeviceType:t},function(){return s(o,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,this._fetchMonConDeviceTypes()];case 1:return e.sent(),[2]}})})}),Object(r.a)(!1),this.props.handleMonConDeviceTypeChange(e),[2]}})})},t.prototype.handleMonConDeviceTypeChange=function(e){var t=this.state.Moncon,n=e.target.value;"newDeviceType"==n?document.getElementById("newEquipTypeDailogebtn").click():(t.monitoringControlDeviceType=n,this.props.handleMonConDeviceTypeChange(t)),this.setState({Moncon:t})},t.prototype.render=function(){var e=this,t=this.props.isView,n=this.state,r=n._monconDeviceTypes,i=n.newDeviceType,l=n.Moncon,s=JSON.parse(c.a.getItem("user"));return o.createElement("div",{className:""},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"moncontype"},"Monitoring/Control Device Type"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("select",{className:"form-control",disabled:t,id:"moncontype",value:l.monitoringControlDeviceType,onChange:function(t){return e.handleMonConDeviceTypeChange(t)}},o.createElement("option",{value:"",key:-2},"Select Monitoring"),r&&r.map(function(e,t){return o.createElement("option",{key:t,value:e.moncon.value},e.moncon.value," ")}),"1"==s.role&&o.createElement("option",{value:"newDeviceType"},"Add New Device Type ")))),o.createElement("div",{className:"colmd-12"},o.createElement("button",{id:"newEquipTypeDailogebtn",type:"button","data-toggle":"modal","data-target":"#AddTypeDailogeBox",className:"btn btn-dark hidden"}),o.createElement(a.a,{id:"AddTypeDailogeBox",heading:"Add New Device Type",saveButtonText:"Done",onSaveButtonClick:function(){e.saveEquipmentType()},disableSaveButton:!i},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"New Device Type:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:i,onChange:function(t){e.onchangeEquipmentType(t)},type:"text",className:"form-control"})," "))))))))))},t}(o.Component);t.a=u},1260:function(e,t,n){"use strict";var o=n(2),a=(n.n(o),n(10)),r=n(30),i=n(37),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={intesisHome_Devices:[],filterString:""},n._fetchIntesisInfo=n._fetchIntesisInfo.bind(n),n}return c(t,e),t.prototype._fetchIntesisInfo=function(){return l(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return Object(r.a)(!0),[4,Object(i.u)(this.props.buildingName)];case 1:return(e=t.sent())&&e.devices&&this.setState({intesisHome_Devices:e.devices}),Object(r.a)(!1),[2]}})})},t.prototype.handleFilterStringChange=function(e){this.setState({filterString:e})},t.prototype.render=function(){var e=this,t=(this.props,this.state),n=t.intesisHome_Devices,r=t.filterString;return o.createElement("div",{className:"col-md-1 col-sm-1 padding-5"},o.createElement("button",{className:"btn btn-xs btn-secondary btn-fill","data-toggle":"modal","data-target":"#IntesisHomeDeviceList",type:"button",title:"View available IntesisHome devices",onClick:function(){return l(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._fetchIntesisInfo()];case 1:return e.sent(),[2]}})})}},o.createElement("i",{className:"fa fa-list"})),o.createElement(a.a,{id:"IntesisHomeDeviceList",heading:"IntesisHome Device List",saveButtonText:"Close",disableSaveButton:!1},o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-9"},o.createElement("div",{className:"col-md-3 padding-5"},o.createElement("label",null,"Filters: ")),o.createElement("div",{className:"col-md-9"},o.createElement("input",{className:"form-control",type:"text",name:"filter",id:"filter",value:r,onChange:function(t){return e.handleFilterStringChange(t.target.value)},title:"Search filter..."}))),o.createElement("div",{className:"col-md-3 padding-5"},o.createElement("button",{className:"btn btn-sm btn-secondary btn-fill pull-right",type:"button",title:"Configure available IntesisHome devices to the API Credentials",onClick:function(){return l(e,void 0,void 0,function(){return s(this,function(e){return window.open("https://user.intesishome.com/oauth2/devices?scope=unused&state=asdflkjlaks&redirect_uri=google.com&client_id=my2wy-k2d5b-pmkgp-dbjr6-1ze2j"),[2]})})}},o.createElement("i",{className:"fa fas fa-tasks"})," Configure Devices"))),o.createElement("hr",null),n&&n.filter(function(e){return-1!=e.name.toLowerCase().indexOf(r.toLowerCase())}).map(function(e){return o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{htmlFor:""},"Device Name:"),o.createElement("br",null),o.createElement("b",null,e.name)),o.createElement("div",{className:"col-md-7"},o.createElement("label",{htmlFor:""},"Device ID:"),o.createElement("br",null),o.createElement("b",null,e.device_id)))})))},t}(o.Component);t.a=m},684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=(n.n(o),n(30)),r=n(31),i=n(10),c=n(879),l=n(15),s=n(153),m=n(6),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={archive:[],versionToRestore:Object(),historianArchiveDifferences:[],sourceTimestamp:Object(),targetTimestamp:Object(),user:"",peopleList:Object()},n.getHistorianArchive=n.getHistorianArchive.bind(n),n.restoreHistorian=n.restoreHistorian.bind(n),n.getPeopleList=n.getPeopleList.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.props.buildingName&&this.props.instance&&this.props.ObjectId?(Object(a.a)(!0),[4,this.getHistorianArchive()]):[3,3];case 1:return e.sent(),[4,this.getPeopleList()];case 2:e.sent(),Object(a.a)(!1),e.label=3;case 3:return[2]}})})},t.prototype.getPeopleList=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,Object(s.m)(this.props.buildingName)];case 1:return e=t.sent(),this.setState({peopleList:e}),[2]}})})},t.prototype.getHistorianArchive=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,Object(c.a)(this.props.ObjectId)];case 1:return e=t.sent(),this.setState({archive:e}),[2]}})})},t.prototype.difference=function(e,t){return d(this,void 0,void 0,function(){var n,o,a,r,i,c;return p(this,function(l){switch(l.label){case 0:return n=this.state.peopleList,e&&e.model&&t&&t.model?(o=JSON.parse(e.model),a=JSON.parse(t.model),[4,this.getDifference(o,a)]):[3,2];case 1:r=l.sent(),i=n.find(function(t){return Object(m.g)(t.contact)==e.createdBy}),c=i&&i.name?Object(m.g)(i.name):"",this.setState({historianArchiveDifferences:r,sourceTimestamp:e.timestamp,targetTimestamp:t.timestamp,user:c},function(){document.getElementById("btnShowDifference").click()}),l.label=2;case 2:return[2]}})})},t.prototype.getDifference=function(e,t,n){return d(this,void 0,Promise,function(){var o,a=this;return p(this,function(r){return o=[],Object.keys(e).forEach(function(r){return d(a,void 0,void 0,function(){var a,i,c,l;return p(this,function(s){switch(s.label){case 0:return a=e&&e[r]?e[r]:"",i=t&&t[r]?t[r]:"","object"!=typeof a?[3,3]:JSON.stringify(a)==JSON.stringify(i)?[3,2]:(c=isNaN(r)?r:n||"",[4,this.getDifference(a,i,c)]);case 1:l=s.sent(),o.push.apply(o,l),s.label=2;case 2:return[3,4];case 3:a!=i&&"value"!=r&&o.push({key:n?n+("label"!=r?" - "+r:""):r,source:a||"",target:i||""}),s.label=4;case 4:return[2]}})})}),[2,o]})})},t.prototype.restoreHistorian=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return(e=this.state.versionToRestore)&&e.model&&this.props.restoreSelectedVersion(e),[4,this.getHistorianArchive()];case 1:return t.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props.instance,n=this.state,a=n.archive,c=n.versionToRestore,s=n.historianArchiveDifferences,m=n.sourceTimestamp,u=n.targetTimestamp,d=n.user;return o.createElement(l.AppContext.Consumer,null,function(n){return o.createElement("div",{className:"card",id:"HistorianArchiveList"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"content"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("h3",null,"Historian Archive"))),o.createElement("br",null),o.createElement("div",{className:"row no-margin"},o.createElement("div",{className:"hidden-xs col-md-10 col-md-offset-1 col-md-offset-right-1 no-padding cell_border",style:{marginBottom:"0px"}},o.createElement("div",{className:"col-md-12 bgcol trim-data headingText",style:{padding:"10px"}},"Timestamp"))),o.createElement("div",{className:"dataCard"},o.createElement("div",{className:"hidden"}),a&&a.length>0&&a.map(function(t,n){return o.createElement("div",{className:"col-md-10 cell_border no-padding col-md-offset-1 col-md-offset-right-1 clickable"},o.createElement("div",{className:"row no-margin hover"},o.createElement("div",{className:"col-md-4 padding-10"},o.createElement("span",{className:"hidden visible-xs-inline headingText"},"Timestamp"),"  ",t.timestamp.ToEasternDateTime()),o.createElement("div",{className:"col-md-8"},0!=n&&o.createElement("button",{className:"btn btn-sm btn-success btn-fill pull-right margin-5 mr-0",title:"Restore this version",onClick:function(n){e.setState({versionToRestore:t},function(){document.getElementById("btnConfirmRestore").click()})}},"Restore this version  "),n!=a.length-1&&o.createElement("button",{className:"btn btn-sm btn-primary btn-fill pull-right margin-5 mr-0",title:"Difference with previous version",onClick:function(o){n!=a.length-1&&e.difference(t,a[n+1])}},"Difference with previous version   "),0!=n&&o.createElement("button",{className:" btn btn-sm btn-primary btn-fill pull-right margin-5 mr-0",title:"Difference with latest version",onClick:function(o){0!=n&&e.difference(t,a[0])}},"Difference with latest version   "))))})),o.createElement("button",{id:"btnConfirmRestore",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmRestoreDialog"},"."),o.createElement(r.a,{instance:t,id:"ConfirmRestoreDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:'Are you sure to Restore "'+(c&&c.timestamp?c.timestamp.ToEasternDateTime():"")+'" Version?',heading:"Confirm...",onConfirmButtonClick:function(){e.restoreHistorian()}}),o.createElement("button",{type:"button",id:"btnShowDifference",className:"hidden","data-toggle":"modal","data-target":"#ShowDifference"}," "),o.createElement(i.a,{id:"ShowDifference",heading:"Difference",saveButtonText:"Done",onSaveButtonClick:function(){},isEditForm:!0},o.createElement("div",{className:"scroll-y",style:{maxHeight:500}},o.createElement("div",{className:"container-fluid",style:{paddingLeft:"0px"}},o.createElement("div",{className:"content",style:{paddingTop:"0px"}},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12",style:{margin:"0px 10px"}},o.createElement("p",{className:"padding-5 small pull-left cell_border hover",style:{borderRadius:"5px",background:"rgb(220 220 220 / 21%)",color:"black"}},o.createElement("b",{style:{color:"gray"}},"Updated By: \xa0")," ",d,", (",new Date(m&&m).ToEasternDateTime(),")")),s&&s.length>0&&m&&u&&o.createElement("div",{className:"col-md-12",style:{margin:"10px"}},o.createElement("div",{className:"col-md-6 cell_border no-padding center",style:{background:"#dcdcdc94",borderRadius:"50px"}},o.createElement("h4",{className:"margin-10"},m&&m.ToEasternDateTime())),o.createElement("div",{className:"col-md-6 cell_border no-padding center",style:{background:"gainsboro",borderRadius:"50px"}},o.createElement("h4",{className:"margin-10"},u&&u.ToEasternDateTime()))),s&&s.length>0&&s.map(function(e){return o.createElement("div",{className:"col-md-12",style:{margin:"10px"}},o.createElement("div",{className:"col-md-12 no-padding cell_border border-radius"},o.createElement("div",{className:"col-md-12 padding-10 center cell_border",style:{background:"ghostwhite"}},o.createElement("h5",{className:"no-margin",style:{textTransform:"uppercase",padding:"2px"}},o.createElement("b",null,"Attribute:")," ",o.createElement("span",{className:"text-primary"},e.key))),o.createElement("div",{className:"col-md-6 padding-10 center cell_border",style:{background:"#dcdcdc94"}},e.source?e.source:"-"),o.createElement("div",{className:"col-md-6 padding-10 center cell_border",style:{background:"gainsboro"}},e.target?e.target:"-")))})))))))),o.createElement("br",null),o.createElement("br",null),o.createElement("br",null),o.createElement("br",null),o.createElement("br",null),o.createElement("br",null))))})},t}(o.Component);t.default=h},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=(n.n(o),n(6)),r=n(15),i=n(1258),c=n(80),l=n(79),s=n(82),m=n(11),u=n(920),d=n(154),p=n(1259),h=n(30),f=n(1260),v=n(9),g=n(37),b=n(172),E=n(173),y=n(684),N=n(879),w=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=this&&this.__assign||function(){return(C=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},L=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",computerControllerIPAddress:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""}},oldModel:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",computerControllerIPAddress:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""}},_spaces:[],_monconDeviceTypes:[],newLocation:{ontology:"",buildingName:n.props.buildingName,floor:"",type:"",name:"",rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""},SensorList:[],HVAC_List:[],Equipment_List:[],newEquipmentType:"",EquipmentList:[],ComputingDevice_List:[],NetworkDevice_List:[],isHistorian:!1},n.getHVAC_List=n.getHVAC_List.bind(n),n.getEquipment_List=n.getEquipment_List.bind(n),n.handleLocationChange=n.handleLocationChange.bind(n),n.handleMonConDeviceTypeChange=n.handleMonConDeviceTypeChange.bind(n),n.handleLightningTypeChange=n.handleLightningTypeChange.bind(n),n.handleManufacturerChange=n.handleManufacturerChange.bind(n),n.handleModelChange=n.handleModelChange.bind(n),n.handleConnectionTypeChange=n.handleConnectionTypeChange.bind(n),n.getComputingDevices=n.getComputingDevices.bind(n),n.getNetworkDevices=n.getNetworkDevices.bind(n),n.handleNotesChange=n.handleNotesChange.bind(n),n.handleLocationChange=n.handleLocationChange.bind(n),n.handleWirelessConfigChange=n.handleWirelessConfigChange.bind(n),n.handleNewLocationChange=n.handleNewLocationChange.bind(n),n.handleMultiSensorChange=n.handleMultiSensorChange.bind(n),n.handleMultiStrategiesChange=n.handleMultiStrategiesChange.bind(n),n.onChangeGraphURL=n.onChangeGraphURL.bind(n),n.handleExistingRadio=n.handleExistingRadio.bind(n),n.verifyDeviceID=n.verifyDeviceID.bind(n),n.checkDeviceID=n.checkDeviceID.bind(n),n.handleDeviceNameChange=n.handleDeviceNameChange.bind(n),n.handleDeviceChange=n.handleDeviceChange.bind(n),n.getDevices=n.getDevices.bind(n),n.handleEquipmentList=n.handleEquipmentList.bind(n),n.onChangeComputingDevice=n.onChangeComputingDevice.bind(n),n.onChangeNetworkDevice=n.onChangeNetworkDevice.bind(n),n.onChangeControllerIpAddress=n.onChangeControllerIpAddress.bind(n),n.onChangeComputingControllerIpAddress=n.onChangeComputingControllerIpAddress.bind(n),n.restoreSelectedVersion=n.restoreSelectedVersion.bind(n),n}return w(t,e),t.prototype.componentDidMount=function(){return L(this,void 0,void 0,function(){var e,t,n,o,a,r,i;return T(this,function(c){switch(c.label){case 0:return Object(h.a)(!0),e=this.props,t=e.deviceName,n=void 0===t?"":t,o=e.buildingName,a=e.isInsight,o?(this.getDevices(),[4,this.getHVAC_List()]):[3,7];case 1:return c.sent(),[4,this.getEquipment_List()];case 2:return c.sent(),[4,this.fetchSpaces()];case 3:return c.sent(),r=Object(),a&&(r.monitoringControlDeviceType="Thermostat",r.connectionType="Wireless"),n&&n.length>0?[4,Object(s.d)(n,o)]:[3,5];case 4:return r=c.sent(),[3,6];case 5:i=JSON.parse(v.a.getItem("user")),r.createdby=i.name,r.wirelessConfig=Object(),c.label=6;case 6:r&&(r.rdfsLabel&&-1!=r.rdfsLabel.toLowerCase().indexOf(r.deviceID)&&(r.rdfsLabel=r.rdfsLabel.split("-").length>0?r.rdfsLabel.split("-")[1]:r.rdfsLabel),this.setState({Moncon:r,oldModel:C({},r)},function(){})),c.label=7;case 7:return this.getComputingDevices(),this.getNetworkDevices(),[4,this.verifyDeviceID()];case 8:return c.sent(),Object(h.a)(!1),console.log(this.state.Moncon),[2]}})})},t.prototype.getDevices=function(){return L(this,void 0,void 0,function(){var e,t,n,o;return T(this,function(r){switch(r.label){case 0:return e=this.props.buildingName,t=[],e?[4,Object(g.s)(e)]:[3,2];case 1:(n=r.sent())&&n.length>0&&(o=Object(),n.map(function(e){o={value:Object(a.g)(e.moncondevice),label:Object(a.g)(e.rdfsLabel)},t.push(o)})),r.label=2;case 2:return this.setState({SensorList:t}),[2]}})})},t.prototype.verifyDeviceID=function(){return L(this,void 0,void 0,function(){var e;return T(this,function(t){switch(t.label){case 0:return""!=(e=this.state.Moncon).deviceID&&e.deviceID?[3,2]:[4,this.checkDeviceID()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.checkDeviceID=function(){return L(this,void 0,void 0,function(){var e,t,n=this;return T(this,function(o){switch(o.label){case 0:return e=this.state.Moncon,t=Object(m.i)(6).toString(),this.props.buildingName?[4,Object(s.a)(t,this.props.buildingName).then(function(n){n&&n[0]?e.deviceID="":e.deviceID=t}).catch(function(e){return e})]:[3,2];case 1:o.sent(),this.setState({Moncon:e},function(){return L(n,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:return[4,this.verifyDeviceID()];case 1:return e.sent(),[2]}})})}),o.label=2;case 2:return[2]}})})},t.prototype.getHVAC_List=function(){return L(this,void 0,void 0,function(){var e=this;return T(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,Object(c.e)(this.props.buildingName).then(function(t){for(var n=0;n<t.length;n++){var o=t[n];Object(a.g)(o.ontology)&&Object(a.g)(o.rdfsLabel)&&Object(m.p)(Object(a.g)(o.ontology),Object(a.g)(o.rdfsLabel))}e.setState({HVAC_List:t})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.getEquipment_List=function(){return L(this,void 0,void 0,function(){var e,t;return T(this,function(n){switch(n.label){case 0:return this.props.buildingName?[4,Object(c.f)(this.props.buildingName)]:[3,2];case 1:e=n.sent(),t=e&&e.length>0&&e.map(function(e){return{value:Object(a.g)(e.ontology),label:Object(a.g)(e.rdfsLabel)}}),this.setState({EquipmentList:t}),n.label=2;case 2:return[2]}})})},t.prototype.fetchSpaces=function(){return L(this,void 0,void 0,function(){var e=this;return T(this,function(t){return Object(l.g)(this.props.buildingName).then(function(t){e.setState({_spaces:t})}).catch(function(e){return e}),[2]})})},t.prototype.handleNewLocationChange=function(e){this.setState({newLocation:e})},t.prototype.handleMonConDeviceTypeChange=function(e){this.setState({Moncon:e})},t.prototype.handleDeviceNameChange=function(e){var t=this.state.Moncon;t.rdfsLabel=e,this.setState({Moncon:t})},t.prototype.handleEquipmentList=function(e){if(!this.props.isView){var t=this.state.Moncon;t.relatedEquipment=e,this.setState({Moncon:t})}},t.prototype.handleDeviceChange=function(e){var t=this.state.Moncon;t[e.target.name]=e.target.value,this.setState({Moncon:t})},t.prototype.handleDeviceIDChange=function(e){var t=this.state.Moncon;t.deviceID=e,this.setState({Moncon:t})},t.prototype.handleManufacturerChange=function(e){var t=this.state.Moncon;t.manufacturer=e,this.setState({Moncon:t})},t.prototype.handleModelChange=function(e){var t=this.state.Moncon;t.model=e,this.setState({Moncon:t})},t.prototype.handleBoardAddressChange=function(e){var t=this.state.Moncon;t.boardAddress=e,this.setState({Moncon:t})},t.prototype.handleLocationChange=function(e){var t=this.state.Moncon;t.location=e.selectedLocation,t.floor=e.selectedFloor},t.prototype.handleLightningTypeChange=function(e){var t=this.state.Moncon;t.relayLightingType=e,this.setState({Moncon:t})},t.prototype.handleConnectionTypeChange=function(e){var t=this.state.Moncon;t.connectionType=e,this.setState({Moncon:t})},t.prototype.onChangeComputingDevice=function(e){var t=this,n=this.state.Moncon;n.computingDevice=e.target.value,this.setState({Moncon:n},function(){t.onChangeControllerIpAddress()})},t.prototype.onChangeComputingControllerIpAddress=function(e){var t=this.state.Moncon;t.computerControllerIPAddress=e.target.value,this.setState({Moncon:t},function(){})},t.prototype.onChangeNetworkDevice=function(e){var t=this.state.Moncon;t.networkDevice=e.target.value,this.setState({Moncon:t},function(){})},t.prototype.onChangeControllerIpAddress=function(){var e=this.state,t=e.Moncon,n=e.ComputingDevice_List;if(t.computingDevice){var o=n.find(function(e){return Object(a.g)(e.ontology)==t.computingDevice}).controllerIpAddress;t.wirelessConfig.controllerIPAddress=Object(a.g)(o),this.setState({Moncon:t})}},t.prototype.getComputingDevices=function(){return L(this,void 0,void 0,function(){var e;return T(this,function(t){switch(t.label){case 0:return[4,Object(b.b)()];case 1:return e=t.sent(),this.setState({ComputingDevice_List:e}),[2]}})})},t.prototype.getNetworkDevices=function(){return L(this,void 0,void 0,function(){var e;return T(this,function(t){switch(t.label){case 0:return[4,Object(E.b)()];case 1:return e=t.sent(),this.setState({NetworkDevice_List:e}),[2]}})})},t.prototype.handleNotesChange=function(e){var t=this.state.Moncon;t.notes=e,this.setState({Moncon:t})},t.prototype.handleWirelessConfigChange=function(e){var t=this.state.Moncon,n=e.target.name;t.wirelessConfig[""+n]=e.target.value,this.setState({Moncon:t})},t.prototype._saveMoncon=function(e){return L(this,void 0,void 0,function(){var t,n,o,a,r,i,c,l,u,d;return T(this,function(p){switch(p.label){case 0:return t=this.state,n=t.Moncon,o=t.oldModel,a=this.props,r=a.instance,i=a.buildingName,c=a.isEdit,l=JSON.parse(v.a.getItem("user")),n?(n.deviceName=n&&n.deviceName?n.deviceName:Object(m.j)(7),n.createdby||(n.createdby=l.name),Object(h.a)(!0),n.deviceName?n.onitUrlLink=window.location.origin+"/#"+r+"/"+i+"/Point/EditDevice/"+n.deviceName:n.onitUrlLink=window.location.origin+"/#"+r+"/"+i+"/Point/EditDevice/",-1!=n.monitoringControlDeviceType.toLowerCase().indexOf("ceiling")&&-1==n.rdfsLabel.toLowerCase().indexOf(n.deviceID)&&(n.rdfsLabel=n.deviceID+"-"+n.rdfsLabel),u=void 0,d=void 0,e?(u=e||n,d=n):(u=n,d=c?o:null),[4,Object(s.b)(u,i,this.props.isEdit)]):[3,2];case 1:p.sent(),Object(N.b)(u.deviceName,u,d,l.contact),this.props.getNewDeviceLabel&&this.props.getNewDeviceLabel(n.deviceName),Object(m.p)(n.deviceName,n.rdfsLabel),Object(h.a)(!1),p.label=2;case 2:return document.getElementById("AddDeviceDailogeButton")?document.getElementById("AddDeviceDailogeButton").click():window.history.back(),[2]}})})},t.prototype.handleMultiSensorChange=function(e){var t=this.state.Moncon;t.sensors=e,this.setState({Moncon:t})},t.prototype.handleMultiStrategiesChange=function(e){var t=this.state.Moncon;t.strategy=e,this.setState({Moncon:t})},t.prototype.onChangeGraphURL=function(e){var t=this.state.Moncon;t.graphURL=e,this.setState({Moncon:t})},t.prototype.handleExistingRadio=function(e){var t=this.state.Moncon;t.isExisting=e,this.setState({Moncon:t})},t.prototype.restoreSelectedVersion=function(e){return L(this,void 0,void 0,function(){var t;return T(this,function(n){switch(n.label){case 0:return e&&e.model?(t=JSON.parse(e.model),[4,this._saveMoncon(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.Moncon,c=t.SensorList,l=t.EquipmentList,s=t.ComputingDevice_List,m=t.NetworkDevice_List,h=t.isHistorian,g=this.props,b=g.isFromPoint,E=void 0!==b&&b,N=g.instance,w=this.props,C=w.isInsight,L=w.buildingName,T=w.isView,O=w.isEdit,D=JSON.parse(v.a.getItem("user")),S=n.floor&&n.location&&n.rdfsLabel&&!0,_=n&&n.monitoringControlDeviceType&&-1!=n.monitoringControlDeviceType.toLowerCase().indexOf("intesis");return o.createElement("div",{className:"content"},o.createElement("div",{className:"container-fluid"},o.createElement(r.AppContext.Consumer,null,function(t){return o.createElement(o.Fragment,null,h&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",style:{marginLeft:3,marginTop:5},onClick:function(){e.setState({isHistorian:!1})}}," Go To Back")),o.createElement("div",{className:"col-md-12"},o.createElement("br",null))),h&&o.createElement(y.default,{buildingName:L,instance:N,ObjectId:n.deviceName,restoreSelectedVersion:e.restoreSelectedVersion}),!h&&o.createElement("div",{className:"card"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"content"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(){e.setState({isHistorian:!0})}}," ",o.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," Historian Archive"))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"devicename"},C?"Insight":"Device"," Name"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"devicename",disabled:T,className:"form-control",value:n.rdfsLabel,onChange:function(t){return e.handleDeviceNameChange(t.target.value)}}))),o.createElement("div",{className:"col-md-1 col-sm-3"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"}))))),(D&&"1"==D.role||D.name==n.createdby)&&o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"adminPassword"},C?"Insight":"Device"," Admin Password"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text",id:"adminPassword",disabled:T,className:"form-control",value:n.adminPassword,name:"adminPassword",onChange:function(t){return e.handleDeviceChange(t)}}))),o.createElement("div",{className:"col-md-1 col-sm-3"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"deviceID"},C?"Insight":"Device"," ID"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"deviceID",disabled:!_,className:"form-control",value:n.deviceID,onChange:function(t){return e.handleDeviceIDChange(t.target.value)}}))),_&&o.createElement(f.a,{buildingName:L}))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"computingdevice"},"Connected Computing Device"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("select",{className:"form-control",id:"computingdevice",disabled:T,value:n.computingDevice,onChange:function(t){e.onChangeComputingDevice(t)}},o.createElement("option",{value:"",key:-2},"Select Computing Device"),s&&s.map(function(e,t){return o.createElement("option",{value:Object(a.g)(e.ontology)},Object(a.g)(e.name))})))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"networkdevice"},"Networking Device"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("select",{className:"form-control",id:"networkdevice",value:n.networkDevice,disabled:T,onChange:function(t){e.onChangeNetworkDevice(t)}},o.createElement("option",{value:"",key:-2},"Select Network Device"),m&&m.map(function(e,t){return o.createElement("option",{value:Object(a.g)(e.ontology)},Object(a.g)(e.name))})))))),o.createElement("div",{className:"row "},o.createElement("div",{className:"col-md-12"},o.createElement(p.a,{buildingName:L,Moncon:n,isEdit:O,isView:T,handleMonConDeviceTypeChange:e.handleMonConDeviceTypeChange}),o.createElement("div",{className:"col-md-1 col-sm-3"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"}))))),n.monitoringControlDeviceType&&(-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("relay")||-1!=n.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling"))&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"boardAddress"},"Board Address"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"boardAddress",className:"form-control",value:n.boardAddress,onChange:function(t){return e.handleBoardAddressChange(t.target.value)}})))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"Manufacturer"},"Manufacturer"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"Manufacturer",disabled:T,className:"form-control",value:n.manufacturer?n.manufacturer:"",onChange:function(t){return e.handleManufacturerChange(t.target.value)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"Model"},"Model"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"Model",disabled:T,className:"form-control",value:n.model?n.model:"",onChange:function(t){return e.handleModelChange(t.target.value)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"hvac"},"Related Equipment:"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement(d.a,{isDisabled:T,closeMenuOnSelect:!1,isMulti:!0,value:n.relatedEquipment,onChange:e.handleEquipmentList,placeholder:"Select Equipment",options:l})))),o.createElement(i.a,{instance:e.props.instance,buildingName:L,isDisabled:T,selectedFloorLocation:{selectedFloor:n.floor,selectedLocation:n.location},onLocationChange:e.handleLocationChange}),(D&&"1"==D.role||D.name==n.createdby)&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"connectiontype"},"Connection Type"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("select",{className:"form-control",id:"connectiontype",disabled:T,value:n.connectionType,onChange:function(t){return e.handleConnectionTypeChange(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Connection Type"),o.createElement("option",{value:"Physical"},"Physical"),o.createElement("option",{value:"Wireless"},"Wireless")))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"cadBIM"},"ONIT URL Link:"))),o.createElement("div",{className:"col-md-8 col-sm-8"},o.createElement("div",{className:"form-group"},o.createElement("div",{className:"form-control",id:"onitUrlLink"},n.onitUrlLink?n.onitUrlLink:""))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"ipaddress"},"IP Address"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"ipaddress",className:"form-control",disabled:T,value:n.wirelessConfig&&n.wirelessConfig.ipAddress,name:"ipAddress",onChange:function(t){return e.handleWirelessConfigChange(t)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"controllerIPAddress"},"Controller IP Address"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"computerControllerIPAddress",className:"form-control",disabled:!0,value:n.wirelessConfig&&n.wirelessConfig.controllerIPAddress,name:"computerControllerIPAddress"}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"thermostatMacAddress"},"MAC Address"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"thermostatMacAddress",className:"form-control",disabled:T,value:n.wirelessConfig&&n.wirelessConfig.thermostatMacAddress,name:"thermostatMacAddress",onChange:function(t){return e.handleWirelessConfigChange(t)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"ssid"},"SSID (Wireless Network)"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"ssid",className:"form-control",disabled:T,value:n.wirelessConfig&&n.wirelessConfig.ssid,name:"ssid",onChange:function(t){return e.handleWirelessConfigChange(t)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"password"},"Password (Wireless Network)"))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"password",className:"form-control",disabled:T,value:n.wirelessConfig&&n.wirelessConfig.password,name:"password",onChange:function(t){return e.handleWirelessConfigChange(t)}})))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"graphURLs"},"Existing/Planned"))),o.createElement("div",{className:"col-md-8 col-sm-8"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"radio",id:"existing",disabled:T,checked:0!=n.isExisting,onChange:function(){e.handleExistingRadio(!0)}}),o.createElement("label",{htmlFor:"existing"},"Existing"),o.createElement("br",null),o.createElement("input",{type:"radio",id:"planned",disabled:T,checked:0==n.isExisting,onChange:function(){e.handleExistingRadio(!1)}}),o.createElement("label",{htmlFor:"planned"},"Planned"))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"graphURLs"},"Graph URL"))),o.createElement("div",{className:"col-md-8 col-sm-8"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text",disabled:T,id:"graphURL",className:"form-control",value:n.graphURL,onChange:function(t){return e.onChangeGraphURL(t.target.value)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"connectiontype"},"Strategy "))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",null,o.createElement(d.a,{isDisabled:!1,closeMenuOnSelect:!1,isMulti:!0,value:n.strategy,onChange:e.handleMultiStrategiesChange,placeholder:"T-Stat Strategies",options:u.f}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"connectiontype"},"Sensors "))),o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("div",null,o.createElement(d.a,{isDisabled:!1,closeMenuOnSelect:!1,isMulti:!0,value:n.sensors,onChange:e.handleMultiSensorChange,placeholder:"Sensors for Optimization Strategies",options:c}))))),o.createElement("div",{className:"row",style:{paddingTop:"10px"}},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"thermostatMacAddress"},"Setpoint Range"))),o.createElement("div",{className:"col-md-2 col-sm-2"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"number",id:"setpointRangeFrom",className:"form-control",disabled:T,value:n.setpointRangeFrom,name:"setpointRangeFrom",onChange:function(t){return e.handleDeviceChange(t)}}))),o.createElement("div",{className:"col-md-1 col-sm-1 padding-10 center"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"To"},"To"))),o.createElement("div",{className:"col-md-2 col-sm-2"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"number",id:"setpointRangeTo",className:"form-control",disabled:T,value:n.setpointRangeTo,name:"setpointRangeTo",onChange:function(t){return e.handleDeviceChange(t)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"notes"},"Notes"))),o.createElement("div",{className:"col-md-6 col-sm-3"},o.createElement("div",{className:"form-group"},o.createElement("input",{type:"text ",id:"notes",className:"form-control",disabled:T,value:n.notes?n.notes:"",onChange:function(t){return e.handleNotesChange(t.target.value)}}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 inline-block"},!T&&o.createElement("button",{className:"btn btn-primary btn-fill",type:"button",disabled:!S,onClick:function(){e._saveMoncon()}},o.createElement("i",{className:"fa fa-save"})," Save"),o.createElement("button",{id:"btnbackPointList",className:"btn btn-secondary btn-fill",onClick:function(){var e=t.breadCrumbsLevels;E=E,N=N;var n=e.slice(-1).pop();window.location.hash=n.link}},o.createElement("i",{className:"fa fa-angle-double-left"}),"  Back"))))))))})))},t}(o.Component);t.default=O},808:function(e,t,n){"use strict";t.a=function(e,t,n){return i(this,void 0,void 0,function(){return c(this,function(a){switch(a.label){case 0:return[4,Object(r.e)({buildingName:e,zoneName:t,bimSid:n},r.a.ZONES.GETZONES,o.b.ZONE)];case 1:return[2,a.sent()]}})})},t.b=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(r.f)({buildingName:e,floor:t},r.a.ZONES.SAVEFLOOR,o.b.ZONE).then(function(){Object(a.b)("Floor Added Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Floor.")})];case 1:return[2,n.sent()]}})})},t.c=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(r.f)({model:e,buildingName:t},r.a.ZONES.SAVEZONE,o.b.ZONE).then(function(){Object(a.b)("Zone Added Successfully.")}).catch(function(e){Object(a.a)("Error occured while saving Zone.")})];case 1:return[2,n.sent()]}})})},t.f=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.ZONES.GETFLOORLIST,o.b.ZONE)];case 1:return[2,t.sent()]}})})},t.g=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,equipmentType:t},r.a.ZONES.GETSERVICEPROVIDERSLIST,o.b.ZONE)];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return i(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,Object(r.e)({buildingName:e,excludeFloors:t},r.a.ZONES.GetAllZonesList,o.b.ZONE)];case 1:return[2,n.sent()]}})})},t.h=function(e){return i(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(r.e)({buildingName:e},r.a.ZONES.GetZoneTypesList,o.b.ZONE)];case 1:return[2,t.sent()]}})})},t.d=function(e,t){return i(this,void 0,void 0,function(){var n=this;return c(this,function(l){switch(l.label){case 0:return[4,Object(r.f)({buildingName:e,zoneName:t},r.a.ZONES.DELETEZONE,o.b.ZONE).then(function(){return i(n,void 0,void 0,function(){return c(this,function(e){return Object(a.b)("Zone Deleted Successfully."),[2]})})}).catch(function(e){Object(a.a)("Error occured while deleting.")})];case 1:return[2,l.sent()]}})})};var o=n(8),a=n(4),r=n(3),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}},879:function(e,t,n){"use strict";t.b=function(e,t,n,i){return a(this,void 0,void 0,function(){return r(this,function(a){switch(a.label){case 0:return[4,Object(o.f)({modelId:e,newModel:t,oldModel:n,user:i},o.a.HistorianArchive.SaveHistorianArchive,"")];case 1:return[2,a.sent()]}})})},t.a=function(e){return a(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(o.d)(o.a.HistorianArchive.GetHistorianArchive,"modelID="+e)];case 1:return[2,t.sent()]}})})};var o=n(3),a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}},885:function(e,t,n){"use strict";var o=n(2),a=(n.n(o),n(79)),r=n(808),i=n(30),c=n(10),l=n(11),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=this&&this.__assign||function(){return(m=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,r){function i(e){try{l(o.next(e))}catch(e){r(e)}}function c(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,c)}l((o=o.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={locationModel:{ontology:"",buildingName:n.props.buildingName,floor:n.props.floor?n.props.floor:"",type:n.props.type?n.props.type:"",name:Object(l.j)(7),rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""},_spaceTypes:[],floorsList:[]},n._getSpaceTypeList=n._getSpaceTypeList.bind(n),n._getFloorsList=n._getFloorsList.bind(n),n.handleFormChange=n.handleFormChange.bind(n),n.createLocation=n.createLocation.bind(n),n}return s(t,e),t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){var t,n,o,a;return d(this,function(r){switch(r.label){case 0:return t=this.state.locationModel,n=e.buildingName,o=e.floor,a=e.type,n?[4,this._getSpaceTypeList()]:[3,3];case 1:return r.sent(),[4,this._getFloorsList()];case 2:r.sent(),(o||a)&&(t.floor=o||"",t.type=a||"",this.setState({locationModel:t})),r.label=3;case 3:return[2]}})})},t.prototype._getSpaceTypeList=function(){return u(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return[4,Object(a.f)(this.props.buildingName).then(function(t){e.setState({_spaceTypes:t})})];case 1:return t.sent(),[2]}})})},t.prototype._getFloorsList=function(){return u(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return[4,Object(r.f)(this.props.buildingName).then(function(t){e.setState({floorsList:t})})];case 1:return t.sent(),[2]}})})},t.prototype.createLocation=function(){return u(this,void 0,void 0,function(){var e,t,n=this;return d(this,function(o){switch(o.label){case 0:return e=this.state.locationModel,t=Object(),t=m({},e),e?(Object(i.a)(!0),[4,Object(a.a)(this.props.buildingName,e,e.floor,!1)]):[3,2];case 1:o.sent(),this.setState({locationModel:{ontology:"",buildingName:"",floor:"",type:"",name:Object(l.j)(7),rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:""}},function(){n.props.updateSpace(t)}),Object(i.a)(!1),o.label=2;case 2:return[2]}})})},t.prototype.handleFormChange=function(e){var t=this.state.locationModel;t[e.target.name]=e.target.value,this.setState({locationModel:t})},t.prototype.render=function(){var e=this,t=this.props.closeDailogBtnID,n=this.state,a=n.locationModel,r=n._spaceTypes,i=n.floorsList,l=a.rdfsLabel,s=a.type,m=a.floor;return o.createElement("div",null,o.createElement("button",{type:"button",id:t,className:"btn btn-primary btn-fill",onClick:function(){},"data-toggle":"modal","data-target":"#spaceFormDialog",style:{display:"none"}},"."),o.createElement(c.a,{id:"spaceFormDialog",onSaveButtonClick:function(){e.createLocation()},showSaveButton:!0,heading:"Create Space",saveButtonText:"Save and Continue",disableSaveButton:""==l||""==s||""==m},o.createElement("div",{className:"dataCard padding-10 no-margin"},o.createElement("div",{className:""},o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"type"},"Space Name:")),o.createElement("div",{className:"col-md-9"},o.createElement("input",{name:"rdfsLabel",value:a.rdfsLabel,onChange:function(t){return e.handleFormChange(t)},type:"text",className:"form-control"})," "))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"type"},"Type:")),o.createElement("div",{className:"col-md-9"},o.createElement("select",{id:"type",className:"form-control",name:"type",onChange:function(t){return e.handleFormChange(t)},value:a.type},o.createElement("option",{value:""},"Select Type"),r&&r.map(function(e,t){return 0===t?o.createElement("option",{key:t,selected:!0,value:e.value},e.value):o.createElement("option",{key:t,value:e.value},e.value)}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"type"},"Floor:")),o.createElement("div",{className:"col-md-9"},o.createElement("select",{id:"type",className:"form-control",name:"floor",onChange:function(t){return e.handleFormChange(t)},value:a.floor},o.createElement("option",{value:""},"Select Type"),i&&i.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value)}))))),o.createElement("br",null)))))},t}(o.Component);t.a=p},920:function(e,t,n){"use strict";var o,a,r,i,c,l,s;n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return d}),n.d(t,"a",function(){return p}),function(e){e[e.OFF=0]="OFF",e[e.HEAT=1]="HEAT",e[e.COOL=2]="COOL",e[e.AUTO=3]="AUTO"}(o||(o={})),function(e){e[e.Idle=0]="Idle",e[e.HEATING=1]="HEATING",e[e.COOLING=2]="COOLING",e[e.LOCKOUT=3]="LOCKOUT",e[e.ERROR=4]="ERROR"}(a||(a={})),function(e){e[e.AUTO=0]="AUTO",e[e.ON=1]="ON"}(r||(r={})),function(e){e[e.Fahrenheit=0]="Fahrenheit",e[e.Celsius=1]="Celsius"}(i||(i={})),function(e){e[e.Fahrenheit=0]="Fahrenheit",e[e.Celsius=1]="Celsius"}(c||(c={})),function(e){e[e.occupied1=0]="occupied1",e[e.occupied2=1]="occupied2",e[e.occupied3=2]="occupied3",e[e.unoccupied=3]="unoccupied",e[e.inactive=255]="inactive"}(l||(l={})),function(e){e[e.Home=0]="Home",e[e.Away=1]="Away"}(s||(s={}));var m,u;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(m||(m={})),function(e){e[e.AllModes=0]="AllModes",e[e.HeatCoolOnly=1]="HeatCoolOnly",e[e.HeatOnly=2]="HeatOnly",e[e.CoolOnly=3]="CoolOnly"}(u||(u={}));var d=[{value:"VeryBySchedule",label:"Vary by Schedule"},{value:"PreChill",label:"Pre-Chill"},{value:"SelectiveDispatch",label:"Selective Dispatch"},{value:"OccupancySensing",label:"Occupancy Sensing"},{value:"Optimize-NoOccupancy",label:"Optimize - No Occupancy"},{value:"Optimize-ScheduledUse",label:"Optimize - Scheduled Use"},{value:"Optimize-Occupancy",label:"Optimize - Occupancy"},{value:"Optimize-Sensing",label:"Optimize - Sensing"}],p=[{ontology:"",season:"COOLING",occType:"UNOCCUPIED",defaultTargetTemp:"85.0",fanSetting:"MEET_TURNOVER_REQTS",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"10.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"8.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"OCCUPIED",defaultTargetTemp:"70.0",fanSetting:"AUTO_HI",warmLittleTemp:"2.0",warmLittleHowBad:"3.0",warmLotTemp:"8.0",warmLotHowBad:"8.0",warmHardLimitTemp:"80.0",coolLittleTemp:"2.0",coolLittleHowBad:"3.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"SEMI",defaultTargetTemp:"75.0",fanSetting:"MEET_TURNOVER_REQTS",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"10.0",warmLotHowBad:"10.0",warmHardLimitTemp:"90.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"8.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"SHUTDOWN",defaultTargetTemp:"90.0",fanSetting:"AUTO_LO",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"110.0",coolLittleTemp:"10.0",coolLittleHowBad:"5.0",coolLotTemp:"20.0",coolLotHowBad:"10.0",coolHardLimitTemp:"45.0"},{ontology:"",season:"HEATING",occType:"UNOCCUPIED",defaultTargetTemp:"55.0",fanSetting:"AUTO_HI",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"10.0",coolHardLimitTemp:"40.0"},{ontology:"",season:"HEATING",occType:"OCCUPIED",defaultTargetTemp:"68.0",fanSetting:"AUTO_HI",warmLittleTemp:"2.0",warmLittleHowBad:"3.0",warmLotTemp:"5.0",warmLotHowBad:"8.0",warmHardLimitTemp:"90.0",coolLittleTemp:"2.0",coolLittleHowBad:"3.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"55.0"},{ontology:"",season:"HEATING",occType:"SEMI",defaultTargetTemp:"65.0",fanSetting:"AUTO_HI",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"8.0",warmLotHowBad:"8.0",warmHardLimitTemp:"90.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"50.0"},{ontology:"",season:"HEATING",occType:"SHUTDOWN",defaultTargetTemp:"50.0",fanSetting:"AUTO_HI",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"40.0"}]}});