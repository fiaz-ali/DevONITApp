webpackJsonp([84],{1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),l=(n.n(a),n(581)),o=n(87),i=n(17),s=n(948),c=n(880),r=n(14),m=n(583),u=n(574),d=n(568),p=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),h=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,a,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(l=(l=i.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1],l=o;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(o);break}l[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentView:"CompletedSolutions",solutionEquipments:[],completedSolutionEquipments:[],inspectionOntology:"",columns:[{name:"Equipment",selected:!0},{name:"Floor",selected:!0},{name:"Space",selected:!0},{name:"Equipment Type",selected:!0},{name:"Virtual BIM",selected:!0},{name:"CAD BIM",selected:!0},{name:"Inspections",selected:!0}],solutionTemplates:[],solutionTemplatesName:"",deleteOntology:"",solutionsList:[],esolutionName:""},n._fetchSolutionTemplate=n._fetchSolutionTemplate.bind(n),n.fetchIncompleteSolutions=n.fetchIncompleteSolutions.bind(n),n.handleESolutionChange=n.handleESolutionChange.bind(n),n.removeIncompleteSolution=n.removeIncompleteSolution.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this.fetchIncompleteSolutions()]:[3,4];case 1:return e.sent(),[4,this.fetchCompletedSolutions()];case 2:return e.sent(),[4,this._fetchSolutionTemplate()];case 3:e.sent(),this.setState({inspectionOntology:this.props.inspectionOntology}),e.label=4;case 4:return[2]}})})},t.prototype.fetchIncompleteSolutions=function(){return h(this,void 0,void 0,function(){var e;return g(this,function(t){switch(t.label){case 0:return e=[],[4,Object(c.g)()];case 1:return e=t.sent(),this.setState({solutionEquipments:e}),[2]}})})},t.prototype.fetchCompletedSolutions=function(){return h(this,void 0,void 0,function(){var e,t,n,a,l,o;return g(this,function(s){switch(s.label){case 0:return e=[],t=[],n=[],[4,Object(c.f)(this.props.buildingName)];case 1:if(e=s.sent())for(a=0;a<e.length;a++)l=e[a],o={createdBy:Object(i.g)(l.createdBy),equipmentTemplatesOntology:Object(i.g)(l.equipmentTemplatesOntology),isCompleted:!0,equipmentsOntology:Object(i.g)(l.equipmentsOntology),ontology:Object(i.g)(l.ontology),rdfsLabel:Object(i.g)(l.rdfsLabel),templateOntology:Object(i.g)(l.templateOntology),timestamp:l.timestamp&&Object(i.g)(l.timestamp)?new Date(Object(i.g)(l.timestamp)):void 0,equipmentByTemplate:[]},n.push({label:Object(i.g)(l.rdfsLabel),value:Object(i.g)(l.ontology)}),t.push(o);return this.setState({completedSolutionEquipments:t,solutionsList:n}),[2]}})})},t.prototype._fetchSolutionTemplate=function(){return h(this,void 0,void 0,function(){var e,t,n,a;return g(this,function(l){switch(l.label){case 0:return Object(o.a)(!0),[4,Object(s.c)()];case 1:if(e=l.sent(),t=this.state.solutionTemplates,t=[],e){for(n=0;n<e.length;n++)a=e[n],t.push({label:Object(i.g)(a.rdfsLabel),value:Object(i.g)(a.ontology)});this.setState({solutionTemplates:t})}return Object(o.a)(!1),[2]}})})},t.prototype.removeIncompleteSolution=function(){return h(this,void 0,void 0,function(){var e,t=this;return g(this,function(n){switch(n.label){case 0:return(e=this.state.deleteOntology)?[4,Object(c.a)(e).then(function(){t.fetchIncompleteSolutions(),t.setState({deleteOntology:""})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.handleSolutionTemplateChange=function(e){var t=this.state.solutionTemplatesName;t=e.value,this.setState({solutionTemplatesName:t})},t.prototype.handleESolutionChange=function(e){var t=this.state.esolutionName;t=e.value,this.setState({esolutionName:t})},t.prototype.render=function(){var e=this,t=this.state,n=t.currentView,o=t.completedSolutionEquipments,i=t.solutionEquipments,s=t.inspectionOntology,c=t.columns,p=t.solutionTemplates,h=t.solutionTemplatesName,g=t.solutionsList,f=t.esolutionName,b=this.props,E=b.instance,v=b.buildingName,N=JSON.parse(r.a.getItem("user")),S=Object(m.b)(N,"info-equip","write"),y=c.find(function(e){return"Inspections"==e.name&&1==e.selected})&&s;return a.createElement("div",null,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("CompletedSolutions"==n?"btn-fill":"")+" btn-secondary btn-secondary-dark",onClick:function(){e.setState({currentView:"CompletedSolutions"})}},"Completed Solutions"),a.createElement("button",{className:"btn "+("IncompleteSolutions"==n?"btn-fill":"")+" btn-secondary btn-secondary-dark",onClick:function(){e.setState({currentView:"IncompleteSolutions"})}},"Incomplete Solutions"))),a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){window.location.hash=E+"/"+v+"/NewSolution"}},a.createElement("i",{className:"fa fa-plus"}),a.createElement("span",null,"Create New Solution")),a.createElement("button",{type:"button",className:"btn btn-dark pull-right",style:{marginRight:"3px"},onClick:function(){document.getElementById("btnSolutionTemplateDialog").click()}},a.createElement("i",{className:"fa fa-plus"}),a.createElement("span",null,"Create Solution From Solution Template")),a.createElement("button",{type:"button",className:"btn btn-success btn-fill pull-right",style:{marginRight:"3px"},onClick:function(){window.location.hash=E+"/"+v+"/SolutionTemplates"}}," ",a.createElement("span",null,"Templates")))),a.createElement("br",null),a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 p-0"},"IncompleteSolutions"==n&&a.createElement("div",{className:"content",style:{paddingTop:"10px"}},a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row hidden-xs no-padding"},a.createElement("div",{className:"col-md-10 no-padding"},a.createElement("div",{className:"col-md-12 dataCard"},a.createElement("div",{className:y?"col-md-10":"col-md-10 col-sm-12 small grid-header-left"},a.createElement("i",{className:"fa fas fa-sort"})," Solution Template Name  "),a.createElement("div",{className:y?"col-md-2":"col-md-2 col-sm-12 small grid-header"}," ",a.createElement("i",{className:"fa fas fa-sort"}),"Last Updated At ")))),i&&i.length>0&&i.map(function(t,n){var l=new Date(t.timestamp).toLocaleString();return a.createElement("div",{key:n,className:"row clickable no-padding"},a.createElement("div",{className:"col-md-10 no-padding"},a.createElement("div",{className:"col-md-12 no-padding"},a.createElement("div",{className:"col-md-10 col-sm-12 padding-5 trim-data small grid-left margin-top"},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Equipment"),a.createElement("a",{href:"#"+E+"/"+v+"/NewEquipment/SolutionTemplate/Edit/"+t.ontology,title:t.rdfsLabel},t.rdfsLabel)),a.createElement("div",{className:"col-md-2 col-sm-12 padding-5 small grid margin-top",title:t.ontology},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Floor"),l))),S&&a.createElement("div",{"data-html2canvas-ignore":"true",className:"col-md-2 col-xs-2 pull-right",style:{paddingLeft:"0px"}},a.createElement("a",{className:"btn-sm btn-danger active pull-right",title:"Edit",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(n){document.getElementById("btnConfirmDeleteDialog").click(),e.setState({deleteOntology:t._id})}},a.createElement("i",{className:"fa fa-trash"})," "),a.createElement("a",{className:"btn-sm btn-success active pull-right",title:"Edit",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(e){setTimeout(function(){window.location.hash=E+"/"+v+"/NewEquipment/SolutionTemplate/Edit/"+t.ontology},500)}},a.createElement("i",{className:"fa fa-edit"})," ")))}))),"CompletedSolutions"==n&&a.createElement("div",{className:"content",style:{paddingTop:"10px"}},a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row hidden-xs no-padding"},a.createElement("div",{className:"col-md-10 no-padding"},a.createElement("div",{className:"col-md-12 dataCard"},a.createElement("div",{className:y?"col-md-10":"col-md-10 col-sm-12 small grid-header-left"},a.createElement("i",{className:"fa fas fa-sort"})," Solution Template Name  "),a.createElement("div",{className:y?"col-md-2":"col-md-2 col-sm-12 small grid-header"}," ",a.createElement("i",{className:"fa fas fa-sort"}),"Last Updated At ")))),o&&o.length>0&&o.map(function(e,t){var n=new Date(e.timestamp).toLocaleString();return a.createElement("div",{key:t,className:"row clickable no-padding"},a.createElement("div",{className:"col-md-10 no-padding"},a.createElement("div",{className:"col-md-12 no-padding"},a.createElement("div",{className:"col-md-10 col-sm-12 padding-5 trim-data small grid-left margin-top"},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Solution"),a.createElement("a",{onClick:function(){window.location.hash=E+"/"+v+"/CompleteSolutionView/"+e.ontology},title:e.rdfsLabel},e.rdfsLabel)),a.createElement("div",{className:"col-md-2 col-sm-12 padding-5 small grid margin-top",title:n},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Timestamp"),n))),S&&a.createElement("div",{"data-html2canvas-ignore":"true",className:"col-md-2 col-xs-2 pull-right",style:{paddingLeft:"0px"}},a.createElement("a",{className:"btn-sm btn-success active pull-right",title:"E-Solution",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(t){window.location.hash=E+"/"+v+"/ESolution/"+e.ontology}},a.createElement("i",{className:"fa fa-briefcase"})),a.createElement("a",{className:"btn-sm btn-success active pull-right",title:"Diagram",style:{margin:"3px",padding:"6.5px",border:"1px solid",borderRadius:"5px",width:"31px",height:"31px"},onClick:function(t){window.location.hash=E+"/"+v+"/SolutionTemplates/Diagram/"+e.ontology}},a.createElement("i",{className:"fa fa-bar-chart"}))))}))))))),a.createElement("button",{type:"button",id:"btnSolutionTemplateDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#solutionTemplateDialog"}," ."),a.createElement(d.a,{id:"solutionTemplateDialog",heading:"Select Solution Template",saveButtonText:"Create Equipment",cancelButtonText:"Cancel",disableSaveButton:!h,showCancelButton:!0,showSaveButton:!0,onSaveButtonClick:function(){window.location.hash=e.props.instance+"/"+e.props.buildingName+"/NewEquipment/SolutionTemplate/"+h}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("label",{htmlFor:"point"},"Solution Templates"),a.createElement("div",{className:"form-group"},a.createElement(l.a,{closeMenuOnSelect:!0,isMulti:!1,onChange:function(t){e.handleSolutionTemplateChange(t)},placeholder:"Select Solution Template",options:p}))))),a.createElement("button",{type:"button",id:"btnESolutionDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#eSolutionDialog"}," ."),a.createElement(d.a,{id:"eSolutionDialog",heading:"Select Solution",saveButtonText:"Create E-Solution",cancelButtonText:"Cancel",disableSaveButton:!f,showCancelButton:!0,showSaveButton:!0,onSaveButtonClick:function(){window.location.hash=e.props.instance+"/"+e.props.buildingName+"/ESolution/"+f}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("label",{htmlFor:"point"},"Solution"),a.createElement("div",{className:"form-group"},a.createElement(l.a,{closeMenuOnSelect:!0,isMulti:!1,onChange:function(t){e.handleESolutionChange(t)},placeholder:"Select Solution",options:g}))))),a.createElement("button",{type:"button",id:"btnConfirmDeleteDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog"}," ."),a.createElement(u.a,{instance:"",id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete inprogress solution template?",heading:"Confirm...",onConfirmButtonClick:function(){e.removeIncompleteSolution()}}),a.createElement("br",null))))},t}(a.Component);t.default=f}});