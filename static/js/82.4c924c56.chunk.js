webpackJsonp([82],{858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=(n.n(i),n(100)),a=(n.n(o),n(14)),r=n(21),s=n(3),l=n(10),c=n(24),d=n(11),u=n(13),m=n(173),p=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),y=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,s)}l((i=i.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},b=null,h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={repositories:[],isEdit:!1,repoObject:Object(),repoToDelete:Object(),secretKey:"",isValidKey:"http://localhost:3000"==window.location.origin,showValidationMessege:!1,Credentials:{password:"",username:"root"}},b=n,n.deleteRepository=n.deleteRepository.bind(n),n.onDeleteRepository=n.onDeleteRepository.bind(n),n.saveRepository=n.saveRepository.bind(n),n.onEditRepository=n.onEditRepository.bind(n),n.handleRepoForm=n.handleRepoForm.bind(n),n.loadRepositories=n.loadRepositories.bind(n),n.handleSecretKeyChange=n.handleSecretKeyChange.bind(n),n.validateKey=n.validateKey.bind(n),n.onBackupRepository=n.onBackupRepository.bind(n),n}return p(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,this.loadRepositories()];case 1:return e.sent(),this.state.isValidKey||document.getElementById("btnValidateKey").click(),[2]}})})},t.prototype.componentWillUnmount=function(){return y(this,void 0,void 0,function(){return f(this,function(e){return[2]})})},t.prototype.loadRepositories=function(){return y(this,void 0,void 0,function(){return f(this,function(e){return(new c.b).GetObject(c.a.DOCUMENT,s.b,function(e,t){if(e)console.log("Get Object Error Returned",e),b.setState({repositories:[]});else{var n=Object(d.c)(t.Body);if(n){var i=JSON.parse(n);JSON.stringify(i)!=JSON.stringify(b.state.repositories)&&b.setState({repositories:i})}}}),[2]})})},t.prototype.saveRepository=function(){return y(this,void 0,void 0,function(){var e,t,n,i,o,a=this;return f(this,function(r){return e=this.state,t=e.repoObject,n=e.repositories,i=e.isEdit,o="",i?n.find(function(e){return e.origin==t.origin}).repository=t.repository:(o=t.origin,n.push({origin:t.origin,repository:t.repository})),this.setState({repositories:n,isEdit:!1,repoObject:{origin:"",repository:""}},function(){if((new c.b).PutObject(c.a.DOCUMENT,s.b,JSON.stringify(n)),setTimeout(function(){Object(s.h)()},1e3),!i){var e={allowAutoSMS:!0,city:"",company:"",contact:"root",email:"",facility:"",facilityAssignedTo:[],departmentsAndGroups:[],group:"",groups:[{value:"Admin",label:"Admin"}],mobile:"",name:"root",notes:"",password:"ONIT$$$$$#####",confirmPassword:"",qualifications:[],role:"1",state:"",streetAddress:"",zipcode:"",workingStatus:"",stripePaymentMethodId:"",stripeCustomerId:"",stripeSubscriptionId:""};setTimeout(function(){Object(s.a)()},1e3),setTimeout(function(){return y(a,void 0,void 0,function(){return f(this,function(t){return e&&(Object(u.a)(!0),Object(m.f)("",e,!1,o),Object(u.a)(!1)),[2]})})},5e3)}}),[2]})})},t.prototype.deleteRepository=function(){return y(this,void 0,void 0,function(){var e,t,n;return f(this,function(i){return e=this.state,t=e.repositories,n=e.repoToDelete,t.splice(t.findIndex(function(e){return e.origin==n.origin}),1),this.setState({repositories:t},function(){(new c.b).PutObject(c.a.DOCUMENT,s.b,JSON.stringify(t)),setTimeout(function(){Object(s.h)()},1e3)}),[2]})})},t.prototype.onDeleteRepository=function(e){this.setState({repoToDelete:e})},t.prototype.onEditRepository=function(e){this.setState({isEdit:!0,repoObject:e},function(){document.getElementById("btnRepositoryForm").click()})},t.prototype.onBackupRepository=function(e){Object(u.a)(!0),Object(s.c)(e.origin,e.repository),setTimeout(function(){Object(u.a)(!1)},1e3)},t.prototype.handleRepoForm=function(e){var t=this.state.repoObject;t[""+e.target.name]=e.target.value,this.setState({repoObject:t})},t.prototype.handleSecretKeyChange=function(e){this.setState({secretKey:e})},t.prototype.validateKey=function(){Object(s.k)(this.state.secretKey)?this.setState({isValidKey:!0,secretKey:"",showValidationMessege:!1}):(this.setState({isValidKey:!1,secretKey:"",showValidationMessege:!0}),document.getElementById("btnValidateKey").click())},t.prototype.render=function(){var e=this,t=this.state,n=t.repositories,o=t.repoObject,c=t.isEdit,d=t.secretKey,u=t.isValidKey,m=t.showValidationMessege;return i.createElement("div",{className:"content"},i.createElement("div",{id:"loadingDiv",className:"modal in modal-loading","data-backdrop":"false",role:"dialog",style:{display:"none",background:"#0000003a"}},i.createElement("svg",{style:{position:"absolute",top:"40%",left:"40%"},width:"15%",height:"15%",viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",stroke:"#337840"},i.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:"2"},i.createElement("circle",{cx:"22",cy:"22",r:"17.0118",strokeOpacity:"0"},i.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),i.createElement("animate",{attributeName:"strokeOpacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),i.createElement("animate",{attributeName:"strokeWidth",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),i.createElement("circle",{cx:"22",cy:"22",r:"9.01182",strokeOpacity:"0"},i.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),i.createElement("animate",{attributeName:"strokeOpacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),i.createElement("animate",{attributeName:"strokeWidth",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),i.createElement("circle",{cx:"22",cy:"22",r:"2.25887"},i.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}))))),!u&&i.createElement(i.Fragment,null,i.createElement("button",{type:"button",id:"btnValidateKey",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#ValidateKeyDialog"}," ."),i.createElement(l.a,{id:"ValidateKeyDialog",saveButtonId:"btnVerify",heading:"Please Enter Secret Key",showCancelButton:!1,onSaveButtonClick:function(){e.validateKey()},saveButtonText:"Verify",disableSaveButton:!1},i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},m&&i.createElement("div",{className:"col-md-12 alert alert-danger"},i.createElement("strong",null,"Invalid Secret Key!")," Please provide a valid secret key."),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2 col-md-offset-3"},i.createElement("label",{htmlFor:"point"},"Key:")),i.createElement("div",{className:"col-md-4 col-md-offset-right-3"},i.createElement("input",{id:"secretKey",type:"password",disabled:c,name:"secretKey",className:"form-control",value:d,onChange:function(t){return e.handleSecretKeyChange(t.target.value)},onKeyPress:function(e){13==e.charCode&&document.getElementById("btnVerify").click()}}),i.createElement("br",null))))))),u&&i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row padding-10 divimg"},i.createElement("img",{id:"profile-img",className:"companyLogo",src:"../assets/img/new logo.png"})),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"dropdown pull-right"}),i.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){e.setState({isEdit:!1,repoObject:{origin:"",repository:""}},function(){document.getElementById("btnRepositoryForm").click()})}},i.createElement("i",{className:"fa fa-plus"})," Add New Repository"))),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"card",id:"DevicesList"},i.createElement("div",{className:"header"},i.createElement("h4",{className:"title"},"Repositories")),i.createElement("div",{className:"content"},i.createElement(a.AppContext.Consumer,null,function(t){return i.createElement("div",{className:"dataCard"},i.createElement("button",{type:"button",id:"btnRepositoryForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#RepositoryFormDialog"}," ."),i.createElement(l.a,{id:"RepositoryFormDialog",heading:"Repository Information",showCancelButton:!0,cancelButtonText:"Cancel",onSaveButtonClick:function(){e.saveRepository()},saveButtonText:"Save",disableSaveButton:!1},i.createElement("div",{className:"content"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("label",{htmlFor:"point"},"Instance:"),i.createElement("input",{id:"point",type:"text",disabled:c,name:"origin",className:"form-control",value:o.origin,onChange:function(t){return e.handleRepoForm(t)}}))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("label",{htmlFor:"point"},"Repository:"),i.createElement("input",{id:"point",type:"text",name:"repository",className:"form-control",value:o.repository,onChange:function(t){return e.handleRepoForm(t)}}))))),i.createElement("div",{className:"row hidden-xs"},i.createElement("div",{className:"col-sm-8"},i.createElement("div",{className:"col-sm-6 headingText"},"Instance"),i.createElement("div",{className:"col-sm-6 headingText"},"Repository")),i.createElement("div",{className:"col-sm-4"})),n&&n.map(function(t,n){return i.createElement("div",{key:n,className:"row clickable"},i.createElement("div",{className:"col-sm-8"},i.createElement("div",{className:"col-sm-6 trim-data",title:t.origin},i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Origin"),t.origin),i.createElement("div",{className:"col-sm-6 trim-data",title:Object(s.g)(t.repository)},i.createElement("span",{className:"hidden visible-xs-inline headingText"},"Repository"),t.repository)),i.createElement("div",{className:"col-sm-4 col-xs-12"},i.createElement("button",{className:"btn-xs btn-danger btn-fill pull-right",onClick:function(n){e.onDeleteRepository(t)},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog"},i.createElement("i",{className:"fa fa-trash"})," Delete"),i.createElement("button",{className:"btn-xs btn-success btn-fill pull-right",onClick:function(){e.setState({isEdit:!0}),e.onEditRepository(t)}},i.createElement("i",{className:"fa fa-edit"})," Edit"),i.createElement("button",{className:"btn-xs btn-success btn-fill pull-right",onClick:function(){e.onBackupRepository(t)}},i.createElement("i",{className:"fa fa-hdd-o"})," Create Backup")))}),i.createElement(r.a,{instance:"",id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this respository?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteRepository()}}))})))))))},t}(i.Component);t.default=h}});