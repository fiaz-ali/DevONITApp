webpackJsonp([48],{1189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=(n.n(a),n(1085)),o=n(117),l=n(692),c=n(12),r=n(20),s=n(678),d=n(1190),m=n(684),u=n(686),p=n(8),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),g=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function l(e){try{r(a.next(e))}catch(e){o(e)}}function c(e){try{r(a.throw(e))}catch(e){o(e)}}function r(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(l,c)}r((a=a.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,a,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,a=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(i=(i=l.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1],i=o;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(o);break}i[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},f=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],l=0,c=o.length;l<c;l++,i++)a[i]=o[l];return a},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={_allPoints:[],_plannedPoints:[],ImportFileData:[],point:Object(),monconDevices:[],selectedMonconDeviceFilter:"",search:"",alertingStatus:!1,pointToPointDetails:[],pointToPointExportList:[],showLogs:!1,monconDevice:"",pointState:"",pointType:"",searchFilter:""},n._fetchPoints=n._fetchPoints.bind(n),n._getPointToPointDetails=n._getPointToPointDetails.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){return v(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchPoints()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype._fetchPoints=function(){return g(this,void 0,void 0,function(){var e,t,n,a,i,s,d,m,u=this;return v(this,function(p){switch(p.label){case 0:return e=this.props,t=e.asset,n=e.buildingName,a=e.equipmentName,i=e.spaceName,s=this.state.monconDevices,s=[],d=[],Object(o.a)(!0),t&&t.length>0?[4,Object(l.k)(n,null,t).then(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t];Object(c.g)(n.point)&&Object(c.g)(n.pointLabel)&&Object(r.M)(Object(c.g)(n.point),Object(c.g)(n.pointLabel))}d=f(e)}).catch(function(e){return e})]:[3,2];case 1:return p.sent(),[3,4];case 2:return[4,Object(l.k)(n).then(function(e){d=f(e)}).catch(function(e){return e})];case 3:p.sent(),p.label=4;case 4:return d.forEach(function(e){-1==s.findIndex(function(t){return t.ontology==Object(c.g)(e.monconDevice)})&&Object(c.g)(e.monconDevice)&&s.push({ontology:Object(c.g)(e.monconDevice),rdfsLabel:Object(c.g)(e.monconRdfsLabel)})}),m=d&&d.filter(function(e){return Object(c.g)(e.asset)==a}),(a||i)&&(d=m.length>0?m:d&&d.filter(function(e){return Object(c.g)(e.space)==i}),this.setState({_allPoints:f(d),_plannedPoints:f(d),monconDevices:s})),a||i||this.setState({_allPoints:f(d),monconDevices:s},function(){u.handleFilter()}),Object(o.a)(!1),[2]}})})},t.prototype._getPointToPointDetails=function(){return g(this,void 0,void 0,function(){var e,t=this;return v(this,function(n){return e=this.props.buildingName,this.setState({pointToPointDetails:[]},function(){return g(t,void 0,void 0,function(){var t,n,a,i;return v(this,function(o){switch(o.label){case 0:return[4,Object(l.n)(e)];case 1:if((t=o.sent())&&t.length>0){for(n=[],a=0;a<t.length;a++)(i=t[a]).point&&i.terminalPoint1Label&&i.terminalPoint2Label&&n.push.apply(n,[{aa_Description:i.monconRdfsLabel+" to "+i.sinkSourceAssetLabel,ab_Wired_Point:""+i.pointLabel,ac_Asset_1:""+i.monconRdfsLabel,ad_A1_Enclosure:""+i.enclosureRdfsLabel,ba_A1_Point:""+i.terminalPoint1Label,bb_Cabel:""+i.cableEquipmentLabel,bc_Wire_Color:""+(i.wireColor?i.wireColor:""),bd_Asset_2:""+i.sinkSourceAssetLabel,ca_A2_Enclosure:""+i.enclosureRdfsLabelAsset2,cb_A2_Point:""+i.terminalPoint2Label,cc_Point_To_Point_String:""+i.deviceID+i.enclosureRdfsLabel+i.terminalPoint1ID+"-"+i.cableEquipmentLabel+"-"+i.sinkSourceAssetID+i.enclosureRdfsLabelAsset2+i.terminalPoint2ID}]);this.setState({pointToPointDetails:t,pointToPointExportList:n},function(){document.getElementById("btnShowPointToPointDetails").click()})}return[2]}})})}),[2]})})},t.prototype.handleFilter=function(){var e=this.state,t=e.pointState,n=e.pointType,a=e.monconDevice,i=e.search,o=e._allPoints,l=[];if(o&&o.length){if(t&&(l=o.filter(function(e){return Object(c.g)(e.pointState)==t})),n)l=(l&&l.length>0?l:o).filter(function(e){return Object(c.g)(e.pointType)==n});if(a)l=(l&&l.length>0?l:o).filter(function(e){return Object(c.g)(e.monconDevice)==a});if(i)l=(l&&l.length>0?l:o).filter(function(e){return Object(c.g)(e.pointLabel).toLowerCase().includes(i.toLowerCase().trim())});t&&n&&a&&i||(l=l&&l.length>0?l:o)}this.setState({_plannedPoints:l})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,o=t.instance,l=this.state,r=l._plannedPoints,h=l.monconDevices,g=l.search,v=l.alertingStatus,f=l.pointToPointExportList,b=l.showLogs,E=l.pointState,_=l.pointType,P=l.monconDevice,y=JSON.parse(p.a.getItem("user"));return b?a.createElement(m.a,{instance:o,buildingName:n,fromEntityList:!0,module:u.a.Assets,entityName:"Point",entityList:r.map(function(e){return{label:Object(c.g)(e.pointLabel),value:Object(c.g)(e.point)}}),onLogClose:function(){return e.setState({showLogs:!1})}}):a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-4 col-xs-12"},a.createElement("div",{className:"col-md-4 col-xs-12 px-0"},a.createElement("h6",{style:{marginTop:"10px"}},"Point State:")),a.createElement("div",{className:"col-md-8 col-xs-12"},a.createElement("select",{className:"form-control",id:"pointState",name:"pointState",onChange:function(t){e.setState({pointState:t.target.value},function(){e.handleFilter()})},value:E},a.createElement("option",{value:""},"Select Point State"),a.createElement("option",{value:"Planned"},"Planned"),a.createElement("option",{value:"Ordered"},"Ordered"),a.createElement("option",{value:"ReadyToShip"},"Ready To Ship"),a.createElement("option",{value:"ShippingInbound"},"Shipping Inbound"),a.createElement("option",{value:"DeliveredPerShipperInbound"},"Delivered Per Shipper Inbound"),a.createElement("option",{value:"InventoryCataloging"},"Inventory Cataloging"),a.createElement("option",{value:"Assembly"},"Assembly"),a.createElement("option",{value:"ProvisioningWithSoftware"},"Provisioning With Software"),a.createElement("option",{value:"Kitting"},"Kitting"),a.createElement("option",{value:"FactoryAcceptenceTesting"},"Factory Acceptance Testing"),a.createElement("option",{value:"ShippingOutbound"},"Shipping Outbound"),a.createElement("option",{value:"DeliveredPerShipperOutbound"},"Delivered Per Shipper Outbound"),a.createElement("option",{value:"InstallingInFacility"},"Installing In Facility"),a.createElement("option",{value:"InstalledInFacility"},"Installed In Facility"),a.createElement("option",{value:"Commissioning"},"Commissioning (testing)"),a.createElement("option",{value:"Existing"},"Existing In Use"),a.createElement("option",{value:"Retired"},"Retired"),a.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),a.createElement("option",{value:"Sold"},"Sold"),a.createElement("option",{value:"DisposedOf"},"Disposed Of"),a.createElement("option",{value:"ErrorDeleted"},"Error Deleted")))),a.createElement("div",{className:"col-md-3 col-xs-12"},a.createElement("div",{className:"col-md-4 col-xs-12 px-0"},a.createElement("h6",{style:{marginTop:"10px"}},"Point Type:")),a.createElement("div",{className:"col-md-8 col-xs-12"},a.createElement("select",{className:"form-control",id:"pointType",name:"pointType",onChange:function(t){e.setState({pointType:t.target.value},function(){e.handleFilter()})},value:_},a.createElement("option",{value:""},"Select Type"),a.createElement("option",{value:"Sensed"},"Sensed"),a.createElement("option",{value:"Manual"},"Manual"),a.createElement("option",{value:"Virtual"},"Virtual"),a.createElement("option",{value:"Wired"},"Wire"),a.createElement("option",{value:"Terminal"},"Terminal")))),a.createElement("div",{className:"col-md-5 col-xs-12"},y&&"1"==y.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),a.createElement("div",{className:"dropdown pull-right"},a.createElement(s.a,{filename:"PointsList",data:r,ElementID:"PointsList"})),a.createElement("button",{type:"button",className:"btn btn-dark pull-right",style:{marginLeft:"5px"},onClick:function(){window.location.hash=o+"/"+n+"/MultiplePointsForm"}},a.createElement("i",{className:"fa fa-plus"}),"Create Points"),"\xa0")),a.createElement("div",{className:"row",style:{marginTop:"5px"}},a.createElement("div",{className:"col-md-4 col-xs-12"},a.createElement("div",{className:"col-md-4 col-xs-12 px-0"},a.createElement("h6",{style:{marginTop:"10px"}},"Moncon Device:")),a.createElement("div",{className:"col-md-8 col-xs-12"},a.createElement("select",{className:"form-control",id:"monconDevice",name:"monconDevice",onChange:function(t){e.setState({monconDevice:t.target.value},function(){e.handleFilter()})},value:P},a.createElement("option",{value:""},"Select Moncon Device"),h&&h.length>0&&h.map(function(e){return a.createElement("option",{key:e.ontology,value:e.ontology},e.rdfsLabel)})))),a.createElement("div",{className:"col-md-3 col-xs-12"},a.createElement("div",{className:"col-md-4 col-xs-12 px-0"},a.createElement("h6",{style:{marginTop:"10px"}},"Filter: \xa0")),a.createElement("div",{className:"col-md-8 col-xs-12"},a.createElement("input",{style:{outline:"green"},className:"form-control pull-right",onChange:function(t){e.setState({search:t.target.value},function(){e.handleFilter()})},id:"myInput",type:"text",placeholder:"Search..",value:g}))),a.createElement("div",{className:"col-md-5 col-xs-12"},a.createElement("div",{className:"col-md-5 col-xs-12 px-0 inline-flex"},a.createElement("h6",{style:{marginTop:"10px"}},"Display Alerting Status: \xa0")),a.createElement("div",{className:"col-md-1"},a.createElement("div",{className:"switch-container",style:{top:"5%",right:"10%"}},a.createElement("label",null,a.createElement("input",{name:"isBoolean",checked:v,onChange:function(t){e.setState({alertingStatus:!v})},className:"switch1",type:"checkbox"}),a.createElement("div",null,a.createElement("div",null))))),a.createElement("div",{className:"col-md-6 col-xs-12 no-padding"},a.createElement("button",{type:"button",className:"btn btn-primary pull-right",style:{border:"1px dotted",fontWeight:"bold"},onClick:function(){e._getPointToPointDetails()}},"Point to Point"),a.createElement(d.a,{pointToPointExportList:f})))),a.createElement("div",{className:"row no-padding",id:"PointsList"},a.createElement("div",{className:"padding-10 small"},a.createElement(i.a,{instance:o,buildingName:n,points:r,_fetchPoints:this._fetchPoints,isPlanned:E,alertingStatus:v}))))},t}(a.Component);t.default=b},1190:function(e,t,n){"use strict";var a=n(2),i=(n.n(a),n(665)),o=n(678),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return l(t,e),t.prototype.render=function(){var e=this.props.pointToPointExportList;this.state;return a.createElement(a.Fragment,null,a.createElement("button",{type:"button",id:"btnShowPointToPointDetails",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#pointToPointDetailsDialog"}," ."),a.createElement(i.a,{id:"pointToPointDetailsDialog",heading:"Point to Point details",cancelButtonText:"Ok",showCancelButton:!0,showSaveButton:!1,isFullWidth:!0,onSaveButtonClick:function(){}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"dropdown pull-right"},a.createElement(o.a,{filename:"PointToPoint worksheet",data:e,ElementID:"dvPointToPoint"})),a.createElement("div",{className:"col-md-12 padding-10",id:"dvPointToPoint"},a.createElement("div",{className:"row hidden-xs small dataCard cell_border",style:{marginBottom:"10px"}},a.createElement("div",{className:"col-md-12 dataCard no-padding"},a.createElement("div",{className:"col-md-2 padding-10 trim-data headingText"},"Description"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Wired Point"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Asset 1"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Enclosure"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Point"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Cable"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Asset 2"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Enclosure"),a.createElement("div",{className:"col-md-1 padding-10 trim-data headingText"},"Point"),a.createElement("div",{className:"col-md-2 padding-10 trim-data headingText"},"Point to Point String"))),a.createElement("div",{className:"dataCard"},e&&e.length>0&&e.map(function(e,t){return e.aa_Description?a.createElement("div",{key:t,className:"row no-padding small clickable"},a.createElement("div",{className:"col-md-12 no-padding"},a.createElement("div",{className:"col-md-2 padding-10 trim-data",title:""+e.aa_Description},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Description"),""+e.aa_Description),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.ab_Wired_Point},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Wired Point"),""+e.ab_Wired_Point),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.ac_Asset_1},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Asset 1"),""+e.ac_Asset_1),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.ad_A1_Enclosure},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Enclosure"),""+e.ad_A1_Enclosure),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.ba_A1_Point},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Point"),""+e.ba_A1_Point),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.bb_Cabel},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Cable"),""+e.bb_Cabel),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.bd_Asset_2},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Asset 2"),""+e.bd_Asset_2),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.ca_A2_Enclosure},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Enclosure"),""+e.ca_A2_Enclosure),a.createElement("div",{className:"col-md-1 padding-10 trim-data",title:""+e.cb_A2_Point},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Point"),""+e.cb_A2_Point),a.createElement("div",{className:"col-md-2 padding-10 trim-data",title:""+e.cc_Point_To_Point_String},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Point to Point String"),""+e.cc_Point_To_Point_String))):a.createElement(a.Fragment,null)})))))))},t}(a.Component);t.a=c}});