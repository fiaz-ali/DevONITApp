webpackJsonp([13,73],{1180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=(n.n(a),this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}()),i=function(e){function t(t){var n=e.call(this,t)||this;return n.state={videoLink:n.props.videoLink},n}return s(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({videoLink:e.videoLink})},t.prototype.componentDidMount=function(){this.setState({videoLink:this.props.videoLink})},t.prototype.render=function(){this.props;var e=this.state.videoLink;return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"card no-padding no-margin"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"img-fluid"},a.createElement("video",{autoPlay:!0,id:"myVideo",muted:!0,loop:!0,controls:!0,src:e}))))))))},t}(a.Component);t.default=i},1888:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s,i=n(2),o=(n.n(i),n(119)),c=n(652),r=n(116),l=n(118),u=n(10),d=n(664),m=n(1889),g=(n.n(m),n(1891)),p=n(657),b=n(649),f=n(1892),h=n(955),k=n(1180),O=n(1228),v=n(11),T=n(31),j=n(747),y=n(55),w=n(690),N=n(120),E=n(1142),S=n(1290),C=n(1229),D=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),I=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},x=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},_=function(e){function t(t){var n=e.call(this,t)||this;n.formatTime=function(e){var t=e/36e5,n=Math.floor(t),a=n>9?n:"0"+n,s=60*(t-n),i=Math.floor(s),o=i>9?i:"0"+i,c=60*(s-i),r=Math.floor(c),l=r>9?r:"0"+r;return a+("00"==a?"":"h")+":"+o+("00"==o?"":"m")+":"+l+("00"==l?"":"s")};var s=JSON.parse(v.a.getItem("user"));return n.state={isDataLoaded:!1,_tasks:[],sortOrder:1,taskToDelete:Object(),doNowbtn:!1,doIfbtn:!1,doNextbtn:!1,donebtn:!1,teamTaskbtn:!1,completeTasks:[],doIfTasks:[],doNextTasks:[],doNowTasks:[],managerTasks:[],teamTasks:[],allTasks:[],myTasks:[],recurredTasks:[],showScreenSaver:!1,videofile:Object(),showHideHeader:!0,showStartedTask:!0,Search:"",people:[],dependencies:[],isTimedIn:!1,lastClockIn:{},timer:"00:00:00",TaskView:"1"==s.role||"2"==s.role?"myteam":"mytasks",newPersonalTask:{ontology:Object(T.p)(10),action:"",assignedTime:"",assignedTo:s.name,description:"",entryTimeStamp:"",isRecurring:!1,startTime:"",status:"",conditionalTasks:[],relatedLink:[],floor:"",space:"",equipment:""},showAddMeTask:!1},a=n,n.onDeleteTask=n.onDeleteTask.bind(n),n.deleteTask=n.deleteTask.bind(n),n._fetchTasks=n._fetchTasks.bind(n),n.setCollapseIcon=n.setCollapseIcon.bind(n),n.setCollapseIcondoNowbtn=n.setCollapseIcondoNowbtn.bind(n),n.setCollapseIcondoIfbtn=n.setCollapseIcondoIfbtn.bind(n),n.setCollapseIcondoNextbtn=n.setCollapseIcondoNextbtn.bind(n),n.setCollapseIcondoDonebtn=n.setCollapseIcondoDonebtn.bind(n),n.setCollapseIconteambtn=n.setCollapseIconteambtn.bind(n),n.setWorkingStatus=n.setWorkingStatus.bind(n),n.getWorkingStatus=n.getWorkingStatus.bind(n),n.updateWorkingStatus=n.updateWorkingStatus.bind(n),n.manageTasksLists=n.manageTasksLists.bind(n),n.handleScreenSaver=n.handleScreenSaver.bind(n),n.handleVideofile=n.handleVideofile.bind(n),n.handleStopWork=n.handleStopWork.bind(n),n.updateRecentPerformance=n.updateRecentPerformance.bind(n),n.showStartedTaskHandler=n.showStartedTaskHandler.bind(n),n.search_filter=n.search_filter.bind(n),n._fetchPeople=n._fetchPeople.bind(n),n._fetchDependencies=n._fetchDependencies.bind(n),n.formatTime=n.formatTime.bind(n),n.setTimerInterval=n.setTimerInterval.bind(n),n.clockTimeInHandler=n.clockTimeInHandler.bind(n),n.clockTimeOutHandler=n.clockTimeOutHandler.bind(n),n.handleUserWorkingStatus=n.handleUserWorkingStatus.bind(n),n.handlingTimeInOut=n.handlingTimeInOut.bind(n),n.hideAddMeTask=n.hideAddMeTask.bind(n),n.updatePersonalTaskList=n.updatePersonalTaskList.bind(n),n}return D(t,e),t.prototype.componentWillUnmount=function(){return I(this,void 0,void 0,function(){return x(this,function(e){return this.setState({isTimedIn:!1}),clearInterval(s),[2]})})},t.prototype.componentDidMount=function(){return I(this,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchPeople()]:[3,3];case 1:return e.sent(),[4,this._fetchTasks()];case 2:e.sent(),this.setState({isDataLoaded:!0}),e.label=3;case 3:return[2]}})})},t.prototype.handlingTimeInOut=function(){return I(this,void 0,void 0,function(){var e,t,n,a;return x(this,function(s){switch(s.label){case 0:return Object(r.a)(!0),e=this.context,[4,Object(p.e)("",e.authenticatedUser.contact)];case 1:return(t=s.sent())||0!=t.length||t!=[]||this.setState({isTimedIn:!1}),(n=t[t.length-1])&&n.clockIn&&void 0!=n.clockIn&&null==n.clockOut?(this.setState({isTimedIn:!0,lastClockIn:t[t.length-1]}),a=new Date(this.state.lastClockIn.clockIn).getTime(),this.setTimerInterval(e,a),this.handleUserWorkingStatus("Clocked In")):(this.setState({isTimedIn:!1,timer:"00:00:00"}),this.handleUserWorkingStatus("Clocked Out")),Object(r.a)(!1),[2]}})})},t.prototype.setTimerInterval=function(e,t){var n=this;s=setInterval(function(){var e=(new Date).getTime()-t,a=n.formatTime(e.toString());n.setState({timer:a})},1e3)},t.prototype.clockTimeInHandler=function(e){return I(this,void 0,void 0,function(){var t,n,a;return x(this,function(i){switch(i.label){case 0:return Object(r.a)(!0),(t=Object()).contactOntology=e.authenticatedUser.contact,t.contactName=e.authenticatedUser.name,[4,Object(p.t)(t)];case 1:return i.sent(),[4,Object(p.e)("",e.authenticatedUser.contact)];case 2:return n=i.sent(),a=new Date(n[n.length-1].clockIn).getTime(),this.setTimerInterval(e,a),this.setState({isTimedIn:!0,lastClockIn:n[n.length-1]}),this.handleUserWorkingStatus("Clocked In"),clearInterval(s),Object(y.t)("Clocked In"),Object(r.a)(!1),[2]}})})},t.prototype.clockTimeOutHandler=function(e){return I(this,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return Object(r.a)(!0),[4,Object(p.t)(this.state.lastClockIn)];case 1:return e.sent(),this.setState({isTimedIn:!1,timer:"00:00:00"}),this.handleUserWorkingStatus("Clocked Out"),Object(y.t)("Clocked Out"),clearInterval(s),Object(r.a)(!1),[2]}})})},t.prototype.handleUserWorkingStatus=function(e){return I(this,void 0,void 0,function(){var t;return x(this,function(n){return(t=JSON.parse(v.a.getItem("user"))).workingStatus=e,v.a.setItem("user",JSON.stringify(t)),[2]})})},t.prototype._fetchPeople=function(){return I(this,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return[4,Object(p.p)()];case 1:return e=t.sent(),this.setState({people:e}),[2]}})})},t.prototype._fetchDependencies=function(){return I(this,void 0,void 0,function(){var e,t;return x(this,function(n){switch(n.label){case 0:return[4,Object(w.a)(this.props.buildingName)];case 1:return e=n.sent(),t=[],e.length&&e.forEach(function(e){var n=Object();n.ontology=Object(u.g)(e.ontology),n.dependent=Object(u.g)(e.dependent),n.dependentTaskName=Object(u.g)(e.dependentTaskName),n.taskCondition=Object(u.g)(e.taskCondition),n.conditionalTasks=Object(u.g)(e.conditionalTasks).split(","),t.push(n)}),this.setState({dependencies:t}),[2]}})})},t.prototype._fetchTasks=function(){return I(this,void 0,void 0,function(){var e,t,n,s,i,o;return x(this,function(c){switch(c.label){case 0:return e=JSON.parse(v.a.getItem("user")),t=[],Object(r.a)(!0),"1"==e.role||"2"==e.role?[3,2]:[4,Object(l.l)(e.contact)];case 1:if((s=c.sent())&&s.length>0){for(i=0;i<s.length;i++)n=s[i],Object(u.g)(n.task)&&Object(u.g)(n.action)&&Object(T.A)(Object(u.g)(n.task),Object(u.g)(n.action));t=a.props.equipmentName?s.filter(function(e){return Object(u.g)(e.equipSubject)==a.props.equipmentName||Object(u.g)(e.spaceSubject)==a.props.equipmentName}):s}return[3,4];case 2:return[4,Object(l.m)("","",this.props.isArchived)];case 3:if((s=c.sent())&&s.length>0)for(i=0;i<s.length;i++)o=s[i],Object(u.g)(o.task)&&Object(u.g)(o.action)&&Object(T.A)(Object(u.g)(o.task),Object(u.g)(o.action));t=a.props.equipmentName?s.filter(function(e){return Object(u.g)(e.equipSubject)==a.props.equipmentName||Object(u.g)(e.spaceSubject)==a.props.equipmentName}):s,c.label=4;case 4:return Object(r.a)(!1),[4,this.manageTasksLists(t&&t)];case 5:return c.sent(),[2]}})})},t.prototype.manageTasksLists=function(e){return I(this,void 0,void 0,function(){var t,n,a,s,i,o,c,r,d,m;return x(this,function(g){return t=[],"1"==(n=JSON.parse(v.a.getItem("user"))).role||"2"==n.role?(e||(e=[]),t=e):(e||(e=[]),t=e&&e.length>0&&e.filter(function(e){return(-1!=Object(u.g)(e.assignedTo).split(", ").findIndex(function(e){return e==n.contact})||Object(u.g)(e.enteredBy)==n.contact)&&"true"!=Object(u.g)(e.isSequence)})),e||(e=[]),a=e&&e.length>0&&e.filter(function(e){return"true"==Object(u.g)(e.isSequence)&&"Completed"!=Object(u.g)(e.status)&&-1!=Object(u.g)(e.assignedTo).split(", ").findIndex(function(e){return e==n.contact})}),s=e&&e.length>0&&e.filter(function(e){return"true"==Object(u.g)(e.isSequence)&&"Completed"!=Object(u.g)(e.status)}),i=t&&t.length>0&&t.filter(function(e){return e.hasOwnProperty("startTime")&&"Pending"!=Object(u.g)(e.status)&&"Completed"!=Object(u.g)(e.status)&&"true"!=Object(u.g)(e.isSequence)}),o=t&&t.length>0&&t.filter(function(e){return e.hasOwnProperty("startTime")&&"Completed"==Object(u.g)(e.status)}),c=t&&t.length>0&&t.filter(function(e){return e.hasOwnProperty("startTime")&&"true"==Object(u.g)(e.isRecurring)}),r=t&&t.length>0&&t.filter(function(e){return e.hasOwnProperty("startTime")&&"Pending"!=Object(u.g)(e.status)&&"Completed"!=Object(u.g)(e.status)&&"true"!=Object(u.g)(e.isSequence)&&Object(u.g)(e.assignedTo)==n.contact}),d=t&&t.length>0&&t.filter(function(e){return(e.hasOwnProperty("startTime")||""!=Object(u.g)(e.conditionalTasks))&&"true"!=Object(u.g)(e.isSequence)&&"Pending"==Object(u.g)(e.status)&&(!e.hasOwnProperty("isDoNext")||"false"==Object(u.g)(e.isDoNext))}).sort(function(e,t){return Math.abs(new Date(Object(u.g)(e.startTime)))-Math.abs(new Date(Object(u.g)(t.startTime)))}),m=t&&t.length>0&&t.filter(function(e){return"true"==Object(u.g)(e.isDoNext)&&"true"!=Object(u.g)(e.isSequence)&&"true"==Object(u.g)(e.acknowledged)&&"Pending"==Object(u.g)(e.status)}).sort(function(e,t){return parseInt(Object(u.g)(e.criticality))-parseInt(Object(u.g)(t.criticality))}),i.length>0&&i[0].action||(i=[]),d.length>0&&d[0].action||(d=[]),m.length>0&&m[0].action||(m=[]),m.length>0&&0==r.length&&Object(l.v)(this.props.instance,this.state.people),this.setState({_tasks:e,teamTasks:a,allTasks:s,completeTasks:o,doNowTasks:i,doIfTasks:d,doNextTasks:m,recurredTasks:c,myTasks:r}),[2]})})},t.prototype.updateWorkingStatus=function(){if("Working"==JSON.parse(v.a.getItem("user")).workingStatus){var e=this.getWorkingStatus();this.setWorkingStatus(e)}},t.prototype.getWorkingStatus=function(){var e=this.state._tasks,t="Doing Nothing",n=JSON.parse(v.a.getItem("user")),a=[],s=(a=n.group.split(",").find(function(e){return"Admin"==e||"Manager"==e})?e:e.length>0&&e.filter(function(e){return-1!=Object(u.g)(e.assignedTo).split(", ").findIndex(function(e){return e==n.contact})||Object(u.g)(e.enteredBy)==n.contact})).length>0&&a.filter(function(e){return e.hasOwnProperty("startTime")&&"Pending"!=Object(u.g)(e.status)&&"Completed"!=Object(u.g)(e.status)&&"true"==Object(u.g)(e.acknowledged)}),i=a.length>0&&a.filter(function(e){return"Completed"!=Object(u.g)(e.status)}),o=s.length>0&&s.filter(function(e){return"Started"==Object(u.g)(e.status)}),c=s.length>0&&s.filter(function(e){return"Paused"==Object(u.g)(e.status)});if(i&&i.length<1)t="Doing Nothing";else if(o.length>0)t="ONIT";else if(c.length>0){var r=c[0];t=1==Object(u.g)(r.pauseNote).includes("lunch")?"Lunch":1==Object(u.g)(r.pauseNote).includes("break")?"Break":"Other"}return t},t.prototype.setWorkingStatus=function(e){return I(this,void 0,void 0,function(){var t;return x(this,function(n){switch(n.label){case 0:return t=JSON.parse(v.a.getItem("user")),[4,Object(p.u)(t.contact,e)];case 1:return n.sent(),[2]}})})},t.prototype.handleScreenSaver=function(e){Object(T.z)(!1),this.setState({showScreenSaver:e,videofile:"assets/img/screensaver.mp4"})},t.prototype.handleVideofile=function(e){var t=URL.createObjectURL(e.target.files[0]);this.setState({videofile:t},function(){document.getElementById("videoLinkDailogebtn").click()})},t.prototype.setCollapseIcon=function(e){var t=e.target.className;e.target.className="fa fa-plus"==t?"fa fa-minus":"fa fa-plus"},t.prototype.setCollapseIcondoDonebtn=function(){this.setState({donebtn:!this.state.donebtn})},t.prototype.setCollapseIcondoNowbtn=function(){this.setState({doNowbtn:!this.state.doNowbtn})},t.prototype.setCollapseIcondoIfbtn=function(){this.setState({doIfbtn:!this.state.doIfbtn})},t.prototype.setCollapseIcondoNextbtn=function(){this.setState({doNextbtn:!this.state.doNextbtn})},t.prototype.setCollapseIconteambtn=function(){this.setState({teamTaskbtn:!this.state.teamTaskbtn})},t.prototype.showStartedTaskHandler=function(){this.setState({showStartedTask:!this.state.showStartedTask})},t.prototype.onDeleteTask=function(e){return I(this,void 0,void 0,function(){return x(this,function(t){return this.setState({taskToDelete:e}),document.getElementById("btnConfirm").click(),[2]})})},t.prototype.deleteTask=function(){return I(this,void 0,void 0,function(){var e,t,n;return x(this,function(a){switch(a.label){case 0:if(e=this.state.taskToDelete,Object(r.a)(!0),!e||""==Object(u.g)(e.subTasks))return[3,4];t=[],t=Object(u.g)(e.subTasks).split(", "),n=0,a.label=1;case 1:return n<t.length?[4,Object(l.A)(t[n],!0).then(function(e){}).catch(function(e){return e})]:[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return""==Object(u.g)(e.checklistID)?[3,6]:[4,Object(h.b)(Object(u.g)(e.checklistID),this.props.buildingName).then(function(e){}).catch(function(e){return e})];case 5:a.sent(),a.label=6;case 6:return[4,Object(l.A)(Object(u.g)(e.task),!0)];case 7:return a.sent(),[4,this._fetchTasks()];case 8:return a.sent(),setTimeout(function(){Object(y.n)()},2e3),Object(r.a)(!1),[2]}})})},t.prototype.updateCrewPerformance=function(e){return I(this,void 0,void 0,function(){return x(this,function(t){return Object(j.c)(e).then(function(e){}).catch(function(e){return e}),[2]})})},t.prototype.handleStopWork=function(e){return I(this,void 0,void 0,function(){var t,n;return x(this,function(a){switch(a.label){case 0:return[4,this.updateRecentPerformance()];case 1:return a.sent(),t=JSON.parse(v.a.getItem("user")),n={contact:t.contact,contactName:t.name,status:"Off",taskOntology:"",taskDescription:"",startDate:new Date,endDate:new Date,building:this.props.buildingName,entryTimestamp:new Date,floorOntology:"",floorDescription:"",assetOntology:"",assetDescription:"",spaceOntology:"",spaceDescription:"",workOrder:"wo-55555",stageOntologyReference:""},[4,this.updateCrewPerformance(n)];case 2:return a.sent(),t.workingStatus="Not Working",v.a.setItem("user",JSON.stringify(t)),[4,Object(p.u)(t.contact,"Not Working").then(function(){e.logout()})];case 3:return a.sent(),[2]}})})},t.prototype.updateRecentPerformance=function(){return I(this,void 0,void 0,function(){var e,t,n=this;return x(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,t=JSON.parse(v.a.getItem("user")),[4,Object(j.b)(e,t.contact).then(function(e){if(null!=e&&""!=e._id){var t={_id:e._id,contact:e.contact,contactName:e.contactName,status:e.status,taskOntology:e.taskOntology,taskDescription:e.taskDescription,startDate:e.startDate,endDate:new Date,building:e.building,entryTimestamp:e.entryTimestamp,floorOntology:e.floorOntology,floorDescription:e.floorDescription,assetOntology:e.assetOntology,assetDescription:e.assetDescription,spaceOntology:e.spaceOntology,spaceDescription:e.spaceDescriptionres,workOrder:e.workOrder,stageOntologyReference:e.stageOntologyReference};n.updateCrewPerformance(t)}})];case 1:return a.sent(),[2]}})})},t.prototype.search_filter=function(e){return I(this,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this.setState({Search:e.target.value})];case 1:return t.sent(),[2]}})})},t.prototype.hideAddMeTask=function(e){this.state.showAddMeTask;document.getElementById("addMeTaskButton").click(),this.setState({newPersonalTask:e,showAddMeTask:!1})},t.prototype.updatePersonalTaskList=function(e){this.setState({newPersonalTask:e})},t.prototype.render=function(){var e=this,t=this.state,n=t.completeTasks,a=t.doNowTasks,r=t.doIfTasks,l=t.doNextTasks,m=t.teamTasks,p=t.showScreenSaver,h=t.videofile,j=t._tasks,y=t.showHideHeader,w=t.showStartedTask,D=t.Search,I=t.people,x=t.dependencies,_=t.TaskView,L=t.allTasks,B=this.props,P=B.instance,A=B.buildingName,R=B.isArchived,W=JSON.parse(v.a.getItem("user")),M=Object(d.b)(W,"task-ticket","write"),q="1"==W.role||"2"==W.role;p?document.getElementById("halfsidebar")&&document.getElementById("halfsidebar").style&&(document.getElementById("halfsidebar").style.overflow="hidden"):document.getElementById("halfsidebar")&&document.getElementById("halfsidebar").style&&(document.getElementById("halfsidebar").style.display="block");var F=a&&a.filter(function(e){return e.action.value.toLowerCase().includes(D.toLowerCase().trim())||e.buildingName.value.toLowerCase().includes(D.toLowerCase().trim())||e.assignedToName.value.toLowerCase().includes(D.toLowerCase().trim())||e.equipRdfsLabel.value.toLowerCase().includes(D.toLowerCase().trim())}),V=r&&r.filter(function(e){return e.action.value.toLowerCase().includes(D.toLowerCase().trim())||e.buildingName.value.toLowerCase().includes(D.toLowerCase().trim())||e.assignedToName.value.toLowerCase().includes(D.toLowerCase().trim())||e.equipRdfsLabel.value.toLowerCase().includes(D.toLowerCase().trim())}),H=l&&l.filter(function(e){return e.action.value.toLowerCase().includes(D.toLowerCase().trim())||e.buildingName.value.toLowerCase().includes(D.toLowerCase().trim())||e.assignedToName.value.toLowerCase().includes(D.toLowerCase().trim())||e.equipRdfsLabel.value.toLowerCase().includes(D.toLowerCase().trim())}),U=n&&n.filter(function(e){return e.action.value.toLowerCase().includes(D.toLowerCase().trim())||e.buildingName.value.toLowerCase().includes(D.toLowerCase().trim())||e.assignedToName.value.toLowerCase().includes(D.toLowerCase().trim())||e.equipRdfsLabel.value.toLowerCase().includes(D.toLowerCase().trim())});return i.createElement(o.a.Consumer,null,function(t){return i.createElement(i.Fragment,null,e.state.isDataLoaded&&i.createElement("div",null,i.createElement("div",{className:"content",id:""},i.createElement("div",{className:"container-fluid"},!R&&i.createElement("div",{className:"row padding-10 "},M&&q&&i.createElement(i.Fragment,null,"metasks"!==_&&i.createElement("button",{type:"button",className:"btn btn-success btn-fill",title:"Archived Tasks",onClick:function(e){window.location.hash=P+"/"+A+"/ArchivedTasks"}},i.createElement("i",{className:"fa fa-archive"}),i.createElement("span",null)),i.createElement("div",{className:"btn-group margin-left-right-5",role:"group"},i.createElement("button",{type:"button",className:"btn btn-dark  "+("metasks"==_?"btn-fill":""),onClick:function(){e.setState({TaskView:"metasks"})}},"Me Tasks"),i.createElement("button",{type:"button",className:"btn btn-dark  "+("mytasks"==_?"btn-fill":""),onClick:function(){e.setState({TaskView:"mytasks"})}},"My Tasks"),i.createElement("button",{type:"button",className:"btn btn-dark  "+("myteam"==_?"btn-fill":""),onClick:function(){e.setState({TaskView:"myteam"})}},"Team Tasks"),i.createElement("button",{type:"button",className:"btn btn-dark  "+("all"==_?"btn-fill":""),onClick:function(){e.setState({TaskView:"all"})}},"All Tasks"))),"metasks"!==_&&i.createElement("button",{type:"button",className:"btn btn-warning active pull-right margin-left-right-5",onClick:function(){e.handleScreenSaver(!0)}},i.createElement("i",{className:"fa fa-desktop"}),i.createElement("span",null)),M&&q&&"metasks"!==_&&i.createElement(i.Fragment,null,i.createElement("button",{type:"button",className:"btn btn-dark active pull-right margin-left-right-5",onClick:function(){window.location.hash=P+"/"+A+"/NewTask"}},i.createElement("i",{className:"fa fa-plus"}),i.createElement("span",null,"Task")),i.createElement("button",{type:"button",className:"btn btn-success active pull-right margin-left-right-5","data-toggle":"modal","data-target":"#RecurTaskListDailogeBox"},i.createElement("span",{className:"glyphicon glyphicon-time"}),"\xa0\xa0",i.createElement("span",null,"REC Task List"))),"metasks"==_&&i.createElement("button",{type:"button",className:"btn btn-success active pull-right margin-left-right-5",onClick:function(){return e.setState({showAddMeTask:!0},function(){document.getElementById("addMeTaskButton").click()})}},i.createElement("span",{className:"fa fa-plus"}),i.createElement("span",null,"Add Me Task")),"metasks"!==_&&i.createElement("div",{className:"pull-right margin-left-right-5 "},i.createElement("label",{htmlFor:"Search Filter",style:{lineHeight:"30px"}},"Filter : \xa0 "),i.createElement("input",{style:{width:"200px",outline:"green"},className:"form-control pull-right margin-left-right-5",onChange:function(t){e.search_filter(t)},id:"myInput",type:"text",placeholder:"Search.."})),M&&q&&i.createElement(i.Fragment,null,i.createElement(N.b,{to:"javascript:void(0)",className:"btn btn-primary btn-fill mr-1 ",onClick:function(e){e.preventDefault(),window.open("http://"+Object(T.l)()+"/#"+P+"/"+A+"/Template/WorkflowTemplateList/","_blank")}},"Templates"),i.createElement(N.b,{to:"javascript:void(0)",className:"btn btn-primary btn-fill",onClick:function(e){e.preventDefault(),window.open("http://"+Object(T.l)()+"/#"+P+"/"+A+"/Deploy/WorkflowList/","_blank")}},"Deployed"))),R&&i.createElement("div",{className:"row padding-10 "},i.createElement("button",{type:"button",className:"btn btn-secondary btn-fill pull-left",onClick:function(){window.location.hash=P+"/"+A+"/Tasks"}},i.createElement("i",{className:"fa fa-angle-double-left"})," Back to Tasks")),p&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(k.default,{videoLink:h,instance:P,buildingName:A})),i.createElement("div",{className:"col-md-12 text-center"},i.createElement("div",{style:{zIndex:999999999,position:"fixed",top:"15px",left:"42%"}},i.createElement(C.a,{instance:P,state:t})),i.createElement("button",{className:"btn btn-warning active selectVideobtn",onClick:function(){document.getElementById("videoLinkDailogebtn").click()}},i.createElement("u",null,"Select a video")),i.createElement("button",{className:"btn btn-warning active closeVideobtn",onClick:function(){e.handleScreenSaver(!1)}},"X")),i.createElement("div",{className:"col-md-12"},i.createElement("a",{className:"btn active menuVideobtn","data-toggle":"collapse",href:"#menuDropdown"}," \u22ee\u22ee\u22ee "),i.createElement("div",{id:"menuDropdown",className:"menuDropdowVideo panel-collapse collapse"},i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement(O.a,{instance:P,buildingName:A,onChangeWorkflow:function(){},isCallfromScreenPage:!0,IsProducionEnv:!1,user:W,repos:Object()}))))),i.createElement("div",{className:"card doNow"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},w&&i.createElement("div",{className:"col-md-12 hidden-xs"},i.createElement("div",{className:"card startedDonowTaskforScreenSaver",onMouseEnter:function(){e.setState({showHideHeader:!1})},onMouseLeave:function(){e.setState({showHideHeader:!0})}},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,isScreenSaverCall:y,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,allTask:j,tasks:a&&a.filter(function(e){return"Started"==Object(u.g)(e.status)}),updateWorkingStatus:e.updateWorkingStatus,people:I,dependencies:x,listType:"DoingNow"}))),i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"panel panel-default row"},i.createElement("div",{className:"panel-heading"},i.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsedoingNow",href:"#collapsedoingNow",onClick:function(){e.showStartedTaskHandler()}},i.createElement("h4",{className:"panel-title",onClick:function(){e.setCollapseIcondoNowbtn()}},i.createElement("i",{className:e.state.doNowbtn?"fa fa-minus":"fa fa-plus"}),i.createElement("label",null,"Doing Now")))),i.createElement("div",{id:"collapsedoingNow",className:"padding-10 panel-collapse collapse"},i.createElement("div",{className:"padding-10"},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:j,updateWorkingStatus:e.updateWorkingStatus,listType:"DoingNow"}))),i.createElement("button",{id:"btnConfirm",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog"},"."),i.createElement(c.a,{instance:P,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Task?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteTask()}}))))))),"metasks"==_&&i.createElement(S.a,{updatePersonalTaskList:e.updatePersonalTaskList,user:W,instance:P,newPersonalTask:e.state.newPersonalTask,buildingName:A}),!p&&("myteam"==_||"all"==_)&&q&&i.createElement(i.Fragment,null,i.createElement("div",{className:"panel panel-default row"},i.createElement("div",{className:"panel-heading "},i.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsedoingNow",href:"#collapsedoingNow"},i.createElement("h4",{className:"panel-title",onClick:function(){e.setCollapseIcondoNowbtn()}},i.createElement("i",{className:e.state.doNowbtn?"fa fa-minus":"fa fa-plus"}),i.createElement("label",null,"Doing Now")))),i.createElement("div",{id:"collapsedoingNow",className:"padding-10 panel-collapse collapse"},i.createElement("div",{className:"padding-10"},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:""!=D?F:a,updateWorkingStatus:e.updateWorkingStatus,listType:"DoingNow"}))),i.createElement("button",{id:"btnConfirm",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog"},"."),i.createElement(c.a,{instance:P,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Task?",heading:"Confirm...",onConfirmButtonClick:function(){e.deleteTask()}})),i.createElement("div",{className:"panel panel-default row"},i.createElement("div",{className:"panel-heading"},i.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsedoNext",href:"#collapsedoNext"},i.createElement("h4",{className:"panel-title",onClick:function(t){e.setCollapseIcondoNextbtn()}},i.createElement("i",{className:e.state.doNextbtn?"fa fa-minus":"fa fa-plus"}),i.createElement("label",null,"Do Next ")))),i.createElement("div",{id:"collapsedoNext",className:"padding-10 panel-collapse collapse"},i.createElement("div",{className:"padding-10"},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:""!=D?H:l,updateWorkingStatus:e.updateWorkingStatus,listType:"DoNext"})))),i.createElement("div",{className:"panel panel-default row"},i.createElement("div",{className:"panel-heading"},i.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsedoIf",href:"#collapsedoIf"},i.createElement("h4",{className:"panel-title",onClick:function(){e.setCollapseIcondoIfbtn()}},i.createElement("i",{className:e.state.doIfbtn?"fa fa-minus":"fa fa-plus"}),i.createElement("label",null,"Do If  ")))),i.createElement("div",{id:"collapsedoIf",className:"padding-10 panel-collapse collapse "},i.createElement("div",{className:"padding-10"},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:""!=D?V:r,updateWorkingStatus:e.updateWorkingStatus,listType:"DoIf"})))),i.createElement("div",{className:"panel panel-default row"},i.createElement("div",{className:"panel-heading"},i.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapseteamTasks",href:"#collapseteamTasks"},i.createElement("h4",{className:"panel-title",onClick:function(t){e.setCollapseIconteambtn()}},i.createElement("i",{className:e.state.teamTaskbtn?"fa fa-minus":"fa fa-plus"}),i.createElement("label",null,"Stage Tasks ")))),i.createElement("div",{id:"collapseteamTasks",className:"padding-10 panel-collapse collapse"},i.createElement("div",{className:"padding-10"},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:"all"==_?L:m,updateWorkingStatus:e.updateWorkingStatus,listType:"teamTasks"})))),i.createElement("div",{className:"panel panel-default row"},i.createElement("div",{className:"panel-heading"},i.createElement("a",{"data-toggle":"collapse",id:"btn-collapsedone",href:"#collapsedone",style:{color:"black"}},i.createElement("h4",{className:"panel-title",onClick:function(){e.setCollapseIcondoDonebtn()}},i.createElement("i",{className:e.state.donebtn?"fa fa-minus":"fa fa-plus",onClick:function(t){e.setCollapseIcon(t)}}),i.createElement("label",null,"Done ")))),i.createElement("div",{id:"collapsedone",className:"padding-10 panel-collapse collapse"},i.createElement("div",{className:"padding-10"},i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:""!=D?U:n,updateWorkingStatus:e.updateWorkingStatus,listType:"Done"}))))),!p&&"mytasks"==_&&i.createElement(i.Fragment,null,i.createElement(g.a,{isTimedIn:e.state.isTimedIn,_fetchTasks:e._fetchTasks,buildingName:A,instance:P,onDeleteTask:e.onDeleteTask,people:I,dependencies:x,allTask:j,tasks:e.state.myTasks,updateWorkingStatus:e.updateWorkingStatus,listType:"DoingNow"})),i.createElement("button",{type:"button",id:"addMeTaskButton","data-toggle":"modal","data-target":"#AddMeTask",className:"hidden"},"."),e.state.showAddMeTask&&i.createElement(b.a,{id:"AddMeTask",heading:"Add New Me Task",saveButtonText:"Done",isEditForm:!0,hideFooter:!0,onCancelButtonClick:function(){e.setState({showAddMeTask:!1},function(){document.getElementById("addMeTaskButton").click()})},onSaveButtonClick:function(){},disableSaveButton:!1,onCancelButtonClickActive:!0},i.createElement(E.a,{hideAddMeTask:e.hideAddMeTask,user:W,buildingName:A})),i.createElement("button",{type:"button","data-toggle":"modal","data-target":"#RecurTaskListDailogeBox",className:"hidden"},"."),i.createElement(b.a,{id:"RecurTaskListDailogeBox",heading:"Recur Tasks List",saveButtonText:"Done",isEditForm:!0,onSaveButtonClick:function(){},disableSaveButton:!1},i.createElement(f.a,{buildingName:A,instance:P,recurredTasks:e.state.recurredTasks})),i.createElement("button",{id:"videoLinkDailogebtn",type:"button","data-toggle":"modal","data-target":"#videoLinkDailoge",className:"hidden"},"."),i.createElement(b.a,{id:"videoLinkDailoge",heading:"Choose Video file",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1},i.createElement("input",{type:"file",onChange:function(t){e.handleVideofile(t)}})))),i.createElement("button",{type:"button",id:"btnRefreshTasks",className:"hidden",onClick:function(){return e._fetchTasks()}},"."),i.createElement("button",{type:"button",id:"handleClockInOut",className:"hidden",onClick:function(){return e.handlingTimeInOut()}},"."),i.createElement("button",{type:"button",id:"clearInterval",className:"hidden",onClick:function(){return clearInterval(s)}},".")))})},t.contextType=o.a,t}(i.Component);t.default=_},1889:function(e,t,n){var a=n(1890);"string"===typeof a&&(a=[[e.i,a,""]]);var s={hmr:!1,transform:void 0};n(647)(a,s);a.locals&&(e.exports=a.locals)},1890:function(e,t,n){(e.exports=n(646)(!1)).push([e.i,".splitter-layout{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%;height:100%;overflow:hidden}.splitter-layout .layout-pane{position:relative;-ms-flex:0 0 auto;flex:0 0 auto;overflow:auto}.splitter-layout .layout-pane.layout-pane-primary{-ms-flex:1 1 auto;flex:1 1 auto}.splitter-layout>.layout-splitter{-ms-flex:0 0 auto;flex:0 0 auto;width:4px;height:100%;cursor:col-resize;background-color:#ccc}.splitter-layout .layout-splitter:hover{background-color:#bbb}.splitter-layout.layout-changing{cursor:col-resize}.splitter-layout.layout-changing>.layout-splitter{background-color:#aaa}.splitter-layout.splitter-layout-vertical{-ms-flex-direction:column;flex-direction:column}.splitter-layout.splitter-layout-vertical.layout-changing{cursor:row-resize}.splitter-layout.splitter-layout-vertical>.layout-splitter{width:100%;height:4px;cursor:row-resize}",""])},1891:function(e,t,n){"use strict";var a=n(2),s=(n.n(a),n(10)),i=n(119),o=n(664),c=n(116),r=n(118),l=n(649),u=n(657),d=n(121),m=n(652),g=n(31),p=n(955),b=n(11),f=n(57),h=n(747),k=n(55),O=n(1067),v=n.n(O),T=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),j=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},w=new d.a,N=function(e){function t(t){var n=e.call(this,t)||this;return n.state={taskID:"",_tasks:n.props.tasks,sortOrder:1,pauseNote:"",why:"",note:"",showStopWorkConfirmation:!1,selectedChecklistTask:"",checklist:[],selectedChecklist:Object(),checklistBoard:Object(),isQrCameraMode:!1,qrValdiationTask:Object()},n.setRowColor=n.setRowColor.bind(n),n.sortTasks=n.sortTasks.bind(n),n.updateTaskStatus=n.updateTaskStatus.bind(n),n.archiveTask=n.archiveTask.bind(n),n.saveNote=n.saveNote.bind(n),n.filterAssignee=n.filterAssignee.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n.getNextTask=n.getNextTask.bind(n),n.sendSms=n.sendSms.bind(n),n.sendMail=n.sendMail.bind(n),n.toggleStopWorkButton=n.toggleStopWorkButton.bind(n),n.handleStopWork=n.handleStopWork.bind(n),n.handleChecklistSelection=n.handleChecklistSelection.bind(n),n.handleChecklistAssignment=n.handleChecklistAssignment.bind(n),n.getChecklistBoard=n.getChecklistBoard.bind(n),n._deleteChecklist=n._deleteChecklist.bind(n),n._unassignChecklist=n._unassignChecklist.bind(n),n.updateChecklist=n.updateChecklist.bind(n),n.handleChecklistBoard=n.handleChecklistBoard.bind(n),n.updateCrewPerformance=n.updateCrewPerformance.bind(n),n.updateRecentPerformance=n.updateRecentPerformance.bind(n),n.handleScan=n.handleScan.bind(n),n.checkDependency=n.checkDependency.bind(n),n.getWorkflowTypePrefix=n.getWorkflowTypePrefix.bind(n),n.triggerDoIfTasks=n.triggerDoIfTasks.bind(n),n.hasOtherStartedTask=n.hasOtherStartedTask.bind(n),n.formatDate=n.formatDate.bind(n),n}return T(t,e),t.prototype.setRowColor=function(e){var t=Object(s.g)(e.status),n=Object(s.g)(e.criticality);return"Pending"==t?"pending-row-"+n:"Started"==t?"status-row-start":"Paused"==t?"status-row-pause":"Completed"==t?"status-row-complete":"Cancelled"==t?"status-row-cancel":""},t.prototype.triggerDoIfTasks=function(){return j(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,Object(r.y)(this.props.buildingName)];case 1:return e.sent(),this.props._fetchTasks(),[2]}})})},t.prototype.handleChecklistSelection=function(e){this.setState({selectedChecklist:e})},t.prototype.updateTaskStatus=function(e,t,n,a){return j(this,void 0,void 0,function(){var i,o,l,u,d,m,g,p,b=this;return y(this,function(f){switch(f.label){case 0:return"Started"==t?(i=document.getElementById("myVideo")&&document.getElementById("myVideo"))&&i.pause():(i=document.getElementById("myVideo")&&document.getElementById("myVideo"))&&i.play(),Object(c.a)(!0),o=!1,l=[],u=this.state._tasks,d=u&&u.find(function(t){return Object(s.g)(t.task)==e}),[4,Object(r.D)(e,t,!1,"Completed"!==t?n:null).then(function(){return j(b,void 0,void 0,function(){return y(this,function(e){return[2]})})}).catch(function(e){return e})];case 1:return f.sent(),[4,Object(r.m)("","",!1)];case 2:return m=f.sent(),d=Object(),(d=m&&m.find(function(t){return Object(s.g)(t.task)==e}))&&"1"==a?[4,Object(r.D)(Object(s.g)(d.parentTask),"Assigned",!0,n).then(function(){return j(b,void 0,void 0,function(){return y(this,function(e){return[2]})})}).catch(function(e){return e})]:[3,4];case 3:f.sent(),f.label=4;case 4:if(!(d&&Object(s.g)(d.parentTask).length>0))return[3,9];for(g=0;g<m.length;g++)m[g].parentTask&&Object(s.g)(m[g].parentTask)==Object(s.g)(d.parentTask)&&l&&l.push(m[g]);return l&&l.length>0?(o=l.length==l.filter(function(e){return"Completed"==Object(s.g)(e&&e.status)}).length,d&&1==o?[4,Object(r.D)(Object(s.g)(d.parentTask),"Completed").then(function(){return j(b,void 0,void 0,function(){return y(this,function(e){return[2]})})}).catch(function(e){return e})]:[3,8]):[3,8];case 5:return f.sent(),[4,Object(r.B)(Object(s.g)(d.parentTask),t,n)];case 6:return f.sent(),p=m.find(function(e){return Object(s.g)(e.task)==Object(s.g)(d.parentTask)}),[4,this.sendStageCompletionMail(p)];case 7:f.sent(),f.label=8;case 8:return[3,9];case 9:return"Completed"!=t?[3,11]:[4,Object(r.B)(e,t,n)];case 10:f.sent(),f.label=11;case 11:return setTimeout(function(){return j(b,void 0,void 0,function(){return y(this,function(e){return this.props._fetchTasks(),[2]})})},1e3),setTimeout(function(){return j(b,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this.props.updateWorkingStatus()];case 1:return e.sent(),[2]}})})},3e3),Object(c.a)(!1),[2]}})})},t.prototype.checkDependency=function(e,t){return j(this,void 0,void 0,function(){return y(this,function(e){return[2]})})},t.prototype.sendStageCompletionMail=function(e){return j(this,void 0,void 0,function(){var t,n,a,i,o,c;return y(this,function(r){if(t=this.props.people,n=Object(s.g)(e.action)+" (Stage) has been completed.",(a=Object(s.g)(e.assignedTo))&&(i=a.split(",")).length>0)for(o=function(e){var a=i[e],o=t.find(function(e){return Object(s.g)(e.contact)==a});if(o&&Object(s.g)(o.email).length>0&&"Not Working"!=Object(s.g)(o.status)){var c=Object();c.subject="Notification Stage Completed",c.to=Object(s.g)(o.email),c.text=n,Object(f.a)(c)}},c=0;c<i.length;c++)o(c);return[2]})})},t.prototype.archiveTask=function(e,t){return j(this,void 0,void 0,function(){var n=this;return y(this,function(a){switch(a.label){case 0:return Object(c.a)(!0),[4,Object(r.g)(e,t).then(function(){n.props._fetchTasks()}).catch(function(e){return e})];case 1:return a.sent(),Object(c.a)(!1),[2]}})})},t.prototype.componentDidMount=function(){return j(this,void 0,void 0,function(){return y(this,function(e){return this.props.tasks&&this.setState({_tasks:this.props.tasks}),[2]})})},t.prototype.componentWillReceiveProps=function(e){e.tasks!==this.state._tasks&&this.setState({_tasks:e.tasks})},t.prototype.sortTasks=function(e,t){var n=this.state._tasks,a=this.state.sortOrder,s=n.sort(function(n,s){if(n&&s){var i="",o="";switch(e){case"Criticality":n.criticality&&s.criticality&&(i=n.criticality.value,o=s.criticality.value,a=t||1);break;case"Issue":i=n.action.value,o=s.action.value;break;case"Description":n.action&&s.action&&(i=n.action.value,o=s.action.value);break;case"Start_Time":n.startTime&&s.startTime&&(i=n.startTime.value,o=s.startTime.value);break;case"Acknowledged":n.equipRdfsLabel&&s.equipRdfsLabel&&(i=n.acknowledged.value,o=s.acknowledged.value);break;case"Assigned_By":n.assignedToName&&s.assignedToName&&(i=n.assignedToName.value,o=s.assignedToName.value);break;case"Asset":n.equipRdfsLabel&&s.equipRdfsLabel&&(i=n.equipRdfsLabel.value,o=s.equipRdfsLabel.value);break;case"buil_Nam":n.buildingName&&s.buildingName&&(i=n.buildingName.value,o=s.buildingName.value);break;case"Task_Assigned":n.assignedTo&&s.assignedTo&&(i=n.assignedTo.value,o=s.assignedTo.value)}var c=0;if("Completed By"==e||"Entry Date"==e){var r=i?parseInt(new Date(i).YYMMDDHHMM()):0,l=o?parseInt(new Date(o).YYMMDDHHMM()):0;r<l&&(c=-1),r>l&&(c=1)}else i.toLocaleLowerCase()<o.toLocaleLowerCase()?c=-1:i.toLocaleLowerCase()>o.toLocaleLowerCase()&&(c=1);return c*a}});this.setState({_tasks:s,sortOrder:-1*a})},t.prototype.toggleStopWorkButton=function(e){this.setState({showStopWorkConfirmation:e})},t.prototype.handleStopWork=function(e){return j(this,void 0,void 0,function(){var t;return y(this,function(n){switch(n.label){case 0:return(t=JSON.parse(b.a.getItem("user"))).workingStatus="Not Working",b.a.setItem("user",JSON.stringify(t)),[4,Object(u.u)(t.contact,"Not Working").then(function(){e.logout()})];case 1:return n.sent(),[2]}})})},t.prototype.saveNote=function(e){return j(this,void 0,void 0,function(){var t,n=this;return y(this,function(a){switch(a.label){case 0:return t=this.state.note,Object(c.a)(!0),[4,Object(r.e)(e,t).then(function(){n.props._fetchTasks()})];case 1:return a.sent(),Object(c.a)(!1),[2]}})})},t.prototype.filterAssignee=function(e){if("ALL"==e)this.setState({_tasks:this.props.tasks});else{var t=this.props.tasks.filter(function(t){return t.assignedTo.value.includes(e)||t.assignedToName.value.includes(e)});this.setState({_tasks:t})}},t.prototype.getNextTask=function(){return j(this,void 0,void 0,function(){var e,t;return y(this,function(n){switch(n.label){case 0:return Object(c.a)(!0),t=JSON.parse(b.a.getItem("user")),[4,Object(r.m)(this.props.buildingName).then(function(n){var a=(t.group.split(",").find(function(e){return"Admin"==e||"Manager"==e})?n:n.filter(function(e){return-1!=Object(s.g)(e.assignedTo).split(", ").findIndex(function(e){return e==t.contact})||Object(s.g)(e.enteredBy)==t.contact})).filter(function(e){return!e.hasOwnProperty("startTime")}).sort(function(e,t){return parseInt(e.criticality.value)-parseInt(t.criticality.value)});e=a[0]}).catch(function(e){return e})];case 1:return n.sent(),Object(c.a)(!1),[2,e]}})})},t.prototype.sendSms=function(e){return j(this,void 0,void 0,function(){var t,n,a,i;return y(this,function(o){return this.state,t=this.props,n=t.instance,a=t.buildingName,i=t.people,(e.assignedTo.value.indexOf(",")>0?e.assignedTo.value.split(", "):[e.assignedTo.value]).map(function(t){var o=i.find(function(e){return Object(s.g)(e.contact)==t});o&&Object(g.v)(Object(s.g)(o.smsSchedule))&&o&&Object(s.g)(o.phone).length>0&&w.SendSMS(Object(s.g)(o.phone),'"'+Object(s.g)(e.taskNumber)+" : "+Object(s.g)(e.action)+'" Task has been Assigned  to you on : '+new Date(Object(s.g)(e.startTime)).toLocaleString()+", To view the Task: "+window.location.origin+"/#"+n+"/"+a+"/Tasks",n,function(e){})}),[2]})})},t.prototype.sendMail=function(e){return j(this,void 0,void 0,function(){var t,n,a,i,o,c,r;return y(this,function(l){return this.state,t=this.props,n=t.instance,a=t.buildingName,i=t.people,o='"'+Object(s.g)(e.taskNumber)+" : "+Object(s.g)(e.action)+'" Task has been Assigned  to you on : '+new Date(Object(s.g)(e.startTime)).toLocaleString()+", To view the Task: "+window.location.origin+"/#"+n+"/"+a+"/Tasks",(c=i.find(function(t){return Object(s.g)(t.contact)==Object(s.g)(e.enteredBy)}))&&Object(s.g)(c.email).length>0&&((r=Object()).subject="Task Notification",r.to=Object(s.g)(c.email),r.text=o,Object(f.a)(r)),[2]})})},t.prototype.handleFileAttachment=function(e){},t.prototype.handleChecklistAssignment=function(){return j(this,void 0,void 0,function(){var e,t,n,a,i,o,c,l,u,d,m,b=this;return y(this,function(f){switch(f.label){case 0:return e=this.state,t=e.selectedChecklist,n=e.selectedChecklistTask,a=this.props.buildingName,(i=Object()).ontology=Object(g.p)(6),i.asset=Object(s.g)(t.asset),o=Object(s.g)(t.templateID),c=""!=Object(s.g)(t.uses)?(parseInt(Object(s.g)(t.uses))+1).toString():"1",i.checklistID=o+"-"+c,i.assetType=Object(s.g)(t.assetType),i.rdfsLabel=Object(s.g)(t.rdfsLabel),i.activities=[],l=Object(s.g)(t.activities).split(","),[4,Object(p.e)(a,l)];case 1:for(u=f.sent(),d=0;d<u.length;d++)(m=Object()).ontology=Object(g.p)(6),m.action=Object(s.g)(u[d].action),m.point=Object(s.g)(u[d].point),m.pointTag=Object(s.g)(u[d].pointTag),m.reading=Object(s.g)(u[d].reading),m.unit=Object(s.g)(u[d].unit),m.notes=Object(s.g)(u[d].notes),m.status="Pending",i.activities.push(m);return[4,Object(p.h)(i,a,!1).then(function(){return j(b,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,Object(p.j)(a,Object(s.g)(t.ontology),c)];case 1:return e.sent(),[4,Object(r.h)(n,i.ontology)];case 2:return e.sent(),[2]}})})})];case 2:return f.sent(),t=Object(),this.setState({selectedChecklist:t},function(){b.props._fetchTasks()}),[2]}})})},t.prototype.getChecklistBoard=function(e){return j(this,void 0,void 0,function(){var t,n=this;return y(this,function(a){switch(a.label){case 0:return t=this.props.buildingName,e&&""!=e?[4,Object(p.f)(t,e).then(function(e){return j(n,void 0,void 0,function(){var n,a,i,o,c,r;return y(this,function(l){switch(l.label){case 0:return n=e[0],(a=Object()).ontology=Object(s.g)(n.ontology),a.checklistID=Object(s.g)(n.checklistID),a.asset=Object(s.g)(n.asset),a.assetLabel=Object(s.g)(n.assetLabel),a.assetType=Object(s.g)(n.assetType),a.rdfsLabel=Object(s.g)(n.rdfsLabel),a.activities=[],i=Object(s.g)(n.activities).split(","),[4,Object(p.d)(t,i)];case 1:for(o=l.sent(),c=0;c<o.length;c++)(r=Object()).ontology=Object(s.g)(o[c].ontology),r.action=Object(s.g)(o[c].action),r.point=Object(s.g)(o[c].point),r.pointLabel=Object(s.g)(o[c].pointLabel),r.pointTag=Object(s.g)(o[c].pointTag),r.reading=Object(s.g)(o[c].reading),r.unit=Object(s.g)(o[c].unit),r.notes=Object(s.g)(o[c].notes),r.status=Object(s.g)(o[c].status),r.upload=Object(s.g)(o[c].upload),r.isVerified="true"==Object(s.g)(o[c].isVerified),r.completedOn=Object(s.g)(o[c].completedOn),a.activities.push(r);return this.setState({checklistBoard:a}),[2]}})})})]:[3,2];case 1:return a.sent(),[3,3];case 2:this.setState({checklistBoard:Object()}),a.label=3;case 3:return[2]}})})},t.prototype._unassignChecklist=function(e){return j(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e?(Object(c.a)(!0),[4,Object(p.a)(e,this.props.buildingName).then(function(e){}).catch(function(e){return e})]):[3,2];case 1:t.sent(),Object(c.a)(!1),t.label=2;case 2:return[2]}})})},t.prototype.handleChecklistBoard=function(e){this.setState({checklistBoard:e})},t.prototype.updateChecklist=function(){return j(this,void 0,void 0,function(){var e,t;return y(this,function(n){switch(n.label){case 0:return e=this.state.checklistBoard,t=this.props.buildingName,Object(c.a)(!0),[4,Object(p.h)(e,t,!0)];case 1:return n.sent(),Object(c.a)(!1),console.log(e),[2]}})})},t.prototype._deleteChecklist=function(e){return j(this,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return e&&e.checklistID?(Object(c.a)(!0),[4,Object(p.b)(Object(s.g)(e.checklistID),this.props.buildingName).then(function(e){}).catch(function(e){return e})]):[3,3];case 1:return t.sent(),[4,this._unassignChecklist(Object(s.g)(e.task)).then(function(e){}).catch(function(e){return e})];case 2:t.sent(),this.props._fetchTasks(),Object(c.a)(!1),t.label=3;case 3:return[2]}})})},t.prototype.updateRecentPerformance=function(){return j(this,void 0,void 0,function(){var e,t,n=this;return y(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,t=JSON.parse(b.a.getItem("user")),[4,Object(h.b)(e,t.contact).then(function(e){if(null!=e&&""!=e._id){var t={_id:e._id,contact:e.contact,contactName:e.contactName,status:e.status,taskOntology:e.taskOntology,taskDescription:e.taskDescription,startDate:e.startDate,endDate:new Date,building:e.building,entryTimestamp:e.entryTimestamp,floorOntology:e.floorOntology,floorDescription:e.floorDescription,assetOntology:e.assetOntology,assetDescription:e.assetDescription,spaceOntology:e.spaceOntology,spaceDescription:e.spaceDescriptionres,workOrder:e.workOrder,stageOntologyReference:e.stageOntologyReference};n.updateCrewPerformance(t)}})];case 1:return a.sent(),[2]}})})},t.prototype.updateCrewPerformance=function(e){return j(this,void 0,void 0,function(){return y(this,function(t){return Object(h.c)(e).then(function(e){}).catch(function(e){return e}),[2]})})},t.prototype.handleScan=function(e){var t=this.state.qrValdiationTask,n=JSON.parse(b.a.getItem("user"));if(null!==e)if(Object(s.g)(t.QRTag).includes(e.toString().trim())){Object(c.a)(!0),document.getElementById("qrDailogeClose").click(),this.updateTaskStatus(Object(s.g)(t.task),"Completed"),this.updateRecentPerformance();var a={contact:n.contact,contactName:n.name,status:"Completed",taskOntology:Object(s.g)(t.task),taskDescription:Object(s.g)(t.description),startDate:new Date,endDate:new Date,building:this.props.buildingName,entryTimestamp:new Date,floorOntology:Object(s.g)(t.floor),floorDescription:Object(s.g)(t.floorRdfsLabel),assetOntology:Object(s.g)(t.equipSubject),assetDescription:Object(s.g)(t.equipRdfsLabel),spaceOntology:Object(s.g)(t.spaceSubject),spaceDescription:Object(s.g)(t.spaceRdfsLabel),workOrder:""!=Object(s.g)(t.workOrder)?Object(s.g)(t.workOrder):"wo-55555",stageOntologyReference:Object(s.g)(t.task)?Object(s.g)(t.task):""};this.updateCrewPerformance(a),this.setState({isQrCameraMode:!1}),Object(c.a)(!1)}else alert("QR code dosenot Match...")},t.prototype.getWorkflowTypePrefix=function(e){var t="";switch(e){case"Contract":t="Con";break;case"Job":t="Job";break;case"Inspection":t="Insp";break;case"Measure":t="Meas";break;case"IPMVP":t="IPMVP";break;case"LOTO":t="LOTO";break;default:t=""}return t},t.prototype.hasOtherStartedTask=function(){return j(this,void 0,void 0,function(){var e,t,n,a,i=this;return y(this,function(o){switch(o.label){case 0:return e=JSON.parse(b.a.getItem("user")),t=!1,[4,Object(r.l)(e.contact)];case 1:return n=o.sent(),(a=n&&n.length>0&&n.filter(function(t){return t.hasOwnProperty("startTime")&&"Started"==Object(s.g)(t.status)&&"true"!=Object(s.g)(t.isSequence)&&Object(s.g)(t.assignedTo)==e.contact})).length>0&&(confirm("If you start this task you will pause the one you are working on, is this ok?")?a.map(function(e){Object(r.f)(Object(s.g)(e.task),"Interrupted"),i.updateTaskStatus(Object(s.g)(e.task),"Paused")}):t=!0),[2,t]}})})},t.prototype.formatDate=function(e){var t=new Date,n=Object(g.i)(t,e);return n<99?n+" minutes ago":e.onitDateFormat(!0)},t.prototype.updateTeamMembers=function(e,t){return j(this,void 0,void 0,function(){return y(this,function(n){switch(n.label){case 0:return[4,Object(r.C)(e,[t.contact])];case 1:return n.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=JSON.parse(b.a.getItem("user")),n=Object(o.b)(t,"task-ticket","write"),u="1"==t.role||"2"==t.role,d=this.props,g=d.instance,p=d.buildingName,f=d.listType,h=d.isScreenSaverCall,O=d.people,T=this.state,w=T.pauseNote,N=T.why,E=T.showStopWorkConfirmation;return a.createElement(i.a.Consumer,null,function(i){return a.createElement("div",{className:"card"},a.createElement("div",{className:"content",style:{paddingTop:"0px"}},a.createElement("div",{className:"dataCard"},!h&&a.createElement("div",{className:"row no-padding"},a.createElement("div",{className:"col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"col-sm-3 col-xs-3 small grid-header-left",onClick:function(){return e.sortTasks("Issue")}},a.createElement("i",{className:"fa fas fa-sort"}),"Doing"),"DoNext"!=f&&"DoIf"!=f&&a.createElement("div",{className:"col-sm-2 small grid-header",onClick:function(){return e.sortTasks("Start_Time")}},a.createElement("i",{className:"fa fas fa-sort"}),"Assigned"),u&&a.createElement("div",{className:"col-sm-2 small grid-header",onClick:function(){return e.sortTasks("Task_Assigned")}},a.createElement("i",{className:"fa fas fa-sort"}),"Assigned To"),!u&&a.createElement("div",{className:"col-sm-2 col-xs-2 small grid-header",onClick:function(){return e.sortTasks("Assigned_By")}},a.createElement("i",{className:"fa fas fa-sort"}),"Assigned By"),a.createElement("div",{className:"col-sm-2 col-xs-2 small grid-header",onClick:function(){return e.sortTasks("buil_Nam")}},a.createElement("i",{className:"fa fas fa-sort"}),"Location"),f&&"DoIf"==f&&u&&a.createElement("div",{className:"col-sm-2 col-xs-2 small headingText grid-header",onClick:function(){return e.sortTasks("Acknowledged")}},a.createElement("i",{className:"fa fas fa-sort"}),"Acknowledge"),a.createElement("div",{className:("DoNext"==f?"col-sm-5":"col-sm-3")+" small headingText grid-header center",style:{display:"block"}},a.createElement("span",null,"Actions")))),e.state._tasks&&e.state._tasks.map(function(o,d){var b=e.setRowColor(o),h=!1,T=[];if(Object(s.g)(o.assignedTo)&&(T=Object(s.g)(o.assignedTo).split(","))&&T.length>0)for(var S=0;S<T.length;S++){T[S]==t.contact&&(h||(h=!0))}var C=""!=Object(s.g)(o.parentTask),D="true"==Object(s.g)(o.isSequence),I="true"==Object(s.g)(o.isRecurring),x=""!=Object(s.g)(o.wfOntology),_="true"==Object(s.g)(o.isStage)&&""!=Object(s.g)(o.workflowType);if("Started"==Object(s.g)(o.status)){var L=document.getElementById("myVideo")&&document.getElementById("myVideo");L&&L.pause()}return a.createElement("div",{key:d,className:"row "+b},a.createElement("div",{className:"col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"col-sm-3 small trim-data",title:Object(s.g)(o.action)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Doing"),D&&a.createElement("span",{className:"pull-left"},a.createElement("i",{style:{color:"rgb("+Object(s.g)(o.color)+")"},className:"fa fa-list"})),C&&!D&&a.createElement("span",{className:"pull-left"},a.createElement("i",{style:{color:"rgb("+Object(s.g)(o.color)+")"},className:"fa fa-circle"})),I&&a.createElement("span",{className:"pull-left"},a.createElement("b",null,"REC: ")),_&&a.createElement("span",{className:"pull-left"},a.createElement("b",null," ",e.getWorkflowTypePrefix(Object(s.g)(o.workflowType)),":")),a.createElement("a",{className:"bold",style:{color:"black"},href:C?"#"+g+"/"+p+"/SubTask/"+Object(s.g)(o.task):" #"+g+"/"+p+"/NewTask/"+Object(s.g)(o.task)},Object(s.g)(o.action)),x&&a.createElement("span",{className:"bold"},"\xa0(WF)")),"DoNext"!=f&&"DoIf"!=f&&a.createElement("div",{className:"col-sm-2 small trim-data bold",title:o.startTime?new Date(Object(s.g)(o.startTime)).onitDateFormat(!0):""},a.createElement("span",{className:"hidden visible-xs-inline headingText bold"},"Assigned"),o.startTime?new Date(Object(s.g)(o.startTime)).onitDateFormat(!0):"",a.createElement("br",null)),u&&a.createElement("div",{className:"col-sm-2 small trim-data bold",title:Object(s.g)(o.assignedToName)},a.createElement("span",{className:"hidden visible-xs-inline headingText bold"},"Assigned To"),Object(s.g)(o.assignedToName).length>0?Object(s.g)(o.assignedToName):Object(s.g)(o.assignedTo)),!u&&a.createElement("div",{className:"col-sm-2 small trim-data bold",title:Object(s.g)(o.enteredByName)},a.createElement("span",{className:"hidden visible-xs-inline headingText bold"},"Assigned By"),Object(s.g)(o.enteredByName).length>0?Object(s.g)(o.enteredByName):Object(s.g)(o.enteredBy)),a.createElement("div",{className:"col-sm-2 small trim-data bold",title:Object(s.g)(o.buildingName)},a.createElement("span",{className:"hidden visible-xs-inline headingText bold"},"Building"),Object(s.g)(o.buildingName)),f&&"DoIf"==f&&""==Object(s.g)(o.isForcePush)&&u&&a.createElement("div",{className:"col-sm-2 dv-acknowlege"},a.createElement("div",{className:"row"},a.createElement("div",{className:"switch-container pull-right"},a.createElement("label",null,a.createElement("input",{checked:"true"==Object(s.g)(o.acknowledged),onChange:function(t){return j(e,void 0,void 0,function(){var e,n=this;return y(this,function(a){switch(a.label){case 0:return Object(c.a)(!0),e=t.target.checked,[4,Object(r.c)(Object(s.g)(o.task),t.target.checked).then(function(){return j(n,void 0,void 0,function(){return y(this,function(t){return e&&(this.triggerDoIfTasks(),setTimeout(function(){Object(k.n)()},1500)),[2]})})})];case 1:return a.sent(),Object(c.a)(!1),[4,this.props._fetchTasks()];case 2:return a.sent(),[2]}})})},className:"switch",type:"checkbox"}),a.createElement("div",null,a.createElement("div",null)))))),f&&"DoIf"==f&&"true"==Object(s.g)(o.isForcePush)&&u&&a.createElement("div",{className:"col-sm-2 small trim-data bold",title:Object(s.g)(o.assignedToName)},a.createElement("span",{className:"lblForcePush"},"1"==Object(s.g)(o.criticality)||"2"==Object(s.g)(o.criticality)?"Do Now":"Do Next")),n&&a.createElement("div",{className:("DoNext"==f?"col-sm-5":"col-sm-3")+" col-xs-12"},(!u||h)&&"Completed"!=Object(s.g)(o.status)&&"Assigned"!=Object(s.g)(o.status)&&"DoingNow"==f&&"true"!=Object(s.g)(o.isSequence)&&a.createElement("button",{className:"btn-xs btn-complete btn-fill pull-right",title:"Complete Task",onClick:function(n){return j(e,void 0,void 0,function(){var e,n,a,l,u=this;return y(this,function(d){switch(d.label){case 0:return i.isClockedIn?(Object(c.a)(!0),this.updateTaskStatus(Object(s.g)(o.task),"Completed",(new Date).toString()),e=new Date,n=new Date(e.setTime(e.getTime()+6e4)),[4,this.updateRecentPerformance()]):(document.getElementById("ClockInConfirm").click(),[2]);case 1:return d.sent(),a={contact:t.contact,contactName:t.name,status:"Completed",taskOntology:Object(s.g)(o.task),taskDescription:Object(s.g)(o.description),startDate:new Date,endDate:n,building:p,entryTimestamp:new Date,floorOntology:Object(s.g)(o.floor),floorDescription:Object(s.g)(o.floorRdfsLabel),assetOntology:Object(s.g)(o.equipSubject),assetDescription:Object(s.g)(o.equipRdfsLabel),spaceOntology:Object(s.g)(o.spaceSubject),spaceDescription:Object(s.g)(o.spaceRdfsLabel),workOrder:""!=Object(s.g)(o.workOrder)?Object(s.g)(o.workOrder):"wo-55555",stageOntologyReference:Object(s.g)(o.task)?Object(s.g)(o.task):""},this.updateCrewPerformance(a),l={contact:t.contact,contactName:t.name,status:"Not Working",taskOntology:Object(s.g)(o.task),taskDescription:Object(s.g)(o.description),startDate:n,endDate:n,building:p,entryTimestamp:new Date,floorOntology:Object(s.g)(o.floor),floorDescription:Object(s.g)(o.floorRdfsLabel),assetOntology:Object(s.g)(o.equipSubject),assetDescription:Object(s.g)(o.equipRdfsLabel),spaceOntology:Object(s.g)(o.spaceSubject),spaceDescription:Object(s.g)(o.spaceRdfsLabel),workOrder:""!=Object(s.g)(o.workOrder)?Object(s.g)(o.workOrder):"wo-55555",stageOntologyReference:Object(s.g)(o.task)?Object(s.g)(o.task):""},this.updateCrewPerformance(l),"Contract"!=Object(s.g)(o.workflowType)?[3,4]:""==Object(s.g)(o.contractFileName)?[3,3]:[4,Object(r.w)(Object(s.g)(o.contractFileName))];case 2:d.sent(),d.label=3;case 3:Object(c.a)(!1),d.label=4;case 4:return this.checkDependency(o.task.value,"Completed"),setTimeout(function(){return j(u,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return[4,this.triggerDoIfTasks()];case 1:return e.sent(),[2]}})})},1e3),setTimeout(function(){Object(k.n)()},5e3),Object(r.v)(g,this.props.people),Object(c.a)(!1),[2]}})})}},a.createElement("i",{className:"fa fa-check"})),u&&!C&&a.createElement("button",{className:"btn-xs btn-danger btn-fill pull-right",title:"Delete Task",onClick:function(t){e.props.onDeleteTask(o)}},a.createElement("i",{className:"fa fa-trash"})),(C&&"DoingNow"==f||Object(s.g)(o.assignedTo)==t.contact&&C)&&a.createElement("button",{style:{backgroundColor:"#0080FE"},className:"btn-xs btn-fill pull-right",title:"Chat",onClick:function(t){return j(e,void 0,void 0,function(){return y(this,function(e){return window.location.hash=g+"/"+p+"/ChatWindow/"+Object(s.g)(o.task)+"/SubTask/"+Object(s.g)(o.parentTask),[2]})})}},a.createElement("i",{style:{color:"white"},className:"fa fa-comments"})),!C&&""===Object(s.g)(o.subTasks)&&"Completed"!=Object(s.g)(o.status)&&a.createElement("button",{style:{backgroundColor:"#0080FE"},className:"btn-xs btn-fill pull-right",title:"Chat",onClick:function(t){return j(e,void 0,void 0,function(){return y(this,function(e){return window.location.hash=g+"/"+p+"/ChatWindow/"+Object(s.g)(o.task)+"/SubTask/"+Object(s.g)(o.task)+"/"+Object(s.g)(o.enteredBy),[2]})})}},a.createElement("i",{style:{color:"white"},className:"fa fa-comments"})),u&&C&&"Completed"!=Object(s.g)(o.status)&&a.createElement("button",{className:"btn-xs btn-success btn-fill pull-right",title:"Edit Sub Task",onClick:function(t){return j(e,void 0,void 0,function(){return y(this,function(e){return window.location.hash=g+"/"+p+"/EditSubTaskForm/"+Object(s.g)(o.parentTask)+"/"+Object(s.g)(o.task),[2]})})}},a.createElement("i",{className:"fa fa-pencil"})),u&&!C&&"DoingNow"==f&&Object(s.g)(o.spaceSubject)&&a.createElement("button",{className:"btn-xs btn-object-form-view btn-fill pull-right",title:"Matter Port",onClick:function(e){window.location.hash=g+"/"+p+"/MatterPort/"+Object(s.g)(o.spaceSubject)+"/"+Object(s.g)(o.floor)+"/"+Object(s.g)(o.building)+"/"+Object(s.g)(o.task)}},a.createElement("img",{style:{width:20,height:17},src:"assets/img/virtual-bim.png"})),u&&!C&&"Done"!=f&&a.createElement("button",{className:"btn-xs btn-success btn-fill pull-right",title:"Edit Task",onClick:function(e){window.location.hash=g+"/"+p+"/NewTask/"+Object(s.g)(o.task)}},a.createElement("i",{className:"fa fa-pencil"})),u&&"false"==Object(s.g)(o.archived)&&a.createElement("button",{className:"btn-xs btn-dark btn-fill pull-right",title:"Archive Task",onClick:function(e){document.getElementById("btnConfirmAllow"+d.toString()+Object(s.g)(o.task)).click()}},a.createElement("i",{className:"fa fa-archive"})),a.createElement("button",{style:{opacity:e.props.isTimedIn?1:.5,display:"none"},id:"btnConfirmAllow"+d.toString()+Object(s.g)(o.task),"data-toggle":"modal","data-target":"#ConfirmAllowDialog"+d.toString()+Object(s.g)(o.task)},"."),a.createElement(m.a,{instance:e.props.instance,id:"ConfirmAllowDialog"+d.toString()+Object(s.g)(o.task),showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to move Archived Tasks?",heading:"Confirm...",onConfirmButtonClick:function(){e.archiveTask(o.task.value,!0)}}),(!u||h)&&("Paused"==Object(s.g)(o.status)||"Pending"==Object(s.g)(o.status)||"Assigned"==Object(s.g)(o.status))&&"DoingNow"==f&&(""==Object(s.g)(o.isQRTask)||"false"==Object(s.g)(o.isQRTask))&&"true"!=Object(s.g)(o.isSequence)&&a.createElement("button",{className:"btn-xs btn-start btn-fill pull-right",title:"Start Task",onClick:function(n){return j(e,void 0,void 0,function(){var e,n,a,l,u,d,m=this;return y(this,function(g){switch(g.label){case 0:return i.isClockedIn?[4,this.hasOtherStartedTask()]:(e=this.state.n_task,e=Object(s.g)(o.task),this.setState({n_task:e}),document.getElementById("ClockInConfirm").click(),Object(k.n)(),[2]);case 1:return g.sent()?[2]:(Object(c.a)(!0),[4,this.updateTaskStatus(Object(s.g)(o.task),"Started",(new Date).toString(),Object(s.g)(o.index))]);case 2:return g.sent(),[4,Object(r.j)(o.task.value)];case 3:return g.sent(),o.workflowType&&o.contractFileName&&"Contract"==Object(s.g)(o.workflowType)&&""!==Object(s.g)(o.contractFileName)?(Object(c.a)(!0),n=O.find(function(e){return Object(s.g)(e.contact)==Object(s.g)(o.assignedTo)}),a="",n&&""!=Object(s.g)(n.email)&&(a=Object(s.g)(n.email)),l=Object(s.g)(o.contractFileName),u=Object(s.g)(a),[4,Object(r.z)([u],["write"],l).then(function(e){if(e.link){var t=e.link[0].link.webUrl;window.open(t,"_blank")}Object(c.a)(!1)})]):[3,5];case 4:g.sent(),Object(c.a)(!1),g.label=5;case 5:return[4,this.updateRecentPerformance()];case 6:return g.sent(),d={contact:t.contact,contactName:t.name,status:"Started",taskOntology:Object(s.g)(o.task),taskDescription:Object(s.g)(o.description),startDate:new Date,endDate:new Date,building:p,entryTimestamp:new Date,floorOntology:Object(s.g)(o.floor),floorDescription:Object(s.g)(o.floorRdfsLabel),assetOntology:Object(s.g)(o.equipSubject),assetDescription:Object(s.g)(o.equipRdfsLabel),spaceOntology:Object(s.g)(o.spaceSubject),spaceDescription:Object(s.g)(o.spaceRdfsLabel),workOrder:""!=Object(s.g)(o.workOrder)?Object(s.g)(o.workOrder):"wo-55555",stageOntologyReference:Object(s.g)(o.task)?Object(s.g)(o.task):""},this.updateCrewPerformance(d),this.checkDependency(o.task.value,"Started"),o.subTasks&&Object(s.g)(o.subTasks)||!o.status||"Assigned"!=Object(s.g)(o.status)?[3,9]:o.isTeamTask&&Object(s.g)(o.isTeamTask)&&"true"==Object(s.g)(o.isTeamTask)?[3,9]:[3,7];case 7:return[4,this.updateTeamMembers(Object(s.g)(o.task),t)];case 8:g.sent(),g.label=9;case 9:return setTimeout(function(){m.triggerDoIfTasks(),Object(k.n)()},1e3),this.props._fetchTasks(),Object(c.a)(!1),[2]}})})}},a.createElement("i",{className:"fa fa-play"})),""!==Object(s.g)(o.checklistID)&&"Started"==Object(s.g)(o.status)&&"DoingNow"==f&&a.createElement("button",{onClick:function(){window.location.hash=g+"/"+p+"/ObjectFormView/"+Object(s.g)(o.task)},title:"Do What Tasks",className:"btn-xs btn-object-form-view btn-fill pull-right"},a.createElement("i",{className:"fa fa-tasks"})),(!u||h)&&""!=Object(s.g)(o.QRTag)&&"true"==Object(s.g)(o.isQRTask)&&"DoingNow"==f&&a.createElement(a.Fragment,null,a.createElement("button",{className:"btn-xs btn-secondary btn-fill pull-right",title:"Scan Qr Code",onClick:function(t){return j(e,void 0,void 0,function(){return y(this,function(e){return this.setState({isQrCameraMode:!0,qrValdiationTask:o},function(){document.getElementById("qrDailogebtn").click()}),[2]})})}},a.createElement("i",{className:"fa fa-qrcode"})),a.createElement("button",{id:"qrDailogebtn",type:"button","data-toggle":"modal","data-target":"#qrDailoge",className:"hidden"},"."),a.createElement(l.a,{id:"qrDailoge",closeButtonId:"qrDailogeClose",heading:"Scan QR",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1,showSaveButton:!1},e.state.isQrCameraMode&&a.createElement("div",null,a.createElement("div",{className:"Qr-close-btn",onClick:function(){e.setState({isQrCameraMode:!e.state.isQrCameraMode})}},"X"),a.createElement(v.a,{delay:500,onError:function(e){console.log(e)},onScan:e.handleScan,style:{width:"100%"}})))),(!u||h)&&""!=Object(s.g)(o.contractFileUrl)&&a.createElement("button",{className:"btn-xs btn-"+("Started"==Object(s.g)(o.status)?"active":"start")+" btn-fill pull-right",title:"Open Contract",onClick:function(t){return j(e,void 0,void 0,function(){return y(this,function(e){return window.open(Object(s.g)(o.contractFileUrl),"_blank"),[2]})})}},a.createElement("i",{className:"fa fa-paperclip"})),(!u||h)&&"Started"==Object(s.g)(o.status)&&"DoIf"!=f&&"true"!=Object(s.g)(o.isSequence)&&a.createElement(a.Fragment,null,i.isClockedIn?a.createElement("button",{id:"btn-PauseTask",className:"btn-xs btn-pause btn-fill pull-right","data-toggle":"modal","data-target":"#PauseDialog",title:"Pause Task",onClick:function(e){}},a.createElement("i",{className:"fa fa-pause"})):a.createElement("button",{id:"btn-PauseTask",className:"btn-xs btn-pause btn-fill pull-right",title:"Pause Task",onClick:function(e){i.isClockedIn||document.getElementById("ClockInConfirm").click()}},a.createElement("i",{className:"fa fa-pause"})),a.createElement(l.a,{id:"PauseDialog",heading:"",showSaveButton:!0,saveButtonText:"Submit",onSaveButtonClick:function(){return j(e,void 0,void 0,function(){var e;return y(this,function(n){switch(n.label){case 0:return""==N?(alert("Select any reason first...!"),[2]):"other"==N?[3,3]:[4,Object(r.f)(Object(s.g)(o.task),N)];case 1:return n.sent(),[4,this.updateTaskStatus(Object(s.g)(o.task),"Paused")];case 2:return n.sent(),[3,6];case 3:return[4,Object(r.f)(o.task.value,w)];case 4:return n.sent(),[4,this.updateTaskStatus(Object(s.g)(o.task),"Paused")];case 5:n.sent(),n.label=6;case 6:return[4,this.updateRecentPerformance()];case 7:return n.sent(),e={contact:t.contact,contactName:t.name,status:"Paused",taskOntology:Object(s.g)(o.task),taskDescription:Object(s.g)(o.description),startDate:new Date,endDate:new Date,building:p,entryTimestamp:new Date,floorOntology:Object(s.g)(o.floor),floorDescription:Object(s.g)(o.floorRdfsLabel),assetOntology:Object(s.g)(o.equipSubject),assetDescription:Object(s.g)(o.equipRdfsLabel),spaceOntology:Object(s.g)(o.spaceSubject),spaceDescription:Object(s.g)(o.spaceRdfsLabel),workOrder:""!=Object(s.g)(o.workOrder)?Object(s.g)(o.workOrder):"wo-55555",stageOntologyReference:Object(s.g)(o.task)?Object(s.g)(o.task):""},this.updateCrewPerformance(e),Object(k.n)(),"Contract"!=Object(s.g)(o.workflowType)?[3,9]:[4,Object(r.w)(Object(s.g)(o.contractFileName))];case 8:n.sent(),n.label=9;case 9:return[2]}})})},isEditForm:!1,showCancelButton:!0,cancelButtonText:"cancel",cancelButtonId:"btnCloseDoIfDialog"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"reason"},"why? "))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("select",{id:"reason",className:"form-control col-md-6",onChange:function(t){e.setState({why:t.target.value})},value:N},a.createElement("option",{value:""},"Select Reason"),a.createElement("option",{value:"taking a break",key:-1},"Break"),a.createElement("option",{value:"taking lunch",key:-2},"Lunch"),a.createElement("option",{value:"other",key:-3},"Other"))))),"other"==N&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"pauseNote"},"Reason "))),a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("input",{className:"form-control",type:"text",id:"pauseNote",value:w,onChange:function(t){e.setState({pauseNote:t.target.value})}})))),E&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"pauseNote"},"You are Signing out of work, Correct?"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("button",{type:"button",className:"btn btn-primary btn-fill",onClick:function(){return j(e,void 0,void 0,function(){var e;return y(this,function(n){switch(n.label){case 0:return[4,this.updateTaskStatus(Object(s.g)(o.task),"Paused")];case 1:return n.sent(),[4,this.updateRecentPerformance()];case 2:return n.sent(),e={contact:t.contact,contactName:t.name,status:"Off",taskOntology:"",taskDescription:"",startDate:new Date,endDate:new Date,building:p,entryTimestamp:new Date,floorOntology:"",floorDescription:"",assetOntology:"",assetDescription:"",spaceOntology:"",spaceDescription:"",workOrder:"wo-00000",stageOntologyReference:""},[4,this.updateCrewPerformance(e)];case 3:return n.sent(),[4,this.handleStopWork(i)];case 4:return n.sent(),[2]}})})}},"Yes"),a.createElement("button",{type:"button",className:"btn btn-danger btn-fill",onClick:function(){e.toggleStopWorkButton(!1)}},"No"))))),a.createElement("button",{id:"statusDailogebtn",type:"button","data-toggle":"modal","data-target":"#statusDailoge",className:"hidden"},"."),a.createElement(l.a,{id:"statusDailoge",heading:"Cannot Complete Task",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1,showSaveButton:!1},a.createElement("div",{className:"card padding-10 no-margin"},a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("h6",{className:"center padding-10 no-margin"},"You still have activities to complete"))))))))),a.createElement("button",{style:{opacity:e.props.isTimedIn?1:.5,display:"none"},id:"ClockInConfirm","data-toggle":"modal","data-target":"#ClockInConfirmDialog"},"."),a.createElement(m.a,{instance:e.props.instance,id:"ClockInConfirmDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"You should be Clocked In to change task status. Clock In?",heading:"Alert",onConfirmButtonClick:function(){return j(e,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return document.getElementById("clockInOutButton"),document.getElementById("clockInOutButton")?(document.getElementById("clockInOutButton").click(),[4,this.updateTaskStatus(this.state.n_task,"Started",(new Date).toString(),Object(s.g)(o.index))]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}})),u&&""!=Object(s.g)(o.pauseNote)&&a.createElement("div",{className:"col-sm-12 no-padding"},a.createElement("label",{className:"pause-note",title:"Reason: "+Object(s.g)(o.pauseNote).split(" at ")[0]},"Paused ",e.formatDate(new Date(Object(s.g)(o.pauseNote).split(" at ")[1])))))}))))})},t}(a.Component);t.a=N},1892:function(e,t,n){"use strict";var a=n(2),s=(n.n(a),n(10)),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),o=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.recurredTasks,n=e.buildingName,i=e.instance;this.state;return a.createElement("div",{className:"container-fluid no-padding"},a.createElement("div",{className:"content"},a.createElement("div",{className:"card padding-10"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row col-md-12 col-sm-12 hidden-xs hidden-sm"},a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header-left"},"Task "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Space "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Device "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Recurrence"),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Next Recur time "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Ends ")),t&&t.map(function(e,t){return a.createElement("div",{className:"row col-md-12 col-sm-12"},a.createElement("div",{className:"col-md-2 col-sm-2 small trim-data",title:Object(s.g)(e.description)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Task"),Object(s.g)(e.description)),a.createElement("div",{className:"col-md-2 col-sm-2 small trim-data",title:Object(s.g)(e.spaceRdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Space"),Object(s.g)(e.spaceRdfsLabel)),a.createElement("div",{className:"col-md-2 col-sm-2 small trim-data",title:Object(s.g)(e.equipRdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Device"),Object(s.g)(e.equipRdfsLabel)),a.createElement("div",{className:"col-md-2 col-sm-2 small trim-data",title:Object(s.g)(e.recurringSchedule)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Recurrence"),Object(s.g)(e.recurringSchedule)),a.createElement("div",{className:"col-md-2 col-sm-2 small trim-data",title:e.startTime?new Date(e.startTime.value).ToEasternDateTime():""},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Next Recur Time"),e.startTime?new Date(e.startTime.value).ToEasternDateTime():""),a.createElement("div",{className:"col-md-1 col-sm-1 small trim-data",title:e.endingDaysCount?Object(s.g)(e.endingDaysCount):"Never"},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Ends"),e.endingDaysCount?Object(s.g)(e.endingDaysCount)+" Days":"Never"),a.createElement("div",{className:"col-md-1 col-sm-1 small trim-data"},a.createElement("button",{className:"btn-xs btn-success btn-fill pull-right",title:"Edit Task","data-toggle":"modal","data-target":"#RecurTaskListDailogeBox",onClick:function(t){document.getElementById("RecurTaskListDailogeBox").click(),window.location.hash=i+"/"+n+"/NewTask/"+Object(s.g)(e.task)}},a.createElement("i",{className:"fa fa-pencil"}))))}),a.createElement("div",{className:"row col-md-12 col-sm-12 hidden-xs hidden-sm"},a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header-left"},"Task "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Space "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Device "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Recurrence"),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Next Recur time "),a.createElement("div",{className:"col-md-2 col-sm-2 small grid-header"},"Ends "))))))))},t}(a.Component);t.a=o},690:function(e,t,n){"use strict";t.f=function(e,t,n){return r(this,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({buildingName:e,ontology:t,uses:n},a.a.TASKTEMPLATE.UPDATESTAGETEMPLATEUSES,s.b.TASK).then(function(){Object(i.b)('Stage Template Uses "Updated"  Successfully.')}).catch(function(e){Object(i.a)("Error occured while saving Stage Template Uses.")})];case 1:return[2,o.sent()]}})})},t.e=function(e,t,n,o){return r(this,void 0,void 0,function(){return l(this,function(c){switch(c.label){case 0:return[4,Object(a.f)({buildingName:e,model:t,isEdit:n,saveStages:o},a.a.TASKTEMPLATE.SAVEPHASE,s.b.TASK).then(function(){Object(i.b)("Workflow "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Workflow.")})];case 1:return[2,c.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return r(this,void 0,void 0,function(){return l(this,function(i){switch(i.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASEDETAILLIST,s.b.TASK,n)];case 1:return[2,i.sent()]}})})},t.c=function(e,t,n){void 0===n&&(n=!0);return r(this,void 0,void 0,function(){return l(this,function(i){switch(i.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,s.b.TASK,n)];case 1:return[2,i.sent()]}})})},t.g=function(e,t,n){return r(this,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({taskID:e,status:t},a.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,s.b.TASK).then(function(){n||Object(i.b)("Status Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while update Status.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t){return r(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.DEPENDENCY.GETDEPENDENCY,s.b.TASK,!0)];case 1:return[2,n.sent()]}})})},t.d=function(e,t){var n=[];if(!(t.stages&&t.stages.length&&t.stages.length>0))return void Object(i.a)("Error finding Stages");for(var a=c({},t),s=0;s<a.stages.length;s++){for(var r=[],l=a.stages[s],u=0;u<l.subTasks.length;u++){var d=l.subTasks[u];if(!d.estimatedStartTime||void 0==d.estimatedStartTime)return void Object(i.a)("Not all Template Tasks have Estimate Start Time, To Normalise, provide dates first ");r.push(d.estimatedStartTime)}n.push(r)}for(var s=0;s<n.length;s++)for(var r=n[s],u=0;u<r.length;u++)if(0==s&&0==u)t.stages[s].estimatedStartTime=e,t.stages[s].subTasks[u].estimatedStartTime=e;else if(s>0&&0==u){var m=Object(o.g)(new Date(n[s-1][n[s-1].length-1]),new Date(n[s][u])),g=new Date(t.stages[s-1].subTasks[t.stages[s-1].subTasks.length-1].estimatedStartTime);g.setDate(new Date(t.stages[s-1].subTasks[t.stages[s-1].subTasks.length-1].estimatedStartTime).getDate()+m),t.stages[s].subTasks[u].estimatedStartTime=g,t.stages[s].estimatedStartTime=g}else{var m=Object(o.g)(new Date(n[s][u-1]),new Date(n[s][u])),g=new Date(t.stages[s].subTasks[u-1].estimatedStartTime);g.setDate(new Date(t.stages[s].subTasks[u-1].estimatedStartTime).getDate()+m),t.stages[s].subTasks[u].estimatedStartTime=g}var p=Object(o.g)(new Date(t.estimatedEndTime),new Date(t.estimatedStartTime));t.estimatedStartTime=e;var b=new Date(e);return b.setDate(b.getDate()+p),t.estimatedEndTime=b,t};var a=n(12),s=n(20),i=n(32),o=n(31),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}}});