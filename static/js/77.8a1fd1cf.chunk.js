webpackJsonp([77],{2950:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ZonesForm",function(){return Z});var a,i=n(2),o=(n.n(i),n(945)),r=n(126),l=n(122),s=n(709),c=n(721),d=n(11),u=n(771),m=n(711),p=n(13),h=n(20),v=n(702),f=n(703),b=n(8),g=n(707),y=n(1005),E=n(1004),S=n(1287),N=n(698),w=n(747),O=n(1614),j=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),C=this&&this.__assign||function(){return(C=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},D=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,l)}s((a=a.apply(e,t||[])).next())})},L=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Z=function(e){function t(t){var n=e.call(this,t)||this;return n.state={Zone:Object(),oldModel:Object(),_spaceList:[],_zoneTypes:[],spaceDropDownList:[],zoneDropDownList:[],equipmentDropDownList:[],deviceList:[],_serviceProvidersList:[],isEdit:!1,isView:!0,devicesOriginalList:[],relayDevices:[],isHistorian:!1,newFloor:Object()},a=n,n.handleZoneTypeChange=n.handleZoneTypeChange.bind(n),n.handleServiceProviderChange=n.handleServiceProviderChange.bind(n),n.handleServiceTypeChange=n.handleServiceTypeChange.bind(n),n.handleSubServiceProviderChange=n.handleSubServiceProviderChange.bind(n),n.handleMonconChange=n.handleMonconChange.bind(n),n.handleMonConDeviceTypeChange=n.handleMonConDeviceTypeChange.bind(n),n.handleDeviceList=n.handleDeviceList.bind(n),n.handleRelayDevices=n.handleRelayDevices.bind(n),n.onZoneChange=n.onZoneChange.bind(n),n.handleMultiSubServiceProviderChange=n.handleMultiSubServiceProviderChange.bind(n),n._fetchZone=n._fetchZone.bind(n),n.getMultiSelectDropDownLabel=n.getMultiSelectDropDownLabel.bind(n),n._fetchServiceProvidersList=n._fetchServiceProvidersList.bind(n),n.handleControllerEndPointChange=n.handleControllerEndPointChange.bind(n),n.fetchDevicesList=n.fetchDevicesList.bind(n),n._getSpacesList=n._getSpacesList.bind(n),n.restoreSelectedVersion=n.restoreSelectedVersion.bind(n),n.createFloor=n.createFloor.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.handleSelectZoneChange=n.handleSelectZoneChange.bind(n),n.handleSelectEquipChange=n.handleSelectEquipChange.bind(n),n._getAssets=n._getAssets.bind(n),n}return j(t,e),t.prototype.componentDidMount=function(){return D(this,void 0,void 0,function(){var e,t,n,a=this;return L(this,function(i){switch(i.label){case 0:return this.props.buildingName?[4,Promise.all([this._getSpacesList(),this._getZonesList(),this.fetchDevicesList(),this._getAssets(),this._getZoneTypesList()])]:[3,2];case 1:i.sent(),(e=this.props.zoneName)&&e.length>0?setTimeout(function(){return D(a,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return[4,this._fetchZone()];case 1:return e.sent(),[2]}})})},1e3):this.setState({Zone:Object(),isEdit:!1}),t=this.state._spaceList.map(function(e){return{value:Object(d.g)(e.ontology),label:Object(d.g)(e.rdfsLabel)}}),this.setState({spaceDropDownList:t}),i.label=2;case 2:return this.props.zoneName?(n=this.state.newFloor,[4,Object(c.a)(this.props.buildingName,this.props.zoneName).then(function(e){return D(a,void 0,void 0,function(){var t;return L(this,function(a){return e&&e[0]&&e[0].zone&&(t=e[0],n.floor=Object(d.g)(t.zone),n.rdfsLabel=Object(d.g)(t.rdfsLabel),n.linkBimism=Object(d.g)(t.linkBimism),n.bimSid=Object(d.g)(t.bimSid),n.bimFloor=Object(d.g)(t.type),this.setState({newFloor:n},function(){})),[2]})})})]):[3,4];case 3:i.sent(),i.label=4;case 4:return[2]}})})},t.prototype.fetchDevicesList=function(){return D(this,void 0,void 0,function(){var e;return L(this,function(t){switch(t.label){case 0:return[4,Object(f.S)(this.props.buildingName)];case 1:return e=t.sent(),this.setState({devicesOriginalList:e}),[2]}})})},t.prototype._getAssets=function(){return D(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return Object(l.a)(!0),[4,Object(w.g)(this.props.buildingName,p.b.POINT).then(function(e){for(var t=[],n=0;n<e.length;n++){var i={value:Object(d.g)(e[n].ontology),label:Object(d.g)(e[n].rdfsLabel)};t&&t.push(i)}a.setState({equipmentDropDownList:t})}).catch(function(e){return e})];case 1:return e.sent(),Object(l.a)(!1),[2]}})})},t.prototype._fetchZone=function(){return D(this,void 0,void 0,function(){var e=this;return L(this,function(t){switch(t.label){case 0:return[4,Object(c.a)(this.props.buildingName,this.props.zoneName).then(function(t){return D(e,void 0,void 0,function(){var e,n,i,o,r,l,s=this;return L(this,function(c){switch(c.label){case 0:return e=t[0],n=Object(),t.length>0?(i=[],e.controllerendpoint&&Object(d.g)(e.controllerendpoint)&&(i=Object(d.g)(e.controllerendpoint).indexOf(",")>0?Object(d.g)(e.controllerendpoint).split(","):[Object(d.g)(e.controllerendpoint)],(o=this.state.devicesOriginalList)&&o.length&&(n.controllerEndPoint=i.map(function(e,t){var n;return{label:Object(d.g)(null===(n=o.find(function(t){return Object(d.g)(e)}))||void 0===n?void 0:n.rdfsLabel),value:e}}))),n.name=Object(d.g)(e.zone),n.rdfsLabel=Object(d.g)(e.rdfsLabel),n.type=Object(d.g)(e.type),n.zoneNo=Object(d.g)(e.zoneNo),[4,a._fetchServiceProvidersList(n.type)]):[3,4];case 1:return c.sent(),n.serviceType=Object(d.g)(e.servicetype),r=[],e.serviceprovider&&Object(d.g)(e.serviceprovider)&&(r=Object(d.g)(e.serviceprovider).indexOf(",")>0?Object(d.g)(e.serviceprovider).split(","):[Object(d.g)(e.serviceprovider)],n.serviceProvider=r.map(function(e,t){return{label:s.getMultiSelectDropDownLabel(e,s.state._serviceProvidersList),value:e}})),n.subServiceProvider=Object(d.g)(e.subserviceprovider),n.serviceType=Object(d.g)(e.servicetype),n.notes=Object(d.g)(e.notes),e.relayDevice&&Object(d.g)(e.relayDevice)?[4,this.fetchRelayControlSettings(n.controllerEndPoint[0].value).then(function(){var t=s.state.relayDevices;if(t){var a=Object(d.g)(e.relayDevice).indexOf(",")>0?Object(d.g)(e.relayDevice).split(","):[Object(d.g)(e.relayDevice)];n.relayDevice=[];for(var i=function(e){var i=a[e],o=t.find(function(e){return e.value==i});o&&n.relayDevice.push(o)},o=0;o<a.length;o++)i(o)}})]:[3,3];case 2:c.sent(),c.label=3;case 3:return e.selectedSpaces&&(n.selectedSpaces=e.selectedSpaces?Object(d.g)(e.selectedSpaces).split(",").map(function(e){return{label:s.getMultiSelectDropDownLabel(e,s.state.spaceDropDownList),value:e}}):[]),e.fedByZones&&(n.fedByZones=e.fedByZones?Object(d.g)(e.fedByZones).split(",").map(function(e,t){return{label:s.getMultiSelectDropDownLabel(e,s.state.zoneDropDownList),value:e}}):[]),e.fedByEquipment&&(n.fedByEquipment=e.fedByEquipment?Object(d.g)(e.fedByEquipment).split(",").map(function(e,t){return{label:s.getMultiSelectDropDownLabel(e,s.state.equipmentDropDownList),value:e}}):[]),l=this.manageDeviceList(n.serviceProvider),this.setState({Zone:n,oldModel:C({},n),isEdit:!this.props.isView&&!0,deviceList:l}),[3,5];case 4:this.setState({Zone:Object(),isEdit:!1}),c.label=5;case 5:return[2]}})})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.getMultiSelectDropDownLabel=function(e,t){var n=t,a=Object();return(a=n&&n.find(function(t){return t.value==e}))&&a.label},t.prototype._fetchServiceProvidersList=function(e){return D(this,void 0,void 0,function(){var t;return L(this,function(n){switch(n.label){case 0:return t=[],Object(l.a)(!0),"zoneHeat"==e&&(e="both"),[4,Object(c.g)(this.props.buildingName,e).then(function(e){for(var n=0;n<e.length;n++){var i={value:Object(d.g)(e[n].ontology),label:Object(d.g)(e[n].rdfsLabel)};t&&t.push(i)}a.setState({_serviceProvidersList:t})}).catch(function(e){return e})];case 1:return n.sent(),Object(l.a)(!1),[2]}})})},t.prototype.fetchRelayControlSettings=function(e){return D(this,void 0,void 0,function(){var t,n,a,i,o,r,l,s;return L(this,function(c){switch(c.label){case 0:return t=this.state.Zone,n=this.state.relayDevices,n=[],t&&t.controllerEndPoint&&t.controllerEndPoint.length&&t.controllerEndPoint[0]&&e?(e||(e=t.controllerEndPoint[0].value),[4,Object(g.x)(e)]):[2];case 1:return(a=c.sent())[0]?(i=a[0],o=Object(d.g)(i.relayNames),r=o.split(","),n=r.map(function(e){return{value:e,label:e}}),[3,4]):[3,2];case 2:return l=this.props.buildingName,[4,Object(f.L)(e,l)];case 3:(s=c.sent())&&s.monitoringControlDeviceType&&-1==s.monitoringControlDeviceType.indexOf("OneRelay")?(n.push({label:"Relay 1",value:"Relay 1"}),n.push({label:"Relay 2",value:"Relay 2"}),n.push({label:"Relay 3",value:"Relay 3"}),n.push({label:"Relay 4",value:"Relay 4"})):n.push({label:"Relay",value:"Relay"}),c.label=4;case 4:return this.setState({relayDevices:n}),[2]}})})},t.prototype._getSpacesList=function(){return D(this,void 0,void 0,function(){var e,t=this;return L(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,[4,Object(s.b)(e).then(function(e){var n=e.map(function(e){return{value:Object(d.g)(e.ontology),label:Object(d.g)(e.rdfsLabel)}});t.setState({_spaceList:e,spaceDropDownList:n})})];case 1:return n.sent(),[2]}})})},t.prototype._getZonesList=function(){return D(this,void 0,void 0,function(){var e,t=this;return L(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,[4,Object(c.a)(e).then(function(e){var n=[],a=e&&e.length&&e.filter(function(e){return"Floor"!=Object(d.g)(e.type)});a&&a.length&&(n=a.map(function(e){return{value:Object(d.g)(e.zone),label:Object(d.g)(e.rdfsLabel)}})),t.setState({zoneDropDownList:n})})];case 1:return n.sent(),[2]}})})},t.prototype._getZoneTypesList=function(){return D(this,void 0,void 0,function(){var e,t=this;return L(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,[4,Object(c.h)(e).then(function(e){t.setState({_zoneTypes:e})})];case 1:return n.sent(),[2]}})})},t.prototype.handleDeviceList=function(){var e,t=this.state,n=t.Zone,a=t.devicesOriginalList;e=-1!=n.type.toLowerCase().indexOf("light")?a&&a.length>0&&a.filter(function(e){return-1!=Object(d.g)(e.moncontype).toLowerCase().indexOf("relay")}).map(function(e){return{value:Object(d.g)(e.moncondevice),label:Object(d.g)(e.rdfsLabel)}}):a&&a.length>0&&a.map(function(e){return{value:Object(d.g)(e.moncondevice),label:Object(d.g)(e.rdfsLabel)}}),n.controllerEndPoint=[],this.setState({deviceList:e})},t.prototype.handleRelayDevices=function(e){if(!this.props.isView){var t=this.state.Zone;t.relayDevice=e,this.setState({Zone:t})}},t.prototype.handleNameChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.rdfsLabel=e,this.setState({Zone:t})}},t.prototype.handleZoneNoChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.zoneNo=e,this.setState({Zone:t})}},t.prototype.handleZoneTypeChange=function(e){var t=this;if(!this.props.isView){var n=this.state.Zone,a=this.state.newFloor;n.type=e,"Floor"==e&&(a.rdfsLabel=n.rdfsLabel),this.setState({Zone:n,newFloor:a},function(){t._fetchServiceProvidersList(e)}),this.handleDeviceList()}},t.prototype.handleMonConDeviceTypeChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.monitoringControlDeviceType=e,this.setState({Zone:t})}},t.prototype.handleServiceProviderChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.serviceProvider=e,t.controllerEndPoint=[];var n=this.manageDeviceList(e);this.setState({Zone:t,deviceList:n})}},t.prototype.manageDeviceList=function(e){var t=this.state.devicesOriginalList,n=[];if(e&&e.length&&t&&t.length)for(var a=function(a){var o=e[a],r=t.filter(function(e){return Object(d.g)(e.relatedEquipment)&&Object(d.g)(e.relatedEquipment).includes(o.value)});if(r&&r.length>0){var l=r.map(function(e){return{value:Object(d.g)(e.moncondevice),label:Object(d.g)(e.rdfsLabel)}});n=i.mergeUniqueElementsToArray(n,l)}},i=this,o=0;o<e.length;o++)a(o);return n},t.prototype.mergeUniqueElementsToArray=function(e,t){var n=new Set(t);return e.forEach(function(e){n.has(e)||n.add(e)}),t.length=0,n.forEach(function(e){t&&t.find(function(t){return t.value==e.value})||t.push(e)}),t},t.prototype.handleControllerEndPointChange=function(e){var t=this;if(!this.props.isView){var n=this.state.Zone;n.controllerEndPoint=e,this.setState({Zone:n},function(){t.fetchRelayControlSettings(e)})}},t.prototype.handleServiceTypeChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.serviceType=e,this.setState({Zone:t})}},t.prototype.handleSubServiceProviderChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.subServiceProvider=e,this.setState({Zone:t})}},t.prototype.handleMultiSubServiceProviderChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.selectedSpaces=e,this.setState({Zone:t})}},t.prototype.handleSelectZoneChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.fedByZones=e,this.setState({Zone:t})}},t.prototype.handleSelectEquipChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.fedByEquipment=e,this.setState({Zone:t})}},t.prototype.handleMonconChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.moncon=e,this.setState({Zone:t})}},t.prototype.onZoneChange=function(e){this.props.isView||this.setState({Zone:e})},t.prototype.handleNotesChange=function(e){if(!this.props.isView){var t=this.state.Zone;t.notes=e,this.setState({Zone:t})}},t.prototype.saveZone=function(e){return D(this,void 0,void 0,function(){var t,n,a,i,o,r,s,d,u,m;return L(this,function(p){switch(p.label){case 0:return t=this.props,n=t.instance,a=t.buildingName,i=this.state,o=i.Zone,r=i.oldModel,(s=this.state.isEdit)?(Object(l.a)(!0),[4,Object(c.d)(a,o.name,!0)]):[3,2];case 1:p.sent(),Object(l.a)(!1),p.label=2;case 2:return o.name=o.name?o.name:Object(h.E)(7),e?(d=e||o,u=o):(d=o,u=s?r:null),[4,Object(c.c)(d,a)];case 3:return p.sent(),m=JSON.parse(b.a.getItem("user")),Object(E.b)(o.name,d,u,m.contact),window.location.hash=n+"/"+a+"/Zones",[2]}})})},t.prototype.restoreSelectedVersion=function(e){return D(this,void 0,void 0,function(){var t;return L(this,function(n){switch(n.label){case 0:return e&&e.model?(t=JSON.parse(e.model),[4,this.saveZone(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.createFloor=function(){return D(this,void 0,void 0,function(){var e;return L(this,function(t){switch(t.label){case 0:return(e=this.state.newFloor)&&e.rdfsLabel?(e.floor=e.floor?e.floor:Object(h.E)(7),[4,Object(c.b)(this.props.buildingName,e)]):[3,2];case 1:t.sent(),this.setState({newFloor:{floor:"",rdfsLabel:"",linkBimism:"",bimFloor:"",bimSid:"",xScaleMap:"",xOffsetMap:"",yScaleMap:"",yOffsetMap:""}}),t.label=2;case 2:return[2]}})})},t.prototype.handleFloorChange=function(e){return D(this,void 0,void 0,function(){return L(this,function(t){return this.setState({newFloor:e}),[2]})})},t.prototype.render=function(){var e=this,t=this.props,n=t.isView,a=void 0!==n&&n,l=t.instance,s=t.buildingName,c=t.zoneName,p=this.state,f=p.Zone,g=p._zoneTypes,E=p._serviceProvidersList,w=p.deviceList,j=void 0===w?[]:w,C=p.spaceDropDownList,D=p.relayDevices,L=p.isHistorian,Z=p.newFloor,F=p.zoneDropDownList,_=p.equipmentDropDownList;j||(j=[]);var P=JSON.parse(b.a.getItem("user")),T=Object(m.b)(P,"info-zone","write"),M=f&&f.rdfsLabel&&f.type&&!0,z=!1;Z.rdfsLabel&&(z=!0,Z.linkBimism&&(z=!!Z.bimFloor));var k=f.type&&"Floor"==f.type;return i.createElement("div",{className:"content",style:{marginTop:"-15px"}},i.createElement("div",{className:"container-fluid"},i.createElement(r.a.Consumer,null,function(t){return i.createElement(i.Fragment,null,L&&i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("button",{className:"btn btn-success pull-right active",style:{marginLeft:3,marginTop:5},onClick:function(){e.setState({isHistorian:!1})}}," Go Back To ")),i.createElement("div",{className:"col-md-12"},i.createElement("br",null))),L&&i.createElement(y.default,{buildingName:s,instance:l,ObjectId:f.name,restoreSelectedVersion:e.restoreSelectedVersion}),!L&&i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},a&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-6"},i.createElement(u.a,{instance:l,buildingName:s,tabName:"Zone",itemName:c})),i.createElement("div",{className:"col-md-6"},T&&i.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(e){k?document.getElementById("btnShowFloorForm").click():setTimeout(function(){c&&f.rdfsLabel&&Object(h.R)(c,f.rdfsLabel),window.location.hash=l+"/"+s+"/EditZone/"+c},200)}},i.createElement("i",{className:"fa fa-edit"})," Edit "),i.createElement("button",{type:"button",id:"btnShowFloorForm",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#floorFormDialog",style:{display:"none"}},"."),i.createElement(N.a,{id:"floorFormDialog",onSaveButtonClick:function(){e.createFloor()},saveButtonText:"Save",disableSaveButton:!z},i.createElement(S.a,{instance:l,buildingName:s,isView:!1,handleFloorChange:e.handleFloorChange,newFloor:Z,floorData:e.state.Zone})),i.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(){e.setState({isHistorian:!0})}}," ",i.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," Historian Archive")))),i.createElement("br",null)),"Floor"==f.type&&Z&&c&&a&&i.createElement(S.a,{buildingName:s,instance:l,ontology:c,isView:!0}),i.createElement("div",{className:k?"":"card",style:{marginLeft:"-23px",marginRight:"-23px"}},i.createElement("div",{className:"container-fluid padding-10"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},k?"":i.createElement("div",null,i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"zonename"},k?"Floor":"Zone"," Name: "))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",disabled:a,id:"zonename",className:(f.rdfsLabel?"":"addFieldValidate")+" col-md-4 form-control",value:f.rdfsLabel,onChange:function(t){return e.handleNameChange(t.target.value)}}))),k&&!a&&i.createElement(S.a,{buildingName:s,instance:l,ontology:"",newFloor:Z}),!k&&!Z.bimSid&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"zonetype"},"Zone Type: "))),i.createElement("div",{className:"col-md-4"},i.createElement("div",{className:(f.type?"":"addFieldValidate")+" dropdown"},i.createElement("button",{disabled:a,style:a?{cursor:"default"}:{},className:"btn btn-default btn-block dropdown-toggle",type:"button","data-toggle":"dropdown"},f.type&&g&&g.find(function(e){return-1!==e.z.value.indexOf(f.type.substring(3))})?g.find(function(e){return-1!==e.z.value.indexOf(f.type.substring(3))}).zone.value:"Select Zone Type",i.createElement("span",{className:"caret"})),i.createElement("ul",{className:"dropdown-menu"},i.createElement("li",{className:"dropdown-header"},i.createElement("h5",null,i.createElement("b",null,"Space Group"))),g.filter(function(e){return"Space Group"==e.yname.value}).map(function(t,n){if("Floor"!=Object(d.g)(t.zone))return i.createElement("li",{key:n},i.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.handleZoneTypeChange(t.z.value)}},t.zone.value))}),i.createElement("li",{className:"dropdown-header"},i.createElement("h5",null,i.createElement("b",null,"Service Zone"))),g.filter(function(e){return"Service Zone"==e.yname.value}).map(function(t,n){return i.createElement("li",{key:n},i.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.handleZoneTypeChange(t.z.value)}},t.zone.value))}))))))),!k&&!Z.bimSid&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"serviceprovider"},"Equip Service Provider: "))),i.createElement("div",{className:"col-md-4"},i.createElement("div",null,i.createElement(v.a,{isDisabled:a,closeMenuOnSelect:!1,isMulti:!0,value:f.serviceProvider,onChange:e.handleServiceProviderChange,placeholder:"Service Provider",options:E}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"servicetype"},"Service Type: "))),i.createElement("div",{className:"col-md-4"},i.createElement("select",{className:"form-control",id:"servicetype",disabled:a,onChange:function(t){return e.handleServiceTypeChange(t.target.value)}},i.createElement("option",{value:""},"Select Service Type"),o.d.map(function(e,t){return e.predicate===f.serviceType?i.createElement("option",{key:t,selected:!0,value:e.predicate},e.name):i.createElement("option",{key:t,value:e.predicate},e.name)}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"fedByZone"},"Zone Feeds These Equips: "))),i.createElement("div",{className:"col-md-4"},i.createElement("div",null,i.createElement(v.a,{isDisabled:a,closeMenuOnSelect:!1,isMulti:!0,value:f.fedByEquipment,onChange:e.handleSelectEquipChange,placeholder:"Select Equipment",options:_}))),!a&&i.createElement("div",{className:"col-md-2"},i.createElement("button",{type:"button",className:"btn btn-dark btn-fill btn-sm",onClick:function(){document.getElementById("btnShowNewEquipment").click()},title:"Add Equipment"},i.createElement("i",{className:"fa fa-plus"})),i.createElement("button",{type:"button",id:"btnShowNewEquipment",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#showNewEquipmentDialog",style:{display:"none"}},"."),i.createElement(N.a,{id:"showNewEquipmentDialog",heading:"Add Equipment",isFullWidth:!0,closeButtonId:"closeNewEquipmentDialog",showSaveButton:!1},i.createElement("div",{className:"row padding-10"},i.createElement(O.a,{instance:l,buildingName:s,removeBackButton:!0,refreshEquipmentOnSave:function(){e._getAssets().then(function(){document.getElementById("closeNewEquipmentDialog").click()})}})))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"controllerendname"},"Controlled By: "))),i.createElement("div",{className:"col-md-4"},i.createElement("div",null,i.createElement(v.a,{isDisabled:a,closeMenuOnSelect:!1,isMulti:!0,value:f.controllerEndPoint,onChange:e.handleControllerEndPointChange,placeholder:"Select Devices",options:j}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"zoneNo"},k?"Floor":"Zone"," ID: "))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"number",disabled:a,id:"zoneNo",className:"form-control",value:f.zoneNo,onChange:function(t){return e.handleZoneNoChange(t.target.value)}})))),f.type&&-1!=f.type.toLowerCase().indexOf("light")&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"controllerendname"},"Relay: "))),i.createElement("div",{className:"col-md-4"},i.createElement("div",null,i.createElement(v.a,{isDisabled:a,closeMenuOnSelect:!1,isMulti:!0,value:f.relayDevice,onChange:e.handleRelayDevices,placeholder:"Select Relay",options:D}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"spaces"},"Zone feeds these Spaces: "))),i.createElement("div",{className:"col-md-10"},i.createElement("div",null,i.createElement(v.a,{isDisabled:a,closeMenuOnSelect:!1,isMulti:!0,value:f.selectedSpaces,onChange:e.handleMultiSubServiceProviderChange,placeholder:"Select Spaces",options:C}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"fedByZone"},"Zone Feeds these Zones: "))),i.createElement("div",{className:"col-md-10"},i.createElement("div",null,i.createElement(v.a,{isDisabled:a,closeMenuOnSelect:!1,isMulti:!0,value:f.fedByZones,onChange:e.handleSelectZoneChange,placeholder:"Select Zones",options:F}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"notes"},"Notes: "))),i.createElement("div",{className:"col-md-10"},i.createElement("input",{type:"text",id:"notes",className:"form-control",disabled:a,value:f.notes,onChange:function(t){return e.handleNotesChange(t.target.value)}}))))),!a&&i.createElement("div",{className:"row"},i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("button",{className:"btn btn-primary btn-fill",disabled:!M,onClick:function(){t.onChangeZone(Object()),e.saveZone()}},i.createElement("i",{className:"fa fa-save"})," Save"),i.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=l+"/"+s+"/Zones"}},i.createElement("i",{className:"fa fa-window-close"})," Cancel"))))))))})))},t}(i.Component);t.default=Z}});