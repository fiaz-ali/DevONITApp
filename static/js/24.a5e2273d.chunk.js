webpackJsonp([24],{2265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=(n.n(a),n(665)),c=n(733),o=n(13),i=n(763),s=n(12),r=n(20),m=n(677),d=n(710),u=n(8),p=n(2266),h=n(2267),f=n(118),b=n(674),g=n.n(b),y=n(53),E=n(21),v=n(672),N=n(684),D=n(686),O=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),w=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,c){function o(e){try{s(a.next(e))}catch(e){c(e)}}function i(e){try{s(a.throw(e))}catch(e){c(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,i)}s((a=a.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var n,a,l,c,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(l=2&c[0]?a.return:c[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,c[1])).done)return l;switch(a=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){o.label=c[1];break}if(6===c[0]&&o.label<l[1]){o.label=l[1],l=c;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(c);break}l[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],a=0}finally{n=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},C=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),l=0;for(t=0;t<n;t++)for(var c=arguments[t],o=0,i=c.length;o<i;o++,l++)a[l]=c[o];return a},j=function(e){function t(t){var n=e.call(this,t)||this,a=new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-6)),l=new Date(Date.now());return n.state={isEdit:!1,documentObject:{docOntology:"",entityOntology:[{label:Object(r.v)(n.props.entityName),value:n.props.entityName}],entityType:"",documentType:"",documentSubtype:"",rdfsLabel:"",s3FileName:"",entryTimeStamp:"",enteredBy:"",enteredByName:"",linkToDocument:"",building:"",buildingName:""},OMDocuments:[],DocumentTypes:d.c,itemToDelete:Object(),from:a,to:l,files:[],MediaDocuments:[],TaskDocuments:[],OtherDocuments:[],_people:[],selectedDurationButton:"All Time",showLogs:!1},n.handleTypeFilters=n.handleTypeFilters.bind(n),n.handleDocumentForm=n.handleDocumentForm.bind(n),n._saveDocument=n._saveDocument.bind(n),n.saveDoc=n.saveDoc.bind(n),n.fetchData=n.fetchData.bind(n),n.handleDurationButton=n.handleDurationButton.bind(n),n.handleFromTimeChange=n.handleFromTimeChange.bind(n),n.handleToTimeChange=n.handleToTimeChange.bind(n),n}return O(t,e),t.prototype.componentDidMount=function(){return w(this,void 0,void 0,function(){return T(this,function(e){return this.props.buildingName&&this.props.infoEntity&&this.props.entityName&&this.fetchData(),[2]})})},t.prototype.fetchData=function(){return w(this,void 0,void 0,function(){var e,t,n,a,l,c,o,r,m,d,u;return T(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.entityName,a=e.infoEntity,l=[],"Equip"!=a?[3,3]:[4,Object(v.p)(t,n)];case 1:return c=p.sent(),o=[],c.forEach(function(e){o.push(Object(s.g)(e.name))}),[4,Object(i.d)(t,[],C([n],o))];case 2:return l=p.sent(),[3,5];case 3:return[4,Object(i.d)(t,[],[n])];case 4:l=p.sent(),p.label=5;case 5:return r=l&&l.length&&l.filter(function(e){return"O&M"==Object(s.g)(e.documentType)}),m=l&&l.length&&l.filter(function(e){return"Media"==Object(s.g)(e.documentType)&&"Equip"==a?"Component"==Object(s.g)(e.entityType)||"Equipment"==Object(s.g)(e.entityType):"Space"==a?"Space"==Object(s.g)(e.entityType):"Zone"==a&&"Zone"==Object(s.g)(e.entityType)}),d=l&&l.length&&l.filter(function(e){return"Media"==Object(s.g)(e.documentType)&&"Task"==Object(s.g)(e.entityType)||"WorkerTaskAttachment"==Object(s.g)(e.entityType)||"ObjectAttachment"==Object(s.g)(e.entityType)}),[4,Object(f.w)(this.props.buildingName)];case 6:return u=p.sent(),this.setState({OMDocuments:r&&r.length>0?r:[],MediaDocuments:m&&m.length>0?m:[],_people:u,TaskDocuments:d}),[2]}})})},t.prototype.handleTypeFilters=function(e){var t=e.target.checked,n=this.state.DocumentTypes;n[n&&n.length>0&&n.findIndex(function(t){return t.Type===e.target.value})].visible=t,this.setState({DocumentTypes:n});var a=[],l=d.d;if(l&&l.length)for(var c=0;c<l.length;c++)for(var o=0;o<(n&&n.length>0&&n.length);o++)n[o].Type==l[c].Type&&1==n[o].visible&&a.push(l[c]);this.setState({OMDocuments:a})},t.prototype.saveDoc=function(e){return w(this,void 0,void 0,function(){var t;return T(this,function(n){switch(n.label){case 0:return t=e&&e.entityOntology&&e.entityOntology.length?e:this.state.documentObject,[4,Object(i.f)(t).then(function(){})];case 1:return n.sent(),[2]}})})},t.prototype._saveDocument=function(){return w(this,void 0,void 0,function(){var e,t,n,a,l,c,i=this;return T(this,function(s){switch(s.label){case 0:return e=this.state.documentObject,t=JSON.parse(u.a.getItem("user")),e.enteredBy=t.contact,e.documentType="O&M",e.entityOntology&&e.entityOntology.length?(n=new y.b,(a=Object(o.d)())&&a.length?(l=a[0],c=l,[4,n.UploadFile(y.a.DOCUMENT(),e.s3FileName,c,function(t){i.saveDoc(e).then(function(){i.fetchData(),i.setState({files:[],documentObject:Object()},function(){return w(i,void 0,void 0,function(){return T(this,function(e){return[2]})})})}),Object(E.b)("Attachment Uploaded Successfully")})]):[3,2]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,4];case 3:Object(E.a)("To Upload Attachments, You need to save Form first "),s.label=4;case 4:return[2]}})})},t.prototype.onDeleteDocument=function(e){return w(this,void 0,void 0,function(){return T(this,function(t){return this.setState({itemToDelete:e}),[2]})})},t.prototype.handleDocumentForm=function(e,t){this.setState({documentObject:e,files:t})},t.prototype.handleFromTimeChange=function(e){this.setState({from:e},function(){})},t.prototype.handleToTimeChange=function(e){this.setState({to:e},function(){})},t.prototype.handleDurationButton=function(e){var t=0;switch(e){case"All Time":t=72;break;case"This Year":t=24;break;case"This Month":case"This Week":case"Today":case"Custom":t=6}var n=new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-t)),a=new Date;this.setState({selectedDurationButton:e,from:n,to:a},function(){})},t.prototype.render=function(){var e=this,t=this.state,n=t.DocumentTypes,o=t.documentObject,i=t.OMDocuments,s=t.MediaDocuments,d=t.TaskDocuments,f=t.selectedDurationButton,b=t.to,y=t.from,E=t.showLogs,v=this.props,O=v.buildingName,w=v.infoEntity,T=v.entityName,C=v.instance,j=JSON.parse(u.a.getItem("user")),x=Object(m.b)(j,"info-equip","write"),k=o&&o.entityOntology&&o.documentSubtype&&o.rdfsLabel&&o.s3FileName&&!0;return E?a.createElement(N.a,{instance:C,buildingName:O,fromEntityList:!0,ontology:T,module:D.a.Assets,entityName:"AssetDocument",onLogClose:function(){return e.setState({showLogs:!1})}}):a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(l.a,{id:"filterDocumentsModal",heading:"Filter Documents",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1},n&&n.map(function(t,n){return!0===t.visible?a.createElement("div",{key:n},a.createElement("input",{checked:!0,type:"checkbox",value:t.Type,onChange:e.handleTypeFilters})," ",a.createElement("label",null,t.Type)):a.createElement("div",{key:n},a.createElement("input",{type:"checkbox",value:t.Type,onChange:e.handleTypeFilters})," ",a.createElement("label",null,t.Type))})),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement(c.a,{instance:this.props.instance,buildingName:O,tabName:w,itemName:T,showDevicesButton:"Point"==w,showComponentButton:"Equip"==w,showAuditTypes:"Equip"==w||"Space"==w,showBIMButtons:"Equip"==w||"Space"==w}),j&&"1"==j.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),x&&a.createElement("button",{type:"button",className:"btn btn-dark pull-right","data-toggle":"modal","data-target":"#documentFormDialog",onClick:function(){e.setState({isEdit:!1,files:[],documentObject:{docOntology:"",entityOntology:[{value:e.props.entityName,label:Object(r.v)(e.props.entityName)}],entityType:"",enteredBy:"",documentType:"",documentSubtype:"",entryTimeStamp:"",rdfsLabel:"",enteredByName:"",s3FileName:"",linkToDocument:"",building:O}})}},a.createElement("i",{className:"fa fa-plus"})," Add "))),a.createElement("br",null),a.createElement("div",{className:"card padding-10"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-2"},a.createElement("h4",{className:"title"},"Documents")),a.createElement("div",{className:"col-md-10"},a.createElement("div",{className:"btn-group",role:"group"},a.createElement("button",{type:"button",className:"btn btn-success "+("All Time"==f?"btn-fill":""),onClick:function(){e.handleDurationButton("All Time")}},"All Time"),a.createElement("button",{type:"button",className:"btn btn-success "+("This Year"==f?"btn-fill":""),onClick:function(){e.handleDurationButton("This Year")}},"This Year"),a.createElement("button",{type:"button",className:"btn btn-success "+("This Month"==f?"btn-fill":""),onClick:function(){e.handleDurationButton("This Month")}},"This Month"),a.createElement("button",{type:"button",className:"btn btn-success "+("This Week"==f?"btn-fill":""),onClick:function(){e.handleDurationButton("This Week")}},"This Week"),a.createElement("button",{type:"button",className:"btn btn-success "+("Today"==f?"btn-fill":""),onClick:function(){e.handleDurationButton("Today")}},"Today"),a.createElement("button",{type:"button",className:"btn btn-success "+("Custom"==f?"btn-fill":""),onClick:function(){e.handleDurationButton("Custom")}},"Custom")),"Custom"==f&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-2 padding-5"},a.createElement("label",null,"From:")),a.createElement("div",{className:"col-md-3"},a.createElement(g.a,{id:"startTime",className:"form-control",selected:y,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})),a.createElement("div",{className:"col-md-2 padding-5"},a.createElement("label",null,"To:")),a.createElement("div",{className:"col-md-3"},a.createElement(g.a,{id:"startTime",className:"form-control",selected:b,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))))),a.createElement("br",null)),a.createElement("button",{type:"button",id:"btnDocumentForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#documentFormDialog"}," ."),a.createElement(l.a,{id:"documentFormDialog",onSaveButtonClick:function(){e._saveDocument()},saveButtonText:"Save",disableSaveButton:!k},a.createElement(p.a,{instance:this.props.instance,infoEntity:this.props.infoEntity,buildingName:this.props.buildingName,documentObject:o,handleDocument:this.handleDocumentForm})),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapseom",href:"#collapseom"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"O&M ")))),a.createElement("div",{id:"collapseom",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:i,refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsemedia",href:"#collapsemedia"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Media ")))),a.createElement("div",{id:"collapsemedia",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:s,refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapseother",href:"#collapseother"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Other")))),a.createElement("div",{id:"collapseother",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsecontractfile",href:"#collapsecontractfile"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Contract File")))),a.createElement("div",{id:"collapsecontractfile",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapseprojectlifefile",href:"#collapseprojectlifefile"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Project Life File")))),a.createElement("div",{id:"collapseprojectlifefile",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsewopo",href:"#collapsewopo"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"WO/PO File")))),a.createElement("div",{id:"collapsewopo",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapseverify",href:"#collapseverify"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Verify File")))),a.createElement("div",{id:"collapseverify",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapselife",href:"#collapselife"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Life File")))),a.createElement("div",{id:"collapselife",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapsetaskchecklist",href:"#collapsetaskchecklist"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Task File")))),a.createElement("div",{id:"collapsetaskchecklist",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:d,refreshDocs:this.fetchData})))),a.createElement("div",{className:"panel panel-default row"},a.createElement("div",{className:"panel-heading"},a.createElement("a",{style:{color:"black"},"data-toggle":"collapse",id:"btn-collapseinspection",href:"#collapseinspection"},a.createElement("h4",{className:"panel-title",onClick:function(){}},a.createElement("label",null,"Inspection")))),a.createElement("div",{id:"collapseinspection",className:"padding-10 panel-collapse collapse "},a.createElement("div",{className:"padding-10"},a.createElement(h.a,{instance:C,buildingName:O,Documents:[],refreshDocs:this.fetchData}))))))))))},t}(a.Component);t.default=j},2266:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(13)),c=n(117),o=n(669),i=n(672),s=n(683),r=n(729),m=n(676),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,c){function o(e){try{s(a.next(e))}catch(e){c(e)}}function i(e){try{s(a.throw(e))}catch(e){c(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,i)}s((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,l,c,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(l=2&c[0]?a.return:c[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,c[1])).done)return l;switch(a=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){o.label=c[1];break}if(6===c[0]&&o.label<l[1]){o.label=l[1],l=c;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(c);break}l[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],a=0}finally{n=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={documentObject:n.props.documentObject,_infoEntityItems:[],DropDownList:[],documentTypes:l.a,files:[]},n.handleFormChange=n.handleFormChange.bind(n),n.handleMultiInfoEntityChange=n.handleMultiInfoEntityChange.bind(n),n._fetchItems=n._fetchItems.bind(n),n.handlefileAttached=n.handlefileAttached.bind(n),n.handleTitleChange=n.handleTitleChange.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.props.infoEntity?[4,this._fetchItems()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({documentObject:e.documentObject})},t.prototype._fetchItems=function(){return u(this,void 0,void 0,function(){var e,t,n;return p(this,function(a){switch(a.label){case 0:if(Object(c.a)(!0),!(e=this.props.infoEntity))return[2];switch(t=[],e){case"Equip":return[3,1];case"Space":return[3,3];case"Zone":return[3,5];case"Point":return[3,7]}return[3,8];case 1:return[4,Object(i.j)(this.props.buildingName)];case 2:return t=a.sent(),[3,8];case 3:return[4,Object(m.b)(this.props.buildingName)];case 4:return t=a.sent(),[3,8];case 5:return[4,Object(s.e)(this.props.buildingName)];case 6:return t=a.sent(),[3,8];case 7:return[3,8];case 8:return n=t.map(function(e){return{value:e.ontology.value,label:e.rdfsLabel.value}}),this.setState({_infoEntityItems:t,DropDownList:n}),Object(c.a)(!1),[2]}})})},t.prototype.handleMultiInfoEntityChange=function(e){var t=this.state.documentObject;t.entityOntology=e,this.setState({documentObject:t})},t.prototype.handleFormChange=function(e){var t=this,n=this.state.documentObject,a=e.target.name;n[""+a]=e.target.value,this.setState({documentObject:n},function(){t.props.handleDocument(n,[])})},t.prototype.handleTitleChange=function(e){var t=this.state.documentObject;t.rdfsLabel=e,this.setState({documentObject:t},function(){t.rdfsLabel?document.getElementById("rdfsLabel").style.boxShadow="0px 0px 15px gainsboro":document.getElementById("rdfsLabel").style.boxShadow="0px 0px 15px red"}),this.props.handleDocument(t,[])},t.prototype.handleDueDateChange=function(e){},t.prototype.handlefileAttached=function(e){var t=this,n=this.state.documentObject;if(e.length>0){var a=this.state.files;a||(a=[]);var c=e[0].name.split(".").pop(),o=(new Date).YYMMDDHHMMSS2()+"-"+n.rdfsLabel+"."+c.toLowerCase();o=o.replace(new RegExp(" ","g"),"-"),n.s3FileName=o,Object(l.g)(e),this.setState({files:e,documentObject:n},function(){return u(t,void 0,void 0,function(){return p(this,function(e){return this.props.handleDocument(n,[]),[2]})})})}},t.prototype.render=function(){var e=this,t=this.state,n=t.documentObject,l=t.documentTypes,c=t.DropDownList;return a.createElement("div",{className:"content"},!this.props.isCommunityDoc&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"infoEntity"},this.props.infoEntity,":")),a.createElement("div",{className:"col-md-9"},a.createElement(o.a,{id:"infoEntity",name:"infoEntity",closeMenuOnSelect:!1,isMulti:!1,isDisabled:!0,value:n.entityOntology,onChange:this.handleMultiInfoEntityChange,placeholder:"Select "+this.props.infoEntity,options:c})))),this.props.isCommunityDoc&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"name"},"Document Name:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{id:"name",name:"rdfsLabel",className:"form-control",value:n.rdfsLabel,onChange:function(t){return e.handleFormChange(t)}})))),!this.props.isCommunityDoc&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"rdfsLabel"},"Attachment Label:")),a.createElement("div",{className:"col-md-9"},a.createElement("input",{id:"rdfsLabel",name:"rdfsLabel",className:"form-control",value:n.rdfsLabel,onChange:function(t){e.handleTitleChange(t.target.value)}})))),a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},"\xa0"),a.createElement("div",{className:"col-md-9",onClick:function(){n.rdfsLabel?document.getElementById("rdfsLabel").style.boxShadow="0px 0px 15px gainsboro":document.getElementById("rdfsLabel").style.boxShadow="0px 0px 15px red"}},a.createElement(r.a,{disable:!n.rdfsLabel,handleAttachedFile:this.handlefileAttached,files:this.state.files,single:!0})))),!this.props.isCommunityDoc&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("div",{className:"col-md-3"},a.createElement("label",{htmlFor:"documentSubtype"},"Document Type:")),a.createElement("div",{className:"col-md-9"},a.createElement("select",{className:"form-control",id:"documentSubtype",name:"documentSubtype",onChange:function(t){return e.handleFormChange(t)},value:n.documentSubtype},a.createElement("option",{value:"-1"},"Select Document Type"),l.map(function(e,t){return e.value===n.documentSubtype?a.createElement("option",{key:t,selected:!0,value:e.value},e.label):a.createElement("option",{key:t,value:e.value},e.label)}))))))},t}(a.Component);t.a=h},2267:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(12)),c=n(53),o=n(854),i=n(1005),s=(n.n(i),n(117)),r=n(763),m=n(665),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,c){function o(e){try{s(a.next(e))}catch(e){c(e)}}function i(e){try{s(a.throw(e))}catch(e){c(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,i)}s((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,l,c,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(l=2&c[0]?a.return:c[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,c[1])).done)return l;switch(a=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(l=(l=o.trys).length>0&&l[l.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){o.label=c[1];break}if(6===c[0]&&o.label<l[1]){o.label=l[1],l=c;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(c);break}l[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],a=0}finally{n=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isOpen:!1,imageurl:"",photoIndex:0,deleteImage:Object()},n}return d(t,e),t.prototype.deleteFile=function(e){return u(this,void 0,void 0,function(){var t=this;return p(this,function(n){return Object(s.a)(!0),Object(r.a)(Object(l.g)(e.docOntology)).then(function(){(new c.b).DeleteFile(c.a.DOCUMENT(),Object(l.g)(e.s3FileName)),t.props.refreshDocs(),Object(s.a)(!1)}),[2]})})},t.prototype.render=function(){var e=this,t=this.props.Documents,n=this.state,i=n.isOpen,s=n.photoIndex,r=n.deleteImage,d=new c.b;return a.createElement("div",{className:"content"},a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row hidden-xs"},a.createElement("div",{className:"col-sm-12"},a.createElement("div",{className:"col-md-1 small grid-header-left"},"Image "),a.createElement("div",{className:"col-md-2 small grid-header"},"Label "),a.createElement("div",{className:"col-md-3 small grid-header"},"File Name "),a.createElement("div",{className:"col-md-1 small grid-header"},"Extension "),a.createElement("div",{className:"col-md-2 small grid-header"},"Date "),a.createElement("div",{className:"col-md-2 small grid-header"},"Entered By "),a.createElement("div",{className:"col-md-1 small grid-header"},"Action"))),t&&t.length>0&&t.map(function(n,u){var p=Object(l.g)(n.s3FileName).split(".").pop(),h=Object(l.g)(n.s3FileName),f=d.GetSignedURL(c.a.DOCUMENT(),h),b="";return h?(h.toLowerCase().indexOf(".mp4")>0&&(b="assets/img/video-file-icon.png"),h.toLowerCase().indexOf(".pdf")>0&&(b="assets/img/pdf-file-icon.png"),(h.toLowerCase().indexOf(".xls")>0||h.toLowerCase().indexOf(".csv")>0)&&(b="assets/img/excel-file-icon.png"),(h.toLowerCase().indexOf(".docx")>0||h.toLowerCase().indexOf(".txt")>0)&&(b="assets/img/doc-file-icon.png"),(h.toLowerCase().indexOf(".png")>0||h.toLowerCase().indexOf(".jpeg")>0||h.toLowerCase().indexOf(".jpg")>0||h.toLowerCase().indexOf(".tiff")>0)&&(b=f)):b=f,a.createElement("div",{key:n.docOntology+"-"+u},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12"},a.createElement("div",{className:"col-sm-1 small trim-data",title:Object(l.g)(n.rdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Image"),a.createElement("img",{src:b,style:{height:40,cursor:"pointer"},onClick:function(){e.setState({isOpen:!0,photoIndex:u})}})),a.createElement("div",{className:"col-sm-2 small trim-data",title:Object(l.g)(n.rdfsLabel)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"Label"),Object(l.g)(n.rdfsLabel),a.createElement("br",null),""!=Object(l.g)(n.documentSubtype)&&a.createElement("span",{className:"small"},a.createElement("b",null,"Type:"),""!=Object(l.g)(n.documentSubtype)?Object(l.g)(n.documentSubtype):"")),a.createElement("div",{className:"col-sm-3 small trim-data",title:Object(l.g)(n.s3FileName)},a.createElement("span",{className:"hidden visible-xs-inline visible-sm-inline headingText"},"File Name"),Object(l.g)(n.s3FileName)),a.createElement("div",{className:"col-sm-1 trim-data",title:p.toLowerCase()},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Extension"),p.toLowerCase()),a.createElement("div",{className:"col-sm-2 trim-data",title:Object(l.g)(n.entryTimeStamp)?new Date(Object(l.g)(n.entryTimeStamp)).toLocaleString():""},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Date"),""!=Object(l.g)(n.entryTimeStamp)?new Date(Object(l.g)(n.entryTimeStamp)).toLocaleString():""),a.createElement("div",{className:"col-sm-2 trim-data",title:Object(l.g)(n.enteredByName)},a.createElement("span",{className:"hidden visible-xs-inline headingText"},"Entered By"),""!=Object(l.g)(n.enteredByName)?Object(l.g)(n.enteredByName):Object(l.g)(n.enteredBy)),a.createElement("div",{className:"col-sm-1 small trim-data",title:"Action"},a.createElement("a",{className:"no-text-decor",href:d.GetSignedURL(c.a.DOCUMENT(),Object(l.g)(n.s3FileName))}," ",a.createElement("i",{className:"fa fa-download icn-download"})),a.createElement("a",{className:"no-text-decor",href:d.GetSignedURL(c.a.DOCUMENT(),Object(l.g)(n.s3FileName))}),a.createElement("span",{onClick:function(){var t=e.state.deleteImage;t=n,e.setState({deleteImage:t}),document.getElementById("deleteImageDialogueConfirm").click()},style:{cursor:"pointer"}},a.createElement("i",{className:"fa fa-trash icn-delete"}))))),a.createElement("button",{id:"deleteImageDialogueConfirm",style:{display:"none"},"data-toggle":"modal","data-target":"#deleteImageDialogue"},"."),a.createElement(m.a,{id:"deleteImageDialogue",showCancelButton:!0,showSaveButton:!0,heading:"Delete Image",onSaveButtonClick:function(){e.deleteFile(r)},saveButtonText:"Ok"},a.createElement("h5",null,"Are you sure want to delete ? ")),i&&a.createElement("div",null,a.createElement(o.a,{mainSrc:d.GetSignedURL(c.a.DOCUMENT(),t&&Object(l.g)(t[s].s3FileName)),onCloseRequest:function(){e.setState({isOpen:!1,photoIndex:0})},onMovePrevRequest:function(){},onMoveNextRequest:function(){}})))})))},t}(a.Component);t.a=h}});