webpackJsonp([47],{1368:function(e,t,a){"use strict";t.d=function(e,t){return c(this,void 0,void 0,function(){return r(this,function(a){switch(a.label){case 0:return[4,Object(l.e)({entityName:e,schedule:t},l.a.Schedule.SaveSpaceSchedule,n.b.SPACE)];case 1:return[2,a.sent()]}})})},t.a=function(e){return c(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(l.e)({entityName:e},l.a.Schedule.GetSpaceSchedule,n.b.SPACE)];case 1:return[2,t.sent()]}})})},t.b=function(e,t){return c(this,void 0,void 0,function(){return r(this,function(a){switch(a.label){case 0:return[4,Object(l.e)({entityName:e,calendarId:t},l.a.Schedule.ResetSpaceSchedule,n.b.SPACE)];case 1:return[2,a.sent()]}})})},t.c=function(e,t){return c(this,void 0,void 0,function(){return r(this,function(a){switch(a.label){case 0:return[4,Object(l.e)({entityName:e,schedule:t},l.a.Schedule.SaveSpaceAvailable,n.b.SPACE)];case 1:return[2,a.sent()]}})})};var n=a(13),l=a(12),c=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,c){function r(e){try{o(n.next(e))}catch(e){c(e)}}function i(e){try{o(n.throw(e))}catch(e){c(e)}}function o(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(r,i)}o((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var a,n,l,c,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(l=2&c[0]?n.return:c[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,c[1])).done)return l;switch(n=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){r.label=c[1];break}if(6===c[0]&&r.label<l[1]){r.label=l[1],l=c;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(c);break}l[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],n=0}finally{a=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}},3212:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=(a.n(n),a(709)),c=a(747),r=a(707),i=a.n(r),o=a(1368),s=a(21),u=a(11),m=a(122),d=a(20),h=a(701),p=a(698),b=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},v=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(l,c){function r(e){try{o(n.next(e))}catch(e){c(e)}}function i(e){try{o(n.throw(e))}catch(e){c(e)}}function o(e){e.done?l(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(r,i)}o((n=n.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var a,n,l,c,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(c){return function(i){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(l=2&c[0]?n.return:c[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,c[1])).done)return l;switch(n=0,l&&(c=[2&c[0],l.value]),c[0]){case 0:case 1:l=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===c[0]||2===c[0])){r=0;continue}if(3===c[0]&&(!l||c[1]>l[0]&&c[1]<l[3])){r.label=c[1];break}if(6===c[0]&&r.label<l[1]){r.label=l[1],l=c;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(c);break}l[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(e){c=[6,e],n=0}finally{a=l=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},N=function(e){function t(t){var a=e.call(this,t)||this;return a.state={schedule:Object(),isEdit:!1,SpaceScheduleTime:Object()},a.handleFromDate=a.handleFromDate.bind(a),a.handleEventName=a.handleEventName.bind(a),a.getSpaceName=a.getSpaceName.bind(a),a.saveSpaceSchedule=a.saveSpaceSchedule.bind(a),a.handleToDate=a.handleToDate.bind(a),a.getSchedule=a.getSchedule.bind(a),a.AddTime=a.AddTime.bind(a),a.resetspaceSchedule=a.resetspaceSchedule.bind(a),a.spaceAvailable=a.spaceAvailable.bind(a),a}return b(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return[4,this.getSpaceName()];case 1:return e.sent(),[4,this.getSchedule()];case 2:return e.sent(),[2]}})})},t.prototype.getSpaceName=function(){return v(this,void 0,void 0,function(){var e,t,a;return E(this,function(n){switch(n.label){case 0:return Object(m.a)(!0),e=this.state.schedule,[4,Object(l.i)(this.props.buildingName,this.props.entityName)];case 1:return t=n.sent(),a=t[0],e.spaceName=Object(u.g)(a.rdfsLabel),e.calendarId=Object(u.g)(a.calendarId),e.price=parseInt(Object(u.g)(a.price)),e.available="true"==Object(u.g)(a.available),e.price=e.price&&!isNaN(e.price)&&"nan"!=e.price.toString().toLocaleLowerCase()?e.price:0,this.setState({schedule:e}),Object(m.a)(!1),[2]}})})},t.prototype.AddTime=function(){var e,t=this.state.schedule;(e=t.time).push.apply(e,[{ontology:Object(d.D)(7),from:(new Date).toString(),to:(new Date).toString()}]),this.setState({schedule:t})},t.prototype.spaceAvailable=function(){return v(this,void 0,void 0,function(){var e,t;return E(this,function(a){switch(a.label){case 0:return(e=this.state.schedule).unAvailableNote&&e.unAvailableNote,[4,Object(o.c)(this.props.entityName,e)];case 1:return t=a.sent(),e.available?Object(s.b)(t):Object(s.b)("UnAvailable this place"),[2]}})})},t.prototype.getSchedule=function(){return v(this,void 0,void 0,function(){var e,t,a,n;return E(this,function(l){switch(l.label){case 0:return Object(m.a)(!0),e=this.state,t=e.SpaceScheduleTime,a=e.schedule,[4,Object(o.a)(this.props.entityName)];case 1:return n=l.sent(),a.time=[],n.forEach(function(e){if(e){var n=Object(u.g)(e.from).split("-"),l=new Date;n[0]&&l.setHours(parseInt(n[0])),n[1]&&l.setMinutes(parseInt(n[1])),t.from=l.toString();var c=Object(u.g)(e.to).split("-"),r=new Date;c[0]&&r.setHours(parseInt(c[0])),c[1]&&r.setMinutes(parseInt(c[1])),t.to=r.toString(),t.ontology=Object(u.g)(e.ontology),a.time.push(f({},t))}}),this.setState({schedule:a}),Object(m.a)(!1),[2]}})})},t.prototype.handleFromDate=function(e,t){var a=this.state.schedule;a.time[t].from=e.toString(),this.setState({schedule:a})},t.prototype.handleToDate=function(e,t){var a=this.state.schedule;a.time[t].to=e.toString(),this.setState({schedule:a})},t.prototype.handleEventName=function(e){var t=this.state.schedule;t[e.target.name]=Object(d.K)(e.target.value,!0),this.setState({schedule:t})},t.prototype.saveSpaceSchedule=function(){return v(this,void 0,void 0,function(){var e,t;return E(this,function(a){switch(a.label){case 0:return e=this.state.schedule,[4,Object(o.d)(this.props.entityName,e)];case 1:return(t=a.sent())&&Object(s.b)(t),[2]}})})},t.prototype.resetspaceSchedule=function(){return v(this,void 0,void 0,function(){var e,t;return E(this,function(a){switch(a.label){case 0:return e=this.state.schedule,[4,Object(o.b)(this.props.entityName,e.calendarId)];case 1:return t=a.sent(),console.log(t),e=Object(),this.setState({schedule:e}),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,a=t.infoEntity,l=t.buildingName,r=t.entityName,o=this.state,s=o.schedule,u=o.isEdit;return n.createElement(n.Fragment,null,n.createElement("div",{className:"container-fluid"},n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12"},n.createElement(c.a,{instance:this.props.instance,buildingName:l,tabName:a,itemName:r,showDevicesButton:"Point"==a,showComponentButton:"Equip"==a,showAuditTypes:"Equip"==a||"Space"==a,showBIMButtons:"Equip"==a||"Space"==a}))),n.createElement("div",{className:"card padding-10"},n.createElement("div",{className:"content"},n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12"},!u&&n.createElement("button",{type:"button",className:"btn btn-success pull-right",onClick:function(){e.setState({isEdit:!0})}},n.createElement("i",{className:"fa fa-edit"})," Edit "),!u&&n.createElement("button",{type:"button",className:"btn btn-primary pull-right",style:{marginRight:5},onClick:function(){document.getElementById("btnReset").click()}},n.createElement("i",{className:"fa fa-refresh"})," Reset "),!s.available&&n.createElement(n.Fragment,null," ",!u&&n.createElement("button",{type:"button",className:"btn btn-primary pull-right",style:{marginRight:5},onClick:function(){s.available=!0,s.unAvailableNote="",e.setState({schedule:s}),s.calendarId?e.spaceAvailable():e.setState({isEdit:!0})}}," Available ")),s.available&&n.createElement(n.Fragment,null," ",!u&&n.createElement("button",{type:"button",className:"btn btn-primary pull-right",style:{marginRight:5},onClick:function(){s.unAvailableNote="",e.setState({schedule:s}),document.getElementById("btnUnAvailableNote").click()}}," UnAvailable ")))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"form-group col-md-12"},n.createElement("div",{className:"col-md-2"},n.createElement("label",null,"Space Name:")),n.createElement("div",{className:"col-md-5"},n.createElement("input",{type:"text",value:s.spaceName,className:"form-control",readOnly:!0})))),u&&n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"form-group col-md-12"},n.createElement("div",{className:"col-md-2"},n.createElement("label",null,"Price:")),n.createElement("div",{className:"col-md-5"},n.createElement("input",{type:"number",className:"form-control",name:"price",defaultValue:"0",placeholder:"Per Hour",value:s.price,onChange:function(t){1==u&&e.handleEventName(t)}})))),!u&&n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"form-group col-md-12"},n.createElement("div",{className:"col-md-2"},n.createElement("label",null,"Price:")),n.createElement("div",{className:"col-md-5"},n.createElement("label",{className:"form-control",style:{color:"black"}},s.price)))),u&&n.createElement(n.Fragment,null,n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-10"},n.createElement("label",null,n.createElement("h4",null," ",n.createElement("i",{className:"fa fa-plus"})," ADD Schedule")," "))),s.time&&s.time.map(function(t,a){return n.createElement(n.Fragment,null,n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("label",{className:"col-md-2 col-xs-2"},"From"),n.createElement("div",{className:"col-md-2 col-xs-2"},n.createElement(i.a,{className:"form-control",selected:t.from?new Date(t.from):new Date((new Date).setMinutes(0)),onChange:function(t){1==u&&e.handleFromDate(t,a)},showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:30})),n.createElement("label",{className:"col-md-2 col-xs-2"},"To"),n.createElement("div",{className:"col-md-2 col-xs-2"},n.createElement(i.a,{className:"form-control",selected:t.to?new Date(t.to):new Date((new Date).setMinutes(0)),onChange:function(t){1==u&&e.handleToDate(t,a)},showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:30})))))})),!u&&n.createElement(n.Fragment,null,n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-10"},n.createElement("label",null,n.createElement("h4",null,"Schedule")," "))),s.time&&s.time.map(function(e,t){return n.createElement(n.Fragment,null,n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12 col-xs-12"},n.createElement("label",{className:"col-md-2 col-xs-2"},"From"),n.createElement("div",{className:"col-md-2 col-xs-2"},n.createElement("label",{className:"form-control",style:{color:"black"}},new Date(e.from).getHours(),":",new Date(e.from).getMinutes())),n.createElement("label",{className:"col-md-2 col-xs-2"},"To"),n.createElement("div",{className:"col-md-2 col-xs-2"},n.createElement("label",{className:"form-control",style:{color:"black"}},new Date(e.to).getHours(),":",new Date(e.to).getMinutes())))))})),u&&n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-8"},n.createElement("button",{className:"btn btn-success pull-right",onClick:function(){e.AddTime()}},n.createElement("i",{className:"fa fa-plus"})))),n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"form-group col-md-12"},u&&n.createElement("button",{type:"button",className:"btn btn-success pull-right",onClick:function(){s.available=!0,e.setState({isEdit:!1,schedule:s}),e.saveSpaceSchedule()}},n.createElement("i",{className:"fa fa-save"}),"Save ")))))),n.createElement("button",{id:"btnReset",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmResetDialog"},"."),n.createElement(h.a,{instance:this.props.instance,id:"ConfirmResetDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to reset? This space will not available for reservation until scheduling information is set.",heading:"Confirm...",onConfirmButtonClick:function(){e.resetspaceSchedule()}}),n.createElement("button",{id:"btnUnAvailableNote",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmUnAvailableNote"},"."),n.createElement(p.a,{id:"ConfirmUnAvailableNote",onSaveButtonClick:function(){s.available=!1,e.setState({schedule:s}),e.spaceAvailable()},heading:"Note",saveButtonText:"Ok",isEditForm:!1,disableSaveButton:!s.unAvailableNote},n.createElement("div",{className:"row padding-10"},n.createElement("div",{className:"col-md-12"},n.createElement("div",{className:"col-md-2"},n.createElement("label",null,"Notes:")),n.createElement("div",{className:"col-md-8"},n.createElement("textarea",{className:"form-control",value:Object(d.K)(s.unAvailableNote,!1),name:"unAvailableNote",onChange:function(t){e.handleEventName(t)},placeholder:"Write Your Note"}))))))},t}(n.Component);t.default=N}});