webpackJsonp([62],{2894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=(n.n(i),n(2895)),a=n.n(o),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=function(e){function t(t){var n=e.call(this,t)||this;return n.recordedChunks=[],n.setRef=function(e){n.webcam=e},n.state={isVideoStart:!1,VideoURL:"",imageSrc:void 0,showWebCam:!0,isVideoRecording:!1,videoBlob:Object()},n.onTakePhoto=n.onTakePhoto.bind(n),n.onStartVideo=n.onStartVideo.bind(n),n.gotMedia=n.gotMedia.bind(n),n.onStopVideo=n.onStopVideo.bind(n),n.checkRecordingStatus=n.checkRecordingStatus.bind(n),n}return r(t,e),t.prototype.componentDidMount=function(){},t.prototype.onTakePhoto=function(){var e=this,t=this.webcam.getScreenshot();this.setState({imageSrc:t,videoBlob:Object(),VideoURL:Object(),showWebCam:!1},function(){e.props.handleFile(t)})},t.prototype.onStartVideo=function(){navigator.mediaDevices.getUserMedia({video:{width:{max:320}},audio:!0}).then(this.gotMedia).catch(function(e){console.error("getUserMedia() failed: "+e)}),this.setState({isVideoRecording:!0,showWebCam:!0})},t.prototype.gotMedia=function(e){this.theStream=e;try{this.recorder=new MediaRecorder(e,{mimeType:"video/webm"})}catch(e){return void console.error("Exception while creating MediaRecorder: "+e)}var t=this;this.recorder.ondataavailable=function(e){t.recordedChunks.push(e.data)},this.recorder.start(100),this.checkRecordingStatus()},t.prototype.checkRecordingStatus=function(){"recording"===this.recorder.state?this.setState({isVideoStart:!0}):this.setState({isVideoStart:!1})},t.prototype.onStopVideo=function(){var e=this;this.recorder.stop(),this.checkRecordingStatus(),this.theStream.getTracks().forEach(function(e){e.stop()});var t=new Blob(this.recordedChunks,{type:"video/mp4"}),n=URL.createObjectURL(t);this.setState({imageSrc:Object(),VideoURL:n,videoBlob:t,showWebCam:!1,isVideoRecording:!1},function(){e.props.handleFile(t)}),setTimeout(function(){URL.revokeObjectURL(n)},100)},t.prototype.render=function(){var e=this,t=this.state,n=t.isVideoStart,o=t.VideoURL,r=t.videoBlob,s=t.imageSrc,c=t.showWebCam,d=t.isVideoRecording;return i.createElement(i.Fragment,null,i.createElement("div",{className:"content"},c&&i.createElement("div",{className:"col-md-12 padding-10"},i.createElement(a.a,{audio:!1,height:350,ref:this.setRef})),i.createElement("div",{className:"col-md-11 col-md-offset-1 padding-10"},i.createElement("div",{className:"row btn-group"},!c&&!d&&i.createElement("button",{type:"button",disabled:n,className:"btn btn-primary btn-fill btn-cam",onClick:function(){e.setState({showWebCam:!0,imageSrc:Object()})}},i.createElement("i",{className:"fa fa-camera"}),"Take Another"),c&&!d&&i.createElement("button",{type:"button",disabled:n,className:"btn btn-primary btn-fill btn-cam",onClick:this.onTakePhoto},i.createElement("i",{className:"fa fa-camera"}),"Take Photo"),!this.props.isImageOnly&&c&&!d&&i.createElement("button",{type:"button",disabled:n,className:"btn btn-secondary btn-fill btn-cam",onClick:this.onStartVideo},i.createElement("i",{className:"fa fa-play-circle"}),"Start Video"),!this.props.isImageOnly&&c&&d&&i.createElement("button",{type:"button",disabled:!n,className:"btn btn-danger btn-fill btn-cam",onClick:this.onStopVideo},i.createElement("i",{className:"fa fa-stop-circle"}),"Stop Video")),i.createElement("div",{className:"col-md-12 padding-10"},o&&o.length&&r&&!c&&i.createElement("video",{height:"350",controls:!0},i.createElement("source",{src:o,type:"video/mp4"})),!c&&s&&s.length&&i.createElement("div",{className:"row"},i.createElement("img",{height:"350",src:s}))))))},t}(i.Component);t.default=s},2895:function(e,t,n){!function(t,i){e.exports=i(n(4),n(2))}(0,function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(1),r=c(a),s=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var d=s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string),s.default.shape({exact:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)])}),s.default.shape({ideal:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)])})]),u=s.default.oneOfType([s.default.shape({exact:s.default.bool}),s.default.shape({ideal:s.default.bool})]),l=s.default.oneOfType([s.default.number,s.default.shape({exact:s.default.number,ideal:s.default.number,min:s.default.number,max:s.default.number})]),h=l,f=s.default.shape({deviceId:d,groupId:d,autoGainControl:u,channelCount:l,latency:h,noiseSuppression:u,sampleRate:l,sampleSize:l,volume:h}),p=s.default.shape({deviceId:d,groupId:d,aspectRatio:h,facingMode:d,frameRate:h,height:l,width:l}),m=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hasUserMedia:!1},e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"componentDidMount",value:function(){(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)&&(t.mountedInstances.push(this),this.state.hasUserMedia||t.userMediaRequested||this.requestUserMedia())}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.audioConstraints)===JSON.stringify(this.props.audioConstraints)&&JSON.stringify(e.videoConstraints)===JSON.stringify(this.props.videoConstraints)||this.requestUserMedia()}},{key:"componentWillUnmount",value:function(){var e=t.mountedInstances.indexOf(this);t.mountedInstances.splice(e,1),t.userMediaRequested=!1,0===t.mountedInstances.length&&this.state.hasUserMedia&&(this.stream.getVideoTracks&&this.stream.getAudioTracks?(this.stream.getVideoTracks().map(function(e){return e.stop()}),this.stream.getAudioTracks().map(function(e){return e.stop()})):this.stream.stop(),window.URL.revokeObjectURL(this.state.src))}},{key:"getScreenshot",value:function(){if(!this.state.hasUserMedia)return null;var e=this.getCanvas();return e&&e.toDataURL(this.props.screenshotFormat,this.props.screenshotQuality)}},{key:"getCanvas",value:function(){if(!this.state.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var e=document.createElement("canvas"),t=this.video.videoWidth/this.video.videoHeight,n=this.props.minScreenshotWidth||this.video.clientWidth,i=n/t;this.props.minScreenshotHeight&&i<this.props.minScreenshotHeight&&(n=(i=this.props.minScreenshotHeight)*t),e.width=n,e.height=i,this.canvas=e,this.ctx=e.getContext("2d")}var o=this.ctx,a=this.canvas;return o.imageSmoothingEnabled=this.props.imageSmoothing,o.drawImage(this.video,0,0,a.width,a.height),a}},{key:"requestUserMedia",value:function(){var e=this;navigator.getUserMedia=navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var n=function(n,i){var o={video:i||!0};e.props.audio&&(o.audio=n||!0),navigator.mediaDevices.getUserMedia(o).then(function(e){t.mountedInstances.forEach(function(t){return t.handleUserMedia(null,e)})}).catch(function(e){t.mountedInstances.forEach(function(t){return t.handleUserMedia(e)})})};if("mediaDevices"in navigator)n(this.props.audioConstraints,this.props.videoConstraints);else{var o=function(e){return{optional:[{sourceId:e}]}},a=function(e){var t=(e||{}).deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===("undefined"===typeof t?"undefined":i(t))&&t.ideal?t.ideal:null};MediaStreamTrack.getSources(function(t){var i=null,r=null;t.forEach(function(e){"audio"===e.kind?i=e.id:"video"===e.kind&&(r=e.id)});var s=a(e.props.audioConstraints);s&&(i=s);var c=a(e.props.videoConstraints);c&&(r=c),n(o(i),o(r))})}t.userMediaRequested=!0}},{key:"handleUserMedia",value:function(e,t){if(e)return this.setState({hasUserMedia:!1}),void this.props.onUserMediaError(e);this.stream=t;try{this.video.srcObject=t,this.setState({hasUserMedia:!0})}catch(e){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}this.props.onUserMedia()}},{key:"render",value:function(){var e=this;return r.default.createElement("video",{autoPlay:!0,width:this.props.width,height:this.props.height,src:this.state.src,muted:this.props.audio,className:this.props.className,playsInline:!0,style:this.props.style,ref:function(t){e.video=t}})}}]),t}();m.defaultProps={audio:!0,className:"",height:480,imageSmoothing:!0,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",width:640,screenshotQuality:.92},m.propTypes={audio:s.default.bool,onUserMedia:s.default.func,onUserMediaError:s.default.func,height:s.default.oneOfType([s.default.number,s.default.string]),width:s.default.oneOfType([s.default.number,s.default.string]),screenshotFormat:s.default.oneOf(["image/webp","image/png","image/jpeg"]),style:s.default.object,className:s.default.string,screenshotQuality:s.default.number,minScreenshotWidth:s.default.number,minScreenshotHeight:s.default.number,audioConstraints:f,videoConstraints:p,imageSmoothing:s.default.bool},m.mountedInstances=[],m.userMediaRequested=!1,t.default=m,e.exports=t.default}])})}});