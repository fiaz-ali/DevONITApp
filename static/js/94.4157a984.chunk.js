webpackJsonp([94],{785:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=n(1),l=(n.n(i),n(13)),r=n(39),c=n(18),o=n(4),s=n(9),d=n(10),u=n(212),m=n(23),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,l){function r(e){try{o(a.next(e))}catch(e){l(e)}}function c(e){try{o(a.throw(e))}catch(e){l(e)}}function o(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,c)}o((a=a.apply(e,t||[])).next())})},h=this&&this.__generator||function(e,t){var n,a,i,l,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&l[0]?a.return:l[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,l[1])).done)return i;switch(a=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){r=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){r.label=l[1];break}if(6===l[0]&&r.label<i[1]){r.label=i[1],i=l;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(l);break}i[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(e){l=[6,e],a=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buildingObj:Object(),isEdit:!1,addBuildingFunction:!1,addBuildingName:"",regionList:[],buildingNameToDelete:Object(),isDelete:!1},a=n,n.setBuilding=n.setBuilding.bind(n),n.saveBuilding=n.saveBuilding.bind(n),n.handleBuildingChange=n.handleBuildingChange.bind(n),n.getRegion=n.getRegion.bind(n),n.deleteBuilding=n.deleteBuilding.bind(n),n.toDeleteBuilding=n.toDeleteBuilding.bind(n),n}return g(t,e),t.prototype.saveBuilding=function(){return b(this,void 0,void 0,function(){var e,t,n,a,i;return h(this,function(l){switch(l.label){case 0:return e=this.state,t=e.buildingObj,n=e.isEdit,a=this.props.instance,t.dashboardLink&&t.dashboardLink.indexOf("&kiosk=tv&autofitpanels"),t.dashboardLink,t.wholeBuildingMeterLink&&t.wholeBuildingMeterLink.indexOf("&kiosk=tv&autofitpanels"),t.wholeBuildingMeterLink,i=JSON.parse(s.a.getItem("user")),t&&t.rdfsLabel?(Object(c.a)(!0),[4,Object(r.d)(t,i.contact,n)]):[3,2];case 1:l.sent(),Object(c.a)(!1),l.label=2;case 2:return window.location.hash=a+"/Buildings",[2]}})})},t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this.props.instance?[4,this.setBuilding()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.setBuilding=function(){return b(this,void 0,void 0,function(){var e=this;return h(this,function(t){return this.props.buildingName&&this.props.buildingName.length>0&&Object(r.c)(this.props.buildingName).then(function(t){if(t.length>0){var n=t[0],i=e.state.buildingObj;i.rdfsLabel=Object(o.g)(n.rdfsLabel),i.address=Object(o.g)(n.address),i.area=Object(o.g)(n.area),i.buildingFunction=Object(o.g)(n.function),i.buildingName=Object(o.g)(n.building),i.campus=Object(o.g)(n.campus),i.linkbimism=Object(o.g)(n.linkBimism),i.street=Object(o.g)(n.street),i.state=Object(o.g)(n.state),i.city=Object(o.g)(n.city),i.zipcode=Object(o.g)(n.zipcode),i.dashboardLink=Object(o.g)(n.dashboardLink),i.googleMapLink=Object(o.g)(n.googleMapLink),i.wholeBuildingMeterLink=Object(o.g)(n.wholeBuildingMeterLink),i.MVPSecurity=Object(o.g)(n.MVPSecurity),i.country=Object(o.g)(n.country),a.setState({buildingObj:i,isEdit:!0}),e.getRegion()}}).catch(function(e){return e}),[2]})})},t.prototype.handleBuildingChange=function(e,t){var n=this.state.buildingObj;switch(e){case"buildingName":n.rdfsLabel=t;break;case"address":n.address=t;break;case"area":n.area=t;break;case"buildingFunction":n.buildingFunction=t,"Other"==n.buildingFunction&&document.getElementById("openSecondDialog").click();case"campus":n.campus=t;break;case"linkbimism":n.linkbimism=t;break;case"street":n.street=t;break;case"city":n.city=t;break;case"state":n.state=t;break;case"zipcode":n.zipcode=t;break;case"dashboardLink":n.dashboardLink=t;break;case"googleMapLink":n.googleMapLink=t;break;case"wholeBuildingMeterLink":n.wholeBuildingMeterLink=t;break;case"MVPSecurity":n.MVPSecurity=t;break;case"country":n.country=t;var a=u.a&&u.a.find(function(e){return e.countryName==t});this.setState({regionList:a.regions})}this.setState({buildingObj:n})},t.prototype.getRegion=function(){var e=this.state,t=e.buildingObj,n=e.regionList;if(this.props.buildingName&&this.props.buildingName.length>0){var a=u.a&&u.a.find(function(e){return e.countryName==t.country});n=a&&a.regions,this.setState({regionList:n})}},t.prototype.deleteBuilding=function(e){this.setState({buildingNameToDelete:e},function(){document.getElementById("btnConfirm").click()})},t.prototype.toDeleteBuilding=function(){return b(this,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return(e=this.state.buildingNameToDelete)?[4,Object(r.a)(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return document.getElementById("cancelBuildingEdit").click(),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.buildingObj,a=t.addBuildingFunction,r=t.addBuildingName,c=t.regionList,o=t.isEdit,s=this.props,g=s.instance,b=s.buildingName,h=n&&n.city&&n.state&&n.street&&n.zipcode&&n.rdfsLabel&&n.area&&n.buildingFunction&&!0;return i.createElement(l.AppContext.Consumer,null,function(t){return i.createElement("div",{className:"content"},i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid padding-10"},i.createElement("h4",{className:"title"},"Building Information"),i.createElement("hr",null),i.createElement("br",null),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"buildingname"},"Building name:"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"buildingname",className:"form-control",value:n.rdfsLabel,onChange:function(t){e.handleBuildingChange("buildingName",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"area"},"Area:"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"number",id:"area",className:"form-control",value:n.area,onChange:function(t){e.handleBuildingChange("area",t.target.value)}}))),i.createElement("div",{className:"col-md-2"},"Square Feet")),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"buildingFunction"},"Function:"))),i.createElement("div",{className:"col-md-3"},i.createElement("div",{className:"form-group"},i.createElement("select",{className:"form-control",id:"buildingFunction",value:n.buildingFunction,onChange:function(t){e.handleBuildingChange("buildingFunction",t.target.value)}},i.createElement("option",{value:""},"Select Function"),i.createElement("option",{value:"Residential"},"Residential"),i.createElement("option",{value:"Commercial"},"Commercial"),i.createElement("option",{value:"Other"},"Other")))),i.createElement("button",{type:"button",id:"openSecondDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#secondDialog"}," ."),i.createElement(d.a,{id:"secondDialog",heading:a?"Add Building Function ":"Add Building Function",saveButtonText:r?"Update Building":"Create Building Funcion",cancelButtonText:"Cancel",disableSaveButton:!n.buildingFunction,showCancelButton:!0,showSaveButton:!0,isEditForm:!1,onSaveButtonClick:function(){}},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("label",{htmlFor:"point"},"Name:"),i.createElement("br",null),i.createElement("input",{type:"text",className:"controls clearfix form-control",name:"networkType",placeholder:"Other Name"}))))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"streetAddress"},"Address"))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("select",{className:"form-control",id:"country",value:n.country,onChange:function(t){e.handleBuildingChange("country",t.target.value)}},i.createElement("option",{value:""},"Select Country"),u.a&&u.a.map(function(e,t){return i.createElement("option",{value:e.countryName},e.countryName)})))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("select",{className:"form-control",id:"state",value:n.state,onChange:function(t){e.handleBuildingChange("state",t.target.value)}},i.createElement("option",{value:""},"Select State"),c&&c.map(function(e){return i.createElement("option",{value:e.label},e.label)})))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"streetAddress",name:"streetAddress",className:"form-control",placeholder:"Street",value:n.street,onChange:function(t){e.handleBuildingChange("street",t.target.value)}}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"city",name:"city",className:"form-control",placeholder:"City",value:n.city,onChange:function(t){e.handleBuildingChange("city",t.target.value)}}))),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",id:"zipcode",name:"zipcode",className:"form-control",placeholder:"ZipCode",value:n.zipcode,onChange:function(t){e.handleBuildingChange("zipcode",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Virtual BIM Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"linkbimism",value:n.linkbimism,onChange:function(t){e.handleBuildingChange("linkbimism",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Dashboard Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"dashboardLink",value:n.dashboardLink,onChange:function(t){e.handleBuildingChange("dashboardLink",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"MVPSecurity"},"MVP Security Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"MVPSecurity",name:"MVPSecurity",value:n.MVPSecurity,onChange:function(t){e.handleBuildingChange("MVPSecurity",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Whole Building Meter Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"wholeBuildingMeterLink",value:n.wholeBuildingMeterLink,onChange:function(t){e.handleBuildingChange("wholeBuildingMeterLink",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"linkbimism"},"Google Map Link:"))),i.createElement("div",{className:"col-md-9"},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",id:"googleMapLink",value:n.googleMapLink,onChange:function(t){e.handleBuildingChange("googleMapLink",t.target.value)}})))),i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12 inline-block"},i.createElement("button",{disabled:!h,className:"btn btn-primary btn-fill",onClick:function(){t.onChangeBuilding(Object()),e.saveBuilding()}},i.createElement("i",{className:"fa fa-save"})," Save"),i.createElement("button",{className:"btn btn-secondary btn-fill",id:"cancelBuildingEdit",onClick:function(){return window.location.hash=g+"/Buildings"}},i.createElement("i",{className:"fa fa-window-close"})," Cancel"),o&&i.createElement("button",{className:"btn btn-danger active",onClick:function(){e.deleteBuilding(b)}},i.createElement("i",{className:"fa fa-trash"})," Delete"))))),i.createElement("button",{id:"btnConfirm",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmDeleteDialog"},"."),i.createElement(m.a,{instance:g,id:"ConfirmDeleteDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this Building?",heading:"Confirm...",onConfirmButtonClick:function(){e.toDeleteBuilding()}}))})},t}(i.Component);t.default=p}});