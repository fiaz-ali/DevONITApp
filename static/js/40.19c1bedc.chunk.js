webpackJsonp([40,47],{1021:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(827)),i=n(8),l=n(115),r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={items:[],spaces:[],selectedRowIndex:0,spacesDropDownList:[],isAddDisable:!1},n.addItem=n.addItem.bind(n),n.handleDescriptionChange=n.handleDescriptionChange.bind(n),n.handleSpaceChange=n.handleSpaceChange.bind(n),n.getSweeps=n.getSweeps.bind(n),n.handleSpaceDropdownListChange=n.handleSpaceDropdownListChange.bind(n),n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){e.items&&this.setState({items:e.items}),e.spaces&&this.setState({spaces:e.spaces}),e.destinationSpace&&this.setState({destinationSpace:e.destinationSpace}),e.destinationSweeps&&(console.log(e.destinationSweeps),this.setState({destinationSweeps:e.destinationSweeps},function(){console.log("Destination sweeps updated")}))},t.prototype.addItem=function(){var e=this.state.items;e.push({space:[this.state.destinationSpace],description:"",sweeps:this.state.destinationSweeps}),this.setState({items:e,isAddDisable:!0}),this.props.onItemChange(e)},t.prototype.handleSpaceChange=function(e){return s(this,void 0,void 0,function(){var t,n,a,o,i;return c(this,function(l){switch(l.label){case 0:if(this.props.isView)return[3,5];for((t=this.state.items)[this.state.selectedRowIndex].space=e,n=[],a=e.reverse(),o=0;o<a.length;o++)i=a[o],n.push(i);o=0,l.label=1;case 1:return o<n.length?(i=n[o],[4,this.getSweeps(this.props.building,i.value,t,o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:this.state.selectedRowIndex==t.length-1&&this.setState({isAddDisable:!1}),l.label=5;case 5:return[2]}})})},t.prototype.handleSpaceDropdownListChange=function(){this.setState({spacesDropDownList:this.state.spaces.map(function(e){return{value:e.ontology.value,label:e.rdfsLabel.value}})})},t.prototype.handleDescriptionChange=function(e,t){if(!this.props.isView){var n=this.state.items;n[t].description=e,this.setState({items:n}),this.props.onItemChange(n)}},t.prototype.getSweeps=function(e,t,n,a){return s(this,void 0,void 0,function(){var l=this;return c(this,function(r){switch(r.label){case 0:return[4,Object(o.c)(e,t).then(function(e){return s(l,void 0,void 0,function(){var t,o,l,r,s;return c(this,function(c){for(t=[],o=0==a?0:n[this.state.selectedRowIndex].sweeps.length,l=0;l<e.length;l++)r=e[l],(s=Object()).assignedSpace=Object(i.g)(r.assignedSpace),s.buildingName=Object(i.g)(r.buildingName),s.ontology=Object(i.g)(r.ontology),s.uuid=Object(i.g)(r.uuid),s.uuidIndex=parseInt(Object(i.g)(r.uuidIndex)),s.stepNo=parseInt(r.stepNo.value)+o,t.push(s);return 0!=a&&n[this.state.selectedRowIndex].sweeps.forEach(function(e){t.push(e)}),n[this.state.selectedRowIndex].sweeps=t,this.setState({items:n}),this.props.onItemChange(n),[2]})})}).catch(function(e){return e})];case 1:return r.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.items,o=t.spaces,i=t.spacesDropDownList,r=t.isAddDisable,s=this.props.isView;return i=o.map(function(e){return{value:e.ontology.value,label:e.rdfsLabel.value}}),a.createElement(a.Fragment,null,a.createElement("div",{className:"dataCard"},a.createElement("div",{className:"row hidden-xs"},a.createElement("div",{className:"col-sm-6 headingText"},"Routes"),a.createElement("div",{className:"col-sm-6 headingText"},"Description")),n.map(function(t,n){return a.createElement("div",{key:n,className:"row"},a.createElement("div",{className:"col-sm-6 col-xs-12"},a.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-6"},a.createElement("label",{htmlFor:"space"},"Routes")),a.createElement("span",{className:"fullWidth"},a.createElement(l.a,{isMulti:!0,closeMenuOnSelect:!1,value:t.space,onChange:e.handleSpaceChange,onFocus:function(){e.setState({selectedRowIndex:n})},placeholder:"Directions",options:i}))),a.createElement("div",{className:"col-sm-6 col-xs-12"},a.createElement("span",{className:"hidden visible-xs-inline headingText col-xs-3"},a.createElement("label",{htmlFor:"description"},"Description")),a.createElement("span",{className:"fullWidth"},a.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,placeholder:"Description",name:"description",onChange:function(t){return e.handleDescriptionChange(t.target.value,n)}}))))})),a.createElement("br",null),!s&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-11"},a.createElement("button",{disabled:r,type:"button",className:"btn btn-dark btn-fill btn-sm",onClick:this.addItem},a.createElement("i",{className:"fa fa-plus"}),n.length>0?"More":"Add"))))},t}(a.Component);t.a=u},1250:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(38)),i=n(1021),l=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),r=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isStarted:!1,isTourSelected:!1,selectedSteps:n.props.sweeps,modelDetails:Object(),spaceDetails:[],currentSweep:Object(),matterTags:[],floorDetails:Object(),logMessage:"",sdkReady:!1,hasStartSweep:!1,startSweep:Object(),isViewForm:n.props.isViewForm,prevSweepIndex:0,onPropsReceivedStateChanged:!1,linkBimism:n.props.bimURL,routes:n.props.routes,locationDropdownList:[],destinationSpace:n.props.selectedSpace,destinationSweeps:n.props.sweeps},n.loadFrame=n.loadFrame.bind(n),n.toggleTourStartStop=n.toggleTourStartStop.bind(n),n.toggleTourSweepsStartStop=n.toggleTourSweepsStartStop.bind(n),n.addCurrentSweep=n.addCurrentSweep.bind(n),n.toggleAddingSweep=n.toggleAddingSweep.bind(n),n.removeSweep=n.removeSweep.bind(n),n.setDialogState=n.setDialogState.bind(n),n.onSaveHandle=n.onSaveHandle.bind(n),n.handleRouteChange=n.handleRouteChange.bind(n),n}return l(t,e),t.prototype.componentWillReceiveProps=function(e){(0==this.state.selectedSteps.length&&e.sweeps.length>0||e.isSweepChangeable)&&(this.setState({selectedSteps:e.sweeps,hasStartSweep:!0,startSweep:e.sweeps.find(function(e){return 0==e.stepNo}),onPropsReceivedStateChanged:!0}),this.loadFrame(this.setDialogState,this.state),e.isSweepChangeable&&this.props.onSweepChangeable(e.isSweepChangeable)),e.bimURL&&this.setState({linkBimism:e.bimURL}),e.locationDropdownList&&this.setState({locationDropdownList:e.locationDropdownList}),e.sweeps&&this.setState({destinationSweeps:e.sweeps}),e.selectedSpace&&this.setState({destinationSpace:e.selectedSpace}),e.routes&&this.setState({routes:e.routes})},t.prototype.componentDidUpdate=function(){this.state.onPropsReceivedStateChanged&&(this.setState({onPropsReceivedStateChanged:!1}),this.loadFrame(this.setDialogState,this.state))},t.prototype.onSaveHandle=function(){if(this.props.isTaskForm){var e=this.state.routes;this.props.onSaveRouteClickButton(e)}else{var t=this.state.selectedSteps;this.props.onSaveClickButton(t)}},t.prototype.toggleAddingSweep=function(){window.toggleStartStopAddingSweep()},t.prototype.toggleTourStartStop=function(){window.toggleTourSelectedSweep()},t.prototype.toggleTourSweepsStartStop=function(e){window.toggleTourSweepsSelectedSweep(e)},t.prototype.addCurrentSweep=function(){window.addCurrentSweep()},t.prototype.removeSweep=function(e){window.removeSweep(e)},t.prototype.setDialogState=function(e,t,n,a,o,i,l,r){null!=e&&this.setState({isStarted:e}),null!=t&&this.setState({isTourSelected:t}),null!=n&&this.setState({selectedSteps:n}),null!=a&&this.setState({modelDetails:a}),null!=o&&this.setState({currentSweep:o}),null!=i&&this.setState({logMessage:i}),null!=r&&this.setState({prevSweepIndex:r}),null!=l&&(this.setState({sdkReady:l}),this.loadFrame(this.setDialogState,this.state))},t.prototype.loadFrame=function(e,t){var a=n(772),o=a.APIKey,i=a.Version,l=document.getElementById("showcase"),r=!1,s=t.modelDetails,c=t.currentSweep,u=t.isStarted,d=t.isTourSelected,p=t.selectedSteps,h=t.sdkReady,m=t.startSweep,f=t.hasStartSweep,b=t.isViewForm,g=t.prevSweepIndex;window.MP_SDK.connect(l,o,i).then(function(t){function n(a,o){u?(console.log("Tour Stopped"),e(null,null,null,null,null,"Tour Stopped")):(o.length>0&&o.length>a?(d=!0,t.Sweep.moveTo(o[a].uuid,{transition:t.Sweep.Transition.FLY}).then(function(t){var i="Arrived at sweep "+t+"at index "+o[a].uuidIndex;console.log(i),e(null,null,null,null,null,i),n(a+=1,o)}).catch(function(e){console.log("Error: "+JSON.stringify(e))})):(d=!1,console.log("Tour Ended"),e(null,null,null,null,null,"Tour Ended")),e(null,d))}console.log("SDK Connected!"),h||t.App.state.subscribe(function(n){n.phase===t.App.Phase.LOADING&&console.log("The app has started loading!"),n.phase===t.App.Phase.STARTING&&console.log("The transition into the start location begins!"),n.phase===t.App.Phase.PLAYING&&(console.log("The app is ready to take user input now!"),h=!0,e(null,null,null,null,null,null,!0),f&&window.goToSweep(m.uuid))}),t.Model.getData().then(function(t){console.log("Model data loaded for sid:",t.sid),e(null,null,null,s=t)}),window.toggleStartStopAddingSweep=function(){e(u=!u),u&&window.addCurrentSweep()},window.toggleTourSelectedSweep=function(){(e(null,d=!0),d)?(console.log("Tour Started"),e(null,null,null,null,null,"Tour Started"),n(0,p.sort(function(e,t){return e.stepNo-t.stepNo}))):(console.log("Tour Stopped"),e(null,d),e(null,null,null,null,null,"Tour Stopped"))},window.toggleTourSweepsSelectedSweep=function(t){(e(null,d=!0),d)?(console.log("Tour Started"),e(null,null,null,null,null,"Tour Started"),n(0,t.sort(function(e,t){return e.stepNo-t.stepNo}))):(console.log("Tour Stopped"),e(null,d),e(null,null,null,null,null,"Tour Stopped"))},window.addCurrentSweep=function(){t.Camera.getPose().then(function(t){var n=s.sweeps.find(function(e){return e.uuid==t.sweep});e(null,null,null,null,c=n);var a=s.sweeps.indexOf(n);if(!function(t){if(p.length>0){var n=p.find(function(e){return e.uuid==t});if(null!=n||""+n!="undefined"){var a="Sweep "+n.uuid+" of index "+n.uuidIndex+" is already added in the current list";return console.log(a),e(null,null,null,null,null,a),!0}}return!1}(c.uuid)){p.push({uuid:c.uuid,uuidIndex:a,stepNo:p.length}),e(null,null,p);var o="Sweep "+c.uuid+" of index "+a+" is added in the current list";console.log(o),e(null,null,null,null,null,o)}})},window.removeSweep=function(t){var n=p.find(function(e){return e.uuid==t}),a=p.indexOf(n);if(a>-1){p.splice(a,1),e(null,null,p);var o="Sweep "+n.uuid+" of index "+n.uuidIndex+" is removed from the current list";console.log(o),e(null,null,null,null,null,o)}},window.goToSweep=function(n){t.Sweep.moveTo(n,{transition:t.Sweep.Transition.FLY}).then(function(t){var a="Moved to sweep "+n;console.log(a),e(null,null,null,null,null,a)}).catch(function(e){console.log("Error: "+JSON.stringify(e))})},t.on(t.Sweep.Event.ENTER,function(){if(d)return!1;t.Camera.getPose().then(function(t){if("mode.inside"==t.mode||"mode.outside"==t.mode)if(b&&p.length>0){var n=p.find(function(e){return e.uuid==t.sweep});if(null!=n&&""+n!="undefined"){var a="Moved to sweep "+n.uuid;console.log(a),e(null,null,null,null,null,a),g=p.indexOf(n),e(null,null,null,null,null,null,null,g)}else{a="Not allowed in the current step ";if(console.log(a),e(null,null,null,null,null,a),r)return setTimeout(function(){r=!1},1500),r=!1,!1;r=!0,window.goToSweep(p[g].uuid)}}else console.log("Current Sweep is: "+JSON.stringify(t.sweep)),u&&window.addCurrentSweep()})})}).catch(function(e){console.log("Error while connecting with Matterport SDK")})},t.prototype.handleRouteChange=function(e){var t=[];e.forEach(function(e){e.sweeps.forEach(function(e){t.push(e)})}),this.setState({routes:e,selectedSteps:t})},t.prototype.render=function(){var e=this;this.props.isRefreshDialog&&(this.setState({isStarted:!1,isTourSelected:!1,selectedSteps:[],modelDetails:Object(),spaceDetails:[],currentSweep:Object(),matterTags:[],floorDetails:Object(),logMessage:"",sdkReady:!1,hasStartSweep:!1,startSweep:Object(),isViewForm:this.props.isViewForm,prevSweepIndex:0,onPropsReceivedStateChanged:!1,linkBimism:this.props.bimURL,destinationSpace:{label:"",value:""},destinationSweeps:[],routes:[],locationDropdownList:[]}),this.props.onRefreshMatterport(!1));var t=this.props,n=t.id,l=t.heading,r=t.isViewForm,s=t.isTaskForm,c=t.isTaskView,u=t.sweeps,d=t.selectedSpace,p=t.showSaveButton,h=this.state,m=h.isStarted,f=h.selectedSteps,b=h.isTourSelected,g=h.logMessage,v=h.sdkReady,w=h.routes,S=h.locationDropdownList,E=this.state.linkBimism;E&&!E.includes("&utm_source=sdkdebug&play=1&tourcta=0")&&(E+="&utm_source=sdkdebug&play=1&tourcta=0");var y=0,N=0,C=!1,O=!1;return v?(C=b,O=m):(C=!0,O=!0),a.createElement(o.a,{id:n,saveButtonText:"Save",heading:l,isEditForm:!0,showSaveButton:p,showCancelButton:r,onSaveButtonClick:function(){e.onSaveHandle()}},a.createElement("div",{className:"card dataCard padding-10 no-margin"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("iframe",{id:"showcase",src:E,onLoad:function(){e.loadFrame(e.setDialogState,e.state)},width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-7 col-xs-12"},!s&&!c&&a.createElement(a.Fragment,null,!r&&a.createElement("button",{type:"button",id:"btnStartStop",disabled:C,title:1==m?"Stop":"Start",className:"btn btn-primary btn-fill",onClick:this.toggleAddingSweep},a.createElement("i",{className:1==m?"fa fa-stop":"fa fa-plus"})),!r&&a.createElement("button",{type:"button",id:"btnAddCurrentStep",disabled:C&&O,title:"Add current step",className:"btn btn-primary btn-fill matterport-dialog-btn-tour-margin",onClick:this.addCurrentSweep},a.createElement("i",{className:"fa fa-thumb-tack"})),a.createElement("button",{type:"button",id:"btnTourSelectedSteps",disabled:O,title:1==m?"Tour selected steps stopped":"Tour selected steps started",className:"btn btn-primary btn-fill ",onClick:this.toggleTourStartStop},a.createElement("i",{className:1==b?"fa fa-stop":"fa fa-play"})),a.createElement("br",null),a.createElement("br",null)),!s&&a.createElement("span",{className:"small-font-list"},g),s&&a.createElement(i.a,{building:this.props.buildingName,items:w,onItemChange:this.handleRouteChange,isView:!1,spaces:S,destinationSpace:d,destinationSweeps:u})),!s&&a.createElement("div",{className:"col-md-5 col-xs-12"},a.createElement("table",null,a.createElement("tr",null,a.createElement("th",null,"Steps"),a.createElement("th",null)),f&&f.map(function(t){return y+=1,a.createElement("tr",null,a.createElement("td",{className:"link",onClick:function(){v&&window.goToSweep(t.uuid)}},"Step ",y,": ",t.uuid),a.createElement("td",null,!r&&v&&a.createElement("button",{type:"button",title:"Remove step",onClick:function(){e.removeSweep(t.uuid)},className:"btn btn-light matterport-dialog-btn-no-border"},a.createElement("i",{className:"fa fa-times"}))))}))),s&&a.createElement("div",{className:"col-md-5 col-xs-12"},a.createElement("br",null),w&&w.map(function(t){return y=0,N+=1,a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6"},a.createElement("b",null,"Route ",N)),a.createElement("div",{className:"col-md-6"},a.createElement("button",{type:"button",id:"btnTourSelectedSteps",disabled:O,title:1==m?"Tour selected steps stopped":"Tour selected steps started",className:"btn btn-primary btn-fill btn-sm float-right matterport-dialog-btn-play-sm",onClick:function(){e.toggleTourSweepsStartStop(t.sweeps)}},a.createElement("i",{className:1==b?"fa fa-stop":"fa fa-play"})))),a.createElement("span",{className:"small-font-list"},t.description),a.createElement("table",null,a.createElement("tr",null,a.createElement("th",null,"Steps")),t.sweeps.map(function(e){return y+=1,a.createElement("tr",null,a.createElement("td",{className:"link",onClick:function(){v&&window.goToSweep(e.uuid)}},"Step ",y,": ",e.uuid))})),a.createElement("br",null),a.createElement("br",null))}),";")))))},t}(a.Component);t.a=r},608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(2),i=(n.n(o),n(7)),l=n(788),r=n(739),s=n(13),c=n(39),u=n(117),d=n(115),p=n(8),h=n(38),m=n(112),f=n(11),b=n(1250),g=n(827),v=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),w=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},S=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},E=["Drop Ceiling","Other Ceiling","Drywall","Plaster","Metal","None"],y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={locationModel:{ontology:n.props.spaceName?n.props.spaceName:Object(s.j)(7),buildingName:n.props.buildingName,floor:"",type:"",name:"",rdfsLabel:"",ceilingType:"",ceilingHeight:"",description:"",notes:"",zone:[],profileFileName:[],panelID:"",cadBIM:"",virtualBIM:"",isDirectional:!1},floorsList:[],isEdit:!1,_spaceTypes:[],newFloor:Object(),panelIDs:[],zonesList:[],files:[],zoneName:"",zoneType:"",_zoneTypes:[],_serviceProvidersList:[],selectedBIMSweeps:[],refreshMatterportDialog:!1},a=n,n.handleDirectionalSpaceChange=n.handleDirectionalSpaceChange.bind(n),n.handleRefreshMatterport=n.handleRefreshMatterport.bind(n),n.handleSelectedSweepsChange=n.handleSelectedSweepsChange.bind(n),n.handleFloorChange=n.handleFloorChange.bind(n),n.handleTypeChange=n.handleTypeChange.bind(n),n.handleNameChange=n.handleNameChange.bind(n),n.handleCeilingTypeChange=n.handleCeilingTypeChange.bind(n),n.handleCeilingHeightChange=n.handleCeilingHeightChange.bind(n),n.handleDescriptionChange=n.handleDescriptionChange.bind(n),n.handleNotesChange=n.handleNotesChange.bind(n),n.createFloor=n.createFloor.bind(n),n.handlePanelIDChange=n.handlePanelIDChange.bind(n),n.handleNewPanelID=n.handleNewPanelID.bind(n),n.handleRemovePanelID=n.handleRemovePanelID.bind(n),n.handleZoneChange=n.handleZoneChange.bind(n),n.handleVirtualBIMChange=n.handleVirtualBIMChange.bind(n),n.handleCADBIMChange=n.handleCADBIMChange.bind(n),n.handlefileAttached=n.handlefileAttached.bind(n),n._getZonesList=n._getZonesList.bind(n),n.saveZone=n.saveZone.bind(n),n.handleZoneNameChange=n.handleZoneNameChange.bind(n),n.handleZoneTypeChange=n.handleZoneTypeChange.bind(n),n._fetchServiceProvidersList=n._fetchServiceProvidersList.bind(n),n._getZoneTypesList=n._getZoneTypesList.bind(n),n.createLocation=n.createLocation.bind(n),n.getSpace=n.getSpace.bind(n),n.getMultiSelectDropDownLabel=n.getMultiSelectDropDownLabel.bind(n),n.getSweeps=n.getSweeps.bind(n),n}return v(t,e),t.prototype.componentDidMount=function(){return w(this,void 0,void 0,function(){var e,t,n;return S(this,function(a){switch(a.label){case 0:return e=this.props,t=e.buildingName,n=e.spaceName,t?[4,this._getFloorsList()]:[3,7];case 1:return a.sent(),[4,this._getSpaceTypeList()];case 2:return a.sent(),[4,this._getZonesList()];case 3:return a.sent(),[4,this._getZoneTypesList()];case 4:return a.sent(),n?[4,this.getSpace(t,n)]:[3,7];case 5:return a.sent(),[4,this.getSweeps(t,n)];case 6:a.sent(),a.label=7;case 7:return[2]}})})},t.prototype.componentWillReceiveProps=function(e){return w(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.spaceName?[4,this.getSpace(e.buildingName,e.spaceName)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.createLocation=function(){return w(this,void 0,void 0,function(){var e,t,n,a,o,l,s,u=this;return S(this,function(d){switch(d.label){case 0:return e=this.state,t=e.locationModel,n=e.isEdit,t?(t.virtualBIM=t.linkBimism,Object(m.a)(!0),1!=n?[3,2]:[4,Object(r.a)(this.props.buildingName,t,t.floor,n)]):[3,5];case 1:return d.sent(),[3,4];case 2:return[4,Object(r.a)(this.props.buildingName,t,t.floor,n)];case 3:d.sent(),d.label=4;case 4:if(a=new c.b,(o=Object(i.d)())&&o.length)for(l=0;l<o.length;l++)s=o[l],a.UploadFile(c.a.DOCUMENT,t.profileFileName[l],s);Object(m.a)(!1),this.setState({locationModel:Object(),selectedBIMSweeps:[]},function(){window.location.hash=u.props.instance+"/"+u.props.buildingName+"/Space"}),d.label=5;case 5:return[2]}})})},t.prototype.getSweeps=function(e,t){return w(this,void 0,void 0,function(){var n,a=this;return S(this,function(o){switch(o.label){case 0:return n=[],[4,Object(g.c)(e,t).then(function(e){return w(a,void 0,void 0,function(){return S(this,function(t){return e.forEach(function(e){var t=Object();t.assignedSpace=Object(p.g)(e.assignedSpace),t.buildingName=Object(p.g)(e.buildingName),t.ontology=Object(p.g)(e.ontology),t.uuid=Object(p.g)(e.uuid),t.uuidIndex=parseInt(Object(p.g)(e.uuidIndex)),t.stepNo=parseInt(Object(p.g)(e.stepNo)),n.push(t)}),this.setState({selectedBIMSweeps:n}),[2]})})}).catch(function(e){return e})];case 1:return o.sent(),[2]}})})},t.prototype.getSpace=function(e,t){return w(this,void 0,void 0,function(){var n,a,o,i=this;return S(this,function(l){switch(l.label){case 0:return n=Object(),a=this.state.locationModel,Object(m.a)(!0),[4,Object(r.g)(e,t).then(function(e){return w(i,void 0,void 0,function(){return S(this,function(t){return""==Object(p.g)(e[0].space)&&(e=[]),n=e[0],[2]})})}).catch(function(e){return e})];case 1:return l.sent(),n&&(localStorage.setItem("spaceOntology",Object(p.g)(n.space)),a.buildingName=e,a.floor=Object(p.g)(n.floor&&n.floor),a.type=Object(p.g)(n.type),a.name=Object(p.g)(n.space),a.rdfsLabel=Object(p.g)(n.rdfsLabel),a.ceilingType=Object(p.g)(n.ceilingtype),a.ceilingHeight=Object(p.g)(n.ceilingheight),a.description=Object(p.g)(n.description),a.notes=Object(p.g)(n.notes),a.panelID=Object(p.g)(n.panelID),o=[],n.zone&&n.zone.value&&(o=n.zone.value.indexOf(",")>0?n.zone.value.split(","):[n.zone.value]),a.zone=o.map(function(e,t){return{label:i.getMultiSelectDropDownLabel(e,i.state.zonesList),value:e}}),a.virtualBIM=Object(p.g)(n.virtualBIM),a.cadBIM=Object(p.g)(n.cadBIM),a.profileFileName=Object(p.g)(n.profileFileName).split(","),a.isDirectional="true"===Object(p.g)(n.isDirectional),this.handleFloorChange(a.floor),this.setState({isEdit:!0,locationModel:a})),Object(m.a)(!1),[2]}})})},t.prototype.getMultiSelectDropDownLabel=function(e,t){var n=t,a=Object();return(a=n&&n.find(function(t){return t.value==e}))&&a.label},t.prototype.saveZone=function(){return w(this,void 0,void 0,function(){var e,t,n=this;return S(this,function(o){switch(o.label){case 0:return e=this.props.buildingName,(t=Object()).rdfsLabel=this.state.zoneName,t.type=this.state.zoneType,[4,Object(l.c)(t,e)];case 1:return o.sent(),this.setState({zoneName:"",zoneType:""},function(){setTimeout(function(){return w(n,void 0,void 0,function(){return S(this,function(e){switch(e.label){case 0:return[4,a._getZonesList()];case 1:return e.sent(),[2]}})})},2e3)}),[2]}})})},t.prototype.handleZoneNameChange=function(e){this.setState({zoneName:e})},t.prototype.handleZoneTypeChange=function(e){var t=this;this.setState({zoneType:e},function(){t._fetchServiceProvidersList(e)})},t.prototype._fetchServiceProvidersList=function(e){return w(this,void 0,void 0,function(){var t=this;return S(this,function(n){switch(n.label){case 0:return"zoneHeat"==e&&(e="both"),[4,Object(l.g)(this.props.buildingName,e).then(function(e){t.setState({_serviceProvidersList:e})}).catch(function(e){return e})];case 1:return n.sent(),[2]}})})},t.prototype._getFloorsList=function(){return w(this,void 0,void 0,function(){var e=this;return S(this,function(t){switch(t.label){case 0:return[4,Object(l.f)(this.props.buildingName).then(function(t){e.setState({floorsList:t})})];case 1:return t.sent(),[2]}})})},t.prototype._getZonesList=function(){return w(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return(e=[])||(e=[]),[4,Object(l.e)(this.props.buildingName,!0).then(function(t){for(var n=0;n<t.length;n++){var o={value:Object(p.g)(t[n].ontology),label:Object(p.g)(t[n].rdfsLabel)};e.push(o)}a.setState({zonesList:e})})];case 1:return t.sent(),[2]}})})},t.prototype._getZoneTypesList=function(){return w(this,void 0,void 0,function(){var e,t=this;return S(this,function(n){switch(n.label){case 0:return e=this.props.buildingName,[4,Object(l.h)(e).then(function(e){t.setState({_zoneTypes:e})})];case 1:return n.sent(),[2]}})})},t.prototype._getSpaceTypeList=function(){return w(this,void 0,void 0,function(){var e=this;return S(this,function(t){switch(t.label){case 0:return[4,Object(r.f)(this.props.buildingName).then(function(t){e.setState({_spaceTypes:t})})];case 1:return t.sent(),[2]}})})},t.prototype.handleFloorChange=function(e){return w(this,void 0,void 0,function(){var t,n=this;return S(this,function(a){switch(a.label){case 0:return(t=this.state.locationModel).floor=e,"newFloor"!==e?[3,1]:(document.getElementById("btnOpenFloorForm").click(),[3,3]);case 1:return[4,Object(l.a)(this.props.buildingName,e).then(function(e){e&&e.length>0&&(t.linkBimism=Object(p.g)(e[0].linkBimism)),n.setState({locationModel:t,refreshMatterportDialog:!0})}).catch(function(e){return e})];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.handleRefreshMatterport=function(e){this.setState({refreshMatterportDialog:e})},t.prototype.handleTypeChange=function(e){var t=this.state.locationModel;t.type=e,this.setState({locationModel:t})},t.prototype.handleZoneChange=function(e){var t=this.state.locationModel;t.zone=e,this.setState({locationModel:t})},t.prototype.handleNameChange=function(e){var t=this.state.locationModel;t.rdfsLabel=e,this.setState({locationModel:t})},t.prototype.handleVirtualBIMChange=function(e){var t=this.state.locationModel;t.virtualBIM=e,this.setState({locationModel:t})},t.prototype.handleCADBIMChange=function(e){var t=this.state.locationModel;t.cadBIM=e,this.setState({locationModel:t})},t.prototype.handlePanelIDChange=function(e,t){var n=this.state,a=n.locationModel,o=n.panelIDs;o[t]=e,a.panelID=o.join(","),this.setState({locationModel:a,panelIDs:o})},t.prototype.handleNewPanelID=function(){var e=this.state,t=e.locationModel,n=e.panelIDs;n.push(""),t.panelID=n.join(","),this.setState({locationModel:t,panelIDs:n})},t.prototype.handleRemovePanelID=function(e){var t=this.state,n=t.locationModel,a=t.panelIDs;a.splice(e,1),n.panelID=a.join(","),this.setState({locationModel:n,panelIDs:a})},t.prototype.handleCeilingTypeChange=function(e){var t=this.state.locationModel;t.ceilingType=e,this.setState({locationModel:t})},t.prototype.handleCeilingHeightChange=function(e){var t=this.state.locationModel;t.ceilingHeight=e,this.setState({locationModel:t})},t.prototype.handleDescriptionChange=function(e){var t=this.state.locationModel;t.description=e,this.setState({locationModel:t})},t.prototype.handleNotesChange=function(e){var t=this.state.locationModel;t.notes=e,this.setState({locationModel:t})},t.prototype.handleDirectionalSpaceChange=function(e){var t=this.state.locationModel;t.isDirectional=e,this.setState({locationModel:t})},t.prototype.handleNewFloorChange=function(e){var t=this.state.newFloor;t.rdfsLabel=e,this.setState({newFloor:t})},t.prototype.handleSelectedSweepsChange=function(e){this.setState({selectedBIMSweeps:e})},t.prototype.createFloor=function(){return w(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return(e=this.state.newFloor)?(e.floor=e.floor?e.floor:Object(s.j)(7),[4,Object(l.b)(this.props.buildingName,e).then(function(e){})]):[3,4];case 1:return t.sent(),[4,this._getFloorsList()];case 2:return t.sent(),[4,this.handleFloorChange(e.floor)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.handlefileAttached=function(e){if(e.length>0){for(var t=this.state.locationModel,n=0;n<e.length;n++){var a=e[n].name.split(".").pop(),o=this.props.buildingName+"_"+Object(s.j)(15)+"."+a;t.profileFileName&&(t.profileFileName[n]=o)}Object(i.g)(e),this.setState({files:e,locationModel:t},function(){})}},t.prototype.render=function(){var e=this,t=this.props.isView,n=void 0!==t&&t,a=this.state.locationModel,i=a.floor,l=a.ceilingHeight,r=a.ceilingType,s=a.description,m=a.notes,g=a.type,v=a.zone,w=(a.virtualBIM,a.cadBIM,a.rdfsLabel),S=a.profileFileName,y=a.linkBimism,N=a.isDirectional,C=this.state,O=C._spaceTypes,T=C.newFloor,I=C.panelIDs,j=C.zonesList,M=C.zoneName,D=C.zoneType,x=C._zoneTypes,k=this.state.selectedBIMSweeps,P=this.state.floorsList,_=JSON.parse(f.a.getItem("user")),A=_&&"1"==_.role,F=w&&g&&g.length>0&&i&&!0,L=I.map(function(e){return!!e}).find(function(e){return 0==e}),R=y||localStorage.getItem("BIMURL");return o.createElement("div",{className:"content"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"card padding-10"},o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"name"},"Name:")),o.createElement("div",{className:"col-md-7"},o.createElement("input",{type:"text",id:"name",disabled:n,className:"form-control",value:w,onChange:function(t){return e.handleNameChange(t.target.value)}})),o.createElement("div",{className:"col-md-1"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"})))),o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"type"},"Type:")),o.createElement("div",{className:"col-md-7"},o.createElement("select",{id:"type",className:"form-control",disabled:n,onChange:function(t){return e.handleTypeChange(t.target.value)},value:g},o.createElement("option",{value:""},"Select Type"),O.map(function(e,t){return 0===t?o.createElement("option",{key:t,selected:!0,value:e.value},e.value):o.createElement("option",{key:t,value:e.value},e.value)}))),o.createElement("div",{className:"col-md-1"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"})))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"floor"},"Floor:")),o.createElement("div",{className:"col-md-7"},o.createElement("select",{className:"form-control",id:"floor",disabled:n,onChange:function(t){return e.handleFloorChange(t.target.value)},value:i},o.createElement("option",{value:""},"Select Floor"),o.createElement("option",{value:"newFloor",key:-1},"New Floor"),o.createElement("hr",null),P.map(function(e,t){return e.ontology.value===i?o.createElement("option",{key:t,selected:!0,value:Object(p.g)(e.ontology)},Object(p.g)(e.rdfsLabel)):o.createElement("option",{key:t,value:Object(p.g)(e.ontology)},Object(p.g)(e.rdfsLabel))}))),o.createElement("div",{className:"col-md-1"},o.createElement("label",null,o.createElement("i",{className:"fa fas fa-asterisk"})))),o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"zone"},"Is in Zone:")),o.createElement("div",{className:"col-md-7"},o.createElement("div",null,o.createElement(d.a,{isDisabled:n,closeMenuOnSelect:!1,isMulti:!0,value:v,onChange:this.handleZoneChange,placeholder:"Select IS IN ZONE",options:j}))),o.createElement("div",{className:"col-md-1",style:{paddingTop:"2px"}},!n&&o.createElement("button",{id:"zoneColapsBtn",type:"button",disabled:n,className:"btn btn-dark btn-fill btn-sm pull-right",onClick:function(){document.getElementById("btnOpenZoneForm").click()}},o.createElement("i",{id:"icons",className:"fa fa-plus"})))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"ceilingType"},"Ceiling Type:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{id:"ceilingType",className:"form-control",disabled:n,onChange:function(t){return e.handleCeilingTypeChange(t.target.value)},value:r},o.createElement("option",{value:""},"Select Ceiling Type"),E.map(function(e,t){return 0===t?o.createElement("option",{key:t,selected:!0,value:e},e):o.createElement("option",{key:t,value:e},e)})))),o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"ceilingHeight"},"Ceiling Height:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"ceilingHeight",disabled:n,className:"form-control col-md-6",value:l,onChange:function(t){return e.handleCeilingHeightChange(t.target.value)}}))))),!1,!1,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("label",{htmlFor:"directionalSpace"},"Directional Space:")),!n&&o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"switch-container"},o.createElement("label",null,o.createElement("input",{id:"directionalSpace",disabled:n,name:"directionalSpace",checked:N,onChange:function(t){e.handleDirectionalSpaceChange(t.target.checked)},className:"switch",type:"checkbox"}),o.createElement("div",null,o.createElement("div",null))))),n&&o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("label",{htmlFor:"directionalSpace"},N?"Yes":"No"))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-2"},o.createElement("label",{htmlFor:"description"},"Description:")),o.createElement("div",{className:"col-md-10"},o.createElement("textarea",{id:"description",disabled:n,className:"form-control",value:s,onChange:function(t){return e.handleDescriptionChange(t.target.value)}}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-2"},o.createElement("label",{htmlFor:"notes"},"Notes:")),o.createElement("div",{className:"col-md-10"},o.createElement("textarea",{id:"notes",className:"form-control",disabled:n,value:m,onChange:function(t){return e.handleNotesChange(t.target.value)}}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"notes"},"Documents:")),S&&S[0]&&o.createElement("div",{className:"col-md-8 col-md-offset-4",style:{marginBottom:"20px"}},-1==S[0].indexOf("mp4")&&o.createElement("img",{height:"150",width:"245",src:c.c+"/"+c.a.DOCUMENT+"/"+S[0]}),S[0].indexOf("mp4")>-1&&o.createElement("video",{height:"150",width:"245",controls:!0},o.createElement("source",{src:c.c+"/"+c.a.DOCUMENT+"/"+S[0],type:"video/mp4"}))),!n&&o.createElement("div",{className:"col-md-8 col-md-offset-4"},o.createElement(u.a,{handleAttachedFile:this.handlefileAttached,files:this.state.files}))),o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("div",{className:"col-md-4 padding-10"},o.createElement("label",{htmlFor:"panelID"},"Panel ID:")),o.createElement("div",{className:"col-md-8"},I.map(function(t,a){return o.createElement("div",{key:a,className:"row padding-5"},o.createElement("div",{className:"col-md-10"},o.createElement("input",{disabled:!A,type:"text",id:"panelID",className:"form-control",value:t,onChange:function(t){return e.handlePanelIDChange(t.target.value,a)}})),o.createElement("div",{className:"col-md-2 center"},o.createElement("button",{disabled:!A||n,type:"button",className:"remove-button btn btn-secondary btn-sm",onClick:function(){return e.handleRemovePanelID(a)},title:"Remove"},o.createElement("i",{className:"fa fa-remove"}))))}),o.createElement("div",{className:"col-md-12"},!n&&o.createElement("button",{disabled:!A||n||I.length>0&&0==L,type:"button",className:"btn btn-dark btn-fill btn-sm",onClick:this.handleNewPanelID,title:"Add"},o.createElement("i",{className:"fa fa-plus"}))))))),!n&&o.createElement(o.Fragment,null,o.createElement("br",null),o.createElement("br",null),o.createElement("br",null),o.createElement("div",{className:"col-md-10 col-md-offset-2"},o.createElement("button",{type:"button",disabled:!F,className:"btn btn-dark btn-fill",onClick:function(){e.createLocation()}},"Save"),"\xa0\xa0",o.createElement("button",{type:"button",className:"btn btn-danger active",onClick:function(){window.history.back()}},"Cancel")),o.createElement("br",null),o.createElement("br",null),o.createElement("br",null)),o.createElement("button",{type:"button",id:"btnOpenZoneForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#zoneFormDialog"}," ."),o.createElement(h.a,{id:"zoneFormDialog",onSaveButtonClick:function(){e.saveZone()},saveButtonText:"Add",disableSaveButton:!M,heading:"Add Zone"},o.createElement("div",{className:"card dataCard padding-10 no-margin"},o.createElement("div",{className:""},o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"type"},"Zone Name:")),o.createElement("div",{className:"col-md-9"},o.createElement("input",{value:M,onChange:function(t){return e.handleZoneNameChange(t.target.value)},type:"text",className:"form-control"})," "))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"type"},"Zone Type:")),o.createElement("div",{className:"col-md-9"},o.createElement("button",{className:"btn btn-default btn-block dropdown-toggle",type:"button","data-toggle":"dropdown"},D&&x&&x.find(function(e){return-1!==e.z.value.indexOf(D.substring(3))})?x.find(function(e){return-1!==e.z.value.indexOf(D.substring(3))}).zone.value:"Select Zone Type",o.createElement("span",{className:"caret"})),o.createElement("ul",{className:"dropdown-menu"},o.createElement("li",{className:"dropdown-header"},o.createElement("h5",null,o.createElement("b",null,"Space Group"))),x.filter(function(e){return"Space Group"==e.yname.value}).map(function(t,n){return o.createElement("li",{key:n},o.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.handleZoneTypeChange(t.z.value)}},t.zone.value))}),o.createElement("li",{className:"dropdown-header"},o.createElement("h5",null,o.createElement("b",null,"Service Zone"))),x.filter(function(e){return"Service Zone"==e.yname.value}).map(function(t,n){return o.createElement("li",{key:n},o.createElement("a",{href:"javascript:void(0);",onClick:function(){return e.handleZoneTypeChange(t.z.value)}},t.zone.value))})))))))),o.createElement("button",{type:"button",id:"btnOpenFloorForm",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#floorFormDialog"}," ."),o.createElement(h.a,{id:"floorFormDialog",onSaveButtonClick:function(){e.createFloor()},saveButtonText:"Add",disableSaveButton:!T.rdfsLabel,heading:"Add Floor"},o.createElement("div",{className:"card dataCard padding-10 no-margin"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement("div",{className:"col-md-4 padding-10"},o.createElement("label",{htmlFor:"floor"},"Floor")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"floor",className:"form-control col-md-6",value:T.rdfsLabel,onChange:function(t){return e.handleNewFloorChange(t.target.value)}}))))))),o.createElement("button",{type:"button",id:"btnVirtualBIM",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#virtualBIMDialog"}," ."),o.createElement(b.a,{id:"virtualBIMDialog",heading:"Select Steps",isViewForm:n,showSaveButton:!n,isSweepChangeable:!1,sweeps:k,onSaveClickButton:this.handleSelectedSweepsChange,bimURL:R,isRefreshDialog:this.state.refreshMatterportDialog,onRefreshMatterport:this.handleRefreshMatterport}))))))},t}(o.Component);t.default=y},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=(n.n(a),n(17)),i=n(608),l=n(802),r=n(60),s=n(11),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return c(t,e),t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){return d(this,function(e){return[2]})})},t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){return d(this,function(e){return[2]})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,c=t.buildingName,u=t.spaceName,d=t.workFlowSpaceList,p=JSON.parse(s.a.getItem("user")),h=Object(r.b)(p,"info-space","write");return a.createElement(o.AppContext.Consumer,null,function(t){return a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:""},a.createElement("div",{className:"row"},a.createElement("div",{className:h?"col-md-10":"col-md-12"},a.createElement(l.a,{workFlowSpaceList:d,inspectionOntology:e.props.inspectionOntology,instance:n,buildingName:c,tabName:"Space",itemName:u,showAuditTypes:!0,showBIMButtons:!0})),h&&a.createElement("div",{className:"col-sm-2 padding-10"},a.createElement("button",{className:"btn-sm btn-success btn-fill pull-right",onClick:function(){window.location.hash=n+"/"+c+"/Space/SpaceForm/"+u}},a.createElement("i",{className:"fa fa-edit"})," Edit "))),a.createElement("br",null),a.createElement("div",{className:""},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 no-padding"},a.createElement(i.default,{instance:n,buildingName:c,spaceName:u,isView:!0})))))))})},t}(a.Component);t.default=p},726:function(e,t,n){"use strict";t.p=function(e,t,n,s){return l(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(i.f)({buildingName:e,equipment:t,isEdit:n},i.a.EQUIPMENT.SaveEquipment,a.b.EQUIP).then(function(){1==s||Object(o.b)("Equipment "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Equipment.")})];case 1:return[2,l.sent()]}})})},t.o=function(e,t,n,s){return l(this,void 0,void 0,function(){var l;return r(this,function(r){switch(r.label){case 0:return l=!!n.name,[4,Object(i.f)({buildingName:e,equipmentName:t,component:n,counter:s},i.a.EQUIPMENT.SaveComponent,a.b.EQUIP).then(function(){Object(o.b)("Component(s) "+(l?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Component(s).")})];case 1:return[2,r.sent()]}})})},t.q=function(e,t,n,s){return l(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(i.f)({isEdit:e,buildingName:t,equipmentName:n,lightingInformation:s},i.a.EQUIPMENT.SaveLightingInformation,a.b.EQUIP).then(function(){Object(o.b)("Lighting Info "+(e?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Lighting Info.")})];case 1:return[2,l.sent()]}})})},t.r=function(e,t,n,s,c){return l(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(i.f)({isEdit:e,buildingName:t,equipmentName:n,plugLoadModel:s,isCustom:c},i.a.EQUIPMENT.SavePlugLoadModel,a.b.EQUIP).then(function(){Object(o.b)("Plugload Info "+(e?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Plugload Info.")})];case 1:return[2,l.sent()]}})})},t.d=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.EQUIPMENT.FetchEquipments,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.j=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentName:t},i.a.EQUIPMENT.GetEquipmentDetails,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.e=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.EQUIPMENT.GetAllCoolingAndHeatingEquipmentsList,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.f=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.EQUIPMENT.GetAllEquipmentExceptCoolingAndHeatingList,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.g=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.EQUIPMENT.GetAllEquipmentsList,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.k=function(){return l(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,Object(i.e)({},i.a.EQUIPMENT.GetEquipmentTypeList,a.b.EQUIP)];case 1:return[2,e.sent()]}})})},t.m=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({typeName:e,distance:t},i.a.EQUIPMENT.GetSubClassTypeListForEquipment,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.h=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({typeName:e,distance:t},i.a.EQUIPMENT.GetComponentTypesList,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.c=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.EQUIPMENT.FetchEquipmentExportData,a.b.EQUIP)];case 1:return[2,t.sent()]}})})},t.i=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentName:t},i.a.EQUIPMENT.GetComponents,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.l=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentName:t},i.a.EQUIPMENT.GetFixtures,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.n=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentName:t},i.a.EQUIPMENT.GetTypeByEquipmentName,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.b=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentName:t},i.a.EQUIPMENT.FetchPowerSource,a.b.EQUIP)];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentName:t},i.a.EQUIPMENT.FetchPlugLoad,a.b.EQUIP)];case 1:return[2,n.sent()]}})})};var a=n(7),o=n(6),i=n(5),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}},739:function(e,t,n){"use strict";t.g=function(e,t,n,o){return l(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(i.e)({buildingName:e,spaceName:t,spaceWithCalendar:n},i.a.SPACES.GETSPACES,a.b.SPACE,o)];case 1:return[2,l.sent()]}})})},t.c=function(e,t,n){return l(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return[4,Object(i.e)({floor:e,buildingName:t},i.a.SPACES.GetLocationsList,a.b.SPACE,n)];case 1:return[2,o.sent()]}})})},t.d=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({zone:e,buildingName:t},i.a.SPACES.getLocationsListSpacesByZones,a.b.SPACE)];case 1:return[2,n.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return l(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return[4,Object(i.e)({buildingName:e,type:t},i.a.SPACES.GetAllLocationsList,a.b.SPACE,n)];case 1:return[2,o.sent()]}})})},t.a=function(e,t,n,s,c){return l(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(i.f)({buildingName:e,model:t,floor:n,isEdit:s,spacetoUpdate:c},i.a.SPACES.SAVESPACE,a.b.SPACE).then(function(){Object(o.b)("Space "+(s?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Space.")})];case 1:return[2,l.sent()]}})})},t.f=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.SPACES.GetSpaceTypesList,a.b.SPACE)];case 1:return[2,t.sent()]}})})},t.e=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({spaceName:e},i.a.SPACES.GetSpaceOptimalInfo,a.b.SPACE)];case 1:return[2,t.sent()]}})})},t.h=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({spaceToUpdate:e},i.a.SPACES.UpdateSpaceOptimalInfo,a.b.SPACE).then(function(){Object(o.b)("Space Updated Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Space.")})];case 1:return[2,t.sent()]}})})};var a=n(7),o=n(6),i=n(5),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}},772:function(e,t){e.exports={APIKey:"f51abd3013784ac6a0985f87f5ecbf03",Version:"3.2"}},788:function(e,t,n){"use strict";t.a=function(e,t,n){return l(this,void 0,void 0,function(){return r(this,function(o){switch(o.label){case 0:return[4,Object(i.e)({buildingName:e,zoneName:t,bimSid:n},i.a.ZONES.GETZONES,a.b.ZONE)];case 1:return[2,o.sent()]}})})},t.b=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({buildingName:e,floor:t},i.a.ZONES.SAVEFLOOR,a.b.ZONE).then(function(){Object(o.b)("Floor Added Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Floor.")})];case 1:return[2,n.sent()]}})})},t.c=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.f)({model:e,buildingName:t},i.a.ZONES.SAVEZONE,a.b.ZONE).then(function(){Object(o.b)("Zone Added Successfully.")}).catch(function(e){Object(o.a)("Error occured while saving Zone.")})];case 1:return[2,n.sent()]}})})},t.f=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.ZONES.GETFLOORLIST,a.b.ZONE)];case 1:return[2,t.sent()]}})})},t.g=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,equipmentType:t},i.a.ZONES.GETSERVICEPROVIDERSLIST,a.b.ZONE)];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(i.e)({buildingName:e,excludeFloors:t},i.a.ZONES.GetAllZonesList,a.b.ZONE)];case 1:return[2,n.sent()]}})})},t.h=function(e){return l(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({buildingName:e},i.a.ZONES.GetZoneTypesList,a.b.ZONE)];case 1:return[2,t.sent()]}})})},t.d=function(e,t){return l(this,void 0,void 0,function(){var n=this;return r(this,function(s){switch(s.label){case 0:return[4,Object(i.f)({buildingName:e,zoneName:t},i.a.ZONES.DELETEZONE,a.b.ZONE).then(function(){return l(n,void 0,void 0,function(){return r(this,function(e){return Object(o.b)("Zone Deleted Successfully."),[2]})})}).catch(function(e){Object(o.a)("Error occured while deleting.")})];case 1:return[2,s.sent()]}})})};var a=n(7),o=n(6),i=n(5),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}},791:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(38)),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={sdk:Object(),isStarted:!1,selectedSteps:n.props.sweeps,modelDetails:Object(),spaceDetails:[],currentSweep:Object(),matterTags:[],floorDetails:Object(),logMessage:"",sdkReady:!1,hasStartSweep:!1,startSweep:Object(),isViewForm:n.props.isViewForm,prevSweepIndex:0,onPropsReceivedStateChanged:!1,linkBimism:n.props.bimURL,destinationSweeps:n.props.sweeps,addCurrentSweep:!1,sweepPosition:Object()},n.loadSDK=n.loadSDK.bind(n),n.loadFrame=n.loadFrame.bind(n),n.toggleTourStartStop=n.toggleTourStartStop.bind(n),n.toggleTourSweepsStartStop=n.toggleTourSweepsStartStop.bind(n),n.addCurrentSweep=n.addCurrentSweep.bind(n),n.toggleAddingSweep=n.toggleAddingSweep.bind(n),n.removeSweep=n.removeSweep.bind(n),n.setDialogState=n.setDialogState.bind(n),n.onSaveHandle=n.onSaveHandle.bind(n),n}return i(t,e),t.prototype.componentWillReceiveProps=function(e){(0==this.state.selectedSteps.length&&e.sweeps.length>0||e.isSweepChangeable)&&(this.setState({selectedSteps:e.sweeps,hasStartSweep:!0,startSweep:e.sweeps[0],onPropsReceivedStateChanged:!0}),e.isSweepChangeable&&this.props.onSweepChangeable(e.isSweepChangeable)),e.bimURL&&this.setState({linkBimism:e.bimURL}),e.sweeps&&this.setState({destinationSweeps:e.sweeps}),this.setState({addCurrentSweep:e.addCurrentSweep})},t.prototype.componentDidUpdate=function(){this.state.onPropsReceivedStateChanged&&this.setState({onPropsReceivedStateChanged:!1})},t.prototype.onSaveHandle=function(){var e=this.state.selectedSteps,t=this.state.sweepPosition;this.props.onSaveClickButton(e,t)},t.prototype.toggleAddingSweep=function(){window.toggleStartStopAddingSweep()},t.prototype.toggleTourStartStop=function(){window.toggleTourSelectedSweep()},t.prototype.toggleTourSweepsStartStop=function(e){window.toggleTourSweepsSelectedSweep(e)},t.prototype.addCurrentSweep=function(){window.addCurrentSweep()},t.prototype.removeSweep=function(e){window.removeSweep(e)},t.prototype.setDialogState=function(e,t,n,a,o,i,l,r,s,c){null!=e&&this.setState({isStarted:e}),null!=t&&this.setState({isTourSelected:t}),null!=n&&this.setState({selectedSteps:n}),null!=a&&this.setState({modelDetails:a}),null!=o&&this.setState({currentSweep:o}),null!=i&&this.setState({logMessage:i}),null!=r&&this.setState({prevSweepIndex:r}),null!=s&&this.setState({sweepPosition:s}),null!=l&&this.setState({sdkReady:l}),null!=c&&(this.setState({sdk:c}),this.loadFrame(c,this.setDialogState,this.state))},t.prototype.loadSDK=function(e,t){var a=n(772),o=a.APIKey,i=a.Version,l=document.getElementById("showcase");window.MP_SDK.connect(l,o,i).then(function(t){console.log("SDK Connected!"),e(null,null,null,null,null,null,null,null,null,t)}).catch(function(e){console.log("Error while connecting with Matterport SDK")})},t.prototype.loadFrame=function(e,t,n){var a=this.state,o=a.modelDetails,i=a.currentSweep,l=a.isStarted,r=a.isTourSelected,s=a.selectedSteps,c=a.sdkReady,u=a.startSweep,d=a.hasStartSweep,p=a.isViewForm,h=a.prevSweepIndex,m=a.addCurrentSweep;function f(e){if(s.length>0){var t=s.find(function(t){return t.uuid==e});if(null!=t||""+t!="undefined"){var n="Sweep "+t.uuid+" of index "+t.uuidIndex+" is already added in the current list";return console.log(n),!0}}return!1}c||e.App.state.subscribe(function(n){n.phase===e.App.Phase.LOADING&&console.log("The app has started loading!"),n.phase===e.App.Phase.STARTING&&console.log("The transition into the start location begins!"),n.phase===e.App.Phase.PLAYING&&(console.log("The app is ready to take user input now!"),c=!0,t(null,null,null,null,null,null,!0),d&&window.goToSweep(u.uuid),m&&(s=[],window.setTimeout(function(){window.addCurrentSweep()},2e3)))}),e.Model.getData().then(function(e){console.log("Model data loaded for sid:",e.sid),t(null,null,null,o=e)}),window.addSweep=function(e){var n=o.sweeps.find(function(t){return t.uuid==e});t(null,null,null,null,i=n);var a=o.sweeps.indexOf(n);if(!f(i.uuid)){s.push({uuid:i.uuid,uuidIndex:a,stepNo:s.length});var l="Sweep "+i.uuid+" of index "+a+" is added in the current list";console.log(l)}},window.addCurrentSweep=function(){e.Camera.getPose().then(function(e){var n=o.sweeps.find(function(t){return t.uuid==e.sweep});t(null,null,null,null,i=n);var a=o.sweeps.indexOf(n);if(!f(i.uuid)){s.push({uuid:i.uuid,uuidIndex:a,stepNo:s.length});var l=e.position;t(null,null,s,null,null,null,null,null,l);var r="Sweep "+i.uuid+" of index "+a+" is added in the current list";console.log(r)}})},window.removeSweep=function(e){var n=s.find(function(t){return t.uuid==e}),a=s.indexOf(n);if(a>-1){s.splice(a,1),t(null,null,s);var o="Sweep "+n.uuid+" of index "+n.uuidIndex+" is removed from the current list";console.log(o)}},window.goToSweep=function(t){console.log("Will move to "+t),e.Sweep.moveTo(t,{transition:e.Sweep.Transition.FLY}).then(function(e){var n="Moved to sweep "+t;console.log(n)}).catch(function(e){console.log("Error: "+JSON.stringify(e))})},e.on(e.Sweep.Event.ENTER,function(){if(r)return!1;e.Camera.getPose().then(function(e){if("mode.inside"==e.mode||"mode.outside"==e.mode)if(p&&s.length>0){var n=s.find(function(t){return t.uuid==e.sweep});if(null!=n&&""+n!="undefined"){var a="Moved to sweep "+n.uuid;console.log(a),h=s.indexOf(n),t(null,null,null,null,null,null,null,h)}else{a="Not allowed in the current step ";console.log(a),window.goToSweep(s[h].uuid)}}else console.log("Current Sweep is: "+JSON.stringify(e.sweep)),l&&0==s.length&&window.addCurrentSweep()})})},t.prototype.render=function(){var e=this;this.props.isRefreshDialog&&(this.setState({isStarted:!1,isTourSelected:!1,selectedSteps:[],modelDetails:Object(),spaceDetails:[],currentSweep:Object(),matterTags:[],floorDetails:Object(),logMessage:"",sdkReady:!1,hasStartSweep:!1,startSweep:Object(),isViewForm:this.props.isViewForm,prevSweepIndex:0,onPropsReceivedStateChanged:!1,linkBimism:this.props.bimURL,destinationSweeps:[]}),this.props.onRefreshMatterport(!1));var t=this.props,n=t.id,i=t.heading,l=t.isViewForm,r=t.showSaveButton,s=this.state,c=s.isStarted,u=s.selectedSteps,d=s.logMessage,p=s.sdkReady,h=0,m=this.state.linkBimism;m&&!m.includes("&utm_source=sdkdebug&play=0&tourcta=0")&&(m+="&utm_source=sdkdebug&play=0&tourcta=0");var f=!1;return f=!p||(u.length>0||c),a.createElement(o.a,{id:n,saveButtonText:"Save",heading:i,isEditForm:!0,showSaveButton:r,showCancelButton:l,onSaveButtonClick:function(){e.onSaveHandle()}},a.createElement("div",{className:""},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-xs-12"},a.createElement("iframe",{id:"showcase",src:m,onLoad:function(){e.loadSDK(e.setDialogState,e.state)},width:"100%",height:"400",frameBorder:"0",allowFullScreen:!0}))),!l&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-7 col-xs-12"},a.createElement("button",{type:"button",id:"btnAddCurrentStep",disabled:f,title:"Add current step",className:"btn btn-primary btn-fill matterport-dialog-btn-tour-margin",onClick:this.addCurrentSweep},a.createElement("i",{className:"fa fa-thumb-tack"})),a.createElement("br",null),a.createElement("br",null),a.createElement("span",{className:"small-font-list"},d)),a.createElement("div",{className:"col-md-5 col-xs-12"},a.createElement("table",null,a.createElement("tr",null,a.createElement("th",null,"Step"),a.createElement("th",null)),u&&u.map(function(t){return h+=1,a.createElement("tr",null,a.createElement("td",{className:"link",onClick:function(){p&&window.goToSweep(t.uuid)}},"Step ",h,": ",a.createElement("input",{type:"checkbox",disabled:!0,checked:!0,style:{cursor:"pointer"}})),a.createElement("td",null,!l&&p&&a.createElement("button",{type:"button",title:"Remove step",onClick:function(){e.removeSweep(t.uuid)},className:"btn btn-light matterport-dialog-btn-no-border"},a.createElement("i",{className:"fa fa-times"}))))})))))))},t}(a.Component);t.a=l},802:function(e,t,n){"use strict";var a=n(2),o=(n.n(a),n(116)),i=n(8),l=n(40),r=n(726),s=n(791),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}},p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={virtualBIM:"",cadBIM:"",showCA:!1,showECM:!1,showRCX:!1,ECMCompleted:!1,RCXCompleted:!1,CACompleted:!1,workFlowSpaceList:[],equipmentSweeps:[],addCurrentSweep:!1,selectedVirtualBIM:""},n.updateInspectionButtonsVisibility=n.updateInspectionButtonsVisibility.bind(n),n}return c(t,e),t.prototype.componentWillReceiveProps=function(e){return u(this,void 0,void 0,function(){var t,n=this;return d(this,function(a){return"Equip"!=e.tabName&&"Space"!=e.tabName||(t=[],e.workFlowSpaceList&&e.workFlowSpaceList.length&&(t=e.workFlowSpaceList),this.setState({workFlowSpaceList:t},function(){return u(n,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this.updateInspectionButtonsVisibility()];case 1:return e.sent(),[4,this.getBIM_Links()];case 2:return e.sent(),[2]}})})})),[2]})})},t.prototype.componentDidMount=function(){return u(this,void 0,void 0,function(){var e,t=this;return d(this,function(n){return"Equip"!=this.props.tabName&&"Space"!=this.props.tabName||(e=[],this.props.workFlowSpaceList&&this.props.workFlowSpaceList.length&&(e=this.props.workFlowSpaceList),this.setState({workFlowSpaceList:e},function(){return u(t,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this.updateInspectionButtonsVisibility()];case 1:return e.sent(),[2]}})})})),[2]})})},t.prototype.updateInspectionButtonsVisibility=function(){return u(this,void 0,void 0,function(){var e,t,n,a;return d(this,function(o){switch(o.label){case 0:return this.props.inspectionOntology?(e=this.state.workFlowSpaceList,t=localStorage.getItem("spaceOntology"),n=localStorage.getItem("equipmentType"),[4,Object(l.d)(this.props.tabName,t,n,e,this.props.itemName,this.props.inspectionOntology)]):[3,2];case 1:a=o.sent(),this.setState({showRCX:a.showRCX,showECM:a.showECM,showCA:a.showCA,RCXCompleted:a.RCXCompleted,ECMCompleted:a.ECMCompleted,CACompleted:a.CACompleted}),o.label=2;case 2:return[2]}})})},t.prototype.getBIM_Links=function(){return u(this,void 0,void 0,function(){var e=this;return d(this,function(t){switch(t.label){case 0:return[4,Object(o.d)(this.props.buildingName,this.props.itemName,this.props.tabName).then(function(t){if(t){var n=Object(i.g)(t.virtualBIM),a=Object(i.g)(t.cadBIM);e.setState({virtualBIM:n,cadBIM:a})}})];case 1:return t.sent(),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,o=t.buildingName,l=t.tabName,c=t.itemName,u=t.showDevicesButton,d=void 0!==u&&u,p=t.showComponentButton,h=void 0!==p&&p,m=t.showAuditTypes,f=void 0!==m&&m,b=t.showBIMButtons,g=void 0!==b&&b,v=this.state,w=v.virtualBIM,S=v.cadBIM,E=v.showCA,y=v.showECM,N=v.showRCX,C=v.ECMCompleted,O=v.RCXCompleted,T=v.CACompleted,I=v.equipmentSweeps,j=v.addCurrentSweep,M=v.selectedVirtualBIM,D=window.location.hash;return a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 no-padding"},a.createElement("div",{className:"btn-group",id:"tabbtn"},a.createElement("a",{className:"btn "+(D.indexOf("/Profile")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/Profile/"+c},"Profile"),d&&a.createElement("a",{className:"btn "+(D.indexOf("/Devices")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/Devices/"+c},"Devices"),h&&a.createElement("a",{className:"btn "+(D.indexOf("/Components")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/Components/"+c},"Components"),a.createElement("a",{className:"btn "+(D.indexOf("/Related")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/Related/"+c},"Related"),a.createElement("a",{className:"btn "+(D.indexOf("/Documents")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/Documents/"+c},"Docs"),a.createElement("a",{className:"btn "+(D.indexOf("/SupplyChain")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/SupplyChain/"+c},"Supply"),f&&a.createElement("a",{className:"btn "+(D.indexOf("/P/")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",title:"Points",href:"#"+n+"/"+o+"/"+l+"/P/"+c},"Points"),"Space"==this.props.tabName&&a.createElement("a",{className:"btn "+(D.indexOf("/SpaceSchedule")>0?"btn-fill":"")+" btn-secondary btn-secondary-dark",href:"#"+n+"/"+o+"/"+l+"/SpaceSchedule/"+c},"Schedule"),a.createElement("span",{className:"hidden-xs hidden-sm spacebtn"}),f&&a.createElement("span",null,y&&a.createElement("a",{className:"btn "+(D.indexOf("/ECM")>0?"btn-fill":"")+" btn-dark",title:"Energy Conservation Measures",href:"#"+n+"/"+o+"/"+l+"/ECM/"+c},"ECM",C&&a.createElement("i",{className:"fa fa-check inspection-completed"})),N&&a.createElement("a",{className:"btn "+(D.indexOf("/RCX")>0?"btn-fill":"")+" btn-dark",title:"Retro-Commissioning",href:"#"+n+"/"+o+"/"+l+"/RCX/"+c},"RCX",O&&a.createElement("i",{className:"fa fa-check inspection-completed"})),E&&a.createElement("a",{className:"btn "+(D.indexOf("/CA")>0?"btn-fill":"")+" btn-dark",title:"Condition Assessment",href:"#"+n+"/"+o+"/"+l+"/CA/"+c},"CA",T&&a.createElement("i",{className:"fa fa-check inspection-completed"}))),a.createElement("span",{className:"hidden-xs hidden-sm spacebtn"}),g&&a.createElement("span",null,w&&"Equip"!=this.props.tabName&&a.createElement("a",{className:"btn btn-success",href:w&&w.indexOf("ttp")>0?w:"http://"+w,target:"_blank",title:w},"Virtual BIM"),w&&"Equip"==this.props.tabName&&a.createElement("button",{className:"btn btn-success",title:"Virtual BIM",onClick:function(){Object(r.j)(o,e.props.itemName).then(function(t){if(t.length>0){var n=t[0],a=Object(i.g)(n.sweep);if(a){var o=[],l=Object();l.uuid=a,o.push(l);var r=!(o.length>0)&&(w&&w.includes("camera_position")),s=w;e.setState({equipmentSweeps:o,addCurrentSweep:r,selectedVirtualBIM:s})}}document.getElementById("btnVirtualBIMDialog").click()})}},"Virtual BIM"),S&&a.createElement("button",{className:"btn btn-success",onClick:function(){window.open(S&&S.indexOf("ttp")>0?S:"http://"+S,"_blank")},title:S},"Digital Twin")))),g&&w&&a.createElement(a.Fragment,null,a.createElement("button",{id:"btnVirtualBIMDialog",className:"hidden","data-toggle":"modal","data-target":"#virtualBIMDialog",title:"Add"},". "),a.createElement(s.a,{id:"virtualBIMDialog",heading:"Virtual BIM Equipment View",showSaveButton:!1,sweeps:I,bimURL:M,isViewForm:!0,addCurrentSweep:j,buildingName:this.props.buildingName,isRefreshDialog:!1,isSweepChangeable:!1})," "))))},t}(a.Component);t.a=p},827:function(e,t,n){"use strict";t.c=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,space:t},a.a.MATTERPORT.FETCHSWEEPS,o.b.SPACE,!0)];case 1:return[2,n.sent()]}})})},t.g=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({buildingName:e,model:t},a.a.MATTERPORT.UPDATESWEEP,o.b.SPACE).then(function(){Object(i.b)("Sweep Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Sweep.")})];case 1:return[2,n.sent()]}})})},t.d=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,task:t},a.a.MATTERPORT.FETCHSTASKROUTE,o.b.TASK,!0)];case 1:return[2,n.sent()]}})})},t.h=function(e,t,n){return l(this,void 0,void 0,function(){return r(this,function(l){switch(l.label){case 0:return[4,Object(a.f)({buildingName:e,model:t,isEdit:n},a.a.MATTERPORT.UPDATETASKROUTE,o.b.TASK).then(function(){Object(i.b)("Task Route "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Task Route.")})];case 1:return[2,l.sent()]}})})},t.b=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,floorOntology:t},a.a.MATTERPORT.FETCHMATTERPORTIMAGE,o.b.ZONE,!0)];case 1:return[2,n.sent()]}})})},t.f=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({model:e},a.a.MATTERPORT.UPDATEMATTERPORTIMAGE,o.b.ZONE).then(function(e){Object(i.b)("Image "+(t?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Image.")})];case 1:return[2,n.sent()]}})})},t.a=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,space:t},a.a.MATTERPORT.FETCHSINBUILDINGROUTE,o.b.SPACE,!0)];case 1:return[2,n.sent()]}})})},t.e=function(e,t){return l(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,Object(a.f)({buildingName:e,model:t},a.a.MATTERPORT.UPDATEINBUILDINGROUTE,o.b.SPACE).then(function(){Object(i.b)("In Building Routes Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving In Building Routes.")})];case 1:return[2,n.sent()]}})})};var a=n(5),o=n(7),i=n(6),l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function r(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,r)}s((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,o,i,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function r(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}}}});