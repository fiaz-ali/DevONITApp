webpackJsonp([33],{1532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var a,o=n(3),i=(n.n(o),n(26)),s=n(581),c=n(623),l=n(45),r=n(599),m=n(602),d=n(17),u=n(595),p=n.n(u),h=n(568),v=n(87),g=n(993),b=n(1075),f=n(990),E=n(573),S=n(18),N=n(849),y=n(598),C=n(14),k=n(594),_=n(877),w=n(745),D=n(649),P=n(579),A=n(1533),T=n(1534),F=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),O=this&&this.__assign||function(){return(O=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},j=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,c)}l((a=a.apply(e,t||[])).next())})},x=this&&this.__generator||function(e,t){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,a=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},L=n(942),I=n(1101),R=function(t){function n(e){var n=t.call(this,e)||this;return n.state={point:Object(),oldModel:Object(),assets:[],_spaceList:[],floors:[],components:[],sourceSinkcomponents:[],isEdit:!1,_pointFunctions:[],_pointTypes:[],deviceList:[],newLocation:Object(),equipment:Object(),lightingInformation:Object(),lampTypes:[],isQrCameraMode:!1,isHistorian:!1,pointsListDD:[],relatedPointsListDD:[],selectedDevice:Object()},a=n,n.handlePointForm=n.handlePointForm.bind(n),n.handlePointFunctions=n.handlePointFunctions.bind(n),n.getData=n.getData.bind(n),n._getAssets=n._getAssets.bind(n),n._getSpacesList=n._getSpacesList.bind(n),n.handleFileAttachment=n.handleFileAttachment.bind(n),n._fetchPointFunctions=n._fetchPointFunctions.bind(n),n.handleInstallDateChange=n.handleInstallDateChange.bind(n),n.handleCommissioningDateChange=n.handleCommissioningDateChange.bind(n),n.handleDeviceSelect=n.handleDeviceSelect.bind(n),n.savePoint=n.savePoint.bind(n),n.mergePoint=n.mergePoint.bind(n),n.getNewDeviceLabel=n.getNewDeviceLabel.bind(n),n.handleSpaceSelect=n.handleSpaceSelect.bind(n),n.getNewSpaceLabel=n.getNewSpaceLabel.bind(n),n.handleAssetSelect=n.handleAssetSelect.bind(n),n.onEquipmentChange=n.onEquipmentChange.bind(n),n._saveEquipment=n._saveEquipment.bind(n),n.getNewAssetLabel=n.getNewAssetLabel.bind(n),n.onChangeFunction=n.onChangeFunction.bind(n),n.addNewPointFunction=n.addNewPointFunction.bind(n),n.handlePointTypeSelect=n.handlePointTypeSelect.bind(n),n.onChangePointType=n.onChangePointType.bind(n),n.addNewPointType=n.addNewPointType.bind(n),n._fetchPointTypes=n._fetchPointTypes.bind(n),n.updateSpace=n.updateSpace.bind(n),n.handlefileAttached=n.handlefileAttached.bind(n),n.handleScan=n.handleScan.bind(n),n.restoreSelectedVersion=n.restoreSelectedVersion.bind(n),n.fetchSourceSinkPointsList=n.fetchSourceSinkPointsList.bind(n),n.handleSinkSourceAssetSelect=n.handleSinkSourceAssetSelect.bind(n),n.handleSinkSourceComponentSelect=n.handleSinkSourceComponentSelect.bind(n),n.handleRelatedPoints=n.handleRelatedPoints.bind(n),n.onChangePointConnectedHandler=n.onChangePointConnectedHandler.bind(n),n.onChangeSoftwareAssetTypeHandler=n.onChangeSoftwareAssetTypeHandler.bind(n),n.onSpaceConnectedHandler=n.onSpaceConnectedHandler.bind(n),n}return F(n,t),n.prototype.componentDidMount=function(){return j(this,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return this.props.buildingName?(Object(v.a)(!0),[4,this.getData()]):[3,3];case 1:return t.sent(),[4,this._getAssets()];case 2:t.sent(),Object(v.a)(!1),t.label=3;case 3:return this.props.PointName||((e=this.state.point).point=Object(S.l)(12),this.setState({point:e})),[2]}})})},n.prototype.getData=function(){return j(this,void 0,void 0,function(){var e,t,n,a,o,i,s,c,l,u,p,h=this;return x(this,function(v){switch(v.label){case 0:return e=this.props,t=e.buildingName,n=e.PointName,a=Object(),[4,Object(r.j)()];case 1:return o=v.sent(),[4,Object(r.k)()];case 2:return i=v.sent(),[4,Object(k.f)(this.props.buildingName)];case 3:return s=v.sent(),[4,Object(m.h)(this.props.buildingName,!0)];case 4:return c=v.sent(),n?[4,Object(r.i)(t,n).then(function(e){return j(h,void 0,void 0,function(){var t,n;return x(this,function(a){switch(a.label){case 0:return t=e[0],n=Object(),t&&t.point&&Object(d.g)(t.point)?[4,this.mergePoint(t)]:[3,2];case 1:n=a.sent(),a.label=2;case 2:return[2,n]}})})})]:[3,6];case 5:return a=v.sent(),[3,7];case 6:a.assetConnectedAs="None",a.isConnectedTo="Space",v.label=7;case 7:return""!=a.pointId&&a.pointId?[3,9]:(l=Object(S.k)(7).toString(),[4,Object(r.a)(l,this.props.buildingName).then(function(e){e&&e[0]?a.pointId="":a.pointId=l})]);case 8:v.sent(),v.label=9;case 9:return u=Object(),a.monconDevice?(p=c.find(function(e){return Object(d.g)(e.moncondevice)==a.monconDevice}))?[4,Object(m.d)(p)]:[3,11]:[3,11];case 10:u=v.sent(),v.label=11;case 11:return this.setState({floors:s,_pointFunctions:o,_pointTypes:i,deviceList:c,point:a,selectedDevice:u,oldModel:O({},a),isEdit:a.point==this.props.PointName},function(){return j(h,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return n?("Component"==a.isConnectedTo&&this._getComponents(!1),"Component"==a.sinkSourceAssetType&&this._getComponents(!0),[4,this.fetchSourceSinkPointsList(!0)]):[3,3];case 1:return e.sent(),[4,this.fetchSourceSinkPointsList(!1)];case 2:e.sent(),e.label=3;case 3:return[2]}})})}),[2]}})})},n.prototype.fetchSourceSinkPointsList=function(e){return j(this,void 0,void 0,function(){var t,n,a,o,i;return x(this,function(s){switch(s.label){case 0:return t=this.props.buildingName,n=this.state.point,e?(a=[],n.isConnectedTo?(o="","Component"==n.isConnectedTo&&n.component?o=n.component:"Equipment"==n.isConnectedTo&&n.asset?o=n.asset:"Device"==n.isConnectedTo&&n.monconDevice&&(o=n.monconDevice),o?[4,Object(r.g)(t,"",n.isConnectedTo,o)]:[3,2]):[3,2]):[3,3];case 1:a=s.sent(),s.label=2;case 2:return this.setState({relatedPointsListDD:a}),[3,8];case 3:return i=[],n.sinkSourceAssetType?"Component"==n.sinkSourceAssetType&&n.sinkSourceComponent?[4,Object(r.g)(t,"",n.sinkSourceAssetType,n.sinkSourceComponent)]:[3,5]:[3,7];case 4:return i=s.sent(),[3,7];case 5:return n.sinkSourceAsset?[4,Object(r.g)(t,"",n.sinkSourceAssetType,n.sinkSourceAsset)]:[3,7];case 6:i=s.sent(),s.label=7;case 7:this.setState({pointsListDD:i}),s.label=8;case 8:return[2]}})})},n.prototype.fetchDevicesList=function(){return j(this,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return[4,Object(m.h)(this.props.buildingName,!0)];case 1:return e=t.sent(),this.setState({deviceList:e}),[2]}})})},n.prototype._getAssets=function(){return j(this,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return[4,Object(c.g)(this.props.buildingName,i.b.POINT)];case 1:return e=t.sent(),this.setState({assets:e}),[2]}})})},n.prototype._getComponents=function(e,t){return j(this,void 0,void 0,function(){var n,a,o=this;return x(this,function(i){return n=this.state.point,e?(a=n.sinkSourceAsset?n.sinkSourceAsset:t||"")&&Object(E.m)(this.props.buildingName,a).then(function(e){if(e.length>0){var t=[];e.map(function(e){var n={ontology:e.name,rdfsLabel:e.rdfsLabel};t.push(n)}),o.setState({sourceSinkcomponents:t})}else o.setState({sourceSinkcomponents:[]})}).catch(function(e){return e}):n.asset&&Object(E.m)(this.props.buildingName,n.asset).then(function(e){if(e.length>0){var t=[];e.map(function(e){var n={ontology:e.name,rdfsLabel:e.rdfsLabel};t.push(n)}),o.setState({components:t})}else o.setState({components:[]})}).catch(function(e){return e}),[2]})})},n.prototype._getSpacesList=function(e){return j(this,void 0,void 0,function(){var t,n;return x(this,function(a){switch(a.label){case 0:return t=this.props.buildingName,[4,Object(s.c)(e,t,!0)];case 1:return n=a.sent(),this.setState({_spaceList:n}),[2]}})})},n.prototype._fetchPointFunctions=function(){return j(this,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return[4,Object(r.j)()];case 1:return e=t.sent(),this.setState({_pointFunctions:e}),[2]}})})},n.prototype.getNewDeviceLabel=function(e){return j(this,void 0,void 0,function(){var t,n=this;return x(this,function(o){return(t=this.state.point).monconDevice=e,this.setState({point:t},function(){return j(n,void 0,void 0,function(){return x(this,function(e){return a.fetchDevicesList(),[2]})})}),[2]})})},n.prototype._fetchPointTypes=function(){return j(this,void 0,void 0,function(){var e;return x(this,function(t){switch(t.label){case 0:return[4,Object(r.k)()];case 1:return e=t.sent(),this.setState({_pointTypes:e}),[2]}})})},n.prototype.getNewSpaceLabel=function(e){var t=this.state._spaceList&&this.state._spaceList.find(function(t){return Object(d.g)(t.rdfsLabel)==e}),n=this.state.point;n.space=Object(d.g)(t&&t.ontology),this.setState({point:n})},n.prototype.mergePoint=function(e){return j(this,void 0,Promise,function(){var t,n,a,o,i,s;return x(this,function(c){switch(c.label){case 0:return t=Object(),e?(t.point=Object(d.g)(e.point),t.pointId=e&&e.pointId?Object(d.g)(e.pointId):Object(S.k)(7).toString(),t.pointLabel=Object(d.g)(e.pointLabel),t.pointType=Object(d.g)(e.pointType),t.pointDevice=Object(d.g)(e.pointDevice),t.notes=Object(d.g)(e.notes),t.monconDevice=Object(d.g)(e.monconDevice),t.s3FileName=Object(d.g)(e.s3FileName),t.softwarePointDescription=Object(d.g)(e.softwarePointDescription),t.webhook=Object(d.g)(e.webhook),t.sourcePointDescription=Object(d.g)(e.sourcePointDescription),t.sinkPointDescription=Object(d.g)(e.sinkPointDescription),t.link1=Object(d.g)(e.link1),t.link2=Object(d.g)(e.link2),t.installDate=Object(d.g)(e.installDate),t.commissioningDate=Object(d.g)(e.commissioningDate),t.unit=Object(d.g)(e.unit),t.tag=Object(d.g)(e.tag),t.floor=Object(d.g)(e.floor),[4,this.handleFloorChange(t.floor)]):[3,10];case 1:return c.sent(),t.space=Object(d.g)(e.space),[4,this.handleSpaceSelect(t.space)];case 2:return c.sent(),t.asset=Object(d.g)(e.asset),[4,this.handleAssetSelect(t.asset)];case 3:return c.sent(),t.component=Object(d.g)(e.component),t.assetLabel=Object(d.g)(e.assetLabel),t.componentLabel=Object(d.g)(e.componentLabel),t.floorLabel=Object(d.g)(e.floorLabel),t.spaceLabel=Object(d.g)(e.spaceLabel),t.pointNumber=Object(d.g)(e.pointNumber),t.pointState=Object(d.g)(e.pointState),t.isConnectedTo=Object(d.g)(e.isConnectedTo),t.assetConnectedAs=Object(d.g)(e.assetConnectedAs),t.sinkSourceAssetType=Object(d.g)(e.sinkSourceAssetType),t.sinkSourceAsset=Object(d.g)(e.sinkSourceAsset),t.sinkSourceAsset?[4,this._getComponents(!0,t.sinkSourceAsset)]:[3,5];case 4:c.sent(),c.label=5;case 5:return t.sinkSourceComponent=Object(d.g)(e.sinkSourceComponent),t.sinkSourcePoint=Object(d.g)(e.sinkSourcePoint),t.pointPIDName=Object(d.g)(e.pointPIDName),t.sensedValue=Object(d.g)(e.sensedValue),t.minimumNormalValue=Object(d.g)(e.minimumNormalValue),t.maximumNormalValue=Object(d.g)(e.maximumNormalValue),(n=Object(d.g)(e.relatedPoints))?(a=n.split(",")).length>0?[4,Object(S.n)(a)]:[3,7]:[3,7];case 6:o=c.sent(),i=[],o.map(function(e){i.push({label:e.rdfsLabel,value:e.ontology})}),t.relatedPoints=i,c.label=7;case 7:return e&&e.pointId&&Object(d.g)(e.pointId)?(t.pointId=Object(d.g)(e.pointId),[3,10]):[3,8];case 8:return s=Object(S.k)(7).toString(),[4,Object(r.a)(s,this.props.buildingName).then(function(e){e&&e[0]?t.pointId="":t.pointId=s})];case 9:c.sent(),c.label=10;case 10:return[2,t]}})})},n.prototype.savePoint=function(e){return j(this,void 0,void 0,function(){var t,n,a,o,s,c,m,d,u,p;return x(this,function(h){switch(h.label){case 0:return t=this.state,n=t.point,a=t.isEdit,o=t.oldModel,a=n.point==this.props.PointName,s=this.props.buildingName,n.point=n.point?n.point:Object(S.l)(7),e?(c=e||n,m=n):(c=n,m=a?o:null),n?(Object(v.a)(!0),d=JSON.parse(C.a.getItem("user")),[4,Object(r.d)(c,s,a).then(function(){Object(w.b)(c.point,c,m,d.contact)})]):[3,2];case 1:h.sent(),u=new l.b,(p=Object(i.c)())&&(p.file||p.length>0)&&u.UploadFile(l.a.DOCUMENT,n.s3FileName,p),Object(v.a)(!1),h.label=2;case 2:return window.location.hash="/"+this.props.instance+"/"+this.props.buildingName+"/Points",[2]}})})},n.prototype.handleFloorChange=function(e){return j(this,void 0,void 0,function(){var t,n,a,o=this;return x(this,function(i){return t=this.state,n=t.point,a=t.floors,n.floor=e,n.floorLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n,_spaceList:[]},function(){o._getSpacesList(e),o._getAssets()}),[2]})})},n.prototype.handleInstallDateChange=function(e){var t=this.state.point;t.installDate=e.toString(),this.setState({point:t})},n.prototype.handleCommissioningDateChange=function(e){var t=this.state.point;t.commissioningDate=e.toString(),this.setState({point:t})},n.prototype.onSpaceConnectedHandler=function(){var e=this.state.point,t=this.state.pointsListDD,n=this.state.deviceList;e.sinkSourceAsset="",e.sinkSourceAssetType="",e.sinkSourcePoint="",e.sinkSourceComponent="",t=[],this.handleSinkSourceAssetTypeSelect("Device"),this.setState({point:e,pointsListDD:t,deviceList:n})},n.prototype.handleSourceOrSink=function(e){var t=this.state.point;t.assetConnectedAs=e,this.setState({point:t}),this.onSpaceConnectedHandler()},n.prototype.onChangePointConnectedHandler=function(){var e=this.state.point,t=this.state.relatedPointsListDD,n=this.state.components;e.monconDevice="",e.relatedPoints=[],e.assetLabel="",e.asset="",e.component="",e.componentLabel="",t=[],n=[],this.setState({point:e,relatedPointsListDD:t,components:n})},n.prototype.handleConnectedTo=function(e){var t=this.state.point;t.isConnectedTo=e,this.setState({point:t}),this.onChangePointConnectedHandler()},n.prototype.handlePointForm=function(e){var t=this.state.point;t[""+e.target.name]=e.target.value,this.setState({point:t})},n.prototype.handleDeviceForm=function(e){var t=this.state.selectedDevice,n=e.target.name;if(!t||!t.wirelessConfig){var a=Object();t.wirelessConfig=a}t.wirelessConfig[""+n]=e.target.value,this.setState({selectedDevice:t})},n.prototype.onChangeSoftwareAssetTypeHandler=function(){var e=this.state.point,t=this.state.pointsListDD,n=this.state.sourceSinkcomponents;e.sinkSourceAsset="",e.sinkSourcePoint="",e.sinkSourceComponent="",e.sourcePointDescription="",e.sinkPointDescription="",e.webhook="",e.softwarePointDescription="",e.link1="",e.link2="",e.notes="",delete e.commissioningDate,t=[],n=[],this.setState({point:e,pointsListDD:t,sourceSinkcomponents:n})},n.prototype.handleSinkSourceAssetTypeSelect=function(e){var t=this.state.point;t.sinkSourceAssetType=e,this.setState({point:t}),this.onChangeSoftwareAssetTypeHandler()},n.prototype.handleSinkSourceAssetSelect=function(e){var t=this,n=this.state.point,a=e.target.value;""==a&&(n.sinkSourcePoint=""),n.sinkSourceAsset=a,this.setState({point:n},function(){"Component"==n.sinkSourceAssetType?t._getComponents(!0):t.fetchSourceSinkPointsList(!1)})},n.prototype.handleSinkSourceComponentSelect=function(e){var t=this,n=this.state.point,a=e.target.value;n.sinkSourceComponent=a,this.setState({point:n},function(){t.fetchSourceSinkPointsList(!1)})},n.prototype.handleRelatedPoints=function(e){var t=this.state.point;t.relatedPoints=e,this.setState({point:t})},n.prototype.handleScan=function(e){var t=this.state.point;e&&(t.tag=e.toString(),this.setState({point:t,isQrCameraMode:!1}))},n.prototype.handlePointTypeSelect=function(e){var t=this.state.point,n=e.target.value;"addNewPointType"==n?(t.pointType="",a.setState({point:t}),document.getElementById("addNewPointTypeDailogeButton").click()):(t.pointType=n,this.setState({point:t}))},n.prototype.handleAssetSelect=function(e){var t=this,n=this.state.point,a=this.state.assets,o=this.state.components,i=this.state.relatedPointsListDD;"addNewAsset"==e&&(n.asset="",this.setState({point:n}),document.getElementById("AddAssetDailogeButton").click()),""==e?(n.asset="",n.relatedPoints=[],o=[],i=[],this.setState({point:n,relatedPointsListDD:i,components:o})):(n.asset=e,n.assetLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n},function(){"Component"==n.isConnectedTo&&t._getComponents(!1),t.fetchSourceSinkPointsList(!0)}))},n.prototype.handleComponentSelect=function(e){var t=this,n=this.state.point,a=this.state.components;n.component=e,n.componentLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n},function(){t.fetchSourceSinkPointsList(!0)})},n.prototype.handleSpaceSelect=function(e){var t=this,n=this.state.point,a=this.state._spaceList;"addNewSpace"==e?document.getElementById("btnShowSpaceFormDialog").click():(n.space=e,n.spaceLabel=a&&a.find(function(t){return Object(d.g)(t.ontology)==e})?Object(d.g)(a.find(function(t){return Object(d.g)(t.ontology)==e}).rdfsLabel):"",this.setState({point:n,assets:[]},function(){t._getAssets()}))},n.prototype.handleDeviceSelect=function(e){return j(this,void 0,void 0,function(){var t,n,a,o,i,s=this;return x(this,function(c){switch(c.label){case 0:return t=this.state.point,"addNewDevice"!=(n=e.target.value)?[3,1]:(t.monconDevice="",this.setState({point:t}),document.getElementById("AddDeviceDailogeButton").click(),[3,4]);case 1:return t.monconDevice=n,a=this.state.deviceList,o=a.find(function(e){return Object(d.g)(e.moncondevice)==t.monconDevice}),i=Object(),o?[4,Object(m.d)(o)]:[3,3];case 2:i=c.sent(),c.label=3;case 3:this.setState({point:t,selectedDevice:i},function(){s.fetchSourceSinkPointsList(!0)}),c.label=4;case 4:return[2]}})})},n.prototype.handlePointFunctions=function(e){var t=e.target.value,n=this.state.point;"addPointFunction"==t?(n.pointDevice="",this.setState({point:n}),document.getElementById("addNewFunctionDailogeButton").click()):(n.pointDevice=t,this.setState({point:n}))},n.prototype.onChangeFunction=function(e){var t=this.state.point;t.pointDevice=e,this.setState({point:t})},n.prototype.onChangePointType=function(e){var t=this.state.point;t.pointType=e,this.setState({point:t})},n.prototype.addNewPointType=function(){return j(this,void 0,void 0,function(){var e,t,n=this;return x(this,function(a){switch(a.label){case 0:return e=this.state.point,t={ontology:e.pointType.replace(new RegExp(" ","g"),""),rdfsLabel:e.pointType},[4,Object(r.f)(this.props.buildingName,t).then(function(){})];case 1:return a.sent(),e.pointType=t.ontology,this.setState({point:e},function(){return j(n,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return[4,this._fetchPointTypes()];case 1:return e.sent(),[2]}})})}),[2]}})})},n.prototype.addNewPointFunction=function(){return j(this,void 0,void 0,function(){var e,t,n=this;return x(this,function(a){switch(a.label){case 0:return e=this.state.point,t={ontology:e.pointDevice.replace(new RegExp(" ","g"),""),rdfsLabel:e.pointDevice},[4,Object(r.e)(this.props.buildingName,t).then(function(){})];case 1:return a.sent(),e.pointDevice=t.ontology,this.setState({point:e},function(){return j(n,void 0,void 0,function(){return x(this,function(e){switch(e.label){case 0:return[4,this._fetchPointFunctions()];case 1:return e.sent(),[2]}})})}),[2]}})})},n.prototype.handleFileAttachment=function(t){var n=this.state.point;if(t&&(t.file||t.length>0)&&n.point&&n.point.length>0){var a=this.props.buildingName+"-_-"+n.point,o="";"video/mp4"==t.type?(o=a+".mp4",Object(i.f)(t)):"image/jpeg"==t.type||"image/png"==t.type?(o=a+".jpg",Object(i.f)(t.file)):(o=a+".jpg",Object(i.f)(new e(t.replace(/^data:image\/\w+;base64,/,""),"base64"))),n.s3FileName=o,this.setState({point:n},function(){})}},n.prototype.onEquipmentChange=function(e){var t=this.state.lightingInformation;t.fixtureName=e.equipmentName,t.fixtureType=e.subclassType;var n=f.a[e.subclassType]?f.a[e.subclassType]:[];this.setState({equipment:e,lightingInformation:t,lampTypes:n})},n.prototype._saveEquipment=function(){return j(this,void 0,void 0,function(){var e,t=this;return x(this,function(n){switch(n.label){case 0:return(e=this.state.equipment).equipmentName=e.equipmentName?e.equipmentName:Object(S.l)(7),!1&&!this.state.isEdit?[3,2]:(Object(v.a)(!0),[4,Object(E.w)(this.props.buildingName,e,this.state.isEdit).then(function(){var t=new l.b,n=Object(i.d)();if(n&&n.length)for(var a=0;a<n.length;a++){var o=n[a];t.UploadFile(l.a.DOCUMENT,e.profileFileName[a],o)}})]);case 1:n.sent(),Object(v.a)(!1),"MiscAndProcess"!=e.equipmentType||"PlugLoad"!=e.subclassType&&e.subclassType,n.label=2;case 2:return this.setState({isEdit:!1,equipment:Object()},function(){return j(t,void 0,void 0,function(){return x(this,function(t){switch(t.label){case 0:return[4,this._getAssets()];case 1:return t.sent(),this.getNewAssetLabel(e.equipmentName),[2]}})})}),[2]}})})},n.prototype.getNewAssetLabel=function(e){return j(this,void 0,void 0,function(){var t,n;return x(this,function(a){return t=this.state.assets&&this.state.assets.find(function(t){return Object(d.g)(t.ontology)==e}),(n=this.state.point).asset=Object(d.g)(t&&t.ontology),this.setState({point:n}),[2]})})},n.prototype.updateSpace=function(e){return j(this,void 0,void 0,function(){var t;return x(this,function(n){switch(n.label){case 0:return(t=this.state.point).floor?[4,this._getSpacesList(t.floor)]:[3,2];case 1:n.sent(),t.space=e.name,this.setState({point:t}),n.label=2;case 2:return[2]}})})},n.prototype.handlefileAttached=function(e){var t=this.state.point;e.length>0&&(t.tag=e&&e[0].name,this.setState({point:t}))},n.prototype.restoreSelectedVersion=function(e){return j(this,void 0,void 0,function(){var t;return x(this,function(n){switch(n.label){case 0:return e&&e.model?(t=JSON.parse(e.model),[4,this.savePoint(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},n.prototype.saveMoncon=function(){return j(this,void 0,void 0,function(){var e,t,n;return x(this,function(a){switch(a.label){case 0:return e=this.props.buildingName,t=this.state.selectedDevice,n=JSON.parse(C.a.getItem("user")),t?(t.createdby||(t.createdby=n.name),Object(v.a)(!0),[4,Object(m.c)(t,e,this.props.isEdit)]):[3,2];case 1:a.sent(),Object(v.a)(!1),a.label=2;case 2:return[2]}})})},n.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,i=t.isEdit,s=t.isView,c=this.state,l=c.point,r=c.assets,m=c.components,u=c._pointFunctions,v=c.deviceList,f=c._spaceList,E=c.equipment,S=c.isQrCameraMode,C=c.floors,k=c.isHistorian,w=c.pointsListDD,F=c.sourceSinkcomponents,O=c.relatedPointsListDD,j=c.selectedDevice,x=j&&j.wirelessConfig?j.wirelessConfig.thermostatMacAddress:"",R=j&&j.wirelessConfig?j.wirelessConfig.ipAddress:"",q=j&&j.wirelessConfig?j.wirelessConfig.subnetmask?j.wirelessConfig.subnetmask:"255.255.255.0":"",V=l.pointLabel,H=l.pointType,B=l.monconDevice,M=l.asset,W=l.component,Q=l.floor,z=l.space,G=l.isConnectedTo,U=l.assetConnectedAs,J=l.sinkSourceAssetType,K=l.sinkSourceAsset,X=l.sinkSourceComponent,Y=l.sinkSourcePoint,Z=!1,$=!1;G&&("Device"==G?Z=!!B:"Equipment"==G?Z=!!M:"Component"==G?Z=!!W:"Space"==G&&(Z=!!z)),U&&("None"!=U?J&&("Equipment"==J||"Device"==J?$=!(!K||!Y):"Component"==J&&($=!!(K&&Y&&X))):$=!0);var ee=!!(!!(V&&H&&Q&&z&&U)&&Z&&$),te=!1,ne=[];if(j&&j.monitoringControlDeviceType)if(-1!=j.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")){te=!0;var ae=A.a;Object.keys(ae).map(function(e,t){ne.push({ontology:ae[e],rdfsLabel:e})})}else if(-1!=j.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i4")){te=!0;var oe=A.b;Object.keys(oe).map(function(e,t){ne.push({ontology:oe[e],rdfsLabel:e})})}else if(-1!=j.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")){te=!0;var ie=A.c;Object.keys(ie).map(function(e,t){ne.push({ontology:ie[e],rdfsLabel:e})})}else if(-1!=j.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")){te=!0;var se=T.a;Object.keys(se).map(function(e,t){ne.push({ontology:se[e],rdfsLabel:e})})}return o.createElement(o.Fragment,null,k&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12"},o.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",style:{marginLeft:3,marginTop:5},onClick:function(){e.setState({isHistorian:!1})}}," Go Back To "))),k&&o.createElement(_.default,{buildingName:n,instance:a,ObjectId:l.point,restoreSelectedVersion:this.restoreSelectedVersion}),!k&&o.createElement("div",{className:"card",id:"pointsForm"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"content"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("button",{className:"btn btn-success pull-right active custom-outline-btn",onClick:function(){e.setState({isHistorian:!0})}}," ",o.createElement("i",{className:"fa fa-history","aria-hidden":"true"})," Historian Archive"))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-2"},o.createElement("label",{htmlFor:"pointLabel"},"Point Name:")),o.createElement("div",{className:"col-md-10"},o.createElement("input",{type:"text",id:"pointLabel",name:"pointLabel",className:"form-control "+(l.pointLabel?"":"addFieldValidate"),value:l.pointLabel,disabled:s,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4 col-sm-3"},o.createElement("label",{htmlFor:"pointId"},"Point ID")),o.createElement("div",{className:"col-md-8 col-sm-3"},o.createElement("div",{className:""},o.createElement("input",{type:"text",disabled:!0,id:"pointId",className:"form-control",onChange:function(t){e.handlePointForm(t)},value:l.pointId}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointType"},"Point Type:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.pointType?"":"addFieldValidate"),id:"pointType",name:"pointType",disabled:s,onChange:function(t){return e.handlePointForm(t)},value:l.pointType?l.pointType:""},o.createElement("option",{value:""},"Select Point Type"),o.createElement("option",{value:"Sensed"},"Sensed"),o.createElement("option",{value:"Manual"},"Manual"),o.createElement("option",{value:"Virtual"},"Virtual"),o.createElement("option",{value:"Wired"},"Wired")))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("label",{htmlFor:"pointState"},"Point State:")," "),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("select",{className:"form-control "+(l.pointState?"":"addFieldValidate"),id:"pointState",name:"pointState",disabled:s,onChange:function(t){return e.handlePointForm(t)},value:l.pointState?l.pointState:""},o.createElement("option",{value:""},"Select Point State"),o.createElement("option",{value:"Planned"},"Planned"),o.createElement("option",{value:"Ordered"},"Ordered"),o.createElement("option",{value:"InInventory"},"In Inventory"),o.createElement("option",{value:"ReleasedForInstall"},"Released for Install"),o.createElement("option",{value:"Installed"},"Installed"),o.createElement("option",{value:"Testing"},"Testing"),o.createElement("option",{value:"Existing"},"Existing"),o.createElement("option",{value:"Retired"},"Retired"),o.createElement("option",{value:"CommittedToSell"},"Committed to Sell"),o.createElement("option",{value:"Sold"},"Sold")))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointFunction"},"Point Function:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control",name:"pointDevice",disabled:s,id:"pointFunction",value:l.pointDevice,onChange:function(t){return e.handlePointFunctions(t)}},o.createElement("option",{value:"",key:-2},"Select Point Function"),o.createElement("option",{value:"addPointFunction",key:-1},"Add New Point Function"),u.map(function(e,t){return o.createElement("option",{key:t,value:Object(d.g)(e.point)},Object(d.g)(e.label))}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointId"},"Unit:")),o.createElement("div",{className:"col-md-8"},o.createElement("div",{className:""},o.createElement("input",{type:"text",className:"form-control",name:"unit",disabled:s,onChange:function(t){e.handlePointForm(t)},value:l.unit})))),o.createElement("div",{className:"col-md-4"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointPIDName"},"Point P&ID Name:")),o.createElement("div",{className:"col-md-8"},o.createElement("div",{className:""},o.createElement("input",{type:"text",className:"form-control",name:"pointPIDName",disabled:s,onChange:function(t){e.handlePointForm(t)},value:l.pointPIDName})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointNumber"},"Point Number:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"number",id:"pointNumber",name:"pointNumber",disabled:s,className:"form-control col-md-6",value:l.pointNumber,onChange:function(t){return e.handlePointForm(t)}})))),o.createElement("br",null),o.createElement("br",null),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"floor"},"Floor:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.floor?"":"addFieldValidate"),disabled:s,id:"floor",name:"floor",value:l.floor,onChange:function(t){return e.handleFloorChange(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Floor"),C.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"space"},"Space:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.space?"":"addFieldValidate"),disabled:s,id:"space",name:"space",value:l.space,onChange:function(t){return e.handleSpaceSelect(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Space"),o.createElement("option",{value:"addNewSpace",key:-1},"Add New Space"),f&&f.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")}))),o.createElement(N.a,{updateSpace:this.updateSpace,closeDailogBtnID:"btnShowSpaceFormDialog",type:"",floor:"",buildingName:n,instance:a})),o.createElement("div",{className:"col-md-4 col-xs-12"})),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{htmlFor:"Sensed"},"Point Connected To:")),o.createElement("div",{className:"col-md-9 col-xs-12"},o.createElement("div",{className:"form-control "+(l.isConnectedTo?"":"addFieldValidate")},o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Space"==l.isConnectedTo,onChange:function(){e.handleConnectedTo("Space")},name:"isSpace",id:"isSpace"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSpace"},"\xa0Space")),o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Device"==l.isConnectedTo,onChange:function(){e.handleConnectedTo("Device")},name:"isDevice",id:"isDevice"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isDevice"},"\xa0Device")),o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Equipment"==l.isConnectedTo,onChange:function(){e.handleConnectedTo("Equipment")},name:"isEquipment",id:"isEquipment"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isEquipment"},"\xa0Equipment")),o.createElement("div",{className:"col-md-3 col-xs-3 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Component"==l.isConnectedTo,onChange:function(){e.handleConnectedTo("Component")},name:"isComponent",id:"isComponent"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isComponent"},"\xa0Component")))))),("Component"==l.isConnectedTo||"Equipment"==l.isConnectedTo)&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"asset"},"Equipment:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.asset?"":"addFieldValidate"),disabled:s,id:"asset",name:"asset",value:l.asset,onChange:function(t){return e.handleAssetSelect(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Asset"),o.createElement("option",{value:"addNewAsset",key:-1},"Add new Asset from Point"),r.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Component"==l.isConnectedTo&&o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"components"},"Device Equipment Component:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.component?"":"addFieldValidate"),disabled:s,id:"components",name:"components",value:l.component,onChange:function(t){return e.handleComponentSelect(t.target.value)}},o.createElement("option",{value:"",key:-2},"Select Component"),m.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"asset"},"Related Points:")),o.createElement("div",{className:"col-md-8"},o.createElement(P.a,{closeMenuOnSelect:!1,isMulti:!0,onChange:this.handleRelatedPoints,isDisabled:s,placeholder:"Select Related Points",options:O.length>0?O:[],value:l.relatedPoints})))),"Device"==l.isConnectedTo&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"pointDevice"},"Device:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.monconDevice?"":"addFieldValidate"),name:"monconDevice",disabled:s,value:l.monconDevice,onChange:function(t){return e.handleDeviceSelect(t)}},o.createElement("option",{value:""},"Select Device"),o.createElement("option",{value:"addNewDevice"},"Add New Device"),v&&v.map(function(e,t){return o.createElement("option",{value:e&&e.moncondevice&&e.moncondevice.value,key:t},e&&e.rdfsLabel&&e.rdfsLabel.value," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"asset"},"Related Points:")),o.createElement("div",{className:"col-md-8"},o.createElement(P.a,{closeMenuOnSelect:!1,isMulti:!0,onChange:this.handleRelatedPoints,isDisabled:s,placeholder:"Select Related Points",options:O.length>0?O:[],value:l.relatedPoints}))),j&&j.wirelessConfig&&o.createElement(o.Fragment,null,o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("button",{className:"btn btn-success active custom-outline-btn no-margin",onClick:function(){document.getElementById("btnShowDeviceDetails").click()}}," Device Wireless Details ")))),te&&"Sensed"==l.pointType&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sensedValue"},"Sensed Point:")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.sensedValue?"":"addFieldValidate"),name:"sensedValue",id:"sensedValue",disabled:s,value:l.sensedValue,onChange:function(t){return e.handlePointForm(t)}},o.createElement("option",{value:""},"Select Sensed Point"),ne&&ne.map(function(e,t){return o.createElement("option",{value:e.ontology,key:t},e.rdfsLabel," ")})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"minimumNormalValue"},"Minimum Normal Value:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"number",className:"form-control",name:"minimumNormalValue",disabled:s,onChange:function(t){e.handlePointForm(t)},value:l.minimumNormalValue}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"maximumNormalValue"},"Maximum Normal Value:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"number",className:"form-control",name:"maximumNormalValue",disabled:s,onChange:function(t){e.handlePointForm(t)},value:l.maximumNormalValue}))))),"Manual"!=l.pointType&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",null,l.isConnectedTo," Connected As:")),o.createElement("div",{className:"col-md-9 col-xs-12"},o.createElement("div",{className:"form-control "+(l.assetConnectedAs?"":"addFieldValidate")},o.createElement("div",{className:"col-md-4 col-xs-4 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"None"==l.assetConnectedAs,onChange:function(){e.handleSourceOrSink("None")},name:"isNone",id:"isNone"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isNone"},"\xa0None")),o.createElement("div",{className:"col-md-4 col-xs-4 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Source"==l.assetConnectedAs,onChange:function(){e.handleSourceOrSink("Source")},name:"isSource",id:"isSource"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSource"},"\xa0Source")),o.createElement("div",{className:"col-md-4 col-xs-4 center"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Sink"==l.assetConnectedAs,onChange:function(){e.handleSourceOrSink("Sink")},name:"isSink",id:"isSink"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSink"},"\xa0Sink")))))),"None"!=l.assetConnectedAs&&o.createElement(o.Fragment,null,o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",null,"Sink"==l.assetConnectedAs?"Hardware / Software Asset Type (Source):":"Software Asset Type (Sink):")),o.createElement("div",{className:"col-md-9"},o.createElement("div",{className:"form-control "+(l.sinkSourceAssetType?"":"addFieldValidate")},o.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Device"==l.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Device")},name:"isSSDevice",id:"isSSDevice"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSDevice"},"\xa0Device")),o.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Equipment"==l.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Equipment")},name:"isSSEquipment",id:"isSSEquipment"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSEquipment"},"\xa0Equipment")),o.createElement("div",{className:"col-md-4 col-xs-4 center no-padding"},o.createElement("input",{type:"radio",className:"no-margin no-padding",disabled:s,checked:"Component"==l.sinkSourceAssetType,onChange:function(){e.handleSinkSourceAssetTypeSelect("Component")},name:"isSSComponent",id:"isSSComponent"}),o.createElement("label",{className:"no-margin no-padding",htmlFor:"isSSComponent"},"\xa0Component")))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkSourceAsset"},"Sink"==l.assetConnectedAs?"Hardware / Software "+(l.sinkSourceAssetType?"Component"==l.sinkSourceAssetType?"Equipment":l.sinkSourceAssetType:"Asset")+" (Source)":"Software "+(l.sinkSourceAssetType?"Component"==l.sinkSourceAssetType?"Equipment":l.sinkSourceAssetType:"Asset")+"  (Sink):")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.sinkSourceAsset?"":"addFieldValidate"),id:"sinkSourceAsset",name:"sinkSourceAsset",value:l.sinkSourceAsset?l.sinkSourceAsset:"",disabled:s&&!l.sinkSourceAssetType,onChange:this.handleSinkSourceAssetSelect},o.createElement("option",{value:"",key:-2},"Select ","Sink"==l.assetConnectedAs?"Source":"Sink"," ",l.sinkSourceAssetType?"Component"==l.sinkSourceAssetType?"Equipment":l.sinkSourceAssetType:"Asset"),"Device"==l.sinkSourceAssetType&&v&&v.length>0&&v[0]&&v.map(function(e,t){return o.createElement(o.Fragment,null,o.createElement("option",{value:e&&e.moncondevice&&Object(d.g)(e.moncondevice)},e&&e.rdfsLabel&&Object(d.g)(e.rdfsLabel)))}),("Equipment"==l.sinkSourceAssetType||"Component"==l.sinkSourceAssetType)&&r&&r.length>0&&r[0]&&r.map(function(e,t){return o.createElement("option",{key:t,value:e.ontology.value},e.rdfsLabel.value," ")})))),"Component"==l.sinkSourceAssetType&&o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkSourceComponent"},"Sink"==l.assetConnectedAs?"Hardware / Software "+l.sinkSourceAssetType+" (Source)":"Software "+l.sinkSourceAssetType+" (Sink):")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.sinkSourceComponent?"":"addFieldValidate"),id:"sinkSourceComponent",name:"sinkSourceComponent",value:l.sinkSourceComponent?l.sinkSourceComponent:"",disabled:s&&!l.sinkSourceAssetType,onChange:this.handleSinkSourceComponentSelect},o.createElement("option",{value:"",key:-2},"Select ","Sink"==l.assetConnectedAs?"Source":"Sink"," ",l.sinkSourceAssetType?" "+l.sinkSourceAssetType:" Asset Point"),F&&F.length>0&&F[0]&&F.map(function(e){return o.createElement(o.Fragment,null,o.createElement("option",{value:e&&e.ontology&&Object(d.g)(e.ontology)},e&&e.rdfsLabel&&Object(d.g)(e.rdfsLabel)))})))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkSourcePoint"},"Sink"==l.assetConnectedAs?"Hardware / Software Point (Source)":"Software Point (Sink):")),o.createElement("div",{className:"col-md-8"},o.createElement("select",{className:"form-control "+(l.sinkSourcePoint?"":"addFieldValidate"),id:"sinkSourcePoint",name:"sinkSourcePoint",value:l.sinkSourcePoint?l.sinkSourcePoint:"",disabled:s&&!l.sinkSourceAsset,onChange:this.handlePointForm},o.createElement("option",{value:"",key:-2},"Select ","Sink"==l.assetConnectedAs?"Source":"Sink"," ",l.sinkSourceAssetType?" "+l.sinkSourceAssetType:" Asset"," Point"),w&&w.length>0&&w[0]&&w.map(function(e){return o.createElement(o.Fragment,null,o.createElement("option",{value:e.value},e.label))}))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sourcePointDescription"},"Source Point Description:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"sourcePointDescription",name:"sourcePointDescription",className:"form-control col-md-6",value:l.sourcePointDescription,disabled:s,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"sinkPointDescription"},"Sink Point Description:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"sinkPointDescription",name:"sinkPointDescription",className:"form-control col-md-6",value:l.sinkPointDescription,disabled:s,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"webhook"},"Graphics link:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"webhook",name:"webhook",disabled:s,className:"form-control col-md-6",value:l.webhook,onChange:function(t){return e.handlePointForm(t)}})))))),o.createElement("br",null),o.createElement("br",null),"None"==l.assetConnectedAs&&o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"webhook"},"Graphics link:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"webhook",name:"webhook",disabled:s,className:"form-control col-md-6",value:l.webhook,onChange:function(t){return e.handlePointForm(t)}})))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"softwarePointDescription"},"Software Point Description:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"softwarePointDescription",name:"softwarePointDescription",disabled:s,className:"form-control col-md-6",value:l.softwarePointDescription,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"link1"},"Link 1:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"link1",name:"link1",disabled:s,className:"form-control col-md-6",value:l.link1,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"link2"},"Link 2:")),o.createElement("div",{className:"col-md-8"},o.createElement("input",{type:"text",id:"link2",name:"link2",disabled:s,className:"form-control col-md-6",value:l.link2,onChange:function(t){return e.handlePointForm(t)}})))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4"},o.createElement("label",{htmlFor:"notes"},"Notes:")),o.createElement("div",{className:"col-md-8"},o.createElement("textarea",{id:"notes",name:"notes",disabled:s,className:"form-control col-md-6",value:l.notes,onChange:function(t){return e.handlePointForm(t)}}))),o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("label",{htmlFor:"link2"},"Commissioning Date:")),o.createElement("div",{className:"col-md-8 col-xs-12"},o.createElement(p.a,{disabled:s,id:"commissioningDate",className:"form-control",selected:l.commissioningDate?new Date(l.commissioningDate):void 0,onChange:function(t){return e.handleCommissioningDateChange(t)},dateFormat:"MMMM d, yyyy",customInput:o.createElement("input",{type:"text",className:"form-control",placeholder:"Commissioning Date","aria-label":"","aria-describedby":"button-addon4",value:l.commissioningDate})}))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-12 col-xs-12"},o.createElement(D.a,{buildingName:n,assetOntology:s||i?this.props.PointName:l.point,showUploader:!s,entityType:"Point"}))),"Manual"==l.pointType&&o.createElement("div",{className:"col-md-4 col-xs-12"},o.createElement("div",{className:"col-md-2 col-xs-12 padding-10"},o.createElement("label",{htmlFor:"tag"},"Tag:")),o.createElement("div",{className:"col-md-6 col-xs-12"},o.createElement("input",{type:"text",id:"tag",name:"tag",className:"form-control",value:l.tag,disabled:s,onChange:function(t){return e.handlePointForm(t)}})),o.createElement("div",{className:"col-md-4 col-xs-12",style:{display:"inline-flex"}},o.createElement("button",{type:"button",disabled:s,className:"btn btn-dark btn-sm margin-5",onClick:function(){var t=e.state.isQrCameraMode;e.setState({isQrCameraMode:!t})}},o.createElement("i",{className:"fa fa-"+(S?"close":"camera")})),o.createElement("button",{type:"button",title:"QR Code Genrator",disabled:s||!l.tag||l.tag.length<=0,className:"margin-5 btn btn-dark btn-sm",onClick:function(){document.getElementById("QRCodeGenDailogebtn").click()}},o.createElement("i",{id:"icons",className:"fa fa-qrcode"}))),o.createElement("button",{id:"QRCodeGenDailogebtn",type:"button","data-toggle":"modal","data-target":"#QRCodeGenDailoge",className:"hidden"},"."),o.createElement(h.a,{id:"QRCodeGenDailoge",heading:"QR Code",saveButtonText:"Done",onSaveButtonClick:function(){},disableSaveButton:!1,showSaveButton:!1},o.createElement("div",{className:"center"},o.createElement("div",{className:"dataCard img-thumbnail"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-8 center"},l.tag&&o.createElement("div",null,o.createElement(I,{style:{verticalAlign:"middle",alignContent:"center"},id:"QRCode",value:l.tag,size:370,bgColor:"#ffffff",fgColor:"#000000",level:"H",includeMargin:!0,renderAs:"canvas"}))),o.createElement("div",{className:"col-md-2 col-md-offset-2"},o.createElement("div",{className:"pull-right"},o.createElement(y.a,{filename:l.tag,data:"",ElementID:"QRCode"}))))))))))),o.createElement("div",{className:"row padding-10"},o.createElement("div",{className:"col-md-8 col-xs-12"}),o.createElement("div",{className:"col-md-4 col-xs-12"},S&&o.createElement(L,{delay:300,onError:function(e){console.log(e)},onScan:this.handleScan,style:{width:"100%"}}))),o.createElement("br",null),o.createElement("br",null),o.createElement("div",{className:"col-md-12 text-center"},!s&&o.createElement("button",{type:"button",className:"btn btn-primary active",disabled:!ee,onClick:function(){e.savePoint()}},"Save"),"\xa0\xa0",o.createElement("button",{type:"button",className:"btn btn-danger active",onClick:function(){window.history.back()}},"Cancel")),o.createElement("br",null),o.createElement("br",null),o.createElement("button",{id:"AddDeviceDailogeButton","data-toggle":"modal","data-target":"#AddDeviceDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"AddDeviceDailoge",closeButtonId:"closeDeviceForm",heading:"Add New Device from Point",saveButtonText:"Done",isEditForm:!0,showSaveButton:!1},o.createElement(g.default,{getNewDeviceLabel:this.getNewDeviceLabel,buildingName:n,instance:a,isView:!1,isEdit:!1})),o.createElement("button",{id:"AddAssetDailogeButton","data-toggle":"modal","data-target":"#AddAssetDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"AddAssetDailoge",onSaveButtonClick:this._saveEquipment,heading:"Add New Device from Point",saveButtonText:"Save",isEditForm:!0,showSaveButton:!0},o.createElement(b.a,{onEquipmentChange:this.onEquipmentChange,equipment:E,isFromPoint:!0,buildingName:n,instance:a})),o.createElement("button",{id:"addNewFunctionDailogeButton","data-toggle":"modal","data-target":"#addNewFunctionDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"addNewFunctionDailoge",heading:"Add New Function From Point",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewPointFunction()},disableSaveButton:!l.pointDevice},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Add New Function:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:l.pointDevice,onChange:function(t){e.onChangeFunction(t.target.value)},type:"text",className:"form-control"}))))))))),o.createElement("button",{id:"addNewPointTypeDailogeButton","data-toggle":"modal","data-target":"#addNewPointTypeDailoge",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"addNewPointTypeDailoge",heading:"Add New Point Type From Point",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewPointType()},disableSaveButton:!l.pointType},o.createElement("div",{className:"content"},o.createElement("div",{className:"dataCard"},o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Add New Point Type:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:l.pointType,onChange:function(t){e.onChangePointType(t.target.value)},type:"text",className:"form-control"}))))))))),o.createElement("button",{id:"btnShowDeviceDetails","data-toggle":"modal","data-target":"#dialogShowDeviceDetails",type:"button",className:"btn btn-primary btn-fill hidden"},"."),o.createElement(h.a,{id:"dialogShowDeviceDetails",heading:"Device Wireless Details",saveButtonText:"Update",showCancelButton:!0,showSaveButton:!s,onSaveButtonClick:function(){e.saveMoncon()},disableSaveButton:!(q&&R&&x)},o.createElement("div",{className:"content card"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"}," MAC Address:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:x,onChange:function(t){e.handleDeviceForm(t)},type:"text",name:"thermostatMacAddress",id:"thermostatMacAddress",className:"form-control",disabled:s}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"IP Address / Communication:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("textarea",{value:R,onChange:function(t){e.handleDeviceForm(t)},name:"ipAddress",id:"ipAddress",className:"form-control",disabled:s}))))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{style:{padding:"10px"},className:"row"},o.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"}," Subnet Mask:"),o.createElement("div",{className:"col-md-8 headingText"},o.createElement("input",{value:q,onChange:function(t){e.handleDeviceForm(t)},type:"text",name:"subnetmask",id:"subnetmask",className:"form-control",disabled:s})))))))))))},n}(o.Component);t.default=R}.call(t,n(5).Buffer)},1533:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var a={State:"v4relay_state",Nominal_Source_Voltage:"nominal_src_volts",Current_Amperes_Relay1:"mAmps_relay1",Current_Amperes_Relay2:"mAmps_relay2",Current_Amperes_Relay3:"mAmps_relay3",Current_Amperes_Relay4:"mAmps_relay4",Power_WattHour_Relay1:"power_Wt_relay1",Power_WattHour_Relay2:"power_Wt_relay2",Power_WattHour_Relay3:"power_Wt_relay3"},o={State:"i1relay_state",Power_Watts:"active_power_Watts",Current_Amperes:"current_Amperes",Frequency_Hz:"frequency_Hz",Energy_WattHour:"import_active_energy_Wh",Power_Factor:"power_factor",Voltage:"voltage_volts"},i={Active_power_Watts_Relay1:"active_power_Watts_Ch1",Active_power_Watts_Relay2:"active_power_Watts_Ch2",Active_power_Watts_Relay3:"active_power_Watts_Ch3",Active_power_Watts_Relay4:"active_power_Watts_Ch4",Current_Amperes_Relay1:"current_Amperes_Ch1",Current_Amperes_Relay2:"current_Amperes_Ch3",Current_Amperes_Relay3:"current_Amperes_Ch2",Current_Amperes_Relay4:"current_Amperes_Ch4",Frequency_Hz_Relay1:"frequency_Hz_Ch1",Frequency_Hz_Relay2:"frequency_Hz_Ch2",Frequency_Hz_Relay3:"frequency_Hz_Ch3",Frequency_Hz_Relay4:"frequency_Hz_Ch4",Energy_WattHour_Relay1:"import_active_energy_Wh_Ch1",Energy_WattHour_Relay2:"import_active_energy_Wh_Ch2",Energy_WattHour_Relay3:"import_active_energy_Wh_Ch3",Energy_WattHour_Relay4:"import_active_energy_Wh_Ch4",Power_Factor_Relay1:"power_factor_Ch1",Power_Factor_Relay2:"power_factor_Ch2",Power_Factor_Relay3:"power_factor_Ch3",Power_Factor_Relay4:"power_factor_Ch4",Voltage_Relay1:"voltage_volts_Ch1",Voltage_Relay2:"voltage_volts_Ch2",Voltage_Relay3:"voltage_volts_Ch3",Voltage_Relay4:"voltage_volts_Ch4"}},1534:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={Altitude:"altitude_m",CO2:"equiCO2_ppm",GasResistance:"gasResistance_kOhm",Illuminance:"illuminance_lux",MotionSensed:"motion_sensed",Pressure:"pressure_hPa",Humidity:"relhumidity_pct",Temp:"temp_celsius",TVOC:"tvoc_ppm",WIFI_Temp1:"wifiTemp1_celsius",WIFI_Temp2:"wifiTemp2_celsius",WIFI_Temp3:"wifiTemp3_celsius"}}});