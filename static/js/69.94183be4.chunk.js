webpackJsonp([69],{3215:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=a(2),o=(a.n(s),a(57)),i=a(122),l=a(884),c=a(1144),r=a(697),m=a(860),u=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),d=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(s,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function l(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(i,l)}c((n=n.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var a,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{a=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},h=function(e){function t(t){var a=e.call(this,t)||this;return a.pageLength=30,a.state={logFiles:[],logFiles_Select:[],logFileToDelete:"",isSelectLogs:!1,selectLogs:[],updateLogs:[],selectedContent:"",searchDate:"0",date:Object(),verifyUser:!0},n=a,a.getLogFileList=a.getLogFileList.bind(a),a.getDBLogsData=a.getDBLogsData.bind(a),a.handleDateChange=a.handleDateChange.bind(a),a}return u(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e,t,a;return g(this,function(n){return e=this.state,t=e.searchDate,a=e.date,this.getDBLogsData(!1,t,a,!0),[2]})})},t.prototype.getLogFileList=function(){Object(i.a)(!0),(new o.b).GetFileList(o.a.TEMP_BACKUPS(),function(e,t){if(e)console.log("Get Object Error Returned",e),Object(i.a)(!1);else{var a=[],s=[];t.Contents.map(function(e){-1!=e.Key.indexOf("logs_")?a.push({fileName:e.Key,lastUpdatedOn:new Date(e.LastModified).ToEasternDateTime()}):-1!=e.Key.indexOf("logs-Select_")&&s.push({fileName:e.Key,lastUpdatedOn:new Date(e.LastModified).ToEasternDateTime()})}),n.setState({logFiles:a,logFiles_Select:s}),Object(i.a)(!1)}})},t.prototype.getDBLogsData=function(e,t,a,n){return d(this,void 0,void 0,function(){var s,o,l,r,m=this;return g(this,function(u){switch(u.label){case 0:return Object(i.a)(!0),s=this.props.instance,o=this.pageLength,l=n?0:e?this.state.selectLogs.length:this.state.updateLogs.length,r=e?"Query-Select":"Query-Update","0"!=t?[3,2]:[4,Object(c.b)(s,l,o,r).then(function(t){if(t){if(e)if(n)m.setState({selectLogs:t});else{var a=m.state.selectLogs;t.forEach(function(e){a.push(e)}),m.setState({selectLogs:a})}else if(n)m.setState({updateLogs:t});else{var s=m.state.updateLogs;t.forEach(function(e){s.push(e)}),m.setState({updateLogs:s})}Object(i.a)(!1)}})];case 1:return u.sent(),[3,4];case 2:return[4,Object(c.b)(s,l,o,r,a).then(function(t){if(t){if(e)if(n)m.setState({selectLogs:t});else{var a=m.state.selectLogs;t.forEach(function(e){a.push(e)}),m.setState({selectLogs:a})}else if(n)m.setState({updateLogs:t});else{var s=m.state.updateLogs;t.forEach(function(e){s.push(e)}),m.setState({updateLogs:s})}Object(i.a)(!1)}})];case 3:u.sent(),u.label=4;case 4:return[2]}})})},t.prototype.onDeleteFile=function(e){return d(this,void 0,void 0,function(){return g(this,function(t){return this.setState({logFileToDelete:e},function(){document.getElementById("btnConfirm").click()}),[2]})})},t.prototype.deleteFile=function(){return d(this,void 0,void 0,function(){var e;return g(this,function(t){return Object(i.a)(!0),(e=this.state.logFileToDelete)&&((new o.b).DeleteFile(o.a.TEMP_BACKUPS(),e),setTimeout(function(){n.getLogFileList()},1500)),[2]})})},t.prototype.handleDateChange=function(e){var t;if("0"==e)t=null,this.setState({date:null,searchDate:e}),this.getDBLogsData(this.state.isSelectLogs,e,null,!0);else if("7"==e){var a=(t=new Date).getDate()+1;t.setDate(a),this.setState({date:t.ToEasternDateTime(),searchDate:e}),this.getDBLogsData(this.state.isSelectLogs,e,t.ToEasternDateTime(),!0)}else{a=(t=new Date).getDate()-parseInt(e)+1;t.setDate(a),this.setState({date:t.ToEasternDateTime(),searchDate:e}),this.getDBLogsData(this.state.isSelectLogs,e,t.ToEasternDateTime(),!0)}},t.prototype.render=function(){var e=this,t=this.state,a=t.isSelectLogs,n=t.updateLogs,o=t.selectLogs,i=t.selectedContent,c=t.searchDate,u=t.date;return t.verifyUser?s.createElement(m.a,{onConfirmation:function(t){t?e.setState({verifyUser:!1}):e.setState({verifyUser:!0})}}):s.createElement("div",{className:"content"},s.createElement(l.a,null),s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"col-md-12"},s.createElement("h3",null,"DB Logs")),s.createElement("div",{className:"col-md-12 padding-10"},s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"btn-group"},s.createElement("a",{className:"btn "+(a?"":"btn-fill")+" btn-secondary btn-secondary-dark",onClick:function(){e.setState({isSelectLogs:!1}),e.getDBLogsData(!1,c,u,!0)}},"Update Logs"),s.createElement("a",{className:"btn "+(a?"btn-fill":"")+" btn-secondary btn-secondary-dark",onClick:function(){e.setState({isSelectLogs:!0}),e.getDBLogsData(!0,c,u,!0)}},"Select Logs"))),s.createElement("div",{className:"col-md-4"}),s.createElement("div",{className:"col-md-2"},s.createElement("select",{id:"selectDate",className:"form-control",value:c,onChange:function(t){return e.handleDateChange(t.target.value)}},s.createElement("option",{value:"0"},"All"),s.createElement("option",{value:"7"},"Today"),s.createElement("option",{value:"1"},"1 Day Ago"),s.createElement("option",{value:"2"},"2 Day Ago"),s.createElement("option",{value:"3"},"3 Day Ago"),s.createElement("option",{value:"4"},"4 Day Ago"),s.createElement("option",{value:"5"},"5 Day Ago"),s.createElement("option",{value:"6"},"6 Day Ago")))),s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"card"},s.createElement("div",{className:"content"},s.createElement("div",{className:"dataCard"},s.createElement("div",{className:"row hidden-xs"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"col-sm-6 headingText"},"Timestamp"),s.createElement("div",{className:"col-sm-4 headingText"},"Details"))),!a&&n&&n.map(function(t,a){return s.createElement("div",{key:a,className:"row clickable"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"col-sm-6 trim-data",title:t.timestamp?new Date(t.timestamp).toLocaleString():""},s.createElement("span",{className:"hidden visible-xs-inline headingText"},t.timestamp?new Date(t.timestamp).toLocaleString():""),t.timestamp?new Date(t.timestamp).toLocaleString():""),s.createElement("div",{className:"col-sm-4"},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Details"),s.createElement("a",{onClick:function(){e.setState({selectedContent:t.content}),document.getElementById("btnDisplayContent").click()}},"Details"))))}),a&&o&&o.map(function(t,a){return s.createElement("div",{key:a,className:"row clickable"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"col-sm-6 trim-data",title:t.timestamp?new Date(t.timestamp).toLocaleString():""},s.createElement("span",{className:"hidden visible-xs-inline headingText"},t.timestamp?new Date(t.timestamp).toLocaleString():""),t.timestamp?new Date(t.timestamp).toLocaleString():""),s.createElement("div",{className:"col-sm-4"},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Details"),s.createElement("a",{onClick:function(){e.setState({selectedContent:t.content}),document.getElementById("btnDisplayContent").click()}},"Details"))))}),a&&o.length>=this.pageLength&&o.length%this.pageLength==0&&s.createElement("div",{className:"row center"},s.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e.getDBLogsData(!0,c,u,!1)}}," ",s.createElement("span",null,"Load More..."))),!a&&n.length>=this.pageLength&&n.length%this.pageLength==0&&s.createElement("div",{className:"row center"},s.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e.getDBLogsData(!1,c,u,!1)}}," ",s.createElement("span",null,"Load More..."))),s.createElement("button",{id:"btnDisplayContent",style:{display:"none"},"data-toggle":"modal","data-target":"#ContentDialog"},"."),s.createElement(r.a,{id:"ContentDialog",heading:"Log Content",showCancelButton:!0,cancelButtonText:"Cancel",showSaveButton:!1,isEditForm:!1},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("textarea",{id:"content",className:"form-control",value:i,style:{height:"300px"}}))))))))))},t}(s.Component);t.default=h}});