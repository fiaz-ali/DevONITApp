webpackJsonp([42,62],{1330:function(t,e,n){"use strict";var i=n(2),o=(n.n(i),this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),r=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n}return o(e,t),e.prototype.componentDidMount=function(){console.log("Import Device")},e.prototype.render=function(){var t=this.props.ImportFile;return i.createElement("div",null,i.createElement("br",null),i.createElement("br",null),i.createElement("div",{style:{overflowX:"scroll",overflowY:"scroll",height:"400px"}},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("table",{className:"table table-striped table-bordered table-hover"},i.createElement("tbody",null,t&&t.map(function(t,e){return i.createElement(i.Fragment,null," ",i.createElement("tr",{style:{whiteSpace:"nowrap"}},t.map(function(t,n){return 0==e?i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("div",{className:"headingText"},t))):1!=e?i.createElement(i.Fragment,null,i.createElement("td",null,i.createElement("div",null,t))):void 0})))})))))))},e}(i.Component);e.a=r},885:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=(n.n(i),n(206)),r=n.n(o),a=n(205),s=n(16),l=n(57),c=n(7),u=n(14),p=n(88),f=n(13),h=n(207),d=(n.n(h),n(1330)),m=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),b=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}l((i=i.apply(t,e||[])).next())})},v=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},g=function(t){function e(e){var n=t.call(this,e)||this;return n.state={_allPoints:[],_plannedPoints:[],pointObj:Object(),isEdit:!1,isView:!1,isDeviceForm:!1,ImportFileData:[]},n.handlePointChange=n.handlePointChange.bind(n),n._fetchPoints=n._fetchPoints.bind(n),n.openEditForm=n.openEditForm.bind(n),n.closePointFormDailoge=n.closePointFormDailoge.bind(n),n.fileHandler=n.fileHandler.bind(n),n.save=n.save.bind(n),n}return m(e,t),e.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var t;return v(this,function(e){switch(e.label){case 0:return this.props.buildingName?(this.props.asset?(t={point:"",tag:"",pointId:"",notes:"",isSensed:!1,unit:"",pointDevice:"",pointType:"Sensor",pointLabel:"",isExisting:!0,asset:this.props.asset,space:"",s3FileName:"",commissioningDate:"",installDate:"",link1:"",link2:"",monconDevice:"",sinkPoint:"",sinkPointDescription:"",softwarePointDescription:"",sourcePoint:"",sourcePointDescription:"",webhook:"",component:"",floor:"",assetLabel:"",componentLabel:"",floorLabel:"",spaceLabel:""},this.setState({pointObj:t})):(t={point:"",tag:"",pointId:"",notes:"",isSensed:!1,unit:"",pointDevice:"",pointType:"Sensor",pointLabel:"",isExisting:!0,asset:"",space:"",s3FileName:"",commissioningDate:"",installDate:"",link1:"",link2:"",monconDevice:"",sinkPoint:"",sinkPointDescription:"",softwarePointDescription:"",sourcePoint:"",sourcePointDescription:"",webhook:"",component:"",floor:"",assetLabel:"",componentLabel:"",floorLabel:"",spaceLabel:""},this.setState({pointObj:t})),[4,this._fetchPoints()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.closePointFormDailoge=function(t,e){var n=this.state.pointObj;n.pointDevice=e?e.monitoringControl:n.pointDevice,this.setState({isDeviceForm:t,pointObj:n})},e.prototype.save=function(){},e.prototype._fetchPoints=function(){return b(this,void 0,void 0,function(){var t,e,n,i,o,r,a;return v(this,function(p){switch(p.label){case 0:return t=this.props,e=t.asset,n=t.buildingName,i=t.equipmentName,o=t.spaceName,r=[],Object(s.a)(!0),e&&e.length>0?[4,Object(l.f)(n,null,e).then(function(t){if(t&&t.length>0)for(var e=0;e<t.length;e++){var n=t[e];Object(c.g)(n.point)&&Object(c.g)(n.pointLabel)&&Object(u.r)(Object(c.g)(n.point),Object(c.g)(n.pointLabel))}r=t}).catch(function(t){return t})]:[3,2];case 1:return p.sent(),[3,4];case 2:return[4,Object(l.f)(n).then(function(t){r=t}).catch(function(t){return t})];case 3:p.sent(),p.label=4;case 4:return Object(s.a)(!1),a=r&&r.filter(function(t){return Object(c.g)(t.asset)==i}),i||o?(r=a.length>0?a:r&&r.filter(function(t){return Object(c.g)(t.space)==o}),this.setState({_allPoints:r.filter(function(t){return"false"==Object(c.g)(t.isPlanned)}),_plannedPoints:r.filter(function(t){return"true"==Object(c.g)(t.isPlanned)})})):this.setState({_allPoints:r.filter(function(t){return"false"==Object(c.g)(t.isPlanned)}),_plannedPoints:r.filter(function(t){return"true"==Object(c.g)(t.isPlanned)})}),[2]}})})},e.prototype.handlePointChange=function(t){this.setState({pointObj:t})},e.prototype.openEditForm=function(t){var e=this.props,n=e.buildingName,i=e.instance;t?this.setState({isEdit:!1,isView:!0},function(){window.location.hash=i+"/"+n+"/PointForm"}):this.setState({isEdit:!0,isView:!1},function(){window.location.hash=i+"/"+n+"/PointForm"})},e.prototype.fileHandler=function(t){return b(this,void 0,void 0,function(){var e,n,i=this;return v(this,function(o){switch(o.label){case 0:return e=this.state.ImportFileData,(n=t.target.files[0])?[4,Object(h.ExcelRenderer)(n,function(t,n){if(n){e=n.rows;for(var o=0;o<e.length;o++)for(var r=e[o],a=0;a<r.length;a++)"undefined"===typeof r[a]&&(r[a]="");i.setState({ImportFileData:e})}else console.log(t)})]:[3,2];case 1:return o.sent(),document.getElementById("openFirstDialog").click(),[3,3];case 2:e=[],this.setState({ImportFileData:e}),console.log("No File Selected"),o.label=3;case 3:return[2]}})})},e.prototype.render=function(){var t=this.props,e=t.buildingName,n=t.instance,o=this.state,s=o._plannedPoints,l=o._allPoints,c=o.ImportFileData;return i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"dropdown pull-right"},i.createElement(p.a,{filename:"PointsList",data:s,ElementID:"PointsList"})),i.createElement("div",{className:"btn btn-primary btn-dark btn-fill pull-right",style:{position:"relative",overflow:"hidden",fontSize:"13px",marginLeft:"3px"}},"Import",i.createElement("input",{type:"file",id:"123",onChange:this.fileHandler,style:{position:"absolute",opacity:0,right:"0",top:"0"}})),i.createElement("div",{className:"pull-right"},i.createElement("button",{type:"button",className:"btn btn-dark pull-right",onClick:function(){window.location.hash=n+"/"+e+"/PointForm"}},i.createElement("i",{className:"fa fa-plus"})," Create New Point ")),"\xa0")),i.createElement("div",{className:"row no-padding",id:"PointsList"},i.createElement(r.a,{vertical:!0,percentage:!0,secondaryInitialSize:60},i.createElement("div",{className:"padding-10"},i.createElement("h4",{style:{marginTop:"5px"}},"Existing"),i.createElement(a.a,{instance:n,buildingName:e,points:l,handlePointChange:this.handlePointChange,_fetchPoints:this._fetchPoints,openEditDialog:this.openEditForm,isPlanned:!1})),i.createElement("div",{className:"padding-10"},i.createElement("h4",{style:{marginTop:"5px"}},"Planned"),i.createElement(a.a,{instance:n,buildingName:e,points:s,handlePointChange:this.handlePointChange,_fetchPoints:this._fetchPoints,openEditDialog:this.openEditForm,isPlanned:!0})))),i.createElement("button",{type:"button",id:"openFirstDialog",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#OpenDialogueFirst"}," ."),i.createElement(f.a,{id:"OpenDialogueFirst",heading:"Excel File Data",isEditForm:!0,saveButtonText:"Cancel",showSaveButton:!0,showCancelButton:!1,onSaveButtonClick:this.save},i.createElement(d.a,{ImportFile:c})))},e}(i.Component);e.default=g},931:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=(n.n(i),n(184)),r=n(57),a=n(885),s=n(16),l=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),c=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function a(t){try{l(i.next(t))}catch(t){r(t)}}function s(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}l((i=i.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},p=function(t){function e(e){var n=t.call(this,e)||this;return n.state={_allPoints:[],_plannedPoints:[],pointObj:{point:"",tag:"",pointId:"",notes:"",isSensed:!1,unit:"",pointDevice:"",pointType:"Sensor",pointLabel:"",isExisting:!0,asset:"",space:"",s3FileName:"",commissioningDate:"",installDate:"",link1:"",link2:"",monconDevice:"",sinkPoint:"",sinkPointDescription:"",softwarePointDescription:"",sourcePoint:"",sourcePointDescription:"",webhook:"",component:"",floor:"",assetLabel:"",componentLabel:"",floorLabel:"",spaceLabel:""},isEdit:!1},n.handlePointChange=n.handlePointChange.bind(n),n._fetchPoints=n._fetchPoints.bind(n),n.openEditForm=n.openEditForm.bind(n),n.savePoint=n.savePoint.bind(n),n}return l(e,t),e.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){return u(this,function(t){return this.props.buildingName,[2]})})},e.prototype._fetchPoints=function(){return c(this,void 0,void 0,function(){var t=this;return u(this,function(e){switch(e.label){case 0:return Object(s.a)(!0),[4,Object(r.f)(this.props.buildingName).then(function(e){t.setState({_allPoints:e})}).catch(function(t){return t})];case 1:return e.sent(),Object(s.a)(!1),[2]}})})},e.prototype.handlePointChange=function(t){this.setState({pointObj:t})},e.prototype.openEditForm=function(){this.setState({isEdit:!0},function(){document.getElementById("btnPointForm").click()})},e.prototype.savePoint=function(){return c(this,void 0,void 0,function(){var t,e,n,i;return u(this,function(o){switch(o.label){case 0:return t=this.state,e=t.pointObj,n=t.isEdit,i=this.props.buildingName,e?(Object(s.a)(!0),[4,Object(r.c)(e,i,n)]):[3,3];case 1:return o.sent(),[4,this._fetchPoints()];case 2:o.sent(),Object(s.a)(!1),o.label=3;case 3:return[2]}})})},e.prototype.render=function(){var t=this.props,e=t.buildingName,n=t.instance,r=t.entityName,s=t.infoEntity;return i.createElement("div",{className:""},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement(o.a,{workFlowSpaceList:this.props.workFlowSpaceList,inspectionOntology:"",instance:this.props.instance,buildingName:e,tabName:s,showComponentButton:"Equip"==s,itemName:r,showAuditTypes:!0,showBIMButtons:!0}))),i.createElement("div",{className:"row"},i.createElement(a.default,{buildingName:e,instance:n,asset:r}))))},e}(i.Component);e.default=p}});