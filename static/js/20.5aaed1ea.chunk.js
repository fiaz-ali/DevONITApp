webpackJsonp([20],{1011:function(e,t,n){"use strict";t.g=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(i.f)(e,i.a.TICKETS.AddNewTicket,s.b.TICKET).then(function(){Object(a.b)("Ticket Added")}).catch(function(e){Object(a.a)("Error occured while saving Ticket.")})];case 1:return[2,t.sent()]}})})},t.h=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ticketType:e},i.a.TICKETS.AddNewTicketType,s.b.TICKET).then(function(){Object(a.b)("Ticket Type Added")}).catch(function(e){Object(a.a)("Error occured while saving Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.b=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ticketTypeOntology:e},i.a.TICKETS.DeleteTicketType,s.b.TICKET).then(function(){Object(a.b)("Ticket Type Deleted")}).catch(function(e){Object(a.a)("Error occured while deleting Ticket Type.")})];case 1:return[2,t.sent()]}})})},t.f=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Object(i.e)({},i.a.TICKETS.GetAllTickets,s.b.TICKET,!0)];case 1:return[2,e.sent()]}})})},t.d=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,Object(i.e)({},i.a.TICKETS.GetTicketTypes,s.b.TICKET)];case 1:return[2,e.sent()]}})})},t.c=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({ticketTypeOntology:e},i.a.TICKETS.GetTicketTypeUsingOntology,s.b.TICKET,!0)];case 1:return[2,t.sent()]}})})},t.e=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(i.e)({ticketOntology:e},i.a.TICKETS.GetTicketUsingOntology,s.b.TICKET,!0)];case 1:return[2,t.sent()]}})})},t.a=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,Object(i.f)({ticketOntology:e},i.a.TICKETS.DeleteTicket,s.b.TICKET).then(function(){Object(a.b)("Ticket Deleted")}).catch(function(e){Object(a.a)("Error occured while deleting Ticket.")})];case 1:return[2,t.sent()]}})})};var a=n(30),s=n(20),i=n(12),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}},2113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s=(n.n(a),n(30)),i=n(101),o=n(935),c=n(20),r=n(10),l=n(648),u=n(624),d=n(611),m=n(775),p=n(606),g=n(29),f=n(710),b=n(612),h=n(11),v=n(103),y=n(642),T=n(1011),k=n(697),O=n(625),E=n(670),w=n(2114),N=n(614),j=n(52),S=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),A=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},D=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},C="",_="",x="",P="",L=function(e){function t(t){var n=e.call(this,t)||this;return n.state={building:"Select Building",ticketType:"",_buildings:[],_floors:[],_spaces:[],_assets:[],_components:[],_ticketType:[],ticketObject:{customerName:"",timeStamp:"",customerEmail:"",ticketTypeOntology:"",componentOntology:"",enteredBy:"",acutalFindFix:"",assetOntology:"",buildingOntology:"",ticketIssue:"",criticalityOntology:"",facilatatorOntology:"",floorOntology:"",imageUrl:"",ontology:"",spaceOntology:"",suggestionFix:""},phaseTemplateDetailList:[],emailsList:[],peopleList:[],actions:[],isTicketSaved:!1,departments:[]},n.ticketTypeChangeHandler=n.ticketTypeChangeHandler.bind(n),n.buildingChangeHandler=n.buildingChangeHandler.bind(n),n.getFloorBasesOnBuildingHandler=n.getFloorBasesOnBuildingHandler.bind(n),n.floorChangeHandler=n.floorChangeHandler.bind(n),n.getSpacesBasedOnFloorHandler=n.getSpacesBasedOnFloorHandler.bind(n),n.spaceChangeHandler=n.spaceChangeHandler.bind(n),n.getAssetsHandler=n.getAssetsHandler.bind(n),n.assetChangeHandler=n.assetChangeHandler.bind(n),n.getComponentsHandler=n.getComponentsHandler.bind(n),n.checkingValidations=n.checkingValidations.bind(n),n.saveTicketHandler=n.saveTicketHandler.bind(n),n.handleActivateStage=n.handleActivateStage.bind(n),n._fetchDepartmentOrGroup=n._fetchDepartmentOrGroup.bind(n),n.handleAssignTo=n.handleAssignTo.bind(n),n}return S(t,e),t.prototype.componentDidMount=function(){return A(this,void 0,void 0,function(){var e,t,n,a;return D(this,function(s){switch(s.label){case 0:return this._fetchBuildings(),this._fetchTicketTypes(),this._fetchPhaseTemplateDetails(),this._fetchContact(),this._fetchDepartmentOrGroup(),this.props.ticketOntology?[4,Object(T.e)(this.props.ticketOntology)]:[3,5];case 1:return e=s.sent(),[4,Object(b.c)(e.floorOntology,e.buildingOntology)];case 2:return t=s.sent(),[4,Object(l.g)(e.buildingOntology,c.b.POINT,e.floorOntology,e.spaceOntology)];case 3:return n=s.sent(),[4,Object(p.o)(e.buildingOntology,e.assetOntology)];case 4:return a=s.sent(),this.setState({ticketObject:e,_spaces:t,_assets:n,_components:a}),[3,6];case 5:this.setState({building:this.props.buildingName}),s.label=6;case 6:return[2]}})})},t.prototype.componentWillUnmount=function(){return A(this,void 0,void 0,function(){return D(this,function(e){return this.setState({ticketObject:Object(),_spaces:[],_assets:[],_components:[]}),[2]})})},t.prototype._fetchBuildings=function(){return A(this,void 0,void 0,function(){var e=this;return D(this,function(t){switch(t.label){case 0:return[4,Object(u.d)().then(function(t){e.setState({_buildings:t}),e.buildingChangeHandler(t[0].building.value)}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchTicketTypes=function(){return A(this,void 0,void 0,function(){var e=this;return D(this,function(t){switch(t.label){case 0:return[4,Object(T.d)().then(function(t){e.setState({_ticketType:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchPhaseTemplateDetails=function(){return A(this,void 0,void 0,function(){var e=this;return D(this,function(t){switch(t.label){case 0:return[4,Object(k.j)(this.props.buildingName).then(function(t){e.setState({phaseTemplateDetailList:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype._fetchContact=function(){return A(this,void 0,void 0,function(){var e;return D(this,function(t){switch(t.label){case 0:return[4,Object(d.n)(this.props.buildingName)];case 1:return(e=t.sent())&&this.setState({peopleList:e}),[2]}})})},t.prototype._fetchDepartmentOrGroup=function(){return A(this,void 0,void 0,function(){var e=this;return D(this,function(t){switch(t.label){case 0:return[4,Object(d.e)().then(function(t){t&&t.length>0&&e.setState({departments:t})}).catch(function(e){return e})];case 1:return t.sent(),[2]}})})},t.prototype.ticketTypeChangeHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){return t=this.state.ticketObject,this.setState({ticketType:e}),t.ticketTypeOntology=e,[2]})})},t.prototype.buildingChangeHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){return(t=this.state.ticketObject).buildingOntology=e,this.setState({ticketObject:t,building:e}),this.getFloorBasesOnBuildingHandler(e),[2]})})},t.prototype.getFloorBasesOnBuildingHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return[4,Object(O.f)(e)];case 1:return t=n.sent(),this.setState({_floors:t,_spaces:[],_assets:[],_components:[]}),[2]}})})},t.prototype.floorChangeHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){return(t=this.state.ticketObject).floorOntology=e,this.setState({ticketObject:t}),this.getSpacesBasedOnFloorHandler(e),[2]})})},t.prototype.getSpacesBasedOnFloorHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return[4,Object(b.c)(e,this.state.building)];case 1:return t=n.sent(),this.setState({_spaces:t,_assets:[],_components:[]}),[2]}})})},t.prototype.spaceChangeHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){return(t=this.state.ticketObject).spaceOntology=e,this.setState({ticketObject:t}),this.getAssetsHandler(e),[2]})})},t.prototype.getAssetsHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return""==e?(this.setState({_assets:[],_components:[]}),[2]):[4,Object(l.g)(this.state.building,c.b.POINT,this.state.ticketObject.floorOntology,e)];case 1:return t=n.sent(),this.setState({_assets:t,_components:[]}),[2]}})})},t.prototype.assetChangeHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){return(t=this.state.ticketObject).assetOntology=e,this.setState({ticketObject:t}),this.getComponentsHandler(e),[2]})})},t.prototype.getComponentsHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return[4,Object(p.o)(this.state.building,e)];case 1:return t=n.sent(),this.setState({_components:t}),[2]}})})},t.prototype.componentChangeHandler=function(e){return A(this,void 0,void 0,function(){var t;return D(this,function(n){return(t=this.state.ticketObject).componentOntology=e,this.setState({ticketObject:t}),[2]})})},t.prototype.checkingValidations=function(e,t){document.getElementById(e).classList.add("text-success"),document.getElementById(t).classList.add("is-valid")},t.prototype.saveTicketHandler=function(){return A(this,void 0,void 0,function(){var e,t,n,a,s,o,c,l,u,d,p=this;return D(this,function(b){switch(b.label){case 0:return Object(i.a)(!0),e=this.props.buildingName,t=this.state.ticketObject,document.getElementById("btnSave").setAttribute("disabled","disabled"),t.ontology=(new Date).Ticket_Number(),n=JSON.parse(h.a.getItem("user")),t.enteredBy=n.contact,a=t.ticketTypeOntology,[4,Object(T.c)(a)];case 1:s=b.sent(),o=s.split(","),c=function(n){var a,s,i,c,u,d,b,h,v,T,k,O;return D(this,function(E){switch(E.label){case 0:for(a=l.state.phaseTemplateDetailList.find(function(e){return e.ontology===o[n]}),s="Dynamic"==a.behaviour,i=[],c=0;c<a.stageTemplates.length;c++)(i=a.stageTemplates[c].subTasks.map(function(e){return e.ontology})).push.apply(i,i);return[4,Object(f.c)(l.props.buildingName,i)];case 1:u=E.sent(),(d=Object()).ontology=Object(g.o)(7),_=_+d.ontology+",",d.description=a.description,d.module=a.module,d.status="Planned",d.phaseID=Object(g.m)(7).toString(),d.templateID=a.templateID,d.templateType=a.templateType,d.stageTemplateOnology=[],d.ticketOntology=t.ontology,d.stages=[],b=[],h=[],v=function(n){var i,o,c,p,f,v,y,T,k,O,E;return D(this,function(w){switch(w.label){case 0:for(i=a.stageTemplates[n],o=Object(),c=Object(g.o)(7),o.task=c,p="",p+=Object(g.n)(),o.color=p,x=x+c+",",o.wfOntology=d.ontology,o.taskNumber=Object(g.m)(7).toString(),o.description=i.description,o.action=i.action,o.enteredBy=i.enteredBy,o.enteredByName=i.enteredByName,o.assignedTo=i.assignedTo,i.assignedDepartment&&""!=i.assignedDepartment&&(f=l.state.peopleList&&l.state.peopleList.find(function(e){return Object(r.g)(e.departmentsAndGroups).includes(i.assignedDepartment)&&Object(r.g)(e.assignedTo).includes(i.building)&&"2"==Object(r.g)(e.role)}),o.assignedTo=void 0!==f?[{label:Object(r.g)(f.name),value:Object(r.g)(f.contact)}]:i.assignedTo),o.hasChat=!0,o.entryTimeStamp=i.entryTimeStamp,o.criticality=i.criticality,o.equipSubject=i.equipSubject,o.equipRdfsLabel=i.equipRdfsLabel,o.spaceSubject=i.spaceSubject,o.spaceRdfsLabel=i.spaceRdfsLabel,o.floor=i.floor,o.building=i.building,o.workOrder=i.workOrder,o.status="Planned",o.acknowledged=!0,o.archived=!1,o.startTime="",o.note="",o.isSequence=!0,o.QRTag=i.QRTag,o.isQRTask=i.isQRTask,o.subTasks=[],o.workflowType=i.workflowType,o.redirectionLink=i.redirectionLink,o.isStage=!0,o.isActivated=!1,o.estimatedStartTime=new Date,v=0,y=0;y<i.subTasks.length;y++)T=i.subTasks[y],v+=parseInt(T.duration);k=o.subTasks.length>0?new Date(o.subTasks[0].estimatedStartTime):new Date,o.estimatedEndTime=new Date(k.setHours(k.getHours()+v)),o.ticketOntology=t.ontology,o.subTasks=[],O=function(n){var a,c,l,f,v,y,T,k,O,E,w,N;return D(this,function(j){switch(j.label){case 0:return a=i.subTasks[n],(c=Object()).subTask=Object(g.o)(7),c.color=p,P=P+c.subTask+",",[4,Object(m.d)(e,["TaskTemplate"],[a.ontology])];case 1:if((l=j.sent())&&l.length>0&&l[0].entityOntology)for(f=0;f<l.length;f++)v=Object(),y=l[f],v.docOntology=c.subTask+Object(g.s)()+f,v.building=Object(r.g)(y.building),v.documentType=Object(r.g)(y.documentType),v.enteredBy=Object(r.g)(y.enteredBy),v.entityOntology=[{label:c.subTask,value:c.subTask}],v.entityType="Task",v.entryTimeStamp=(new Date).toString(),v.rdfsLabel=Object(r.g)(y.rdfsLabel),v.s3FileName=Object(r.g)(y.s3FileName),h.push(v);for(c.taskNumber=Object(g.m)(7).toString(),c.description=a.description,c.action=a.action,c.enteredBy=a.enteredBy,c.enteredByName=a.enteredByName,c.assignedTo=a.assignedTo,c.assignedDepartment=a.assignedDepartment,c.hasChat=!0,c.entryTimeStamp=a.entryTimeStamp,c.criticality=a.criticality,c.equipSubject=o.equipSubject,c.equipRdfsLabel=o.equipRdfsLabel,c.spaceSubject=o.spaceSubject,c.spaceRdfsLabel=o.spaceRdfsLabel,c.building=o.building,c.workOrder=a.workOrder,c.status="Planned",c.acknowledged=!0,c.archived=!1,c.index=a.index,c.parentTask=o.task,c.note=a.note,c.relatedLink=a.relatedLink,c.duration=a.duration,c.durationUnit=a.durationUnit,c.workerDuration=a.workerDuration,c.workerDurationUnit=a.workerDurationUnit,c.fileName=a.fileName,c.oldFileName=a.oldFileName,c.startTime="",c.workType=a.workType,c.checklistID=a.checklistID,c.isQRTask=a.isQRTask,c.QRTag=a.QRTag,c.notifyViaEmail=a.notifyViaEmail,c.notifyViaSMS=a.notifyViaSMS,c.estimatedStartTime=a.estimatedStartTime,c.estimatedEndTime=a.estimatedEndTime,c.workflowType=a.workflowType,c.redirectionLink=a.redirectionLink,c.isStage=!0,c.isActivated=!1,c.acknowledged=!0,c.archived=!1,c.ticketOntology=t.ontology,c.wfOntology=d.ontology,o.subTasks.push(c),T=u.filter(function(e){return e.taskOntology==a.ontology}),k=0;k<T.length;k++)O=T[k],(E=Object()).ontology=Object(g.o)(10),E.directive=O.directive,E.directiveType=O.directiveType,E.floorOntology=s?t.floorOntology:O.floorOntology,E.spaceOntology=s?t.spaceOntology:O.spaceOntology,E.componentOntology=s?t.componentOntology:O.componentOntology,E.assetOntology=s?t.assetOntology:O.assetOntology,E.pointOntology=s?"":O.pointOntology,E.unit=O.unit,E.taskOntology=c.subTask,E.taskDescription=O.taskDescription,E.isTemplate=!1,E.objectTemplateReferenceID=O.ontology,E.isQrCodeVerified=!1,E.qrCode=O.qrCode,E.visibleObjectFormActions=[],b.push(E);for(w=function(e){var t=b[e],n=u.find(function(e){return e.ontology==t.objectTemplateReferenceID});if(n.visibleObjectFormActions&&n.visibleObjectFormActions.length>0)for(var a=function(e){var a=n.visibleObjectFormActions[e];if(""!=a){var s=u.find(function(e){return e.ontology==a}),i=b.find(function(e){return e.objectTemplateReferenceID==s.ontology});-1==t.visibleObjectFormActions.findIndex(function(e){return e==i.ontology})&&t.visibleObjectFormActions.push(i.ontology)}},s=0;s<n.visibleObjectFormActions.length;s++)a(s)},N=0;N<b.length;N++)w(N);return[2]}})},E=0,w.label=1;case 1:return E<i.subTasks.length?[5,O(E)]:[3,4];case 2:w.sent(),w.label=3;case 3:return E++,[3,1];case 4:return d&&d.stages&&d.stages.push(o),[2]}})},T=0,E.label=2;case 2:return T<a.stageTemplates.length?[5,v(T)]:[3,5];case 3:E.sent(),E.label=4;case 4:return T++,[3,2];case 5:return k=Object(y.d)(new Date,d),h.length>0&&h.map(function(e){Object(m.f)(e)}),[4,Object(f.d)(e,b)];case 6:return E.sent(),[4,Object(y.e)(e,k,!1,!0).then(function(e){return A(p,void 0,void 0,function(){return D(this,function(e){return[2]})})}).catch(function(e){return e})];case 7:return E.sent(),a.stageTemplateOnology&&a.stageTemplateOnology.length>0?(O=a.uses?a.uses+1:1,[4,Object(y.f)(e,a.ontology,O.toString()).then(function(e){}).catch(function(e){return e})]):[3,9];case 8:E.sent(),E.label=9;case 9:return[2]}})},l=this,u=0,b.label=2;case 2:return u<o.length?[5,c(u)]:[3,5];case 3:b.sent(),b.label=4;case 4:return u++,[3,2];case 5:return _=_.substr(0,_.length-1),x=x.substr(0,_.length-1),P=P.substr(0,_.length-1),t.deployedWFOntology=_,t.stageOntology=x,t.subTasksOntology=P,""==t.customerEmail&&((d=Object()).subject="Ticket Creation Notification",d.to=t.customerEmail,d.text="A new ticket having case # "+t.ontology+" has been created.",Object(j.a)(d)),[4,Object(T.g)(t)];case 6:return b.sent(),Object(i.a)(!1),this.setState({isTicketSaved:!0}),[2]}})})},t.prototype.handleAssignTo=function(e){var t=this.state.ticketObject;t.notifyPeople=e,this.setState({ticketObject:t})},t.prototype.handleActivateStage=function(e,t,n){return A(this,void 0,void 0,function(){var a,o,c,l,u,d;return D(this,function(m){switch(m.label){case 0:if(a=this.props.buildingName,o=this.state.peopleList,c=this.state.emailsList,e.startTime=n&&null!=n?0==n?new Date(Date.now()).toString():"":new Date(Date.now()).toString(),e.startTaskCondition=n&&null!=n?0==n?"daytime":"completionof":"daytime",e.conditionalTasks=n&&null!=n?0==n?[]:[{label:C,value:C}]:[],e.status=n&&null!=n?0==n?"Assigned":"Pending":"Assigned",e.acknowledged=!0,e.isSequence=!0,e.archived=!1,e.isDeleted=!1,e.isActivated=!0,e.workflowType=e.workflowType?e.workflowType:t,e.assignedTo&&e.assignedTo.length>0)for(l=function(t){if(e.assignedTo[t]&&e.assignedTo[t].value){var n=o&&o.find(function(n){return Object(r.g)(n.contact)==e.assignedTo[t].value});if(c||(c=[]),n&&n.email)c.find(function(e){return e==Object(r.g)(n.email)})||c.push(Object(r.g)(n.email))}},d=0;d<e.assignedTo.length;d++)l(d);for(e.hasChat=!0,u=function(a){if(e.subTasks[a].workflowType=e.workflowType?e.workflowType:t,e.subTasks[a].isActivated=!0,e.subTasks[a].assignedTo&&e.subTasks[a].assignedTo.length>0){var s=o&&o.find(function(t){return Object(r.g)(t.contact)==e.subTasks[a].assignedTo});if(c||(c=[]),s&&s.email)c.find(function(e){return e==Object(r.g)(s.email)})||c.push(Object(r.g)(s.email))}e.subTasks[a].startTime=n&&null!=n?0==n&&0==a?new Date(Date.now()).toString():"":0==a?new Date(Date.now()).toString():"",e.subTasks[a].status=n&&null!=n?0==n&&0==a?"Assigned":"Pending":0==a?"Assigned":"Pending",e.subTasks[a].acknowledged=!0,e.subTasks[a].isDeleted=!1,e.subTasks[a].startTaskCondition=n&&null!=n?0==n&&0==a?"daytime":"completionof":0==a?"daytime":"completionof",e.subTasks[a].conditionalTasks=n&&null!=n?0==n&&0==a?[]:n>0&&0==a?[{label:C,value:C}]:[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:a>0?[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:[],C=e.task},d=0;d<e.subTasks.length;d++)u(d);return Object(i.a)(!0),"Contract"!=t?[3,2]:[4,Object(v.A)(c,["read"],e.contractFileName).then(function(t){if(t.link){var n=t.link[0].link.webUrl;e.contractFileUrl=n;for(var o=0;o<e.subTasks.length;o++){e.subTasks[o].contractFileUrl=n}Object(v.y)(a,e,!0),Object(y.g)("","Assigned",!0).then(function(){}),Object(i.a)(!1)}else console.log(t),Object(s.a)("Error occured while requesting permissions for Contract File.")})];case 1:return m.sent(),[3,5];case 2:return[4,Object(v.y)(a,e,!0)];case 3:return m.sent(),[4,Object(y.g)("","Assigned",!0).then(function(){})];case 4:m.sent(),Object(i.a)(!1),m.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,s=t.buildingName,i=t.isView,l=this.state,u=l._buildings,d=l._floors,m=l._spaces,p=l._assets,f=l._components,b=l._ticketType,h=l.ticketObject,v=l.departments,y=l.peopleList,T=this.props.isView?"none":"block",k=this.state.isTicketSaved?"block":"none",O=y&&y.length>0?y.map(function(e){return{value:e.contact.value,label:e.name?e.name.value+" ("+c.e[e.role.value]+")":e.contact.value+" ("+e.qualifications.value+")"}}).filter(function(e){return e.value!=(h.notifyPeople&&h.notifyPeople.find(function(t){return t.value==e.value})?h.notifyPeople.find(function(t){return t.value==e.value}).value:"")}):[],j=""!==h.ticketTypeOntology&&""!==h.ticketIssue,S=h.deployedWFOntology&&h.deployedWFOntology.split(",");return a.createElement(a.Fragment,null,a.createElement("div",{className:""},a.createElement("div",{className:""},a.createElement("div",{className:""},a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid small"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2 no-margin"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row no-margin p-2"},a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"ONIT Case Type: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{name:"ticketType",id:"ticketType",className:"form-control",value:h.ticketTypeOntology,disabled:i,onChange:function(t){e.ticketTypeChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Case Type "),b&&b.length>0&&b.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology},e.ticketType," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{id:"issueLabel",className:"col-md-3 py-2 px-0 headingText"}," Describe the Issue:"),a.createElement("div",{className:"col-md-9 no-padding "},a.createElement("textarea",{id:"issue",rows:3,className:"form-control",value:h.ticketIssue,disabled:i,onChange:function(t){h.ticketIssue=t.target.value,e.setState({ticketObject:h})}}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Building: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",name:"building",disabled:i,value:h.buildingOntology,id:"building",onChange:function(t){e.buildingChangeHandler(t.target.value)}},u&&u.length>0&&u.map(function(e,t){return a.createElement("option",{key:t,value:Object(r.g)(e.building)},Object(r.g)(e.rdfsLabel)," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Floor: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"floor",name:"floor",disabled:i,value:h.floorOntology,onChange:function(t){e.floorChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Floor"),d&&d.length>0&&d.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Space: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"space",name:"space",value:h.spaceOntology,disabled:i,onChange:function(t){e.spaceChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Space"),m&&m.length>0&&m.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Asset: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"asset",name:"asset",value:h.assetOntology,disabled:i,onChange:function(t){e.assetChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Assets"),p&&p.length>0&&p.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.ontology),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Component: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",id:"component",name:"component",value:h.componentOntology,disabled:i,onChange:function(t){e.componentChangeHandler(t.target.value)}},a.createElement("option",{value:""},"Select Component"),f&&f.length>0&&f.map(function(e,t){return a.createElement("option",{value:Object(r.g)(e.name),key:t},e.rdfsLabel.value," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Concern: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{name:"ticketType",id:"ticketType",className:"form-control",value:h.criticalityOntology,disabled:i,onChange:function(t){h.criticalityOntology=t.target.value,e.setState({ticketObject:h})}},a.createElement("option",{value:""},"Select Concern"),o.c&&o.c.length>0&&o.c.map(function(e,t){return a.createElement("option",{key:t,value:e.id}," ",e.id," - ",e.name," ")})))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Suggest Fix: "),a.createElement("div",{className:"col-md-9 no-padding "},a.createElement("textarea",{rows:4,className:"form-control",value:h.suggestionFix,disabled:i,onChange:function(t){h.suggestionFix=t.target.value,e.setState({ticketObject:h})}})))))))),a.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2 no-margin"},a.createElement("div",{className:"container-fluid p-1"},a.createElement("div",{className:"content p-1"},a.createElement("div",{className:"row no-margin p-2"},a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Customer Name: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("input",{className:"form-control",name:"customerName",id:"customerName",type:"text",value:h.customerName,disabled:i,onChange:function(t){h.customerName=t.target.value,e.setState({ticketObject:h})}}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Customer Email: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("input",{className:"form-control",name:"customerEmail",id:"customerEmail",value:h.customerEmail,disabled:i,onChange:function(t){h.customerEmail=t.target.value,e.setState({ticketObject:h})}}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Notify People: "),a.createElement("div",{className:"col-md-9 no-padding"},h.notifyPeople&&h.notifyPeople.length>0?a.createElement(N.a,{id:"assignTo",isMulti:!0,closeMenuOnSelect:!1,isDisabled:i,value:h.notifyPeople,onChange:this.handleAssignTo,placeholder:"Select Person(s)",options:O}):a.createElement(N.a,{id:"assignTo",isMulti:!0,closeMenuOnSelect:!1,isDisabled:i,value:[],onChange:this.handleAssignTo,placeholder:"Select Person(s)",options:O}))),a.createElement("div",{className:"col-md-12 px-0 py-2"},a.createElement("div",{className:"col-md-3 py-2 px-0  headingText"},"Department Assigned: "),a.createElement("div",{className:"col-md-9 no-padding"},a.createElement("select",{className:"form-control",name:"department",id:"department",value:h.departmentAssigned,disabled:i,onChange:function(t){h.departmentAssigned=t.target.value,e.setState({ticketObject:h})}},a.createElement("option",{value:""},"Select Department"),v&&v.length>0&&v.map(function(e,t){return a.createElement("option",{key:t,value:e},e)}))))))))),a.createElement("div",{style:{display:T},className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2"},a.createElement("div",{className:"row py-0 no-margin p-2"},a.createElement(E.a,{showUploader:!0,buildingName:this.props.buildingName,assetOntology:"equipment.equipmentName",entityType:"Tickets"})))),S&&a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding"},a.createElement("div",{className:"card p-2"},a.createElement("h3",{className:"text-center"},"WorkFlow Status"),S&&S.map(function(t,n){return a.createElement("div",{key:n,className:"card p-2"},a.createElement("div",{className:"row py-0 no-margin p-2"},a.createElement(w.a,{instance:e.props.instance,buildingName:e.props.buildingName,ontology:t})))}))),a.createElement("br",null),a.createElement("div",{className:"col-md-12 inline-block"},a.createElement("div",{className:"form-inline"},a.createElement("button",{disabled:!j,style:{display:T},id:"btnSave",className:"btn btn-primary btn-fill",type:"button",onClick:function(){return A(e,void 0,void 0,function(){return D(this,function(e){return this.saveTicketHandler(),[2]})})}},a.createElement("i",{className:"fa fa-save"}),"Save"),h.deployedWFOntology&&S.map(function(t,i){return a.createElement("button",{key:i,style:{display:k},id:"btnSave",className:"btn btn-primary btn-fill",type:"button",onClick:function(){return A(e,void 0,void 0,function(){return D(this,function(e){return window.open("http://"+Object(g.k)()+"/#"+n+"/"+s+"/Deploy/WorkflowView/"+t,"_blank"),[2]})})}},a.createElement("i",{className:"fa fa-location-arrow"}),"Navigate to Deployed WF")})),a.createElement("button",{className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=n+"/"+s+"/Tickets"}},a.createElement("i",{className:"fa fa-angle-double-left"}),"  Back to ONIT Cases")))))))))},t}(a.Component);t.default=L},2114:function(e,t,n){"use strict";var a,s=n(3),i=(n.n(s),n(101)),o=n(642),c=n(10),r=n(30),l=n(103),u=n(611),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},g="",f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={phase:Object(),emailsList:[],peopleList:[]},a=n,n.getPhaseDetail=n.getPhaseDetail.bind(n),n.handleActivateStage=n.handleActivateStage.bind(n),n.handleActivatePhase=n.handleActivatePhase.bind(n),n.validatePhaseAssignments=n.validatePhaseAssignments.bind(n),n.validateStageAssignments=n.validateStageAssignments.bind(n),n._fetchContact=n._fetchContact.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return this.props.buildingName?(Object(i.a)(!0),[4,this._fetchContact()]):[3,4];case 1:return e.sent(),this.props.ontology?[4,this.getPhaseDetail()]:[3,3];case 2:e.sent(),e.label=3;case 3:Object(i.a)(!1),e.label=4;case 4:return[2]}})})},t.prototype._fetchContact=function(){return m(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,Object(u.n)(this.props.buildingName)];case 1:return(e=t.sent())&&a.setState({peopleList:e}),[2]}})})},t.prototype.getPhaseDetail=function(){return m(this,void 0,void 0,function(){var e=this;return p(this,function(t){switch(t.label){case 0:return[4,Object(o.b)(this.props.buildingName,this.props.ontology).then(function(t){if(t.length){if("Completed"!==t[0].status)t[0].stages.every(function(e){return"Completed"==e.status})&&Object(o.g)(t[0].ontology,"Completed",!0);e.setState({phase:t[0]})}})];case 1:return t.sent(),[2]}})})},t.prototype.handleActivatePhase=function(e){return m(this,void 0,void 0,function(){var t,n;return p(this,function(a){switch(a.label){case 0:t=0,a.label=1;case 1:return t<e.stages.length?(n=e.stages[t],[4,this.handleActivateStage(n,e.templateType,t)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},t.prototype.handleActivateStage=function(e,t,n){return m(this,void 0,void 0,function(){var a,s,r,u,d,m,f=this;return p(this,function(p){switch(p.label){case 0:if(a=this.props.buildingName,s=this.state.peopleList,r=this.state.emailsList,e.startTime=n&&null!=n?0==n?new Date(Date.now()).toString():"":new Date(Date.now()).toString(),e.startTaskCondition=n&&null!=n?0==n?"daytime":"completionof":"daytime",e.conditionalTasks=n&&null!=n?0==n?[]:[{label:g,value:g}]:[],e.status=n&&null!=n?0==n?"Assigned":"Pending":"Assigned",e.acknowledged=!0,e.isSequence=!0,e.archived=!1,e.isDeleted=!1,e.isActivated=!0,e.workflowType=e.workflowType?e.workflowType:t,e.assignedTo&&e.assignedTo.length>0)for(u=function(t){if(e.assignedTo[t]&&e.assignedTo[t].value){var n=s&&s.find(function(n){return Object(c.g)(n.contact)==e.assignedTo[t].value});if(r||(r=[]),n&&n.email)r.find(function(e){return e==Object(c.g)(n.email)})||r.push(Object(c.g)(n.email))}},m=0;m<e.assignedTo.length;m++)u(m);for(e.hasChat=!0,d=function(a){if(e.subTasks[a].workflowType=e.workflowType?e.workflowType:t,e.subTasks[a].isActivated=!0,e.subTasks[a].assignedTo&&e.subTasks[a].assignedTo.length>0){var i=s&&s.find(function(t){return Object(c.g)(t.contact)==e.subTasks[a].assignedTo});if(r||(r=[]),i&&i.email)r.find(function(e){return e==Object(c.g)(i.email)})||r.push(Object(c.g)(i.email))}e.subTasks[a].startTime=n&&null!=n?0==n&&0==a?new Date(Date.now()).toString():"":0==a?new Date(Date.now()).toString():"",e.subTasks[a].status=n&&null!=n?0==n&&0==a?"Assigned":"Pending":0==a?"Assigned":"Pending",e.subTasks[a].acknowledged=!0,e.subTasks[a].isDeleted=!1,e.subTasks[a].startTaskCondition=n&&null!=n?0==n&&0==a?"daytime":"completionof":0==a?"daytime":"completionof",e.subTasks[a].conditionalTasks=n&&null!=n?0==n&&0==a?[]:n>0&&0==a?[{label:g,value:g}]:[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:a>0?[{label:e.subTasks[a-1].subTask,value:e.subTasks[a-1].subTask}]:[],g=e.task},m=0;m<e.subTasks.length;m++)d(m);return Object(i.a)(!0),[4,Object(l.y)(a,e,!0)];case 1:return p.sent(),[4,Object(o.g)("","Assigned",!0).then(function(){f.getPhaseDetail()})];case 2:return p.sent(),Object(i.a)(!1),[2]}})})},t.prototype.validatePhaseAssignments=function(e){var t=!0;if(e.stages&&e.stages.length>0)for(var n=0;n<e.stages.length;n++){var a=e.stages[n];if(a.assignedTo&&a.assignedTo.length>0){if(-1!=a.subTasks.findIndex(function(e){return""==e.assignedTo})){t=!1;break}t=!0}else t=!1}t?document.getElementById("btnActivatePhase").click():Object(r.a)("Not all Tasks have assignments, please assign all tasks.")},t.prototype.validateStageAssignments=function(e,t){var n=!0;e.assignedTo&&e.assignedTo.length>0?n=-1==e.subTasks.findIndex(function(e){return""==e.assignedTo}):n=!1;n?document.getElementById("btnActivateStage"+t).click():Object(r.a)("Not all Tasks have assignments, please assign all tasks.")},t.prototype.render=function(){var e=this.props.showGraphOnly,t=this.state.phase;return s.createElement("div",{className:e?"col-md-12":"content"},s.createElement("div",{className:e?"row padding-10":"container-fluid"},s.createElement("div",{className:"row"}),s.createElement("br",null),s.createElement("div",null,s.createElement("div",{className:"content"},s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12 img-thumbnail",style:{background:"#b8d8f9",color:"black"}},s.createElement("label",null," ",s.createElement("h5",{style:{color:"black",marginBottom:"9px"}},t&&t.description),"  "),s.createElement("span",{style:{color:"black"},className:"pull-right"},"Workflow ID: ",t.phaseID))),t&&t.stages&&t.stages.map(function(e,t){return s.createElement("div",{key:t,className:"row"},s.createElement("div",{className:"col-md-12 row.match-my-cols"},s.createElement("div",{className:"col-md-3 col-sm-3 col-xs-4"},s.createElement("div",{className:"card no-margin left-side-card",id:"discriptionCard"},s.createElement("div",{className:"content no-paddingLR"},s.createElement("div",{className:"container-fluid no-paddingLR"},s.createElement("div",{className:"row no-paddingLR"},s.createElement("div",{className:" "},s.createElement("div",{className:"timeline-item-content left-side-card"},s.createElement("h4",{style:{marginTop:"auto",marginBottom:"auto"}},"Stage ",t+1),s.createElement("label",{className:"headingText"},e.description),e.taskNumber&&s.createElement("label",{className:"small"},"Stage ID: "+e.taskNumber)))))))),e.task&&s.createElement("div",{className:"col-md-9 col-sm-9 col-xs-8"},s.createElement("div",{className:"card no-margin right-side-card",id:"taskCard"},s.createElement("div",{className:"content"},s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"timeline-item"},s.createElement("div",{className:"timeline-item-content no-padding"},s.createElement("span",{className:"no-margin"},s.createElement("ul",null,e&&e.subTasks&&e.subTasks.map(function(e,t){return s.createElement("div",{key:t},e.description&&s.createElement(s.Fragment,null,s.createElement("li",null,s.createElement("label",{title:(e.assignedTo?"Assigned to : "+e.assignedTo:e.assignedTo?"Assigned to : "+e.assignedTo+"  ":"No Assignment")+" "},e.description," \xa0 \xa0 ","Pending"!=e.status&&s.createElement("div",{className:"badge ml-2 stage-task-"+e.status,style:{fontSize:"85%"}},e.status),e.checklistID&&s.createElement("a",{style:{color:"#174b54"},"data-toggle":"collapse","data-target":"#checklist"+t},s.createElement("i",{className:"fa fa-check"}))))))}))),s.createElement("span",{className:"circle stage-"+e.status,title:e&&e.status,style:{top:"50%"}}))))))))),!e.equipSubject&&s.createElement("div",{className:"col-md-9 col-sm-9 col-xs-8"},s.createElement("div",{className:"card no-margin right-side-card",id:"taskCard"},s.createElement("div",{className:"content"},s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"row"},s.createElement("label",{style:{color:"red"}}," STAGE MIGHT HAVE DELETED"))))))))}))))))},t}(s.Component);t.a=f},642:function(e,t,n){"use strict";t.f=function(e,t,n){return r(this,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({buildingName:e,ontology:t,uses:n},a.a.TASKTEMPLATE.UPDATESTAGETEMPLATEUSES,s.b.TASK).then(function(){Object(i.b)('Stage Template Uses "Updated"  Successfully.')}).catch(function(e){Object(i.a)("Error occured while saving Stage Template Uses.")})];case 1:return[2,o.sent()]}})})},t.e=function(e,t,n,o){return r(this,void 0,void 0,function(){return l(this,function(c){switch(c.label){case 0:return[4,Object(a.f)({buildingName:e,model:t,isEdit:n,saveStages:o},a.a.TASKTEMPLATE.SAVEPHASE,s.b.TASK).then(function(){Object(i.b)("Workflow "+(n?"Updated":"Added")+" Successfully.")}).catch(function(e){Object(i.a)("Error occured while saving Workflow.")})];case 1:return[2,c.sent()]}})})},t.b=function(e,t,n){void 0===n&&(n=!0);return r(this,void 0,void 0,function(){return l(this,function(i){switch(i.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASEDETAILLIST,s.b.TASK,n)];case 1:return[2,i.sent()]}})})},t.c=function(e,t,n){void 0===n&&(n=!0);return r(this,void 0,void 0,function(){return l(this,function(i){switch(i.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.TASKTEMPLATE.GETPHASETEMPLATEDETAIL,s.b.TASK,n)];case 1:return[2,i.sent()]}})})},t.g=function(e,t,n){return r(this,void 0,void 0,function(){return l(this,function(o){switch(o.label){case 0:return[4,Object(a.f)({taskID:e,status:t},a.a.TASKTEMPLATE.UPDATETASKORSTAGESTATUS,s.b.TASK).then(function(){n||Object(i.b)("Status Updated Successfully.")}).catch(function(e){Object(i.a)("Error occured while update Status.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t){return r(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,Object(a.e)({buildingName:e,ontology:t},a.a.DEPENDENCY.GETDEPENDENCY,s.b.TASK,!0)];case 1:return[2,n.sent()]}})})},t.d=function(e,t){var n=[];if(!(t.stages&&t.stages.length&&t.stages.length>0))return void Object(i.a)("Error finding Stages");for(var a=c({},t),s=0;s<a.stages.length;s++){for(var r=[],l=a.stages[s],u=0;u<l.subTasks.length;u++){var d=l.subTasks[u];if(!d.estimatedStartTime||void 0==d.estimatedStartTime)return void Object(i.a)("Not all Template Tasks have Estimate Start Time, To Normalise, provide dates first ");r.push(d.estimatedStartTime)}n.push(r)}for(var s=0;s<n.length;s++)for(var r=n[s],u=0;u<r.length;u++)if(0==s&&0==u)t.stages[s].estimatedStartTime=e,t.stages[s].subTasks[u].estimatedStartTime=e;else if(s>0&&0==u){var m=Object(o.g)(new Date(n[s-1][n[s-1].length-1]),new Date(n[s][u])),p=new Date(t.stages[s-1].subTasks[t.stages[s-1].subTasks.length-1].estimatedStartTime);p.setDate(new Date(t.stages[s-1].subTasks[t.stages[s-1].subTasks.length-1].estimatedStartTime).getDate()+m),t.stages[s].subTasks[u].estimatedStartTime=p,t.stages[s].estimatedStartTime=p}else{var m=Object(o.g)(new Date(n[s][u-1]),new Date(n[s][u])),p=new Date(t.stages[s].subTasks[u-1].estimatedStartTime);p.setDate(new Date(t.stages[s].subTasks[u-1].estimatedStartTime).getDate()+m),t.stages[s].subTasks[u].estimatedStartTime=p}return t};var a=n(12),s=n(20),i=n(30),o=n(29),c=this&&this.__assign||function(){return(c=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function o(e){try{r(a.next(e))}catch(e){i(e)}}function c(e){try{r(a.throw(e))}catch(e){i(e)}}function r(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,c)}r((a=a.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n,a,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(s=2&i[0]?a.return:i[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}}});