webpackJsonp([11,20,22,29,30,31,32,46,63,94],{1072:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=(n.n(a),n(779)),o=n(1489),r=n(679),i=n(116),s=n(701),c=n(656),m=n(10),u=n(31),d=n(653),p=n(23),h=n(1169),f=n(836),g=n(665),b=n(666),v=n(11),y=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),E=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},N=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={schedule:Object(),Moncon:Object(),intesisHome_Device:Object(),InsightInfo:Object(),building:!1,RelayBoardInfo:Object(),compressorADPDB:Object(),compressorDefrostState:n.props.compressorDefrostState?n.props.compressorDefrostState:"",compressorTemperature:n.props.compressorTemperature?n.props.compressorTemperature:"",computingDevice:Object(),showLogs:!1},n.update_Schedule=n.update_Schedule.bind(n),n.saveSchedule=n.saveSchedule.bind(n),n.fetchSchedule=n.fetchSchedule.bind(n),n.resetSchedule=n.resetSchedule.bind(n),n._fetchRelayBoardInfo=n._fetchRelayBoardInfo.bind(n),n.fetchSolutionsSchedule=n.fetchSolutionsSchedule.bind(n),n}return y(t,e),t.prototype.componentDidMount=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,o,i,s,m,d,p,h,g,b;return N(this,function(v){switch(v.label){case 0:return e=this.props,t=e.buildingName,n=e.InsightName,a=e.type,l=e.ControlName,o=e.isSolution,t&&a&&a.length>0?(i=!!(a&&a.length>0&&"Building"==a),s=Object(),[4,Object(c.t)(n,t)]):[3,12];case 1:return s=v.sent(),"CompressorControl"!=l?[3,3]:[4,Object(f.f)(s.computingDevice)];case 2:m=v.sent(),this.setState({computingDevice:m[0]}),v.label=3;case 3:return d=Object(),o?[4,this.fetchSolutionsSchedule()]:[3,5];case 4:return d=v.sent(),[3,7];case 5:return[4,this.fetchSchedule(i)];case 6:d=v.sent(),v.label=7;case 7:return p=s.monitoringControlDeviceType&&-1!=s.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),h=Object(),g=Object(),(b=localStorage.getItem(s.deviceID))&&b.length>0&&"undefined"!=b?p?(h=JSON.parse(b),[3,11]):[3,8]:[3,11];case 8:return s&&s.deviceName?[4,Object(r.B)(t,n).then(function(e){return!e||e&&e.error?(Object(u.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})]:[3,10];case 9:return g=v.sent(),[3,11];case 10:g=JSON.parse(b),v.label=11;case 11:"CompressorControl"==l&&this.fetchADPValues(),this.setState({Moncon:s,schedule:d,InsightInfo:g,intesisHome_Device:h,building:i},function(){}),v.label=12;case 12:return[2]}})})},t.prototype.fetchThermostatMQTTData=function(e){return E(this,void 0,void 0,function(){var t,n,a;return N(this,function(l){switch(l.label){case 0:return t=Object(),[4,Object(r.F)(e,new Date,new Date,!0)];case 1:return(n=l.sent())&&n.length>0&&n[0]&&(a=n[0],t={activestage:a.activestage,availablemodes:a.availablemodes,away:a.away,cooltemp:a.cooltemp,cooltempmax:a.cooltempmax,cooltempmin:a.cooltempmin,dehum_setpoint:0,fan:a.fan,fanstate:a.fanstate,forceunocc:0,heattemp:a.heattemp,heattempmax:a.heattempmax,heattempmin:a.heattempmin,holiday:0,hum:0,hum_setpoint:0,insightName:this.props.InsightName,mode:a.mode,name:a.name,override:0,overridetime:0,schedule:a.schedule,schedulepart:a.schedulepart,setpointdelta:a.setpointdelta,spacetemp:a.spacetemp,state:a.state,tempunits:a.tempunits,thermostatControlStatus:"",timestamp:a.timestamp}),[2,t]}})})},t.prototype.componentWillReceiveProps=function(e){e.compressorDefrostState&&this.setState({compressorDefrostState:e.compressorDefrostState}),e.compressorTemperature&&this.setState({compressorTemperature:e.compressorTemperature})},t.prototype.fetchADPValues=function(){return E(this,void 0,void 0,function(){var e,t,n,a;return N(this,function(l){switch(l.label){case 0:return e=this.props,t=e.compressorBox,n=e.buildingName,[4,Object(r.o)(n,"",t)];case 1:return a=l.sent(),this.setState({compressorADPDB:a}),[2]}})})},t.prototype._fetchRelayBoardInfo=function(){return E(this,void 0,void 0,function(){var e,t;return N(this,function(n){switch(n.label){case 0:return e=this.state.Moncon,[4,Object(r.C)(e).then(function(t){if(!t||t&&t.error)return Object(u.a)("Error occurred while fetching relay board info."),Object();var n=JSON.stringify(t);return n=(n=n.replace(/'/g,'"')).replace(/^"(.*)"$/,"$1"),t=JSON.parse(n),localStorage.setItem(e.deviceID,JSON.stringify(t)),t}).catch(function(e){return Object()})];case 1:return t=n.sent(),this.setState({RelayBoardInfo:t}),[2]}})})},t.prototype.fetchSolutionsSchedule=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l;return N(this,function(o){switch(o.label){case 0:return(e=this.props.equipmentOntology)&&e.length>0?(t=Object(),[4,Object(r.z)(e)]):[3,2];case 1:for(n=o.sent(),a=0;a<n.length;a++)l=l=n[a],t[Object(m.g)(l.day)]||(t[Object(m.g)(l.day)]=[]),t[Object(m.g)(l.day)].push({ontology:Object(m.g)(l.ontology),setPoint:Object(m.g)(l.setPoint),setRelayStatus:Object(m.g)(l.setStatusType),start:Object(m.g)(l.start)});return[2,t];case 2:return[2]}})})},t.prototype.fetchSchedule=function(e){return E(this,void 0,void 0,function(){var t,n,a,l,o,i,s,c,u,d,p;return N(this,function(h){switch(h.label){case 0:return t=this.props,n=t.buildingName,a=t.InsightName,l=t.compressorBox,o=t.isDefrost,i=t.ControlName,(s=Object()).deviceName=a,c="CompressorControl"==i?o?"Defrost":"Box":void 0,[4,Object(r.t)(n,a,e,c,l)];case 1:for(u=h.sent(),d=0;d<u.length;d++)p=p=u[d],s[Object(m.g)(p.day)]||(s[Object(m.g)(p.day)]=[]),s[Object(m.g)(p.day)].push({ontology:Object(m.g)(p.ontology),setPoint:Object(m.g)(p.setPoint),setHeatPoint:Object(m.g)(p.setHeatPoint),setCoolPoint:Object(m.g)(p.setCoolPoint),setRelayStatus:Object(m.g)(p.setRelayStatus),setRelayName:Object(m.g)(p.setRelayName),start:Object(m.g)(p.start),compressorScheduleType:Object(m.g)(p.compressorScheduleType),refEquipment:Object(m.g)(p.refEquipment)});return[2,s]}})})},t.prototype.update_Schedule=function(e){this.setState({schedule:e})},t.prototype.saveSchedule=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,o,s,c,m,d,p,h,f,g,b,v,y,E;return N(this,function(N){switch(N.label){case 0:for(e=this.props,t=e.buildingName,n=e.ControlName,a=e.isDefrost,l=e.compressorBox,o=e.isSolution,s=e.equipmentOntology,c=this.state,m=c.schedule,d=c.building,p="CompressorControl"==n?a?"Defrost":"Box":void 0,Object(i.a)(!0),h=Object.keys(m),f=0;f<h.length;f++)if(g=h[f],"monday"==(b=g.toLowerCase())||"tuesday"==b||"wednesday"==b||"thursday"==b||"friday"==b||"saturday"==b||"sunday"==b)for(v=m[g],y=0;y<v.length;y++)(E=v[y]).setPoint||E.setCoolPoint&&E.setHeatPoint||E.setRelayStatus||E.setRelayName||E.start||v.splice(y,1);return m.monconType=n,this.setState({schedule:m}),o?[4,Object(r.Y)(m,s)]:[3,2];case 1:return N.sent(),Object(u.b)("Schedule Saved successfully. "),[3,4];case 2:return[4,Object(r.S)(m,t,d,p,l).then(function(e){Object(i.a)(!1),Object(u.b)("Schedule updated successfully. ")}).catch(function(e){Object(i.a)(!1),console.log("error: ",e)})];case 3:N.sent(),N.label=4;case 4:return Object(i.a)(!1),[2]}})})},t.prototype.resetSchedule=function(){return E(this,void 0,void 0,function(){var e,t,n,a,l,o,i,s,c,m,d;return N(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.ControlName,a=e.isDefrost,l=e.compressorBox,o=e.isSolution,i=e.equipmentOntology,s=this.state,c=s.schedule,m=s.building,d="CompressorControl"==n?a?"Defrost":"Box":void 0,Object(),o?[4,Object(r.m)(i)]:[3,2];case 1:return p.sent(),Object(u.b)("Successfully Reset your Schedule"),this.setState({schedule:c}),[3,4];case 2:return[4,Object(r.Q)(c,t,m,d,l)];case 3:p.sent()?(Object(u.b)("Successfully Reset your Schedule"),this.setState({schedule:Object()})):Object(u.a)("Error"),p.label=4;case 4:return this.setState({schedule:Object()}),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.Moncon,r=t.schedule,i=t.InsightInfo,c=t.intesisHome_Device,m=t.building,u=t.compressorADPDB,f=t.compressorTemperature,y=t.showLogs,E=this.props,N=E.instance,C=E.buildingName,O=E.InsightName,S=E.ControlName,T=E.type,w=E.hideTabs,x=E.isDefrost,D=E.compressorDefrostState,I=E.compressorBox,_=E.equipmentOntology,A=n&&n.monitoringControlDeviceType&&-1!=n.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),L=c&&c.services&&c.services["com.intesishome.setpoint-temp"]?c.services["com.intesishome.setpoint-temp"].value:0,j=c&&c.services&&c.services["com.intesishome.user-mode"]&&c.services&&c.services["com.intesishome.user-mode"].value,R=localStorage.getItem("hvacUNIT"),k=JSON.parse(v.a.getItem("user"));return y?a.createElement(g.a,{instance:N,buildingName:C,fromEntityList:!0,ontology:O,module:b.a.Assets,entityName:"InsightSchedule",onLogClose:function(){return e.setState({showLogs:!1})}}):a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12  col-sm-12 col-xs-12"},!m&&!w&&a.createElement(s.a,{InsightName:O,buildingName:C,instance:N,ControlName:S,type:T,isCompressorDefrost:x}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},k&&"1"==k.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),!m&&a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 tempCounter roomTemp",style:{height:"300px"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"header pull-left",style:{textAlign:"left"}},R&&a.createElement("h4",{className:"title"},a.createElement("strong",null,"HVAC:")," (",R,")"),a.createElement("h3",{className:"title"},"CompressorControl"!=S&&a.createElement("strong",null,n.rdfsLabel," ")),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Moncon Manufacturer:"),"\xa0 ","CompressorControl"==S?"ONIT":n.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Moncon Model:")," \xa0 ","CompressorControl"==S?"3B+":n.model),a.createElement("br",null),a.createElement("br",null))),a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"header"},!A&&i&&"CompressorControl"!=S&&a.createElement(a.Fragment,null,i.mode===l.c.HEAT&&a.createElement(a.Fragment,null,a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},Object(p.a)(i.heattemp).toFixed(2),"\xb0F")),i.mode===l.c.COOL&&a.createElement(a.Fragment,null,a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(p.a)(i.cooltemp).toFixed(2),"\xb0F")),(i.mode===l.c.AUTO||i.mode===l.c.OFF)&&a.createElement(a.Fragment,null,a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},Object(p.a)(i.heattemp).toFixed(2),"\xb0F"),a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},Object(p.a)(i.cooltemp).toFixed(2),"\xb0F"))),A&&j&&"CompressorControl"!=S&&a.createElement(a.Fragment,null,a.createElement("div",null,"Mode:"," ",j==h.b.AUTO?"AUTO":j==h.b.COOL?"COOL":j==h.b.DRY?"DRY":j==h.b.FAN?"FAN":j==h.b.HEAT?"HEAT":"NONE"),a.createElement("div",{className:"counter"},Object(p.a)(L).toFixed(2),"\xb0F")),"CompressorControl"==S&&!x&&a.createElement(a.Fragment,null,a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},f," \xb0F")),"CompressorControl"==S&&x&&a.createElement(a.Fragment,null,a.createElement("div",{className:"counter"},D," State")))))),m&&a.createElement("div",{className:"col-md-8 col-sm-12 col-xs-12 tempCounter roomTemp",style:{height:"300px"}}),a.createElement("div",{className:"col-md-7 col-sm-12 col-xs-12 dataCard"},a.createElement("div",{className:"card hidden-sm hidden-xs"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"35px"}},"Day"),"RelayControl"==S&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"15px"}},"Set Relay"),"RelayControl"==S&&a.createElement("div",{className:"col-md-2 headingText",style:{paddingLeft:"30px"}},"Off/On"),"RelayControl"==S&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"45px"}},"Start"),"RelayControl"!=S&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"50px",textAlign:"center"}},"Set Point"),"RelayControl"!=S&&a.createElement("div",{className:"col-md-3 headingText",style:{paddingLeft:"50px",textAlign:"center"}},"Start"),a.createElement("div",{className:"col-md-2 headingText"},a.createElement("button",{className:"btn btn-primary btn-fill pull-right",style:{marginRight:"10px"},onClick:function(){document.getElementById("btnReset").click()}},"Reset Schedule")))),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Monday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Tuesday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Wednesday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Thursday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Friday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Saturday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement(o.a,{equipmentOntology:_,buildingName:C,schedule:r,day:"Sunday",update_Schedule:this.update_Schedule,ControlName:S,DeviceType:n.monitoringControlDeviceType,compressorADPDB:u,InsightInfo:i,isDefrost:x,refEquipment:I}),a.createElement("div",{className:"col-md-5"},a.createElement("button",{className:"btn btn-success btn-fill mr-4",style:{marginRight:"2px"},onClick:function(){e.saveSchedule()}},"Save Schedule"),"\xa0",a.createElement("button",{className:"btn btn-primary btn-fill",onClick:function(){document.getElementById("btnReset").click()}},"Reset Schedule"))),a.createElement("button",{id:"btnReset",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmResetDialog"},"."),a.createElement(d.a,{instance:"",id:"ConfirmResetDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to reset Schedule?",heading:"Confirm...",onConfirmButtonClick:function(){e.resetSchedule()}})))))))))},t}(a.Component);t.default=C},1073:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=(n.n(a),n(701)),o=n(779),r=n(679),i=n(116),s=n(31),c=n(656),m=n(10),u=n(23),d=n(665),p=n(666),h=n(11),f=n(908),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ADPData:[],spaceName:"",RelayADPData:Object(),compressorADP:Object(),showLogs:!1,ptacADP:Object()},n.handleChangeInputs=n.handleChangeInputs.bind(n),n.handleRelayChangeInputs=n.handleRelayChangeInputs.bind(n),n.SaveADP=n.SaveADP.bind(n),n._fetchADP=n._fetchADP.bind(n),n._fetchRelayADP=n._fetchRelayADP.bind(n),n.handleValueChange=n.handleValueChange.bind(n),n}return g(t,e),t.prototype.componentDidMount=function(){return b(this,void 0,void 0,function(){var e,t,n,a,l,o;return v(this,function(r){switch(r.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.ControlName,l=this.state.spaceName,t&&n?"IntesisControl"!=a&&"InsightControl"!=a?[3,2]:[4,Object(c.t)(t,n)]:[3,5];case 1:return o=r.sent(),l=o.location,this._fetchADP(t,l),this.setState({spaceName:l}),[3,5];case 2:return"RelayControl"!=a?[3,4]:[4,this._fetchRelayADP(n,t)];case 3:return r.sent(),[3,5];case 4:"CompressorControl"==a?this.fetchCompressorADP():"PTACControl"==a&&this.fetchPTACADP(),r.label=5;case 5:return[2]}})})},t.prototype._fetchADP=function(e,t){return b(this,void 0,void 0,function(){var n,a,l,i,s,c,u;return v(this,function(d){switch(d.label){case 0:return n=this.state.ADPData,n=[],e&&t?[4,Object(r.p)(e)]:[3,3];case 1:return a=d.sent(),[4,Object(r.A)(t)];case 2:if(l=d.sent(),a&&a.length>0&&l&&l.length>0){for(i=0;i<a.length;i++)s=Object(),c=a[i],u=l[i],s.ontology=Object(m.g)(c.ontology),s.season=Object(m.g)(c.season),s.occType=Object(m.g)(c.occType),s.defaultTargetTemp=Object(m.g)(c.defaultTargetTemp),s.fanSetting=Object(m.g)(c.fanSetting),s.warmLittleTemp=Object(m.g)(u.warmLittleTemp),s.warmLittleHowBad=Object(m.g)(u.warmLittleHowBad),s.warmLotTemp=Object(m.g)(u.warmLotTemp),s.warmLotHowBad=Object(m.g)(u.warmLotHowBad),s.warmHardLimitTemp=Object(m.g)(u.warmHardLimitTemp),s.coolLittleTemp=Object(m.g)(u.coolLittleTemp),s.coolLittleHowBad=Object(m.g)(u.coolLittleHowBad),s.coolLotTemp=Object(m.g)(u.coolLotTemp),s.coolLotHowBad=Object(m.g)(u.coolLotHowBad),s.coolHardLimitTemp=Object(m.g)(u.coolHardLimitTemp),n.push(s);this.setState({ADPData:n})}else this.setState({ADPData:o.a});d.label=3;case 3:return[2]}})})},t.prototype._fetchRelayADP=function(e,t){return b(this,void 0,void 0,function(){var n=this;return v(this,function(a){switch(a.label){case 0:return e&&t?[4,Object(r.b)(e,t).then(function(e){var a=Object();e[0]?(a.device=Object(m.g)(e[0].device),a.A1=Object(m.g)(e[0].A1),a.A2=Object(m.g)(e[0].A2),a.B1=Object(m.g)(e[0].B1),a.B2=Object(m.g)(e[0].B2),a.C1=Object(m.g)(e[0].C1),a.C2=Object(m.g)(e[0].C2),a.D1=Object(m.g)(e[0].D1),a.D2=Object(m.g)(e[0].D2),a.E1=Object(m.g)(e[0].E1),a.E2=Object(m.g)(e[0].E2),a.F1=Object(m.g)(e[0].F1),a.F2=Object(m.g)(e[0].F2),a.G1=Object(m.g)(e[0].G1),a.G2=Object(m.g)(e[0].G2)):(a.device=t,a.A1="0",a.A2="0",a.B1="1",a.B2="1",a.C1="0",a.C2="0",a.D1="1",a.D2="1",a.E1="1",a.E2="1",a.F1="0",a.F2="0",a.G1="1",a.G2="1"),n.setState({RelayADPData:a})})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.fetchCompressorADP=function(){return b(this,void 0,void 0,function(){var e,t,n,a,l,o;return v(this,function(i){switch(i.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.solutionOntology,l=this.state.compressorADP,[4,Object(r.o)(this.props.buildingName,"",t,a)];case 1:return o=i.sent(),l=o&&o.equipment?o:{ontology:Object(u.r)(12),BackTempWeight:30,BackTempActualWeight:50,FrontTempActualWeight:50,FrontTempWeight:40,HighTemp:0,LowTemp:0,MedianTemp:0,MinTimeBeforeRestart:0,SolidTempWeight:30,ThresholdAmps:0,ThresholdTemp:0,building:n,equipment:t,DeadBandMinutes:0,DeadBandTemp:1,solutionOntology:a},this.setState({compressorADP:l}),[2]}})})},t.prototype.fetchPTACADP=function(){return b(this,void 0,void 0,function(){var e,t,n,a,l,r;return v(this,function(i){switch(i.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.solutionOntology,l=this.state.ptacADP,[4,Object(f.c)(n,"",t,a)];case 1:return r=i.sent(),l=r&&r.equipment?r:{ontology:Object(u.r)(12),building:n,equipment:t,DeadBandMinutes:1,DeadBandTemp:1,MotinoDetectionE1:1,MotinoDetectionE2:1,solutionOntology:a,NoOfMotionTriggers:1,OccupancyDeadband:1,ADPSettings:o.a},this.setState({ptacADP:l,ADPData:l.ADPSettings}),[2]}})})},t.prototype.handleChangeInputs=function(e,t){var n=this.state.ADPData;n[t][e.target.name]=e.target.value?e.target.value:"0.0",this.setState({ADPData:n})},t.prototype.handleRelayChangeInputs=function(e){var t=this.state.RelayADPData;t[e.target.name]=e.target.value?e.target.value:"0",this.setState({RelayADPData:t})},t.prototype.handlePTACInputs=function(e){var t=this.state.ptacADP;t[e.target.name]=e.target.value?e.target.value:0,this.setState({ptacADP:t})},t.prototype.handleCompressorChangeInputs=function(e,t,n){var a=this.state.compressorADP,l=0;l=-1!=e.indexOf("Weight")||-1!=e.indexOf("Time")||-1!=e.indexOf("Min")||-1!=e.indexOf("Threshold")?1:.1;var o=n?t+l:t-l;o=parseFloat(o.toFixed(1)),a[e]=o,this.setState({compressorADP:a})},t.prototype.SaveADP=function(){return b(this,void 0,void 0,function(){var e,t,n,a,l,o,c,m,u,d;return v(this,function(p){switch(p.label){case 0:return e=this.state,t=e.ADPData,n=e.spaceName,a=e.RelayADPData,l=this.props,o=l.buildingName,c=l.InsightName,m=l.ControlName,Object(i.a)(!0),"RelayControl"!=m?[3,2]:(a.building=o,a.device=c,[4,Object(r.k)(a).then(function(e){e?Object(s.b)("Successfully Save"):Object(s.a)("Something Went Wrong")}).catch(function(e){console.log("error: ",e)})]);case 1:return p.sent(),[3,8];case 2:return"IntesisControl"!=m&&"InsightControl"!=m?[3,4]:[4,Object(r.i)(t,o,c,n).then(function(e){e?Object(s.b)("Successfully Save"):Object(s.a)("Something Went Wrong")}).catch(function(e){console.log("error: ",e)})];case 3:return p.sent(),this._fetchADP(c,n),[3,8];case 4:return"CompressorControl"!=m?[3,6]:((u=this.state.compressorADP).building=o,u.equipment=c,[4,Object(r.R)(u)]);case 5:return p.sent(),[3,8];case 6:return"PTACControl"!=m?[3,8]:((d=this.state.ptacADP).building=o,d.equipment=c,d.ADPSettings=t,[4,Object(f.g)(d)]);case 7:p.sent(),p.label=8;case 8:return Object(i.a)(!1),[2]}})})},t.prototype.handleValueChange=function(e){var t=this.state.compressorADP;t[""+e.target.name]=e.target.value?parseFloat(e.target.value):0,this.setState({compressorADP:t})},t.prototype.handleFieldValidation=function(e,t){var n=this.state.RelayADPData;"A1"==e&&n.A1&&t?parseInt(t)<0?n.A1="0":parseInt(t)>1e3&&(n.A1="1000"):"A2"==e&&n.A2&&t?parseInt(t)<0?n.A2="0":parseInt(t)>1e3&&(n.A2="1000"):"B1"==e&&n.B1&&t?parseInt(t)<1&&(n.B1="1"):"B2"==e&&n.B2&&t?parseInt(t)<1&&(n.B2="1"):"C1"==e&&n.C1&&t?parseInt(t)<0?n.C1="0":parseInt(t)>1e3&&(n.C1="1000"):"C2"==e&&n.C2&&t?parseInt(t)<0?n.C2="0":parseInt(t)>1e3&&(n.C2="1000"):"D1"==e&&n.D1&&t?parseInt(t)<1&&(n.D1="1"):"D2"==e&&n.D2&&t?parseInt(t)<1&&(n.D2="1"):"E1"==e&&n.E1&&t?parseInt(t)<1&&(n.E1="1"):"E2"==e&&n.E2&&t?parseInt(t)<1&&(n.E2="1"):"F1"==e&&n.F1&&t?parseInt(t)<0&&(n.F1="0"):"F2"==e&&n.F2&&t?parseInt(t)<0&&(n.F2="0"):"G1"==e&&n.G1&&t?parseInt(t)<1&&(n.G1="1"):"G2"==e&&n.G2&&t&&parseInt(t)<1&&(n.G2="1"),this.setState({RelayADPData:n})},t.prototype.render=function(){var e=this,t=this.props,n=t.InsightName,o=t.buildingName,r=t.instance,i=t.ControlName,s=t.type,c=t.hideTabs,m=this.state,u=m.ADPData,f=m.RelayADPData,g=m.compressorADP,b=m.ptacADP,v=m.showLogs,y=g.FrontTempWeight+g.SolidTempWeight+g.BackTempWeight!=100,E=JSON.parse(h.a.getItem("user"));return v?a.createElement(d.a,{instance:r,buildingName:o,fromEntityList:!0,ontology:n,module:p.a.Assets,entityName:"DeviceADP",onLogClose:function(){return e.setState({showLogs:!1})}}):a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},E&&"1"==E.role&&a.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{marginLeft:5},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",a.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),!c&&a.createElement(l.a,{InsightName:n,ControlName:i,buildingName:o,instance:r,type:s}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:""},("IntesisControl"==i||"InsightControl"==i||"PTACControl"==i)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row cell_border hidden-sm hidden-xs",style:{padding:"0px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{padding:"0px 0px",height:"91px"}},a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"4%"}},"Season"),a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"10%"}},"Occ. Type"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"91px",paddingTop:"4%",paddingLeft:"4%"}},"Default Target F\xb0"),a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-4 cell_border",style:{height:"91px",paddingTop:"5%",paddingLeft:"10%"}},"Fan Setting")),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 cell_border",style:{height:"91px"}},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},"Too Warm")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A little")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A Lot")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2 cell_border",style:{height:"69px",paddingTop:"2%",paddingLeft:"3%"}},"Hard limit F\xb0"))))),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 cell_border",style:{height:"91px"}},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12  col-xsm-12"},"Too Cool")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A little")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-5 col-sm-5 col-xs-5"},a.createElement("div",{className:"row cell_border"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12",style:{paddingLeft:"34%"}},"A Lot")),a.createElement("div",{className:"row cell_border",style:{height:"48px"}},a.createElement("div",{className:"col-md-6 col-sm-6  col-xs-6 cell_border",style:{height:"48px",paddingTop:"11%",paddingLeft:"12%"}}," \u25b3 F\xb0"),a.createElement("div",{className:"col-md-6 col-sm-6  col-xs-6 cell_border",style:{height:"48px",paddingTop:"3%"}},"How Bad?"))),a.createElement("div",{className:"col-md-2 col-sm-2  col-xs-6  cell_border",style:{height:"69px",paddingTop:"2%",paddingLeft:"3%"}},"Hard limit F\xb0")))))),a.createElement("br",null),u&&u.map(function(t,n){return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12 "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Season"),t.season),a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Occ. Type")," ",t.occType),a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Default Target F\xb0"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"defaultTargetTemp",value:t.defaultTargetTemp,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-4 col-sm-12 col-xs-12 trim-data"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Fan Setting"),a.createElement("div",{className:"form-group",style:{background:"PTACControl"==i?"lightgrey":"",margin:"0px"}},a.createElement("select",{className:"form-control form-control-adp",value:t.fanSetting,name:"fanSetting",disabled:"PTACControl"==i,onChange:function(t){e.handleChangeInputs(t,n)}},a.createElement("option",{value:""})))))),a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12",style:{width:"57%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Little Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLittleTemp",value:t.warmLittleTemp,disabled:"PTACControl"==i&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Little HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLittleHowBad",value:t.warmLittleHowBad,disabled:"PTACControl"==i&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Lot Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLotTemp",value:t.warmLotTemp,disabled:"PTACControl"==i&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12  col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Lot HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmLotHowBad",value:t.warmLotHowBad,disabled:"PTACControl"==i&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12 no-padding",style:{width:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Warm Hard Limit Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"warmHardLimitTemp",value:t.warmHardLimitTemp,disabled:"PTACControl"==i&&("HEATING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-6 col-sm-12  col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Little Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLittleTemp",value:t.coolLittleTemp,disabled:"PTACControl"==i&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Little HowBad"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLittleHowBad",value:t.coolLittleHowBad,disabled:"PTACControl"==i&&("COOLING"==t.season||"SHUTDOWN"==t.occType),onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-5 col-sm-12 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%",marginLeft:"10%",marginRight:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Lot Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLotTemp",value:t.coolLotTemp,disabled:"PTACControl"==i&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})),a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 no-padding",style:{width:"34%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Lot HowBad?"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolLotHowBad",value:t.coolLotHowBad,disabled:"PTACControl"==i&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})))),a.createElement("div",{className:"col-md-2 col-sm-12  col-xs-12 no-padding",style:{width:"15%"}},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Cool Hard Limit Temp"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"coolHardLimitTemp",value:t.coolHardLimitTemp,disabled:"PTACControl"==i&&"COOLING"==t.season||"SHUTDOWN"==t.occType,onChange:function(t){e.handleChangeInputs(t,n)}})))))))})),"PTACControl"==i&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 pl-1"},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10"},a.createElement("h4",{className:"title"},"Occupancy Detection"),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"MotinoDetectionE1"},"Settings Variable Under Normal - E1 (min):"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"MotinoDetectionE1",className:"form-control",autoComplete:"off",name:"MotinoDetectionE1",value:b.MotinoDetectionE1,onChange:function(t){e.handlePTACInputs(t)}})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"MotinoDetectionE2"},"Settings Variable Under Optimize - E2 (min):"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"MotinoDetectionE2",className:"form-control",autoComplete:"off",name:"MotinoDetectionE2",value:b.MotinoDetectionE2,onChange:function(t){e.handlePTACInputs(t)}})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"OccupancyDeadband"},"Occupancy Deadband (min):"))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"OccupancyDeadband",className:"form-control",autoComplete:"off",name:"OccupancyDeadband",value:b.OccupancyDeadband,onChange:function(t){e.handlePTACInputs(t)}}))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group pull-right"},a.createElement("label",{htmlFor:"NoOfMotionTriggers"},"No. of Motion Triggers:"))),a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"NoOfMotionTriggers",className:"form-control",autoComplete:"off",name:"NoOfMotionTriggers",value:b.NoOfMotionTriggers,onChange:function(t){e.handlePTACInputs(t)}}))))))),a.createElement("div",{className:"col-md-6 pr-1"},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid padding-10"},a.createElement("h4",{className:"title"},"Dead Band Settings"),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"DeadBandTemp"},"Temperature (\xb0F):"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"DeadBandTemp",className:"form-control",autoComplete:"off",name:"DeadBandTemp",value:b.DeadBandTemp,onChange:function(t){e.handlePTACInputs(t)}})))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"DeadBandMinutes"},"Starting Minutes:"))),a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("input",{type:"number",id:"DeadBandMinutes",className:"form-control",autoComplete:"off",name:"DeadBandMinutes",value:b.DeadBandMinutes,onChange:function(t){e.handlePTACInputs(t)}}))))))))),"RelayControl"==i&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row cell_border hidden-sm hidden-xs",style:{padding:"0px"}},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 grid-header"},"Description"),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3 grid-header"},"Settings Variable Under Normal"),a.createElement("div",{className:"col-md-3 col-sm-3 col-xs-3 grid-header"},"Settings Variable Under Optimize")),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12 "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance High Limit \u2013 0-1000 Lumens"),"Illuminance High Limit \u2013 0-1000 Lumens"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A1")," A1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"A1",onChange:this.handleRelayChangeInputs,value:f.A1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.A1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A2")," A2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"A2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"A2",onChange:this.handleRelayChangeInputs,value:f.A2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.A2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance High Limit Time Delay to initiate OFF - Sec "),"Illuminance High Limit Time Delay to initiate OFF - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B1")," B1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"B1",onChange:this.handleRelayChangeInputs,value:f.B1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.B1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B2")," B2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"B2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"B2",onChange:this.handleRelayChangeInputs,value:f.B2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.B2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance Low Limit \u2013 0-1000 Lumens"),"Illuminance Low Limit \u2013 0-1000 Lumens"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C1")," C1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"C1",onChange:this.handleRelayChangeInputs,value:f.C1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.C1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C2")," C2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"C2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"C2",onChange:this.handleRelayChangeInputs,value:f.C2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.C2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Illuminance Low Limit Time Delay to initiate ON - sec"),"Illuminance Low Limit Time Delay to initiate ON - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D1")," D1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"D1",onChange:this.handleRelayChangeInputs,value:f.D1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.D1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D2")," D2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"D2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"D2",onChange:this.handleRelayChangeInputs,value:f.D2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.D2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Motion Detection Time Delay to initiate light OFF"),"Motion Detection Time Delay to initiate light OFF"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E1")," E1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"E1",onChange:this.handleRelayChangeInputs,value:f.E1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.E1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E2")," E2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"E2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"E2",onChange:this.handleRelayChangeInputs,value:f.E2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.E2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Blue Tooth (BT) High Limit initiate On - Integer"),"Blue Tooth (BT) High Limit initiate On - Integer"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F1")," F1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"F1",onChange:this.handleRelayChangeInputs,value:f.F1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.F1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F2")," F2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"F2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"F2",onChange:this.handleRelayChangeInputs,value:f.F2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.F2)}}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"BT Time Delay to shut off upon below high limit - sec"),"BT Time Delay to shut off upon below high limit - Sec"),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G1")," G1"),a.createElement("div",{className:"col-md-2 col-sm-2 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G1"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"G1",onChange:this.handleRelayChangeInputs,value:f.G1,onBlur:function(t){e.handleFieldValidation(t.target.name,f.G1)}})),a.createElement("div",{className:"col-md-1 col-sm-1 col-xs-1 padding-10"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G2")," G2"),a.createElement("div",{className:"col-md-2 col-sm-1 col-xs-2"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"G2"),a.createElement("input",{className:"form-control form-control-adp no-padding",type:"number",name:"G2",onChange:this.handleRelayChangeInputs,value:f.G2,onBlur:function(t){e.handleFieldValidation(t.target.name,f.G2)}})))))),"CompressorControl"==i&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"}),a.createElement("div",{className:"col-md-6"},a.createElement("h4",{className:"center"},a.createElement("strong",null,"Temp Set"))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6 col-sm-12"},a.createElement("h5",{className:""},a.createElement("strong",null,"High Temperature"))),a.createElement("div",{className:"col-md-6 col-sm-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("HighTemp",g.HighTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(g.HighTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"HighTemp",name:"HighTemp",value:g.HighTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("HighTemp",g.HighTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Median Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MedianTemp",g.MedianTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(g.MedianTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"MedianTemp",name:"MedianTemp",value:g.MedianTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MedianTemp",g.MedianTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Low Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("LowTemp",g.LowTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(g.LowTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"LowTemp",name:"LowTemp",value:g.LowTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("LowTemp",g.LowTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Temperature"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("DeadBandTemp",g.DeadBandTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center",style:{justifyContent:"center",display:"flex"}},a.createElement("input",{className:(null!=g.DeadBandTemp?"":"addFieldValidate")+" form-control",style:{width:"80%",height:30},type:"text",id:"DeadBandTemp",name:"DeadBandTemp",value:g.DeadBandTemp,onChange:function(t){e.handleValueChange(t)}})),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("DeadBandTemp",g.DeadBandTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Dead Band Minutes"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("DeadBandMinutes",g.DeadBandMinutes,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.DeadBandMinutes," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("DeadBandMinutes",g.DeadBandMinutes,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("br",null),a.createElement("div",{style:{color:"grey"}},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Min Time Before Restart"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("MinTimeBeforeRestart",g.MinTimeBeforeRestart,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.MinTimeBeforeRestart," mins"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("MinTimeBeforeRestart",g.MinTimeBeforeRestart,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Threshold Amps before evap fan forced on"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("ThresholdAmps",g.ThresholdAmps,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.ThresholdAmps," amps"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("ThresholdAmps",g.ThresholdAmps,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null,"Threshold temp before evap fan turns on above/below control set point"))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("ThresholdTemp",g.ThresholdTemp,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.ThresholdTemp," deg"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{disabled:!0,type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("ThresholdTemp",g.ThresholdTemp,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))))),a.createElement("br",null))))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"}),a.createElement("div",{className:"col-md-7"},a.createElement("h4",{className:"center"},a.createElement("strong",null,"Temp Sensor"))),a.createElement("div",{className:"col-md-5"}),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Weights"))),a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Actual Weights")))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Front Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("FrontTempWeight",g.FrontTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.FrontTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("FrontTempWeight",g.FrontTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("FrontTempActualWeight",g.FrontTempActualWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.FrontTempActualWeight))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("FrontTempActualWeight",g.FrontTempActualWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Back Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("BackTempWeight",g.BackTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.BackTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("BackTempWeight",g.BackTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("BackTempActualWeight",g.BackTempActualWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.BackTempActualWeight))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("BackTempActualWeight",g.BackTempActualWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"})))))))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-5"},a.createElement("h5",{className:"center"},a.createElement("strong",null,"Solid Temperature"))),a.createElement("div",{className:"col-md-7"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton heatTo pull-right",onClick:function(){e.handleCompressorChangeInputs("SolidTempWeight",g.SolidTempWeight,!1)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-minus"})))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding center"},a.createElement("h5",{className:"margin-top"},a.createElement("strong",null,g.SolidTempWeight,"%"))),a.createElement("div",{className:"col-md-4 col-sm-4 no-padding"},a.createElement("button",{type:"button",className:"btn vanposButton coolTo",onClick:function(){e.handleCompressorChangeInputs("SolidTempWeight",g.SolidTempWeight,!0)}},a.createElement("div",null,a.createElement("i",{className:"fa fa-plus"}))))))),a.createElement("div",{className:"col-md-6"},a.createElement("h5",{className:""},a.createElement("strong",null)))))))),y&&a.createElement("div",{className:"row",style:{marginTop:10,marginLeft:5}},a.createElement("div",{className:"col-md-6"},a.createElement("p",{className:"center",style:{color:"red",fontSize:13}},"* The sum of weights should be 100")))))))),a.createElement("br",null)),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("button",{className:"btn btn-success pull-left",disabled:y&&"CompressorControl"==i,onClick:function(){e.SaveADP()}},"Save ADP"))),a.createElement("br",null),"  ",a.createElement("br",null)))))))))},t}(a.Component);t.default=y},1169:function(e,t,n){"use strict";var a,l,o,r,i;n.d(t,"c",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return m}),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(a||(a={})),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE"}(l||(l={})),function(e){e[e.NOTALARMING=0]="NOTALARMING",e[e.ALARMING=1]="ALARMING"}(o||(o={})),function(e){e[e.ENABLED=0]="ENABLED",e[e.DISABLED=1]="DISABLED"}(r||(r={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.OPEN=1]="OPEN"}(i||(i={}));var s,c={AUTO:"auto",HEAT:"heat",DRY:"dry",FAN:"fan",COOL:"cool"};!function(e){e[e.AUTO=0]="AUTO",e[e.LOW=1]="LOW",e[e.MID=2]="MID",e[e.HIGH=3]="HIGH",e[e.POWERFUL=4]="POWERFUL"}(s||(s={}));var m={AUTO:"auto",LOW:"position-one",MID:"position-two",HIGH:"position-three",POWERFUL:"position-four"}},1170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l,o=n(2),r=(n.n(o),n(116)),i=n(759),s=n(1104),c=n(656),m=n(23),u=n(11),d=n(915),p=n(650),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),f=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},b=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),l=0;for(t=0;t<n;t++)for(var o=arguments[t],r=0,i=o.length;r<i;r++,l++)a[l]=o[r];return a},v=function(e){function t(t){var n=e.call(this,t)||this;return n.pageLength=15,n.state={AcknowledgedItems:[],sortOrder:1,AlarmList:[],showArchivedOnly:!1,alarmType:i.a.OperationalAlarm,selectedAlarm:Object(),equipmentList:"",selectedIndex:0,BimActiveCheck:!1,rowClicked:!1,floorList:[]},a=n,n._FetchAlarmList=n._FetchAlarmList.bind(n),n.sortAlarmList=n.sortAlarmList.bind(n),n.handleRowCheck=n.handleRowCheck.bind(n),n.handleAcknowledge=n.handleAcknowledge.bind(n),n.handleRowClick=n.handleRowClick.bind(n),n.getUnique=n.getUnique.bind(n),n.handleFloorPlan=n.handleFloorPlan.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){var e,t,n,o=this;return g(this,function(i){return e=this.props,t=e.alarmType,n=e.buildingName,this.setState({alarmType:t},function(){return f(o,void 0,void 0,function(){var e=this;return g(this,function(t){return n&&setTimeout(function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,a._FetchAlarmList(!1)];case 1:return e.sent(),[2]}})})},300),[2]})})}),l=setInterval(function(){return f(o,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return Object(r.a)(!0),[4,this._FetchAlarmList(!0)];case 1:return e.sent(),Object(r.a)(!1),[2]}})})},6e4),[2]})})},t.prototype.componentWillUnmount=function(){return f(this,void 0,void 0,function(){return g(this,function(e){return clearInterval(l),[2]})})},t.prototype._FetchAlarmList=function(e){return f(this,void 0,void 0,function(){var t,n,a,l,o,r,i,c,m,u,d,p,h,f;return g(this,function(g){switch(g.label){case 0:return t=this.props,n=t.buildingName,a=t.equipmentName,l=t.spaceName,o=t.deviceName,r=t.deviceId,i=t.mapperAlarmList,c=this.state,m=c.alarmType,u=c.showArchivedOnly,(d=c.AlarmList)||(d=[]),i&&i.length>0?(d=i,[3,3]):[3,1];case 1:return p=this.pageLength,h=e?0:d.length,[4,Object(s.d)(m,n,u,h,p,a,l,o,r)];case 2:f=g.sent(),e?d=b(f):d.push.apply(d,f),g.label=3;case 3:return this.setState({AlarmList:d}),[2]}})})},t.prototype.handleFloorPlan=function(){return f(this,void 0,void 0,function(){var e,t,n,a;return g(this,function(l){return localStorage.setItem("AlarmList",JSON.stringify("")),e=this.props,t=e.buildingName,n=e.instance,(a=this.state.AlarmList)&&a.length>0?localStorage.setItem("AlarmList",JSON.stringify(a)):localStorage.setItem("AlarmList",JSON.stringify("")),window.open("http://"+Object(m.k)()+"/#"+n+"/"+t+"/BimSpace/Alarms/FullScreen","_blank"),[2]})})},t.prototype.sortAlarmList=function(e,t){var n=this.state.AlarmList,a=this.state.sortOrder,l=n.sort(function(t,n){if(t&&n){var l="",o="";switch(e){case"Floor":t.floorRdfsLabel&&n.floorRdfsLabel&&(l=t.floorRdfsLabel,o=n.floorRdfsLabel);break;case"Title":t.title&&n.title&&(l=t.title,o=n.title);break;case"Space":t.spaceRdfsLabel&&n.spaceRdfsLabel&&(l=t.spaceRdfsLabel,o=n.spaceRdfsLabel);break;case"TimeofAlarm":t.timeofalarm&&n.timeofalarm&&(l=t.timeofalarm,o=n.timeofalarm)}var r=0;return l.toLocaleLowerCase()<o.toLocaleLowerCase()?r=-1:l.toLocaleLowerCase()>o.toLocaleLowerCase()&&(r=1),r*a}});this.setState({AlarmList:l,sortOrder:-1*a})},t.prototype.handleRowCheck=function(e,t){var n=this.state.AlarmList;n[t].isSelected=e,this.setState({AlarmList:n})},t.prototype.handleAcknowledge=function(){return f(this,void 0,void 0,function(){var e,t,n,a;return g(this,function(l){switch(l.label){case 0:for(e=JSON.parse(u.a.getItem("user")),t=this.state.alarmType,n=this.state.AlarmList,!1,n.map(function(e){e.acknowledge}),a=0;a<n.length;a++)!!n[a].isSelected&&(n[a].acknowledge=!!n[a].isSelected,n[a].acknowledge&&(n[a].acknowledgedBy=e?e.contact:"")),n[a].isSelected=!1;return this.setState({AlarmList:n}),t!=i.a.CustomerAlarm?[3,2]:[4,Object(s.a)(n)];case 1:return l.sent(),[3,6];case 2:return t!=i.a.OperationalAlarm?[3,4]:[4,Object(s.b)(n)];case 3:return l.sent(),[3,6];case 4:return t!=i.a.SupervisoryAlarm?[3,6]:[4,Object(s.c)(n)];case 5:l.sent(),l.label=6;case 6:return[4,this._FetchAlarmList(!0)];case 7:return l.sent(),[2]}})})},t.prototype.handleArchive=function(){return f(this,void 0,void 0,function(){var e,t,n,a;return g(this,function(l){switch(l.label){case 0:for(e=JSON.parse(u.a.getItem("user")),t=this.state.alarmType,n=this.state.AlarmList,!1,n.map(function(e){e.archived}),a=0;a<n.length;a++)!!n[a].isSelected&&(n[a].archived=!!n[a].isSelected,n[a].archived&&(n[a].archivedBy=e?e.contact:"")),n[a].isSelected=!1;return this.setState({AlarmList:n}),t!=i.a.CustomerAlarm?[3,2]:[4,Object(s.a)(n)];case 1:return l.sent(),[3,6];case 2:return t!=i.a.OperationalAlarm?[3,4]:[4,Object(s.b)(n)];case 3:return l.sent(),[3,6];case 4:return t!=i.a.SupervisoryAlarm?[3,6]:[4,Object(s.c)(n)];case 5:l.sent(),l.label=6;case 6:return[4,this._FetchAlarmList(!0)];case 7:return l.sent(),[2]}})})},t.prototype.handleRowClick=function(e,t){this.setState({selectedIndex:t,BimActiveCheck:!0,rowClicked:!0}),this.selectedDeviceEquipment(e.deviceOntology),this.setState({selectedAlarm:e},function(){document.getElementById("showSelectedAlarmDetails").click()})},t.prototype.selectedDeviceEquipment=function(e){return f(this,void 0,void 0,function(){var t,n,a,l;return g(this,function(o){switch(o.label){case 0:return[4,Object(c.t)(e,this.props.buildingName)];case 1:return t=o.sent(),n="",t?(a=t.relatedEquipment&&t.relatedEquipment.map(function(e){return e.value}))&&a.length>0?[4,Object(m.t)(a)]:[3,3]:[3,3];case 2:(l=o.sent())&&l.length>0&&(n=l.map(function(e){return e.rdfsLabel}).join(", ")),o.label=3;case 3:return this.setState({equipmentList:n}),[2]}})})},t.prototype.getUnique=function(e){return f(this,void 0,void 0,function(){return g(this,function(t){return[2,e.filter(function(e,t,n){return n.indexOf(e)===t})]})})},t.prototype.render=function(){var e=this,t=this.state.alarmType,n=this.props,a=n.buildingName,l=n.instance,r=n.equipmentName,s=n.spaceName,c=n.isInTab,h=this.state,b=h.AlarmList,v=h.showArchivedOnly,y=h.selectedAlarm,E=h.BimActiveCheck,N=!!(b&&b.length>0);if(b)for(var C=0;C<b.length;C++){b[C].isSelected||(N=!1)}var O=JSON.parse(u.a.getItem("user")),S=parseInt(O.role);return o.createElement("div",{className:"content"},o.createElement("div",{className:"container-fluid"},o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12 "},o.createElement("div",{className:"btn-group margin-5",style:{marginLeft:"0px"}},S<4&&o.createElement("button",{type:"button",className:"btn btn-dark "+(t==i.a.OperationalAlarm?"btn-fill":"")+" ",onClick:function(){c?e.setState({alarmType:i.a.OperationalAlarm,showArchivedOnly:!1,AlarmList:[]},function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+l+"/"+a+"/"+(r?"Alarms/OperationalAlarms/Equip/"+r:s?"Alarms/OperationalAlarms/Space/"+s:"Health/Alarms/OperationalAlarms")}},o.createElement("span",null,"Operational Alarms")),S<=4&&o.createElement("button",{type:"button",className:"btn btn-dark "+(t==i.a.CustomerAlarm?"btn-fill":"")+" ",onClick:function(){c?e.setState({alarmType:i.a.CustomerAlarm,showArchivedOnly:!1,AlarmList:[]},function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+l+"/"+a+"/"+(r?"Alarms/CustomerAlarms/Equip/"+r:s?"Alarms/CustomerAlarms/Space/"+s:"Health/Alarms/CustomerAlarms")}},o.createElement("span",null,"Customer Alarms")),S<4&&o.createElement("button",{type:"button",className:"btn btn-dark "+(t==i.a.SupervisoryAlarm?"btn-fill":"")+" ",onClick:function(){c?e.setState({alarmType:i.a.SupervisoryAlarm,showArchivedOnly:!1,AlarmList:[]},function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this._FetchAlarmList(!0)];case 1:return e.sent(),[2]}})})}):window.location.hash="/"+l+"/"+a+"/"+(r?"Alarms/SupervisoryAlarms/Equip/"+r:s?"Alarms/SupervisoryAlarms/Space/"+s:"Health/Alarms/SupervisoryAlarms")}},o.createElement("span",{className:""},"Supervisory Alarms"))),o.createElement("button",{type:"button",className:"margin-5 btn btn-success btn-fill",onClick:function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,this.handleFloorPlan()];case 1:return e.sent(),[2]}})})}}," ",o.createElement("span",null,"FLOOR PLAN")),!v&&o.createElement(o.Fragment,null,o.createElement("button",{type:"button",className:"margin-5 btn btn-default pull-right active",onClick:function(){e.handleArchive()}}," ",o.createElement("span",null,"CLEAR")),o.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleAcknowledge()}}," ",o.createElement("span",null,"ACKNOWLEDGE"))))),o.createElement("br",null),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("a",{className:"btn-sm btn-success active pull-left custom-icon-btn",title:"Archived "+(t==i.a.CustomerAlarm?"Customer":t==i.a.SupervisoryAlarm?"Supervisory":t==i.a.OperationalAlarm?"Operational":"")+" Alarms",style:{display:"flex",alignItems:"center",fontSize:24,margin:3,padding:"6.5px",border:"1px solid",borderRadius:5,width:38,height:38},onClick:function(t){e.setState({showArchivedOnly:!v,AlarmList:[]},function(){return e._FetchAlarmList(!0)})}},v?o.createElement("i",{title:"Show Alarms",style:{width:"100%",textAlign:"center"},className:"fas fa-bell"}):o.createElement("i",{title:"Show Archived",style:{width:"100%"},className:"fa fa-file-archive-o"})))),o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},o.createElement("br",null),o.createElement("div",{className:"card padding-10",style:{paddingTop:"0px"}},o.createElement("div",{className:"content",style:{paddingTop:"10px"}},o.createElement("div",{className:"dataCard"},o.createElement("div",{className:"row hidden-sm hidden-xs no-padding"},o.createElement("div",{className:"col-md-12 no-padding dataCard"},o.createElement("div",{className:"col-md-3 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("Title")}},o.createElement("i",{className:"fa fas fa-sort"}),"Title"),o.createElement("div",{className:(v?"col-md-1":"col-md-2")+" col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("Floor")}},o.createElement("i",{className:"fa fas fa-sort"}),"Floor"),o.createElement("div",{className:"col-md-1 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("Space")}},o.createElement("i",{className:"fa fas fa-sort"}),"Space"),o.createElement("div",{className:"col-md-1 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("Value")}},o.createElement("i",{className:"fa fas fa-sort"}),"Value"),v&&o.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("ArchivedBy")}},o.createElement("i",{className:"fa fas fa-sort"}),"Archive By"),o.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("AcknowledgedBy")}},o.createElement("i",{className:"fa fas fa-sort"}),"Ack. By"),v&&o.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("ArchiveTime")}},o.createElement("i",{className:"fa fas fa-sort"}),"Archive Time"),o.createElement("div",{className:"col-md-1 col-sm-12 small grid-header",onClick:function(){return e.sortAlarmList("AcknowledgeTime")}},o.createElement("i",{className:"fa fas fa-sort"}),"Ack. Time"),o.createElement("div",{className:"col-md-2 col-sm-12 small  grid-header",onClick:function(){return e.sortAlarmList("TimeofAlarm")}},o.createElement("i",{className:"fa fas fa-sort"}),"Time of Alarm"),!v&&o.createElement("div",{className:"col-md-1 col-sm-12 small  grid-header"},o.createElement("input",{style:{marginTop:"0px",marginLeft:"50px",height:"17px"},onChange:function(t){if(b){for(var n=0;n<b.length;n++){b[n].isSelected=t.target.checked}e.setState({AlarmList:b})}},type:"checkbox",checked:N,className:"form-control"})))),b&&b.length>0&&b.map(function(t,n){var a=t.spaceRdfsLabel?t.spaceRdfsLabel:Object(m.m)(t.space),l=t.floorRdfsLabel?t.floorRdfsLabel:Object(m.m)(t.floor);return o.createElement("div",{key:n,className:" row clickable"},o.createElement("div",{className:t.acknowledge?"col-md-12 no-padding":"text-danger col-md-12 no-padding blink-text"},o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-3 small headingText trim-data",title:t.title?t.title:""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Title"),t.title?t.title:""),o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:(v?"col-md-1":"col-md-2")+" col-sm-12 small headingText trim-data",title:l||""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Floor"),l||""),o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-1 col-sm-12 small headingText trim-data",title:a||""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Space"),a||""),o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-1 col-sm-12 small headingText trim-data",title:t.sensedValue?t.sensedValue.toString():""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Value"),t.sensedValue?t.sensedValue:""),v&&o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-1 small headingText trim-data",title:t.archivedBy?t.archivedBy:""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Archive By"),t.archivedBy?t.archivedBy:""),o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-1 small headingText trim-data",title:t.acknowledgedBy?t.acknowledgedBy:""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Acknowledged By"),t.acknowledgedBy?t.acknowledgedBy:""),v&&o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-1 small headingText trim-data",title:t.archiveTimestamp?new Date(t.archiveTimestamp).toLocaleString():""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Archive Time"),t.archiveTimestamp?new Date(t.archiveTimestamp).toLocaleString():""),o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-1 small headingText trim-data",title:t.acknowledgeTimestamp?new Date(t.acknowledgeTimestamp).toLocaleString():""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Acknowledge Time"),t.acknowledgeTimestamp?new Date(t.acknowledgeTimestamp).toLocaleString():""),o.createElement("div",{onClick:function(){e.handleRowClick(t,n)},className:"col-md-2 small headingText trim-data",title:t.timeofalarm?new Date(t.timeofalarm).toLocaleString():""},o.createElement("span",{className:"visible-sm-inline visible-xs-inline headingText"},"Time of Alarm"),t.timeofalarm?new Date(t.timeofalarm).toLocaleString():""),!v&&o.createElement("div",{className:"col-md-1 headingText"},o.createElement("span",{className:"visible-sm-inline visible-xs-inline  headingText"},"Select"),o.createElement("input",{style:{marginTop:"0px",marginLeft:"36px",height:"17px"},onChange:function(t){e.handleRowCheck(t.target.checked,n)},type:"checkbox",checked:t.isSelected,className:"form-control"}))))}),b&&b.length>=this.pageLength&&b.length%this.pageLength==0&&o.createElement("div",{className:"row center"},o.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e._FetchAlarmList(!1)}}," ",o.createElement("span",null,"Load More..."))),o.createElement("button",{type:"button",id:"showSelectedAlarmDetails",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#selectedAlarmDetails"}," ."),o.createElement(p.a,{id:"selectedAlarmDetails",isEditForm:!0,heading:"Alarm Details",saveButtonText:"Ok",cancelButtonText:"Ok",onCancelButtonClick:function(){e.setState({BimActiveCheck:!1,selectedAlarm:Object()})},onCancelButtonClickActive:!0,showCancelButton:!1,showSaveButton:!0,onSaveButtonClick:function(){e.setState({BimActiveCheck:!1,selectedAlarm:Object()})}},y&&o.createElement("div",null,o.createElement("div",{className:"row"},o.createElement("div",{className:"col-md-12"},!y.archived&&o.createElement("button",{type:"button",className:"margin-5 btn btn-default pull-right active",onClick:function(){e.handleRowCheck(!0,e.state.selectedIndex),e.handleArchive(),document.getElementById("showSelectedAlarmDetails").click()}}," ",o.createElement("span",null,"CLEAR")),!y.acknowledge&&o.createElement("button",{type:"button",className:"margin-5 btn btn-default btn-fill pull-right",onClick:function(){e.handleRowCheck(!0,e.state.selectedIndex),e.handleAcknowledge(),document.getElementById("showSelectedAlarmDetails").click()}}," ",o.createElement("span",null,"ACKNOWLEDGE"))),o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{style:{fontWeight:"bold"},className:"header no-padding"},"Title:")),o.createElement("div",{className:"col-md-9",style:{marginLeft:"-5%"}},o.createElement("p",null,y.title?y.title:""))),y.description&&o.createElement("div",{className:"col-md-12"},o.createElement("div",{className:"col-md-3"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Description:")),o.createElement("div",{className:"col-md-9",style:{marginLeft:"-5%"}},o.createElement("p",null," ",y.description?y.description:""))),(y.deviceName||y.deviceOntology)&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Device Name:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.deviceName?y.deviceName:y.deviceOntology?Object(m.m)(y.deviceOntology):""))),this.state.equipmentList&&this.state.equipmentList.length>0&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Related Equipment:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,this.state.equipmentList))),y.sensedValueKey&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Sensed Key:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.sensedValueKey?y.sensedValueKey:""))),y.sensedValue&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Sensed Value:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.sensedValue?y.sensedValue:""))),y.sensedValueKey&&"Virtual Alarm"==y.sensedValueKey&&y.pointLabel&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Point:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.pointLabel?y.pointLabel:""))),y.floorRdfsLabel&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Floor:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.floorRdfsLabel?y.floorRdfsLabel:Object(m.m)(y.floor)))),y.spaceRdfsLabel&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Space:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.spaceRdfsLabel?y.spaceRdfsLabel:Object(m.m)(y.space)))),y.acknowledgedBy&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Acknowledged By:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.acknowledgedBy?y.acknowledgedBy:""))),y.acknowledgeTimestamp&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Acknowledge Time:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.acknowledgeTimestamp?y.acknowledgeTimestamp.ToEasternDateTime():""))),y.archivedBy&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Archived By:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.archivedBy?y.archivedBy:""))),y.archiveTimestamp&&o.createElement("div",{className:"col-md-6"},o.createElement("div",{className:"col-md-5"},o.createElement("label",{className:"header no-padding",style:{fontWeight:"bold"}},"Archive Time:")),o.createElement("div",{className:"col-md-7"},o.createElement("p",null,y.archiveTimestamp?y.archiveTimestamp.ToEasternDateTime():""))))),o.createElement("div",{className:"row"},E&&o.createElement("div",{className:"col-md-12"},o.createElement(d.a,{instance:l,spaceName:y.space,buildingName:a,isAlarming:!y.archived,isAchrived:!(!y.archived&&!y.acknowledge),isView:E}))))))))))))},t}(o.Component);t.default=v},1313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=(n.n(a),n(701)),o=n(656),r=n(660),i=n(1491),s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},m=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},u=function(e){function t(t){var n=e.call(this,t)||this;return n.graphTypes={"Ambient Temp":"http://18.188.22.84:5601/app/kibana#/visualize/edit/ac22fe30-2a9c-11e9-ac7b-91aa8480a091?embed=true&_g=(refreshInterval:(pause:!f,value:5000),time:(from:now-4h,mode:quick,to:now))&_a=(filters:!(),linked:!f,query:(language:lucene,query:''),uiState:(),vis:(aggs:!(),params:(expression:'.es(index%3D+test*,metric%3Davg:properties.cooltemp,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.spacetemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.heattemp,timefield%3Dproperties.@timestamp),.es(index%3Dtest*,metric%3Davg:properties.fan,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.fanstate,timefield%3Dproperties.@timestamp),.es(index%3D+test*,metric%3Davg:properties.mode,timefield%3Dproperties.@timestamp)',interval:auto),title:thermostat,type:timelion))","Set Point":"","Outside Temp":"",Combined:"http://18.188.117.70:3000/d/Hgyp5OpZz/office-lab?tab=queries&orgId=1&fullscreen&edit&panelId=4&_g=(refreshInterval:(pause:!f,value:3000),time:(from:now-4h,mode:quick,to:now))&refresh=3s"},n.state={selectedMode:"Combined",selectedGraph:"",InsightInfo:Object(),HVAC_List:[],Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1},compressorAnalog:Object()},n.onGraphTypeChange=n.onGraphTypeChange.bind(n),n._fetchData=n._fetchData.bind(n),n}return s(t,e),t.prototype.componentDidMount=function(){return c(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.onGraphTypeChange=function(e){this.setState({selectedMode:e,selectedGraph:this.graphTypes[e]})},t.prototype._fetchData=function(){return c(this,void 0,void 0,function(){var e,t,n,a,l,i,s,u,d=this;return m(this,function(p){switch(p.label){case 0:return e=this.props,t=e.InsightName,n=e.buildingName,a=e.type,l=e.compressorAnalogName,t?(i=Object(),s=Object(),u=Object(),l?[4,Object(o.t)(l,n)]:[3,2]):[3,7];case 1:u=p.sent(),p.label=2;case 2:return"Optimal"!=a?[3,4]:[4,Object(r.f)(t)];case 3:return s=p.sent(),[3,6];case 4:return[4,Object(o.t)(t,n)];case 5:i=p.sent(),p.label=6;case 6:this.setState({compressorAnalog:u,selectedGraph:"Optimal"==a?s.graphURL:i.graphURL,Moncon:i,space:s},function(){return c(d,void 0,void 0,function(){return m(this,function(e){return[2]})})}),p.label=7;case 7:return[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,o=e.InsightName,r=e.ControlName,s=e.type,c=e.hideTabs,m=this.state,u=m.selectedGraph,d=m.Moncon,p=d&&d.monitoringControlDeviceType&&-1!=d.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),h=d&&d.monitoringControlDeviceType&&-1!=d.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),f=d&&d.monitoringControlDeviceType&&-1!=d.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),g=d&&d.monitoringControlDeviceType&&-1!=d.monitoringControlDeviceType.toLowerCase().indexOf("wattnode"),b=d&&d.monitoringControlDeviceType&&-1!=d.monitoringControlDeviceType.toLowerCase().indexOf("ats"),v=d&&d.monitoringControlDeviceType&&-1!=d.monitoringControlDeviceType.toLowerCase().indexOf("generator"),y=d&&d.monitoringControlDeviceType&&"CBW406"==d.monitoringControlDeviceType,E=d&&d.monitoringControlDeviceType&&"CBW418"==d.monitoringControlDeviceType,N=g||y||E||b||v,C=g||y||E||b||v,O=g||y||E||b||v;return u=u&&-1!=u.indexOf("http")?u:"https://"+u,a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!c&&a.createElement(l.a,{InsightName:o,buildingName:n,instance:t,ControlName:r,type:s,hideADP:C,hideAlarms:O,hideSchedule:N}),a.createElement("div",{className:"card InsightsListGraph",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 padding-10 "},a.createElement("div",{className:"content"},!p&&!h&&!f&&!E&&!y&&!g&&!b&&a.createElement(a.Fragment,null,!u&&a.createElement("p",{id:"txtnograph"},"No Graph Available"),u&&a.createElement("iframe",{src:u,height:"600",width:"100%"})),(p||h||f||g||b||v)&&a.createElement(a.Fragment,null,a.createElement(i.a,{Moncon:d,buildingName:n,instance:t})),y&&a.createElement(a.Fragment,null,a.createElement(i.a,{Moncon:d,buildingName:n,instance:t,isEsolutionController:this.props.isEsolutionController,graphTab:this.props.graphTab,compressorBoxType:this.props.compressorBoxType})),E&&a.createElement(a.Fragment,null,a.createElement(i.a,{Moncon:d,buildingName:n,instance:t,isEsolutionController:this.props.isEsolutionController,graphTab:this.props.graphTab,compressorBoxType:this.props.compressorBoxType,isTwoColumnGraph:!0}))))))))))))},t}(a.Component);t.default=u},1469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(2),o=(n.n(l),n(779)),r=n(679),i=n(656),s=n(10),c=n(23),m=n(657),u=n(31),d=n(701),p=n(116),h=n(660),f=n(674),g=n(650),b=n(55),v=n(11),y=n(762),E=n(665),N=n(666),C=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),O=this&&this.__assign||function(){return(O=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},S=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},T=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},w=function(e){function t(t){var n=e.call(this,t)||this;return n.state={InsightInfo:Object(),Old_InsightInfo:Object(),InsightChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,deviceNumber:"",enclosure:""},space:{graphURL:"",rdfsLabel:"",spaceName:"",spaceInsights:[],detailsExpanded:!1},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,filteredInsight:[],buildingOptimalTStat:[],spaceOptimalTStat:[],spaces:[],spacesOptimalInfo:[],avgBuildingOptimalTStat:Object(),buildingInsightInfos:[],spaceInsightInfos:[],avgSpaceOptimalTStat:Object(),buildingOptimal:!1,spaceOptimal:!1,scheduleSelected:!1,callInterval:!0,controlStatus:"Manual",showLogs:!1},n.changeMode=n.changeMode.bind(n),n.changeOverrideState=n.changeOverrideState.bind(n),n.changeFanSetting=n.changeFanSetting.bind(n),n.increaseTemp=n.increaseTemp.bind(n),n.decreaseTemp=n.decreaseTemp.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchInsightInfo=n._fetchInsightInfo.bind(n),n.changeStateLocal=n.changeStateLocal.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleOptimize=n.handleOptimize.bind(n),n._fetchInsights=n._fetchInsights.bind(n),n._fetchSelectedTStatData=n._fetchSelectedTStatData.bind(n),n.handleOptimalSelection=n.handleOptimalSelection.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n}return C(t,e),t.prototype.componentDidMount=function(){return S(this,void 0,void 0,function(){var e;return T(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return t.sent(),[4,this._fetchInsights()];case 2:return t.sent(),[4,this.fetchThermostatInfo()];case 3:t.sent(),this._fetchInsightInfo(!0),t.label=4;case 4:return e=JSON.parse(v.a.getItem("user")),b.q.emit("device remote control",e.contact),this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a);var t=0;a=setInterval(function(){++t>=20&&(t=0,e._fetchInsightInfo(!1),Object(p.a)(!1))},1e3)},t.prototype.componentWillUnmount=function(){clearInterval(a)},t.prototype.handleScheduleSelection=function(e){return S(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,Object(r.X)(this.props.InsightName,e)];case 1:return t.sent(),e?Object(u.b)("Successfully Selected Schedule"):Object(u.b)("Successfully unSelected Schedule"),this.setState({scheduleSelected:e}),this._fetchData(),[2]}})})},t.prototype.handleOptimalSelection=function(e,t){var n=this.state,a=n.buildingOptimal,l=n.spaceOptimal;"spaceOptimal"==e?l=t:a=t,this.setState({spaceOptimal:l,buildingOptimal:a}),this.handleOptimize()},t.prototype.handleOptimize=function(){return S(this,void 0,void 0,function(){var e,t,n,a;return T(this,function(l){return e=this.state,t=e.avgBuildingOptimalTStat,n=e.avgSpaceOptimalTStat,a=e.spaceOptimal,e.buildingOptimal&&!a?this.setState({InsightInfo:t,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}):this.setState({InsightInfo:n,InsightChanged:!0,currentChange:"Avg",controlStatus:"Optimize"}),[2]})})},t.prototype._fetchSelectedTStatData=function(){return S(this,void 0,void 0,function(){var e,t,n,a,l,o,c,m,d,p,h,f,g,b,v,y,E,N,C;return T(this,function(O){switch(O.label){case 0:e=this.state,t=e.buildingOptimalTStat,n=e.buildingInsightInfos,a=e.spaceInsightInfos,l=e.spaceOptimalTStat,o=e.buildingOptimal,c=e.spaceOptimal,p=0,O.label=1;case 1:return p<t.length?(m=t[p],(v=Object(s.g)(m.moncondevice))?[4,Object(i.t)(v,this.props.buildingName)]:[3,4]):[3,5];case 2:return y=O.sent(),[4,Object(r.s)(y).then(function(e){return!e||e&&e.error?(Object(u.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 3:d=O.sent(),n.push(d),O.label=4;case 4:return p++,[3,1];case 5:p=0,O.label=6;case 6:if(!(p<l.length))return[3,12];if(h=l[p],!((f=h.spaceInsights)&&f.length>0))return[3,11];g=0,O.label=7;case 7:return g<f.length?(b=f[g],(v=Object(s.g)(b.moncondevice))?[4,Object(i.t)(v,this.props.buildingName)]:[3,10]):[3,11];case 8:return y=O.sent(),[4,Object(r.s)(y).then(function(e){return!e||e&&e.error?(Object(u.a)("Error occurred while fetching thermostat info."),Object()):e}).catch(function(e){return Object()})];case 9:E=O.sent(),a.push(E),O.label=10;case 10:return g++,[3,7];case 11:return p++,[3,6];case 12:return o=n.length>0,c=a.length>0,[4,Object(r.D)(n)];case 13:return N=O.sent(),[4,Object(r.D)(a)];case 14:return C=O.sent(),this.setState({avgBuildingOptimalTStat:N,avgSpaceOptimalTStat:C,buildingInsightInfos:n,spaceInsightInfos:a,buildingOptimal:o,spaceOptimal:c}),[2]}})})},t.prototype._fetchInsights=function(){return S(this,void 0,void 0,function(){var e,t,n,a,l,o,i,m,u,d,p,g,b,v,y;return T(this,function(E){switch(E.label){case 0:return(e=this.props.buildingName)?[4,Object(r.u)(e)]:[3,7];case 1:for(t=E.sent(),y=0;y<t.length;y++)n=t[y],Object(s.g)(n.moncondevice)&&Object(s.g)(n.rdfsLabel)&&Object(c.C)(Object(s.g)(n.moncondevice),Object(s.g)(n.rdfsLabel));for(a=this.state,l=a.spaces,o=a.spacesOptimalInfo,i=a.spaceOptimalTStat,m=a.buildingOptimalTStat,l=[],u=function(e){var n=t[e],a=Object(s.g)(n.space),o=Object(s.g)(n.spaceRdfsLabel);a&&o&&-1==l.findIndex(function(e){return e.ontology==a})&&l.push({ontology:a,rdfsLabel:o})},y=0;y<t.length;y++)u(y);o=[],i=[],m=[],d=function(e){var n,a,r,c,m,u,d;return T(this,function(p){switch(p.label){case 0:return n=l[e],[4,Object(h.f)(n.ontology)];case 1:return a=p.sent(),r=t.filter(function(e){return Object(s.g)(e.space)==n.ontology}),c={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:r},o.push.apply(o,[c]),m=t.find(function(e){return Object(s.g)(e.space)==n.ontology}),u=[],m&&(u=Object(s.g)(m.spaceOptimalTStats).split(",")),d={graphURL:a.graphURL?a.graphURL:"",rdfsLabel:n.rdfsLabel,spaceName:n.ontology,spaceInsights:t.filter(function(e){return-1!=u.findIndex(function(t){return t==Object(s.g)(e.moncondevice)})})},i.push.apply(i,[d]),[2]}})},p=0,E.label=2;case 2:return p<l.length?[5,d(p)]:[3,5];case 3:E.sent(),E.label=4;case 4:return p++,[3,2];case 5:return[4,Object(f.c)(this.props.buildingName)];case 6:if((g=E.sent())&&g[0])for(b=g[0],b=(b=Object(s.g)(b.buildingOptimal)).split(","),v=function(e){var n=b[e],a=t&&t.length>0&&t[0]&&t.find(function(e){return Object(s.g)(e.moncondevice)==n});a&&m.push.apply(m,[a])},y=0;y<b.length;y++)v(y);this.setState({spaces:l,spacesOptimalInfo:o,spaceOptimalTStat:i,buildingOptimalTStat:m}),E.label=7;case 7:return[2]}})})},t.prototype._fetchData=function(){return S(this,void 0,void 0,function(){var e,t,n,a,l,o,r,c,u,d,f=this;return T(this,function(g){switch(g.label){case 0:return e=this.state.scheduleSelected,t=this.props,n=t.InsightName,a=t.buildingName,l=t.type,n?(Object(p.a)(!0),[4,Object(m.h)(this.props.buildingName)]):[3,6];case 1:return o=g.sent(),r=o&&o.length>0&&o.map(function(e){return{value:Object(s.g)(e.ontology),label:Object(s.g)(e.rdfsLabel)}}),c=Object(),u=Object(),"Optimal"!=l?[3,3]:[4,Object(h.f)(n)];case 2:return u=g.sent(),[3,5];case 3:return[4,Object(i.t)(n,a)];case 4:c=g.sent(),g.label=5;case 5:localStorage.getItem(c.deviceID)&&localStorage.getItem(c.deviceID).length>0&&(d=JSON.parse(localStorage.getItem(c.deviceID)),this.setState({InsightInfo:d,Old_InsightInfo:O({},d),InsightChanged:!1,currentChange:""})),e=c.isSchedule,this.setState({Moncon:c,space:u,EquipmentList:r,scheduleSelected:e},function(){return S(f,void 0,void 0,function(){return T(this,function(e){return[2]})})}),Object(p.a)(!1),g.label=6;case 6:return[2]}})})},t.prototype.fetchThermostatInfo=function(){return S(this,void 0,void 0,function(){var e,t,n,a,l,o,i;return T(this,function(s){switch(s.label){case 0:return Object(p.a)(!0),e=this.props,t=e.InsightName,n=e.buildingName,a=this.state,l=a.Moncon,o=a.controlStatus,this.setState({callInterval:!1}),[4,Object(r.B)(n,t).then(function(e){return!e||e&&e.error?(Object(u.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(l.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return i=s.sent(),this.setState({InsightInfo:i,Old_InsightInfo:O({},i),InsightChanged:!1,currentChange:"",callInterval:!0,controlStatus:i.thermostatControlStatus?i.thermostatControlStatus:o}),Object(p.a)(!1),[2]}})})},t.prototype._fetchInsightInfo=function(e){return S(this,void 0,void 0,function(){var t,n,a,l;return T(this,function(o){switch(o.label){case 0:return t=this.state,n=t.Moncon,a=t.controlStatus,e&&Object(p.a)(!0,"Fetching data from Thermostat"),l=Object(),[4,Object(r.s)(n).then(function(e){return!e||e&&e.error?(Object(u.a)("Error occurred while fetching thermostat info."),Object()):(e&&localStorage.setItem(n.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return(l=o.sent())?(l.thermostatControlStatus=a,l.insightName=this.props.InsightName,l.timestamp=(new Date).toString(),[4,Object(r.Z)(this.props.buildingName,l)]):[3,3];case 2:o.sent(),this.setState({InsightInfo:l,Old_InsightInfo:O({},l),InsightChanged:!1,currentChange:"",callInterval:!0}),o.label=3;case 3:return e&&Object(p.a)(!1),[2]}})})},t.prototype.changeMode=function(e,t){e.mode=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"mode"})},t.prototype.changeOverrideState=function(e,t,n){"Local"==this.state.controlStatus&&"Remote"==n?(n="Manual",e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1})):"Manual"==n&&(e.override=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"state",controlStatus:n,localBTNState:!1}))},t.prototype.changeFanSetting=function(e,t){e.fan=t,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"fan"})},t.prototype.increaseTemp=function(e,t){"Heat"==t?e.heattemp=(e.heattemp?e.heattemp:0)+.555556:e.cooltemp=(e.cooltemp?e.cooltemp:0)+.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.decreaseTemp=function(e,t){"Heat"==t?e.heattemp=e.heattemp-.555556:e.cooltemp=e.cooltemp-.555556,this.setState({InsightInfo:e,InsightChanged:!0,currentChange:"temp"})},t.prototype.cancelSend=function(){this.setState({InsightChanged:!1,currentChange:""}),this._fetchInsightInfo(!1)},t.prototype.resetChanges=function(e){return S(this,void 0,void 0,function(){var t=this;return T(this,function(n){return this.setState({InsightChanged:!1,currentChange:""},function(){return S(t,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._fetchInsightInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return S(this,void 0,void 0,function(){var n=this;return T(this,function(a){return Object(p.a)(!0),this.setState({InsightChanged:!1,currentChange:""},function(){return S(n,void 0,void 0,function(){var n;return T(this,function(a){switch(a.label){case 0:return"Local"!=(n=this.state.controlStatus)?[3,2]:[4,Object(r.X)(this.props.InsightName,!1)];case 1:return a.sent(),[3,10];case 2:return"Manual"!=n?[3,4]:[4,Object(r.X)(this.props.InsightName,!1)];case 3:return a.sent(),[3,10];case 4:return"Remote"!=n?[3,6]:[4,Object(r.X)(this.props.InsightName,!1)];case 5:return a.sent(),[3,10];case 6:return"Schedule"!=n?[3,8]:[4,Object(r.X)(this.props.InsightName,!0)];case 7:return a.sent(),[3,10];case 8:return"Optimize"!=n?[3,10]:[4,Object(r.X)(this.props.InsightName,!1)];case 9:a.sent(),a.label=10;case 10:return t.thermostatControlStatus=n,t.insightName=this.props.InsightName,[4,Object(r.Z)(this.props.buildingName,t)];case 11:return a.sent(),Object(r.J)(e,t,this.state.Old_InsightInfo,this.props.buildingName).then(function(e){e.success?Object(u.b)("Changes applied successfully. "):e.error&&Object(u.a)(e.reason)}).catch(function(e){Object(u.a)("Some error orccured. ")}),this.setIntervalStart(),Object(p.a)(!1),[2]}})})}),[2]})})},t.prototype.changeStateLocal=function(e){this.setState({localBTNState:e,controlStatus:"Local",InsightChanged:!0,currentChange:"state"})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.state,n=t.InsightInfo,a=t.Moncon,r=t.space,i=t.InsightChanged,s=t.detailsExpanded,m=t.buildingOptimal,u=t.spaceOptimal,p=t.controlStatus,h=t.showLogs,f=this.props,b=f.instance,C=f.buildingName,O=f.InsightName,S=f.type,T=f.hideTabs,w="Optimal"==S,x="Local"==p,D=n.mode==o.c.AUTO&&n.cooltemp<n.heattemp+.5,I="not refreshed";if(n&&n.timestamp&&(I=new Date(n.timestamp).toLocaleString()),h)return l.createElement(E.a,{instance:b,buildingName:C,fromEntityList:!0,module:N.a.Assets,ontology:a.monitoringControl,entityName:"Device",onLogClose:function(){return e.setState({showLogs:!1})}});var _=JSON.parse(v.a.getItem("user"));return l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},!T&&l.createElement(d.a,{InsightName:O,ControlName:"InsightControl",buildingName:C,instance:b,type:S}),_&&"1"==_.role&&l.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",l.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,w?r.rdfsLabel:a.rdfsLabel)," "),!w&&l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",a&&a.relatedEquipment&&a.relatedEquipment.map(function(t,n){return l.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==a.relatedEquipment.length?"":",")}),"STATUS:")," (",o.d[n.state],")"))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp pull-right"},l.createElement("div",null,"Room Temp"),l.createElement("div",{className:"counter"},Object(c.a)(n.spacetemp).toFixed(2),"\xb0F")),l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("div",{className:"row"},(n.mode==o.c.HEAT||n.mode==o.c.AUTO)&&l.createElement(l.Fragment,null,l.createElement("div",{className:(n.mode==o.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},l.createElement("div",null,"Heat To"),l.createElement("div",{className:"counter"},Object(c.a)(n.heattemp).toFixed(2),"\xb0F")),l.createElement("div",{className:(n.mode==o.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},l.createElement("div",{className:"btn-group-vertical"},l.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:x||D,onClick:function(){return e.increaseTemp(n,"Heat")}},l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-up"})),l.createElement("div",null,"Warmer")),l.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:x,onClick:function(){return e.decreaseTemp(n,"Heat")}},l.createElement("div",null,"Cooler"),l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-down"})))))),(n.mode==o.c.COOL||n.mode==o.c.AUTO)&&l.createElement(l.Fragment,null,l.createElement("div",{className:(n.mode==o.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},l.createElement("div",null,"Cool To"),l.createElement("div",{className:"counter"},Object(c.a)(n.cooltemp).toFixed(2),"\xb0F")),l.createElement("div",{className:(n.mode==o.c.AUTO?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},l.createElement("div",{className:"btn-group-vertical"},l.createElement("button",{type:"button",className:"btn tempButton heatTo",disabled:x,onClick:function(){return e.increaseTemp(n,"Cool")}},l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-up"})),l.createElement("div",null,"Warmer")),l.createElement("button",{type:"button",className:"btn tempButton coolTo",disabled:x||D,onClick:function(){return e.decreaseTemp(n,"Cool")}},l.createElement("div",null,"Cooler"),l.createElement("div",null,l.createElement("i",{className:"fa fa-angle-down"}))))))))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},l.createElement("div",{className:"btn-group"},!w&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:"btn btn-success "+("Local"==p?"btn-fill":""),onClick:function(){e.changeStateLocal(!0)}},"Local"),l.createElement("button",{type:"button",className:"btn btn-success "+("Remote"==p||"Schedule"==p||"Manual"==p||"Optimize"==p?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,o.e.ON,"Remote")}},"Remote"),l.createElement("button",{type:"button",disabled:x,className:"btn btn-success "+("Manual"==p?"btn-fill":""),onClick:function(){return e.changeOverrideState(n,o.e.OFF,"Manual")}},"Manual")),l.createElement("button",{type:"button",className:"btn btn-success "+("Schedule"==p?"btn-fill":""),disabled:x,onClick:function(){e.setState({InsightChanged:!0,currentChange:"state",controlStatus:"Schedule"})}},"Schedule"),l.createElement("button",{type:"button",disabled:x,className:"btn btn-success "+("Optimize"==p?"btn-fill":""),onClick:function(){m&&u?document.getElementById("btnOptimize").click():e.handleOptimize()}},"Optimize"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",disabled:x,className:n.mode===o.c.OFF?"btn btn-fill":"btn",onClick:function(){return e.changeMode(n,o.c.OFF)}},"Off"),l.createElement("button",{type:"button",className:n.mode===o.c.HEAT?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeMode(n,o.c.HEAT)}},"Heat"),l.createElement("button",{type:"button",className:n.mode===o.c.COOL?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeMode(n,o.c.COOL)}},"Cool"),l.createElement("button",{type:"button",className:n.mode===o.c.AUTO?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeMode(n,o.c.AUTO)}},"Auto")))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("div",{className:"InsightHeading"},l.createElement("i",{className:"fa fa-first-order"})," Fan"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n.fan===o.b.AUTO?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeFanSetting(n,o.b.AUTO)}},"Auto"),l.createElement("button",{type:"button",className:n.fan===o.b.ON?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeFanSetting(n,o.b.ON)}},"On")))),a.monitoringControl&&a.monitoringControlDeviceType&&l.createElement(y.a,{instance:b,buildingName:C,monconType:a.monitoringControlDeviceType,moncon:a.monitoringControl,deviceId:a.deviceID,monconRDFsLabel:a.rdfsLabel}),!w&&l.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){e.setState({detailsExpanded:!s})}},l.createElement("i",{className:s?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),l.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",a.wirelessConfig&&a.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",a.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",a.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",a.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",a.deviceID?a.deviceID:""),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Last Data Synced At:")," ",I)))),l.createElement("div",{className:i?"InsightApplyChanges":"hidden"},!D&&l.createElement("h4",null,"Do you want to apply these changes?"),D&&l.createElement("h4",null," Both heating and cooling could be on at the same time with these setpoints, please modify your request"),!D&&l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(a,n)}},"Apply Changes"))))),l.createElement("button",{id:"btnOptimize",style:{display:"none"},"data-toggle":"modal","data-target":"#showOptimizeDialog"},"."),l.createElement(g.a,{id:"showOptimizeDialog",cancelButtonId:"cancelOptimizeDialog",onSaveButtonClick:function(){e.handleOptimize()},saveButtonText:"Yes",showCancelButton:!0,showSaveButton:!1,cancelButtonText:"Cancel",heading:"Select One"},l.createElement("div",{className:"card padding-10"},l.createElement("div",{className:"row text-center col-md-offset-1"},m&&l.createElement("div",{onClick:function(){e.handleOptimalSelection("buildingOptimal",!0),e.setState({spaceOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},l.createElement("label",{className:"text-center title"}," Building Optimal ")),u&&l.createElement("div",{onClick:function(){e.handleOptimalSelection("spaceOptimal",!0),e.setState({buildingOptimal:!1},function(){document.getElementById("cancelOptimizeDialog").click()})},className:"col-md-5 padding-10 margin-5 text-center btn btn-lg btn-secondary",style:{cursor:"pointer"}},l.createElement("label",{className:"text-center title"}," Space Optimal ")))))))))},t}(l.Component);t.default=w},1489:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(779)),o=n(668),r=n.n(o),i=n(31),s=n(908),c=n(10),m=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=this&&this.__assign||function(){return(u=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},h=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n},f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ptacController:Object(),schedule:Object(),relayBoardsList:[],isDefrost:n.props.isDefrost,compressorADPDB:n.props.compressorADPDB?n.props.compressorADPDB:Object(),refEquipment:n.props.refEquipment?n.props.refEquipment:""},n.addItem=n.addItem.bind(n),n.setDropdownValues=n.setDropdownValues.bind(n),n.onchangeHandler=n.onchangeHandler.bind(n),n.onSelectChangeHandler=n.onSelectChangeHandler.bind(n),n.onRelayStatusChangeHandler=n.onRelayStatusChangeHandler.bind(n),n.fetchPTACInfo=n.fetchPTACInfo.bind(n),n}return m(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,this.fetchPTACInfo()];case 1:return t.sent(),e=this.state.ptacController,console.log("ptacController: ",e),[2]}})})},t.prototype.componentWillReceiveProps=function(e){return d(this,void 0,void 0,function(){var t=this;return p(this,function(n){return this.setState({schedule:e.schedule,deviceType:e.DeviceType,isDefrost:e.isDefrost,compressorADPDB:e.compressorADPDB,refEquipment:e.refEquipment},function(){t.setDropdownValues()}),[2]})})},t.prototype.setDropdownValues=function(){var e=this.state.deviceType,t=[];e&&-1==e.indexOf("OneRelay")?(t.push({ontology:"all",rdfsLabel:"All"}),t.push({ontology:"1",rdfsLabel:"Relay 1"}),t.push({ontology:"2",rdfsLabel:"Relay 2"}),t.push({ontology:"3",rdfsLabel:"Relay 3"}),t.push({ontology:"4",rdfsLabel:"Relay 4"})):t.push({ontology:"OneRelay",rdfsLabel:"Relay"}),this.setState({schedule:this.props.schedule,relayBoardsList:t})},t.prototype.addItem=function(){var e=this,t=this.state,n=t.schedule,a=t.deviceType,l=t.compressorADPDB,o=t.refEquipment,r=t.isDefrost,i=this.props,s=i.day,c=i.ControlName;n&&!n[s]&&(n[s]=[]);var m=new Date(new Date(new Date(new Date(Date.now()).setMinutes(0)).setHours(9)).setSeconds(0)),u=m;if(u=n[s].length>0&&n[s][n[s].length-1]&&n[s][n[s].length-1].start?new Date(new Date(new Date(new Date(Date.now()).setHours(new Date(n[s][n[s].length-1].start).getHours()+1)).setMinutes(0)).setSeconds(0)):m,a&&-1!=a.indexOf("OneRelay"))n[s].push({setPoint:"",setRelayName:"OneRelay",setRelayStatus:"",start:u});else if(c&&"CompressorControl"==c){var d=r?void 0:l&&l.LowTemp?l.LowTemp:0,p=r?"Defrost":"Box";n[s].push({setCoolPoint:""+d,setRelayStatus:"",start:u,compressorScheduleType:p,refEquipment:o,setRelayName:""})}else c&&"PTACControl"==c?n[s].push({setCoolPoint:"",setRelayStatus:"",start:u,setHeatPoint:""}):n[s].push({setPoint:"",setRelayName:"",setRelayStatus:"",start:u});this.setState({schedule:n},function(){e.props.update_Schedule(n)})},t.prototype.removeItem=function(e){var t=this,n=this.state.schedule,a=this.props.day;n[a].splice(e,1),this.setState({schedule:n},function(){t.props.update_Schedule(n)})},t.prototype.onchangeHandler=function(e,t){var n=this,a=this.state.schedule,l=this.props.day;a[l][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onBlurSetPoint=function(e,t){var n=this,a=this.state.schedule,o=this.props,r=o.day,s=o.InsightInfo;s&&s.mode==l.c.AUTO&&a[r][e].setHeatPoint>=a[r][e].setCoolPoint&&("setHeatPoint"==t.target.name?a[r][e].setCoolPoint=a[r][e].setHeatPoint?parseInt(a[r][e].setHeatPoint)+1:parseInt(t.target.value)+1:a[r][e].setHeatPoint=a[r][e].setCoolPoint?parseInt(a[r][e].setCoolPoint)-1:parseInt(t.target.value)-1,Object(i.a)("Both heating and cooling could be on at the same time with these setpoints, please modify your request")),a[r][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onBlurSetPointCompressor=function(e,t){var n=this,a=this.state,l=a.schedule,o=a.compressorADPDB,r=this.props,i=r.day,s=r.ControlName;l[i][e][t.target.name]=t.target.value,"CompressorControl"==s&&o&&(t.target.value<=o.LowTemp&&(l[i][e][t.target.name]=""+o.LowTemp),t.target.value>=o.HighTemp&&(l[i][e][t.target.name]=""+o.HighTemp)),this.setState({schedule:l},function(){n.props.update_Schedule(l)})},t.prototype.onSelectChangeHandler=function(e,t){var n=this,a=this.state.schedule,l=this.props.day;a[l][e][t.target.name]=t.target.value,this.setState({schedule:a},function(){n.props.update_Schedule(a)})},t.prototype.onRelayStatusChangeHandler=function(e,t,n){var a=this,l=this.state.schedule,o=this.props.day;l[o][e][t.target.name]=n,this.setState({schedule:l},function(){a.props.update_Schedule(l)})},t.prototype.startChangeHandler=function(e,t){var n=this,a=this.state.schedule,l=this.props.day;if(t){var o=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),s=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),o,r,i);a[l][e].start=s.toString(),this.setState({schedule:a},function(){n.props.update_Schedule(a)})}},t.prototype.fetchPTACInfo=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,o;return p(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.equipmentOntology,[4,Object(s.a)(t,null,null,n)];case 1:return(l=r.sent())&&l.length>0?[4,Object(s.e)(l)]:[3,3];case 2:o=r.sent(),a=o[0],this.setState({ptacController:a}),r.label=3;case 3:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.day,o=t.ControlName,i=t.InsightInfo,s=this.state,m=s.schedule,d=s.relayBoardsList,p=s.deviceType,f=s.isDefrost,g=s.ptacController,b=p&&-1!=p.indexOf("OneRelay"),v=function(e){var t=e.value,n=h(e,["value"]);return a.createElement("input",u({value:t.toLocaleString()},n))};return a.createElement(a.Fragment,null,a.createElement("div",{className:"card"},a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-3 col-sm-12 col-xs-12 headingText",style:{paddingLeft:30,paddingTop:15}},n),a.createElement("div",{className:"col-md-9 col-sm-12 col-xs-12 headingText no-padding"},m[n]&&m[n].map(function(t,n){var s=new Date(new Date(new Date(new Date(Date.now()).setMinutes(0)).setHours(9)).setSeconds(0)),m=t.start&&t.start.toString().length>10?new Date(t.start):s;return a.createElement("div",{className:"row padding-5"},"RelayControl"==o&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-6"},a.createElement("select",{className:"form-control",name:"setRelayName",disabled:b,value:t.setRelayName,onChange:function(t){e.onSelectChangeHandler(n,t)}},!b&&a.createElement("option",{value:"",key:-2},"Select"),d.map(function(e,t){return a.createElement("option",{key:t,value:e.ontology},e.rdfsLabel," ")}))),a.createElement("div",{className:"col-sm-6"},a.createElement("button",{type:"button",className:"off"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"off")}},"Off"),a.createElement("button",{type:"button",className:"on"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"on")}},"On")))),"CompressorControl"==o&&f&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12 center"},a.createElement("button",{type:"button",className:"Inhibit"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"Inhibit")}},"Inhibit"),a.createElement("button",{type:"button",className:"Released"==t.setRelayStatus?"btn btn-fill":"btn",name:"setRelayStatus",onClick:function(t){e.onRelayStatusChangeHandler(n,t,"Released")}},"Released")))),"CompressorControl"==o&&!f&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Cool Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){return e.onchangeHandler(n,t)},onBlur:function(t){return e.onBlurSetPointCompressor(n,t)},style:{border:"1px solid gray"}})))),"PTACControl"==o&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-8"},a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setPoint,name:"setPoint",onChange:function(t){return e.onchangeHandler(n,t)},style:{border:"1px solid gray"},disabled:"Off"==Object(c.g)(g.mode)})))),p&&p.toLowerCase().indexOf("thermostat")>-1&&a.createElement(a.Fragment,null," ","RelayControl"!=o&&i&&i.mode==l.c.HEAT&&a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Heat Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setHeatPoint,name:"setHeatPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})),"RelayControl"!=o&&i&&i.mode==l.c.COOL&&a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Cool Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}})),"RelayControl"!=o&&i&&(i.mode==l.c.AUTO||i.mode==l.c.OFF)&&a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6 headingText"},a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6",style:{padding:"4px"}},a.createElement("span",null,"Heat To"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setHeatPoint,name:"setHeatPoint",onChange:function(t){e.onchangeHandler(n,t)},onBlur:function(t){e.onBlurSetPoint(n,t)},style:{border:"1px solid gray"}})),a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-6",style:{padding:"4px"}},a.createElement("span",null,"Cool To"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setCoolPoint,name:"setCoolPoint",onChange:function(t){e.onchangeHandler(n,t)},onBlur:function(t){e.onBlurSetPoint(n,t)},style:{border:"1px solid gray"}}))))," "),p&&p.toLowerCase().indexOf("intesis")>-1&&a.createElement(a.Fragment,null," ",a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Set Point"),a.createElement("input",{type:"number",max:"100",min:"0",className:"form-control",placeholder:"70 F\xb0",value:t.setPoint,name:"setPoint",onChange:function(t){e.onchangeHandler(n,t)},style:{border:"1px solid gray"}}))),a.createElement("div",{className:"col-md-4 col-sm-3 col-xs-3 headingText"},a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Start"),a.createElement(r.a,{className:"form-control",selected:m,name:"start",onChange:function(t){e.startChangeHandler(n,t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"hh:mm aa",timeIntervals:15,customInput:a.createElement(v,{value:m.toLocaleTimeString(),onChange:function(t){e.startChangeHandler(n,t)}})})),a.createElement("div",{className:"col-md-2 col-sm-3 col-xs-3 headingText"},a.createElement("button",{className:"btn-sm btn-danger active shortcut-btn",onClick:function(){e.removeItem(n)}},"X")))}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2",style:{paddingTop:"10px",textAlign:"center"}},a.createElement("button",{className:"btn btn-success",onClick:function(){e.addItem()}},a.createElement("i",{className:"fa fa-plus"}))))))},t}(a.Component);t.a=f},1490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=(n.n(a),n(701)),o=n(1170),r=n(656),i=n(11),s=n(759),c=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",relatedEquipment:[],manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},enclosure:"",deviceNumber:""}},n}return c(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e,t,n,a;return u(this,function(l){switch(l.label){case 0:return e=this.props,t=e.buildingName,n=e.InsightName,[4,Object(r.t)(n,t)];case 1:return a=l.sent(),this.setState({Moncon:a}),[2]}})})},t.prototype.render=function(){var e=this.props,t=e.instance,n=e.buildingName,r=e.InsightName,c=e.ControlName,m=e.type,u=e.hideTabs,d=this.state.Moncon,p=JSON.parse(i.a.getItem("user")),h=parseInt(p.role);return a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!u&&a.createElement(l.a,{InsightName:r,buildingName:n,instance:t,ControlName:c,type:m}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement(o.default,{instance:t,alarmType:4==h?s.a.CustomerAlarm:s.a.OperationalAlarm,deviceName:r,buildingName:n,isInTab:!0,deviceId:d.deviceID}))))))},t}(a.Component);t.default=d},1491:function(e,t,n){"use strict";var a,l=n(2),o=(n.n(l),n(1347)),r=n.n(o),i=n(1348),s=(n.n(i),n(23)),c=n(668),m=n.n(c),u=n(116),d=n(679),p=n(10),h=n(650),f=n(31),g=n(720),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},E={height:600},N={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"\xb0F"}},C={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp, W, On/Off, Volts"}},O={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Amp"}},S={x:{type:"timeseries",tick:{fit:!1,format:"%m-%d %H:%M:%S"}},y:{label:"W"}},T={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"State"}},w={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Volts"}},x={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"Hz"}},D={x:{type:"timeseries",tick:{fit:!0,format:"%m-%d %H:%M:%S"}},y:{label:"MWh"}},I=function(e){function t(t){var n=e.call(this,t)||this,a=new Date(new Date(Date.now()).setHours(new Date(Date.now()).getHours()-1)),l=new Date(Date.now());return n.state={graphData:{x:"x",columns:[]},graphData1:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]},fourRelayGraphData:{x:"x",columns:[]},sixwattNodeGraphData:{x:"x",columns:[]},from:a,to:l,timeIntervalLog:{buildingName:n.props.buildingName,minutes:0,seconds:0},isRelayV4Device:!1,isRelayI1Device:!1,isIntesisDevice:!1,btnSeparateGraph:!1,btngraph:!1,showGraph:!1,isCompressor:!1,isCBW406:!1,isCBW418:!1,isWattNode:!1,isATS:!1,showLoading:!0},n.handleGraph=n.handleGraph.bind(n),n.handleFromTimeChange=n.handleFromTimeChange.bind(n),n.handleToTimeChange=n.handleToTimeChange.bind(n),n.fetchIntesisGraphData=n.fetchIntesisGraphData.bind(n),n.getRelayV4GraphData=n.getRelayV4GraphData.bind(n),n.fetchGraphData=n.fetchGraphData.bind(n),n.handleTimeIntervalChange=n.handleTimeIntervalChange.bind(n),n.saveTimeLog=n.saveTimeLog.bind(n),n.getTimeLog=n.getTimeLog.bind(n),n.showgraphData=n.showgraphData.bind(n),n.getCBW406GraphData=n.getCBW406GraphData.bind(n),n.getCBW418GparhData=n.getCBW418GparhData.bind(n),n.getATSGraphData=n.getATSGraphData.bind(n),n.validation=n.validation.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){switch(e.label){case 0:return Object(s.B)(!1),[4,this.getTimeLog()];case 1:return e.sent(),this.validation(),[2]}})})},t.prototype.validation=function(){var e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),l=e&&e.monitoringControlDeviceType&&"WattNode"==e.monitoringControlDeviceType;this.setState({isRelayV4Device:t,isIntesisDevice:n,isRelayI1Device:a,isWattNode:l})},t.prototype.handleGraph=function(){var e=[75,72,70,65,66,68,77,80],t=[73,78,72,68,74,80,65,69],n=[70,82,65,62,76,78,67,60],a=[];a=Object(s.o)(new Date(2020,0,1),new Date,8),e.unshift("heattemp"),t.unshift("cooltemp"),n.unshift("roomtemp"),a.unshift("x");var l={x:"x",columns:[a,e,t,n]};this.setState({graphData:l})},t.prototype.handleFromTimeChange=function(e){this.setState({from:e,graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]}})},t.prototype.handleToTimeChange=function(e){this.setState({to:e,graphData:{x:"x",columns:[]},graphData2:{x:"x",columns:[]},graphData3:{x:"x",columns:[]},graphData4:{x:"x",columns:[]},graphData5:{x:"x",columns:[]},graphData6:{x:"x",columns:[]}})},t.prototype.handleTimeIntervalChange=function(e){var t=this.state.timeIntervalLog;t[e.target.name]=e.target.value,this.setState({timeIntervalLog:t})},t.prototype.fetchGraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i;return y(this,function(s){return e=this.props.Moncon,t=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayv4"),n=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("intesis"),a=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relayi1"),l=e&&e.monitoringControlDeviceType&&-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ats"),o=e&&e.monitoringControlDeviceType&&"WattNode"==e.monitoringControlDeviceType,r=e&&e.monitoringControlDeviceType&&"CBW406"==e.monitoringControlDeviceType,i=e&&e.monitoringControlDeviceType&&"CBW418"==e.monitoringControlDeviceType,t&&(this.getRelayV4GraphData(),this.setState({isRelayV4Device:t})),a&&(this.getRelayI1GraphData(),this.setState({isRelayI1Device:a})),n&&(this.fetchIntesisGraphData(),this.setState({isIntesisDevice:n})),r&&(this.getCBW406GraphData(),this.setState({isCBW406:r})),i&&(this.getCBW418GparhData(),this.setState({isCBW418:i})),o&&(this.GetWattNodeBasicGraphData(),this.setState({isWattNode:o})),l&&(this.getATSGraphData(),this.setState({isATS:l})),[2]})})},t.prototype.fetchIntesisGraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,c,m,p,h,f=this;return y(this,function(g){switch(g.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,Object(u.a)(!0),l=[],o=[],r=[],i=[],c=[],m=[],p=[],h=[],e.deviceID?[4,Object(d.d)(e.deviceID,n,a).then(function(e){e.forEach(function(e){1!=isNaN(e.roomtemp)&&o.push(Object(s.a)(e.roomtemp)),1!=isNaN(e.setpoint)&&l.push(Object(s.a)(e.setpoint)),e.fanspeed?i.push(e.fanspeed):i.push("undefined"),e.horizontalvans?c.push(e.horizontalvans):c.push("undefined"),e.usermode?r.push(e.usermode):r.push("undefined"),e.verticalvans?m.push(e.verticalvans):m.push("undefined"),e.wifiSignal?p.push(e.wifiSignal):p.push("undefined"),h.push(new Date(e.timestamp))}),l.unshift("setpoint"),o.unshift("roomtemp"),i.unshift("fanspeed"),c.unshift("horizontalvans"),r.unshift("mode"),m.unshift("verticalvans"),p.unshift("wifiSignal"),h.unshift("x");var t={x:"x",columns:[h,l,o,i,c,r,m,p]};f.setState({graphData:t})})]:[3,2];case 1:g.sent(),g.label=2;case 2:return Object(u.a)(!1),[2]}})})},t.prototype.getRelayV4GraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s,c,m,h,f,g,b,v,E,N,C,O,S,T,w,x,D,I,_,A,L,j,R,k,B,P,F;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,l=[],o=[],r=[],i=[],s=[],c=[],m=[],h=[],f=[],g=[],b=[],v=[],E=[],N=this.state.btngraph,e.deviceID?(N||Object(u.a)(!0,"loading graph data..."),[4,Object(d.g)(e.topic,n,a)]):[3,4];case 1:if(!((C=y.sent()).length>0))return[3,3];for(O=0;O<C.length;O++)(S=C[O])&&(l.push(S.mAmps_relay1),o.push(S.mAmps_relay2),r.push(S.mAmps_relay3),i.push(S.mAmps_relay4),s.push(S.nominal_src_volts),c.push(S.power_Wt_relay1),m.push(S.power_Wt_relay2),h.push(S.power_Wt_relay3),T=Object(d.a)(parseInt(S.v4relay_state)),E.push(new Date(S.timestamp)),3==T.length?T="0"+T:2==T.length?T="00"+T:1==T.length&&(T="000"+T),w=T[3],x=T[2],D=T[1],I=T[0],f.push(w||"0"),g.push(x||"0"),b.push(D||"0"),v.push(I||"0"));return[4,Object(d.x)(e.deviceName)];case 2:_=y.sent(),A=[],_[0]?(L=_[0],j=Object(p.g)(L.relayNames),A=j.split(",")):(A.push("Relay 1"),A.push("Relay 2"),A.push("Relay 3"),A.push("Relay 4")),l.unshift(A[0]+" Amp"),o.unshift(A[1]+" Amp"),r.unshift(A[2]+" Amp"),i.unshift(A[3]+" Amp"),s.unshift("Nominal Source Volts"),c.unshift(A[0]+" Watts"),m.unshift(A[1]+" Watts"),h.unshift(A[2]+" Watts"),E.unshift("x"),f.unshift(A[0]+" State"),g.unshift(A[1]+" State"),b.unshift(A[2]+" State"),v.unshift(A[3]+" State"),k={x:"x",columns:[E,l,o,r,i]},B={x:"x",columns:[E,c,m,h]},P={x:"x",columns:[E,f,g,b,v]},F={x:"x",columns:[E,s]},(R={x:"x",columns:[E,l,o,r,i,c,m,h,f,g,b,v,s]}).columns[R.columns.length-1][1]&&this.setState({fourRelayGraphData:R}),k.columns[k.columns.length-1][1]&&this.setState({graphData:k}),B.columns[B.columns.length-1][1]&&this.setState({graphData2:B}),P.columns[P.columns.length-1][1]&&this.setState({graphData3:P}),s[s.length-1]&&this.setState({graphData4:F}),y.label=3;case 3:N||Object(u.a)(!1),y.label=4;case 4:return[2]}})})},t.prototype.GetWattNodeBasicGraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s,c,m,d,p,h,f,b,v,E,N,C,O,S,T,w,x,D,I,_,A,L;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,l=t.btngraph,o=e.topic.split(","),i=[],s=[],c=[],m=[],d=[],p=[],h=[],f=[],b=[],v=[],E=[],N=[],C=[],O=[],S=[],T=[],(r=[]).push("EnerygySum"),i.push("energyPOSSUM"),s.push("energySumR"),c.push("energyPosSumNR"),m.push("powerSum"),d.push("powerA"),p.push("powerB"),h.push("powerC"),f.push("voltA"),b.push("voltB"),v.push("voltC"),E.push("VoltAvgLL"),N.push("voltAB"),C.push("voltAC"),O.push("voltBC"),S.push("freq"),T.push("x"),e.deviceID?(l||Object(u.a)(!0,"loading graph data..."),[4,Object(g.h)(o[0],a,n)]):[3,2];case 1:(w=y.sent()).length>0&&(w.forEach(function(e){e&&(r.push(e.EnergySum),i.push(e.EnergyPosSum),s.push(e.EnergySumNR),c.push(e.EnergyPosSumNR),m.push(e.PowerSum),d.push(e.PowerA),p.push(e.PowerB),h.push(e.PowerC),f.push(e.VoltA),b.push(e.VoltC),v.push(e.VoltC),E.push(e.VoltAvgLL),N.push(e.VoltAB),C.push(e.VoltAC),O.push(e.VoltBC),S.push(e),T.push(new Date(e.timestamp)))}),D={x:"x",columns:[T,N,O,C]},I={x:"x",columns:[T,f,b,v]},_={x:"x",columns:[T,S]},A={x:"x",columns:[T,s]},L={x:"x",columns:[T,c]},(x={x:"x",columns:[T,d,p,h,m]}).columns[x.columns.length-1][1]&&this.setState({graphData:x}),D.columns[D.columns.length-1][1]&&this.setState({graphData2:D}),I.columns[I.columns.length-1][1]&&this.setState({graphData3:I}),_.columns[_.columns.length-1][1]&&this.setState({graphData4:_}),A.columns[A.columns.length-1][1]&&this.setState({graphData5:A}),L.columns[L.columns.length-1][1]&&this.setState({graphData6:L})),l||Object(u.a)(!1),y.label=2;case 2:return[2]}})})},t.prototype.getRelayI1GraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s,c,m,u,h,f,g,b,v,E;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,l=[],o=[],r=[],i=[],s=[],c=[],m=[],u=[],[4,Object(d.f)(e.topic,a,n)];case 1:return(h=y.sent()).length>0?(h.forEach(function(e){e&&(l.push(e.i1relay_state),o.push(e.active_power_Watts),o.push(e.active_power_Watts),r.push(e.current_Amperes),i.push(e.frequency_Hz),s.push(e.import_active_energy_Wh),c.push(e.power_factor),m.push(e.voltage_volts),u.push(new Date(e.timestamp)))}),[4,Object(d.x)(e.deviceName)]):[3,3];case 2:f=y.sent(),g=[],f[0]?(b=f[0],v=Object(p.g)(b.relayNames),g=v.split(",")):g.push("Relay"),l.unshift(g[0]+" State"),o.unshift(g[0]+" Watts"),r.unshift(g[0]+"Amps"),i.unshift(g[0]+" frequency_Hz"),s.unshift(g[0]+" Watts/Hour"),c.unshift(g[0]+" Power Factor"),m.unshift(g[0]+" Volts"),u.unshift("x"),E={x:"x",columns:[u,l,o,o,r,i,s,c,m]},this.setState({graphData:E}),y.label=3;case 3:return[2]}})})},t.prototype.getCBW406GraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s,c,m,d,p,h,f,b,v,E,N,C,O,S,T,w,x,D,I;return y(this,function(y){switch(y.label){case 0:return e=this.props,t=e.Moncon,n=e.compressorBoxType,a=e.graphTab,l=e.isEsolutionController,o=this.state,r=o.from,i=o.to,(s=o.showLoading)&&Object(u.a)(!0),c=[],m=[],d=[],p=[],h=[],f=[],b=[],v=[],E=[],N=[],C=[],O=[],S=[],T=[],w=[],[4,Object(g.f)(t.topic,r,i)];case 1:return(x=y.sent()).length>0&&x.forEach(function(e){e&&(c.push(""+e.vin),m.push(""+e.register1),d.push(""+e.t3Ref1Front.toFixed(2)),p.push(""+e.t4Ref1Back.toFixed(2)),h.push(""+e.t5Ref1EvapFan.toFixed(2)),f.push(""+e.t6Ref1CompressorIn.toFixed(2)),b.push(""+e.t7Ref1CompressorOut.toFixed(2)),v.push(""+e.t8Ref1WaxProbe.toFixed(2)),E.push(""+e.t3Ref2Front.toFixed(2)),N.push(""+e.t4Ref2Back.toFixed(2)),C.push(""+e.t5Ref2EvapFan.toFixed(2)),O.push(""+e.t6Ref2CompressorIn.toFixed(2)),S.push(""+e.t7Ref2CompressorOut.toFixed(2)),T.push(""+e.t8Ref2WaxProbe.toFixed(2)),w.push(new Date(e.timestamp)))}),c.unshift("Vin"),m.unshift("Register"),d.unshift("Front"),p.unshift("Back"),h.unshift("Evaporator Fan"),f.unshift("Compressor In"),b.unshift("Compressor Out"),v.unshift("Solid"),E.unshift("Front"),N.unshift("Back"),C.unshift("Evaporator Fan"),O.unshift("Compressor In"),S.unshift("Compressor Out"),T.unshift("Solid"),w.unshift("x"),l||(D={x:"x",columns:[c,m,d,p,h,f,b,v,w]},I={x:"x",columns:[c,m,E,N,C,O,S,T,w]},this.setState({graphData:D,graphData2:I})),"graph1"==a&&"ref1"==n?D={x:"x",columns:[d,p,v,w]}:"graph1"==a&&"ref2"==n&&(D={x:"x",columns:[E,N,T,w]}),"graph2"==a&&"ref1"==n?D={x:"x",columns:[d,p,h,f,b,v,w]}:"graph2"==a&&"ref2"==n&&(D={x:"x",columns:[E,N,C,O,S,T,w]}),"graph3"==a&&"ref1"==n?D={x:"x",columns:[c,m,d,p,h,f,b,v,w]}:"graph3"==a&&"ref2"==n&&(D={x:"x",columns:[c,m,E,N,C,O,S,T,w]}),"graph4"==a&&"ref1"==n?D={x:"x",columns:[h,b,w]}:"graph4"==a&&"ref2"==n&&(D={x:"x",columns:[C,S,w]}),D.columns[D.columns.length-1][1]&&this.setState({graphData:D}),I&&I.columns[I.columns.length-1][1]&&this.setState({graphData2:I}),s&&Object(u.a)(!1),[2]}})})},t.prototype.getCBW418GparhData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s,c,m,d,p,h,f,b,v,E,N,C,O,S,T,w,x;return y(this,function(y){switch(y.label){case 0:return e=this.props.Moncon,t=this.state,n=t.from,a=t.to,Object(u.a)(!0),l=[],o=[],r=[],i=[],s=[],c=[],m=[],d=[],p=[],h=[],f=[],b=[],v=[],E=[],N=[],C=[],O=[],[4,Object(g.g)(e.topic,n,a)];case 1:return(S=y.sent()).length>0&&S.forEach(function(e){e&&(l.push(""+e.a13Ref1Compressor),o.push(""+e.a14Ref1FreezerDefrost),r.push(""+e.a15Ref1PressureSensor),i.push(""+e.a16Ref1DoorContact),s.push(""+e.analogInput5),c.push(""+e.analogInput6),m.push(""+e.analogInput7),d.push(""+e.analogInput8),p.push(""+e.register1),h.push(""+e.serialNumber),f.push(""+e.minRecRefresh),b.push(""+e.poweranalogInput5),v.push(""+e.poweranalogInput6),E.push(""+e.poweranalogInput7),N.push(""+e.poweranalogInput8),C.push(new Date(e.timestamp)),O.push(""+360*e.a13Ref1Compressor))}),l.unshift("Compressor"),o.unshift("Freezer Defrost"),r.unshift("Pressure Sensor"),i.unshift("Door Contact"),s.unshift("Analog Input 5"),c.unshift("Analog Input 6"),m.unshift("Analog Input 7"),d.unshift("Analog Input 8"),p.unshift("Register"),h.unshift("Serial Number"),f.unshift("Refresh"),b.unshift("Power Analog Input 5"),v.unshift("Power Analog Input 6"),E.unshift("Power Analog Input 7"),N.unshift("Power Analog Input 8"),O.unshift("Amalgamated Watts"),C.unshift("x"),w={x:"x",columns:[C,s,c,m,d]},x={x:"x",columns:[C,b,v,E,N]},(T={x:"x",columns:[C,l,o,r,i]}).columns[T.columns.length-1][1]&&this.setState({graphData:T}),w.columns[w.columns.length-1][1]&&this.setState({graphData2:w}),x.columns[x.columns.length-1][1]&&this.setState({graphData3:x}),Object(u.a)(!1),[2]}})})},t.prototype.getATSGraphData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s,c;return y(this,function(m){switch(m.label){case 0:return e=this.props.Moncon,t=this.state,n=t.to,a=t.from,l=[],o=[],r=[],i=e.topic&&e.topic.split(",")&&e.topic.split(",").length>0?e.topic.split(",")[0]:e.topic,[4,Object(g.e)(i,a,n)];case 1:return(s=m.sent()).length>0&&(s.forEach(function(e){e&&(l.push(e.Normal_Frequency),o.push(e.Emergency_Frequency),r.push(new Date(e.timestamp)))}),o.unshift("Emergency Frequency"),l.unshift("Normal Frequency"),r.unshift("x"),c={x:"x",xFormat:"%Y-%m-%dT%H:%M:%S.%LZ",columns:[r,o,l]},this.setState({graphData:c})),[2]}})})},t.prototype.saveTimeLog=function(){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=this.state.timeIntervalLog,[4,Object(d.l)(e)];case 1:return t.sent()&&Object(f.b)("Successfully Save TimeInterval"),[2]}})})},t.prototype.getTimeLog=function(){return v(this,void 0,void 0,function(){var e,t;return y(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(d.h)(e)]:[3,2];case 1:(t=n.sent())[0]?this.setState({timeIntervalLog:t[0]}):this.setState({timeIntervalLog:{buildingName:this.props.buildingName,minutes:0,seconds:0}}),n.label=2;case 2:return[2]}})})},t.prototype.showgraphData=function(){var e=this,t=this.state,n=t.btngraph,l=t.to,o=t.from;n=!n,this.setState({btngraph:n},function(){n?(a&&clearInterval(a),a=setInterval(function(){l=new Date,(o=new Date).setMinutes(o.getMinutes()-30),e.setState({to:l,from:o},function(){e.fetchGraphData()})},5e3)):clearInterval(a)})},t.prototype.render=function(){var e=this,t=this.props.isTwoColumnGraph,n=this.state,a=n.from,o=n.to,i=n.graphData,s=n.isRelayV4Device,c=n.graphData2,u=n.graphData3,d=n.graphData4,p=n.graphData5,f=n.graphData6,g=n.isRelayI1Device,b=n.isIntesisDevice,v=n.btnSeparateGraph,y=n.fourRelayGraphData,I=n.timeIntervalLog,_=n.btngraph,A=n.isCBW406,L=n.isCBW418,j=n.isWattNode,R=n.isATS,k={x:{show:!0},y:{show:!0}},B=l.createElement(r.a,{data:i,size:E,axis:s?O:N,unloadBeforeLoad:!0,grid:k}),P=l.createElement(r.a,{data:i,size:E,axis:g?O:N,unloadBeforeLoad:!0,grid:k}),F=l.createElement(r.a,{data:y,size:E,axis:C,unloadBeforeLoad:!0,grid:k}),M=l.createElement(r.a,{data:c,size:E,axis:S,unloadBeforeLoad:!0,grid:k}),H=l.createElement(r.a,{data:u,size:E,axis:T,unloadBeforeLoad:!0,grid:k}),W=l.createElement(r.a,{data:d,size:E,axis:w,unloadBeforeLoad:!0,grid:k}),q=l.createElement(r.a,{data:i,size:E,axis:N,unloadBeforeLoad:!0,grid:k}),z=l.createElement(r.a,{data:c,size:E,axis:N,unloadBeforeLoad:!0,grid:k}),G=l.createElement(r.a,{data:i,size:E,axis:O,unloadBeforeLoad:!0,grid:k}),V=l.createElement(r.a,{data:i,size:E,axis:S,unloadBeforeLoad:!0,grid:k}),U=l.createElement(r.a,{data:c,size:E,axis:w,unloadBeforeLoad:!0,grid:k}),J=l.createElement(r.a,{data:u,size:E,axis:w,unloadBeforeLoad:!0,grid:k}),Q=l.createElement(r.a,{data:d,size:E,axis:x,unloadBeforeLoad:!0,grid:k}),K=l.createElement(r.a,{data:p,size:E,axis:D,unloadBeforeLoad:!0,grid:k}),X=l.createElement(r.a,{data:f,size:E,axis:D,unloadBeforeLoad:!0,grid:k}),Y=l.createElement(r.a,{data:c,size:E,axis:O,unloadBeforeLoad:!0,grid:k}),Z=l.createElement(r.a,{data:u,size:E,axis:O,unloadBeforeLoad:!0,grid:k}),$=l.createElement(r.a,{data:i,size:E,axis:x,unloadBeforeLoad:!0,grid:k});return l.createElement("div",{className:t?"row col-md-6":"row col-md-12",style:{float:t?"right":"left"},id:"divGraphs"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-2 col-md-offset-10"})),l.createElement("br",null),!_&&l.createElement(l.Fragment,null,l.createElement("div",{className:"row showhide timeLine col-md-6"},l.createElement("div",{className:"col-md-4 col-sm-6"},l.createElement("div",{className:"col-md-2 padding-5"},l.createElement("label",null,"From: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),l.createElement("div",{className:"col-md-4 col-sm-6"},l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"To: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:o,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))))),l.createElement("div",{className:"row"},!_&&l.createElement(l.Fragment,null,l.createElement("div",{className:t?"col-md-6 col-sm-6":"col-md-3 col-sm-3"},l.createElement("div",{className:"col-md-2 padding-5"},l.createElement("label",{style:{color:"#fff"}},"From: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:a,onChange:function(t){return e.handleFromTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"}))),l.createElement("div",{className:t?"col-md-6 col-sm-6":"col-md-3 col-sm-3"},l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",{style:{color:"#fff"}},"To: \xa0")),l.createElement("div",{className:"col-md-10 no-padding"},l.createElement(m.a,{id:"startTime",className:"form-control",selected:o,onChange:function(t){return e.handleToTimeChange(t)},timeFormat:"HH:mm",timeIntervals:15,showTimeSelect:!0,dateFormat:"yyyy/MM/d h:mm aa",timeCaption:"time"})))),l.createElement("div",{className:t?"col-md-12 center":"col-md-6 col-sm-6"},l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.fetchGraphData()}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),"Load Graph"),l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({btnSeparateGraph:!v})},style:{margin:"0 5px"}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),v?"Combine":"Separate"," Graphs"),l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:this.showgraphData,style:{margin:"0 5px"}},l.createElement("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),_?"Hide":"Show"," Live Graph"))),b&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},B),g&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},P),A&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h3",{style:{color:"white",textAlign:"center"}},"Refrigerator 1"),q),A&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h3",{style:{color:"white",textAlign:"center"}},"Refrigerator 2"),z),L&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},G),L&&c&&c.columns&&c.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},Y),L&&u&&u.columns&&u.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},Z),R&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},$),j&&i&&i.columns&&i.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h4",{className:"no-padding no-margin-color-textalign"},l.createElement("strong",null,"Power")),V),j&&c&&c.columns&&c.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h4",{className:"no-padding no-margin-color-textalign"},l.createElement("strong",null,"Phase Voltage")),U),j&&u&&u.columns&&u.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h4",{className:"no-padding no-margin-color-textalign"},l.createElement("strong",null,"Voltage")),J),j&&d&&d.columns&&d.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h4",{className:"no-padding no-margin-color-textalign"},l.createElement("strong",null,"Frequency")),Q),j&&p&&p.columns&&p.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h4",{className:"no-padding no-margin-color-textalign"},l.createElement("strong",null,"Energy Sum non-resettable")),K),j&&f&&f.columns&&f.columns.length>0&&l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},l.createElement("h4",{className:"no-padding no-margin-color-textalign"},l.createElement("strong",null,"positive Energy Sum non-resettable")),X),!v&&s&&y&&y.columns&&y.columns.length>0&&l.createElement("div",{className:"row margin-top-25px  pdfDiv",id:"DeviceStatusGraph"},F),v&&s&&i&&c&&u&&d&&u.columns[1]&&d.columns[1]&&u.columns&&i.columns&&u.columns.length>0&&d.columns&&d.columns.length>0&&i.columns.length>0&&l.createElement(l.Fragment,null," ",l.createElement("div",{id:"DeviceStatusGraph"},l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceStatusGraph"},B),l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphWatt"},M),l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphState"},H),l.createElement("div",{className:"row margin-top-25px pdfDiv",id:"DeviceGraphVolts"},W))," "),l.createElement("button",{id:"addTimeIntervalLog",className:"hidden","data-toggle":"modal","data-target":"#addTimeIntervalLogDialog",title:"Add"}," "," ",l.createElement("i",{className:"fa fa-plus"})," "),l.createElement(h.a,{id:"addTimeIntervalLogDialog",saveButtonText:"Save",heading:"Time Interval Log",onSaveButtonClick:function(){e.saveTimeLog()},disableSaveButton:!1},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"col-md-3 padding-5"},l.createElement("label",null,"Time Interval:")))),l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12 col-md-offset-2"},l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"Minute:")," "),l.createElement("div",{className:"col-md-3"},l.createElement("input",{className:"form-control",type:"number",name:"minutes",value:I.minutes,onChange:function(t){e.handleTimeIntervalChange(t)}})),l.createElement("div",{className:"col-md-1 padding-5"},l.createElement("label",null,"Second:")," "),l.createElement("div",{className:"col-md-3"},l.createElement("input",{className:"form-control",type:"number",name:"seconds",value:I.seconds,onChange:function(t){e.handleTimeIntervalChange(t)}}))))))},t}(l.Component);t.a=I},1715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(2),o=(n.n(l),n(679)),r=n(656),i=n(10),s=n(31),c=n(701),m=n(116),u=n(657),d=n(762),p=n(1349),h=n(665),f=n(666),g=n(11),b=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),v=this&&this.__assign||function(){return(v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},y=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},E=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},N=0,C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),CeilingSensorBoard_MonconModel:Object(),Old_RelayBoardInfo:Object(),RelayBoardInfo:Object(),I1RelayBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",networkDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,spaces:[],relayControlStatusDesc:"",scheduleSelected:!1,relayisOn:!1,relayisOnNo:0,relayCensorStatus:Object(),relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,I1RelayStatus:!1,relayControlStatus:"Manual",relayControlType:"",isOptimizeControl:!1,isOptimizeControlStatus:"",RelayBoardControl:Object(),relayOptimizeSettings:"",I4RelayBoardInfo:Object(),relayNoOptimize:0,devices:[],callInterval:!0,openRelayControlDialog:!1,showLogs:!1,RelayStatusMessage:["","","",""]},n,n.fetchDevices=n.fetchDevices.bind(n),n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n._fetchRelayCensorStatus=n._fetchRelayCensorStatus.bind(n),n._fetchV4RelayBoardInfo=n._fetchV4RelayBoardInfo.bind(n),n._fetchI1RelayBoardInfo=n._fetchI1RelayBoardInfo.bind(n),n._fetchI4RelayBoardInfo=n._fetchI4RelayBoardInfo.bind(n),n.fetchRelayControlSettings=n.fetchRelayControlSettings.bind(n),n.saveRelayStatusChanges=n.saveRelayStatusChanges.bind(n),n.setOptimizeSettings=n.setOptimizeSettings.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.handleRelayOnOff=n.handleRelayOnOff.bind(n),n.handleRelayControlStatus=n.handleRelayControlStatus.bind(n),n.handleScheduleSelection=n.handleScheduleSelection.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n.applyRule=n.applyRule.bind(n),n.onCloseRelayControlDialog=n.onCloseRelayControlDialog.bind(n),n.sendControlTypeAPI=n.sendControlTypeAPI.bind(n),n}return b(t,e),t.prototype.componentDidMount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,4];case 1:return e.sent(),[4,this.fetchDevices()];case 2:return e.sent(),[4,this.resetChanges(!0)];case 3:e.sent(),e.label=4;case 4:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this;a&&clearInterval(a),a=setInterval(function(){var t=e.state,n=t.callInterval;!t.modelChanged&&n&&N>=15?(e.resetChanges(!1),Object(m.a)(!1),N=0):N++},1e3)},t.prototype.componentWillUnmount=function(){return y(this,void 0,void 0,function(){return E(this,function(e){return clearInterval(a),[2]})})},t.prototype.fetchDevices=function(){return y(this,void 0,void 0,function(){var e,t;return E(this,function(n){switch(n.label){case 0:return(e=this.props.buildingName)?[4,Object(o.u)(e)]:[3,2];case 1:t=n.sent(),this.setState({devices:t}),n.label=2;case 2:return[2]}})})},t.prototype._fetchData=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l,o,s,c,d,p,h,f,g,b=this;return E(this,function(v){switch(v.label){case 0:return e=this.state,t=e.scheduleSelected,n=e.relayControlType,a=this.props,l=a.RelayDeviceName,o=a.buildingName,l?(Object(m.a)(!0),[4,Object(u.h)(this.props.buildingName)]):[3,3];case 1:return s=v.sent(),c=s&&s.length>0&&s.map(function(e){return{value:Object(i.g)(e.ontology),label:Object(i.g)(e.rdfsLabel)}}),d=Object(),[4,Object(r.t)(l,o)];case 2:d=v.sent(),t=d.isSchedule,n=d.monitoringControlDeviceType,localStorage.getItem(d.deviceID)&&localStorage.getItem(d.deviceID).length>0&&(p=localStorage.getItem(d.deviceID))&&"undefined"!=p&&(n&&-1!=n.indexOf("OneRelay")?(h=JSON.parse(localStorage.getItem(d.deviceID)),this.setState({I1RelayBoardInfo:h,modelChanged:!1,currentChange:""})):-1!=n.toLowerCase().indexOf("i4")?(f=JSON.parse(localStorage.getItem(d.deviceID)),this.setState({I4RelayBoardInfo:f,modelChanged:!1,currentChange:""})):(g=JSON.parse(localStorage.getItem(d.deviceID)),this.setState({RelayBoardInfo:g,modelChanged:!1,currentChange:""}))),this.setState({Moncon:d,EquipmentList:c,scheduleSelected:t,relayControlType:n},function(){return y(b,void 0,void 0,function(){return E(this,function(e){return this._fetchRelayCensorStatus(!0),-1!=n.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(!0):-1!=n.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(!0):this._fetchV4RelayBoardInfo(!0),this._fetchCeilingSensorBoardInfo(!0),this.fetchRelayControlSettings(),[2]})})}),Object(m.a)(!1),v.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a,l,i,c,u;return E(this,function(d){switch(d.label){case 0:e&&Object(m.a)(!0),t=this.state.Moncon,n=this.props.buildingName,a="",l=0,d.label=1;case 1:return l<t.sensors.length?(i=t.sensors[l],a=i.value,c=Object(),[4,Object(r.t)(a,n)]):[3,5];case 2:return"CeilingSensor"!=(c=d.sent()).monitoringControlDeviceType?[3,4]:[4,Object(o.n)(c).then(function(e){var t=e[0];return!t||t&&t.error?(Object(s.a)("Error occurred while fetching ceiling sensor board info."),Object()):t}).catch(function(e){return Object()})];case 3:return u=d.sent(),this.setState({CeilingSensorBoardInfo:u,CeilingSensorBoard_MonconModel:c,modelChanged:!1,currentChange:""}),[2];case 4:return l++,[3,1];case 5:return e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchI1RelayBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a;return E(this,function(l){switch(l.label){case 0:return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.state.I1RelayStatus,[4,Object(o.f)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(s.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(a=l.sent())&&a.i1relay_state&&a.i1relay_state[0]&&(n="1"==a.i1relay_state[0]),a&&a.i1relay_state&&0==a.i1relay_state[0]&&(n=!1),this.setState({I1RelayBoardInfo:a,modelChanged:!1,currentChange:"",I1RelayStatus:n}),e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchV4RelayBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a,l,r,i,c,u,d;return E(this,function(p){switch(p.label){case 0:return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,l=n.relay2Status,r=n.relay3Status,i=n.relay4Status,c=Object(),[4,Object(o.g)(t.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(s.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(t.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 1:return(c=p.sent())&&c.v4relay_state&&(u=this.ConvertDecimalToBinary(parseInt(c.v4relay_state)),d=u.split(","),a="1"==d[0],l="1"==d[1],r="1"==d[2],i="1"==d[3]),this.setState({RelayBoardInfo:c,Old_RelayBoardInfo:v({},c),modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:l,relay3Status:r,relay4Status:i}),e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchI4RelayBoardInfo=function(e){return y(this,void 0,void 0,function(){var t,n,a,l,r,i,c;return E(this,function(u){switch(u.label){case 0:return e&&Object(m.a)(!0),t=this.state.Moncon,n=this.state,a=n.relay1Status,l=n.relay2Status,r=n.relay3Status,i=n.relay4Status,c=Object(),[4,Object(o.q)(t).then(function(e){return!e||e&&e.error?(Object(s.a)("Error occurred while fetching relay board info."),Object()):(e&&localStorage.setItem(t.deviceID,JSON.stringify(e)),e)}).catch(function(e){return Object()})];case 1:return c=u.sent(),a=120==c.voltage_volts_Ch1,l=120==c.voltage_volts_Ch2,r=120==c.voltage_volts_Ch3,i=120==c.voltage_volts_Ch4,this.setState({modelChanged:!1,currentChange:"",relay1Status:a,relay2Status:l,relay3Status:r,relay4Status:i,I4RelayBoardInfo:c}),e&&Object(m.a)(!1),[2]}})})},t.prototype._fetchRelayCensorStatus=function(e){return y(this,void 0,void 0,function(){var t,n,a,l=this;return E(this,function(r){switch(r.label){case 0:return e&&Object(m.a)(!0),t=this.props,n=t.buildingName,a=t.RelayDeviceName,[4,Object(o.w)(n,a).then(function(e){var t=e[0];if(!t)return l.setState({relay1Status:!1,relay2Status:!1,relay3Status:!1,relay4Status:!1,relayOptimizeSettings:"Normal,Normal,Normal,Normal,"}),Object();var n=Object();n.relayStatus=[],n.controlStatus=Object(i.g)(t.controlStatus),n.deviceType=Object(i.g)(t.deviceType);var a=Object(i.g)(t.statusNotes).split(",");n.statusNotes=Object(i.g)(t.statusNotes).split(",");var o=l.state,r=o.relay1Status,s=o.relay2Status,c=o.relay3Status,m=o.relay4Status,u=o.relayControlStatus,d=o.I1RelayStatus,p=o.relayOptimizeSettings,h=Object(i.g)(t.relayStatus).split(",");-1!=n.deviceType.indexOf("OneRelay")?(h&&(n.relayStatus=h),u=Object(i.g)(t.controlStatus),l.setState({I1RelayStatus:d,relayControlStatus:u})):(h&&(n.relayStatus=h),u=Object(i.g)(t.controlStatus),l.setState({relay1Status:r,relay2Status:s,relay3Status:c,relay4Status:m,relayControlStatus:u}));var f="Optimize"==n.controlStatus||"Normal"==n.controlStatus;(p=Object(i.g)(t.relayOptimizeSettings))&&",,,,"!=p&&""!=p||(p=-1==n.deviceType.indexOf("OneRelay")?"Normal,Normal,Normal,Normal,":"Normal"),l.setState({isOptimizeControl:f,isOptimizeControlStatus:f?n.controlStatus:"",relayOptimizeSettings:p,RelayStatusMessage:a,relayCensorStatus:n})}).catch(function(e){return Object()})];case 1:return r.sent(),e&&Object(m.a)(!1),[2]}})})},t.prototype.fetchRelayControlSettings=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l,r;return E(this,function(s){switch(s.label){case 0:return e=this.props.RelayDeviceName,t=this.state,n=t.relayControlType,a=t.RelayBoardControl,[4,Object(o.x)(e)];case 1:return(l=s.sent())[0]?(r=l[0],n&&-1==n.indexOf("OneRelay")?a.relays="1,2,3,4":a.relays="OneRelay",a.controlChoice=Object(i.g)(r.controlChoice),a.relayNames=Object(i.g)(r.relayNames),a.lightingTypes=Object(i.g)(r.lightingTypes),a.sensors=Object(i.g)(r.sensors),a.activeRelayStatus=Object(i.g)(r.activeRelayStatus)):n&&-1==n.indexOf("OneRelay")?(a.relays="1,2,3,4",a.controlChoice="0,0,0,0",a.relayNames="Relay 1,Relay 2,Relay 3,Relay 4",a.lightingTypes="0,0,0,0",a.sensors="0,0,0,0",a.activeRelayStatus="active,active,active,active"):(a.relays="OneRelay",a.controlChoice="0",a.relayNames="Relay",a.sensors="0",a.lightingTypes="0",a.activeRelayStatus="active"),this.setState({RelayBoardControl:a}),[2]}})})},t.prototype.ConvertDecimalToBinary=function(e){for(var t=[],n=e;n>0;)n%2==0?t.push("0"):t.push("1"),n=Math.floor(n/2);var a=this.state.relayControlType;if(a&&-1==a.indexOf("OneRelay"))for(var l=4-t.length,o=0;o<l;o++)t.push("0");return t.join(",")},t.prototype.handleRelayOnOff=function(e,t,n){var a=this.state,l=a.relay1Status,o=a.relay2Status,r=a.relay3Status,i=a.relay4Status;1==t&&(l=e),2==t&&(o=e),3==t&&(r=e),4==t&&(i=e);for(var s=0;s<=3;s++)t-1===s&&(this.state.RelayStatusMessage[s]="Manually");this.setState({modelChanged:n,relayisOnNo:t,relayisOn:e,relay1Status:l,relay2Status:o,relay3Status:r,relay4Status:i})},t.prototype.handleI1RelayOnOff=function(e){this.setState({I1RelayStatus:e,modelChanged:!0})},t.prototype.handleChange=function(e,t){var n=this.state.RelayBoardInfo;n[e]=t,this.setState({RelayBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.handleRelayOptimizeSettings=function(e,t,n){return void 0===n&&(n=!0),y(this,void 0,void 0,function(){var a,l,o,r,i,s;return E(this,function(c){return a=this.state,l=a.relayOptimizeSettings,o=a.isOptimizeControl,r=a.modelChanged,i=a.relayNoOptimize,(s=l.split(","))[t]=e,o=!0,r=n,l=s.join(","),i=t+1,this.setState({isOptimizeControlStatus:e,relayOptimizeSettings:l,isOptimizeControl:o,modelChanged:r,relayNoOptimize:i}),[2]})})},t.prototype.handleRelayControlStatus=function(e){return y(this,void 0,void 0,function(){var t,n,a;return E(this,function(l){return this.state.relayCensorStatus.statusNotes=this.state.RelayStatusMessage,"Remote"==e&&"Local"!=this.state.relayControlStatus?[2]:("Remote"==e&&"Local"==this.state.relayControlStatus&&(e="Manual"),this.setState({relayControlStatus:e,isOptimizeControl:!1}),"Local"!=e&&"Schedule"!=e&&"Manual"!=e||(t=this.state,n=t.isOptimizeControl,a=t.modelChanged,n=!0,a=!0,this.setState({isOptimizeControlStatus:e,isOptimizeControl:n,modelChanged:a})),[2])})})},t.prototype.cancelSend=function(){var e=this.state,t=e.relay1Status,n=e.relay2Status,a=e.relay3Status,l=e.relay4Status,o=e.I1RelayStatus,r=e.relayCensorStatus,i=e.relayControlType,s=e.relayOptimizeSettings,c=e.isOptimizeControl,m=e.relayNoOptimize;if(i&&-1!=i.indexOf("OneRelay"))o=!o,this.setState({I1RelayStatus:o,modelChanged:!1,isOptimizeControl:!1});else{if(r&&r.relayStatus&&r.relayStatus.length>0&&(t="1"==r.relayStatus[0],n="1"==r.relayStatus[1],a="1"==r.relayStatus[2],l="1"==r.relayStatus[3],this.setState({relay1Status:t,relay2Status:n,relay3Status:a,relay4Status:l})),c){var u=s.split(",");u[m]="Normal"==u[m]?"Optimize":"Normal",s=u.join(",")}this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",relayOptimizeSettings:s,relayNoOptimize:0})}},t.prototype.onCloseRelayControlDialog=function(e){return y(this,void 0,void 0,function(){return E(this,function(t){return this.setState({openRelayControlDialog:e}),[2]})})},t.prototype.setOptimizeSettings=function(e,t){return y(this,void 0,void 0,function(){var n,a,l,r=this;return E(this,function(c){switch(c.label){case 0:return n=this.props,a=n.buildingName,l=n.RelayDeviceName,[4,Object(o.b)(a,l).then(function(n){return y(r,void 0,void 0,function(){var r,c,m,u,d,p,h,f,g,b,v,N,C,O,S,T,w,x=this;return E(this,function(D){switch(D.label){case 0:return r=Object(),n[0]?(r.device=Object(i.g)(n[0].device),r.A1=Object(i.g)(n[0].A1)?Object(i.g)(n[0].A1):"0",r.A2=Object(i.g)(n[0].A2)?Object(i.g)(n[0].A2):"0",r.B1=Object(i.g)(n[0].B1)?Object(i.g)(n[0].B1):"1",r.B2=Object(i.g)(n[0].B2)?Object(i.g)(n[0].B2):"1",r.C1=Object(i.g)(n[0].C1)?Object(i.g)(n[0].C1):"0",r.C2=Object(i.g)(n[0].C2)?Object(i.g)(n[0].C2):"0",r.D1=Object(i.g)(n[0].D1)?Object(i.g)(n[0].D1):"1",r.D2=Object(i.g)(n[0].D2)?Object(i.g)(n[0].D2):"1",r.E1=Object(i.g)(n[0].E1)?Object(i.g)(n[0].E1):"1",r.E2=Object(i.g)(n[0].E2)?Object(i.g)(n[0].E2):"1",r.F1=Object(i.g)(n[0].F1)?Object(i.g)(n[0].F1):"0",r.F2=Object(i.g)(n[0].F2)?Object(i.g)(n[0].F2):"0",r.G1=Object(i.g)(n[0].G1)?Object(i.g)(n[0].G1):"1",r.G2=Object(i.g)(n[0].G2)?Object(i.g)(n[0].G2):"1"):(r.device=l,r.A1="0",r.A2="0",r.B1="1",r.B2="1",r.C1="0",r.C2="0",r.D1="1",r.D2="1",r.E1="1",r.E2="1",r.F1="0",r.F2="0",r.G1="1",r.G2="1"),c=Object(),m=Object(),u=this.state,d=u.Moncon,p=u.relayNoOptimize,h=u.relayControlType,f=u.relayOptimizeSettings,g=u.RelayBoardControl,b=u.devices,v=u.relayControlStatus,N=e?e.split(","):f.split(","),c.isOptimize="Optimize"==N[(t||p)-1],c.isOptimize?(c.varA=parseInt(r.A2),c.varB=parseInt(r.B2),c.varC=parseInt(r.C2),c.varD=parseInt(r.D2),c.varE=parseInt(r.E2),c.varF=parseInt(r.F2),c.varG=parseInt(r.G2)):(c.varA=parseInt(r.A1),c.varB=parseInt(r.B1),c.varC=parseInt(r.C1),c.varD=parseInt(r.D1),c.varE=parseInt(r.E1),c.varF=parseInt(r.F1),c.varG=parseInt(r.G1)),c.deviceID=d.deviceName,c.relaynum=""+p,c.rlb_add=d.boardAddress,d.wirelessConfig.ipAddress&&(c.controllerPI=d.wirelessConfig.ipAddress,m.controllerPI=d.wirelessConfig.ipAddress),d.wirelessConfig.controllerIPAddress&&(c.controllerPI=d.wirelessConfig.controllerIPAddress,m.controllerPI=d.wirelessConfig.controllerIPAddress),-1!=h.toLowerCase().indexOf("v1")?c.rlb_ver="v1":-1!=h.toLowerCase().indexOf("v4")?c.rlb_ver="v4":-1!=h.toLowerCase().indexOf("i1")?c.rlb_ver="i1":-1!=h.toLowerCase().indexOf("i4")&&(c.rlb_ver="i4"),C=[],O=[],S=[],T=[],C=g.controlChoice&&g.controlChoice.split(","),O=g.lightingTypes&&g.lightingTypes.split(","),S=g.sensors&&g.sensors.split(","),T=g.relayNames&&g.relayNames.split(","),m.sched=!1,m.controltype="Manual"!=v?C[p-1]:"10",m.lighting_type=O[p-1],m.relaynum=""+p,m.rlb_ver=c.rlb_ver,m.rlb_add=d.boardAddress,m.deviceID=d.deviceName,S&&S[p-1]?(w=b.find(function(e){return Object(i.g)(e.moncondevice)==S[p-1]}),m.csb_add=w?Object(i.g)(w.boardAddress):"9999"):m.csb_add="9999",m.lighting_type&&"0"!=m.lighting_type&&m.controltype&&"0"!=m.controltype?[4,Object(o.L)(m,c,a)]:(Object(s.a)("Save the control settings for "+T[p-1]+" before posting settings"),[2]);case 1:return D.sent(),"A"!=O[p-1]?[3,11]:"0"!=S[p-1]?[3,11]:c.isOptimize?[4,this.handleRelayOnOff(!1,p,!1)]:[3,11];case 2:return D.sent(),[4,this.saveRelayStatusChanges(v,!1)];case 3:return D.sent(),h&&-1!=h.indexOf("OneRelay")?h&&-1!=h.indexOf("V1")?[3,6]:[3,4]:[3,7];case 4:return[4,Object(o.H)(d,!1,a).then(function(e){return y(x,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 5:D.sent(),D.label=6;case 6:return[3,11];case 7:return h&&-1!=h.indexOf("V4")?[4,Object(o.N)(d,!1,!1,p,a).then(function(e){return y(x,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})]:[3,9];case 8:return D.sent(),[3,11];case 9:return[4,Object(o.I)(d,!1,!1,p,a).then(function(e){return y(x,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 10:D.sent(),D.label=11;case 11:return[2]}})})})];case 1:return c.sent(),[2]}})})},t.prototype.sendControlTypeAPI=function(){return y(this,void 0,void 0,function(){var e,t,n,a,l,o,r,i,s;return E(this,function(c){switch(c.label){case 0:Object(m.a)(!0),e=this.state,t=e.relayControlType,n=e.relayOptimizeSettings,a=e.RelayBoardControl,l=t&&-1==t.indexOf("OneRelay")?4:1,o=n.split(","),r=a.activeRelayStatus&&a.activeRelayStatus.split(","),i=0,c.label=1;case 1:return i<l?"active"!=r[i]?[3,4]:[4,this.handleRelayOptimizeSettings(o[i],i,!1)]:[3,5];case 2:return c.sent(),n=o.join(","),s=i+1,[4,this.setOptimizeSettings(n,s)];case 3:c.sent(),c.label=4;case 4:return i++,[3,1];case 5:return Object(m.a)(!1),[2]}})})},t.prototype.resetChanges=function(e){return y(this,void 0,void 0,function(){var t=this;return E(this,function(n){return this.setState({modelChanged:!1,isOptimizeControl:!1,currentChange:"",callInterval:!1},function(){return y(t,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:return t=this.state.relayControlType,[4,this._fetchRelayCensorStatus(e)];case 1:return n.sent(),-1!=t.toLowerCase().indexOf("i1")?this._fetchI1RelayBoardInfo(e):-1!=t.toLowerCase().indexOf("i4")?this._fetchI4RelayBoardInfo(e):this._fetchV4RelayBoardInfo(e),[4,this._fetchCeilingSensorBoardInfo(e)];case 2:return n.sent(),this.setState({callInterval:!0}),[2]}})})}),[2]})})},t.prototype.handleScheduleSelection=function(e){return y(this,void 0,void 0,function(){return E(this,function(t){switch(t.label){case 0:return[4,Object(o.X)(this.props.RelayDeviceName,e)];case 1:return t.sent(),e?Object(s.b)("Successfully Selected Schedule"):Object(s.b)("Successfully unSelected Schedule"),[2]}})})},t.prototype.saveRelayStatusChanges=function(e,t){return y(this,void 0,void 0,function(){var n,a,l,r,i,c,u,d,p,h,f,g,b;return E(this,function(v){switch(v.label){case 0:return t&&Object(m.a)(!0),n=this.props,a=n.buildingName,l=n.RelayDeviceName,r=this.state,i=r.relay1Status,c=r.relay2Status,u=r.relay3Status,d=r.relay4Status,p=r.relayCensorStatus,h=r.relayControlType,f=r.I1RelayStatus,g=r.relayOptimizeSettings,b=[],h&&-1!=h.indexOf("OneRelay")?b.push(f?"1":"0"):(b.push(i?"1":"0"),b.push(c?"1":"0"),b.push(u?"1":"0"),b.push(d?"1":"0")),p.relayStatus=b,p.controlStatus=e,p.deviceType=h,p.device=l,p.relayOptimizeSettings=g.split(","),[4,Object(o.T)(a,p).then(function(e){}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 1:return v.sent(),t&&Object(m.a)(!1),[2]}})})},t.prototype.applyChanges=function(){return y(this,void 0,void 0,function(){var e=this;return E(this,function(t){return Object(m.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return y(e,void 0,void 0,function(){var e,t,n,l,r,i,c,u,d,p,h,f,g,b,v,C,O,S=this;return E(this,function(T){switch(T.label){case 0:return N=0,a&&clearInterval(a),Object(m.a)(!0),e=this.state,t=e.Moncon,n=e.relayControlStatus,l=e.relayControlType,r=e.isOptimizeControlStatus,i=e.relayOptimizeSettings,c=e.RelayBoardControl,u=e.relayCensorStatus,d=e.isOptimizeControl,p=e.I1RelayStatus,h=e.relayisOn,f=e.relayisOnNo,u.statusNotes=this.state.RelayStatusMessage,[4,this.saveRelayStatusChanges(n,!1)];case 1:if(T.sent(),"Schedule"==r)return this.handleScheduleSelection(!0),this.setIntervalStart(),Object(m.a)(!1),[2];if(this.handleScheduleSelection(!1),"Local"!=r&&"Manual"!=r)return[3,7];g=l&&-1==l.indexOf("OneRelay")?4:1,b=i.split(","),v=c.activeRelayStatus&&c.activeRelayStatus.split(","),C=0,T.label=2;case 2:return C<g?"active"!=v[C]?[3,5]:[4,this.handleRelayOptimizeSettings(b[C],C,!1)]:[3,6];case 3:return T.sent(),i=b.join(","),O=C+1,[4,this.setOptimizeSettings(i,O)];case 4:T.sent(),T.label=5;case 5:return C++,[3,2];case 6:return"Local"==n&&"Local"==r?(this.setIntervalStart(),Object(m.a)(!1),[2]):[3,18];case 7:return"Schedule"!=n&&"Schedule"!=r&&this.handleScheduleSelection(!1),d?[3,16]:l&&-1!=l.indexOf("OneRelay")?l&&-1!=l.indexOf("V1")?[3,10]:[3,8]:[3,11];case 8:return[4,Object(o.H)(t,p,this.props.buildingName).then(function(e){return y(S,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 9:T.sent(),T.label=10;case 10:return[3,15];case 11:return l&&-1!=l.indexOf("V4")?[4,Object(o.N)(t,!1,h,f,this.props.buildingName).then(function(e){return y(S,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})]:[3,13];case 12:return T.sent(),[3,15];case 13:return[4,Object(o.I)(t,!1,h,f,this.props.buildingName).then(function(e){return y(S,void 0,void 0,function(){return E(this,function(t){return e.error?Object(s.a)(e.error):e&&Object(s.b)("Changes applied successfully. "),[2]})})}).catch(function(e){Object(s.a)("Some error orccured. ")})];case 14:T.sent(),T.label=15;case 15:return[3,18];case 16:return[4,this.setOptimizeSettings()];case 17:T.sent(),T.label=18;case 18:return this.setState({isOptimizeControl:!1}),this.setIntervalStart(),Object(m.a)(!1),[2]}})})}),[2]})})},t.prototype.applyRule=function(e,t,n){return e?t?e<n?0:e:e>n?0:e:0},t.prototype.render=function(){var e,t,n,a,o=this,r=this.state,i=r.CeilingSensorBoardInfo,s=r.CeilingSensorBoard_MonconModel,m=r.Moncon,u=r.modelChanged,b=r.currentChange,v=r.detailsExpanded,y=r.RelayBoardInfo,E=r.relayControlStatus,N=r.relayisOn,C=r.relayisOnNo,O=r.relay1Status,S=r.relay2Status,T=r.relay3Status,w=r.relay4Status,x=r.relayControlType,D=r.I1RelayBoardInfo,I=r.I1RelayStatus,_=r.isOptimizeControl,A=r.isOptimizeControlStatus,L=r.RelayBoardControl,j=r.relayOptimizeSettings,R=r.I4RelayBoardInfo,k=r.openRelayControlDialog,B=r.RelayStatusMessage,P=r.relayCensorStatus,F=r.showLogs,M=this.props,H=M.instance,W=M.buildingName,q=M.RelayDeviceName,z=M.type,G=M.hideTabs,V="Local"!=E;e=L.relayNames&&L.relayNames.split(","),t=L.lightingTypes&&L.lightingTypes.split(","),n=j&&j.split(","),a=L.activeRelayStatus&&L.activeRelayStatus.split(",");var U="not refreshed";if(x&&(-1!=x.toLowerCase().indexOf("i1")?D&&D.timestamp&&(U=new Date(D.timestamp).toLocaleString()):-1!=x.toLowerCase().indexOf("i4")?R&&R.timestamp&&(U=new Date(R.timestamp).toLocaleString()):-1!=x.toLowerCase().indexOf("v4")&&y&&y.timestamp&&(U=new Date(y.timestamp).toLocaleString())),F)return l.createElement(h.a,{instance:H,buildingName:W,fromEntityList:!0,module:f.a.Assets,ontology:m.monitoringControl,entityName:"Device",onLogClose:function(){return o.setState({showLogs:!1})}});var J=JSON.parse(g.a.getItem("user"));return l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},!G&&l.createElement(c.a,{InsightName:q,ControlName:"RelayControl",buildingName:W,instance:H,type:z}),J&&"1"==J.role&&l.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){o.setState({showLogs:!0})}}," ",l.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-7"},l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,m.rdfsLabel)," "),l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",m&&m.relatedEquipment&&m.relatedEquipment.map(function(e,t){return l.createElement("span",{key:t},t+1==m.relatedEquipment.length?"":",")}))))),l.createElement("div",{className:"col-md-2 p-0"},l.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Send Control Settings To Board",onClick:function(e){o.sendControlTypeAPI()}}," ",l.createElement("i",{className:"fa fa-cog"})," Send Control Settings To Board")),l.createElement("div",{className:"col-md-2 pl-0"},l.createElement("button",{className:"btn btn-success active pull-right custom-outline-btn",title:"Control Settings",onClick:function(e){o.setState({openRelayControlDialog:!0},function(){document.getElementById("btnDialogRelayControl").click()})}}," ",l.createElement("i",{className:"fa fa-sliders"})," Control Settings")))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},x&&-1!=x.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-8 InsightRow"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("h4",{className:"padding-5 margin-5"},"Power Watts: ",l.createElement("b",null,D&&D.active_power_Watts&&parseFloat(D.active_power_Watts)?parseFloat(D.active_power_Watts):0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Amperes: ",l.createElement("b",null,D&&D.current_Amperes?D.current_Amperes:0)),l.createElement("h4",{className:"padding-5 margin-5"},"Frequency Hz: ",l.createElement("b",null,D&&D.frequency_Hz?this.applyRule(D.frequency_Hz,!0,55):0))),l.createElement("div",{className:"col-md-6 col-xs-12"},l.createElement("h4",{className:"padding-5 margin-5"},"Total Energy Watt Hours: ",l.createElement("b",null,D&&D.import_active_energy_Wh&&parseFloat(D.import_active_energy_Wh)?parseFloat(D.import_active_energy_Wh).toFixed(2):0," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Power Factor: ",l.createElement("b",null,D&&D.power_factor?D.power_factor:0)),l.createElement("h4",{className:"padding-5 margin-5"},"Voltage volts: ",l.createElement("b",null,D&&D.voltage_volts?D.voltage_volts:0))))),l.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},l.createElement("h4",{className:"padding-5 margin-5"},"Control Type: ",l.createElement("b",null,L&&L.controlChoice?L.controlChoice:"Not selected"," ")),l.createElement("h4",{className:"padding-5 margin-5"},"Illuminance: ",l.createElement("b",null,i&&i.illuminance_lux?i.illuminance_lux:0," Lumens")),l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,i&&i.motion_sensed&&i.motion_sensed>0?"True":"False")))),x&&-1==x.indexOf("OneRelay")&&l.createElement("div",{className:"col-md-12 InsightRow"},l.createElement("table",{className:"table table-striped"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null),l.createElement("th",null,l.createElement("b",null,"Amperes")),l.createElement("th",null,l.createElement("b",null,"Power Watt")),-1!=x.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("th",null,l.createElement("b",null,"Frequency")),l.createElement("th",null,l.createElement("b",null,"Energy")),l.createElement("th",null,l.createElement("b",null,"Power Factor")),l.createElement("th",null,l.createElement("b",null,"Voltage"))),l.createElement("th",null,"Manual"==E?"Status":""),t&&t.length>0&&(1==t.length?"0"!=t[0]:"0"!=t[0]&&"0"!=t[1]&&"0"!=t[2]&&"0"!=t[3])&&l.createElement("th",null,"Optimize Settings"))),l.createElement("tbody",null,a&&"inactive"!=a[0]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[0])),-1!=x.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,y&&y.mAmps_relay1?this.applyRule(parseFloat(y.mAmps_relay1)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,y&&y.power_Wt_relay1?this.applyRule(parseFloat(y.power_Wt_relay1)/1e3,!0,3):0," W"))),-1!=x.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,R&&R.current_Amperes_Ch1?this.applyRule(R.current_Amperes_Ch1,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,R&&R.active_power_Watts_Ch1?this.applyRule(parseFloat(R.active_power_Watts_Ch1)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,R&&R.frequency_Hz_Ch1?R.frequency_Hz_Ch1:0," Hz")),l.createElement("td",null,l.createElement("b",null,R&&R.import_active_energy_Wh_Ch1?R.import_active_energy_Wh_Ch1:0," Wh")),l.createElement("td",null,l.createElement("b",null,R&&R.power_factor_Ch1?R.power_factor_Ch1:0)),l.createElement("td",null,l.createElement("b",null,R&&R.voltage_volts_Ch1?this.applyRule(R.voltage_volts_Ch1,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",P.statusNotes&&P.statusNotes.length>0&&" "!=P.statusNotes[0]&&"(Triggered "+P.statusNotes[0]+")"),l.createElement("button",{type:"button",className:O?"btn":"btn btn-fill",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!1,1,!0)}},"Off"),l.createElement("button",{type:"button",className:O?"btn btn-fill":"btn",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!0,1,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[0]&&"C"!=t[0]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Normal",0)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),a&&"inactive"!=a[1]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[1])),-1!=x.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,y&&y.mAmps_relay2?this.applyRule(parseFloat(y.mAmps_relay2)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,y&&y.power_Wt_relay2?this.applyRule(parseFloat(y.power_Wt_relay2)/1e3,!0,3):0," W"))),-1!=x.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,R&&R.current_Amperes_Ch2?this.applyRule(R.current_Amperes_Ch2,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,R&&R.active_power_Watts_Ch2?this.applyRule(parseFloat(R.active_power_Watts_Ch2)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,R&&R.frequency_Hz_Ch2?R.frequency_Hz_Ch2:0," Hz")),l.createElement("td",null,l.createElement("b",null,R&&R.import_active_energy_Wh_Ch2?R.import_active_energy_Wh_Ch2:0," Wh")),l.createElement("td",null,l.createElement("b",null,R&&R.power_factor_Ch2?R.power_factor_Ch2:0)),l.createElement("td",null,l.createElement("b",null,R&&R.voltage_volts_Ch2?this.applyRule(R.voltage_volts_Ch2,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",P.statusNotes&&P.statusNotes.length>0&&" "!=P.statusNotes[1]&&"(Triggered "+P.statusNotes[1]+")"),l.createElement("button",{type:"button",className:S?"btn":"btn btn-fill",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!1,2,!0)}},"Off"),l.createElement("button",{type:"button",className:S?"btn btn-fill":"btn",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!0,2,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[1]&&"C"!=t[1]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[1]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Normal",1)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[1]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Optimize",1)}},"Optimize")))),a&&"inactive"!=a[2]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[2])),-1!=x.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,y&&y.mAmps_relay3?this.applyRule(parseFloat(y.mAmps_relay3)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,y&&y.power_Wt_relay3?this.applyRule(parseFloat(y.power_Wt_relay3)/1e3,!0,3):0," W"))),-1!=x.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,R&&R.current_Amperes_Ch3?this.applyRule(R.current_Amperes_Ch3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,R&&R.active_power_Watts_Ch3?this.applyRule(parseFloat(R.active_power_Watts_Ch3)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,R&&R.frequency_Hz_Ch3?R.frequency_Hz_Ch3:0," Hz")),l.createElement("td",null,l.createElement("b",null,R&&R.import_active_energy_Wh_Ch3?R.import_active_energy_Wh_Ch3:0," Wh")),l.createElement("td",null,l.createElement("b",null,R&&R.power_factor_Ch3?R.power_factor_Ch3:0)),l.createElement("td",null,l.createElement("b",null,R&&R.voltage_volts_Ch3?this.applyRule(R.voltage_volts_Ch3,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",P.statusNotes&&P.statusNotes.length>0&&" "!=P.statusNotes[2]&&"(Triggered "+P.statusNotes[2]+")"),l.createElement("button",{type:"button",className:T?"btn":"btn btn-fill",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!1,3,!0)}},"Off"),l.createElement("button",{type:"button",className:T?"btn btn-fill":"btn",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!0,3,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[2]&&"C"!=t[2]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[2]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Normal",2)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[2]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Optimize",2)}},"Optimize")))),a&&"inactive"!=a[3]&&l.createElement("tr",null,l.createElement("td",null,l.createElement("b",null,e&&e[3])),-1!=x.toLowerCase().indexOf("v4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,y&&y.mAmps_relay4?this.applyRule(parseFloat(y.mAmps_relay4)/1e3,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,"-"))),-1!=x.toLowerCase().indexOf("i4")&&l.createElement(l.Fragment,null,l.createElement("td",null,l.createElement("b",null,R&&R.current_Amperes_Ch4?this.applyRule(R.current_Amperes_Ch4,!0,.05):0," A")),l.createElement("td",null,l.createElement("b",null,R&&R.active_power_Watts_Ch4?this.applyRule(parseFloat(R.active_power_Watts_Ch4)/1e3,!0,3):0," W")),l.createElement("td",null,l.createElement("b",null,R&&R.frequency_Hz_Ch4?R.frequency_Hz_Ch4:0," Hz")),l.createElement("td",null,l.createElement("b",null,R&&R.import_active_energy_Wh_Ch4?R.import_active_energy_Wh_Ch4:0," Wh")),l.createElement("td",null,l.createElement("b",null,R&&R.power_factor_Ch4?R.power_factor_Ch4:0)),l.createElement("td",null,l.createElement("b",null,R&&R.voltage_volts_Ch4?this.applyRule(R.voltage_volts_Ch4,!0,80):0," volts"))),l.createElement("td",null,l.createElement(l.Fragment,null,l.createElement("div",null,"Relay Status: ",P.statusNotes&&P.statusNotes.length>0&&" "!=P.statusNotes[3]&&"(Triggered "+P.statusNotes[3]+")"),l.createElement("button",{type:"button",className:w?"btn":"btn btn-fill",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!1,4,!0)}},"Off"),l.createElement("button",{type:"button",className:w?"btn btn-fill":"btn",disabled:u||"Manual"!=E,onClick:function(){o.handleRelayOnOff(!0,4,!0)}},"On"))),l.createElement("td",null,t&&"0"!=t[3]&&"C"!=t[3]&&l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[3]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Normal",3)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[3]?"btn btn-fill":"btn",disabled:_,onClick:function(){o.handleRelayOptimizeSettings("Optimize",3)}},"Optimize"))))))),l.createElement("div",{className:"col-md-8 col-xs-12 InsightRow"},x&&-1!=x.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-6"},l.createElement(l.Fragment,null,l.createElement("div",{className:"RelayHeading"},"Relay Status: ",P.statusNotes&&P.statusNotes.length>0&&" "!=P.statusNotes[0]&&"(Triggered "+P.statusNotes[0]+")"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:I?"btn":"btn btn-fill",disabled:u||"Manual"!=E,onClick:function(){B[0]="Manually",o.handleI1RelayOnOff(!1)}},"Off"),l.createElement("button",{type:"button",className:I?"btn btn-fill":"btn",disabled:u||"Manual"!=E,onClick:function(){B[0]="Manually",o.handleI1RelayOnOff(!0)}},"On")))),t&&"0"!=t[0]&&"C"!=t[0]&&l.createElement("div",{className:"col-md-6"},l.createElement("div",{className:"RelayHeading"},"Optimize Settings"),l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:n&&"Normal"==n[0]?"btn btn-fill":"btn",onClick:function(){o.handleRelayOptimizeSettings("Normal",0)}},"Normal"),l.createElement("button",{type:"button",className:n&&"Optimize"==n[0]?"btn btn-fill":"btn",onClick:function(){o.handleRelayOptimizeSettings("Optimize",0)}},"Optimize")))),x&&-1==x.indexOf("OneRelay")&&l.createElement(l.Fragment,null,l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Source Volts: ",l.createElement("b",null,y&&y.nominal_src_volts?y.nominal_src_volts:0," "))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Illuminance: ",l.createElement("b",null,i&&i.illuminance_lux?i.illuminance_lux:0," Lumens"))),l.createElement("div",{className:"col-md-4"},l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,i&&i.motion_sensed&&i.motion_sensed>0?"True":"False"))))),l.createElement("div",{className:"col-md-4 col-xs-12 InsightRow"},l.createElement("div",{className:"btn-group"},l.createElement("button",{type:"button",className:"Local"==E?"btn btn-success btn-fill":"btn btn-success",disabled:""!=b&&"state"!=b,onClick:function(){if(x&&-1!=x.indexOf("V4"))for(var e=0;e<=3;e++)B[e]="Locally";else B[0]="Locally";o.handleRelayControlStatus("Local")}},"Local"),l.createElement("button",{type:"button",className:V?"btn btn-success btn-fill":"btn btn-success",disabled:""!=b&&"state"!=b,onClick:function(){o.handleRelayControlStatus("Remote")}},"Remote"),l.createElement("button",{type:"button",className:"Manual"==E?"btn btn-success btn-fill":"btn btn-success",disabled:!V,onClick:function(){o.handleRelayControlStatus("Manual")}},"Manual"),l.createElement("button",{type:"button",className:"Schedule"==E?"btn btn-success btn-fill":"btn btn-success",disabled:!V,onClick:function(){o.handleRelayControlStatus("Schedule")}},"Schedule")))),x&&l.createElement(d.a,{instance:H,buildingName:W,monconType:x,moncon:m.monitoringControl,deviceId:m.deviceID,monconRDFsLabel:m.rdfsLabel}),s&&s.monitoringControl&&l.createElement(d.a,{instance:H,buildingName:W,monconType:"CeilingSensor",moncon:s.monitoringControl,deviceId:s.deviceID,monconRDFsLabel:s.rdfsLabel}),l.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){o.setState({detailsExpanded:!v})}},l.createElement("i",{className:v?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),l.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",m.wirelessConfig&&m.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",m.wirelessConfig&&m.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",m.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",m.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Board Address:")," ",m.boardAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",m.deviceID?m.deviceID:""),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Control Type sent to PI:")," ","Manual"==E?"10":L&&L.controlChoice?L.controlChoice:"Not selected"),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Last Data Synced At:")," ",U)))),l.createElement("div",{className:u?"InsightApplyChanges":"hidden"},_?l.createElement("h4",null,"Do you want to apply these changes (Optimize Settings: ",A,") ?"):l.createElement("h4",null,"Do you want to apply these changes (Relay ",x&&-1!=x.indexOf("OneRelay")?" : "+(I?"on":"off"):C+" : "+(N?"on":"off"),")?"),l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return o.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return o.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return o.applyChanges()}},"Apply Changes"))))))),k&&l.createElement(l.Fragment,null,l.createElement("button",{type:"button",id:"btnDialogRelayControl",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#dialogRelayControl"}," . "),l.createElement(p.a,{id:"dialogRelayControl",relayDeviceName:q,buildingName:W,onCloseRelayControlDialog:this.onCloseRelayControlDialog,refreshRelayControlDB:this.fetchRelayControlSettings}))))},t}(l.Component);t.default=C},1716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(2),o=(n.n(l),n(679)),r=n(656),i=n(23),s=n(31),c=n(116),m=n(657),u=n(10),d=n(762),p=n(665),h=n(666),f=n(11),g=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=this&&this.__assign||function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},v=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},y=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},E=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CeilingSensorBoardInfo:Object(),Old_CeilingSensorBoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[],showLogs:!1},a=a=n,n._fetchData=n._fetchData.bind(n),n._fetchCeilingSensorBoardInfo=n._fetchCeilingSensorBoardInfo.bind(n),n.cancelSend=n.cancelSend.bind(n),n.resetChanges=n.resetChanges.bind(n),n.applyChanges=n.applyChanges.bind(n),n.handleChange=n.handleChange.bind(n),n.getRelatedEquipmentLabel=n.getRelatedEquipmentLabel.bind(n),n}return g(t,e),t.prototype.componentDidMount=function(){return v(this,void 0,void 0,function(){var e=this;return y(this,function(t){switch(t.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:t.sent(),t.label=2;case 2:return setInterval(function(){e.resetChanges(!1)},1e4),[2]}})})},t.prototype.componentWillUnmount=function(){return v(this,void 0,void 0,function(){return y(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._fetchData=function(){return v(this,void 0,void 0,function(){var e,t,n,a,l,o,i,s=this;return y(this,function(d){switch(d.label){case 0:return this.state,e=this.props,t=e.CeilingSensorBoardName,n=e.buildingName,t?(Object(c.a)(!0),[4,Object(m.h)(this.props.buildingName)]):[3,3];case 1:return a=d.sent(),l=a&&a.length>0&&a.map(function(e){return{value:Object(u.g)(e.ontology),label:Object(u.g)(e.rdfsLabel)}}),o=Object(),[4,Object(r.t)(t,n)];case 2:o=d.sent(),localStorage.getItem(o.deviceID)&&localStorage.getItem(o.deviceID).length>0&&(i=JSON.parse(localStorage.getItem(o.deviceID)),this.setState({CeilingSensorBoardInfo:i,Old_CeilingSensorBoardInfo:b({},i),modelChanged:!1,currentChange:""})),this.setState({Moncon:o,EquipmentList:l},function(){return v(s,void 0,void 0,function(){return y(this,function(e){return this._fetchCeilingSensorBoardInfo(!0),[2]})})}),Object(c.a)(!1),d.label=3;case 3:return[2]}})})},t.prototype._fetchCeilingSensorBoardInfo=function(e){return v(this,void 0,void 0,function(){var t,n;return y(this,function(a){switch(a.label){case 0:return e&&Object(c.a)(!0),t=this.state.Moncon,[4,Object(o.n)(t).then(function(e){var n=e[0];return!n||n&&n.error?(Object(s.a)("Error occurred while fetching ceiling sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return n=a.sent(),this.setState({CeilingSensorBoardInfo:n,Old_CeilingSensorBoardInfo:b({},n),modelChanged:!1,currentChange:""}),e&&Object(c.a)(!1),[2]}})})},t.prototype.handleChange=function(e,t){var n=this.state.CeilingSensorBoardInfo;n[e]=t,this.setState({CeilingSensorBoardInfo:n,modelChanged:!0,currentChange:e})},t.prototype.cancelSend=function(){this.setState({modelChanged:!1,currentChange:""})},t.prototype.resetChanges=function(e){return v(this,void 0,void 0,function(){var t=this;return y(this,function(n){return this.setState({modelChanged:!1,currentChange:""},function(){return v(t,void 0,void 0,function(){return y(this,function(t){switch(t.label){case 0:return[4,this._fetchCeilingSensorBoardInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.applyChanges=function(e,t){return v(this,void 0,void 0,function(){var n=this;return y(this,function(l){return Object(c.a)(!0),this.setState({modelChanged:!1,currentChange:""},function(){return v(n,void 0,void 0,function(){var n=this;return y(this,function(l){return setTimeout(function(){n.resetChanges(!0)},5e3),Object(o.G)(e,t,this.state.Old_CeilingSensorBoardInfo).then(function(e){e.success?Object(s.b)("Changes applied successfully. "):e.error&&Object(s.a)(e.reason)}).catch(function(e){Object(s.a)("Some error orccured. ")}),setTimeout(function(){a._fetchCeilingSensorBoardInfo()},5e3),Object(c.a)(!1),[2]})})}),[2]})})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,a=t.buildingName,o=this.state,r=o.CeilingSensorBoardInfo,s=o.Moncon,c=o.modelChanged,m=o.detailsExpanded,u=o.showLogs,g=JSON.parse(f.a.getItem("user")),b="not refreshed";return r&&r.timestamp&&(b=new Date(r.timestamp).toLocaleString()),u?l.createElement(p.a,{instance:n,buildingName:a,fromEntityList:!0,module:h.a.Assets,ontology:s.monitoringControl,entityName:"Device",onLogClose:function(){return e.setState({showLogs:!1})}}):l.createElement("div",{className:"content"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},l.createElement("div",{className:"card",id:"InsightsList"},l.createElement("div",{className:"container-fluid"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-12"},g&&"1"==g.role&&l.createElement("button",{className:"btn btn-md btn-primary btn-fill pull-right",style:{margin:10},title:"Logs",onClick:function(){e.setState({showLogs:!0})}}," ",l.createElement("img",{src:"assets/img/Logs.png",style:{width:25,height:18}})),l.createElement("div",{className:"header"},l.createElement("h3",{className:"title"},l.createElement("strong",null,s.rdfsLabel)," "),l.createElement("h4",{className:"title"},l.createElement("strong",null,this.props.type.toUpperCase(),":",s&&s.relatedEquipment&&s.relatedEquipment.map(function(t,n){return l.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==s.relatedEquipment.length?"":",")}))))))),l.createElement("div",{className:"content"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp"},l.createElement("h4",{className:"padding-5 margin-5"},"Temp: ",l.createElement("b",null,Object(i.a)(r&&r.temp_celsius?r.temp_celsius:0).toFixed(2),"\xb0F")),l.createElement("h4",{className:"padding-5 margin-5"},"CO2: ",l.createElement("b",null,r&&r.equiCO2_ppm?r.equiCO2_ppm+" ppm":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Altitude: ",l.createElement("b",null,r&&r.altitude_m?r.altitude_m+" m":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Pressure: ",l.createElement("b",null,r&&r.pressure_hPa?r.pressure_hPa+" hPa":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"illuminance: ",l.createElement("b",null,r&&r.illuminance_lux?r.illuminance_lux:0," Lumens")),l.createElement("h4",{className:"padding-5 margin-5"},"Gas Resistance: ",l.createElement("b",null,r&&r.gasResistance_kOhm?r.gasResistance_kOhm+" kOhm":"-"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},l.createElement("h4",{className:"padding-5 margin-5"},"Humidity: ",l.createElement("b",null,r&&r.relhumidity_pct?r.relhumidity_pct+" %":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"TVOC: ",l.createElement("b",null,r&&r.tvoc_ppm?r.tvoc_ppm+" ppm":"-")),l.createElement("h4",{className:"padding-5 margin-5"},"No. of BT Devices: ",l.createElement("b",null,r&&r.num_BTdev?r.num_BTdev:"-")),l.createElement("h4",{className:"padding-5 margin-5"},"Motion Sensed: ",l.createElement("b",null,r&&r.motion_sensed&&r.motion_sensed>0?"True":"False")),l.createElement("h4",{className:"padding-5 margin-5"},"WIFI Temp: ",l.createElement("b",null,Object(i.a)(r&&r.wifiTemp1_celsius?r.wifiTemp1_celsius:0).toFixed(2),"\xb0F"))),l.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"})),s.monitoringControl&&s.monitoringControlDeviceType&&l.createElement(d.a,{instance:n,buildingName:a,monconType:s.monitoringControlDeviceType,moncon:s.monitoringControl,deviceId:s.deviceID,monconRDFsLabel:s.rdfsLabel}),l.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},l.createElement("div",{className:"",id:"headingOne"},l.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){e.setState({detailsExpanded:!m})}},l.createElement("i",{className:m?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),l.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},l.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},l.createElement("h5",{className:"title"},l.createElement("strong",null,"IP Address:")," ",s.wirelessConfig&&s.wirelessConfig.ipAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Controller IP Address:")," ",s.wirelessConfig.controllerIPAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Manufacturer:")," ",s.manufacturer),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Model:")," ",s.model),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Board Address:")," ",s.boardAddress),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Device ID:")," ",s.deviceID?s.deviceID:""),l.createElement("h5",{className:"title"},l.createElement("strong",null,"Last Data Synced At:")," ",b)))),l.createElement("div",{className:c?"InsightApplyChanges":"hidden"},l.createElement("h4",null,"Do you want to apply these changes?"),l.createElement("div",null,l.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){return e.cancelSend()}},"Cancel"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){return e.resetChanges(!0)}},"Reset"),"\xa0",l.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.applyChanges(s,r)}},"Apply Changes")))))))))},t}(l.Component);t.default=E},1717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=(n.n(a),n(720)),o=n(656),r=n(31),i=n(701),s=n(116),c=n(657),m=n(10),u=n(762),d=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=this&&this.__assign||function(){return(p=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},h=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},f=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={CbW406BoardInfo:Object(),Old_Cbw406BoardInfo:Object(),modelChanged:!1,Moncon:{monitoringControl:"",monitoringControlDeviceType:"",deviceName:"",floor:"",rdfsLabel:"",manufacturer:"",model:"",location:"",computingDevice:"",connectionType:"",notes:"",wirelessConfig:{ipAddress:"",controllerIPAddress:"",thermostatMacAddress:"",ssid:"",password:""},isSchedule:!1,relatedEquipment:[],deviceNumber:"",enclosure:""},EquipmentList:[],currentChange:"",detailsExpanded:!1,localBTNState:!1,spaces:[],intervalId:Object(),intervalCounter:0},n,n._fetchData=n._fetchData.bind(n),n._fetchCBW406BoardInfo=n._fetchCBW406BoardInfo.bind(n),n}return d(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return this.props.buildingName?[4,this._fetchData()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this,t=this.state.intervalId;t&&clearInterval(t),t=setInterval(function(){return h(e,void 0,void 0,function(){var e;return f(this,function(t){return(e=this.state.intervalCounter)>=15?(e=0,this._fetchCBW406BoardInfo(!1)):e++,this.setState({intervalCounter:e}),[2]})})},1e3)},t.prototype.componentWillUnmount=function(){return h(this,void 0,void 0,function(){return f(this,function(e){return clearInterval(void 0),[2]})})},t.prototype._fetchData=function(){return h(this,void 0,void 0,function(){var e,t,n,a,l,r,i,u=this;return f(this,function(d){switch(d.label){case 0:return this.state,e=this.props,t=e.deviceName,n=e.buildingName,t?(Object(s.a)(!0),[4,Object(c.h)(this.props.buildingName)]):[3,3];case 1:return a=d.sent(),l=a&&a.length>0&&a.map(function(e){return{value:Object(m.g)(e.ontology),label:Object(m.g)(e.rdfsLabel)}}),r=Object(),[4,Object(o.t)(t,n)];case 2:r=d.sent(),localStorage.getItem(r.deviceID)&&localStorage.getItem(r.deviceID).length>0&&(i=JSON.parse(localStorage.getItem(r.deviceID)),this.setState({CbW406BoardInfo:i,Old_Cbw406BoardInfo:p({},i),modelChanged:!1,currentChange:""})),this.setState({Moncon:r,EquipmentList:l},function(){return h(u,void 0,void 0,function(){return f(this,function(e){return this._fetchCBW406BoardInfo(!0),[2]})})}),Object(s.a)(!1),d.label=3;case 3:return[2]}})})},t.prototype._fetchCBW406BoardInfo=function(e){return h(this,void 0,void 0,function(){var t,n;return f(this,function(a){switch(a.label){case 0:return e&&Object(s.a)(!0),t=this.state.Moncon,[4,Object(l.f)(t.topic,new Date,new Date,!0).then(function(e){var n=e[0];return!n||n&&n.error?(Object(r.a)("Error occurred while fetching CBW406 sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return n=a.sent(),this.setState({CbW406BoardInfo:n,Old_Cbw406BoardInfo:p({},n),modelChanged:!1,currentChange:""}),e&&Object(s.a)(!1),[2]}})})},t.prototype.resetChanges=function(e){return h(this,void 0,void 0,function(){var t=this;return f(this,function(n){return this.setState({modelChanged:!1,currentChange:""},function(){return h(t,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,this._fetchCBW406BoardInfo(e)];case 1:return t.sent(),[2]}})})}),[2]})})},t.prototype.getRelatedEquipmentLabel=function(e){var t=this.state.EquipmentList,n=Object();return(n=t&&t.find(function(t){return t.value==e}))&&n.label},t.prototype.render=function(){var e=this,t=this.props,n=t.deviceName,l=t.instance,o=t.buildingName,r=t.type,s=t.hideTabs,c=this.state,m=c.CbW406BoardInfo,d=c.Moncon,p=c.detailsExpanded,h="not refreshed";return m&&m.timestamp&&(h=new Date(m.timestamp).toLocaleString()),a.createElement("div",{className:"content"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},!s&&a.createElement(i.a,{InsightName:n,ControlName:"CBW406",buildingName:o,instance:l,type:r,hideADP:!0,hideSchedule:!0,hideAlarms:!0}),a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"header"},a.createElement("h3",{className:"title"},a.createElement("strong",null,d.rdfsLabel)," "),a.createElement("h4",{className:"title"},a.createElement("strong",null,this.props.type.toUpperCase(),":",d&&d.relatedEquipment&&d.relatedEquipment.map(function(t,n){return a.createElement("span",{key:n},e.getRelatedEquipmentLabel(t.value),n+1==d.relatedEquipment.length?"":",")}))),a.createElement("h4",{className:"title mt-2"},a.createElement("strong",null,"Voltage In: ",m.vin)),a.createElement("div",{className:"row mt-5"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp"},a.createElement("b",{className:"devcieCard-h"},"Refrigerator 1"),a.createElement("div",{className:"devicesCard"},a.createElement("h4",{className:"padding-5 margin-5"},"T3 Front: ",a.createElement("b",null,m&&m.t3Ref1Front?m.t3Ref1Front.toFixed(2):0)),a.createElement("h4",{className:"padding-5 margin-5"},"T6 Compresssor In: ",a.createElement("b",null,m&&m.t6Ref1CompressorIn?m.t6Ref1CompressorIn.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T4 Back: ",a.createElement("b",null,m&&m.t4Ref1Back?m.t4Ref1Back.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T7 Compresssor Out: ",a.createElement("b",null,m&&m.t7Ref1CompressorOut?m.t7Ref1CompressorOut.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T5 Evap Fan: ",a.createElement("b",null,m&&m.t5Ref1EvapFan?m.t5Ref1EvapFan.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T8 Wax Probe: ",a.createElement("b",null,m&&m.t8Ref1WaxProbe?m.t8Ref1WaxProbe.toFixed(2):"-")))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("b",{className:"devcieCard-h"},"Refrigerator 2"),a.createElement("div",{className:"devicesCard"},a.createElement("h4",{className:"padding-5 margin-5"},"T3 Front: ",a.createElement("b",null,m&&m.t3Ref2Front?m.t3Ref2Front.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T6 Compresssor In: ",a.createElement("b",null,m&&m.t6Ref2CompressorIn?m.t6Ref2CompressorIn.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T4 Back: ",a.createElement("b",null,m&&m.t4Ref2Back?m.t4Ref2Back.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T7 Compresssor Out: ",a.createElement("b",null,m&&m.t7Ref2CompressorOut?m.t7Ref2CompressorOut.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T5 Evap Fan: ",a.createElement("b",null,m&&m.t5Ref2EvapFan?m.t5Ref2EvapFan.toFixed(2):"-")),a.createElement("h4",{className:"padding-5 margin-5"},"T8 Wax Probe: ",a.createElement("b",null,m&&m.t8Ref2WaxProbe?m.t8Ref2WaxProbe.toFixed(2):"-"))))))))),a.createElement("div",{className:"content"},d.monitoringControl&&d.monitoringControlDeviceType&&a.createElement(u.a,{instance:l,buildingName:o,monconType:d.monitoringControlDeviceType,moncon:d.monitoringControl,deviceId:d.deviceID,monconRDFsLabel:d.rdfsLabel}),a.createElement("div",{className:"accordion row padding-10",id:"accordionExample",style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},a.createElement("div",{className:"",id:"headingOne"},a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseOne",style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseOne",onClick:function(){e.setState({detailsExpanded:!p})}},a.createElement("i",{className:p?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Device Info")),a.createElement("div",{id:"collapseOne",className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionExample"},a.createElement("div",{className:"col-md-6 col-xs-12 padding-10"},a.createElement("h5",{className:"title"},a.createElement("strong",null,"IP Address:")," ",d&&d.wirelessConfig&&d.wirelessConfig.ipAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Controller IP Address:")," ",d.wirelessConfig&&d.wirelessConfig.controllerIPAddress),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Manufacturer:")," ",d.manufacturer),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Model:")," ",d.model),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Device ID:")," ",d&&d.deviceID?d.deviceID:""),a.createElement("h5",{className:"title"},a.createElement("strong",null,"Last Data Synced At:")," ",h))))))))))},t}(a.Component);t.default=g},3505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=n.n(a),o=n(650),r=n(1240),i=n(1073),s=n(3506),c=n(1072),m=n(116),u=n(23),d=n(720),p=n(1241),h=n(1354),f=n(1242),g=n(1356),b=n(3507),v=n(3510),y=n(3511),E=n(915),N=n(3512),C=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),O=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},S=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},T=function(e){function t(t){var n=e.call(this,t)||this;return n.state={solution:Object(),generatorDevice:Object(),currentEquipment:"",currentEquipmentIndex:0,currentTab:"ControllerGUI",showControllers:[],selectedAssetType:"",selectedAssetLabel:"",selectedComponnet:Object(),selectedDevice:Object(),selectedEquipment:Object(),selectedPoint:Object(),compressorDefrostState:!1,devicesList:[],analogControllerDevice:Object(),allRelatedFloors:[],currentFloorTabIndex:0,currentFloorOntology:"",floorOntologies:[]},n.getSolutionInDetail=n.getSolutionInDetail.bind(n),n.deforstState=n.deforstState.bind(n),n.getUnique=n.getUnique.bind(n),n}return C(t,e),t.prototype.componentDidMount=function(){return O(this,void 0,void 0,function(){var e;return S(this,function(t){switch(t.label){case 0:return e=this.props.solution,Object(u.B)(!1),[4,this.getSolutionInDetail(e)];case 1:return t.sent(),[2]}})})},t.prototype.getSolutionInDetail=function(e){return O(this,void 0,void 0,function(){var t,n,a,l,o,r,i,s,c=this;return S(this,function(u){switch(u.label){case 0:return Object(m.a)(!0),t=this.props.buildingName,n=Object(),[4,Object(d.o)(t,e)];case 1:if(a=u.sent(),(n=a&&a.length>0&&a[0]?a[0]:Object())&&n.equipmentTemplatesOntology){if(l=n.equipmentTemplatesOntology.split(","),o=[],r=[],n){if(n.equipmentByTemplate&&n.equipmentByTemplate.length>0&&n.equipmentByTemplate[0])for(i=0;i<n.equipmentByTemplate.length;i++)s=n.equipmentByTemplate[i],o.push({label:s.equipment.rdfsLabel,value:l[i]});n.devices&&n.devices.map(function(e){return r.push(!1)})}this.setState({solution:n,currentEquipmentIndex:0,currentEquipment:e,showControllers:r},function(){var e="";n.controllerGUI?e="ControllerGUI":n.oneLineGUI?e="SymbolicGUI":n.floorPlanGUI&&(e="SymbolicGUI"),c.setState({currentTab:e})}),this.fetchEquipmentTemplateFromSolution(0)}return Object(m.a)(!1),[2]}})})},t.prototype.fetchEquipmentTemplateFromSolution=function(e){var t=this;Object(m.a)(!0);var n=this.state.solution;if(n&&n.equipmentByTemplate&&n.equipmentByTemplate.length>0){var a=[],l=Object(),o=Object(),r=n.equipmentByTemplate[e];n&&(n.equipmentByTemplate&&n.equipmentByTemplate.length>0&&(l=n.equipmentByTemplate[e||0].equipment),n.devices&&(a=n.devices)),"Generator"==r.equipment.subclassType&&(l=r.equipment),"Refrigerator"==r.equipment.subclassType&&(o=a.find(function(e){return"cbw418"==e.monitoringControlDeviceType.toLocaleLowerCase()}));var i=[];l&&l.floor&&i.push(l.floor),a&&a.length>0&&a.map(function(e){return O(t,void 0,void 0,function(){return S(this,function(t){return i.push(e.floor),[2]})})}),this.setState({selectedEquipment:l,devicesList:a,analogControllerDevice:o,floorOntologies:i,currentFloorOntology:i[0].ontology})}Object(m.a)(!1)},t.prototype.setCollapseIcon=function(e){var t=e.currentTarget.children[0].className;e.currentTarget.children[0].className="fa fa-plus"==t?"fa fa-minus":"fa fa-plus"},t.prototype.getDeviceControllerData=function(e,t,n){var a=this.state.showControllers;a[t]=!n,this.setState({showControllers:a})},t.prototype.deforstState=function(e){this.setState({compressorDefrostState:e})},t.prototype.showAssetProfile=function(e,t){var n=this,a=this.state,l=a.selectedAssetLabel,o=a.selectedComponnet,r=a.selectedDevice,i=a.selectedEquipment,s=a.selectedPoint;this.setState({selectedAssetType:""}),"Device"==t?(l=(r=e).rdfsLabel,this.setState({selectedAssetLabel:l,selectedDevice:r},function(){n.setState({selectedAssetType:t})})):"Point"==t?(l=(s=e).pointLabel,this.setState({selectedAssetLabel:l,selectedPoint:s},function(){n.setState({selectedAssetType:t})})):"Equipment"==t?(l=(i=e).rdfsLabel,this.setState({selectedAssetLabel:l,selectedEquipment:i},function(){n.setState({selectedAssetType:t})})):"Component"==t&&(l=(o=e).rdfsLabel,this.setState({selectedAssetLabel:l,selectedComponnet:o},function(){n.setState({selectedAssetType:t})})),document.getElementById("btnShowAssetProfile").click()},t.prototype.getUnique=function(){return O(this,void 0,void 0,function(){var e,t,n,a,l,o;return S(this,function(r){switch(r.label){case 0:for(e=this.state.floorOntologies,t=[],n=Object(),a=[],l=0;l<e.length;l++)-1===t.indexOf(e[l])&&t.push(e[l]);if(!(t&&t.length>0))return[3,5];l=0,r.label=1;case 1:return l<t.length?[4,Object(u.s)(t[l])]:[3,4];case 2:o=r.sent(),n={ontology:t[l],name:o},a.push(n),r.label=3;case 3:return l++,[3,1];case 4:this.setState({allRelatedFloors:a,currentFloorOntology:a[0].ontology}),r.label=5;case 5:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.buildingName,a=t.instance,m=this.state,d=m.solution,C=m.currentTab,T=m.showControllers,w=m.selectedAssetType,x=m.selectedAssetLabel,D=m.selectedComponnet,I=m.selectedDevice,_=m.selectedEquipment,A=m.selectedPoint,L=m.devicesList,j=m.analogControllerDevice,R=m.allRelatedFloors,k=m.currentFloorTabIndex,B=m.currentFloorOntology,P=_&&_.subclassType&&_.subclassType?_.subclassType:"";return l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"card",style:{padding:"1vw"}},l.a.createElement("div",{className:"row m-0"},l.a.createElement("div",{className:"col-md-12 p-0"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 padding-5 margin-5"},l.a.createElement("div",{className:"btn-group"},d.controllerGUI?l.a.createElement("button",{className:"btn "+("ControllerGUI"==C?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"ControllerGUI"})}},l.a.createElement("span",{className:"vertical-align"},"Controller View")):"",d.oneLineGUI?l.a.createElement("button",{className:"btn "+("SymbolicGUI"==C?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"SymbolicGUI"})}},l.a.createElement("span",{className:"vertical-align"},"One-Line View")):"",d.floorPlanGUI?l.a.createElement("button",{className:"btn "+("FloorPlanGUI"==C?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){return O(e,void 0,void 0,function(){var e,t;return S(this,function(n){switch(n.label){case 0:return e=this.setState,t=[{currentTab:"FloorPlanGUI"}],[4,this.getUnique];case 1:return e.apply(this,t.concat([n.sent()])),[2]}})})}},l.a.createElement("span",{className:"vertical-align"},"Floor Plan View")):"",l.a.createElement("button",{className:"btn "+("SolutionDiagram"==C?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTab:"SolutionDiagram"})}},l.a.createElement("span",{className:"vertical-align"},"Diagram"))))),"FloorPlanGUI"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},l.a.createElement("div",{className:"row m-0"},l.a.createElement("div",{className:"col-md-12 padding-5 margin-5"},l.a.createElement("button",{type:"button",title:"Show full view",className:"btn btn-dark btn-fill pull-right",style:{marginRight:10},onClick:function(){window.open("http://"+Object(u.k)()+"/#"+a+"/"+n+"/"+e.props.solution+"/BimSpace/FullScreen","_blank")}},"Show full view"," "),l.a.createElement("div",{className:"btn-group"},R.map(function(t,n){return l.a.createElement("button",{className:"btn "+(k==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){return e.setState({currentFloorTabIndex:n,currentFloorOntology:""},function(){e.setState({currentFloorOntology:t.ontology})})}},l.a.createElement("span",{className:"vertical-align"},t.name))})))),B&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement(E.a,{instance:a,buildingName:n,floorOntology:B,isView:!0,isMapper:!1})))),"ControllerGUI"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},d&&d.equipmentByTemplate&&d.equipmentByTemplate.map(function(t,o){return"Refrigerator"==t.equipment.subclassType?l.a.createElement("div",{className:"row m-0 padding-10"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},l.a.createElement("h4",{className:"panel-title"},l.a.createElement("div",null,l.a.createElement("span",{style:{marginLeft:"15px"}},t.equipment.rdfsLabel),l.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse-ref"+(o+1),href:"#collapse-ref"+(o+1),onClick:function(t){e.setCollapseIcon(t)}},l.a.createElement("i",{className:"fa fa-minus"}))))),l.a.createElement("div",{id:"collapse-ref"+(o+1),className:"panel-collapse collapse in"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{style:{height:"auto"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},L&&L.length>0&&l.a.createElement(s.a,{instance:a,buildingName:n,devices:L,solutionOntology:d.ontology,equipmentOntology:t.equipment.equipmentName,compressorBox:"ref"+(o+1)}))),o+1==1&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},j&&l.a.createElement(y.a,{buildingName:n,deviceName:j.deviceName,device:j}))))))))):"PTAC"==t.equipment.subclassType?l.a.createElement("div",{className:"row m-0 padding-10"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},l.a.createElement("h4",{className:"panel-title"},l.a.createElement("div",null,l.a.createElement("span",{style:{marginLeft:"15px"}},t.equipment.rdfsLabel),l.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse-ref"+(o+1),href:"#collapse-ref"+(o+1),onClick:function(t){e.setCollapseIcon(t)}},l.a.createElement("i",{className:"fa fa-minus"}))))),l.a.createElement("div",{id:"collapse-ref"+(o+1),className:"panel-collapse collapse in"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{style:{height:"auto"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},L&&L.length>0&&l.a.createElement(N.a,{instance:a,buildingName:n,solutionOntology:d.ontology,devices:L,equipmentOntology:t.equipment.equipmentName,equipmentRdfsLabel:t.equipment.rdfsLabel}))))))))):void 0})),"SymbolicGUI"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},"Generator"==P&&l.a.createElement(b.a,{building:n,instance:a,devices:d.devices,ontology:_&&_.equipmentName?_.equipmentName:"",solutionOntology:d.ontology})))),"SolutionDiagram"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"5px",minHeight:"700px"}},l.a.createElement(r.a,{buildingName:n,instance:a,SolutionName:"",solution:d,isFullScreenHeight:!1,isRefreshButtonShow:!1})),"Schedule"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},_&&_.subclassType&&"Refrigerator"==_.subclassType&&l.a.createElement(c.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",isDefrost:!1,hideTabs:!0})),"BoxSchedule"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},_&&_.subclassType&&"Refrigerator"==_.subclassType&&l.a.createElement(c.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",isDefrost:!1,hideTabs:!0})),"DefrostSchedule"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},_&&_.subclassType&&"Refrigerator"==_.subclassType&&l.a.createElement(c.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",isDefrost:!0,hideTabs:!0})),"ADP"==C&&l.a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},_&&_.subclassType&&"Refrigerator"==_.subclassType&&l.a.createElement(i.default,{instance:a,buildingName:n,InsightName:"default",ControlName:"CompressorControl",type:"Equipment",hideTabs:!0})),l.a.createElement("br",null),l.a.createElement("div",{className:"row m-0"},l.a.createElement("div",{className:"col-md-12 p-0"},l.a.createElement("div",{className:"panel-heading",style:{backgroundColor:"#174b54",color:"white",borderRadius:"5px"}},l.a.createElement("h4",{className:"panel-title"},l.a.createElement("div",null,l.a.createElement("span",{style:{marginLeft:"15px"}},"Devices"),l.a.createElement("a",{className:"icn-collapse pull-right color-white","data-toggle":"collapse",id:"btn-collapse1",href:"#collapse1",onClick:function(t){e.setCollapseIcon(t)}},l.a.createElement("i",{className:"fa fa-minus"}))))),l.a.createElement("div",{id:"collapse1",className:"panel-collapse collapse in"},l.a.createElement("div",{className:"panel-body"},l.a.createElement("div",{style:{height:"auto"}},l.a.createElement("div",{className:"padding-10",style:{border:"2px solid gainsboro"}},l.a.createElement("div",{className:"row no-padding"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-2 headingText"},"Device"),l.a.createElement("div",{className:"col-md-1 headingText"},"Device Type"),l.a.createElement("div",{className:"col-md-2 headingText"},"Moncon Type"),l.a.createElement("div",{className:"col-md-1 headingText"},"State"),l.a.createElement("div",{className:"col-md-1 headingText"},"ID"),l.a.createElement("div",{className:"col-md-2 headingText"},"IP Address"),l.a.createElement("div",{className:"col-md-2 headingText"},"Controller IP Address")))),l.a.createElement("div",{style:{paddingBottom:"1%",border:"1px solid lightgray",padding:"20px"}},L&&L.length>0&&L.map(function(t,o){if(t){var r;r=t.monitoringControlDeviceType&&(-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("signal")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("thermo")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("intesis")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("418")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("406")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ats")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("generator")||-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("watt"));var i="";return!t.monitoringControlDeviceType||-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")&&-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("v4")?!t.monitoringControlDeviceType||-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("intesis")&&-1==t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("watt")?t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ceiling")?i="CeilingSensor":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("thermo")?i="InsightControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("signal")?i="SignalRelayControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("418")?i="CompressorControl":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("406")?i="CBW406":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("ats")?i="ATS":t.monitoringControlDeviceType&&-1!=t.monitoringControlDeviceType.toLocaleLowerCase().indexOf("generator")&&(i="Generator"):i="IntesisControl":i="RelayControl",l.a.createElement("div",{key:o,style:{margin:"2px",border:"1px dotted lightgray",borderRadius:5}},l.a.createElement("div",{className:"padding-10",style:{marginBottom:"1px"},key:o},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement("a",{title:t.rdfsLabel,style:{color:"slategrey"},onClick:function(){e.showAssetProfile(t,"Device")}},t.rdfsLabel)),l.a.createElement("div",{className:"col-md-1"},t.deviceType),l.a.createElement("div",{className:"col-md-2"},t.monitoringControlDeviceType),l.a.createElement("div",{className:"col-md-1"},t.deviceState),l.a.createElement("div",{className:"col-md-1"},t.deviceID),l.a.createElement("div",{className:"col-md-2"},t.wirelessConfig&&t.wirelessConfig.ipAddress),l.a.createElement("div",{className:"col-md-2"},t.wirelessConfig&&t.wirelessConfig.controllerIPAddress),l.a.createElement("div",{className:"col-md-1"},r&&l.a.createElement("a",{className:"btn-xs btn-success btn active pull-right",style:{marginLeft:"5px"},title:"Show Controller",onClick:function(n){e.getDeviceControllerData(t.deviceName,o,T[o])},"data-toggle":"collapse",id:"btn-deviceCollapse"+o,href:"#deviceCollapse"+o}," ",l.a.createElement("i",{className:"fa fa-cogs","aria-hidden":"true"})," ",T[o]?"Hide":"Show"," Controller")))),l.a.createElement("div",{id:"deviceCollapse"+o,className:"panel-collapse collapse"},l.a.createElement("div",{className:"row"},T[o]&&t.monitoringControlDeviceType&&l.a.createElement("div",{className:"col-md-12"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(v.a,{ControlName:i,InsightName:t.deviceName,buildingName:n,instance:a,monconType:t.monitoringControlDeviceType,type:"Equipment"}))))))}}))))))))),l.a.createElement("button",{type:"button",id:"btnShowAssetProfile",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#assetProfileDialog",style:{display:"none"}},"."),l.a.createElement(o.a,{id:"assetProfileDialog",showSaveButton:!1,showCancelButton:!0,isEditForm:!0,heading:x+" Selected"},l.a.createElement("div",{className:"row padding-10"},w&&l.a.createElement("div",{className:"col=md-12"},"Device"==w&&I.deviceName&&l.a.createElement(f.default,{hideBackButton:!0,deviceName:I.deviceName,isEdit:!1,isView:!0,instance:a,buildingName:n,deviceType:"Device"==I.deviceType||"Electronic"==I.deviceType?"Electronic":-1!=I.deviceType.indexOf("Network")?"Network":-1!=I.deviceType.indexOf("Computi")?"Computing":""}),"Point"==w&&A.point&&l.a.createElement(g.default,{isEdit:!1,isView:!0,instance:a,buildingName:n,PointName:A.point}),"Equipment"==w&&_.equipmentName&&l.a.createElement(h.default,{instance:a,buildingName:n,equipmentName:_.equipmentName,showEquipmentInfoOnly:!0}),"Component"==w&&D.name&&l.a.createElement(p.a,{instance:a,buildingName:n,isEdit:!1,component:D,isView:!0})))))))},t}(l.a.Component);t.default=T},3506:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(31)),o=n(23),r=n(720),i=n(679),s=n(1073),c=n(1313),m=n(1072),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isDefrost:!1,currentTabs:"InnerControllerGUI",devices:n.props.devices?n.props.devices:[],cbwModel:Object(),compressorADPDB:Object(),spaceTemp:0,compressorController:Object(),modelChanged:!1,graphTab:"graph1",device418:Object(),device406:Object(),relayR18:Object(),compressorControllers:[]},n.fetchCompressorControllerDetails=n.fetchCompressorControllerDetails.bind(n),n.fetchDeviceData=n.fetchDeviceData.bind(n),n.fetchCompressorMQTTData=n.fetchCompressorMQTTData.bind(n),n.fetchADPValues=n.fetchADPValues.bind(n),n.getSpaceTemp=n.getSpaceTemp.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n.changeControl=n.changeControl.bind(n),n.changeEvaporatorFan=n.changeEvaporatorFan.bind(n),n.changeCompressorState=n.changeCompressorState.bind(n),n.changeTemperature=n.changeTemperature.bind(n),n.saveChanges=n.saveChanges.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,this.fetchDeviceData()];case 1:return e=t.sent(),[4,this.fetchADPValues()];case 2:return t.sent(),[4,this.fetchCompressorControllerDetails()];case 3:return t.sent(),[4,this.fetchCompressorMQTTData(e)];case 4:return t.sent(),this.setIntervalStart(),this.setState({device406:e}),[2]}})})},t.prototype.resetData=function(){return d(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return e=this.state.device406,[4,this.fetchADPValues()];case 1:return t.sent(),[4,this.fetchCompressorControllerDetails()];case 2:return t.sent(),[4,this.fetchCompressorMQTTData(e)];case 3:return t.sent(),[2]}})})},t.prototype.fetchCompressorControllerDetails=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,i,s,c;return p(this,function(m){switch(m.label){case 0:return e=this.props,t=e.buildingName,n=e.solutionOntology,a=e.equipmentOntology,[4,Object(r.q)(t,"",n,a)];case 1:return l=m.sent(),[4,Object(r.n)(l)];case 2:return(i=m.sent())&&i.length>0?this.setState({compressorController:i[0]}):(s=this.state.compressorADPDB,c={ontology:Object(o.r)(12),solutionOntology:n,compressorTemperature:s&&s.LowTemp?s.LowTemp:0,defrostControl:"Local",equipment:a,inhibitControl:"Local",isDefrost:!1,isEvaporatorFanAuto:!0},this.setState({compressorController:c,compressorControllers:i})),[2]}})})},t.prototype.fetchDeviceData=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l;return p(this,function(o){return e=this.state,t=e.device406,n=e.device418,a=e.relayR18,(l=this.props.devices)&&l.length>0&&(n=l.find(function(e){return"cbw418"==e.monitoringControlDeviceType.toLocaleLowerCase()}),t=l.find(function(e){return"cbw406"==e.monitoringControlDeviceType.toLocaleLowerCase()}),a=l.find(function(e){return-1!=e.monitoringControlDeviceType.toLocaleLowerCase().indexOf("i1")})),this.setState({device418:n,relayR18:a}),[2,t]})})},t.prototype.fetchCompressorMQTTData=function(e){return d(this,void 0,void 0,function(){var t,n=this;return p(this,function(a){switch(a.label){case 0:return[4,Object(r.f)(e.topic,new Date,new Date,!0).then(function(t){return!t||t&&t.error?(Object(l.a)("Error occurred while fetching CBW board info."),Object()):(t[t.length-1]&&localStorage.setItem(e.deviceID,JSON.stringify(t[t.length-1])),t[t.length-1])}).catch(function(e){return Object()})];case 1:return t=a.sent(),this.setState({cbwModel:t,modelChanged:!1},function(){n.getSpaceTemp()}),[2]}})})},t.prototype.fetchADPValues=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,o=this;return p(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.solutionOntology,a=e.equipmentOntology,[4,Object(i.o)(t,"",a,n)];case 1:return l=r.sent(),this.setState({compressorADPDB:l},function(){o.getSpaceTemp()}),[2]}})})},t.prototype.getSpaceTemp=function(){var e=this.props.compressorBox,t=this.state,n=t.compressorADPDB,a=t.cbwModel;if(n&&n.equipment&&a&&a.device_Name){var l=n.FrontTempWeight/100,o=n.BackTempWeight/100,r=n.SolidTempWeight/100,i=0;-1!=e.indexOf("1")?i=a.t3Ref1Front*l+a.t4Ref1Back*o+a.t8Ref1WaxProbe*r:-1!=e.indexOf("2")&&(i=a.t3Ref2Front*l+a.t4Ref2Back*o+a.t8Ref2WaxProbe*r),this.setState({spaceTemp:i})}},t.prototype.setIntervalStart=function(){var e=this,t=0;setInterval(function(){t++;var n=e.state,a=n.modelChanged,l=n.device406;!a&&t>=15&&(t=0,"InnerControllerGUI"==e.state.currentTabs&&e.fetchCompressorMQTTData(l))},1e3)},t.prototype.changeTemperature=function(e,t){var n=this.state,a=n.compressorController,l=n.compressorADPDB;a&&l&&(t||(t=e?l.LowTemp:l.HighTemp),e?(a.compressorTemperature=t-.1,a.compressorTemperature<l.LowTemp&&(a.compressorTemperature=l.LowTemp)):(a.compressorTemperature=t+.1,a.compressorTemperature>l.HighTemp&&(a.compressorTemperature=l.HighTemp)),this.setState({compressorController:a,modelChanged:!0}))},t.prototype.changeEvaporatorFan=function(e){var t=this.state.compressorController;t.isEvaporatorFanAuto=e,this.setState({compressorController:t,modelChanged:!0})},t.prototype.changeControl=function(e,t){var n=this.state.compressorController;e?n.defrostControl=t:n.inhibitControl=t,this.setState({compressorController:n,modelChanged:!0})},t.prototype.changeCompressorState=function(e){var t=this.state.compressorController;t.isDefrost=e,this.setState({compressorController:t,modelChanged:!0})},t.prototype.saveChanges=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,o,s,c,m,u,d,h,f,g,b,v;return p(this,function(p){switch(p.label){case 0:return e=this.props,t=e.buildingName,n=e.solutionOntology,a=e.equipmentOntology,l=this.state,o=l.modelChanged,s=l.compressorController,c=l.compressorADPDB,m=l.device406,u=l.relayR18,[4,Object(r.q)(t,"",n,"")];case 1:return d=p.sent(),[4,Object(r.n)(d)];case 2:for(h=p.sent(),f=!1,g=0;g<h.length;g++)(b=h[g]).equipment&&(b.equipment==a&&(b=s),"Schedule"!=b.inhibitControl&&"Schedule"!=b.defrostControl||f||(f=!0));return[4,Object(i.X)(m.deviceName,f)];case 3:return p.sent(),o?[4,Object(r.l)(s,t)]:[3,7];case 4:return p.sent(),"Local"==s.inhibitControl?[3,6]:(v={TS1:""+s.compressorTemperature,back:""+c.BackTempWeight,controller_pi:m.wirelessConfig.controllerIPAddress,dbdmin:""+c.DeadBandMinutes,dbdtemp:""+c.DeadBandTemp,defrost:"Manual"==s.defrostControl?s.isDefrost?"defrost":"inhibit":"",deviceID:m.deviceName,evapfan:s.isEvaporatorFanAuto?"Auto":"On",front:""+c.FrontTempWeight,solid:""+c.SolidTempWeight,relaynum:"1",rlb_ver:"i1",rlb_add:u.boardAddress},[4,Object(r.i)(v,t)]);case 5:p.sent(),p.label=6;case 6:this.setState({modelChanged:!1}),p.label=7;case 7:return[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.currentTabs,l=t.device418,o=t.device406,r=t.spaceTemp,i=t.compressorController,u=t.compressorADPDB,d=t.modelChanged,p=t.graphTab,h=this.props,f=h.instance,g=h.buildingName,b=h.compressorBox,v=h.solutionOntology,y=h.equipmentOntology,E=!1,N=!1,C=!1;i&&u&&(N=i.compressorTemperature<=u.LowTemp,E=i.compressorTemperature>=u.HighTemp),C=!(!i||"Local"!=i.inhibitControl);var O=i&&i.compressorTemperature?i.compressorTemperature.toFixed(2):0,S=i&&i.isDefrost?"Defrost":"Inhibit";return a.createElement(a.Fragment,null,a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("InnerControllerGUI"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"InnerControllerGUI"}),e.resetData()}},a.createElement("span",{className:"vertical-align"},"Controller")),a.createElement("button",{className:"btn "+("BoxSchedule"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"BoxSchedule"})}},a.createElement("span",{className:"vertical-align"},"Box Schedule")),a.createElement("button",{className:"btn "+("DefrostSchedule"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"DefrostSchedule"})}},a.createElement("span",{className:"vertical-align"},"Defrost Schedule")),a.createElement("button",{className:"btn "+("Graphs"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Graphs"})}},a.createElement("span",{className:"vertical-align"},"Graphs")),a.createElement("button",{className:"btn "+("InnerControllerADP"==n?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"InnerControllerADP"})}},a.createElement("span",{className:"vertical-align"},"ADP"))))),"InnerControllerGUI"==n&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},a.createElement("strong",null,"COMPRESSOR STATUS:")," ()"))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp pull-right"},a.createElement("div",null,"Space Temp"),a.createElement("div",{className:"counter"},r.toFixed(2),"\xb0F")),a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter"},a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},O,"\xb0F")),a.createElement("div",{className:"col-md-6 col-xs-12 InsightControls"},a.createElement("div",{className:"btn-group-vertical"},a.createElement("button",{type:"button",className:"btn tempButton heatTo",onClick:function(){return e.changeTemperature(!1,i.compressorTemperature)},disabled:E||C},a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-up"})),a.createElement("div",null,"Warmer")),a.createElement("button",{type:"button",className:"btn tempButton coolTo",onClick:function(){return e.changeTemperature(!0,i.compressorTemperature)},disabled:N||C},a.createElement("div",null,"Cooler"),a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-down"})))))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",{className:"InsightHeading"},a.createElement("i",{className:"fa fa-first-order"}),"Evaporator Fan"),a.createElement("div",{className:"btn-group"},a.createElement("button",{disabled:C,type:"button",className:i&&i.isEvaporatorFanAuto?"btn btn-fill":"btn",onClick:function(){e.changeEvaporatorFan(!0)}},"Auto"),a.createElement("button",{disabled:C,type:"button",className:i&&i.isEvaporatorFanAuto?"btn":"btn btn-fill",onClick:function(){e.changeEvaporatorFan(!1)}},"On"))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},a.createElement("br",null),a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Local"==i.inhibitControl?"btn-fill":""),onClick:function(){e.changeControl(!1,"Local")}},"Local"),a.createElement("button",{type:"button",className:"btn btn-success "+(!i||"Remote"!=i.inhibitControl&&"Schedule"!=i.inhibitControl&&"Manual"!=i.inhibitControl&&"Optimize"!=i.inhibitControl?"":"btn-fill")},"Remote"),a.createElement("button",{type:"button",onClick:function(){e.changeControl(!1,"Manual")},className:"btn btn-success "+(i&&"Manual"==i.inhibitControl?"btn-fill":"")},"Manual"),a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Schedule"==i.inhibitControl?"btn-fill":""),onClick:function(){e.changeControl(!1,"Schedule")}},"Schedule"),a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Optimize"==i.inhibitControl?"btn-fill":""),onClick:function(){e.changeControl(!1,"Optimize")}},"Optimize")))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},a.createElement("h5",{className:"title"},a.createElement("strong",null,"DEFROST")),a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Local"==i.defrostControl?"btn-fill":""),onClick:function(){e.changeControl(!0,"Local")}},"Local"),a.createElement("button",{type:"button",className:"btn btn-success "+(!i||"Remote"!=i.defrostControl&&"Schedule"!=i.defrostControl&&"Manual"!=i.defrostControl&&"Optimize"!=i.defrostControl?"":"btn-fill")},"Remote"),a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Manual"==i.defrostControl?"btn-fill":""),onClick:function(){e.changeControl(!0,"Manual")}},"Manual"),a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Schedule"==i.defrostControl?"btn-fill":""),onClick:function(){e.changeControl(!0,"Schedule")}},"Schedule"),a.createElement("button",{type:"button",className:"btn btn-success "+(i&&"Optimize"==i.defrostControl?"btn-fill":""),onClick:function(){e.changeControl(!0,"Optimize")}},"Optimize")),i&&"Manual"==i.defrostControl?a.createElement("div",{style:{marginTop:10}},a.createElement("button",{type:"button",className:i&&i.isDefrost?"btn":"btn btn-fill",style:{marginRight:"15px"},onClick:function(){e.changeCompressorState(!1)}},"Inhibited"),a.createElement("button",{type:"button",className:i&&i.isDefrost?"btn btn-fill":"btn",style:{marginRight:"15px"},onClick:function(){e.changeCompressorState(!0)}},"Defrost")):"")),a.createElement("div",{className:d?"InsightApplyChanges":"hidden"},a.createElement("h4",null,"Do you want to apply these changes?"),a.createElement("div",null,a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({modelChanged:!1})}},"Cancel"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){e.fetchCompressorControllerDetails(),e.fetchCompressorMQTTData(o)}},"Reset"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:this.saveChanges},"Apply Changes"))))))),"BoxSchedule"==n&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(m.default,{instance:f,buildingName:g,InsightName:o.deviceName,ControlName:"CompressorControl",type:"Equipment",isDefrost:!1,hideTabs:!0,compressorBox:y,compressorTemperature:O.toString()})),"DefrostSchedule"==n&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(m.default,{instance:f,buildingName:g,InsightName:o.deviceName,ControlName:"CompressorControl",type:"Equipment",isDefrost:!0,hideTabs:!0,compressorBox:y,compressorDefrostState:S})),"InnerControllerADP"==n&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(s.default,{instance:f,buildingName:g,InsightName:y,ControlName:"CompressorControl",type:"Equipment",hideTabs:!0,solutionOntology:v})),"Graphs"==n&&a.createElement("div",null,a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("graph1"==p?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph1"})})}},a.createElement("span",{className:"vertical-align"},"Graph 1")),a.createElement("button",{className:"btn "+("graph2"==p?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph2"})})}},a.createElement("span",{className:"vertical-align"},"Graph 2")),a.createElement("button",{className:"btn "+("graph3"==p?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph3"})})}},a.createElement("span",{className:"vertical-align"},"Graph 3")),a.createElement("button",{className:"btn "+("graph4"==p?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph4"})})}},a.createElement("span",{className:"vertical-align"},"Graph 4"))))),p&&a.createElement(c.default,{instance:f,buildingName:g,ControlName:"CompressorControl",InsightName:o.deviceName,hideTabs:!0,type:"Equipment",compressorBoxType:b,graphTab:p,compressorAnalogName:l.deviceName,isEsolutionController:!0})))},t}(a.Component);t.a=h},3507:function(e,t,n){"use strict";var a=n(2),l=n.n(a),o=n(650),r=n(116),i=n(3508),s=n(1289),c=n(10),m=n(1104),u=n(23),d=n(3509),p=n(720),h=n(679),f=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),g=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},b=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={devices:n.props.devices,atsDevice:Object(),relayDevice:Object(),atsMQTTData:Object(),utilityDevice:Object(),alarmsStatus:i.a.Stop,alarms:[],utilityMQTTData:Object(),intervalId:Object(),intervalCounter:0,SignalRelay:Object(),modelChanged:!1,actionApplied:"",generatorControl:Object()},n}return f(t,e),t.prototype.componentDidMount=function(){return g(this,void 0,void 0,function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this.props.devices,this.fetchATSDevice(e),this.fetchWattnodeDevice(e),Object(r.a)(!0),[4,this.fetchRelayDevice(e)];case 1:return t.sent(),[4,this.fetchGeneratorInfo()];case 2:return t.sent(),[4,this.fetchGeneratorAlarms()];case 3:return t.sent(),Object(r.a)(!1),this.setIntervalStart(),[2]}})})},t.prototype.setIntervalStart=function(){var e=this,t=this.state.intervalId;t&&clearInterval(t),t=setInterval(function(){return g(e,void 0,void 0,function(){var e,t;return b(this,function(n){switch(n.label){case 0:return(e=this.state.intervalCounter)>=15?(t=this.props.devices,[4,this.fetchRelayDevice(t)]):[3,2];case 1:return n.sent(),e=0,[3,3];case 2:e++,n.label=3;case 3:return this.setState({intervalCounter:e}),[2]}})})},1e3)},t.prototype.handleRelayControlType=function(e){var t=this.state.SignalRelay;if(t.controlType=e,e==s.a.Local)for(var n=0;n<8;n++)t.statusNotes[n]="Locally";this.setState({modelChanged:!0,SignalRelay:t,actionApplied:"ControlType"})},t.prototype.handleOptimzeSettingsStatus=function(e){var t=this.state.generatorControl;t.optimizeMode=e;this.setState({modelChanged:!0,generatorControl:t,actionApplied:"OptimizeSettings"})},t.prototype.fetchGeneratorInfo=function(){return g(this,void 0,void 0,function(){var e,t,n,a,l,o,r;return b(this,function(c){switch(c.label){case 0:return e=this.props,t=e.building,n=e.ontology,a=e.solutionOntology,[4,Object(d.a)(t,"",a,n)];case 1:return l=c.sent(),[4,Object(d.c)(l)];case 2:return o=c.sent(),r=Object(),r=o&&o.length>0&&o[0]?o[0]:{Volt1:"0",Volt2:"230",Volt3:"0",optimizeMode:i.b.Normal,atsStatus:i.a.Stop,initiateEngineStatus:i.a.Stop,controlType:s.a.Local,engineStatus:i.a.Stop,runEngineStatus:i.a.Stop,equipment:n,ontology:Object(u.r)(12),solutionOntology:a,building:t},this.setState({generatorControl:r}),[2]}})})},t.prototype.fetchATSDevice=function(e){return g(this,void 0,void 0,function(){var t,n=this;return b(this,function(a){return t=Object(),e&&e.length>0&&(t=e.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ats")})),this.setState({atsDevice:t},function(){return g(n,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,this.fetchATSMQTTData()];case 1:return e.sent(),[2]}})})}),[2]})})},t.prototype.fetchRelayDevice=function(e){return g(this,void 0,void 0,function(){var t,n,a,l,o,r,i,m;return b(this,function(u){switch(u.label){case 0:return t=Object(),n=Object(),a=[],l=[],e&&e.length>0?(t=e.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relay")}))&&t.deviceName?(o=this.props.building,[4,Object(h.y)(o,t.deviceName)]):[3,2]:[3,2];case 1:if((r=u.sent())&&r.length>0&&r[0]&&(i=r[0]))return n.device=Object(c.g)(i.device),n.controlType=Object(c.g)(i.controlType),n.relayStatus=Object(c.g)(i.relayStatus).split(","),n.statusNotes=Object(c.g)(i.statusNotes).split(","),this.setState({SignalRelay:n,relayDevice:t}),[2];u.label=2;case 2:for(m=0;m<8;m++)a.push(""),l.push("Local");return n={controlType:s.a.Local,device:t.deviceName,relayStatus:a,statusNotes:l},this.setState({SignalRelay:n,relayDevice:t}),[2]}})})},t.prototype.fetchWattnodeDevice=function(e){return g(this,void 0,void 0,function(){var t,n=this;return b(this,function(a){return t=Object(),e&&e.length>0&&(t=e.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("watt")})),this.setState({utilityDevice:t},function(){return g(n,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,this.fetchUtilityMQTTData()];case 1:return e.sent(),[2]}})})}),[2]})})},t.prototype.fetchATSMQTTData=function(){return g(this,void 0,void 0,function(){var e,t,n,a,l,o;return b(this,function(r){switch(r.label){case 0:return e=this.state,t=e.atsDevice,n=e.generatorControl,t.topic?(a=t.topic.split(","),[4,Object(p.e)(a[0],new Date,new Date,!0)]):[3,2];case 1:(l=r.sent())&&l.length>0&&(o=l[0],n.atsStatus="1"==o.Main_onNormal&&"0"==o.Main_onEmergency?i.a.Stop:i.a.Start,this.setState({atsMQTTData:o,generatorControl:n})),r.label=2;case 2:return[2]}})})},t.prototype.fetchUtilityMQTTData=function(){return g(this,void 0,void 0,function(){var e,t,n,a;return b(this,function(l){switch(l.label){case 0:return(e=this.state.utilityDevice).topic?(t=e.topic.split(","),[4,Object(p.h)(t[0],new Date,new Date,!0)]):[3,2];case 1:(n=l.sent())&&n.length>0&&(a=n[0],this.setState({utilityMQTTData:a})),l.label=2;case 2:return[2]}})})},t.prototype.fetchGeneratorAlarms=function(){return g(this,void 0,void 0,function(){var e,t,n,a,l;return b(this,function(o){switch(o.label){case 0:return e=this.props,t=e.building,n=e.devices,a=n.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("relay")}),l=[],a&&a.deviceName?[4,Object(m.e)(t,!1,!1,Object(),"","","","",a.deviceName)]:[3,2];case 1:l=o.sent(),o.label=2;case 2:return this.setState({alarms:l,alarmsStatus:l.length>0?i.a.Start:i.a.Stop}),[2]}})})},t.prototype.handleEngineStart=function(e){return void 0===e&&(e="3"),g(this,void 0,void 0,function(){var t;return b(this,function(n){switch(n.label){case 0:return(t=this.state.generatorControl).runEngineStatus==i.a.Pending?[3,9]:t.runEngineStatus!=i.a.Stop?[3,5]:(t.runEngineStatus=i.a.Pending,[4,this.saveGeneratorInfo(t)]);case 1:return n.sent(),[4,this.handleRelayOnOff(e,!0)];case 2:return n.sent()?(t.runEngineStatus=i.a.Start,t.engineStatus=i.a.Start,[4,this.saveGeneratorInfo(t)]):[3,4];case 3:n.sent(),n.label=4;case 4:return[3,9];case 5:return t.runEngineStatus!=i.a.Start?[3,9]:(t.runEngineStatus=i.a.Pending,[4,this.saveGeneratorInfo(t)]);case 6:return n.sent(),[4,this.handleRelayOnOff(e,!1)];case 7:return n.sent()?(t.runEngineStatus=i.a.Stop,t.engineStatus=i.a.Pending,[4,this.saveGeneratorInfo(t)]):[3,9];case 8:n.sent(),n.label=9;case 9:return[2]}})})},t.prototype.handleCancelInitiateEngine=function(e,t){return void 0===e&&(e="1"),void 0===t&&(t="2"),g(this,void 0,void 0,function(){var n;return b(this,function(a){switch(a.label){case 0:return(n=this.state.generatorControl).initiateEngineStatus==i.a.Stop?[3,4]:(n.initiateEngineStatus=i.a.Stop,n.engineStatus=i.a.Stop,n.Volt1="0",[4,this.handleRelayOnOff(e,!1)]);case 1:return a.sent(),[4,this.handleRelayOnOff(t,!0)];case 2:return a.sent(),[4,this.saveGeneratorInfo(n)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},t.prototype.handleInitiateEngine=function(e,t,n){return void 0===e&&(e="1"),void 0===t&&(t="2"),void 0===n&&(n="3"),g(this,void 0,void 0,function(){var a;return b(this,function(l){switch(l.label){case 0:return(a=this.state.generatorControl).initiateEngineStatus==i.a.Pending?[3,12]:a.initiateEngineStatus!=i.a.Stop?[3,6]:(a.initiateEngineStatus=i.a.Pending,a.engineStatus=i.a.Pending,[4,this.saveGeneratorInfo(a)]);case 1:return l.sent(),[4,this.handleRelayOnOff(e,!0)];case 2:return l.sent()?[4,this.handleRelayOnOff(t,!1)]:[3,5];case 3:return l.sent()?(a.initiateEngineStatus=i.a.Start,a.Volt1="208",[4,this.saveGeneratorInfo(a)]):[3,5];case 4:l.sent(),l.label=5;case 5:return[3,12];case 6:return a.initiateEngineStatus!=i.a.Start?[3,12]:a.runEngineStatus!=i.a.Start?[3,10]:(a.runEngineStatus=i.a.Pending,[4,this.saveGeneratorInfo(a)]);case 7:return l.sent(),[4,this.handleRelayOnOff(n,!1)];case 8:return l.sent()?(a.runEngineStatus=i.a.Stop,a.engineStatus=i.a.Pending,[4,this.saveGeneratorInfo(a)]):[3,10];case 9:l.sent(),l.label=10;case 10:return[4,this.handleCancelInitiateEngine()];case 11:l.sent(),l.label=12;case 12:return[2]}})})},t.prototype.handleManualAtsControl=function(e,t){return void 0===e&&(e="4"),void 0===t&&(t="5"),g(this,void 0,void 0,function(){var n,a=this;return b(this,function(l){switch(l.label){case 0:return(n=this.state.generatorControl).atsStatus==i.a.Pending?[3,4]:n.atsStatus!=i.a.Stop?[3,2]:(n.atsStatus=i.a.Pending,[4,this.saveGeneratorInfo(n)]);case 1:return l.sent(),this.setState({generatorControl:n},function(){return g(a,void 0,void 0,function(){return b(this,function(a){switch(a.label){case 0:return[4,this.handleRelayOnOff(e,!1)];case 1:return a.sent()?[4,this.handleRelayOnOff(t,!1)]:[3,4];case 2:return a.sent()?(n.atsStatus=i.a.Start,n.engineStatus=i.a.Start,n.Volt2="208",[4,this.saveGeneratorInfo(n)]):[3,4];case 3:a.sent(),a.label=4;case 4:return[2]}})})}),[3,4];case 2:return n.atsStatus!=i.a.Start?[3,4]:(n.atsStatus=i.a.Stop,[4,this.saveGeneratorInfo(n)]);case 3:l.sent(),l.label=4;case 4:return[2]}})})},t.prototype.handleAtsControlToUtility=function(e,t){return void 0===e&&(e="4"),void 0===t&&(t="5"),g(this,void 0,void 0,function(){var n;return b(this,function(a){switch(a.label){case 0:return(n=this.state.generatorControl).atsStatus==i.a.Pending?[3,5]:n.atsStatus!=i.a.Start?[3,5]:(n.atsStatus=i.a.Pending,n.engineStatus=i.a.Pending,[4,this.saveGeneratorInfo(n)]);case 1:return a.sent(),[4,this.handleRelayOnOff(e,!0)];case 2:return a.sent()?[4,this.handleRelayOnOff(t,!0)]:[3,5];case 3:return a.sent()?(n.atsStatus=i.a.Stop,n.engineStatus=i.a.Stop,n.Volt2="0",[4,this.saveGeneratorInfo(n)]):[3,5];case 4:a.sent(),a.label=5;case 5:return[2]}})})},t.prototype.generateAlarm=function(e,t,n,a){return g(this,void 0,void 0,function(){var n,l,o,r,i,s,c,m;return b(this,function(u){return n=this.props,l=n.ontology,o=n.instance,r=n.building,i=this.state,s=i.relayDevice,c=i.alarms,s&&((m=Object()).device=s.deviceName,m.deviceName=s.rdfsLabel,m.floor=s.floor,m.space=s.location,m.title=t,m.description="Device: "+s.rdfsLabel+" with Controller IP: "+s.wirelessConfig.controllerIPAddress+". Request failed: Relay "+e+" is not responding.",m.timeofalarm=(new Date).toString(),m.status="alerting",m.equipment=l,m.instance=o,m.buildingName=r,m.archived=!1,m.acknowledge=!1,m.deviceOntology=s.deviceName,m.sensedValue=a,m.sensedValueKey="relay_state_"+e,m.ruleId=2,m.ruleName=t,m.ruleUrl="",c.push(m),this.setState({alarms:c})),[2]})})},t.prototype.handleRelayOnOff=function(e,t){return g(this,void 0,void 0,function(){var n,a,l,o,s,c,m;return b(this,function(u){switch(u.label){case 0:return n=this.props.building,a=this.state,l=a.relayDevice,o=a.SignalRelay,l?(Object(r.a)(!0,"Sending Signal"),[4,Object(h.P)(l,e,t,n)]):[3,6];case 1:return(s=u.sent())?s.error?(c="Relay "+e+" "+(t?"On":"Off")+"Error",Object(r.a)(!0,"Generating Alarm"),[4,this.generateAlarm(e,c,s.error,t?1:0)]):[3,3]:[3,5];case 2:return u.sent(),this.setState({alarmsStatus:i.a.Start}),[3,5];case 3:return s.response&&"True"==s.response?(m=parseInt(e)-1,o.relayStatus[m]=t?"1":"0",o.statusNotes[m]="Manual",[4,this.saveSignalRelayInfo(o)]):[3,5];case 4:return u.sent(),[2,!0];case 5:Object(r.a)(!1),u.label=6;case 6:return[2,!1]}})})},t.prototype.saveSignalRelayInfo=function(e){return g(this,void 0,void 0,function(){var t;return b(this,function(n){switch(n.label){case 0:return t=this.props.building,Object(r.a)(!0,"Saving Relay Status"),[4,Object(h.V)(t,e)];case 1:return n.sent(),this.setState({SignalRelay:e}),Object(r.a)(!1),[2]}})})},t.prototype.saveGeneratorInfo=function(e){return g(this,void 0,void 0,function(){var t;return b(this,function(n){switch(n.label){case 0:return t=this.state.SignalRelay,Object(r.a)(!0,"Saving Generator Status"),e.controlType=t.controlType,[4,Object(d.b)(this.props.building,e)];case 1:return n.sent(),this.setState({generatorControl:e}),Object(r.a)(!1),[2]}})})},t.prototype.openAlarms=function(){var e=this.props,t=e.instance,n=e.building,a=this.state.alarms;localStorage.setItem("alarmList",JSON.stringify("")),a&&a.length>0?(localStorage.setItem("alarmList",JSON.stringify(a)),window.open("http://"+Object(u.k)()+"/#"+t+"/"+n+"/Health/Alarms/OperationalAlarms/AlarmList","_blank")):alert("No Alarms for Generator")},t.prototype.applyChanges=function(){return g(this,void 0,void 0,function(){var e,t,n,a,l;return b(this,function(o){switch(o.label){case 0:return e=this.state,t=e.modelChanged,n=e.actionApplied,a=e.SignalRelay,l=e.generatorControl,t?"Cancel"!=n?[3,2]:[4,this.handleCancelInitiateEngine()]:[3,15];case 1:return o.sent(),[3,14];case 2:return"Initiate Engine"!=n?[3,4]:[4,this.handleInitiateEngine()];case 3:return o.sent(),[3,14];case 4:return"Run Engine"!=n&&"Starting Engine"!=n&&"Stop Engine"!=n?[3,6]:[4,this.handleEngineStart()];case 5:return o.sent(),[3,14];case 6:return"Start Manual ATS Transfer"!=n?[3,8]:[4,this.handleManualAtsControl()];case 7:return o.sent(),[3,14];case 8:return"Stop Manual ATS Transfer"!=n?[3,10]:[4,this.handleAtsControlToUtility()];case 9:return o.sent(),[3,14];case 10:return"ControlType"!=n?[3,13]:[4,this.saveSignalRelayInfo(a)];case 11:return o.sent(),[4,this.saveGeneratorInfo(l)];case 12:return o.sent(),[3,14];case 13:o.label=14;case 14:this.setState({modelChanged:!1,actionApplied:""}),o.label=15;case 15:return[2]}})})},t.prototype.cancelClick=function(){return g(this,void 0,void 0,function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this.state.devices,Object(r.a)(!0),[4,this.fetchRelayDevice(e)];case 1:return t.sent(),[4,this.fetchGeneratorInfo()];case 2:return t.sent(),this.setState({modelChanged:!1,actionApplied:""}),Object(r.a)(!1),[2]}})})},t.prototype.render=function(){var e=this,t=this.state,n=t.atsMQTTData,a=t.alarmsStatus,r=t.alarms,c=t.utilityMQTTData,m=t.modelChanged,d=t.actionApplied,p=t.SignalRelay,h=t.generatorControl,f=h.Volt1,g=h.Volt3,b=h.atsStatus,v=h.engineStatus,y=h.initiateEngineStatus,E=h.optimizeMode,N=h.runEngineStatus,C="#d2202a",O="#337840";v==i.a.Start?O=C:v==i.a.Pending&&(O="#FF9500");var S="#337840";y==i.a.Start?S=C:y==i.a.Pending&&(S="#FF9500");var T="#337840";N==i.a.Start?T=C:N==i.a.Pending&&(T="#FF9500");var w="#337840";b==i.a.Start?w=C:b==i.a.Pending&&(w="#FF9500");var x="#007bff";a==i.a.Start?x=C:a==i.a.Pending&&(x="#FF9500");var D=0;c.PowerSum&&parseFloat(c.PowerSum)&&(D=parseFloat(c.PowerSum)/1e3);var I=p&&p.controlType==s.a.Manual,_=E==i.b.Optimze,A="";return"Cancel"==d&&(A="Do you want to apply these changes? (Turn off the Initiate Engine Stop)"),"ControlType"==d?A="Do you want to apply these changes? (Turn the Generator mode : "+p.controlType+")":"Initiate Engine"==d?A="Do you want to apply these changes? (Initiate Engine of Generator)":"Run Engine"==d||"Starting Engine"==d||"Stop Engine"==d?A="Do you want to apply these changes? ("+d+" of Generator)":"Start Manual ATS Transfer"==d?A="Are you sure you want to transfer load to the Generator?":"Stop Manual ATS Transfer"==d?A="Are you sure you wish to transfer to the utility power?":"OptimizeSettings"==d&&(A="Do you want to apply these changes? (Generator settings : "+E+")"),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"content",style:{padding:"15px 0 10px 15px !important"}},l.a.createElement("div",{style:{width:"100%",overflowX:"scroll"}},l.a.createElement("div",{className:"content",style:{width:"1200px",padding:"15px 0 10px 15px !important"}},l.a.createElement("div",{style:{width:"60px",float:"left",marginTop:"75px"}},l.a.createElement("h5",{className:"title",style:{fontWeight:"bold",display:"inline-block"}}," Utility ")),l.a.createElement("div",{style:{width:"130px",marginTop:"-8px",float:"left",marginLeft:"35px"}},l.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",c.VoltAvgLL," V "),l.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",D," kW"),l.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",n&&n.Normal_Frequency?n.Normal_Frequency:"0"," Hz ")),l.a.createElement("div",{style:{width:"315px",float:"left",textAlign:"right",marginTop:"-8px",marginLeft:"20px"}},l.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",f," V"),l.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",g," A"),l.a.createElement("h5",{className:"title",style:{fontSize:"18px",fontWeight:"bold"}}," ",n&&n.Emergency_Frequency?n.Emergency_Frequency:"0"," Hz ")),l.a.createElement("div",{style:{width:"950px",float:"left"}},l.a.createElement("div",{style:{width:"30px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px"}}),l.a.createElement("div",{style:{width:"50px",float:"left",height:"40px",backgroundColor:n&&"1"==n.Normal_SourceAvble?"red":"green",borderRadius:"5px"}}),l.a.createElement("div",{style:{width:"80px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px"}}),l.a.createElement("div",{style:{width:"28px",float:"left",height:"30px",backgroundColor:"black",marginTop:"5px",borderRadius:"22px",marginLeft:"-2px"}}),l.a.createElement("div",{style:{width:"120px",float:"left",height:"15px",backgroundColor:"black",marginTop:"55px",borderRadius:"2px",marginLeft:"-28px",visibility:b==i.a.Start||b==i.a.Pending?"hidden":"visible",transform:"rotate(42deg)"}}),l.a.createElement("div",{style:{width:"30px",float:"left",height:"30px",backgroundColor:"black",marginTop:"88px",borderRadius:"22px",marginLeft:"-30px"}}),l.a.createElement("div",{style:{width:"15px",float:"left",height:"200px",backgroundColor:"black",marginTop:"110px",borderRadius:"4px",marginLeft:"-23px"}}),l.a.createElement("div",{style:{width:"120px",float:"left",height:"15px",backgroundColor:"black",marginTop:"50px",borderRadius:"2px",marginLeft:"-25px",visibility:b==i.a.Stop||b==i.a.Pending?"hidden":"visible",transform:"rotate(-42deg)"}}),l.a.createElement("div",{style:{width:"30px",float:"left",height:"30px",backgroundColor:"black",marginTop:"5px",borderRadius:"22px",marginLeft:"-34px"}}),l.a.createElement("div",{style:{width:"100px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px",marginLeft:"-8px"}}),l.a.createElement("div",{style:{width:"50px",float:"left",height:"40px",backgroundColor:n&&"1"==n.Emergency_SourceAvble?"red":"green",borderRadius:"5px"}}),l.a.createElement("div",{style:{width:"100px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px"}}),l.a.createElement("div",{style:{width:"55px",float:"left",height:"54px",backgroundColor:n&&"0"==n.Emergency_Frequency?"green":"red",marginTop:"-8px",borderRadius:"32px",marginLeft:"-2px"}}),l.a.createElement("div",{style:{width:"100px",float:"left",height:"15px",backgroundColor:"black",marginTop:"12px",borderRadius:"2px",marginLeft:"-2px"}}),l.a.createElement("div",{style:{width:"80px",float:"left",height:"40px",backgroundColor:""+O,borderRadius:"5px"}})),l.a.createElement("div",{style:{width:"1200px"}},l.a.createElement("div",{style:{width:"50px",float:"left",height:"40px",backgroundColor:"red",marginTop:"1px",borderRadius:"5px",marginLeft:"300px"}})),l.a.createElement("div",{style:{width:"1200px"}},l.a.createElement("div",{style:{width:"80px",float:"left",height:"40px",borderRadius:"5px",marginTop:"41px",marginLeft:"-46px",fontSize:"18px",fontWeight:"bold"}},"Load")),l.a.createElement("div",{style:{width:"175px",float:"left",textAlign:"right",marginLeft:"175px",marginTop:"-260px"}},l.a.createElement("h5",{className:"title",style:{fontWeight:"bold"}}," Generator ")),l.a.createElement("div",{style:{width:"250px",float:"left",textAlign:"center",marginLeft:"355px",marginTop:"-261px"}},l.a.createElement("h5",{className:"title",style:{fontWeight:"bold"}}," Engine "),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("button",{className:"btn "+(y==i.a.Pending?"btn-primary":"btn-secondary")+" btn-fill",disabled:m||y!=i.a.Pending,onClick:function(){e.setState({modelChanged:!0,actionApplied:"Cancel"})}},"Cancel"),l.a.createElement("button",{className:"btn btn-fill pull-right",style:{backgroundColor:S},disabled:m||!I,onClick:function(){e.setState({modelChanged:!0,actionApplied:"Initiate Engine"})}},"Initiate Engine ",""+(y==i.a.Stop?i.a.Start:y==i.a.Pending?"Starting":"Stop"))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-primary btn-fill",style:{visibility:"hidden"}},"Cancel"),l.a.createElement("button",{className:"btn btn-fill pull-right",style:{backgroundColor:T},disabled:m||!(I&&y==i.a.Start),onClick:function(){e.setState({modelChanged:!0,actionApplied:(N==i.a.Stop?"Run":N==i.a.Pending?"Starting":"Stop")+" Engine"})}},N==i.a.Stop?"Run":N==i.a.Pending?"Starting":"Stop"," Engine"))),l.a.createElement("div",{style:{width:"250px",float:"right",textAlign:"center",marginTop:"-29%"}},l.a.createElement("div",{style:{width:"0",height:"0",borderStyle:"solid",borderWidth:"0 50px 75px 50px",borderColor:"transparent transparent "+x+" transparent",margin:"0 auto",cursor:"pointer"},onClick:function(){e.openAlarms()}}),l.a.createElement("div",{style:{width:"150px",float:"left",textAlign:"right"}},l.a.createElement("h5",{className:"title",style:{fontWeight:"bold"}}," Alarm "))),l.a.createElement("div",{style:{width:"1200px"}},l.a.createElement("button",{className:"btn btn-fill",disabled:m||!(I&&N==i.a.Start),style:{float:"left",marginTop:"-195px",marginLeft:"-50px",backgroundColor:w},onClick:function(){b==i.a.Stop?e.setState({modelChanged:!0,actionApplied:"Start Manual ATS Transfer"}):b==i.a.Start&&e.setState({modelChanged:!0,actionApplied:"Stop Manual ATS Transfer"})}},"Manual ATS Transfer")),l.a.createElement("div",{className:"btn-group",style:{width:"270px",float:"right",marginTop:"83px",marginRight:"-78px"}},l.a.createElement("button",{type:"button",className:"btn btn-success "+(I?"":"btn-fill"),disabled:m,onClick:function(){e.handleRelayControlType(s.a.Local)}},"Local"),l.a.createElement("button",{type:"button",className:"btn btn-success "+(I?"btn-fill":""),disabled:m,onClick:function(){e.handleRelayControlType(s.a.Manual)}},"Remote")),l.a.createElement("div",{className:"btn-group",style:{width:"870px"}},l.a.createElement("h6",null,"\xa0\xa0\xa0\xa0 Optimize Settings"),l.a.createElement("button",{type:"button",className:"btn "+(_?"":"btn-fill"),disabled:m,onClick:function(){e.handleOptimzeSettingsStatus(i.b.Normal)}},"Normal"),l.a.createElement("button",{type:"button",className:"btn "+(_?"btn-fill":""),disabled:m,onClick:function(){e.handleOptimzeSettingsStatus(i.b.Optimze)}},"Optimize")))),l.a.createElement("div",{className:m?"InsightApplyChanges":"hidden"},A&&l.a.createElement("h4",null,A),l.a.createElement("div",null,l.a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.cancelClick()}},"Cancel"),"\xa0",l.a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){e.applyChanges()}},"Apply Changes")))))),l.a.createElement("button",{type:"button",id:"btnShowAlarms",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#ShowAlarms",style:{display:"none"}},"."),l.a.createElement(o.a,{id:"ShowAlarms",showSaveButton:!1,showCancelButton:!0,isEditForm:!0,heading:"Alarms List"},l.a.createElement("div",{className:"row padding-10"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"padding-10",style:{border:"2px solid gainsboro"}},l.a.createElement("div",{className:"row no-padding"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-2 headingText"},"Title"),l.a.createElement("div",{className:"col-md-2 headingText"},"Description"),l.a.createElement("div",{className:"col-md-1 headingText"},"Relay"),l.a.createElement("div",{className:"col-md-2 headingText"},"Timestamp"),l.a.createElement("div",{className:"col-md-1 headingText"},"Device name"),l.a.createElement("div",{className:"col-md-2 headingText"},"Floor"),l.a.createElement("div",{className:"col-md-2 headingText"},"Space")))),l.a.createElement("div",{style:{paddingBottom:"1%",border:"1px solid lightgray"}},r&&r.length>0&&r.map(function(e,t){return l.a.createElement("div",{key:t,style:{margin:"2px"}},l.a.createElement("div",{className:"",style:{marginBottom:"1px"},key:t},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"col-md-2"},e.title),l.a.createElement("div",{className:"col-md-2"},e.description),l.a.createElement("div",{className:"col-md-1"},"Relay no. ",e.status),l.a.createElement("div",{className:"col-md-2"},e.timeofalarm),l.a.createElement("div",{className:"col-md-1"},e.deviceName),l.a.createElement("div",{className:"col-md-2"},Object(u.m)(e.floor)),l.a.createElement("div",{className:"col-md-2"},Object(u.m)(e.space))))))}))))))},t}(l.a.Component);t.a=v},3508:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return l});var a={Start:"Start",Pending:"Pending",Stop:"Stop"},l={Normal:"Normal",Optimze:"Optimze"}},3509:function(e,t,n){"use strict";t.b=function(e,t){return i(this,void 0,void 0,function(){var n=this;return s(this,function(o){switch(o.label){case 0:return[4,Object(r.f)({buildingName:e,model:t},r.a.ESOLUTION.SaveGeneratorInfo,l.b.ESolution).then(function(e){return i(n,void 0,void 0,function(){return s(this,function(t){return e.message?Object(a.b)(e.message):e.error&&Object(a.a)(e.error),[2]})})}).catch(function(e){Object(a.a)("Error occured while updating Generator info.")})];case 1:return[2,o.sent()]}})})},t.a=function(e,t,n,a){return i(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.e)({buildingName:e,ontology:t,solution:n,equipment:a},r.a.ESOLUTION.FetchGeneratorInfo,l.b.ESolution,!0)];case 1:return[2,o.sent()]}})})},t.c=function(e){return i(this,void 0,void 0,function(){var t,n,a,l;return s(this,function(r){for(t=[],n=0;n<e.length;n++)a=e[n],l={ontology:Object(o.g)(a.ontology),solutionOntology:Object(o.g)(a.solutionOntology),controlType:Object(o.g)(a.controlType),equipment:Object(o.g)(a.equipment),Volt1:Object(o.g)(a.Volt1),Volt2:Object(o.g)(a.Volt2),Volt3:Object(o.g)(a.Volt3),atsStatus:Object(o.g)(a.atsStatus),engineStatus:Object(o.g)(a.engineStatus),initiateEngineStatus:Object(o.g)(a.initiateEngineStatus),runEngineStatus:Object(o.g)(a.runEngineStatus),optimizeMode:Object(o.g)(a.optimizeMode),building:Object(o.g)(a.building)},t.push(l);return[2,t]})})};var a=n(31),l=n(20),o=n(10),r=n(12),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}},3510:function(e,t,n){"use strict";var a=n(2),l=n.n(a),o=n(1073),r=n(1490),i=n(1984),s=n(1717),c=n(1983),m=n(1716),u=n(1985),d=n(1313),p=n(1715),h=n(1072),f=n(1980),g=n(1469),b=n(1982),v=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentTab:"Current"},n}return v(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.InsightName,a=t.buildingName,v=t.instance,y=t.ControlName,E=t.type,N=t.monconType,C=this.state.currentTab,O=N&&-1!=N.toLowerCase().indexOf("wattnode"),S=N&&-1!=N.toLowerCase().indexOf("ats"),T=N&&-1!=N.toLowerCase().indexOf("signal"),w=N&&-1!=N.toLowerCase().indexOf("406"),x=N&&-1!=N.toLowerCase().indexOf("418"),D=N&&-1!=N.toLowerCase().indexOf("generator"),I=O||w||x||S||T||D,_=O||w||x||S||T||D,A=O||w||x||S||T||D,L=T;return l.a.createElement(l.a.Fragment,null,N&&-1==N.toLocaleLowerCase().indexOf("ceiling")&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12 "},l.a.createElement("ul",{className:"nav nav-tabs"},l.a.createElement("li",{className:"Current"==C?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Current"})}},"Current Values")),!I&&l.a.createElement("li",{className:"Schedule"==C?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Schedule"})}},"Schedule")),!A&&l.a.createElement("li",{className:"Alarms"==C?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Alarms"})}},"Alarms")),!L&&l.a.createElement("li",{className:"Graphs"==C?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"Graphs"})}},"Graphs")),!_&&l.a.createElement("li",{className:"ADP"==C?"active":""},l.a.createElement("a",{onClick:function(){e.setState({currentTab:"ADP"})}},"ADP"))))),"Current"==C&&l.a.createElement(l.a.Fragment,null,N&&-1!=N.toLocaleLowerCase().indexOf("relay")&&N&&-1==N.toLocaleLowerCase().indexOf("signal")&&l.a.createElement(p.default,{buildingName:a,instance:v,RelayDeviceName:n,hideTabs:!0,type:E}),N&&-1!=N.toLocaleLowerCase().indexOf("ceiling")&&l.a.createElement(m.default,{buildingName:a,instance:v,CeilingSensorBoardName:n,type:E}),N&&(-1!=N.toLocaleLowerCase().indexOf("thermo")||-1!=N.toLocaleLowerCase().indexOf("inte"))&&l.a.createElement(g.default,{buildingName:a,instance:v,InsightName:n,type:E,hideTabs:!0}),N&&-1!=N.toLocaleLowerCase().indexOf("signal")&&l.a.createElement(f.a,{buildingName:a,instance:v,RelayDeviceName:n,type:E,hideTabs:!0}),N&&-1!=N.toLocaleLowerCase().indexOf("watt")&&l.a.createElement(b.a,{buildingName:a,instance:v,InsightName:n,type:E,hideTabs:!0}),N&&-1!=N.toLocaleLowerCase().indexOf("418")&&l.a.createElement(c.a,{buildingName:a,instance:v,InsightName:n,controlName:y,type:E,hideTabs:!0}),N&&-1!=N.toLocaleLowerCase().indexOf("406")&&l.a.createElement(s.default,{buildingName:a,instance:v,deviceName:n,type:E,hideTabs:!0}),N&&-1!=N.toLocaleLowerCase().indexOf("ats")&&l.a.createElement(i.a,{buildingName:a,instance:v,InsightName:n,type:E,hideTabs:!0,controlName:y}),N&&-1!=N.toLocaleLowerCase().indexOf("generator")&&l.a.createElement(u.a,{buildingName:a,instance:v,InsightName:n,type:E,hideTabs:!0,controlName:y})),"Schedule"==C&&l.a.createElement(h.default,{instance:v,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}),"Alarms"==C&&l.a.createElement(r.default,{instance:v,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}),"Graphs"==C&&l.a.createElement(d.default,{instance:v,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}),"ADP"==C&&l.a.createElement(o.default,{instance:v,buildingName:a,InsightName:n,ControlName:y,type:E,hideTabs:!0}))},t}(l.a.Component);t.a=y},3511:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(31)),o=n(656),r=n(720),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={device:n.props.device?n.props.device:Object(),cbwModel:Object(),callInterval:!0},n.fetchDeviceData=n.fetchDeviceData.bind(n),n.fetchCompressorMQTTData=n.fetchCompressorMQTTData.bind(n),n.calculator=n.calculator.bind(n),n.setIntervalStart=n.setIntervalStart.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.fetchDeviceData()];case 1:return e=t.sent(),[4,this.fetchCompressorMQTTData(e)];case 2:return t.sent(),this.setIntervalStart(),this.setState({device:e}),[2]}})})},t.prototype.resetData=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.state.device,[4,this.fetchCompressorMQTTData(e)];case 1:return t.sent(),[2]}})})},t.prototype.fetchDeviceData=function(){return s(this,void 0,void 0,function(){var e,t,n,a;return c(this,function(l){switch(l.label){case 0:return e=this.props,t=e.deviceName,n=e.device,a=e.buildingName,n&&n.deviceName||!t?[3,2]:[4,Object(o.t)(t,a)];case 1:return[2,l.sent()];case 2:return[2,n]}})})},t.prototype.setIntervalStart=function(){var e=this,t=0;setInterval(function(){++t>=15&&(t=0,e.fetchCompressorMQTTData(e.state.device))},1e3)},t.prototype.fetchCompressorMQTTData=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,Object(r.g)(e.topic,new Date,new Date,!0).then(function(t){return!t||t&&t.error?(Object(l.a)("Error occurred while fetching CBW board info."),Object()):(t[t.length-1]&&localStorage.setItem(e.deviceID,JSON.stringify(t[t.length-1])),t[t.length-1])}).catch(function(e){return Object()})];case 1:return t=n.sent(),this.setState({cbwModel:t}),[2]}})})},t.prototype.calculator=function(e,t){return"Compressor and FreezerDefrost"==e?20*t/5:"PressureSensor"==e?14.5*t*50/5:void 0},t.prototype.render=function(){var e=this.state.cbwModel;return a.createElement("div",null,e&&a.createElement("div",{className:""},a.createElement("div",{className:"card"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},a.createElement("strong",null,"REFRIGERATOR STATUS:"))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12 col-xs-12 "},a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Compressor")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,this.calculator("Compressor and FreezerDefrost",e.a13Ref1Compressor)," amps ")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Freezer Defrost")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,this.calculator("Compressor and FreezerDefrost",e.a14Ref1FreezerDefrost)," amps ")," "))),a.createElement("div",{className:"col-md-12 col-xs-12 "},a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Pressure Sensor")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,this.calculator("PressureSensor",e.a15Ref1PressureSensor).toFixed(2)," psig ")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:20}}," ",a.createElement("strong",null,"Door Contact ")," ")),a.createElement("div",{className:"col-md-2 col-xs-6"},e.a16Ref1DoorContact&&e.a16Ref1DoorContact>2?a.createElement("p",{style:{fontSize:20,color:"#337840"}}," ",a.createElement("strong",null,"  The door is closed ")," "):a.createElement("p",{style:{fontSize:20,color:"red"}}," ",a.createElement("strong",null,"  The door is open ")," "))),a.createElement("div",{className:"col-md-12 col-xs-12 "},a.createElement("div",{className:"col-md-2 col-xs-6"},a.createElement("p",{style:{fontSize:15}}," ",a.createElement("strong",null,"Last data synced at: "))),a.createElement("div",{className:"col-md-10 col-xs-6"},a.createElement("p",{style:{fontSize:15}},"  ",new Date(e.timestamp).toLocaleString())))))))),a.createElement("p",null," "))},t}(a.Component);t.a=m},3512:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(31)),o=n(116),r=n(1289),i=n(779),s=n(23),c=n(908),m=n(679),u=n(1073),d=n(3513),p=n(1072),h=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),f=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},g=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ptacADP:Object(),ScheduleIsOnModel:Object(),currentTabs:"CurrentValues",graphTab:"graph1",modelChanged:!1,ptacController:Object(),ceilingSensorDevice:Object(),relayDevice:Object(),ceilingSensorMQTT:Object(),i1RelayMQTT:Object(),openRelayControlDialog:!1,callInterval:!0,intervalId:Object(),intervalCounter:0},n.changeTemperature=n.changeTemperature.bind(n),n.fetchDevices=n.fetchDevices.bind(n),n.fetchDevicesMQTTData=n.fetchDevicesMQTTData.bind(n),n.fetchPTACInfo=n.fetchPTACInfo.bind(n),n.changeTemperature=n.changeTemperature.bind(n),n.changeMode=n.changeMode.bind(n),n.changeControlType=n.changeControlType.bind(n),n.changeFanSettings=n.changeFanSettings.bind(n),n.applyRule=n.applyRule.bind(n),n.saveChanges=n.saveChanges.bind(n),n.onCloseRelayControlDialog=n.onCloseRelayControlDialog.bind(n),n.setOptimizeStatus=n.setOptimizeStatus.bind(n),n}return h(t,e),t.prototype.componentDidMount=function(){return f(this,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.fetchDevices(),[4,this.fetchPTACInfo()];case 1:return e.sent(),[4,this.fetchPTACADP()];case 2:return e.sent(),this.fetchDevicesMQTTData(),this.setIntervalStart(),[2]}})})},t.prototype.fetchPTACADP=function(){return f(this,void 0,void 0,function(){var e,t,n,a,l,o;return g(this,function(r){switch(r.label){case 0:return e=this.props,t=e.equipmentOntology,n=e.buildingName,a=e.solutionOntology,l=this.state.ptacADP,[4,Object(c.c)(n,"",t,a)];case 1:return o=r.sent(),l=o&&o.equipment?o:{ontology:Object(s.r)(12),building:n,equipment:t,DeadBandMinutes:1,DeadBandTemp:1,MotinoDetectionE1:1,MotinoDetectionE2:1,solutionOntology:a,ADPSettings:i.a,NoOfMotionTriggers:1,OccupancyDeadband:1},this.setState({ptacADP:l}),[2]}})})},t.prototype.fetchDevices=function(){var e=this,t=this.props.devices;if(t&&t.length>0){var n=Object(),a=Object();n=t.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("ceiling")}),a=t.find(function(e){return-1!=e.monitoringControlDeviceType.toLowerCase().indexOf("i1")}),this.setState({ceilingSensorDevice:n,relayDevice:a},function(){e.fetchDevicesMQTTData()})}},t.prototype.setIntervalStart=function(){var e=this,t=this.state.intervalId;t&&clearInterval(t),t=setInterval(function(){return f(e,void 0,void 0,function(){var e,t,n,a;return g(this,function(l){switch(l.label){case 0:return e=this.state,t=e.callInterval,n=e.modelChanged,a=e.intervalCounter,!n&&t&&a>=15?[4,this.fetchPTACInfo()]:[3,3];case 1:return l.sent(),[4,this.fetchDevicesMQTTData()];case 2:return l.sent(),a=0,[3,4];case 3:a++,l.label=4;case 4:return this.setState({intervalCounter:a}),[2]}})})},1e3)},t.prototype.onCloseRelayControlDialog=function(e){this.setState({openRelayControlDialog:e})},t.prototype.fetchDevicesMQTTData=function(){return f(this,void 0,void 0,function(){var e,t,n,a,o,r;return g(this,function(i){switch(i.label){case 0:return e=this.state,t=e.ceilingSensorDevice,n=e.relayDevice,a=e.ptacController,[4,Object(m.n)(t).then(function(e){var n=e[0];return!n||n&&n.error?(Object(l.a)("Error occurred while fetching ceiling sensor board info."),Object()):(localStorage.setItem(t.deviceID,JSON.stringify(e)),n)}).catch(function(e){return Object()})];case 1:return o=i.sent(),[4,Object(m.f)(n.topic,new Date,new Date,!0).then(function(e){return!e||e&&e.error?(Object(l.a)("Error occurred while fetching relay board info."),Object()):(e[e.length-1]&&localStorage.setItem(n.deviceID,JSON.stringify(e[e.length-1])),e[e.length-1])}).catch(function(e){return Object()})];case 2:return r=i.sent(),this.setState({ceilingSensorMQTT:o,i1RelayMQTT:r,ptacController:a}),[2]}})})},t.prototype.fetchPTACInfo=function(){return f(this,void 0,void 0,function(){var e,t,n,a,l,o,i;return g(this,function(m){switch(m.label){case 0:return e=this.props,t=e.buildingName,n=e.equipmentOntology,a=e.solutionOntology,[4,Object(c.a)(t,null,null,n)];case 1:return l=m.sent(),o=Object(),l&&l.length>0?[4,Object(c.e)(l)]:[3,3];case 2:return i=m.sent(),o=i[0],[3,4];case 3:o={controlType:r.a.Local,coolTemp:0,equipment:n,fanStatus:"",heatTemp:0,isAutoOff:!0,isOptimizedActive:!1,isRelayOn:!1,isRoomOccupied:"UNOCCUPIED",isShutdownActive:!1,mode:r.c.Off,ontology:Object(s.r)(12),optimizeStatus:"0",solutionOntology:a},m.label=4;case 4:return this.setState({ptacController:o}),[2]}})})},t.prototype.changeTemperature=function(e,t,n){var a=this.state.ptacController;t==r.c.Cool?(a.coolTemp=e?a.coolTemp-.1:a.coolTemp+.1,a.coolTemp=parseFloat(a.coolTemp.toFixed(2))):t==r.c.Heat&&(a.heatTemp=e?a.heatTemp-.1:a.heatTemp+.1,a.heatTemp=parseFloat(a.heatTemp.toFixed(2))),this.setState({ptacController:a,modelChanged:!0})},t.prototype.changeMode=function(e){var t=this.state,n=t.ptacController,a=t.ptacADP;if(n.mode=e,n.mode==r.c.Off)n.isAutoOff=!1,n.isRelayOn=!1;else if(n.isAutoOff=!0,n.isRelayOn=!0,e==r.c.Cool)n.coolTemp>=0&&n.coolTemp<=1&&a&&a.ADPSettings&&a.ADPSettings.length>0&&(l=a.ADPSettings.find(function(e){return"COOLING"==e.season&&"UNOCCUPIED"==e.occType}))&&l.defaultTargetTemp&&(n.coolTemp=parseFloat(l.defaultTargetTemp));else if(e==r.c.Heat){var l;if(n.heatTemp>=0&&n.heatTemp<=1&&a&&a.ADPSettings&&a.ADPSettings.length>0)(l=a.ADPSettings.find(function(e){return"HEATING"==e.season&&"UNOCCUPIED"==e.occType}))&&l.defaultTargetTemp&&(n.heatTemp=parseFloat(l.defaultTargetTemp))}this.setState({ptacController:n,modelChanged:!0})},t.prototype.setOptimizeStatus=function(e){var t=this.state.ptacController;t.optimizeStatus=e,t.isOptimizedActive=!0,t.isShutdownActive=!1,this.setState({ptacController:t,modelChanged:!0})},t.prototype.changeControlType=function(e){var t=this.state.ptacController;t.controlType=e,this.setState({ptacController:t,modelChanged:!0})},t.prototype.changeFanSettings=function(e){var t=this.state.ptacController;t.fanStatus=e,this.setState({ptacController:t,modelChanged:!0})},t.prototype.applyRule=function(e,t,n){return e?t?e<n?0:e:e>n?0:e:0},t.prototype.saveChanges=function(e,t){return f(this,void 0,void 0,function(){var n,a,i,s,u,d=this;return g(this,function(p){return n=this.props.buildingName,a=this.state,i=a.modelChanged,s=a.ptacController,u=a.relayDevice,this.setState({intervalCounter:0},function(){return f(d,void 0,void 0,function(){var a,d=this;return g(this,function(p){switch(p.label){case 0:return i||t?(e&&Object(o.a)(!0),s.controlType!=r.a.Manual?[3,2]:[4,Object(m.H)(u,s.isAutoOff,n)]):[3,4];case 1:(a=p.sent()).error?Object(l.a)(a.error):a&&Object(l.b)("Changes applied successfully. "),p.label=2;case 2:return[4,Object(c.b)(this.props.buildingName,s,!e)];case 3:p.sent(),this.setState({modelChanged:!1},function(){d.fetchPTACInfo(),e&&Object(o.a)(!1)}),p.label=4;case 4:return[2]}})})}),[2]})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,l=t.buildingName,i=t.solutionOntology,c=t.equipmentOntology,h=t.equipmentRdfsLabel,b=this.state,v=b.currentTabs,y=b.ptacController,E=b.modelChanged,N=b.graphTab,C=b.ceilingSensorMQTT,O=b.i1RelayMQTT,S=b.relayDevice,T=b.openRelayControlDialog,w=this.state.ScheduleIsOnModel,x=!y||y.controlType!=r.a.Manual;return w.equipmentOntology=c,a.createElement(a.Fragment,null,a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("CurrentValues"==v?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"CurrentValues"})}},a.createElement("span",{className:"vertical-align"},"Controller")),a.createElement("button",{className:"btn "+("Schedule"==v?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Schedule"})}},a.createElement("span",{className:"vertical-align"},"Schedule")),a.createElement("button",{className:"btn "+("Alarms"==v?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Alarms"})}},a.createElement("span",{className:"vertical-align"},"Alarms")),a.createElement("button",{className:"btn "+("Graphs"==v?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"Graphs"})}},a.createElement("span",{className:"vertical-align"},"Graphs")),a.createElement("button",{className:"btn "+("InnerControllerADP"==v?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({currentTabs:"InnerControllerADP"})}},a.createElement("span",{className:"vertical-align"},"ADP"))))),"CurrentValues"==v&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"card",id:"InsightsList"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"header"},a.createElement("h4",{className:"title"},a.createElement("strong",null,"Equipment Status:")," (",O&&O.active_power_Watts?parseFloat(O.active_power_Watts)<.2?"idle":"running":"idle",")"))),a.createElement("div",{className:"content"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",{className:"row"},y&&(y.mode==r.c.Heat||y.mode==r.c.Auto)&&a.createElement(a.Fragment,null,a.createElement("div",{className:(y.mode==r.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},a.createElement("div",null,"Heat To"),a.createElement("div",{className:"counter"},y&&y.heatTemp?y.heatTemp:0,"\xb0F")),a.createElement("div",{className:(y.mode==r.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},a.createElement("div",{className:"btn-group-vertical"},a.createElement("button",{type:"button",className:"btn tempButton heatTo",onClick:function(){return e.changeTemperature(!1,r.c.Heat,y&&y.heatTemp?y.heatTemp:0)},disabled:x},a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-up"})),a.createElement("div",null,"Warmer")),a.createElement("button",{type:"button",className:"btn tempButton coolTo",onClick:function(){return e.changeTemperature(!0,r.c.Heat,y&&y.heatTemp?y.heatTemp:0)},disabled:x},a.createElement("div",null,"Cooler"),a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-down"})))))),y&&(y.mode==r.c.Cool||y.mode==r.c.Auto)&&a.createElement(a.Fragment,null,a.createElement("div",{className:(y.mode==r.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" tempCounter"},a.createElement("div",null,"Cool To"),a.createElement("div",{className:"counter"},y&&y.coolTemp?y.coolTemp:0,"\xb0F")),a.createElement("div",{className:(y.mode==r.c.Auto?"col-md-3 col-xs-6":"col-md-6 col-xs-12")+" InsightControls"},a.createElement("div",{className:"btn-group-vertical"},a.createElement("button",{type:"button",className:"btn tempButton heatTo",onClick:function(){return e.changeTemperature(!1,r.c.Cool,y&&y.coolTemp?y.coolTemp:0)},disabled:x},a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-up"})),a.createElement("div",null,"Warmer")),a.createElement("button",{type:"button",className:"btn tempButton coolTo",onClick:function(){return e.changeTemperature(!0,r.c.Cool,y&&y.coolTemp?y.coolTemp:0)},disabled:x},a.createElement("div",null,"Cooler"),a.createElement("div",null,a.createElement("i",{className:"fa fa-angle-down"}))))))),a.createElement("div",{className:"row"},a.createElement("br",null),a.createElement("div",{className:"RelayHeading center"},a.createElement("b",null,"Relay Status: ",y.isRelayOn?"On":"Off")))),a.createElement("div",{className:"col-md-6 col-xs-12 tempCounter roomTemp "},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",null,"Room Temp"),a.createElement("div",{className:"counter"},Object(s.a)(C&&C.temp_celsius?C.temp_celsius:0).toFixed(2)," \xb0F")),y&&y.controlType!=r.a.Manual&&a.createElement("div",{className:"col-md-6 col-xs-12"},a.createElement("div",null,"Room Occupancy"),a.createElement("div",{className:"counter"},y.isRoomOccupied))))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",disabled:x,className:y&&y.mode===r.c.Off?"btn btn-fill":"btn",onClick:function(){return e.changeMode(r.c.Off)}},"Off"),a.createElement("button",{type:"button",className:y&&y.mode===r.c.Heat?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeMode(r.c.Heat)}},"Heat"),a.createElement("button",{type:"button",className:y&&y.mode===r.c.Cool?"btn btn-fill":"btn",disabled:x,onClick:function(){return e.changeMode(r.c.Cool)}},"Cool"))),a.createElement("div",{className:"col-md-6 col-xs-12 pull-right"},a.createElement("div",{className:"row PTACInfo"},a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("div",null,"Power Watts"),a.createElement("div",{className:"font22"},O&&O.active_power_Watts&&parseFloat(O.active_power_Watts)?parseFloat(O.active_power_Watts):0," kW")),a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("div",null,"Voltage"),a.createElement("div",{className:"font22"},O&&O.voltage_volts?O.voltage_volts:0," V")),a.createElement("div",{className:"col-md-3 col-xs-6"},a.createElement("div",null,"Frequency"),a.createElement("div",{className:"font22"},O&&O.frequency_Hz?this.applyRule(O.frequency_Hz,!0,55):0," Hz")),a.createElement("div",{className:"col-md-3 col-xs-6 p-0"},a.createElement("div",null,"Energy Watt/Hour"),a.createElement("div",{className:"font22"},O&&O.import_active_energy_Wh&&parseFloat(O.import_active_energy_Wh)?parseFloat(O.import_active_energy_Wh).toFixed(2):0," kWh"))))),a.createElement("div",{className:"row mt-22"},a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow"},a.createElement("div",null,a.createElement("button",{className:"btn btn-success center custom-outline-btn",title:"Control Settings",onClick:function(t){e.setState({openRelayControlDialog:!0},function(){document.getElementById("btnDialogRelayControl").click()})}}," ",a.createElement("i",{className:"fa fa-sliders"})," Control Settings",a.createElement("span",{className:"hidden visible-sm-inline visible-xs-inline headingText"},"Controls Settings")))),a.createElement("div",{className:"col-md-6 col-xs-12 InsightRow pull-right"},a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:"btn btn-success "+(y&&y.controlType==r.a.Local?"btn-fill":""),onClick:function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.changeControlType(r.a.Local),w.isScheduleOn=!1,Object(o.a)(!0),[4,Object(m.W)(w)];case 1:return e.sent(),y.isShutdownActive=!1,y.isOptimizedActive=!1,this.setState({ptacController:y}),Object(o.a)(!1),[2]}})})}},"Local"),a.createElement("button",{type:"button",className:"btn cursor-no-drop "+(!y||y.controlType!=r.a.Manual&&y.controlType!=r.a.Schedule&&y.controlType!=r.a.Optimize&&y.controlType!=r.a.Shutdown?"":"btn-success btn-fill")},"Remote"),a.createElement("button",{type:"button",onClick:function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.changeControlType(r.a.Manual),w.isScheduleOn=!1,Object(o.a)(!0),[4,Object(m.W)(w)];case 1:return e.sent(),y.isShutdownActive=!1,y.isOptimizedActive=!1,this.setState({ptacController:y}),Object(o.a)(!1),[2]}})})},className:"btn btn-success "+(y&&y.controlType==r.a.Manual?"btn-fill":"")},"Manual"),a.createElement("button",{type:"button",className:"btn btn-success "+(y&&y.controlType==r.a.Schedule?"btn-fill":""),onClick:function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.changeControlType(r.a.Schedule),w.isScheduleOn=!0,Object(o.a)(!0),[4,Object(m.W)(w)];case 1:return e.sent(),y.isShutdownActive=!1,y.isOptimizedActive=!1,this.setState({ptacController:y}),Object(o.a)(!1),[2]}})})}},"Schedule"),a.createElement("button",{type:"button",className:"btn btn-success "+(y&&y.controlType==r.a.Optimize?"btn-fill":""),onClick:function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.changeControlType(r.a.Optimize),w.isScheduleOn=!1,Object(o.a)(!0),[4,Object(m.W)(w)];case 1:return e.sent(),y.isShutdownActive=!1,y.isOptimizedActive=!0,this.setState({ptacController:y}),Object(o.a)(!1),[2]}})})}},"Optimize"),a.createElement("button",{disabled:"Off"==y.mode,type:"button",className:"btn btn-success "+(y&&y.controlType==r.a.Shutdown?"btn-fill":""),onClick:function(){return f(e,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this.changeControlType(r.a.Shutdown),w.isScheduleOn=!1,Object(o.a)(!0),[4,Object(m.W)(w)];case 1:return e.sent(),y.isShutdownActive=!0,y.isOptimizedActive=!1,this.setState({ptacController:y}),Object(o.a)(!1),[2]}})})}},"Shutdown")))),"Optimize"==y.controlType&&a.createElement("div",{className:"row p-4"},a.createElement("div",{className:"col-md-9"}),a.createElement("div",{className:"btn-group pull-right col-md-3 pl-0 mr-2"},a.createElement("button",{id:"optiStatus1",className:"btn "+("0"==y.optimizeStatus?"btn-fill":""),onClick:function(){e.setOptimizeStatus("0")},type:"button"},"0"),a.createElement("button",{id:"optiStatus1",disabled:"Cool"!=y.mode,className:"btn "+("1"==y.optimizeStatus?"btn-fill":""),onClick:function(){e.setOptimizeStatus("1")},type:"button"},"1"),a.createElement("button",{onClick:function(){e.setOptimizeStatus("2")},id:"optiStatus2",disabled:"Cool"!=y.mode,className:"btn "+("2"==y.optimizeStatus?"btn-fill":""),type:"button"},"2"),a.createElement("button",{onClick:function(){e.setOptimizeStatus("3")},id:"optiStatus3",disabled:"Heat"!=y.mode,className:"btn "+("3"==y.optimizeStatus?"btn-fill":""),type:"button"},"3"),a.createElement("button",{onClick:function(){e.setOptimizeStatus("4")},id:"optiStatus4",disabled:"Heat"!=y.mode,className:"btn "+("4"==y.optimizeStatus?"btn-fill":""),type:"button"},"4"))),a.createElement("div",{className:E?"InsightApplyChanges":"hidden",style:{margin:"55px -15px"}},a.createElement("h4",null,"Do you want to apply these changes?"),a.createElement("div",null,a.createElement("button",{type:"button",className:"btn btn-fill btn-secondary",onClick:function(){e.setState({modelChanged:!1})}},"Cancel"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-danger",onClick:function(){}},"Reset"),"\xa0",a.createElement("button",{type:"button",className:"btn btn-fill btn-primary",onClick:function(){return e.saveChanges(!0,!1)}},"Apply Changes"))))))),T&&S&&a.createElement(a.Fragment,null,a.createElement("button",{type:"button",id:"btnDialogRelayControl",className:"btn btn-dark pull-right",style:{display:"none"},"data-toggle":"modal","data-target":"#dialogRelayControl"}," . "),a.createElement(d.a,{id:"dialogRelayControl",ptacEqipmenteName:c,buildingName:l,onCloseControlDialog:this.onCloseRelayControlDialog,ptacEqipmentType:"PTAC",ptacEqipmenteLabel:h,ptacSolution:i})),"Schedule"==v&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(p.default,{isSolution:!0,equipmentOntology:c,instance:n,buildingName:l,InsightName:S.deviceName,ControlName:"PTACControl",type:"Equipment",hideTabs:!0})),"Alarms"==v&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}}),"InnerControllerADP"==v&&a.createElement("div",{style:{border:"1px solid rgb(21, 77, 87)",borderRadius:"1px 1px 8px 1px"}},a.createElement(u.default,{instance:n,buildingName:l,InsightName:c,ControlName:"PTACControl",type:"Equipment",hideTabs:!0,solutionOntology:i})),"Graphs"==v&&a.createElement("div",null,a.createElement("div",{className:"row m-0"},a.createElement("div",{className:"col-md-12 padding-5 margin-5"},a.createElement("div",{className:"btn-group"},a.createElement("button",{className:"btn "+("graph1"==N?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph1"})})}},a.createElement("span",{className:"vertical-align"},"Graph 1")),a.createElement("button",{className:"btn "+("graph2"==N?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph2"})})}},a.createElement("span",{className:"vertical-align"},"Graph 2")),a.createElement("button",{className:"btn "+("graph3"==N?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph3"})})}},a.createElement("span",{className:"vertical-align"},"Graph 3")),a.createElement("button",{className:"btn "+("graph4"==N?"btn-custom-fill":"")+" btn-custom-secondary-dark",onClick:function(){e.setState({graphTab:""},function(){e.setState({graphTab:"graph4"})})}},a.createElement("span",{className:"vertical-align"},"Graph 4")))))))},t}(a.Component);t.a=b},3513:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(650)),o=n(679),r=n(10),i=n(116),s=n(908),c=n(1289),m=n(23),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},p=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={SensorList:[],devices:[],ptacControllerSettings:Object(),ptacController:Object()},n.onSaveHandle=n.onSaveHandle.bind(n),n.fetchDevices=n.fetchDevices.bind(n),n.handleTypeChange=n.handleTypeChange.bind(n),n.handleSensorChange=n.handleSensorChange.bind(n),n.fetchPTACControlSettingsData=n.fetchPTACControlSettingsData.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return d(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return Object(i.a)(!0),[4,this.fetchDevices()];case 1:return e.sent(),[4,this.fetchPTACInfo()];case 2:return e.sent(),[4,this.fetchPTACControlSettingsData()];case 3:return e.sent(),Object(i.a)(!1),[2]}})})},t.prototype.fetchPTACControlSettingsData=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,o,r;return p(this,function(i){switch(i.label){case 0:return e=this.props,t=e.ptacEqipmenteName,n=e.ptacSolution,a=e.ptacEqipmentType,t?[4,Object(s.d)("","",t)]:[3,3];case 1:return l=i.sent(),[4,Object(s.f)(l)];case 2:(o=i.sent())&&o.length>0&&o[0]?this.setState({ptacControllerSettings:o[0]}):(r={ontology:Object(m.r)(12),controlType:"",equipment:t,equipmentType:a,ptactType:"",sensorDevice:"",solutionOntology:n},this.setState({ptacControllerSettings:r})),i.label=3;case 3:return[2]}})})},t.prototype.fetchPTACInfo=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,o,r;return p(this,function(i){switch(i.label){case 0:return e=this.props,t=e.buildingName,n=e.ptacEqipmenteName,a=e.ptacSolution,[4,Object(s.a)(t,null,null,n)];case 1:return(l=i.sent())&&l.length>0?[4,Object(s.e)(l)]:[3,3];case 2:return o=i.sent(),r=o[0],this.setState({ptacController:r}),[3,4];case 3:r={ontology:Object(m.r)(12),controlType:c.a.Local,coolTemp:0,equipment:n,fanStatus:c.b.Auto,heatTemp:0,isRelayOn:!1,isAutoOff:!1,solutionOntology:a,mode:c.c.Off,optimizeStatus:"",isOptimizedActive:!1,isShutdownActive:!1,isRoomOccupied:"UNOCCUPIED"},this.setState({ptacController:r}),i.label=4;case 4:return[2]}})})},t.prototype.handleTypeChange=function(e){var t=this.state.ptacControllerSettings;t.ptactType=e,this.setState({ptacControllerSettings:t})},t.prototype.handleSensorChange=function(e){var t=this.state.ptacControllerSettings;t.sensorDevice=e,this.setState({ptacControllerSettings:t})},t.prototype.fetchDevices=function(){return d(this,void 0,void 0,function(){var e,t,n;return p(this,function(a){switch(a.label){case 0:return(e=this.props.buildingName)?(t=[],[4,Object(o.u)(e)]):[3,2];case 1:(n=a.sent())&&n.length>0&&(t=n.filter(function(e){return-1!=Object(r.g)(e.moncontype).toLowerCase().indexOf("ceiling")}).map(function(e){return{value:Object(r.g)(e.moncondevice),label:Object(r.g)(e.rdfsLabel)}})),this.setState({devices:n,SensorList:t}),a.label=2;case 2:return[2]}})})},t.prototype.onSaveHandle=function(){return d(this,void 0,void 0,function(){var e,t,n,a,l,o;return p(this,function(r){switch(r.label){case 0:return e=this.props,t=e.buildingName,n=e.refreshControlDB,a=e.onCloseControlDialog,l=this.state,o=l.ptacControllerSettings,l.ptacController.controlType==c.a.Manual?o.controlType="10":o.sensorDevice?o.controlType="6":o.controlType="1",Object(i.a)(!0),[4,Object(s.h)(t,o)];case 1:return r.sent(),n?[4,n()]:[3,3];case 2:r.sent(),r.label=3;case 3:return a&&a(!1),Object(i.a)(!1),[2]}})})},t.prototype.render=function(){var e=this,t=this.props,n=t.id,o=t.onCloseControlDialog,r=t.ptacEqipmenteLabel,i=this.state,s=i.ptacControllerSettings,c=i.SensorList,m=!s||!s.ptactType;return a.createElement(l.a,{id:n,saveButtonText:"Save",heading:r+" Control Settings",showSaveButton:!0,disableSaveButton:m,showCancelButton:!0,onSaveButtonClick:function(){e.onSaveHandle()},onCancelButtonClickActive:!0,onCancelButtonClick:function(){return d(e,void 0,void 0,function(){return p(this,function(e){return o&&o(!1),[2]})})}},a.createElement("div",{className:"card dataCard no-margin"},a.createElement("div",{className:"container-fluid"},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"ptacType"},"PTAC Type:"),a.createElement("select",{id:"ptacType",className:"form-control",value:s&&s.ptactType,onChange:function(t){return e.handleTypeChange(t.target.value)}},a.createElement("option",{value:"0"},"Select Type"),a.createElement("option",{value:"A"},"Type A"),a.createElement("option",{value:"B"},"Type B"),a.createElement("option",{value:"C"},"Type C"))),a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"sensor"},"Occupancy Sensor:"),a.createElement("select",{id:"sensor",className:"form-control",value:s&&s.sensorDevice,onChange:function(t){return e.handleSensorChange(t.target.value)}},a.createElement("option",{value:""},"Select Occupancy Sensor"),c&&c.map(function(e){return a.createElement("option",{value:e.value},e.label)})))))))},t}(a.Component);t.a=h},762:function(e,t,n){"use strict";var a=n(2),l=(n.n(a),n(788)),o=n(656),r=n(653),i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),s=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={deviceSensedList:[],addNew:!1,customAlarms:[Object(),Object(),Object()],newCustomAlarm:Object(),idToDelete:"",detailsExpanded:!1},n.getData=n.getData.bind(n),n.handleNewCustomAlarmChange=n.handleNewCustomAlarmChange.bind(n),n.handleSave=n.handleSave.bind(n),n.handleDelete=n.handleDelete.bind(n),n.handleEdit=n.handleEdit.bind(n),n}return i(t,e),t.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getData()];case 1:return e.sent(),[2]}})})},t.prototype.getData=function(){return s(this,void 0,void 0,function(){var e,t,n,a,l;return c(this,function(r){switch(r.label){case 0:return e=this.props,t=e.moncon,n=e.monconType,a=this.state.customAlarms,n&&t?[4,Object(o.h)(n)]:[3,3];case 1:return l=r.sent(),[4,Object(o.f)(t)];case 2:a=r.sent(),this.setState({deviceSensedList:l,customAlarms:a}),r.label=3;case 3:return[2]}})})},t.prototype.handleNewCustomAlarmChange=function(e){var t=this.state.newCustomAlarm;t[e.target.name]=e.target.value,t.instance=this.props.instance,t.buildingName=this.props.buildingName,t.moncon=this.props.moncon,t.deviceId=this.props.deviceId,this.setState({newCustomAlarm:t})},t.prototype.handleSave=function(){return s(this,void 0,void 0,function(){var e,t=this;return c(this,function(n){switch(n.label){case 0:return e=this.state.newCustomAlarm,[4,Object(o.m)(e)];case 1:return n.sent(),this.setState({newCustomAlarm:Object(),addNew:!1},function(){t.getData()}),[2]}})})},t.prototype.handleDelete=function(){return s(this,void 0,void 0,function(){var e,t=this;return c(this,function(n){switch(n.label){case 0:return e=this.state.idToDelete,[4,Object(o.c)(e)];case 1:return n.sent(),this.setState({newCustomAlarm:Object(),addNew:!1,idToDelete:""},function(){t.getData()}),[2]}})})},t.prototype.handleEdit=function(e){return s(this,void 0,void 0,function(){var t,n,a;return c(this,function(l){return t=this.state,n=t.customAlarms,a=t.newCustomAlarm,(a=n.find(function(t){return t._id==e}))&&a._id&&this.setState({newCustomAlarm:a,addNew:!0}),[2]})})},t.prototype.render=function(){var e=this,t=this.props,n=t.instance,o=t.monconRDFsLabel,i=t.moncon,s=this.state,c=s.deviceSensedList,m=s.addNew,u=s.customAlarms,d=s.newCustomAlarm,p=s.detailsExpanded;return a.createElement(a.Fragment,null,a.createElement("div",{className:"accordion row padding-10",id:"accordionCustomerSensedAlarms"+i,style:{paddingLeft:"30px",border:"1px solid #80808066",margin:"10px",borderRadius:"7px"}},a.createElement("div",{className:"",id:"headingOne"},a.createElement("button",{className:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#collapseCustomerSensedAlarms"+i,style:{border:0,left:"-25px",position:"relative"},"aria-expanded":"true","aria-controls":"collapseCustomerSensedAlarms"+i,onClick:function(){e.setState({detailsExpanded:!p})}},a.createElement("i",{className:p?"fa fa-minus":"fa fa-plus","aria-hidden":"true"}),"\xa0 Setup Custom Alarms for ",o)),a.createElement("div",{id:"collapseCustomerSensedAlarms"+i,className:"collapse","aria-labelledby":"headingOne","data-parent":"#accordionCustomerSensedAlarms"+i},a.createElement("div",{className:"col-md-12"},a.createElement("div",{className:"row"},!m&&a.createElement("div",{className:"row padding-10"},a.createElement("div",{className:"col-md-6 col-xs-12",style:{paddingLeft:25}},a.createElement("button",{type:"button",className:"btn btn-sm btn-fill btn-primary",onClick:function(){e.setState({addNew:!0})}},a.createElement("i",{className:"fa fa-plus"})))),m&&a.createElement("div",{className:"row padding-5"},a.createElement("div",{className:"col-md-4 col-xs-12"},a.createElement("div",{className:"col-md-4"},a.createElement("label",{htmlFor:"sensedKey"},"Sensed Value:")),a.createElement("div",{className:"col-md-8"},a.createElement("select",{className:"form-control "+(d.sensedKey?"":"addFieldValidate"),name:"sensedKey",id:"sensedKey",disabled:!1,value:d.sensedKey,onChange:this.handleNewCustomAlarmChange},a.createElement("option",{value:""},"Select Attribute"),c&&c.map(function(e,t){return a.createElement("option",{value:e.sensedValue,key:t},l.a.find(function(t){return t.key==e.sensedValue})?l.a.find(function(t){return t.key==e.sensedValue}).Label:e.sensedValue)})))),a.createElement("div",{className:"col-md-3 col-xs-12"},a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"minimumValue"},"Minimum Value:")),a.createElement("div",{className:"col-md-6"},a.createElement("input",{type:"number",className:"form-control "+(d.minimumValue>=0?"":"addFieldValidate"),name:"minimumValue",disabled:!1,value:d.minimumValue,onChange:this.handleNewCustomAlarmChange}))),a.createElement("div",{className:"col-md-3 col-xs-12"},a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"maximumValue"},"Maximum Value:")),a.createElement("div",{className:"col-md-6"},a.createElement("input",{type:"number",className:"form-control "+(d.maximumValue>=0?"":"addFieldValidate"),name:"maximumValue",disabled:!1,value:d.maximumValue,onChange:this.handleNewCustomAlarmChange}))),a.createElement("div",{className:"col-md-2 col-xs-12"},a.createElement("div",{className:"col-md-6"},a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",disabled:!(d.sensedKey&&d.minimumValue&&d.maximumValue),onClick:function(){e.handleSave()}},"Save")),a.createElement("div",{className:"col-md-6"},a.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:function(){e.setState({newCustomAlarm:Object(),addNew:!1},function(){e.getData()})}},"Cancel")))),u&&u.map(function(t){if(t._id!=d._id)return a.createElement("div",{className:"row padding-5"},a.createElement("div",{className:"col-md-5 col-xs-12"},a.createElement("div",{className:"col-md-4"},a.createElement("label",{htmlFor:"sensedValue"},"Sensed Value:")),a.createElement("div",{className:"col-md-8"},a.createElement("label",null,l.a.find(function(e){return e.key==t.sensedKey})?l.a.find(function(e){return e.key==t.sensedKey}).Label:t.sensedKey))),a.createElement("div",{className:"col-md-3 col-xs-12"},a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"minimumExtremeValue"},"Minimum Value:")),a.createElement("div",{className:"col-md-6"},a.createElement("label",null,t.minimumValue))),a.createElement("div",{className:"col-md-3 col-xs-12"},a.createElement("div",{className:"col-md-6"},a.createElement("label",{htmlFor:"minimumNormalValue"},"Maximum Value:")),a.createElement("div",{className:"col-md-6"},a.createElement("label",null,t.maximumValue))),a.createElement("div",{className:"col-md-1 col-xs-12"},a.createElement("button",{type:"button",className:"btn btn-xs btn-primary",onClick:function(){e.handleEdit(t._id)}},a.createElement("i",{className:"fa fa-edit"})),"\xa0",a.createElement("button",{type:"button",className:"btn btn-xs btn-danger",onClick:function(){e.setState({idToDelete:t._id},function(){document.getElementById("btnConfirmCustom").click()})}},a.createElement("i",{className:"fa fa-trash"}))))}))))),a.createElement("button",{id:"btnConfirmCustom",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmDeleteDialogCustom"},"."),a.createElement(r.a,{instance:n,id:"ConfirmDeleteDialogCustom",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure to delete this alarm?",heading:"Confirm...",onConfirmButtonClick:function(){e.handleDelete()}}))},t}(a.Component);t.a=m},779:function(e,t,n){"use strict";var a,l,o,r,i,s,c;n.d(t,"c",function(){return a}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return m}),n.d(t,"a",function(){return d}),function(e){e[e.OFF=0]="OFF",e[e.HEAT=1]="HEAT",e[e.COOL=2]="COOL",e[e.AUTO=3]="AUTO"}(a||(a={})),function(e){e[e.Idle=0]="Idle",e[e.HEATING=1]="HEATING",e[e.COOLING=2]="COOLING",e[e.LOCKOUT=3]="LOCKOUT",e[e.ERROR=4]="ERROR"}(l||(l={})),function(e){e[e.AUTO=0]="AUTO",e[e.ON=1]="ON"}(o||(o={})),function(e){e[e.Fahrenheit=0]="Fahrenheit",e[e.Celsius=1]="Celsius"}(r||(r={})),function(e){e[e.Fahrenheit=0]="Fahrenheit",e[e.Celsius=1]="Celsius"}(i||(i={})),function(e){e[e.occupied1=0]="occupied1",e[e.occupied2=1]="occupied2",e[e.occupied3=2]="occupied3",e[e.unoccupied=3]="unoccupied",e[e.inactive=255]="inactive"}(s||(s={})),function(e){e[e.Home=0]="Home",e[e.Away=1]="Away"}(c||(c={}));var m,u;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(m||(m={})),function(e){e[e.AllModes=0]="AllModes",e[e.HeatCoolOnly=1]="HeatCoolOnly",e[e.HeatOnly=2]="HeatOnly",e[e.CoolOnly=3]="CoolOnly"}(u||(u={}));var d=[{ontology:"",season:"COOLING",occType:"UNOCCUPIED",defaultTargetTemp:"85.0",fanSetting:"MEET_TURNOVER_REQTS",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"10.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"8.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"OCCUPIED",defaultTargetTemp:"70.0",fanSetting:"AUTO_HI",warmLittleTemp:"2.0",warmLittleHowBad:"3.0",warmLotTemp:"8.0",warmLotHowBad:"8.0",warmHardLimitTemp:"80.0",coolLittleTemp:"2.0",coolLittleHowBad:"3.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"SEMI",defaultTargetTemp:"75.0",fanSetting:"MEET_TURNOVER_REQTS",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"10.0",warmLotHowBad:"10.0",warmHardLimitTemp:"90.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"8.0",coolHardLimitTemp:"60.0"},{ontology:"",season:"COOLING",occType:"SHUTDOWN",defaultTargetTemp:"90.0",fanSetting:"AUTO_LO",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"110.0",coolLittleTemp:"10.0",coolLittleHowBad:"5.0",coolLotTemp:"20.0",coolLotHowBad:"10.0",coolHardLimitTemp:"45.0"},{ontology:"",season:"HEATING",occType:"UNOCCUPIED",defaultTargetTemp:"55.0",fanSetting:"AUTO_HI",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"10.0",coolLotHowBad:"10.0",coolHardLimitTemp:"40.0"},{ontology:"",season:"HEATING",occType:"OCCUPIED",defaultTargetTemp:"68.0",fanSetting:"AUTO_HI",warmLittleTemp:"2.0",warmLittleHowBad:"3.0",warmLotTemp:"5.0",warmLotHowBad:"8.0",warmHardLimitTemp:"90.0",coolLittleTemp:"2.0",coolLittleHowBad:"3.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"55.0"},{ontology:"",season:"HEATING",occType:"SEMI",defaultTargetTemp:"65.0",fanSetting:"AUTO_HI",warmLittleTemp:"5.0",warmLittleHowBad:"5.0",warmLotTemp:"8.0",warmLotHowBad:"8.0",warmHardLimitTemp:"90.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"50.0"},{ontology:"",season:"HEATING",occType:"SHUTDOWN",defaultTargetTemp:"50.0",fanSetting:"AUTO_HI",warmLittleTemp:"10.0",warmLittleHowBad:"5.0",warmLotTemp:"20.0",warmLotHowBad:"10.0",warmHardLimitTemp:"100.0",coolLittleTemp:"5.0",coolLittleHowBad:"5.0",coolLotTemp:"8.0",coolLotHowBad:"10.0",coolHardLimitTemp:"40.0"}]},788:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=[{key:"altitude_m",Label:"Altitude (meter)"},{key:"equiCO2_ppm",Label:"CO2 (ppm)"},{key:"gasResistance_kOhm",Label:"Gas Resistance (KOhm)"},{key:"illuminance_lux",Label:"Illuminance (lux)"},{key:"motion_sensed",Label:"Motion Sensed"},{key:"pressure_hPa",Label:"Pressure (hPa)"},{key:"relhumidity_pct",Label:"Humidity (%)"},{key:"temp_celsius",Label:"Temperature"},{key:"tvoc_ppm",Label:"TVOC (ppm)"},{key:"wifiTemp1_celsius",Label:"Wifi Temp 1"},{key:"wifiTemp2_celsius",Label:"Wifi Temp 2"},{key:"wifiTemp3_celsius",Label:"Wifi Temp 3"},{key:"censor_adrs",Label:"Censor Address"},{key:"fan",Label:"Fan"},{key:"fanstate",Label:"Fan State"},{key:"heattemp",Label:"Heat Temperature Setpoint"},{key:"cooltemp",Label:"Cool Temperature Setpoint"},{key:"setpoint",Label:"Setpoint"},{key:"roomtemp",Label:"Room Temperature"},{key:"i1relay_state",Label:"Relay State"},{key:"active_power_Watts",Label:"Active Power (Watts)"},{key:"current_Amperes",Label:"Current (Ampares)"},{key:"frequency_Hz",Label:"Frequency (Hz)"},{key:"import_active_energy_Wh",Label:"Active Energy (Wh)"},{key:"power_factor",Label:"Power Factor"},{key:"voltage_volts",Label:"Voltage (Volts)"},{key:"active_power_Watts_Ch1",Label:"Power Ch1 (Watts)"},{key:"active_power_Watts_Ch2",Label:"Power Ch2 (Watts)"},{key:"active_power_Watts_Ch3",Label:"Power Ch3 (Watts)"},{key:"active_power_Watts_Ch4",Label:"Power Ch4 (Watts)"},{key:"current_Amperes_Ch1",Label:"Current Ch1 (Amperes)"},{key:"current_Amperes_Ch2",Label:"Current Ch2 (Amperes)"},{key:"current_Amperes_Ch3",Label:"Current Ch3 (Amperes)"},{key:"current_Amperes_Ch4",Label:"Current Ch4 (Amperes)"},{key:"frequency_Hz_Ch1",Label:"Frequency Ch1 (Hz)"},{key:"frequency_Hz_Ch2",Label:"Frequency Ch2 (Hz)"},{key:"frequency_Hz_Ch3",Label:"Frequency Ch3 (Hz)"},{key:"frequency_Hz_Ch4",Label:"Frequency Ch4 (Hz)"},{key:"import_active_energy_Wh_Ch1",Label:"Active Energy Ch1 (Wh)"},{key:"import_active_energy_Wh_Ch2",Label:"Active Energy Ch2 (Wh)"},{key:"import_active_energy_Wh_Ch3",Label:"Active Energy Ch3 (Wh)"},{key:"import_active_energy_Wh_Ch4",Label:"Active Energy Ch4 (Wh)"},{key:"power_factor_Ch1",Label:"Power Factor Ch1"},{key:"power_factor_Ch2",Label:"Power Factor Ch2"},{key:"power_factor_Ch3",Label:"Power Factor Ch3"},{key:"power_factor_Ch4",Label:"Power Factor Ch4"},{key:"voltage_volts_Ch1",Label:"Voltage Ch1 (volts)"},{key:"voltage_volts_Ch2",Label:"Voltage Ch2 (volts)"},{key:"voltage_volts_Ch3",Label:"Voltage Ch3 (volts)"},{key:"voltage_volts_Ch4",Label:"Voltage Ch4 (volts)"},{key:"",Label:""},{key:"",Label:""},{key:"",Label:""},{key:"",Label:""}]},908:function(e,t,n){"use strict";t.b=function(e,t,n){return i(this,void 0,void 0,function(){var o=this;return s(this,function(c){switch(c.label){case 0:return[4,Object(r.f)({buildingName:e,model:t},r.a.ESOLUTION.SavePTACInfo,l.b.ESolution).then(function(e){return i(o,void 0,void 0,function(){return s(this,function(e){return n||Object(a.b)("Saved PTAC Info Successfully"),[2]})})}).catch(function(e){n||Object(a.a)("Error occured while Saving PTAC Info.")})];case 1:return[2,c.sent()]}})})},t.a=function(e,t,n,a){return i(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.e)({buildingName:e,ontology:t,solution:n,equipment:a},r.a.ESOLUTION.FetchPTACInfo,l.b.TEMPLATES,!0)];case 1:return[2,o.sent()]}})})},t.e=function(e){return i(this,void 0,void 0,function(){var t,n,a,l;return s(this,function(r){for(t=[],n=0;n<e.length;n++)a=e[n],l={isOptimizedActive:!(!a.isOptimizedActive||!Object(o.g)(a.isOptimizedActive)||"true"!=Object(o.g)(a.isOptimizedActive)),isShutdownActive:!(!a.isOptimizedActive||!Object(o.g)(a.isOptimizedActive)||"true"!=Object(o.g)(a.isOptimizedActive)),optimizeStatus:Object(o.g)(a.optimizeStatus),ontology:Object(o.g)(a.ontology),solutionOntology:Object(o.g)(a.solutionOntology),coolTemp:a.coolTemp&&Object(o.g)(a.coolTemp)?parseFloat(Object(o.g)(a.coolTemp)):0,heatTemp:a.heatTemp&&Object(o.g)(a.heatTemp)?parseFloat(Object(o.g)(a.heatTemp)):0,controlType:Object(o.g)(a.controlType),equipment:Object(o.g)(a.equipment),fanStatus:Object(o.g)(a.fanStatus),isRelayOn:!(!a.isRelayOn||!Object(o.g)(a.isRelayOn)||"true"!=Object(o.g)(a.isRelayOn)),isAutoOff:!(!a.isAutoOff||!Object(o.g)(a.isAutoOff)||"true"!=Object(o.g)(a.isAutoOff)),mode:Object(o.g)(a.mode),isRoomOccupied:a.isRoomOccupied&&Object(o.g)(a.isRoomOccupied)?Object(o.g)(a.isRoomOccupied):"UNOCCUPIED"},t.push(l);return[2,t]})})},t.g=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,Object(r.f)({model:e},r.a.ESOLUTION.SavePTACADP,l.b.ESolution).then(function(){Object(a.b)("PTAC ADP saved successfully.")}).catch(function(e){Object(a.a)("Error occured while saving PTAC ADP.")})];case 1:return[2,t.sent()]}})})},t.c=function(e,t,n,a){return i(this,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,Object(r.e)({buildingName:e,ontology:t,equipment:n,solution:a},r.a.ESOLUTION.GetPTACADPDetail,l.b.ESolution,!0)];case 1:return[2,o.sent()]}})})},t.h=function(e,t){return i(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,Object(r.f)({model:t,buildingName:e},r.a.ESOLUTION.SavePTACControllerSettings,l.b.ESolution).then(function(){Object(a.b)("PTAC Controller Settings saved successfully.")}).catch(function(e){Object(a.a)("Error occured while saving PTAC Controller Settings.")})];case 1:return[2,n.sent()]}})})},t.d=function(e,t,n){return i(this,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return[4,Object(r.e)({ontology:e,solutionOntology:t,equipment:n},r.a.ESOLUTION.FetchPTACControllerSettings,l.b.ESolution,!0)];case 1:return[2,a.sent()]}})})},t.f=function(e){return i(this,void 0,void 0,function(){var t,n,a,l;return s(this,function(r){for(t=[],n=0;n<e.length;n++)a=e[n],l={ontology:Object(o.g)(a.ontology),solutionOntology:Object(o.g)(a.solutionOntology),equipment:Object(o.g)(a.equipment),controlType:Object(o.g)(a.controlType),equipmentType:Object(o.g)(a.equipmentType),ptactType:Object(o.g)(a.ptactType),sensorDevice:Object(o.g)(a.sensorDevice)},t.push(l);return[2,t]})})};var a=n(31),l=n(20),o=n(10),r=n(12),i=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(l,o){function r(e){try{s(a.next(e))}catch(e){o(e)}}function i(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){e.done?l(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(r,i)}s((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,l,o,r={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(l=2&o[0]?a.return:o[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,o[1])).done)return l;switch(a=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(l=(l=r.trys).length>0&&l[l.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){r.label=o[1];break}if(6===o[0]&&r.label<l[1]){r.label=l[1],l=o;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(o);break}l[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],a=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}}});