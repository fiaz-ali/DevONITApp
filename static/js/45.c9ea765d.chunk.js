webpackJsonp([45],{2079:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=n(3),o=(n.n(s),n(49)),i=n(99),l=n(1070),c=n(2080),r=n(600),u=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),m=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function l(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,l)}c((a=a.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var n,a,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},h=function(e){function t(t){var n=e.call(this,t)||this;return n.pageLength=30,n.state={logFiles:[],logFiles_Select:[],logFileToDelete:"",isSelectLogs:!1,selectLogs:[],updateLogs:[],selectedContent:"",searchDate:"0",date:Object()},a=n,n.getLogFileList=n.getLogFileList.bind(n),n.getDBLogsData=n.getDBLogsData.bind(n),n.handleDateChange=n.handleDateChange.bind(n),n}return u(t,e),t.prototype.componentDidMount=function(){return m(this,void 0,void 0,function(){var e,t,n;return d(this,function(a){return e=this.state,t=e.searchDate,n=e.date,this.getDBLogsData(!1,t,n,!0),[2]})})},t.prototype.getLogFileList=function(){Object(i.a)(!0),(new o.b).GetFileList(o.a.TEMP_BACKUPS(),function(e,t){if(e)console.log("Get Object Error Returned",e),Object(i.a)(!1);else{var n=[],s=[];t.Contents.map(function(e){-1!=e.Key.indexOf("logs_")?n.push({fileName:e.Key,lastUpdatedOn:new Date(e.LastModified).ToEasternDateTime()}):-1!=e.Key.indexOf("logs-Select_")&&s.push({fileName:e.Key,lastUpdatedOn:new Date(e.LastModified).ToEasternDateTime()})}),a.setState({logFiles:n,logFiles_Select:s}),Object(i.a)(!1)}})},t.prototype.getDBLogsData=function(e,t,n,a){return m(this,void 0,void 0,function(){var s,o,l,r,u=this;return d(this,function(m){switch(m.label){case 0:return Object(i.a)(!0),s=this.props.instance,o=this.pageLength,l=a?0:e?this.state.selectLogs.length:this.state.updateLogs.length,r=e?"Query-Select":"Query-Update","0"!=t?[3,2]:[4,Object(c.a)(s,l,o,r).then(function(t){if(t){if(e)if(a)u.setState({selectLogs:t});else{var n=u.state.selectLogs;t.forEach(function(e){n.push(e)}),u.setState({selectLogs:n})}else if(a)u.setState({updateLogs:t});else{var s=u.state.updateLogs;t.forEach(function(e){s.push(e)}),u.setState({updateLogs:s})}Object(i.a)(!1)}})];case 1:return m.sent(),[3,4];case 2:return[4,Object(c.a)(s,l,o,r,n).then(function(t){if(t){if(e)if(a)u.setState({selectLogs:t});else{var n=u.state.selectLogs;t.forEach(function(e){n.push(e)}),u.setState({selectLogs:n})}else if(a)u.setState({updateLogs:t});else{var s=u.state.updateLogs;t.forEach(function(e){s.push(e)}),u.setState({updateLogs:s})}Object(i.a)(!1)}})];case 3:m.sent(),m.label=4;case 4:return[2]}})})},t.prototype.onDeleteFile=function(e){return m(this,void 0,void 0,function(){return d(this,function(t){return this.setState({logFileToDelete:e},function(){document.getElementById("btnConfirm").click()}),[2]})})},t.prototype.deleteFile=function(){return m(this,void 0,void 0,function(){var e;return d(this,function(t){return Object(i.a)(!0),(e=this.state.logFileToDelete)&&((new o.b).DeleteFile(o.a.TEMP_BACKUPS(),e),setTimeout(function(){a.getLogFileList()},1500)),[2]})})},t.prototype.handleDateChange=function(e){var t;if("0"==e)t=null,this.setState({date:null,searchDate:e}),this.getDBLogsData(this.state.isSelectLogs,e,null,!0);else if("7"==e){var n=(t=new Date).getDate()+1;t.setDate(n),this.setState({date:t.ToEasternDateTime(),searchDate:e}),this.getDBLogsData(this.state.isSelectLogs,e,t.ToEasternDateTime(),!0)}else{n=(t=new Date).getDate()-parseInt(e)+1;t.setDate(n),this.setState({date:t.ToEasternDateTime(),searchDate:e}),this.getDBLogsData(this.state.isSelectLogs,e,t.ToEasternDateTime(),!0)}},t.prototype.render=function(){var e=this,t=this.state,n=t.isSelectLogs,a=t.updateLogs,o=t.selectLogs,i=t.selectedContent,c=t.searchDate,u=t.date;return s.createElement("div",{className:"content"},s.createElement(l.a,null),s.createElement("div",{className:"container-fluid"},s.createElement("div",{className:"col-md-12"},s.createElement("h3",null,"DB Logs")),s.createElement("div",{className:"col-md-12 padding-10"},s.createElement("div",{className:"col-md-6"},s.createElement("div",{className:"btn-group"},s.createElement("a",{className:"btn "+(n?"":"btn-fill")+" btn-secondary btn-secondary-dark",onClick:function(){e.setState({isSelectLogs:!1}),e.getDBLogsData(!1,c,u,!0)}},"Update Logs"),s.createElement("a",{className:"btn "+(n?"btn-fill":"")+" btn-secondary btn-secondary-dark",onClick:function(){e.setState({isSelectLogs:!0}),e.getDBLogsData(!0,c,u,!0)}},"Select Logs"))),s.createElement("div",{className:"col-md-4"}),s.createElement("div",{className:"col-md-2"},s.createElement("select",{id:"selectDate",className:"form-control",value:c,onChange:function(t){return e.handleDateChange(t.target.value)}},s.createElement("option",{value:"0"},"All"),s.createElement("option",{value:"7"},"Today"),s.createElement("option",{value:"1"},"1 Day Ago"),s.createElement("option",{value:"2"},"2 Day Ago"),s.createElement("option",{value:"3"},"3 Day Ago"),s.createElement("option",{value:"4"},"4 Day Ago"),s.createElement("option",{value:"5"},"5 Day Ago"),s.createElement("option",{value:"6"},"6 Day Ago")))),s.createElement("div",{className:"col-md-12"},s.createElement("div",{className:"card"},s.createElement("div",{className:"content"},s.createElement("div",{className:"dataCard"},s.createElement("div",{className:"row hidden-xs"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"col-sm-6 headingText"},"Timestamp"),s.createElement("div",{className:"col-sm-4 headingText"},"Details"))),!n&&a&&a.map(function(t,n){return s.createElement("div",{key:n,className:"row clickable"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"col-sm-6 trim-data",title:t.timestamp},s.createElement("span",{className:"hidden visible-xs-inline headingText"},t.timestamp.ToEasternDateTime()),t.timestamp.ToEasternDateTime()),s.createElement("div",{className:"col-sm-4"},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Details"),s.createElement("a",{onClick:function(){e.setState({selectedContent:t.content}),document.getElementById("btnDisplayContent").click()}},"Details"))))}),n&&o&&o.map(function(t,n){return s.createElement("div",{key:n,className:"row clickable"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"col-sm-6 trim-data",title:t.timestamp},s.createElement("span",{className:"hidden visible-xs-inline headingText"},t.timestamp.ToEasternDateTime()),t.timestamp.ToEasternDateTime()),s.createElement("div",{className:"col-sm-4"},s.createElement("span",{className:"hidden visible-xs-inline headingText"},"Details"),s.createElement("a",{onClick:function(){e.setState({selectedContent:t.content}),document.getElementById("btnDisplayContent").click()}},"Details"))))}),n&&o.length>=this.pageLength&&o.length%this.pageLength==0&&s.createElement("div",{className:"row center"},s.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e.getDBLogsData(!0,c,u,!1)}}," ",s.createElement("span",null,"Load More..."))),!n&&a.length>=this.pageLength&&a.length%this.pageLength==0&&s.createElement("div",{className:"row center"},s.createElement("button",{type:"button",className:"margin-5 btn btn-secondary",onClick:function(){e.getDBLogsData(!1,c,u,!1)}}," ",s.createElement("span",null,"Load More..."))),s.createElement("button",{id:"btnDisplayContent",style:{display:"none"},"data-toggle":"modal","data-target":"#ContentDialog"},"."),s.createElement(r.a,{id:"ContentDialog",heading:"Log Content",showCancelButton:!0,cancelButtonText:"Cancel",showSaveButton:!1,isEditForm:!1},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-md-12"},s.createElement("textarea",{id:"content",className:"form-control",value:i,style:{height:"300px"}}))))))))))},t}(s.Component);t.default=h},2080:function(e,t,n){"use strict";t.a=function(e,t,n,l,c){return o(this,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,Object(a.e)({instance:e,skip:t,limit:n,type:l,date:c},a.a.DBLOGS.GETDBLOGS,s.b.DBLogs,!0)];case 1:return[2,o.sent()]}})})};var a=n(20),s=n(19),o=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function l(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?s(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(i,l)}c((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(s=2&o[0]?a.return:o[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,o[1])).done)return s;switch(a=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}}});