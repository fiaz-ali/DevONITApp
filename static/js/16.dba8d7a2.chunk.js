webpackJsonp([16],{1244:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i});var n=[{roleID:"1",value:"1-Super User"},{roleID:"2",value:"2-Operating Officer / Manager"},{roleID:"3",value:"3-Staff / Contractors"},{roleID:"4",value:"4-Customer"},{roleID:"5",value:"5-Service Manager"},{roleID:"6",value:"6-Service Worker"}],i=[{roleID:"3",value:"3-Staff / Contractors"},{roleID:"4",value:"4-Customer"},{roleID:"5",value:"5-Service Manager"},{roleID:"6",value:"6-Service Worker"}]},1245:function(e,t,a){"use strict";var n=a(2),i=a.n(n),o=a(897),l=a(1063),r=(a.n(l),a(683)),s=a(54),c=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),m=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(i,o){function l(e){try{s(n.next(e))}catch(e){o(e)}}function r(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(l,r)}s((n=n.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){var a,n,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,n=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(i=(i=l.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1],i=o;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(o);break}i[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],n=0}finally{a=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},u=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isOpen:!1,photoIndex:0,filesName:a.props.filesName},a}return c(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.setState({filesName:e.filesName})},t.prototype.deleteFile=function(e){return m(this,void 0,void 0,function(){var t,a,n,i,o=this;return d(this,function(l){switch(l.label){case 0:return t=this.props.filesName,a=this.props.buildingName,n=this.props.equipment,i=t&&t[e],t.splice(e,1),(new s.b).DeleteFile(s.a.DOCUMENT(),i),this.props.isFromEquipment?[4,Object(r.z)(a,n,!0,!0).then(function(){o.props.onChangeFiles(t)})]:[3,2];case 1:return l.sent(),[3,3];case 2:this.props.isFromComponent?this.props.saveComponent():this.props.onChangeFiles(t),l.label=3;case 3:return[2]}})})},t.prototype.render=function(){var e=this,t=this.props,a=t.filesName,n=t.showDownloadLink,l=t.showRemoveButton,r=t.showImageViewer,c=this.state,m=c.isOpen,d=c.photoIndex,u=new s.b,h=a&&a[d],p=u.GetSignedURL(s.a.DOCUMENT(),a&&a[d]),f="";return h?(h.toLowerCase().indexOf(".mp4")>0&&(f="assets/img/video-file-icon.png"),h.toLowerCase().indexOf(".pdf")>0&&(f="assets/img/pdf-file-icon.png"),!(h.toLowerCase().indexOf(".pdf")>0||h.toLowerCase().indexOf(".mp4")>0||h.toLowerCase().indexOf(".png")>0||h.toLowerCase().indexOf(".jpeg")>0||h.toLowerCase().indexOf(".jpg")>0)&&(f=p)):f=p,i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-md-12 no-padding",style:{display:"grid"}},a&&a.length>0&&a.map(function(t,a){var o=u.GetSignedURL(s.a.DOCUMENT(),t);if(t)return i.a.createElement("div",{key:"image",className:"col-md-3 mb-2",style:{paddingRight:"0px",lineHeight:"3"}},i.a.createElement("div",null,l&&i.a.createElement("div",{className:"discobtn headingText files-delete-cross pull-right",title:"Delete",onClick:function(){e.deleteFile(a)}},i.a.createElement("i",{className:"fa fa-close"})),i.a.createElement("div",{className:"row"},i.a.createElement("div",{onClick:function(){e.setState({isOpen:!0,photoIndex:a})},style:{cursor:"pointer",marginLeft:"10px"}},t.toLowerCase().indexOf(".mp4")>0&&i.a.createElement("img",{className:"img-thumbnail",style:{width:"200px",height:"200px"},src:"assets/img/video-file-icon.png"}),t.toLowerCase().indexOf(".pdf")>0&&i.a.createElement("img",{className:"img-thumbnail",style:{width:"200px",height:"200px"},src:"assets/img/pdf-file-icon.png"}),!(t.toLowerCase().indexOf(".pdf")>0||t.toLowerCase().indexOf(".mp4")>0||t.toLowerCase().indexOf(".png")>0||t.toLowerCase().indexOf(".jpeg")>0||t.toLowerCase().indexOf(".jpg")>0)&&i.a.createElement("img",{className:"img-thumbnail",style:{width:"200px",height:"200px"},src:"assets/img/office-file-icon.png"}),(t.toLowerCase().indexOf(".jpg")>0||t.toLowerCase().indexOf(".jpeg")>0||t.toLowerCase().indexOf(".png")>0)&&i.a.createElement("img",{className:"img-thumbnail",style:{width:"200px",height:"200px"},src:o})),n&&i.a.createElement("div",{className:" discobtn trim-data center"},i.a.createElement("a",{className:"downloadImageBtn discobtn trim-data",href:o},!r&&i.a.createElement("span",null," Download File "))))))})),m&&a&&i.a.createElement("div",null,i.a.createElement(o.a,{mainSrc:f||p,nextSrc:f||p,prevSrc:f||p,onCloseRequest:function(){e.setState({isOpen:!1,photoIndex:0})},onMovePrevRequest:function(){return e.setState({photoIndex:(d+a.length-1)%a.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(d+1)%a.length})}})))},t}(i.a.Component);t.a=u},2762:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n,i=a(2),o=(a.n(i),a(122)),l=a(1244),r=a(119),s=a(13),c=a(118),m=a(12),d=a(680),u=a(690),h=a(682),p=a(691),f=a(21),v=a(20),g=a(125),y=a(1127),b=a(686),E=a.n(b),S=a(8),w=a(2763),N=a.n(w),x=a(677),C=a(716),T=a(54),_=a(1245),D=a(817),O=a(802),F=a(130),M=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),I=this&&this.__assign||function(){return(I=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var i in t=arguments[a])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},k=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(i,o){function l(e){try{s(n.next(e))}catch(e){o(e)}}function r(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){e.done?i(e.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(e.value).then(l,r)}s((n=n.apply(e,t||[])).next())})},A=this&&this.__generator||function(e,t){var a,n,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,n=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(i=(i=l.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){l=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){l.label=o[1];break}if(6===o[0]&&l.label<i[1]){l.label=i[1],i=o;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(o);break}i[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],n=0}finally{a=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}},H=new Date,L=new Date;n=n;var P=function(t){function a(e){var a=t.call(this,e)||this;return a.imageCan=new Image,a.sigPad={SignatureCanvas:N.a},a.clear=function(){a.sigPad.clear()},a.fromDataURL=function(e,t){a.sigPad.fromDataURL(e,t)()},a.state={Contact:Object(),_Groups:[],toggleForm:!1,_Qualifications:[],groupsDropDownList:[],departmentsGroupsDropDownList:[],buildingsDropDownList:[],smsStartTime:"",smsEndTime:"",newDepartAndGroupName:"",fileTitle:"",files:[],recentSelectedFiles:[],showhideImageUploader:!1,lotoQualifications:[],verifyUser:!1,UtilityTypeList:[],selectedUtility:[]},n=a,a.handleContactForm=a.handleContactForm.bind(a),a.saveContact=a.saveContact.bind(a),a._fetchContactGroupList=a._fetchContactGroupList.bind(a),a._fetchQualificationsList=a._fetchQualificationsList.bind(a),a._fetchBuildingsList=a._fetchBuildingsList.bind(a),a.handleQualification=a.handleQualification.bind(a),a._fetchContact=a._fetchContact.bind(a),a.handleMultiGroupChange=a.handleMultiGroupChange.bind(a),a.handleMultiFacilityChange=a.handleMultiFacilityChange.bind(a),a.handleAllowAutoSMS=a.handleAllowAutoSMS.bind(a),a.handleSMSSchedule=a.handleSMSSchedule.bind(a),a.setSmsSchedule=a.setSmsSchedule.bind(a),a.handleDepartmentsAndGroupsChange=a.handleDepartmentsAndGroupsChange.bind(a),a.addNewDepartmentGroup=a.addNewDepartmentGroup.bind(a),a._fetchDepartmentOrGroup=a._fetchDepartmentOrGroup.bind(a),a.handleTitleChange=a.handleTitleChange.bind(a),a.onFileChange=a.onFileChange.bind(a),a.saveImage=a.saveImage.bind(a),a.handlefileAttached=a.handlefileAttached.bind(a),a.blocksms=a.blocksms.bind(a),a.handleShiftStartTime=a.handleShiftStartTime.bind(a),a.handleShitEndTime=a.handleShitEndTime.bind(a),a.handleUtilityChange=a.handleUtilityChange.bind(a),a}return M(a,t),a.prototype.componentDidMount=function(){return k(this,void 0,void 0,function(){var e,t,a,n;return A(this,function(i){switch(i.label){case 0:return e=this.state.Contact,this.props.buildingName?[4,this._fetchContactGroupList()]:[3,8];case 1:return i.sent(),[4,this._fetchQualificationsList()];case 2:return i.sent(),[4,this._fetchBuildingsList()];case 3:return i.sent(),[4,this._fetchDepartmentOrGroup()];case 4:return i.sent(),[4,this._fetchDropDowns()];case 5:return i.sent(),this.setSmsSchedule(),(t=this.props.contactName)&&t.length>0?(Object(c.a)(!0),[4,this._fetchContact()]):[3,7];case 6:return i.sent(),Object(c.a)(!1),[3,8];case 7:e.role="1",this.setState({Contact:e}),i.label=8;case 8:return this.props.isNewCustomer&&(e.role="4",(a=[]).push("Customer"),e.qualifications=a,(n=[]).push({value:this.props.buildingName,label:Object(v.x)(this.props.buildingName)}),e.facilityAssignedTo=n,this.setState({Contact:e})),[2]}})})},a.prototype._fetchContact=function(e){return k(this,void 0,void 0,function(){var t=this;return A(this,function(a){switch(a.label){case 0:return Object(c.a)(!0),this.props.buildingName?[4,Object(r.y)("",[e?this.state.Contact.contact:this.props.contactName],!0).then(function(e){var a=t.state,n=a.buildingsDropDownList,i=a.departmentsGroupsDropDownList,o=a.UtilityTypeList,l=e[0],r=t.state.Contact,s=t.state.selectedUtility;r.contact=Object(m.g)(l.contact),r.name=Object(m.g)(l.name),r.mobile=Object(m.g)(l.phone),r.email=Object(m.g)(l.email),r.role=Object(m.g)(l.role),r.company=Object(m.g)(l.company),r.shiftEndTime=Object(m.g)(l.shiftEndTime),r.shiftStartTime=Object(m.g)(l.shiftStartTime),r.hoursToBeExtended=l.hoursToBeExtended&&Object(m.g)(l.hoursToBeExtended)?parseFloat(Object(m.g)(l.hoursToBeExtended)):void 0,r.expandedIndefinitely=!(!l.expandedIndefinitely||"true"!=Object(m.g)(l.expandedIndefinitely)),r.streetAddress=Object(m.g)(l.street),r.city=Object(m.g)(l.city),r.state=Object(m.g)(l.state),r.zipcode=Object(m.g)(l.zipcode),r.hourlyRate=Object(m.g)(l.hourlyRate)?parseFloat(Object(m.g)(l.hourlyRate)):0,r.facility=Object(m.g)(l.assignedTo),r.profileImage=Object(m.g)(l.profileImage);var c=""!=Object(m.g)(l.assignedTo)?l.assignedTo.value.indexOf(",")>0?l.assignedTo.value.split(","):[l.assignedTo.value]:[];c.forEach(function(e){-1==n.findIndex(function(t){return t.value==e})&&c.splice(c.findIndex(function(t){return t==e}),1)}),r.facilityAssignedTo=l.assignedTo&&c.map(function(e,t){return{label:Object(v.x)(e),value:e}});var d=""!=Object(m.g)(l.departmentsAndGroups)?l.departmentsAndGroups.value.indexOf(",")>0?l.departmentsAndGroups.value.split(","):[l.departmentsAndGroups.value]:[];if(d.forEach(function(e){-1==i.findIndex(function(t){return t.value==e})&&i.splice(d.findIndex(function(t){return t==e}),1)}),r.departmentsAndGroups=l.departmentsAndGroups&&d.map(function(e,t){return{label:Object(v.x)(e),value:e}}),""!=Object(m.g)(l.utility)){var u=Object(m.g)(l.utility).split(",");if(u&&u.length>0){for(var h=[],p=function(e){var t=o.find(function(t){return t.value==u[e]});h.push(t)},f=0;f<u.length;f++)p(f);r.utility=h,r.utilityOntologies=Object(m.g)(l.utility),s=h}}r.group=Object(m.g)(l.group);var g=l.group.value.indexOf(",")>0?l.group.value.split(","):[l.group.value];r.groups=l.group&&g.map(function(e,t){return{label:e.replace(new RegExp("Tenant","g"),"Customer"),value:e}}),r.notes=Object(m.g)(l.notes);var y=Object(m.g)(l.qualifications);if(r.qualifications=y.length>0?y.split(","):[],r.allowAutoSMS="true"==Object(m.g)(l.allowAutoSMS),r.smsSchedule=Object(m.g)(l.smsSchedule),""!=r.smsSchedule){var b=r.smsSchedule.split("-");(H=new Date).setHours(parseInt(b[0])),H.setMinutes(0),(L=new Date).setHours(parseInt(b[1])),L.setMinutes(0)}r.signatureDataURL=Object(m.g)(l.signatureDataURL),t.setState({Contact:r,smsStartTime:H.toString(),smsEndTime:L.toString(),selectedUtility:s})}).catch(function(e){return e})]:[2];case 1:return a.sent(),Object(c.a)(!1),[2]}})})},a.prototype._fetchContactGroupList=function(){return k(this,void 0,void 0,function(){var e=this;return A(this,function(t){switch(t.label){case 0:return[4,Object(r.t)().then(function(t){var a=t&&t.map(function(e){return{value:e.value,label:e.value.replace(new RegExp("Tenant","g"),"Customer")}});e.setState({groupsDropDownList:a})})];case 1:return t.sent(),[2]}})})},a.prototype._fetchBuildingsList=function(){return k(this,void 0,void 0,function(){var e=this;return A(this,function(t){switch(t.label){case 0:return[4,Object(p.d)().then(function(t){if(t){var a=JSON.parse(S.a.getItem("user"));if("1"==a.role){var n=t&&t.map(function(e){return{value:Object(m.g)(e.building),label:Object(m.g)(e.rdfsLabel)}});e.setState({buildingsDropDownList:n})}else if(a.facility&&""!=a.facility){n=t.filter(function(e){return 1==a.facility.includes(Object(m.g)(e.building))}).map(function(e){return{value:Object(m.g)(e.building),label:Object(m.g)(e.rdfsLabel)}});e.setState({buildingsDropDownList:n})}}})];case 1:return t.sent(),[2]}})})},a.prototype._fetchQualificationsList=function(){return k(this,void 0,void 0,function(){var e=this;return A(this,function(t){switch(t.label){case 0:return[4,Object(r.z)().then(function(t){e.setState({_Qualifications:t})})];case 1:return t.sent(),[2]}})})},a.prototype.handleContactForm=function(e){var t=this.state.Contact,a=e.target.name,n=e.target.value;a&&a.length>0&&"contact"==a&&(n=n.replace(new RegExp(" ","g"),"")),a&&a.length>0&&"notes"==a&&(n=Object(v.J)(n,!0)),"radio"==e.target.type?t[""+a]=e.target.checked:t[""+a]=n,this.setState({Contact:t})},a.prototype.blocksms=function(e){var t=this.state.Contact;t.allowAutoSMS=e,this.setState({Contact:t})},a.prototype.handleAllowAutoSMS=function(e){var t=this.state.Contact;t.allowAutoSMS=e,this.setState({Contact:t})},a.prototype.handleMultiGroupChange=function(e){var t=this.state.Contact;t.groups=e,this.setState({Contact:t})},a.prototype.handleMultiFacilityChange=function(e){var t=this.state.Contact;t.facilityAssignedTo=e,this.setState({Contact:t})},a.prototype.handleDepartmentsAndGroupsChange=function(e){var t=this.state.Contact;t.departmentsAndGroups=e,this.setState({Contact:t})},a.prototype.handleUtilityChange=function(e){var t=this.state.selectedUtility;t=e,this.setState({selectedUtility:t})},a.prototype.handleQualification=function(e,t){var a=this.state.Contact,n=this.state.lotoQualifications,i=a.qualifications?a.qualifications:[];if(1==t)i.push(e);else{var o=i.indexOf(e);o>-1&&i.splice(o,1)}a.qualifications=i,"utility_company"==e.toLocaleLowerCase().trim()&&t&&document.getElementById("btnutilityQualificationSelect").click(),this.setState({Contact:a,lotoQualifications:n})},a.prototype.saveContact=function(e,t){return k(this,void 0,void 0,function(){var a,n,i,o,l,s,m,d,u,h;return A(this,function(p){switch(p.label){case 0:return(a=t._socket).emit("update shift timing",this.state.Contact.contact,this.state.Contact.shiftEndTime),a.emit("update startShift timing",this.state.Contact.contact,this.state.Contact.shiftStartTime),n=this.state.Contact,i=this.props,o=i.isEdit,l=i.instance,n.groups=[{label:"Admin",value:"Admin"}],s=n.groups.map(function(e){return e.value}),[4,Object(v.H)(Object(v.M)(n.contact),s)];case 1:return m=p.sent(),n.password===n.confirmPassword?[3,2]:(Object(f.a)("Passwords don't match."),[3,8]);case 2:return""==n.mobile||n.mobile.length>15?(Object(f.a)("Enter Correct Mobile Format"),[3,8]):[3,3];case 3:return m&&!o?[3,7]:n?(Object(c.a)(!0),[4,JSON.parse(S.a.getItem("user"))]):[3,6];case 4:return(d=p.sent()).qualifications=n.qualifications,d.utility=n.utility,d.utilityOntologies=n.utility&&n.utility.length>0?n.utility.map(function(e){return e.value}).join(","):"",n.dutyTimeInMilliSec=new Date(n.shiftEndTime).getTime()-new Date(n.shiftStartTime).getTime(),d.dutyTimeInMilliSec=n.dutyTimeInMilliSec,console.log(new Date(n.shiftEndTime).toTimeString().split(":")),S.a.setItem("user",JSON.stringify(d)),[4,Object(r.m)(this.props.buildingName,n,this.props.isEdit)];case 5:p.sent(),Object(F.c)(),Object(c.a)(!1),u=new g.a,h="",h=o?n.name+", your ONIT profile has been added or updated. Your User Name:"+n.contact+". To Unsubscribe to these messages, visit "+window.location.origin+"/#"+l+"/UnsubscribeSMSAlerts/FullScreen or contact your supervisor.":"Thank you for joining the ONIT Network! Your number has been associated with username: "+n.contact+". To Unsubscribe to these messages, visit "+window.location.origin+"/#"+l+"/UnsubscribeSMSAlerts/FullScreen or contact your supervisor.",u.SendSMS(n.mobile,h,l,function(e){}),e&&1==e||document.getElementById("btnbackPeopleList")&&document.getElementById("btnbackPeopleList").click(),p.label=6;case 6:return[3,8];case 7:alert("user already exists, please change user name"),p.label=8;case 8:return[2]}})})},a.prototype.hasQualification=function(e){var t=this.state.Contact.qualifications;return!!(e&&t&&t.length>0)&&!!t.find(function(t){return t==e})},a.prototype.handleShitEndTime=function(e){var t=this,a=this.state.Contact;if(a.shiftStartTime){if(e){var n=new Date(new Date(new Date(new Date(Date.now()).setHours(e.getHours())).setMinutes(e.getMinutes())).setSeconds(0)).toString(),i=60*new Date(n).getHours()+new Date(n).getMinutes(),o=60*new Date(a.shiftStartTime.toString()).getHours()+new Date(a.shiftStartTime.toString()).getMinutes();a.shiftEndTime=i>o?n:new Date(a.shiftStartTime.toString()).addMinutes(1).toString()}else a.shiftEndTime=void 0;this.setState({Contact:a},function(){a.hoursToBeExtended&&t.setHoursVal()})}else alert("Select start time first.")},a.prototype.handleShiftStartTime=function(e){var t=this,a=this.state.Contact;if(e){var n=new Date(new Date(new Date(new Date(Date.now()).setHours(e.getHours())).setMinutes(e.getMinutes())).setSeconds(0)).toString();a.shiftStartTime=n}else a.shiftStartTime=void 0;this.setState({Contact:a},function(){t.handleShitEndTime(e),a.hoursToBeExtended&&t.setHoursVal()})},a.prototype.handleHoursToBeExtended=function(e){var t,a=this;""==e.target.value?((t=this.state.Contact).hoursToBeExtended=e.target.value,this.setState({Contact:t},function(){a.setHoursVal()})):/^\d{1,9}$/.test(e.currentTarget.value)&&((t=this.state.Contact).hoursToBeExtended=e.target.value.replace(".",""),this.setState({Contact:t},function(){a.setHoursVal()}))},a.prototype.expandedIndefinitelyChange=function(e){var t=this.state.Contact;t.expandedIndefinitely=e.target.checked,this.setState({Contact:t})},a.prototype.setHoursVal=function(){var e=this.state.Contact,t=e.hoursToBeExtended;t<0?e.hoursToBeExtended=0:0==new Date(e.shiftEndTime).getMinutes()?t<=24-(new Date(e.shiftEndTime).getHours()-new Date(e.shiftStartTime).getHours())?e.hoursToBeExtended=t:(e.hoursToBeExtended=24-(new Date(e.shiftEndTime).getHours()-new Date(e.shiftStartTime).getHours()),alert("You are exceeding from time limit")):t<24-(new Date(e.shiftEndTime).getHours()-new Date(e.shiftStartTime).getHours())?e.hoursToBeExtended=t:(e.hoursToBeExtended=24-(new Date(e.shiftEndTime).getHours()-new Date(e.shiftStartTime).getHours())-1,alert("You are exceeding from time limit")),this.setState({Contact:e})},a.prototype.handleSMSSchedule=function(e,t){var a=this;if(t)if("From"==e){H=t;var n=t.toString();this.setState({smsStartTime:n},function(){a.setSmsSchedule()})}else{L=t;n=t.toString();this.setState({smsEndTime:n},function(){a.setSmsSchedule()})}},a.prototype.saveSignature=function(){var t=this.state.Contact;t=t;var a={trimmedDataURL:this.sigPad.getTrimmedCanvas().toDataURL("image/png")};t.signatureDataURL=a.trimmedDataURL;var n=new e(a.trimmedDataURL.replace(/^data:image\/\w+;base64,/,""),"base64");n=n,this.setState({Contact:t})},a.prototype.setSmsSchedule=function(){var e=this.state,t=e.smsEndTime,a=e.smsStartTime,n=e.Contact;if(""!=t&&""!=a){var i=new Date(t).getHours(),o=new Date(a).getHours();n.smsSchedule=o+"-"+i,this.setState({Contact:n})}},a.prototype.addNewDepartmentGroup=function(){return k(this,void 0,void 0,function(){var e,t,a,n=this;return A(this,function(i){switch(i.label){case 0:return e=this.state.newDepartAndGroupName,t=this.state.Contact,a=e.replace(new RegExp(" ","g"),""),[4,Object(r.a)(this.props.buildingName,a).then(function(){t.departmentsAndGroups||(t.departmentsAndGroups=[]),t.departmentsAndGroups&&t.departmentsAndGroups.push(I({value:a,label:a})),n.setState({Contact:t,newDepartAndGroupName:""},function(){return k(n,void 0,void 0,function(){return A(this,function(e){switch(e.label){case 0:return[4,this._fetchDepartmentOrGroup()];case 1:return e.sent(),[2]}})})})})];case 1:return i.sent(),[2]}})})},a.prototype._fetchDepartmentOrGroup=function(){return k(this,void 0,void 0,function(){var e,t=this;return A(this,function(a){switch(a.label){case 0:return e=[],[4,Object(r.h)().then(function(a){if(a&&a.length>0)for(var n=0;n<a.length;n++){var i={value:a[n],label:a[n]};e&&e.push(I({},i))}t.setState({departmentsGroupsDropDownList:e})}).catch(function(e){return e})];case 1:return a.sent(),[2]}})})},a.prototype.onFileChange=function(e){return k(this,void 0,void 0,function(){var t,a=this;return A(this,function(n){return t=this.state.Contact,e&&e.length>0?t.profileImage=e[0]:t.profileImage="",this.setState({Contact:t},function(){a.props.isEdit&&a.saveContact(!0)}),[2]})})},a.prototype.handlefileAttached=function(e){var t=this;if(e.length>0){var a=this.state,n=a.files,i=a.Contact,o=a.recentSelectedFiles,l=a.fileTitle;i.profileImage||(i.profileImage=""),n||(n=[]),o||(o=[]);for(var r=0;r<e.length;r++){var c=e[r].name.split(".").pop(),m=(new Date).YYMMDDHHMMSS2()+"-"+l+"."+c.toLowerCase();o.push(m)}Object(s.g)(e),this.setState({files:e,recentSelectedFiles:o,Contact:i},function(){return k(t,void 0,void 0,function(){return A(this,function(e){return[2]})})})}},a.prototype.handleTitleChange=function(e){this.setState({fileTitle:e.replace(new RegExp(" ","g"),"")},function(){document.getElementById("fileTitle").style.boxShadow=e?"0px 0px 15px gainsboro":"0px 0px 15px red"})},a.prototype.saveImage=function(){return k(this,void 0,void 0,function(){var e,t,a,n,i;return A(this,function(o){switch(o.label){case 0:if(e=this.state.recentSelectedFiles,t=new T.b,!(a=Object(s.d)())||!a.length)return[3,4];n=0,o.label=1;case 1:return n<a.length?(i=a[n],[4,t.UploadFile(T.a.DOCUMENT(),e[n],i)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return this.setState({fileTitle:"",files:[],showhideImageUploader:!1},function(){}),[2]}})})},a.prototype._fetchDropDowns=function(){return k(this,void 0,void 0,function(){var e,t,a,n,i;return A(this,function(o){switch(o.label){case 0:return e=this.state.UtilityTypeList,[4,Object(O.c)(["Utility"])];case 1:if((t=o.sent())&&t.length>0&&(e=[],(a=t.filter(function(e){return"Utility"==Object(m.g)(e.type)}))&&a.length>0))for(n=0;n<a.length;n++)i=a[n],e.push({label:Object(m.g)(i.name),value:Object(m.g)(i.ontology)});return this.setState({UtilityTypeList:e}),[2]}})})},a.prototype.render=function(){var e=this,t=this.props,a=t.isView,n=t.isEdit,r=t.instance,s=t.buildingName,c=t.isNewCustomer,m=this.state,p=m.Contact,f=m._Qualifications,g=m.buildingsDropDownList,b=m.smsEndTime,w=m.smsStartTime,T=m.departmentsGroupsDropDownList,O=m.newDepartAndGroupName,F=m.fileTitle,M=m.showhideImageUploader,I=m.files,P=m.recentSelectedFiles,U=m.verifyUser,j=m.UtilityTypeList,B=m.selectedUtility,R=p.contact&&p.role&&p.qualifications&&p.qualifications.length>0&&p.facilityAssignedTo&&p.name&&p.mobile&&p.email&&p.facilityAssignedTo.length>0&&!0,G=JSON.parse(S.a.getItem("user")),W=Object(u.b)(G,"people","write");if(document.getElementById("warningText")&&(document.getElementById("warningText").style.display="none"),U)return i.createElement(D.a,{onConfirmation:function(t){t?e.setState({verifyUser:!1},function(){e.saveContact(!1,e.context)}):e.setState({verifyUser:!1})}});var z=new Date(new Date(new Date(new Date(Date.now()).setMinutes(0)).setHours(0)).setSeconds(0)),q=p.shiftStartTime&&p.shiftStartTime.toString().length>10?new Date(p.shiftStartTime):z,Q=p.shiftEndTime&&p.shiftEndTime.toString().length>10?new Date(p.shiftEndTime):z;return i.createElement(o.a.Consumer,null,function(t){return i.createElement("div",{className:"content"},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"card"},i.createElement("div",{className:"container-fluid padding-10"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"name"},"Name"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",disabled:a,id:"name",name:"name",className:(p.name?"":"addFieldValidate")+" form-control",value:p.name,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"mobile"},"Mobile #"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"number",disabled:a,id:"mobile",name:"mobile",required:!0,className:(p.mobile?"":"addFieldValidate")+" form-control",value:p.mobile,onChange:function(t){return e.handleContactForm(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-4"},i.createElement("label",{htmlFor:"allowAutoSMS"},"Allow Automated Messaging:")),i.createElement("div",{className:"col-md-2 col-sm-12 col-xs-12",style:{borderRadius:"5px",marginBottom:"0px",paddingTop:"8px",scrollPaddingBottom:"8px"}},i.createElement("div",{className:"card col-md-12 p-1",style:{marginBottom:"0px"}},i.createElement("div",{className:"col-md-6"},i.createElement("input",{type:"radio",id:"allowAutoSMSYes",disabled:a,name:"allowAutoSMSYes",checked:p.allowAutoSMS,onChange:function(t){t.target.checked||e.handleContactForm(t),t.target.checked&&document.getElementById("btnConfirmAllow").click()}}),i.createElement("label",{htmlFor:"allowAutoSMSYes"},"\xa0Yes")),i.createElement("div",{className:"col-md-6"},i.createElement("input",{type:"radio",id:"allowAutoSMSNo",disabled:a,name:"allowAutoSMSNo",onChange:function(t){e.blocksms(!1)},checked:!p.allowAutoSMS}),i.createElement("label",{htmlFor:"allowAutoSMSNo"},"\xa0No")))),p.allowAutoSMS&&i.createElement(i.Fragment,null,i.createElement("div",{className:"col-md-3 col-xs-12"},i.createElement("div",{className:"col-md-5 col-xs-12 p-0"},i.createElement("label",null,"SMS Text Schedule From")),i.createElement("div",{className:"col-md-7 col-xs-12 p-0"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"col-md-3 col-xs-12"},i.createElement("div",{className:"col-md-5 col-xs-12 p-0"},i.createElement("label",null,"SMS Text Schedule To")),i.createElement("div",{className:"col-md-7 col-xs-12 p-0"},i.createElement(E.a,{className:"form-control",selected:b?L:null,onChange:function(t){e.handleSMSSchedule("To",t)},showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsEndTime})})))))),i.createElement("button",{id:"btnConfirmAllow",style:{display:"none"},"data-toggle":"modal","data-target":"#ConfirmAllowDialog"},"."),i.createElement(h.a,{instance:r,id:"ConfirmAllowDialog",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",confirmationText:"Are you sure the user is prepared to receive automated messages?",heading:"Confirm...",onConfirmButtonClick:function(){e.handleAllowAutoSMS(!0)}}),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"contact"},"User Name*"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",disabled:n||a,id:"contact",name:"contact",className:(p.contact?"":"addFieldValidate")+" form-control",value:p.contact,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"role"},"Role"))),i.createElement("div",{className:"col-md-4"},i.createElement("select",{className:(p.role?"":"addFieldValidate")+" form-control",disabled:n&&"1"!=t.authenticatedUser.role||a||c,id:"role",name:"role",value:p.role,onChange:function(t){return e.handleContactForm(t)}},!("2"==G.role)&&l.a.map(function(e,t){return e.roleID==p.role?i.createElement("option",{key:t,value:e.roleID,selected:!0},e.value," "):i.createElement("option",{key:t,value:e.roleID},e.value," ")}),"2"==G.role&&l.b.map(function(e,t){return e.roleID==p.role?i.createElement("option",{key:t,value:e.roleID,selected:!0},e.value," "):i.createElement("option",{key:t,value:e.roleID},e.value," ")}))))),!(n||a)&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"newpassword"},"Password"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"password",disabled:a,id:"newpassword",name:"password",className:(p.password?"":"addFieldValidate")+" form-control",value:p.password,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"confirmpass"},"Confirm Password"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"password",disabled:a,id:"confirmpass",name:"confirmPassword",className:(p.confirmPassword?"":"addFieldValidate")+" form-control",value:p.confirmPassword,onChange:function(t){return e.handleContactForm(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"email"},"Email"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",disabled:a,id:"email",name:"email",className:(p.email?"":"addFieldValidate")+" form-control",value:p.email,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"company"},"Company"))),i.createElement("div",{className:"col-md-4"},i.createElement("input",{type:"text",disabled:a,id:"company",name:"company",className:"form-control",value:p.company,onChange:function(t){return e.handleContactForm(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"streetAddress"},"Address"))),i.createElement("div",{className:"col-md-3"},i.createElement("input",{type:"text",disabled:a,id:"streetAddress",name:"streetAddress",className:"form-control",placeholder:"Street Address",value:p.streetAddress,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("input",{type:"text",disabled:a,id:"city",name:"city",className:"form-control",placeholder:"City",value:p.city,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-3"},i.createElement("input",{type:"text",disabled:a,id:"state",name:"state",className:"form-control",placeholder:"State",value:p.state,onChange:function(t){return e.handleContactForm(t)}})),i.createElement("div",{className:"col-md-2"},i.createElement("input",{type:"text",disabled:a,id:"zipcode",name:"zipcode",className:"form-control",placeholder:"ZipCode",value:p.zipcode,onChange:function(t){return e.handleContactForm(t)}})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"assignedto"},"Facility Assigned To"))),i.createElement("div",{className:"col-md-4"},i.createElement(d.a,{isDisabled:a||!W||n&&"1"!=t.authenticatedUser.role,closeMenuOnSelect:!1,isMulti:!0,className:p.facilityAssignedTo&&p.facilityAssignedTo.length>0?"":"addFieldValidate",value:p.facilityAssignedTo,onChange:e.handleMultiFacilityChange,placeholder:"Select Building(s)",options:g})),i.createElement("div",{className:"col-md-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"departmentsAndGroups"},"Department / Group"))),i.createElement("div",{className:"col-md-3"},i.createElement(d.a,{isDisabled:a||!W||n&&"1"!=t.authenticatedUser.role,closeMenuOnSelect:!1,isMulti:!0,value:p.departmentsAndGroups,onChange:e.handleDepartmentsAndGroupsChange,placeholder:"Select Department & Group(s)",options:T})),i.createElement("div",{className:"col-md-1"},i.createElement("button",{disabled:a,className:"btn btn-sm btn-dark btn-fill","data-toggle":"modal","data-target":"#departmentsAndGroupsDailogeBox ",title:"Add"},i.createElement("i",{className:"fa fa-plus"}))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12",style:{display:"flex"}},!c&&i.createElement("div",{className:"col-md-4 col-sm-4 pl-0"},i.createElement("div",{style:{display:"grid"}},i.createElement("div",{className:"set-display-flex"},i.createElement("div",{className:"col-md-6 col-sm-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"hourlyRate"},"Hourly Rate"))),i.createElement("div",{className:"col-md-6 col-sm-2"},i.createElement("div",{className:"form-group ml-2"},i.createElement("input",{type:"number",disabled:n&&"1"!=t.authenticatedUser.role||a,id:"hourlyRate",name:"hourlyRate",className:"form-control",value:p.hourlyRate,onChange:function(t){return e.handleContactForm(t)}})))),i.createElement("button",{style:{width:"128px"},className:"btn mt-2 ml-3",onClick:function(){document.getElementById("btn-confirmNewLotAreaDialog").click()}},"Assign User Shift"))),i.createElement("div",{className:"col-md-1 col-sm-2"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"notes"},"Notes"))),i.createElement("div",{className:"col-md-7 col-sm-6"},i.createElement("div",{className:"form-group"},i.createElement("textarea",{rows:5,disabled:n&&"1"!=t.authenticatedUser.role||a,id:"notes",name:"notes",className:"form-control",value:Object(v.J)(p.notes,!1),onChange:function(t){return e.handleContactForm(t)}}))))),n&&i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-2"},p.name&&i.createElement(y.a,{userName:p.contact,dialogButtonName:"SetPassword",displaybuttonText:"Set Password",displaybutton:!0})),i.createElement("div",{className:"col-md-5 col-md-offset-5 pr-5"},i.createElement("button",{className:"btn btn-fill btn-primary pull-right ","data-toggle":"modal","data-target":"#AddDailogeBox",title:"Enter Signature",onClick:function(){}},p.signatureDataURL?"Update Signature":"Add Signature"),i.createElement("br",null),p.signatureDataURL&&i.createElement("img",{src:p.signatureDataURL,style:{marginTop:5,width:"100%",maxHeight:"150px",border:"1px solid #14505b",borderRadius:"5px"}}),i.createElement(x.a,{id:"AddDailogeBox",heading:"Signature Pad",saveButtonText:"Done",onSaveButtonClick:function(){e.saveSignature()}},i.createElement("div",{className:"container-fluid"},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"border",style:{height:"150px",width:"500px",borderBottom:"1px solid #14505b",borderRadius:"5px"}},i.createElement(N.a,{penColor:"black",minWidth:1,maxWidth:1,canvasProps:{width:500,height:150,className:"sigCanvas"},ref:function(t){e.sigPad=t}}),i.createElement("button",{className:"btn btn-danger pull-right",title:"Clear Signature",onClick:function(){e.sigPad.clear()}},"Clear"))))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-10 col-md-offset-1"},i.createElement("div",{className:"col-md-12",style:{paddingLeft:"0px"}},i.createElement("div",{className:"card no-margin padding-10"},i.createElement("div",{className:"container-fluid no-padding"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12  padding-10"},i.createElement("div",{className:"col-md-3 col-sm-4",style:{paddingTop:"8px"}},i.createElement("h5",{className:"no-margin"},i.createElement("strong",null,"Profile Image:"))),i.createElement("div",{className:"col-md-9 col-sm-8"},!(p&&p.profileImage)&&!M&&i.createElement("button",{disabled:a,className:"btn btn-sm btn-dark btn-fill",title:"Upload File",onClick:function(){e.setState({showhideImageUploader:!0})}},i.createElement("i",{className:"fa fa-plus"}))))),M&&i.createElement("div",{className:"row",style:{padding:"10px 10px 0px 10px"}},i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("a",{className:"margin-5 closebtnfornewcomp pull-right",title:"Close",onClick:function(){e.setState({showhideImageUploader:!1,fileTitle:""})}},i.createElement("i",{className:"fa fa-close"})),i.createElement("div",{className:"card no-margin padding-10",style:{background:"#d3d3d30f"}},i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3 headingText padding-10"},"Title:"),i.createElement("div",{className:"col-md-9"},i.createElement("input",{onChange:function(t){e.handleTitleChange(t.target.value)},type:"text",name:"fileTitle",id:"fileTitle",value:F,className:"form-control cell_border"})),!F&&i.createElement("div",{id:"warningText",className:"col-md-12 d-none center"},i.createElement("h5",{className:"text-danger headingText"}," File Title is empty!!!  ")))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:"col-md-3 headingText padding-10"},"File Upload:"),i.createElement("div",{className:"col-md-9",onClick:function(){F?(document.getElementById("fileTitle").style.boxShadow="0px 0px 15px gainsboro",document.getElementById("warningText").style.display="none"):(document.getElementById("fileTitle").style.boxShadow="0px 0px 15px red",document.getElementById("warningText").style.display="block")}},i.createElement(C.a,{disable:!e.state.fileTitle,single:!0,handleAttachedFile:e.handlefileAttached,files:I})))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12",style:{paddingRight:"24px"}},i.createElement("button",{className:"margin-5 btn btn-danger pull-right active",onClick:function(){e.setState({showhideImageUploader:!1,fileTitle:""})}}," Cancel "),i.createElement("button",{className:"margin-5 btn btn-success pull-right active",disabled:!(F&&P&&P.length>0),onClick:function(){return k(e,void 0,void 0,function(){var e=this;return A(this,function(t){switch(t.label){case 0:return[4,this.saveImage()];case 1:return t.sent(),setTimeout(function(){p.profileImage=P[0],e.setState({Contact:p,recentSelectedFiles:[]})},2e3),[2]}})})}}," Done ")))))),p&&p.profileImage&&i.createElement("div",{className:"row padding-10",style:{marginBottom:"0px"}},i.createElement("div",{className:"col-md-12"},i.createElement(_.a,{colSize:6,filesName:[p.profileImage],onChangeFiles:e.onFileChange,showDownloadLink:!0,showRemoveButton:!0})))))))),i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-4"},"3"!=t.authenticatedUser.role&&i.createElement(i.Fragment,null,i.createElement("div",{className:"row padding-10"},i.createElement("div",{className:"col-md-12"},i.createElement("h3",null,"Qualifications"),i.createElement("span",null,"(check all that are applicable)"))),i.createElement("div",{className:"col-md-12 padding-10"},i.createElement("div",{className:"col-md-12",id:"div-qualifications"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{className:(p.qualifications?"":"addFieldValidate")+" list-group"},f.map(function(t,n){return i.createElement("div",{key:n},i.createElement("input",{disabled:a,type:"checkbox",name:t.value,checked:!(!p.qualifications||!p.qualifications.find(function(e){return e==t.value})),id:t.value,onChange:function(a){return e.handleQualification(t.value,a.target.checked)}}),i.createElement("label",{className:"list-group-item",htmlFor:t.value},t.value.replace(new RegExp("Tenant","g"),"Customer (Tenant)"),"utility_company"==t.value.toLocaleLowerCase().trim()&&p.utility&&p.utility.length>0?i.createElement("button",{className:"btn-sm btn-info active custom-outline-btn paddingmargin",style:{float:"right",border:0,color:"white"},title:"Utility List",onClick:function(){e.setState({selectedUtility:p.utility}),document.getElementById("btnutilityQualificationSelect").click()}},i.createElement("i",{className:"fa fa-th-large"})):""))})))))))),i.createElement("div",{className:"row"},i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"col-md-12 inline-block"},!a&&i.createElement("button",{disabled:!R,className:"btn btn-primary btn-fill",onClick:function(){e.setState({verifyUser:!0})}},i.createElement("i",{className:"fa fa-save"})," Save"),i.createElement("button",{id:"btnbackPeopleList",className:"btn btn-secondary btn-fill",onClick:function(){window.location.hash=c?r+"/"+s+"/Customer":r+"/"+s+"/People"}},i.createElement("i",{className:"fa fa-window-close"})," Cancel"))))),i.createElement(x.a,{isFullWidth:!1,id:"departmentsAndGroupsDailogeBox",heading:"Add Department / Group",saveButtonText:"Done",onSaveButtonClick:function(){e.addNewDepartmentGroup()},disableSaveButton:!O},i.createElement("div",{className:"content"},i.createElement("div",{className:"dataCard"},i.createElement("div",null,i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-12"},i.createElement("div",{style:{padding:"10px"},className:"row"},i.createElement("div",{style:{paddingTop:"10px"},className:"col-md-4 headingText center"},"Department/Group Name:"),i.createElement("div",{className:"col-md-8 headingText"},i.createElement("input",{value:O,onChange:function(t){e.setState({newDepartAndGroupName:t.target.value})},type:"text",className:"form-control"})))))))))),i.createElement("button",{type:"button",id:"btn-confirmNewLotAreaDialog",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#ConfirmNewLotAreaDialog",style:{display:"none"}},"."),i.createElement(x.a,{id:"ConfirmNewLotAreaDialog",showCancelButton:!0,showSaveButton:!a,disableSaveButton:!1,cancelButtonText:"Cancel",onCancelButtonClickActive:!0,onCancelButtonClick:function(){e.setState({toggleForm:!1})},heading:"Assign User Shift & Extend Time",onSaveButtonClick:function(){}},i.createElement("div",{style:{display:"none"}},i.createElement("div",{className:"set-display-flex my-4"},i.createElement("div",{className:"col-md-3 col-sm-3 headingText"},"Active"),i.createElement("div",{className:"col-md-3 col-sm-3 headingText"},"Days"),i.createElement("div",{className:"col-md-3 col-sm-3 headingText"},"From"),i.createElement("div",{className:"col-md-3 col-sm-3 headingText"},"To")),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Monday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Tuesday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Wednesday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Thursday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Friday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Saturday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})}))),i.createElement("div",{className:"set-display-flex mb-4"},i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},i.createElement("input",{type:"checkbox"})),i.createElement("div",{className:"col-md-3 col-sm-3",style:{alignSelf:"center"}},"Sunday"),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})),i.createElement("div",{className:"col-md-3 col-sm-3"},i.createElement(E.a,{className:"form-control",selected:w?H:null,onChange:function(t){e.handleSMSSchedule("From",t)},showTimeSelect:!0,timeFormat:"HH:mm",showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:60,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Start Time","aria-label":"","aria-describedby":"button-addon4",value:e.state.smsStartTime})})))),i.createElement("div",{className:"set-display-flex my-4"},i.createElement("div",{className:"col-md-7",style:{alignSelf:"center"}},i.createElement("label",{className:"pt-0"},"  Shift start time:   ")),i.createElement("div",{className:"col-md-5"},i.createElement(E.a,{className:"form-control",selected:q,onChange:function(t){e.handleShiftStartTime(t)},showTimeSelect:!0,timeFormat:"HH:mm",disabled:a,showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:5,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Shift Start Time","aria-label":"","aria-describedby":"button-addon4",value:q.toLocaleTimeString()})}))),i.createElement("div",{className:"set-display-flex my-4"},i.createElement("div",{className:"col-md-7",style:{alignSelf:"center"}},i.createElement("label",{className:"pt-0"}," Shift end time: ")),i.createElement("div",{className:"col-md-5"},i.createElement(E.a,{className:"form-control",selected:Q,onChange:function(t){e.handleShitEndTime(t)},showTimeSelect:!0,timeFormat:"HH:mm",disabled:a,showTimeSelectOnly:!0,dateFormat:"HH:mm",timeIntervals:5,customInput:i.createElement("input",{type:"text",className:"form-control",placeholder:"Shift End Time","aria-label":"","aria-describedby":"button-addon4",value:Q.toLocaleTimeString()})}))),i.createElement("div",{className:"set-display-flex my-4"},i.createElement("div",{className:"col-md-7",style:{alignSelf:"center"}},i.createElement("label",{className:"pt-0"}," ",p.expandedIndefinitely?"Extend time in hours (Permanently):":"Extend time in hours (Temporarily):"," ")),i.createElement("div",{className:"col-md-5"},i.createElement("input",{id:"hoursToBeExtended",name:"hoursToBeExtended",type:"text",className:"form-control","aria-label":"","aria-describedby":"button-addon4",onChange:function(t){e.handleHoursToBeExtended(t)},value:p&&p.hoursToBeExtended?p.hoursToBeExtended:"",disabled:e.props.isView,pattern:"^([1-9]|1[012])$"}))),i.createElement("div",{className:"set-display-flex "},i.createElement("div",{className:"col-md-7",style:{alignSelf:"center"}},i.createElement("label",{className:"pt-0",htmlFor:"expandedIndefinitely"},"Extend time to be expand indefinitely: ")),i.createElement("div",{className:"col-md-4"},i.createElement("input",{id:"expandedIndefinitely",disabled:e.props.isView,type:"checkbox",checked:p.expandedIndefinitely,onChange:function(t){e.expandedIndefinitelyChange(t)}})))),i.createElement("button",{type:"button",id:"btnutilityQualificationSelect",className:"btn btn-primary btn-fill","data-toggle":"modal","data-target":"#utilityQualificationSelect",style:{display:"none"}},"."),i.createElement(x.a,{id:"utilityQualificationSelect",showCancelButton:!0,showSaveButton:!a,disableSaveButton:!1,cancelButtonText:"Cancel",onCancelButtonClickActive:!0,onCancelButtonClick:function(){!n&&!a&&B&&B.length<=0&&(e.handleQualification("Utility_Company",!1),e.setState({selectedUtility:[]}))},heading:"Assign User Utility",onSaveButtonClick:function(){B&&B.length>0?p.utility=B:(e.handleQualification("Utility_Company",!1),p.utility=[]),e.setState({Contact:p,selectedUtility:[]})}},i.createElement("div",{className:"set-display-flex "},i.createElement("div",{className:"col-md-5"},i.createElement("div",{className:"form-group"},i.createElement("label",{htmlFor:"departmentsAndGroups"},"Utility Name: "))),i.createElement("div",{className:"col-md-7"},i.createElement(d.a,{isDisabled:a||!W||n&&"1"!=t.authenticatedUser.role,closeMenuOnSelect:!1,isMulti:!0,value:a?p.utility:B,onChange:e.handleUtilityChange,placeholder:"Select Utilty",options:j})))))})},a.contextType=o.a,a}(i.Component);t.default=P}.call(t,a(6).Buffer)},2763:function(e,t,a){!function(t,n){e.exports=n(a(4),a(2),a(2764),a(2765))}(0,function(e,t,a,n){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=n(a(1)),s=a(2),c=n(s),m=n(a(3)),d=n(a(4)),u=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),r=0;r<o;r++)l[r]=arguments[r];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),n._sigPad=null,n._excludeOurProps=function(){var e=n.props;return e.canvasProps,e.clearOnResize,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["canvasProps","clearOnResize"])},n.getCanvas=function(){return n._canvas},n.getTrimmedCanvas=function(){var e=document.createElement("canvas");return e.width=n._canvas.width,e.height=n._canvas.height,e.getContext("2d").drawImage(n._canvas,0,0),(0,d.default)(e)},n.getSignaturePad=function(){return n._sigPad},n._checkClearOnResize=function(){n.props.clearOnResize&&n._resizeCanvas()},n._resizeCanvas=function(){var e=n.props.canvasProps||{},t=e.width,a=e.height;if(!t||!a){var i=n._canvas,o=Math.max(window.devicePixelRatio||1,1);t||(i.width=i.offsetWidth*o),a||(i.height=i.offsetHeight*o),i.getContext("2d").scale(o,o),n.clear()}},n.on=function(){return window.addEventListener("resize",n._checkClearOnResize),n._sigPad.on()},n.off=function(){return window.removeEventListener("resize",n._checkClearOnResize),n._sigPad.off()},n.clear=function(){return n._sigPad.clear()},n.isEmpty=function(){return n._sigPad.isEmpty()},n.fromDataURL=function(e,t){return n._sigPad.fromDataURL(e,t)},n.toDataURL=function(e,t){return n._sigPad.toDataURL(e,t)},n.fromData=function(e){return n._sigPad.fromData(e)},n.toData=function(){return n._sigPad.toData()},i(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),l(t,[{key:"componentDidMount",value:function(){this._sigPad=new m.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var e=this,t=this.props.canvasProps;return c.default.createElement("canvas",o({ref:function(t){e._canvas=t}},t))}}]),t}();u.propTypes={velocityFilterWeight:r.default.number,minWidth:r.default.number,maxWidth:r.default.number,minDistance:r.default.number,dotSize:r.default.oneOfType([r.default.number,r.default.func]),penColor:r.default.string,throttle:r.default.number,onEnd:r.default.func,onBegin:r.default.func,canvasProps:r.default.object,clearOnResize:r.default.bool},u.defaultProps={clearOnResize:!0},t.default=u},function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t){e.exports=n}])})},2764:function(e,t,a){"use strict";function n(e,t,a){this.x=e,this.y=t,this.time=a||(new Date).getTime()}function i(e,t,a,n){this.startPoint=e,this.control1=t,this.control2=a,this.endPoint=n}function o(e,t){var a=this,n=t||{};this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t,a){var n,i,o,l=null,r=0;a||(a={});var s=function(){r=!1===a.leading?0:Date.now(),l=null,o=e.apply(n,i),l||(n=i=null)};return function(){var c=Date.now();r||!1!==a.leading||(r=c);var m=t-(c-r);return n=this,i=arguments,m<=0||m>t?(l&&(clearTimeout(l),l=null),r=c,o=e.apply(n,i),l||(n=i=null)):l||!1===a.trailing||(l=setTimeout(s,m)),o}}(o.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=o.prototype._strokeUpdate,this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.onBegin=n.onBegin,this.onEnd=n.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(a._mouseButtonDown=!0,a._strokeBegin(e))},this._handleMouseMove=function(e){a._mouseButtonDown&&a._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&a._mouseButtonDown&&(a._mouseButtonDown=!1,a._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){var t=e.changedTouches[0];a._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];a._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){e.target===a._canvas&&(e.preventDefault(),a._strokeEnd(e))},this.on()}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},n.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},n.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},i.prototype.length=function(){for(var e=0,t=void 0,a=void 0,n=0;n<=10;n+=1){var i=n/10,o=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){var r=o-t,s=l-a;e+=Math.sqrt(r*r+s*s)}t=o,a=l}return e},i.prototype._point=function(e,t,a,n,i){return t*(1-e)*(1-e)*(1-e)+3*a*(1-e)*(1-e)*e+3*n*(1-e)*e*e+i*e*e*e},o.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},o.prototype.fromDataURL=function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Image,i=a.ratio||window.devicePixelRatio||1,o=a.width||this._canvas.width/i,l=a.height||this._canvas.height/i;this._reset(),n.src=e,n.onload=function(){t._ctx.drawImage(n,0,0,o,l)},this._isEmpty=!1},o.prototype.toDataURL=function(e){var t;switch(e){case"image/svg+xml":return this._toSVG();default:for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(t=this._canvas).toDataURL.apply(t,[e].concat(n))}},o.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},o.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},o.prototype.isEmpty=function(){return this._isEmpty},o.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"===typeof this.onBegin&&this.onBegin(e)},o.prototype._strokeUpdate=function(e){var t=e.clientX,a=e.clientY,n=this._createPoint(t,a),i=this._data[this._data.length-1],o=i&&i[i.length-1],l=o&&n.distanceTo(o)<this.minDistance;if(!o||!l){var r=this._addPoint(n),s=r.curve,c=r.widths;s&&c&&this._drawCurve(s,c.start,c.end),this._data[this._data.length-1].push({x:n.x,y:n.y,time:n.time,color:this.penColor})}},o.prototype._strokeEnd=function(e){var t=this.points.length>2,a=this.points[0];if(!t&&a&&this._drawDot(a),a){var n=this._data[this._data.length-1],i=n[n.length-1];a.equals(i)||n.push({x:a.x,y:a.y,time:a.time,color:this.penColor})}"function"===typeof this.onEnd&&this.onEnd(e)},o.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},o.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},o.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},o.prototype._createPoint=function(e,t,a){var i=this._canvas.getBoundingClientRect();return new n(e-i.left,t-i.top,a||(new Date).getTime())},o.prototype._addPoint=function(e){var t=this.points;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var a=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,n=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,o=new i(t[1],a,n,t[2]),l=this._calculateCurveWidths(o);return t.shift(),{curve:o,widths:l}}return{}},o.prototype._calculateCurveControlPoints=function(e,t,a){var i=e.x-t.x,o=e.y-t.y,l=t.x-a.x,r=t.y-a.y,s=(e.x+t.x)/2,c=(e.y+t.y)/2,m=(t.x+a.x)/2,d=(t.y+a.y)/2,u=Math.sqrt(i*i+o*o),h=Math.sqrt(l*l+r*r),p=h/(u+h),f=m+(s-m)*p,v=d+(c-d)*p,g=t.x-f,y=t.y-v;return{c1:new n(s+g,c+y),c2:new n(m+g,d+y)}},o.prototype._calculateCurveWidths=function(e){var t=e.startPoint,a=e.endPoint,n={start:null,end:null},i=this.velocityFilterWeight*a.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i);return n.start=this._lastWidth,n.end=o,this._lastVelocity=i,this._lastWidth=o,n},o.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},o.prototype._drawPoint=function(e,t,a){var n=this._ctx;n.moveTo(e,t),n.arc(e,t,a,0,2*Math.PI,!1),this._isEmpty=!1},o.prototype._drawCurve=function(e,t,a){var n=this._ctx,i=a-t,o=Math.floor(e.length());n.beginPath();for(var l=0;l<o;l+=1){var r=l/o,s=r*r,c=s*r,m=1-r,d=m*m,u=d*m,h=u*e.startPoint.x;h+=3*d*r*e.control1.x,h+=3*m*s*e.control2.x,h+=c*e.endPoint.x;var p=u*e.startPoint.y;p+=3*d*r*e.control1.y,p+=3*m*s*e.control2.y,p+=c*e.endPoint.y;var f=t+c*i;this._drawPoint(h,p,f)}n.closePath(),n.fill()},o.prototype._drawDot=function(e){var t=this._ctx,a="function"===typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,a),t.closePath(),t.fill()},o.prototype._fromData=function(e,t,a){for(var i=0;i<e.length;i+=1){var o=e[i];if(o.length>1)for(var l=0;l<o.length;l+=1){var r=o[l],s=new n(r.x,r.y,r.time),c=r.color;if(0===l)this.penColor=c,this._reset(),this._addPoint(s);else if(l!==o.length-1){var m=this._addPoint(s),d=m.curve,u=m.widths;d&&u&&t(d,u,c)}}else this._reset(),a(o[0])}},o.prototype._toSVG=function(){var e=this,t=this._data,a=this._canvas,n=Math.max(window.devicePixelRatio||1,1),i=a.width/n,o=a.height/n,l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"width",a.width),l.setAttributeNS(null,"height",a.height),this._fromData(t,function(e,t,a){var n=document.createElement("path");if(!isNaN(e.control1.x)&&!isNaN(e.control1.y)&&!isNaN(e.control2.x)&&!isNaN(e.control2.y)){var i="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3);n.setAttribute("d",i),n.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),n.setAttribute("stroke",a),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),l.appendChild(n)}},function(t){var a=document.createElement("circle"),n="function"===typeof e.dotSize?e.dotSize():e.dotSize;a.setAttribute("r",n),a.setAttribute("cx",t.x),a.setAttribute("cy",t.y),a.setAttribute("fill",t.color),l.appendChild(a)});var r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+o+'" width="'+i+'" height="'+o+'">',s=l.innerHTML;if(void 0===s){var c=document.createElement("dummy"),m=l.childNodes;c.innerHTML="";for(var d=0;d<m.length;d+=1)c.appendChild(m[d].cloneNode(!0));s=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(r+s+"</svg>")},o.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,function(e,a){return t._drawCurve(e,a.start,a.end)},function(e){return t._drawDot(e)}),this._data=e},o.prototype.toData=function(){return this._data},t.default=o},2765:function(e,t,a){!function(t,a){e.exports=a()}(0,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t){"use strict";function a(e,t,a,n){return function(e,t,a,n){return{red:n[4*(a*t+e)],green:n[4*(a*t+e)+1],blue:n[4*(a*t+e)+2],alpha:n[4*(a*t+e)+3]}}(e,t,a,n).alpha}function n(e,t,n,i){for(var o=e?1:-1,l=e?0:n-1;e?l<n:l>-1;l+=o)for(var r=0;r<t;r++)if(a(r,l,t,i))return l;return null}function i(e,t,n,i){for(var o=e?1:-1,l=e?0:t-1;e?l<t:l>-1;l+=o)for(var r=0;r<n;r++)if(a(l,r,t,i))return l;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getContext("2d"),a=e.width,o=e.height,l=t.getImageData(0,0,a,o).data,r=n(!0,a,o,l),s=n(!1,a,o,l),c=i(!0,a,o,l),m=i(!1,a,o,l)-c+1,d=s-r+1,u=t.getImageData(c,r,m,d);return e.width=m,e.height=d,t.clearRect(0,0,m,d),t.putImageData(u,0,0),e}}])})}});